"use strict";var CIt=Object.create;var E4=Object.defineProperty;var z4e=Object.getOwnPropertyDescriptor;var vIt=Object.getOwnPropertyNames;var xIt=Object.getPrototypeOf,EIt=Object.prototype.hasOwnProperty;var G4e=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),V4e=t=>{throw TypeError(t)};var s=(t,e)=>E4(t,"name",{value:e,configurable:!0});var Bm=(t,e)=>()=>(t&&(e=t(t=0)),e);var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ca=(t,e)=>{for(var r in e)E4(t,r,{get:e[r],enumerable:!0})},Y4e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vIt(e))!EIt.call(t,i)&&i!==r&&E4(t,i,{get:()=>e[i],enumerable:!(n=z4e(e,i))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?CIt(xIt(t)):{},Y4e(e||!t||!t.__esModule?E4(r,"default",{value:t,enumerable:!0}):r,t)),bIt=t=>Y4e(E4({},"__esModule",{value:!0}),t),of=(t,e,r,n)=>{for(var i=n>1?void 0:n?z4e(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&E4(e,r,i),i},va=(t,e)=>(r,n)=>e(r,n,t);var Hde=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&V4e("Object expected");var n,i;r&&(n=e[G4e("asyncDispose")]),n===void 0&&(n=e[G4e("dispose")],r&&(i=n)),typeof n!="function"&&V4e("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},$de=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=Bm(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var J4e=H(Wde=>{d();var K4e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Wde.encode=function(t){if(0<=t&&t<K4e.length)return K4e[t];throw new TypeError("Must be between 0 and 63: "+t)};Wde.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var Vde=H(Gde=>{d();var X4e=J4e(),jde=5,Z4e=1<<jde,eDe=Z4e-1,tDe=Z4e;function IIt(t){return t<0?(-t<<1)+1:(t<<1)+0}s(IIt,"toVLQSigned");function TIt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(TIt,"fromVLQSigned");Gde.encode=s(function(e){var r="",n,i=IIt(e);do n=i&eDe,i>>>=jde,i>0&&(n|=tDe),r+=X4e.encode(n);while(i>0);return r},"base64VLQ_encode");Gde.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=X4e.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&tDe),l&=eDe,o=o+(l<<a),a+=jde}while(c);n.value=TIt(o),n.rest=r},"base64VLQ_decode")});var T4=H(vd=>{d();function wIt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(wIt,"getArg");vd.getArg=wIt;var rDe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,SIt=/^data:.+\,.+$/;function v9(t){var e=t.match(rDe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(v9,"urlParse");vd.urlParse=v9;function b4(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(b4,"urlGenerate");vd.urlGenerate=b4;function zde(t){var e=t,r=v9(t);if(r){if(!r.path)return t;e=r.path}for(var n=vd.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,b4(r)):e}s(zde,"normalize");vd.normalize=zde;function nDe(t,e){t===""&&(t="."),e===""&&(e=".");var r=v9(e),n=v9(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),b4(r);if(r||e.match(SIt))return e;if(n&&!n.host&&!n.path)return n.host=e,b4(n);var i=e.charAt(0)==="/"?e:zde(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,b4(n)):i}s(nDe,"join");vd.join=nDe;vd.isAbsolute=function(t){return t.charAt(0)==="/"||rDe.test(t)};function _It(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(_It,"relative");vd.relative=_It;var iDe=function(){var t=Object.create(null);return!("__proto__"in t)}();function oDe(t){return t}s(oDe,"identity");function RIt(t){return sDe(t)?"$"+t:t}s(RIt,"toSetString");vd.toSetString=iDe?oDe:RIt;function kIt(t){return sDe(t)?t.slice(1):t}s(kIt,"fromSetString");vd.fromSetString=iDe?oDe:kIt;function sDe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(sDe,"isProtoString");function PIt(t,e,r){var n=I4(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:I4(t.name,e.name)}s(PIt,"compareByOriginalPositions");vd.compareByOriginalPositions=PIt;function DIt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=I4(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:I4(t.name,e.name)}s(DIt,"compareByGeneratedPositionsDeflated");vd.compareByGeneratedPositionsDeflated=DIt;function I4(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(I4,"strcmp");function BIt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=I4(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:I4(t.name,e.name)}s(BIt,"compareByGeneratedPositionsInflated");vd.compareByGeneratedPositionsInflated=BIt;function NIt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(NIt,"parseSourceMapInput");vd.parseSourceMapInput=NIt;function MIt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=v9(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=nDe(b4(n),e)}return zde(e)}s(MIt,"computeSourceURL");vd.computeSourceURL=MIt});var Jde=H(aDe=>{d();var Yde=T4(),Kde=Object.prototype.hasOwnProperty,N_=typeof Map<"u";function Rv(){this._array=[],this._set=N_?new Map:Object.create(null)}s(Rv,"ArraySet");Rv.fromArray=s(function(e,r){for(var n=new Rv,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");Rv.prototype.size=s(function(){return N_?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");Rv.prototype.add=s(function(e,r){var n=N_?e:Yde.toSetString(e),i=N_?this.has(e):Kde.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(N_?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");Rv.prototype.has=s(function(e){if(N_)return this._set.has(e);var r=Yde.toSetString(e);return Kde.call(this._set,r)},"ArraySet_has");Rv.prototype.indexOf=s(function(e){if(N_){var r=this._set.get(e);if(r>=0)return r}else{var n=Yde.toSetString(e);if(Kde.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");Rv.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");Rv.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");aDe.ArraySet=Rv});var uDe=H(lDe=>{d();var cDe=T4();function LIt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||cDe.compareByGeneratedPositionsInflated(t,e)<=0}s(LIt,"generatedPositionAfter");function vW(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(vW,"MappingList");vW.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");vW.prototype.add=s(function(e){LIt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");vW.prototype.toArray=s(function(){return this._sorted||(this._array.sort(cDe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");lDe.MappingList=vW});var Xde=H(dDe=>{d();var x9=Vde(),Yc=T4(),xW=Jde().ArraySet,FIt=uDe().MappingList;function Nm(t){t||(t={}),this._file=Yc.getArg(t,"file",null),this._sourceRoot=Yc.getArg(t,"sourceRoot",null),this._skipValidation=Yc.getArg(t,"skipValidation",!1),this._sources=new xW,this._names=new xW,this._mappings=new FIt,this._sourcesContents=null}s(Nm,"SourceMapGenerator");Nm.prototype._version=3;Nm.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Nm({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Yc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Yc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Nm.prototype.addMapping=s(function(e){var r=Yc.getArg(e,"generated"),n=Yc.getArg(e,"original",null),i=Yc.getArg(e,"source",null),o=Yc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Nm.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Yc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Yc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Yc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Nm.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Yc.relative(o,i));var a=new xW,c=new xW;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=Yc.join(n,l.source)),o!=null&&(l.source=Yc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=Yc.join(n,l)),o!=null&&(l=Yc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");Nm.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Nm.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!Yc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=x9.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=x9.encode(p-a),a=p,l+=x9.encode(u.originalLine-1-i),i=u.originalLine-1,l+=x9.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=x9.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");Nm.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Yc.relative(r,n));var i=Yc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Nm.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Nm.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");dDe.SourceMapGenerator=Nm});var fDe=H(M_=>{d();M_.GREATEST_LOWER_BOUND=1;M_.LEAST_UPPER_BOUND=2;function Zde(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Zde(a,e,r,n,i,o):o==M_.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Zde(t,a,r,n,i,o):o==M_.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Zde,"recursiveSearch");M_.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Zde(-1,r.length,e,r,n,i||M_.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var mDe=H(pDe=>{d();function efe(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(efe,"swap");function OIt(t,e){return Math.round(t+Math.random()*(e-t))}s(OIt,"randomIntInRange");function tfe(t,e,r,n){if(r<n){var i=OIt(r,n),o=r-1;efe(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,efe(t,o,c));efe(t,o+1,c);var l=o+1;tfe(t,e,r,l-1),tfe(t,e,l+1,n)}}s(tfe,"doQuickSort");pDe.quickSort=function(t,e){tfe(t,e,0,t.length-1)}});var gDe=H(EW=>{d();var Qr=T4(),rfe=fDe(),w4=Jde().ArraySet,QIt=Vde(),E9=mDe().quickSort;function Vs(t,e){var r=t;return typeof t=="string"&&(r=Qr.parseSourceMapInput(t)),r.sections!=null?new jg(r,e):new Bu(r,e)}s(Vs,"SourceMapConsumer");Vs.fromSourceMap=function(t,e){return Bu.fromSourceMap(t,e)};Vs.prototype._version=3;Vs.prototype.__generatedMappings=null;Object.defineProperty(Vs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Vs.prototype.__originalMappings=null;Object.defineProperty(Vs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Vs.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Vs.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Vs.GENERATED_ORDER=1;Vs.ORIGINAL_ORDER=2;Vs.GREATEST_LOWER_BOUND=1;Vs.LEAST_UPPER_BOUND=2;Vs.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Vs.GENERATED_ORDER,a;switch(o){case Vs.GENERATED_ORDER:a=this._generatedMappings;break;case Vs.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=Qr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Vs.prototype.allGeneratedPositionsFor=s(function(e){var r=Qr.getArg(e,"line"),n={source:Qr.getArg(e,"source"),originalLine:r,originalColumn:Qr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Qr.compareByOriginalPositions,rfe.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:Qr.getArg(a,"generatedLine",null),column:Qr.getArg(a,"generatedColumn",null),lastColumn:Qr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:Qr.getArg(a,"generatedLine",null),column:Qr.getArg(a,"generatedColumn",null),lastColumn:Qr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");EW.SourceMapConsumer=Vs;function Bu(t,e){var r=t;typeof t=="string"&&(r=Qr.parseSourceMapInput(t));var n=Qr.getArg(r,"version"),i=Qr.getArg(r,"sources"),o=Qr.getArg(r,"names",[]),a=Qr.getArg(r,"sourceRoot",null),c=Qr.getArg(r,"sourcesContent",null),l=Qr.getArg(r,"mappings"),u=Qr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=Qr.normalize(a)),i=i.map(String).map(Qr.normalize).map(function(f){return a&&Qr.isAbsolute(a)&&Qr.isAbsolute(f)?Qr.relative(a,f):f}),this._names=w4.fromArray(o.map(String),!0),this._sources=w4.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return Qr.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(Bu,"BasicSourceMapConsumer");Bu.prototype=Object.create(Vs.prototype);Bu.prototype.consumer=Vs;Bu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Qr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Bu.fromSourceMap=s(function(e,r){var n=Object.create(Bu.prototype),i=n._names=w4.fromArray(e._names.toArray(),!0),o=n._sources=w4.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return Qr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],m=new hDe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return E9(n.__originalMappings,Qr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Bu.prototype._version=3;Object.defineProperty(Bu.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function hDe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(hDe,"Mapping");Bu.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},m={},h=[],g=[],A,y,E,b,S;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(A=new hDe,A.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(y=e.slice(f,b),E=p[y],E)f+=y.length;else{for(E=[];f<b;)QIt.decode(e,f,m),S=m.value,f=m.rest,E.push(S);if(E.length===2)throw new Error("Found a source, but no line and column");if(E.length===3)throw new Error("Found a source and line, but no column");p[y]=E}A.generatedColumn=i+E[0],i=A.generatedColumn,E.length>1&&(A.source=c+E[1],c+=E[1],A.originalLine=o+E[2],o=A.originalLine,A.originalLine+=1,A.originalColumn=a+E[3],a=A.originalColumn,E.length>4&&(A.name=l+E[4],l+=E[4])),g.push(A),typeof A.originalLine=="number"&&h.push(A)}E9(g,Qr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,E9(h,Qr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");Bu.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return rfe.search(e,r,o,a)},"SourceMapConsumer_findMapping");Bu.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Bu.prototype.originalPositionFor=s(function(e){var r={generatedLine:Qr.getArg(e,"line"),generatedColumn:Qr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Qr.compareByGeneratedPositionsDeflated,Qr.getArg(e,"bias",Vs.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Qr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Qr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Qr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Qr.getArg(i,"originalLine",null),column:Qr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Bu.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Bu.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Qr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Qr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Bu.prototype.generatedPositionFor=s(function(e){var r=Qr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Qr.getArg(e,"line"),originalColumn:Qr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Qr.compareByOriginalPositions,Qr.getArg(e,"bias",Vs.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Qr.getArg(o,"generatedLine",null),column:Qr.getArg(o,"generatedColumn",null),lastColumn:Qr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");EW.BasicSourceMapConsumer=Bu;function jg(t,e){var r=t;typeof t=="string"&&(r=Qr.parseSourceMapInput(t));var n=Qr.getArg(r,"version"),i=Qr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new w4,this._names=new w4;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=Qr.getArg(a,"offset"),l=Qr.getArg(c,"line"),u=Qr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Vs(Qr.getArg(a,"map"),e)}})}s(jg,"IndexedSourceMapConsumer");jg.prototype=Object.create(Vs.prototype);jg.prototype.constructor=Vs;jg.prototype._version=3;Object.defineProperty(jg.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});jg.prototype.originalPositionFor=s(function(e){var r={generatedLine:Qr.getArg(e,"line"),generatedColumn:Qr.getArg(e,"column")},n=rfe.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");jg.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");jg.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");jg.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Qr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");jg.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=Qr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}E9(this.__generatedMappings,Qr.compareByGeneratedPositionsDeflated),E9(this.__originalMappings,Qr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");EW.IndexedSourceMapConsumer=jg});var yDe=H(ADe=>{d();var UIt=Xde().SourceMapGenerator,bW=T4(),qIt=/(\r?\n)/,HIt=10,S4="$$$isSourceNode$$$";function sp(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[S4]=!0,n!=null&&this.add(n)}s(sp,"SourceNode");sp.fromStringWithSourceMap=s(function(e,r,n){var i=new sp,o=e.split(qIt),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(m){if(f!==null)if(l<m.generatedLine)p(f,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(f,g),f=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}f=m},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=bW.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?bW.join(n,m.source):m.source;i.add(new sp(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");sp.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[S4]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");sp.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[S4]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");sp.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[S4]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");sp.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");sp.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[S4]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");sp.prototype.setSourceContent=s(function(e,r){this.sourceContents[bW.toSetString(e)]=r},"SourceNode_setSourceContent");sp.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][S4]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(bW.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");sp.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");sp.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new UIt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===HIt?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");ADe.SourceNode=sp});var CDe=H(IW=>{d();IW.SourceMapGenerator=Xde().SourceMapGenerator;IW.SourceMapConsumer=gDe().SourceMapConsumer;IW.SourceNode=yDe().SourceNode});var xDe=H((GPr,vDe)=>{d();var $It=Object.prototype.toString,nfe=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function WIt(t){return $It.call(t).slice(8,-1)==="ArrayBuffer"}s(WIt,"isArrayBuffer");function jIt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return nfe?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(jIt,"fromArrayBuffer");function GIt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return nfe?Buffer.from(t,e):new Buffer(t,e)}s(GIt,"fromString");function VIt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return WIt(t)?jIt(t,e,r):typeof t=="string"?GIt(t,e):nfe?Buffer.from(t):new Buffer(t)}s(VIt,"bufferFrom");vDe.exports=VIt});var RDe=H((F_,afe)=>{d();var zIt=CDe().SourceMapConsumer,ife=require("path"),Jy;try{Jy=require("fs"),(!Jy.existsSync||!Jy.readFileSync)&&(Jy=null)}catch{}var YIt=xDe();function EDe(t,e){return t.require(e)}s(EDe,"dynamicRequire");var bDe=!1,IDe=!1,ofe=!1,b9="auto",L_={},I9={},KIt=/^data:application\/json[^,]+base64,/,fI=[],pI=[];function cfe(){return b9==="browser"?!0:b9==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(cfe,"isInBrowser");function JIt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(JIt,"hasGlobalProcessEventEmitter");function XIt(){return typeof process=="object"&&process!==null?process.version:""}s(XIt,"globalProcessVersion");function ZIt(){if(typeof process=="object"&&process!==null)return process.stderr}s(ZIt,"globalProcessStderr");function eTt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(eTt,"globalProcessExit");function TW(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(TW,"handlerExec");var lfe=TW(fI);fI.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in L_)return L_[t];var e="";try{if(Jy)Jy.existsSync(t)&&(e=Jy.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return L_[t]=e});function sfe(t,e){if(!t)return e;var r=ife.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+ife.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+ife.resolve(r.slice(i.length),e)}s(sfe,"supportRelativeURL");function tTt(t){var e;if(cfe())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=lfe(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(tTt,"retrieveSourceMapURL");var ufe=TW(pI);pI.push(function(t){var e=tTt(t);if(!e)return null;var r;if(KIt.test(e)){var n=e.slice(e.indexOf(",")+1);r=YIt(n,"base64").toString(),e=t}else e=sfe(t,e),r=lfe(e);return r?{url:e,map:r}:null});function dfe(t){var e=I9[t.source];if(!e){var r=ufe(t.source);r?(e=I9[t.source]={url:r.url,map:new zIt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=sfe(e.url,i);L_[c]=a}})):e=I9[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=sfe(e.url,n.source),n}return t}s(dfe,"mapSourcePosition");function wDe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=dfe({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+wDe(e[2])+")":t}s(wDe,"mapEvalOrigin");function rTt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(rTt,"CallSiteToString");function TDe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=rTt,e}s(TDe,"cloneCallSite");function SDe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(XIt())?0:62;n===1&&i>a&&!cfe()&&!t.isEval()&&(i-=a);var c=dfe({source:r,line:n,column:i});e.curPosition=c,t=TDe(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=wDe(u),t=TDe(t),t.getEvalOrigin=function(){return u}),t}s(SDe,"wrapCallSite");function nTt(t,e){ofe&&(L_={},I9={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+SDe(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(nTt,"prepareStackTrace");function _De(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=L_[r];if(!o&&Jy&&Jy.existsSync(r))try{o=Jy.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(_De,"getErrorSource");function iTt(t){var e=_De(t),r=ZIt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),eTt(1)}s(iTt,"printErrorAndExit");function oTt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return iTt(arguments[1])}return t.apply(this,arguments)}}s(oTt,"shimEmitUncaughtException");var sTt=fI.slice(0),aTt=pI.slice(0);F_.wrapCallSite=SDe;F_.getErrorSource=_De;F_.mapSourcePosition=dfe;F_.retrieveSourceMap=ufe;F_.install=function(t){if(t=t||{},t.environment&&(b9=t.environment,["node","browser","auto"].indexOf(b9)===-1))throw new Error("environment "+b9+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(fI.length=0),fI.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(pI.length=0),pI.unshift(t.retrieveSourceMap)),t.hookRequire&&!cfe()){var e=EDe(afe,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return L_[a]=o,I9[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(ofe||(ofe="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),bDe||(bDe=!0,Error.prepareStackTrace=nTt),!IDe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=EDe(afe,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&JIt()&&(IDe=!0,oTt())}};F_.resetRetrieveHandlers=function(){fI.length=0,pI.length=0,fI=sTt.slice(0),pI=aTt.slice(0),ufe=TW(pI),lfe=TW(fI)}});var oo=H((SW,DDe)=>{d();(function(t,e){typeof SW=="object"?DDe.exports=SW=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(SW,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function E(){}return s(E,"F"),function(b){var S;return E.prototype=b,S=new E,E.prototype=null,S}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(E){var b=o(this);return E&&b.mixIn(E),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var E=this.extend();return E.init.apply(E,arguments),E},"create"),init:s(function(){},"init"),mixIn:s(function(E){for(var b in E)E.hasOwnProperty(b)&&(this[b]=E[b]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(E,b){E=this.words=E||[],b!=r?this.sigBytes=b:this.sigBytes=E.length*4},"init"),toString:s(function(E){return(E||p).stringify(this)},"toString"),concat:s(function(E){var b=this.words,S=E.words,R=this.sigBytes,B=E.sigBytes;if(this.clamp(),R%4)for(var L=0;L<B;L++){var O=S[L>>>2]>>>24-L%4*8&255;b[R+L>>>2]|=O<<24-(R+L)%4*8}else for(var K=0;K<B;K+=4)b[R+K>>>2]=S[K>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var E=this.words,b=this.sigBytes;E[b>>>2]&=4294967295<<32-b%4*8,E.length=e.ceil(b/4)},"clamp"),clone:s(function(){var E=l.clone.call(this);return E.words=this.words.slice(0),E},"clone"),random:s(function(E){for(var b=[],S=0;S<E;S+=4)b.push(i());return new u.init(b,E)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(E){for(var b=E.words,S=E.sigBytes,R=[],B=0;B<S;B++){var L=b[B>>>2]>>>24-B%4*8&255;R.push((L>>>4).toString(16)),R.push((L&15).toString(16))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,S=[],R=0;R<b;R+=2)S[R>>>3]|=parseInt(E.substr(R,2),16)<<24-R%8*4;return new u.init(S,b/2)},"parse")},m=f.Latin1={stringify:s(function(E){for(var b=E.words,S=E.sigBytes,R=[],B=0;B<S;B++){var L=b[B>>>2]>>>24-B%4*8&255;R.push(String.fromCharCode(L))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,S=[],R=0;R<b;R++)S[R>>>2]|=(E.charCodeAt(R)&255)<<24-R%4*8;return new u.init(S,b)},"parse")},h=f.Utf8={stringify:s(function(E){try{return decodeURIComponent(escape(m.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(E){return m.parse(unescape(encodeURIComponent(E)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(E){typeof E=="string"&&(E=h.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},"_append"),_process:s(function(E){var b,S=this._data,R=S.words,B=S.sigBytes,L=this.blockSize,O=L*4,K=B/O;E?K=e.ceil(K):K=e.max((K|0)-this._minBufferSize,0);var V=K*L,z=e.min(V*4,B);if(V){for(var Q=0;Q<V;Q+=L)this._doProcessBlock(R,Q);b=R.splice(0,V),S.sigBytes-=z}return new u.init(b,z)},"_process"),clone:s(function(){var E=l.clone.call(this);return E._data=this._data.clone(),E},"clone"),_minBufferSize:0}),A=c.Hasher=g.extend({cfg:l.extend(),init:s(function(E){this.cfg=this.cfg.extend(E),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(E){return this._append(E),this._process(),this},"update"),finalize:s(function(E){E&&this._append(E);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(E){return function(b,S){return new E.init(S).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(E){return function(b,S){return new y.HMAC.init(E,S).finalize(b)}},"_createHmacHelper")}),y=a.algo={};return a}(Math);return t})});var S9=H((_W,BDe)=>{d();(function(t,e){typeof _W=="object"?BDe.exports=_W=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_W,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],m=0;m<f;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,m=0;m<p;m++)f[m]=f[m].clone();return u},"clone")})}(),t})});var MDe=H((RW,NDe)=>{d();(function(t,e){typeof RW=="object"?NDe.exports=RW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(RW,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var FDe=H((kW,LDe)=>{d();(function(t,e){typeof kW=="object"?LDe.exports=kW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(kW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var mI=H((PW,ODe)=>{d();(function(t,e){typeof PW=="object"?ODe.exports=PW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(PW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,A=l[m+2>>>2]>>>24-(m+2)%4*8&255,y=h<<16|g<<8|A,E=0;E<4&&m+E*.75<u;E++)p.push(f.charAt(y>>>6*(3-E)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var UDe=H((DW,QDe)=>{d();(function(t,e){typeof DW=="object"?QDe.exports=DW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(DW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<f;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,E=g<<16|A<<8|y,b=0;b<4&&h+b*.75<f;b++)m.push(p.charAt(E>>>6*(3-b)&63));var S=p.charAt(64);if(S)for(;m.length%4;)m.push(S);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<f.length;m++)p[f.charCodeAt(m)]=m}var h=f.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var hI=H((BW,qDe)=>{d();(function(t,e){typeof BW=="object"?qDe.exports=BW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(BW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var A=0;A<16;A++){var y=g+A,E=h[y];h[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var b=this._hash.words,S=h[g+0],R=h[g+1],B=h[g+2],L=h[g+3],O=h[g+4],K=h[g+5],V=h[g+6],z=h[g+7],Q=h[g+8],U=h[g+9],Z=h[g+10],J=h[g+11],j=h[g+12],$=h[g+13],X=h[g+14],ie=h[g+15],ae=b[0],te=b[1],pe=b[2],Ae=b[3];ae=u(ae,te,pe,Ae,S,7,c[0]),Ae=u(Ae,ae,te,pe,R,12,c[1]),pe=u(pe,Ae,ae,te,B,17,c[2]),te=u(te,pe,Ae,ae,L,22,c[3]),ae=u(ae,te,pe,Ae,O,7,c[4]),Ae=u(Ae,ae,te,pe,K,12,c[5]),pe=u(pe,Ae,ae,te,V,17,c[6]),te=u(te,pe,Ae,ae,z,22,c[7]),ae=u(ae,te,pe,Ae,Q,7,c[8]),Ae=u(Ae,ae,te,pe,U,12,c[9]),pe=u(pe,Ae,ae,te,Z,17,c[10]),te=u(te,pe,Ae,ae,J,22,c[11]),ae=u(ae,te,pe,Ae,j,7,c[12]),Ae=u(Ae,ae,te,pe,$,12,c[13]),pe=u(pe,Ae,ae,te,X,17,c[14]),te=u(te,pe,Ae,ae,ie,22,c[15]),ae=f(ae,te,pe,Ae,R,5,c[16]),Ae=f(Ae,ae,te,pe,V,9,c[17]),pe=f(pe,Ae,ae,te,J,14,c[18]),te=f(te,pe,Ae,ae,S,20,c[19]),ae=f(ae,te,pe,Ae,K,5,c[20]),Ae=f(Ae,ae,te,pe,Z,9,c[21]),pe=f(pe,Ae,ae,te,ie,14,c[22]),te=f(te,pe,Ae,ae,O,20,c[23]),ae=f(ae,te,pe,Ae,U,5,c[24]),Ae=f(Ae,ae,te,pe,X,9,c[25]),pe=f(pe,Ae,ae,te,L,14,c[26]),te=f(te,pe,Ae,ae,Q,20,c[27]),ae=f(ae,te,pe,Ae,$,5,c[28]),Ae=f(Ae,ae,te,pe,B,9,c[29]),pe=f(pe,Ae,ae,te,z,14,c[30]),te=f(te,pe,Ae,ae,j,20,c[31]),ae=p(ae,te,pe,Ae,K,4,c[32]),Ae=p(Ae,ae,te,pe,Q,11,c[33]),pe=p(pe,Ae,ae,te,J,16,c[34]),te=p(te,pe,Ae,ae,X,23,c[35]),ae=p(ae,te,pe,Ae,R,4,c[36]),Ae=p(Ae,ae,te,pe,O,11,c[37]),pe=p(pe,Ae,ae,te,z,16,c[38]),te=p(te,pe,Ae,ae,Z,23,c[39]),ae=p(ae,te,pe,Ae,$,4,c[40]),Ae=p(Ae,ae,te,pe,S,11,c[41]),pe=p(pe,Ae,ae,te,L,16,c[42]),te=p(te,pe,Ae,ae,V,23,c[43]),ae=p(ae,te,pe,Ae,U,4,c[44]),Ae=p(Ae,ae,te,pe,j,11,c[45]),pe=p(pe,Ae,ae,te,ie,16,c[46]),te=p(te,pe,Ae,ae,B,23,c[47]),ae=m(ae,te,pe,Ae,S,6,c[48]),Ae=m(Ae,ae,te,pe,z,10,c[49]),pe=m(pe,Ae,ae,te,X,15,c[50]),te=m(te,pe,Ae,ae,K,21,c[51]),ae=m(ae,te,pe,Ae,j,6,c[52]),Ae=m(Ae,ae,te,pe,L,10,c[53]),pe=m(pe,Ae,ae,te,Z,15,c[54]),te=m(te,pe,Ae,ae,R,21,c[55]),ae=m(ae,te,pe,Ae,Q,6,c[56]),Ae=m(Ae,ae,te,pe,ie,10,c[57]),pe=m(pe,Ae,ae,te,V,15,c[58]),te=m(te,pe,Ae,ae,$,21,c[59]),ae=m(ae,te,pe,Ae,O,6,c[60]),Ae=m(Ae,ae,te,pe,J,10,c[61]),pe=m(pe,Ae,ae,te,B,15,c[62]),te=m(te,pe,Ae,ae,U,21,c[63]),b[0]=b[0]+ae|0,b[1]=b[1]+te|0,b[2]=b[2]+pe|0,b[3]=b[3]+Ae|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32;var E=e.floor(A/4294967296),b=A;g[(y+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,R=S.words,B=0;B<4;B++){var L=R[B];R[B]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return S},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,A,y,E,b,S){var R=h+(g&A|~g&y)+E+S;return(R<<b|R>>>32-b)+g}s(u,"FF");function f(h,g,A,y,E,b,S){var R=h+(g&y|A&~y)+E+S;return(R<<b|R>>>32-b)+g}s(f,"GG");function p(h,g,A,y,E,b,S){var R=h+(g^A^y)+E+S;return(R<<b|R>>>32-b)+g}s(p,"HH");function m(h,g,A,y,E,b,S){var R=h+(A^(g|~y))+E+S;return(R<<b|R>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var ffe=H((NW,HDe)=>{d();(function(t,e){typeof NW=="object"?HDe.exports=NW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(NW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],m=f[1],h=f[2],g=f[3],A=f[4],y=0;y<80;y++){if(y<16)a[y]=l[u+y]|0;else{var E=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=E<<1|E>>>31}var b=(p<<5|p>>>27)+A+a[y];y<20?b+=(m&h|~m&g)+1518500249:y<40?b+=(m^h^g)+1859775393:y<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,A=g,g=h,h=m<<30|m>>>2,m=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+h|0,f[3]=f[3]+g|0,f[4]=f[4]+A|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var LW=H((MW,$De)=>{d();(function(t,e){typeof MW=="object"?$De.exports=MW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(MW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(A){for(var y=e.sqrt(A),E=2;E<=y;E++)if(!(A%E))return!1;return!0}s(p,"isPrime");function m(A){return(A-(A|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],A=h[1],y=h[2],E=h[3],b=h[4],S=h[5],R=h[6],B=h[7],L=0;L<64;L++){if(L<16)u[L]=p[m+L]|0;else{var O=u[L-15],K=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,V=u[L-2],z=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;u[L]=K+u[L-7]+z+u[L-16]}var Q=b&S^~b&R,U=g&A^g&y^A&y,Z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),J=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),j=B+J+Q+l[L]+u[L],$=Z+U;B=R,R=S,S=b,b=E+j|0,E=y,y=A,A=g,g=j+$|0}h[0]=h[0]+g|0,h[1]=h[1]+A|0,h[2]=h[2]+y|0,h[3]=h[3]+E|0,h[4]=h[4]+b|0,h[5]=h[5]+S|0,h[6]=h[6]+R|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var jDe=H((FW,WDe)=>{d();(function(t,e,r){typeof FW=="object"?WDe.exports=FW=e(oo(),LW()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(FW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var pfe=H((OW,GDe)=>{d();(function(t,e,r){typeof OW=="object"?GDe.exports=OW=e(oo(),S9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(OW,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],E=g[2],b=g[3],S=g[4],R=g[5],B=g[6],L=g[7],O=A.high,K=A.low,V=y.high,z=y.low,Q=E.high,U=E.low,Z=b.high,J=b.low,j=S.high,$=S.low,X=R.high,ie=R.low,ae=B.high,te=B.low,pe=L.high,Ae=L.low,Oe=O,Te=K,Je=V,Fe=z,lt=Q,_t=U,xt=Z,ht=J,ue=j,Ue=$,ye=X,$e=ie,se=ae,le=te,qe=pe,Be=Ae,Ee=0;Ee<80;Ee++){var je,tt,pt=f[Ee];if(Ee<16)tt=pt.high=m[h+Ee*2]|0,je=pt.low=m[h+Ee*2+1]|0;else{var Ft=f[Ee-15],Jt=Ft.high,Qt=Ft.low,Vr=(Jt>>>1|Qt<<31)^(Jt>>>8|Qt<<24)^Jt>>>7,Pr=(Qt>>>1|Jt<<31)^(Qt>>>8|Jt<<24)^(Qt>>>7|Jt<<25),ln=f[Ee-2],ve=ln.high,Ge=ln.low,ft=(ve>>>19|Ge<<13)^(ve<<3|Ge>>>29)^ve>>>6,Tt=(Ge>>>19|ve<<13)^(Ge<<3|ve>>>29)^(Ge>>>6|ve<<26),or=f[Ee-7],Zt=or.high,Ir=or.low,ur=f[Ee-16],rr=ur.high,lr=ur.low;je=Pr+Ir,tt=Vr+Zt+(je>>>0<Pr>>>0?1:0),je=je+Tt,tt=tt+ft+(je>>>0<Tt>>>0?1:0),je=je+lr,tt=tt+rr+(je>>>0<lr>>>0?1:0),pt.high=tt,pt.low=je}var nr=ue&ye^~ue&se,Nr=Ue&$e^~Ue&le,zr=Oe&Je^Oe&lt^Je&lt,sn=Te&Fe^Te&_t^Fe&_t,yn=(Oe>>>28|Te<<4)^(Oe<<30|Te>>>2)^(Oe<<25|Te>>>7),ri=(Te>>>28|Oe<<4)^(Te<<30|Oe>>>2)^(Te<<25|Oe>>>7),_n=(ue>>>14|Ue<<18)^(ue>>>18|Ue<<14)^(ue<<23|Ue>>>9),Zn=(Ue>>>14|ue<<18)^(Ue>>>18|ue<<14)^(Ue<<23|ue>>>9),an=u[Ee],Yn=an.high,Pe=an.low,Y=Be+Zn,Ce=qe+_n+(Y>>>0<Be>>>0?1:0),Y=Y+Nr,Ce=Ce+nr+(Y>>>0<Nr>>>0?1:0),Y=Y+Pe,Ce=Ce+Yn+(Y>>>0<Pe>>>0?1:0),Y=Y+je,Ce=Ce+tt+(Y>>>0<je>>>0?1:0),Ie=ri+sn,F=yn+zr+(Ie>>>0<ri>>>0?1:0);qe=se,Be=le,se=ye,le=$e,ye=ue,$e=Ue,Ue=ht+Y|0,ue=xt+Ce+(Ue>>>0<ht>>>0?1:0)|0,xt=lt,ht=_t,lt=Je,_t=Fe,Je=Oe,Fe=Te,Te=Y+Ie|0,Oe=Ce+F+(Te>>>0<Y>>>0?1:0)|0}K=A.low=K+Te,A.high=O+Oe+(K>>>0<Te>>>0?1:0),z=y.low=z+Fe,y.high=V+Je+(z>>>0<Fe>>>0?1:0),U=E.low=U+_t,E.high=Q+lt+(U>>>0<_t>>>0?1:0),J=b.low=J+ht,b.high=Z+xt+(J>>>0<ht>>>0?1:0),$=S.low=$+Ue,S.high=j+ue+($>>>0<Ue>>>0?1:0),ie=R.low=ie+$e,R.high=X+ye+(ie>>>0<$e>>>0?1:0),te=B.low=te+le,B.high=ae+se+(te>>>0<le>>>0?1:0),Ae=L.low=Ae+Be,L.high=pe+qe+(Ae>>>0<Be>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;h[A>>>5]|=128<<24-A%32,h[(A+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(A+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var y=this._hash.toX32();return y},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var zDe=H((QW,VDe)=>{d();(function(t,e,r){typeof QW=="object"?VDe.exports=QW=e(oo(),S9(),pfe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(QW,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var KDe=H((UW,YDe)=>{d();(function(t,e,r){typeof UW=="object"?YDe.exports=UW=e(oo(),S9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(UW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,A=0,y=0;y<24;y++){u[g+5*A]=(y+1)*(y+2)/2%64;var E=A%5,b=(2*g+3*A)%5;g=E,A=b}for(var g=0;g<5;g++)for(var A=0;A<5;A++)f[g+5*A]=A+(2*g+3*A)%5*5;for(var S=1,R=0;R<24;R++){for(var B=0,L=0,O=0;O<7;O++){if(S&1){var K=(1<<O)-1;K<32?L^=1<<K:B^=1<<K-32}S&128?S=S<<1^113:S<<=1}p[R]=c.create(B,L)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],A=0;A<25;A++)g[A]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,A){for(var y=this._state,E=this.blockSize/2,b=0;b<E;b++){var S=g[A+2*b],R=g[A+2*b+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var B=y[b];B.high^=R,B.low^=S}for(var L=0;L<24;L++){for(var O=0;O<5;O++){for(var K=0,V=0,z=0;z<5;z++){var B=y[O+5*z];K^=B.high,V^=B.low}var Q=m[O];Q.high=K,Q.low=V}for(var O=0;O<5;O++)for(var U=m[(O+4)%5],Z=m[(O+1)%5],J=Z.high,j=Z.low,K=U.high^(J<<1|j>>>31),V=U.low^(j<<1|J>>>31),z=0;z<5;z++){var B=y[O+5*z];B.high^=K,B.low^=V}for(var $=1;$<25;$++){var K,V,B=y[$],X=B.high,ie=B.low,ae=u[$];ae<32?(K=X<<ae|ie>>>32-ae,V=ie<<ae|X>>>32-ae):(K=ie<<ae-32|X>>>64-ae,V=X<<ae-32|ie>>>64-ae);var te=m[f[$]];te.high=K,te.low=V}var pe=m[0],Ae=y[0];pe.high=Ae.high,pe.low=Ae.low;for(var O=0;O<5;O++)for(var z=0;z<5;z++){var $=O+5*z,B=y[$],Oe=m[$],Te=m[(O+1)%5+5*z],Je=m[(O+2)%5+5*z];B.high=Oe.high^~Te.high&Je.high,B.low=Oe.low^~Te.low&Je.low}var B=y[0],Fe=p[L];B.high^=Fe.high,B.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,E=g.sigBytes*8,b=this.blockSize*32;A[E>>>5]|=1<<24-E%32,A[(e.ceil((E+1)/b)*b>>>5)-1]|=128,g.sigBytes=A.length*4,this._process();for(var S=this._state,R=this.cfg.outputLength/8,B=R/8,L=[],O=0;O<B;O++){var K=S[O],V=K.high,z=K.low;V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,L.push(z),L.push(V)}return new i.init(L,R)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),A=g._state=this._state.slice(0),y=0;y<25;y++)A[y]=A[y].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var XDe=H((qW,JDe)=>{d();(function(t,e){typeof qW=="object"?JDe.exports=qW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(qW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(R,B){for(var L=0;L<16;L++){var O=B+L,K=R[O];R[O]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}var V=this._hash.words,z=p.words,Q=m.words,U=c.words,Z=l.words,J=u.words,j=f.words,$,X,ie,ae,te,pe,Ae,Oe,Te,Je;pe=$=V[0],Ae=X=V[1],Oe=ie=V[2],Te=ae=V[3],Je=te=V[4];for(var Fe,L=0;L<80;L+=1)Fe=$+R[B+U[L]]|0,L<16?Fe+=g(X,ie,ae)+z[0]:L<32?Fe+=A(X,ie,ae)+z[1]:L<48?Fe+=y(X,ie,ae)+z[2]:L<64?Fe+=E(X,ie,ae)+z[3]:Fe+=b(X,ie,ae)+z[4],Fe=Fe|0,Fe=S(Fe,J[L]),Fe=Fe+te|0,$=te,te=ae,ae=S(ie,10),ie=X,X=Fe,Fe=pe+R[B+Z[L]]|0,L<16?Fe+=b(Ae,Oe,Te)+Q[0]:L<32?Fe+=E(Ae,Oe,Te)+Q[1]:L<48?Fe+=y(Ae,Oe,Te)+Q[2]:L<64?Fe+=A(Ae,Oe,Te)+Q[3]:Fe+=g(Ae,Oe,Te)+Q[4],Fe=Fe|0,Fe=S(Fe,j[L]),Fe=Fe+Je|0,pe=Je,Je=Te,Te=S(Oe,10),Oe=Ae,Ae=Fe;Fe=V[1]+ie+Te|0,V[1]=V[2]+ae+Je|0,V[2]=V[3]+te+pe|0,V[3]=V[4]+$+Ae|0,V[4]=V[0]+X+Oe|0,V[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var R=this._data,B=R.words,L=this._nDataBytes*8,O=R.sigBytes*8;B[O>>>5]|=128<<24-O%32,B[(O+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R.sigBytes=(B.length+1)*4,this._process();for(var K=this._hash,V=K.words,z=0;z<5;z++){var Q=V[z];V[z]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}return K},"_doFinalize"),clone:s(function(){var R=o.clone.call(this);return R._hash=this._hash.clone(),R},"clone")});function g(R,B,L){return R^B^L}s(g,"f1");function A(R,B,L){return R&B|~R&L}s(A,"f2");function y(R,B,L){return(R|~B)^L}s(y,"f3");function E(R,B,L){return R&L|B&~L}s(E,"f4");function b(R,B,L){return R^(B|~L)}s(b,"f5");function S(R,B){return R<<B|R>>>32-B}s(S,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var $W=H((HW,ZDe)=>{d();(function(t,e){typeof HW=="object"?ZDe.exports=HW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(HW,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,A=h.words,y=0;y<f;y++)g[y]^=1549556828,A[y]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var tBe=H((WW,eBe)=>{d();(function(t,e,r){typeof WW=="object"?eBe.exports=WW=e(oo(),LW(),$W()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(WW,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),A=h.words,y=g.words,E=p.keySize,b=p.iterations;A.length<E;){var S=m.update(f).finalize(g);m.reset();for(var R=S.words,B=R.length,L=S,O=1;O<b;O++){L=m.finalize(L),m.reset();for(var K=L.words,V=0;V<B;V++)R[V]^=K[V]}h.concat(S),y[0]++}return h.sigBytes=E*4,h},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var kv=H((jW,rBe)=>{d();(function(t,e,r){typeof jW=="object"?rBe.exports=jW=e(oo(),ffe(),$W()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(jW,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,A=p.keySize,y=p.iterations;g.length<A;){f&&m.update(f),f=m.update(l).finalize(u),m.reset();for(var E=1;E<y;E++)f=m.finalize(f),m.reset();h.concat(f)}return h.sigBytes=A*4,h},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var Sl=H((GW,nBe)=>{d();(function(t,e,r){typeof GW=="object"?nBe.exports=GW=e(oo(),kv()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(GW,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(Q,U){return this.create(this._ENC_XFORM_MODE,Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.create(this._DEC_XFORM_MODE,Q,U)},"createDecryptor"),init:s(function(Q,U,Z){this.cfg=this.cfg.extend(Z),this._xformMode=Q,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(Q){return this._append(Q),this._process()},"process"),finalize:s(function(Q){Q&&this._append(Q);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Q(U){return typeof U=="string"?z:O}return s(Q,"selectCipherStrategy"),function(U){return{encrypt:s(function(Z,J,j){return Q(J).encrypt(U,Z,J,j)},"encrypt"),decrypt:s(function(Z,J,j){return Q(J).decrypt(U,Z,J,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var Q=this._process(!0);return Q},"_doFinalize"),blockSize:1}),g=r.mode={},A=n.BlockCipherMode=i.extend({createEncryptor:s(function(Q,U){return this.Encryptor.create(Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.Decryptor.create(Q,U)},"createDecryptor"),init:s(function(Q,U){this._cipher=Q,this._iv=U},"init")}),y=g.CBC=function(){var Q=A.extend();Q.Encryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize;U.call(this,Z,J,$),j.encryptBlock(Z,J),this._prevBlock=Z.slice(J,J+$)},"processBlock")}),Q.Decryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize,X=Z.slice(J,J+$);j.decryptBlock(Z,J),U.call(this,Z,J,$),this._prevBlock=X},"processBlock")});function U(Z,J,j){var $,X=this._iv;X?($=X,this._iv=e):$=this._prevBlock;for(var ie=0;ie<j;ie++)Z[J+ie]^=$[ie]}return s(U,"xorBlock"),Q}(),E=r.pad={},b=E.Pkcs7={pad:s(function(Q,U){for(var Z=U*4,J=Z-Q.sigBytes%Z,j=J<<24|J<<16|J<<8|J,$=[],X=0;X<J;X+=4)$.push(j);var ie=o.create($,J);Q.concat(ie)},"pad"),unpad:s(function(Q){var U=Q.words[Q.sigBytes-1>>>2]&255;Q.sigBytes-=U},"unpad")},S=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:y,padding:b}),reset:s(function(){var Q;m.reset.call(this);var U=this.cfg,Z=U.iv,J=U.mode;this._xformMode==this._ENC_XFORM_MODE?Q=J.createEncryptor:(Q=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Q?this._mode.init(this,Z&&Z.words):(this._mode=Q.call(J,this,Z&&Z.words),this._mode.__creator=Q)},"reset"),_doProcessBlock:s(function(Q,U){this._mode.processBlock(Q,U)},"_doProcessBlock"),_doFinalize:s(function(){var Q,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),Q=this._process(!0)):(Q=this._process(!0),U.unpad(Q)),Q},"_doFinalize"),blockSize:128/32}),R=n.CipherParams=i.extend({init:s(function(Q){this.mixIn(Q)},"init"),toString:s(function(Q){return(Q||this.formatter).stringify(this)},"toString")}),B=r.format={},L=B.OpenSSL={stringify:s(function(Q){var U,Z=Q.ciphertext,J=Q.salt;return J?U=o.create([1398893684,1701076831]).concat(J).concat(Z):U=Z,U.toString(u)},"stringify"),parse:s(function(Q){var U,Z=u.parse(Q),J=Z.words;return J[0]==1398893684&&J[1]==1701076831&&(U=o.create(J.slice(2,4)),J.splice(0,4),Z.sigBytes-=16),R.create({ciphertext:Z,salt:U})},"parse")},O=n.SerializableCipher=i.extend({cfg:i.extend({format:L}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=Q.createEncryptor(Z,J),$=j.finalize(U),X=j.cfg;return R.create({ciphertext:$,key:Z,iv:X.iv,algorithm:Q,mode:X.mode,padding:X.padding,blockSize:Q.blockSize,formatter:J.format})},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=Q.createDecryptor(Z,J).finalize(U.ciphertext);return j},"decrypt"),_parse:s(function(Q,U){return typeof Q=="string"?U.parse(Q,this):Q},"_parse")}),K=r.kdf={},V=K.OpenSSL={execute:s(function(Q,U,Z,J,j){if(J||(J=o.random(64/8)),j)var $=p.create({keySize:U+Z,hasher:j}).compute(Q,J);else var $=p.create({keySize:U+Z}).compute(Q,J);var X=o.create($.words.slice(U),Z*4);return $.sigBytes=U*4,R.create({key:$,iv:X,salt:J})},"execute")},z=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:V}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,J.salt,J.hasher);J.iv=j.iv;var $=O.encrypt.call(this,Q,U,j.key,J);return $.mixIn(j),$},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,U.salt,J.hasher);J.iv=j.iv;var $=O.decrypt.call(this,Q,U,j.key,J);return $},"decrypt")})}()})});var oBe=H((VW,iBe)=>{d();(function(t,e,r){typeof VW=="object"?iBe.exports=VW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(VW,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var aBe=H((zW,sBe)=>{d();(function(t,e,r){typeof zW=="object"?sBe.exports=zW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(zW,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var lBe=H((YW,cBe)=>{d();(function(t,e,r){typeof YW=="object"?cBe.exports=YW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(YW,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var dBe=H((KW,uBe)=>{d();(function(t,e,r){typeof KW=="object"?uBe.exports=KW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(KW,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var pBe=H((JW,fBe)=>{d();(function(t,e,r){typeof JW=="object"?fBe.exports=JW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(JW,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var hBe=H((XW,mBe)=>{d();(function(t,e,r){typeof XW=="object"?mBe.exports=XW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(XW,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var ABe=H((ZW,gBe)=>{d();(function(t,e,r){typeof ZW=="object"?gBe.exports=ZW=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(ZW,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var CBe=H((ej,yBe)=>{d();(function(t,e,r){typeof ej=="object"?yBe.exports=ej=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(ej,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var xBe=H((tj,vBe)=>{d();(function(t,e,r){typeof tj=="object"?vBe.exports=tj=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(tj,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var bBe=H((rj,EBe)=>{d();(function(t,e,r){typeof rj=="object"?EBe.exports=rj=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(rj,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var TBe=H((nj,IBe)=>{d();(function(t,e,r){typeof nj=="object"?IBe.exports=nj=e(oo(),Sl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(nj,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var SBe=H((ij,wBe)=>{d();(function(t,e,r){typeof ij=="object"?wBe.exports=ij=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(ij,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],m=[],h=[],g=[];(function(){for(var E=[],b=0;b<256;b++)b<128?E[b]=b<<1:E[b]=b<<1^283;for(var S=0,R=0,b=0;b<256;b++){var B=R^R<<1^R<<2^R<<3^R<<4;B=B>>>8^B&255^99,o[S]=B,a[B]=S;var L=E[S],O=E[L],K=E[O],V=E[B]*257^B*16843008;c[S]=V<<24|V>>>8,l[S]=V<<16|V>>>16,u[S]=V<<8|V>>>24,f[S]=V;var V=K*16843009^O*65537^L*257^S*16843008;p[B]=V<<24|V>>>8,m[B]=V<<16|V>>>16,h[B]=V<<8|V>>>24,g[B]=V,S?(S=L^E[E[E[K^L]]],R^=E[E[R]]):S=R=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:s(function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,S=b.words,R=b.sigBytes/4,B=this._nRounds=R+6,L=(B+1)*4,O=this._keySchedule=[],K=0;K<L;K++)K<R?O[K]=S[K]:(E=O[K-1],K%R?R>6&&K%R==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=A[K/R|0]<<24),O[K]=O[K-R]^E);for(var V=this._invKeySchedule=[],z=0;z<L;z++){var K=L-z;if(z%4)var E=O[K];else var E=O[K-4];z<4||K<=4?V[z]=E:V[z]=p[o[E>>>24]]^m[o[E>>>16&255]]^h[o[E>>>8&255]]^g[o[E&255]]}}},"_doReset"),encryptBlock:s(function(E,b){this._doCryptBlock(E,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(E,b){var S=E[b+1];E[b+1]=E[b+3],E[b+3]=S,this._doCryptBlock(E,b,this._invKeySchedule,p,m,h,g,a);var S=E[b+1];E[b+1]=E[b+3],E[b+3]=S},"decryptBlock"),_doCryptBlock:s(function(E,b,S,R,B,L,O,K){for(var V=this._nRounds,z=E[b]^S[0],Q=E[b+1]^S[1],U=E[b+2]^S[2],Z=E[b+3]^S[3],J=4,j=1;j<V;j++){var $=R[z>>>24]^B[Q>>>16&255]^L[U>>>8&255]^O[Z&255]^S[J++],X=R[Q>>>24]^B[U>>>16&255]^L[Z>>>8&255]^O[z&255]^S[J++],ie=R[U>>>24]^B[Z>>>16&255]^L[z>>>8&255]^O[Q&255]^S[J++],ae=R[Z>>>24]^B[z>>>16&255]^L[Q>>>8&255]^O[U&255]^S[J++];z=$,Q=X,U=ie,Z=ae}var $=(K[z>>>24]<<24|K[Q>>>16&255]<<16|K[U>>>8&255]<<8|K[Z&255])^S[J++],X=(K[Q>>>24]<<24|K[U>>>16&255]<<16|K[Z>>>8&255]<<8|K[z&255])^S[J++],ie=(K[U>>>24]<<24|K[Z>>>16&255]<<16|K[z>>>8&255]<<8|K[Q&255])^S[J++],ae=(K[Z>>>24]<<24|K[z>>>16&255]<<16|K[Q>>>8&255]<<8|K[U&255])^S[J++];E[b]=$,E[b+1]=X,E[b+2]=ie,E[b+3]=ae},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(y)}(),t.AES})});var RBe=H((oj,_Be)=>{d();(function(t,e,r){typeof oj=="object"?_Be.exports=oj=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(oj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var A=this._key,y=A.words,E=[],b=0;b<56;b++){var S=a[b]-1;E[b]=y[S>>>5]>>>31-S%32&1}for(var R=this._subKeys=[],B=0;B<16;B++){for(var L=R[B]=[],O=l[B],b=0;b<24;b++)L[b/6|0]|=E[(c[b]-1+O)%28]<<31-b%6,L[4+(b/6|0)]|=E[28+(c[b+24]-1+O)%28]<<31-b%6;L[0]=L[0]<<1|L[0]>>>31;for(var b=1;b<7;b++)L[b]=L[b]>>>(b-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var K=this._invSubKeys=[],b=0;b<16;b++)K[b]=R[15-b]},"_doReset"),encryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._subKeys)},"encryptBlock"),decryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(A,y,E){this._lBlock=A[y],this._rBlock=A[y+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var S=E[b],R=this._lBlock,B=this._rBlock,L=0,O=0;O<8;O++)L|=u[O][((B^S[O])&f[O])>>>0];this._lBlock=B,this._rBlock=R^L}var K=this._lBlock;this._lBlock=this._rBlock,this._rBlock=K,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),A[y]=this._lBlock,A[y+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(A,y){var E=(this._lBlock>>>A^this._rBlock)&y;this._rBlock^=E,this._lBlock^=E<<A}s(m,"exchangeLR");function h(A,y){var E=(this._rBlock>>>A^this._lBlock)&y;this._lBlock^=E,this._rBlock^=E<<A}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var A=this._key,y=A.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=y.slice(0,2),b=y.length<4?y.slice(0,2):y.slice(2,4),S=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(n.create(E)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(S))},"_doReset"),encryptBlock:s(function(A,y){this._des1.encryptBlock(A,y),this._des2.decryptBlock(A,y),this._des3.encryptBlock(A,y)},"encryptBlock"),decryptBlock:s(function(A,y){this._des3.decryptBlock(A,y),this._des2.encryptBlock(A,y),this._des1.decryptBlock(A,y)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var PBe=H((sj,kBe)=>{d();(function(t,e,r){typeof sj=="object"?kBe.exports=sj=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(sj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%f,A=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+A)%256;var y=p[m];p[m]=p[h],p[h]=y}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,f=(f+l[u])%256;var h=l[u];l[u]=l[f],l[f]=h,p|=l[(l[u]+l[f])%256]<<24-m*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var BBe=H((aj,DBe)=>{d();(function(t,e,r){typeof aj=="object"?DBe.exports=aj=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(aj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|S&4294901760,B=S<<16|b&65535;g[0]^=b,g[1]^=R,g[2]^=S,g[3]^=B,g[4]^=b,g[5]^=R,g[6]^=S,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var MBe=H((cj,NBe)=>{d();(function(t,e,r){typeof cj=="object"?NBe.exports=cj=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(cj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],h=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|S&4294901760,B=S<<16|b&65535;h[0]^=b,h[1]^=R,h[2]^=S,h[3]^=B,h[4]^=b,h[5]^=R,h[6]^=S,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var FBe=H((lj,LBe)=>{d();(function(t,e,r){typeof lj=="object"?LBe.exports=lj=e(oo(),mI(),hI(),kv(),Sl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(lj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,A){let y=A>>24&255,E=A>>16&255,b=A>>8&255,S=A&255,R=g.sbox[0][y]+g.sbox[1][E];return R=R^g.sbox[2][b],R=R+g.sbox[3][S],R}s(u,"F");function f(g,A,y){let E=A,b=y,S;for(let R=0;R<o;++R)E=E^g.pbox[R],b=u(g,E)^b,S=E,E=b,b=S;return S=E,E=b,b=S,b=b^g.pbox[o],E=E^g.pbox[o+1],{left:E,right:b}}s(f,"BlowFish_Encrypt");function p(g,A,y){let E=A,b=y,S;for(let R=o+1;R>1;--R)E=E^g.pbox[R],b=u(g,E)^b,S=E,E=b,b=S;return S=E,E=b,b=S,b=b^g.pbox[1],E=E^g.pbox[0],{left:E,right:b}}s(p,"BlowFish_Decrypt");function m(g,A,y){for(let B=0;B<4;B++){g.sbox[B]=[];for(let L=0;L<256;L++)g.sbox[B][L]=c[B][L]}let E=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^A[E],E++,E>=y&&(E=0);let b=0,S=0,R=0;for(let B=0;B<o+2;B+=2)R=f(g,b,S),b=R.left,S=R.right,g.pbox[B]=b,g.pbox[B+1]=S;for(let B=0;B<4;B++)for(let L=0;L<256;L+=2)R=f(g,b,S),b=R.left,S=R.right,g.sbox[B][L]=b,g.sbox[B][L+1]=S;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,A=g.words,y=g.sigBytes/4;m(l,A,y)}},"_doReset"),encryptBlock:s(function(g,A){var y=f(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"encryptBlock"),decryptBlock:s(function(g,A){var y=p(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var gI=H((uj,OBe)=>{d();(function(t,e,r){typeof uj=="object"?OBe.exports=uj=e(oo(),S9(),MDe(),FDe(),mI(),UDe(),hI(),ffe(),LW(),jDe(),pfe(),zDe(),KDe(),XDe(),$W(),tBe(),kv(),Sl(),oBe(),aBe(),lBe(),dBe(),pBe(),hBe(),ABe(),CBe(),xBe(),bBe(),TBe(),SBe(),RBe(),PBe(),BBe(),MBe(),FBe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(uj,function(t){return t})});var rD=H(wd=>{"use strict";d();Object.defineProperty(wd,"__esModule",{value:!0});wd.stringArray=wd.array=wd.func=wd.error=wd.number=wd.string=wd.boolean=void 0;function vPt(t){return t===!0||t===!1}s(vPt,"boolean");wd.boolean=vPt;function y8e(t){return typeof t=="string"||t instanceof String}s(y8e,"string");wd.string=y8e;function xPt(t){return typeof t=="number"||t instanceof Number}s(xPt,"number");wd.number=xPt;function EPt(t){return t instanceof Error}s(EPt,"error");wd.error=EPt;function bPt(t){return typeof t=="function"}s(bPt,"func");wd.func=bPt;function C8e(t){return Array.isArray(t)}s(C8e,"array");wd.array=C8e;function IPt(t){return C8e(t)&&t.every(e=>y8e(e))}s(IPt,"stringArray");wd.stringArray=IPt});var Q0e=H(dn=>{"use strict";d();Object.defineProperty(dn,"__esModule",{value:!0});dn.Message=dn.NotificationType9=dn.NotificationType8=dn.NotificationType7=dn.NotificationType6=dn.NotificationType5=dn.NotificationType4=dn.NotificationType3=dn.NotificationType2=dn.NotificationType1=dn.NotificationType0=dn.NotificationType=dn.RequestType9=dn.RequestType8=dn.RequestType7=dn.RequestType6=dn.RequestType5=dn.RequestType4=dn.RequestType3=dn.RequestType2=dn.RequestType1=dn.RequestType=dn.RequestType0=dn.AbstractMessageSignature=dn.ParameterStructures=dn.ResponseError=dn.ErrorCodes=void 0;var J_=rD(),h0e;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(h0e||(dn.ErrorCodes=h0e={}));var g0e=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=J_.number(e)?e:h0e.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};dn.ResponseError=g0e;var i0=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};dn.ParameterStructures=i0;i0.auto=new i0("auto");i0.byPosition=new i0("byPosition");i0.byName=new i0("byName");var Zs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return i0.auto}};dn.AbstractMessageSignature=Zs;var A0e=class extends Zs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};dn.RequestType0=A0e;var y0e=class extends Zs{static{s(this,"RequestType")}constructor(e,r=i0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.RequestType=y0e;var C0e=class extends Zs{static{s(this,"RequestType1")}constructor(e,r=i0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.RequestType1=C0e;var v0e=class extends Zs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};dn.RequestType2=v0e;var x0e=class extends Zs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};dn.RequestType3=x0e;var E0e=class extends Zs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};dn.RequestType4=E0e;var b0e=class extends Zs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};dn.RequestType5=b0e;var I0e=class extends Zs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};dn.RequestType6=I0e;var T0e=class extends Zs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};dn.RequestType7=T0e;var w0e=class extends Zs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};dn.RequestType8=w0e;var S0e=class extends Zs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};dn.RequestType9=S0e;var _0e=class extends Zs{static{s(this,"NotificationType")}constructor(e,r=i0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.NotificationType=_0e;var R0e=class extends Zs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};dn.NotificationType0=R0e;var k0e=class extends Zs{static{s(this,"NotificationType1")}constructor(e,r=i0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.NotificationType1=k0e;var P0e=class extends Zs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};dn.NotificationType2=P0e;var D0e=class extends Zs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};dn.NotificationType3=D0e;var B0e=class extends Zs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};dn.NotificationType4=B0e;var N0e=class extends Zs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};dn.NotificationType5=N0e;var M0e=class extends Zs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};dn.NotificationType6=M0e;var L0e=class extends Zs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};dn.NotificationType7=L0e;var F0e=class extends Zs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};dn.NotificationType8=F0e;var O0e=class extends Zs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};dn.NotificationType9=O0e;var v8e;(function(t){function e(i){let o=i;return o&&J_.string(o.method)&&(J_.string(o.id)||J_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&J_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(J_.string(o.id)||J_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(v8e||(dn.Message=v8e={}))});var q0e=H(SI=>{"use strict";d();var x8e;Object.defineProperty(SI,"__esModule",{value:!0});SI.LRUCache=SI.LinkedMap=SI.Touch=void 0;var Sd;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Sd||(SI.Touch=Sd={}));var zj=class{static{s(this,"LinkedMap")}constructor(){this[x8e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Sd.None){let n=this._map.get(e);if(n)return r!==Sd.None&&this.touch(n,r),n.value}set(e,r,n=Sd.None){let i=this._map.get(e);if(i)i.value=r,n!==Sd.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Sd.None:this.addItemLast(i);break;case Sd.First:this.addItemFirst(i);break;case Sd.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(x8e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Sd.First&&r!==Sd.Last)){if(r===Sd.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Sd.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};SI.LinkedMap=zj;var U0e=class extends zj{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Sd.AsNew){return super.get(e,r)}peek(e){return super.get(e,Sd.None)}set(e,r){return super.set(e,r,Sd.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};SI.LRUCache=U0e});var b8e=H(Yj=>{"use strict";d();Object.defineProperty(Yj,"__esModule",{value:!0});Yj.Disposable=void 0;var E8e;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(E8e||(Yj.Disposable=E8e={}))});var _I=H(W0e=>{"use strict";d();Object.defineProperty(W0e,"__esModule",{value:!0});var H0e;function $0e(){if(H0e===void 0)throw new Error("No runtime abstraction layer installed");return H0e}s($0e,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");H0e=r}s(e,"install"),t.install=e})($0e||($0e={}));W0e.default=$0e});var iD=H(nD=>{"use strict";d();Object.defineProperty(nD,"__esModule",{value:!0});nD.Emitter=nD.Event=void 0;var TPt=_I(),I8e;(function(t){let e={dispose(){}};t.None=function(){return e}})(I8e||(nD.Event=I8e={}));var j0e=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,TPt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Kj=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new j0e),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};nD.Emitter=Kj;Kj._noop=function(){}});var Zj=H(oD=>{"use strict";d();Object.defineProperty(oD,"__esModule",{value:!0});oD.CancellationTokenSource=oD.CancellationToken=void 0;var wPt=_I(),SPt=rD(),G0e=iD(),Jj;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:G0e.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:G0e.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||SPt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(Jj||(oD.CancellationToken=Jj={}));var _Pt=Object.freeze(function(t,e){let r=(0,wPt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),Xj=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_Pt:(this._emitter||(this._emitter=new G0e.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},V0e=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Xj),this._token}cancel(){this._token?this._token.cancel():this._token=Jj.Cancelled}dispose(){this._token?this._token instanceof Xj&&this._token.dispose():this._token=Jj.None}};oD.CancellationTokenSource=V0e});var T8e=H(sD=>{"use strict";d();Object.defineProperty(sD,"__esModule",{value:!0});sD.SharedArrayReceiverStrategy=sD.SharedArraySenderStrategy=void 0;var RPt=Zj(),V9;(function(t){t.Continue=0,t.Cancelled=1})(V9||(V9={}));var z0e=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=V9.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,V9.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};sD.SharedArraySenderStrategy=z0e;var Y0e=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===V9.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},K0e=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Y0e(e)}cancel(){}dispose(){}},J0e=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new RPt.CancellationTokenSource:new K0e(r)}};sD.SharedArrayReceiverStrategy=J0e});var Z0e=H(eG=>{"use strict";d();Object.defineProperty(eG,"__esModule",{value:!0});eG.Semaphore=void 0;var kPt=_I(),X0e=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,kPt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};eG.Semaphore=X0e});var S8e=H(RI=>{"use strict";d();Object.defineProperty(RI,"__esModule",{value:!0});RI.ReadableStreamMessageReader=RI.AbstractMessageReader=RI.MessageReader=void 0;var tpe=_I(),aD=rD(),epe=iD(),PPt=Z0e(),w8e;(function(t){function e(r){let n=r;return n&&aD.func(n.listen)&&aD.func(n.dispose)&&aD.func(n.onError)&&aD.func(n.onClose)&&aD.func(n.onPartialMessage)}s(e,"is"),t.is=e})(w8e||(RI.MessageReader=w8e={}));var tG=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new epe.Emitter,this.closeEmitter=new epe.Emitter,this.partialMessageEmitter=new epe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${aD.string(e.message)?e.message:"unknown"}`)}};RI.AbstractMessageReader=tG;var rpe;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,tpe.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(rpe||(rpe={}));var npe=class extends tG{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=rpe.fromOptions(r),this.buffer=(0,tpe.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new PPt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,tpe.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};RI.ReadableStreamMessageReader=npe});var D8e=H(kI=>{"use strict";d();Object.defineProperty(kI,"__esModule",{value:!0});kI.WriteableStreamMessageWriter=kI.AbstractMessageWriter=kI.MessageWriter=void 0;var _8e=_I(),z9=rD(),DPt=Z0e(),R8e=iD(),BPt="Content-Length: ",k8e=`\r
`,P8e;(function(t){function e(r){let n=r;return n&&z9.func(n.dispose)&&z9.func(n.onClose)&&z9.func(n.onError)&&z9.func(n.write)}s(e,"is"),t.is=e})(P8e||(kI.MessageWriter=P8e={}));var rG=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new R8e.Emitter,this.closeEmitter=new R8e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${z9.string(e.message)?e.message:"unknown"}`)}};kI.AbstractMessageWriter=rG;var ipe;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,_8e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,_8e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(ipe||(ipe={}));var ope=class extends rG{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=ipe.fromOptions(r),this.errorCount=0,this.writeSemaphore=new DPt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(BPt,n.byteLength.toString(),k8e),i.push(k8e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};kI.WriteableStreamMessageWriter=ope});var B8e=H(nG=>{"use strict";d();Object.defineProperty(nG,"__esModule",{value:!0});nG.AbstractMessageBuffer=void 0;var NPt=13,MPt=10,LPt=`\r
`,spe=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case NPt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case MPt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(LPt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let m=f.substr(0,p),h=f.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};nG.AbstractMessageBuffer=spe});var O8e=H(fi=>{"use strict";d();Object.defineProperty(fi,"__esModule",{value:!0});fi.createMessageConnection=fi.ConnectionOptions=fi.MessageStrategy=fi.CancellationStrategy=fi.CancellationSenderStrategy=fi.CancellationReceiverStrategy=fi.RequestCancellationReceiverStrategy=fi.IdCancellationReceiverStrategy=fi.ConnectionStrategy=fi.ConnectionError=fi.ConnectionErrors=fi.LogTraceNotification=fi.SetTraceNotification=fi.TraceFormat=fi.TraceValues=fi.Trace=fi.NullLogger=fi.ProgressType=fi.ProgressToken=void 0;var N8e=_I(),Ua=rD(),Un=Q0e(),M8e=q0e(),Y9=iD(),ape=Zj(),X9;(function(t){t.type=new Un.NotificationType("$/cancelRequest")})(X9||(X9={}));var cpe;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(cpe||(fi.ProgressToken=cpe={}));var K9;(function(t){t.type=new Un.NotificationType("$/progress")})(K9||(K9={}));var lpe=class{static{s(this,"ProgressType")}constructor(){}};fi.ProgressType=lpe;var upe;(function(t){function e(r){return Ua.func(r)}s(e,"is"),t.is=e})(upe||(upe={}));fi.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var zo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(zo||(fi.Trace=zo={}));var L8e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(L8e||(fi.TraceValues=L8e={}));(function(t){function e(n){if(!Ua.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(zo||(fi.Trace=zo={}));var hp;(function(t){t.Text="text",t.JSON="json"})(hp||(fi.TraceFormat=hp={}));(function(t){function e(r){return Ua.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(hp||(fi.TraceFormat=hp={}));var dpe;(function(t){t.type=new Un.NotificationType("$/setTrace")})(dpe||(fi.SetTraceNotification=dpe={}));var iG;(function(t){t.type=new Un.NotificationType("$/logTrace")})(iG||(fi.LogTraceNotification=iG={}));var J9;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(J9||(fi.ConnectionErrors=J9={}));var cD=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};fi.ConnectionError=cD;var fpe;(function(t){function e(r){let n=r;return n&&Ua.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(fpe||(fi.ConnectionStrategy=fpe={}));var oG;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ua.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ua.func(n.dispose))}s(e,"is"),t.is=e})(oG||(fi.IdCancellationReceiverStrategy=oG={}));var ppe;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ua.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ua.func(n.dispose))}s(e,"is"),t.is=e})(ppe||(fi.RequestCancellationReceiverStrategy=ppe={}));var sG;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new ape.CancellationTokenSource}});function e(r){return oG.is(r)||ppe.is(r)}s(e,"is"),t.is=e})(sG||(fi.CancellationReceiverStrategy=sG={}));var aG;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(X9.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ua.func(n.sendCancellation)&&Ua.func(n.cleanup)}s(e,"is"),t.is=e})(aG||(fi.CancellationSenderStrategy=aG={}));var cG;(function(t){t.Message=Object.freeze({receiver:sG.Message,sender:aG.Message});function e(r){let n=r;return n&&sG.is(n.receiver)&&aG.is(n.sender)}s(e,"is"),t.is=e})(cG||(fi.CancellationStrategy=cG={}));var lG;(function(t){function e(r){let n=r;return n&&Ua.func(n.handleMessage)}s(e,"is"),t.is=e})(lG||(fi.MessageStrategy=lG={}));var F8e;(function(t){function e(r){let n=r;return n&&(cG.is(n.cancellationStrategy)||fpe.is(n.connectionStrategy)||lG.is(n.messageStrategy))}s(e,"is"),t.is=e})(F8e||(fi.ConnectionOptions=F8e={}));var sA;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(sA||(sA={}));function FPt(t,e,r,n){let i=r!==void 0?r:fi.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,m=new Map,h=new Map,g,A=new M8e.LinkedMap,y=new Map,E=new Set,b=new Map,S=zo.Off,R=hp.Text,B,L=sA.New,O=new Y9.Emitter,K=new Y9.Emitter,V=new Y9.Emitter,z=new Y9.Emitter,Q=new Y9.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:cG.Message;function Z(ve){if(ve===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+ve.toString()}s(Z,"createRequestQueueKey");function J(ve){return ve===null?"res-unknown-"+(++c).toString():"res-"+ve.toString()}s(J,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function $(ve,Ge){Un.Message.isRequest(Ge)?ve.set(Z(Ge.id),Ge):Un.Message.isResponse(Ge)?ve.set(J(Ge.id),Ge):ve.set(j(),Ge)}s($,"addMessageToQueue");function X(ve){}s(X,"cancelUndispatched");function ie(){return L===sA.Listening}s(ie,"isListening");function ae(){return L===sA.Closed}s(ae,"isClosed");function te(){return L===sA.Disposed}s(te,"isDisposed");function pe(){(L===sA.New||L===sA.Listening)&&(L=sA.Closed,K.fire(void 0))}s(pe,"closeHandler");function Ae(ve){O.fire([ve,void 0,void 0])}s(Ae,"readErrorHandler");function Oe(ve){O.fire(ve)}s(Oe,"writeErrorHandler"),t.onClose(pe),t.onError(Ae),e.onClose(pe),e.onError(Oe);function Te(){g||A.size===0||(g=(0,N8e.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(Te,"triggerMessageQueue");function Je(ve){Un.Message.isRequest(ve)?_t(ve):Un.Message.isNotification(ve)?ht(ve):Un.Message.isResponse(ve)?xt(ve):ue(ve)}s(Je,"handleMessage");function Fe(){if(A.size===0)return;let ve=A.shift();try{let Ge=n?.messageStrategy;lG.is(Ge)?Ge.handleMessage(ve,Je):Je(ve)}finally{Te()}}s(Fe,"processMessageQueue");let lt=s(ve=>{try{if(Un.Message.isNotification(ve)&&ve.method===X9.type.method){let Ge=ve.params.id,ft=Z(Ge),Tt=A.get(ft);if(Un.Message.isRequest(Tt)){let Zt=n?.connectionStrategy,Ir=Zt&&Zt.cancelUndispatched?Zt.cancelUndispatched(Tt,X):void 0;if(Ir&&(Ir.error!==void 0||Ir.result!==void 0)){A.delete(ft),b.delete(Ge),Ir.id=Tt.id,se(Ir,ve.method,Date.now()),e.write(Ir).catch(()=>i.error("Sending response for canceled message failed."));return}}let or=b.get(Ge);if(or!==void 0){or.cancel(),qe(ve);return}else E.add(Ge)}$(A,ve)}finally{Te()}},"callback");function _t(ve){if(te())return;function Ge(rr,lr,nr){let Nr={jsonrpc:l,id:ve.id};rr instanceof Un.ResponseError?Nr.error=rr.toJson():Nr.result=rr===void 0?null:rr,se(Nr,lr,nr),e.write(Nr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(rr,lr,nr){let Nr={jsonrpc:l,id:ve.id,error:rr.toJson()};se(Nr,lr,nr),e.write(Nr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Tt(rr,lr,nr){rr===void 0&&(rr=null);let Nr={jsonrpc:l,id:ve.id,result:rr};se(Nr,lr,nr),e.write(Nr).catch(()=>i.error("Sending response failed."))}s(Tt,"replySuccess"),le(ve);let or=f.get(ve.method),Zt,Ir;or&&(Zt=or.type,Ir=or.handler);let ur=Date.now();if(Ir||u){let rr=ve.id??String(Date.now()),lr=oG.is(U.receiver)?U.receiver.createCancellationTokenSource(rr):U.receiver.createCancellationTokenSource(ve);ve.id!==null&&E.has(ve.id)&&lr.cancel(),ve.id!==null&&b.set(rr,lr);try{let nr;if(Ir)if(ve.params===void 0){if(Zt!==void 0&&Zt.numberOfParams!==0){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines ${Zt.numberOfParams} params but received none.`),ve.method,ur);return}nr=Ir(lr.token)}else if(Array.isArray(ve.params)){if(Zt!==void 0&&Zt.parameterStructures===Un.ParameterStructures.byName){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by name but received parameters by position`),ve.method,ur);return}nr=Ir(...ve.params,lr.token)}else{if(Zt!==void 0&&Zt.parameterStructures===Un.ParameterStructures.byPosition){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by position but received parameters by name`),ve.method,ur);return}nr=Ir(ve.params,lr.token)}else u&&(nr=u(ve.method,ve.params,lr.token));let Nr=nr;nr?Nr.then?Nr.then(zr=>{b.delete(rr),Ge(zr,ve.method,ur)},zr=>{b.delete(rr),zr instanceof Un.ResponseError?ft(zr,ve.method,ur):zr&&Ua.string(zr.message)?ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${zr.message}`),ve.method,ur):ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ur)}):(b.delete(rr),Ge(nr,ve.method,ur)):(b.delete(rr),Tt(nr,ve.method,ur))}catch(nr){b.delete(rr),nr instanceof Un.ResponseError?Ge(nr,ve.method,ur):nr&&Ua.string(nr.message)?ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${nr.message}`),ve.method,ur):ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ur)}}else ft(new Un.ResponseError(Un.ErrorCodes.MethodNotFound,`Unhandled method ${ve.method}`),ve.method,ur)}s(_t,"handleRequest");function xt(ve){if(!te())if(ve.id===null)ve.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(ve.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=ve.id,ft=y.get(Ge);if(Be(ve,ft),ft!==void 0){y.delete(Ge);try{if(ve.error){let Tt=ve.error;ft.reject(new Un.ResponseError(Tt.code,Tt.message,Tt.data))}else if(ve.result!==void 0)ft.resolve(ve.result);else throw new Error("Should never happen.")}catch(Tt){Tt.message?i.error(`Response handler '${ft.method}' failed with message: ${Tt.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(xt,"handleResponse");function ht(ve){if(te())return;let Ge,ft;if(ve.method===X9.type.method){let Tt=ve.params.id;E.delete(Tt),qe(ve);return}else{let Tt=m.get(ve.method);Tt&&(ft=Tt.handler,Ge=Tt.type)}if(ft||p)try{if(qe(ve),ft)if(ve.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Un.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(ve.params)){let Tt=ve.params;ve.method===K9.type.method&&Tt.length===2&&cpe.is(Tt[0])?ft({token:Tt[0],value:Tt[1]}):(Ge!==void 0&&(Ge.parameterStructures===Un.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==ve.params.length&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received ${Tt.length} arguments`)),ft(...Tt))}else Ge!==void 0&&Ge.parameterStructures===Un.ParameterStructures.byPosition&&i.error(`Notification ${ve.method} defines parameters by position but received parameters by name`),ft(ve.params);else p&&p(ve.method,ve.params)}catch(Tt){Tt.message?i.error(`Notification handler '${ve.method}' failed with message: ${Tt.message}`):i.error(`Notification handler '${ve.method}' failed unexpectedly.`)}else V.fire(ve)}s(ht,"handleNotification");function ue(ve){if(!ve){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(ve,null,4)}`);let Ge=ve;if(Ua.string(Ge.id)||Ua.number(Ge.id)){let ft=Ge.id,Tt=y.get(ft);Tt&&Tt.reject(new Error("The received response has neither a result nor an error property."))}}s(ue,"handleInvalidMessage");function Ue(ve){if(ve!=null)switch(S){case zo.Verbose:return JSON.stringify(ve,null,4);case zo.Compact:return JSON.stringify(ve);default:return}}s(Ue,"stringifyTrace");function ye(ve){if(!(S===zo.Off||!B))if(R===hp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Sending request '${ve.method} - (${ve.id})'.`,Ge)}else Ee("send-request",ve)}s(ye,"traceSendingRequest");function $e(ve){if(!(S===zo.Off||!B))if(R===hp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${ve.method}'.`,Ge)}else Ee("send-notification",ve)}s($e,"traceSendingNotification");function se(ve,Ge,ft){if(!(S===zo.Off||!B))if(R===hp.Text){let Tt;(S===zo.Verbose||S===zo.Compact)&&(ve.error&&ve.error.data?Tt=`Error data: ${Ue(ve.error.data)}

`:ve.result?Tt=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(Tt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${ve.id})'. Processing request took ${Date.now()-ft}ms`,Tt)}else Ee("send-response",ve)}s(se,"traceSendingResponse");function le(ve){if(!(S===zo.Off||!B))if(R===hp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Received request '${ve.method} - (${ve.id})'.`,Ge)}else Ee("receive-request",ve)}s(le,"traceReceivedRequest");function qe(ve){if(!(S===zo.Off||!B||ve.method===iG.type.method))if(R===hp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${ve.method}'.`,Ge)}else Ee("receive-notification",ve)}s(qe,"traceReceivedNotification");function Be(ve,Ge){if(!(S===zo.Off||!B))if(R===hp.Text){let ft;if((S===zo.Verbose||S===zo.Compact)&&(ve.error&&ve.error.data?ft=`Error data: ${Ue(ve.error.data)}

`:ve.result?ft=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(ft=`No result returned.

`)),Ge){let Tt=ve.error?` Request failed: ${ve.error.message} (${ve.error.code}).`:"";B.log(`Received response '${Ge.method} - (${ve.id})' in ${Date.now()-Ge.timerStart}ms.${Tt}`,ft)}else B.log(`Received response ${ve.id} without active response promise.`,ft)}else Ee("receive-response",ve)}s(Be,"traceReceivedResponse");function Ee(ve,Ge){if(!B||S===zo.Off)return;let ft={isLSPMessage:!0,type:ve,message:Ge,timestamp:Date.now()};B.log(ft)}s(Ee,"logLSPMessage");function je(){if(ae())throw new cD(J9.Closed,"Connection is closed.");if(te())throw new cD(J9.Disposed,"Connection is disposed.")}s(je,"throwIfClosedOrDisposed");function tt(){if(ie())throw new cD(J9.AlreadyListening,"Connection is already listening")}s(tt,"throwIfListening");function pt(){if(!ie())throw new Error("Call listen() first.")}s(pt,"throwIfNotListening");function Ft(ve){return ve===void 0?null:ve}s(Ft,"undefinedToNull");function Jt(ve){if(ve!==null)return ve}s(Jt,"nullToUndefined");function Qt(ve){return ve!=null&&!Array.isArray(ve)&&typeof ve=="object"}s(Qt,"isNamedParam");function Vr(ve,Ge){switch(ve){case Un.ParameterStructures.auto:return Qt(Ge)?Jt(Ge):[Ft(Ge)];case Un.ParameterStructures.byName:if(!Qt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return Jt(Ge);case Un.ParameterStructures.byPosition:return[Ft(Ge)];default:throw new Error(`Unknown parameter structure ${ve.toString()}`)}}s(Vr,"computeSingleParam");function Pr(ve,Ge){let ft,Tt=ve.numberOfParams;switch(Tt){case 0:ft=void 0;break;case 1:ft=Vr(ve.parameterStructures,Ge[0]);break;default:ft=[];for(let or=0;or<Ge.length&&or<Tt;or++)ft.push(Ft(Ge[or]));if(Ge.length<Tt)for(let or=Ge.length;or<Tt;or++)ft.push(null);break}return ft}s(Pr,"computeMessageParams");let ln={sendNotification:s((ve,...Ge)=>{je();let ft,Tt;if(Ua.string(ve)){ft=ve;let Zt=Ge[0],Ir=0,ur=Un.ParameterStructures.auto;Un.ParameterStructures.is(Zt)&&(Ir=1,ur=Zt);let rr=Ge.length,lr=rr-Ir;switch(lr){case 0:Tt=void 0;break;case 1:Tt=Vr(ur,Ge[Ir]);break;default:if(ur===Un.ParameterStructures.byName)throw new Error(`Received ${lr} parameters for 'by Name' notification parameter structure.`);Tt=Ge.slice(Ir,rr).map(nr=>Ft(nr));break}}else{let Zt=Ge;ft=ve.method,Tt=Pr(ve,Zt)}let or={jsonrpc:l,method:ft,params:Tt};return $e(or),e.write(or).catch(Zt=>{throw i.error("Sending notification failed."),Zt})},"sendNotification"),onNotification:s((ve,Ge)=>{je();let ft;return Ua.func(ve)?p=ve:Ge&&(Ua.string(ve)?(ft=ve,m.set(ve,{type:void 0,handler:Ge})):(ft=ve.method,m.set(ve.method,{type:ve,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((ve,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((ve,Ge,ft)=>ln.sendNotification(K9.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:z.event,sendRequest:s((ve,...Ge)=>{je(),pt();let ft,Tt,or;if(Ua.string(ve)){ft=ve;let rr=Ge[0],lr=Ge[Ge.length-1],nr=0,Nr=Un.ParameterStructures.auto;Un.ParameterStructures.is(rr)&&(nr=1,Nr=rr);let zr=Ge.length;ape.CancellationToken.is(lr)&&(zr=zr-1,or=lr);let sn=zr-nr;switch(sn){case 0:Tt=void 0;break;case 1:Tt=Vr(Nr,Ge[nr]);break;default:if(Nr===Un.ParameterStructures.byName)throw new Error(`Received ${sn} parameters for 'by Name' request parameter structure.`);Tt=Ge.slice(nr,zr).map(yn=>Ft(yn));break}}else{let rr=Ge;ft=ve.method,Tt=Pr(ve,rr);let lr=ve.numberOfParams;or=ape.CancellationToken.is(rr[lr])?rr[lr]:void 0}let Zt=o++,Ir;or&&(Ir=or.onCancellationRequested(()=>{let rr=U.sender.sendCancellation(ln,Zt);return rr===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Zt}`),Promise.resolve()):rr.catch(()=>{i.log(`Sending cancellation messages for id ${Zt} failed`)})}));let ur={jsonrpc:l,id:Zt,method:ft,params:Tt};return ye(ur),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(ur),new Promise(async(rr,lr)=>{let nr=s(sn=>{rr(sn),U.sender.cleanup(Zt),Ir?.dispose()},"resolveWithCleanup"),Nr=s(sn=>{lr(sn),U.sender.cleanup(Zt),Ir?.dispose()},"rejectWithCleanup"),zr={method:ft,timerStart:Date.now(),resolve:nr,reject:Nr};try{await e.write(ur),y.set(Zt,zr)}catch(sn){throw i.error("Sending request failed."),zr.reject(new Un.ResponseError(Un.ErrorCodes.MessageWriteError,sn.message?sn.message:"Unknown reason")),sn}})},"sendRequest"),onRequest:s((ve,Ge)=>{je();let ft=null;return upe.is(ve)?(ft=void 0,u=ve):Ua.string(ve)?(ft=null,Ge!==void 0&&(ft=ve,f.set(ve,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=ve.method,f.set(ve.method,{type:ve,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>y.size>0,"hasPendingResponse"),trace:s(async(ve,Ge,ft)=>{let Tt=!1,or=hp.Text;ft!==void 0&&(Ua.boolean(ft)?Tt=ft:(Tt=ft.sendNotification||!1,or=ft.traceFormat||hp.Text)),S=ve,R=or,S===zo.Off?B=void 0:B=Ge,Tt&&!ae()&&!te()&&await ln.sendNotification(dpe.type,{value:zo.toString(ve)})},"trace"),onError:O.event,onClose:K.event,onUnhandledNotification:V.event,onDispose:Q.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;L=sA.Disposed,Q.fire(void 0);let ve=new Un.ResponseError(Un.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of y.values())Ge.reject(ve);y=new Map,b=new Map,E=new Set,A=new M8e.LinkedMap,Ua.func(e.dispose)&&e.dispose(),Ua.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{je(),tt(),L=sA.Listening,t.listen(lt)},"listen"),inspect:s(()=>{(0,N8e.default)().console.log("inspect")},"inspect")};return ln.onNotification(iG.type,ve=>{if(S===zo.Off||!B)return;let Ge=S===zo.Verbose||S===zo.Compact;B.log(ve.message,Ge?ve.verbose:void 0)}),ln.onNotification(K9.type,ve=>{let Ge=h.get(ve.token);Ge?Ge(ve.value):z.fire(ve)}),ln}s(FPt,"createMessageConnection");fi.createMessageConnection=FPt});var uG=H(At=>{"use strict";d();Object.defineProperty(At,"__esModule",{value:!0});At.ProgressType=At.ProgressToken=At.createMessageConnection=At.NullLogger=At.ConnectionOptions=At.ConnectionStrategy=At.AbstractMessageBuffer=At.WriteableStreamMessageWriter=At.AbstractMessageWriter=At.MessageWriter=At.ReadableStreamMessageReader=At.AbstractMessageReader=At.MessageReader=At.SharedArrayReceiverStrategy=At.SharedArraySenderStrategy=At.CancellationToken=At.CancellationTokenSource=At.Emitter=At.Event=At.Disposable=At.LRUCache=At.Touch=At.LinkedMap=At.ParameterStructures=At.NotificationType9=At.NotificationType8=At.NotificationType7=At.NotificationType6=At.NotificationType5=At.NotificationType4=At.NotificationType3=At.NotificationType2=At.NotificationType1=At.NotificationType0=At.NotificationType=At.ErrorCodes=At.ResponseError=At.RequestType9=At.RequestType8=At.RequestType7=At.RequestType6=At.RequestType5=At.RequestType4=At.RequestType3=At.RequestType2=At.RequestType1=At.RequestType0=At.RequestType=At.Message=At.RAL=void 0;At.MessageStrategy=At.CancellationStrategy=At.CancellationSenderStrategy=At.CancellationReceiverStrategy=At.ConnectionError=At.ConnectionErrors=At.LogTraceNotification=At.SetTraceNotification=At.TraceFormat=At.TraceValues=At.Trace=void 0;var Ms=Q0e();Object.defineProperty(At,"Message",{enumerable:!0,get:s(function(){return Ms.Message},"get")});Object.defineProperty(At,"RequestType",{enumerable:!0,get:s(function(){return Ms.RequestType},"get")});Object.defineProperty(At,"RequestType0",{enumerable:!0,get:s(function(){return Ms.RequestType0},"get")});Object.defineProperty(At,"RequestType1",{enumerable:!0,get:s(function(){return Ms.RequestType1},"get")});Object.defineProperty(At,"RequestType2",{enumerable:!0,get:s(function(){return Ms.RequestType2},"get")});Object.defineProperty(At,"RequestType3",{enumerable:!0,get:s(function(){return Ms.RequestType3},"get")});Object.defineProperty(At,"RequestType4",{enumerable:!0,get:s(function(){return Ms.RequestType4},"get")});Object.defineProperty(At,"RequestType5",{enumerable:!0,get:s(function(){return Ms.RequestType5},"get")});Object.defineProperty(At,"RequestType6",{enumerable:!0,get:s(function(){return Ms.RequestType6},"get")});Object.defineProperty(At,"RequestType7",{enumerable:!0,get:s(function(){return Ms.RequestType7},"get")});Object.defineProperty(At,"RequestType8",{enumerable:!0,get:s(function(){return Ms.RequestType8},"get")});Object.defineProperty(At,"RequestType9",{enumerable:!0,get:s(function(){return Ms.RequestType9},"get")});Object.defineProperty(At,"ResponseError",{enumerable:!0,get:s(function(){return Ms.ResponseError},"get")});Object.defineProperty(At,"ErrorCodes",{enumerable:!0,get:s(function(){return Ms.ErrorCodes},"get")});Object.defineProperty(At,"NotificationType",{enumerable:!0,get:s(function(){return Ms.NotificationType},"get")});Object.defineProperty(At,"NotificationType0",{enumerable:!0,get:s(function(){return Ms.NotificationType0},"get")});Object.defineProperty(At,"NotificationType1",{enumerable:!0,get:s(function(){return Ms.NotificationType1},"get")});Object.defineProperty(At,"NotificationType2",{enumerable:!0,get:s(function(){return Ms.NotificationType2},"get")});Object.defineProperty(At,"NotificationType3",{enumerable:!0,get:s(function(){return Ms.NotificationType3},"get")});Object.defineProperty(At,"NotificationType4",{enumerable:!0,get:s(function(){return Ms.NotificationType4},"get")});Object.defineProperty(At,"NotificationType5",{enumerable:!0,get:s(function(){return Ms.NotificationType5},"get")});Object.defineProperty(At,"NotificationType6",{enumerable:!0,get:s(function(){return Ms.NotificationType6},"get")});Object.defineProperty(At,"NotificationType7",{enumerable:!0,get:s(function(){return Ms.NotificationType7},"get")});Object.defineProperty(At,"NotificationType8",{enumerable:!0,get:s(function(){return Ms.NotificationType8},"get")});Object.defineProperty(At,"NotificationType9",{enumerable:!0,get:s(function(){return Ms.NotificationType9},"get")});Object.defineProperty(At,"ParameterStructures",{enumerable:!0,get:s(function(){return Ms.ParameterStructures},"get")});var mpe=q0e();Object.defineProperty(At,"LinkedMap",{enumerable:!0,get:s(function(){return mpe.LinkedMap},"get")});Object.defineProperty(At,"LRUCache",{enumerable:!0,get:s(function(){return mpe.LRUCache},"get")});Object.defineProperty(At,"Touch",{enumerable:!0,get:s(function(){return mpe.Touch},"get")});var OPt=b8e();Object.defineProperty(At,"Disposable",{enumerable:!0,get:s(function(){return OPt.Disposable},"get")});var Q8e=iD();Object.defineProperty(At,"Event",{enumerable:!0,get:s(function(){return Q8e.Event},"get")});Object.defineProperty(At,"Emitter",{enumerable:!0,get:s(function(){return Q8e.Emitter},"get")});var U8e=Zj();Object.defineProperty(At,"CancellationTokenSource",{enumerable:!0,get:s(function(){return U8e.CancellationTokenSource},"get")});Object.defineProperty(At,"CancellationToken",{enumerable:!0,get:s(function(){return U8e.CancellationToken},"get")});var q8e=T8e();Object.defineProperty(At,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return q8e.SharedArraySenderStrategy},"get")});Object.defineProperty(At,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return q8e.SharedArrayReceiverStrategy},"get")});var hpe=S8e();Object.defineProperty(At,"MessageReader",{enumerable:!0,get:s(function(){return hpe.MessageReader},"get")});Object.defineProperty(At,"AbstractMessageReader",{enumerable:!0,get:s(function(){return hpe.AbstractMessageReader},"get")});Object.defineProperty(At,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return hpe.ReadableStreamMessageReader},"get")});var gpe=D8e();Object.defineProperty(At,"MessageWriter",{enumerable:!0,get:s(function(){return gpe.MessageWriter},"get")});Object.defineProperty(At,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return gpe.AbstractMessageWriter},"get")});Object.defineProperty(At,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return gpe.WriteableStreamMessageWriter},"get")});var QPt=B8e();Object.defineProperty(At,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return QPt.AbstractMessageBuffer},"get")});var Qu=O8e();Object.defineProperty(At,"ConnectionStrategy",{enumerable:!0,get:s(function(){return Qu.ConnectionStrategy},"get")});Object.defineProperty(At,"ConnectionOptions",{enumerable:!0,get:s(function(){return Qu.ConnectionOptions},"get")});Object.defineProperty(At,"NullLogger",{enumerable:!0,get:s(function(){return Qu.NullLogger},"get")});Object.defineProperty(At,"createMessageConnection",{enumerable:!0,get:s(function(){return Qu.createMessageConnection},"get")});Object.defineProperty(At,"ProgressToken",{enumerable:!0,get:s(function(){return Qu.ProgressToken},"get")});Object.defineProperty(At,"ProgressType",{enumerable:!0,get:s(function(){return Qu.ProgressType},"get")});Object.defineProperty(At,"Trace",{enumerable:!0,get:s(function(){return Qu.Trace},"get")});Object.defineProperty(At,"TraceValues",{enumerable:!0,get:s(function(){return Qu.TraceValues},"get")});Object.defineProperty(At,"TraceFormat",{enumerable:!0,get:s(function(){return Qu.TraceFormat},"get")});Object.defineProperty(At,"SetTraceNotification",{enumerable:!0,get:s(function(){return Qu.SetTraceNotification},"get")});Object.defineProperty(At,"LogTraceNotification",{enumerable:!0,get:s(function(){return Qu.LogTraceNotification},"get")});Object.defineProperty(At,"ConnectionErrors",{enumerable:!0,get:s(function(){return Qu.ConnectionErrors},"get")});Object.defineProperty(At,"ConnectionError",{enumerable:!0,get:s(function(){return Qu.ConnectionError},"get")});Object.defineProperty(At,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return Qu.CancellationReceiverStrategy},"get")});Object.defineProperty(At,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return Qu.CancellationSenderStrategy},"get")});Object.defineProperty(At,"CancellationStrategy",{enumerable:!0,get:s(function(){return Qu.CancellationStrategy},"get")});Object.defineProperty(At,"MessageStrategy",{enumerable:!0,get:s(function(){return Qu.MessageStrategy},"get")});var UPt=_I();At.RAL=UPt.default});var W8e=H(vpe=>{"use strict";d();Object.defineProperty(vpe,"__esModule",{value:!0});var H8e=require("util"),jv=uG(),dG=class t extends jv.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new H8e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};dG.emptyBuffer=Buffer.allocUnsafe(0);var Ape=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),jv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),jv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),jv.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),jv.Disposable.create(()=>this.stream.off("data",e))}},ype=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),jv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),jv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),jv.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},$8e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new dG(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new H8e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Ape(t),"asReadableStream"),asWritableStream:s(t=>new ype(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Cpe(){return $8e}s(Cpe,"RIL");(function(t){function e(){jv.RAL.install($8e)}s(e,"install"),t.install=e})(Cpe||(Cpe={}));vpe.default=Cpe});var e2=H(vo=>{"use strict";d();var qPt=vo&&vo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HPt=vo&&vo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qPt(e,t,r)};Object.defineProperty(vo,"__esModule",{value:!0});vo.createMessageConnection=vo.createServerSocketTransport=vo.createClientSocketTransport=vo.createServerPipeTransport=vo.createClientPipeTransport=vo.generateRandomPipeName=vo.StreamMessageWriter=vo.StreamMessageReader=vo.SocketMessageWriter=vo.SocketMessageReader=vo.PortMessageWriter=vo.PortMessageReader=vo.IPCMessageWriter=vo.IPCMessageReader=void 0;var lD=W8e();lD.default.install();var j8e=require("path"),$Pt=require("os"),WPt=require("crypto"),mG=require("net"),gp=uG();HPt(uG(),vo);var xpe=class extends gp.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),gp.Disposable.create(()=>this.process.off("message",e))}};vo.IPCMessageReader=xpe;var Epe=class extends gp.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};vo.IPCMessageWriter=Epe;var bpe=class extends gp.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new gp.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};vo.PortMessageReader=bpe;var Ipe=class extends gp.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};vo.PortMessageWriter=Ipe;var X_=class extends gp.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,lD.default)().stream.asReadableStream(e),r)}};vo.SocketMessageReader=X_;var Z_=class extends gp.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,lD.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};vo.SocketMessageWriter=Z_;var fG=class extends gp.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,lD.default)().stream.asReadableStream(e),r)}};vo.StreamMessageReader=fG;var pG=class extends gp.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,lD.default)().stream.asWritableStream(e),r)}};vo.StreamMessageWriter=pG;var G8e=process.env.XDG_RUNTIME_DIR,jPt=new Map([["linux",107],["darwin",103]]);function GPt(){let t=(0,WPt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;G8e?e=j8e.join(G8e,`vscode-ipc-${t}.sock`):e=j8e.join($Pt.tmpdir(),`vscode-${t}.sock`);let r=jPt.get(process.platform);return r!==void 0&&e.length>r&&(0,lD.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(GPt,"generateRandomPipeName");vo.generateRandomPipeName=GPt;function VPt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,mG.createServer)(c=>{a.close(),r([new X_(c,e),new Z_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(VPt,"createClientPipeTransport");vo.createClientPipeTransport=VPt;function zPt(t,e="utf-8"){let r=(0,mG.createConnection)(t);return[new X_(r,e),new Z_(r,e)]}s(zPt,"createServerPipeTransport");vo.createServerPipeTransport=zPt;function YPt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,mG.createServer)(c=>{a.close(),r([new X_(c,e),new Z_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(YPt,"createClientSocketTransport");vo.createClientSocketTransport=YPt;function KPt(t,e="utf-8"){let r=(0,mG.createConnection)(t,"127.0.0.1");return[new X_(r,e),new Z_(r,e)]}s(KPt,"createServerSocketTransport");vo.createServerSocketTransport=KPt;function JPt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(JPt,"isReadableStream");function XPt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(XPt,"isWritableStream");function ZPt(t,e,r,n){r||(r=gp.NullLogger);let i=JPt(t)?new fG(t):t,o=XPt(e)?new pG(e):e;return gp.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,gp.createMessageConnection)(i,o,r,n)}s(ZPt,"createMessageConnection");vo.createMessageConnection=ZPt});var Tpe=H((XWr,V8e)=>{"use strict";d();V8e.exports=e2()});var gG=H((z8e,hG)=>{d();(function(t){if(typeof hG=="object"&&typeof hG.exports=="object"){var e=t(require,z8e);e!==void 0&&(hG.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(Y){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),Y.is=Ce})(r||(e.DocumentUri=r={}));var n;(function(Y){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),Y.is=Ce})(n||(e.URI=n={}));var i;(function(Y){Y.MIN_VALUE=-2147483648,Y.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&Y.MIN_VALUE<=Ie&&Ie<=Y.MAX_VALUE}s(Ce,"is"),Y.is=Ce})(i||(e.integer=i={}));var o;(function(Y){Y.MIN_VALUE=0,Y.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&Y.MIN_VALUE<=Ie&&Ie<=Y.MAX_VALUE}s(Ce,"is"),Y.is=Ce})(o||(e.uinteger=o={}));var a;(function(Y){function Ce(F,D){return F===Number.MAX_VALUE&&(F=o.MAX_VALUE),D===Number.MAX_VALUE&&(D=o.MAX_VALUE),{line:F,character:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.line)&&Pe.uinteger(D.character)}s(Ie,"is"),Y.is=Ie})(a||(e.Position=a={}));var c;(function(Y){function Ce(F,D,ee,ge){if(Pe.uinteger(F)&&Pe.uinteger(D)&&Pe.uinteger(ee)&&Pe.uinteger(ge))return{start:a.create(F,D),end:a.create(ee,ge)};if(a.is(F)&&a.is(D))return{start:F,end:D};throw new Error("Range#create called with invalid arguments[".concat(F,", ").concat(D,", ").concat(ee,", ").concat(ge,"]"))}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.start)&&a.is(D.end)}s(Ie,"is"),Y.is=Ie})(c||(e.Range=c={}));var l;(function(Y){function Ce(F,D){return{uri:F,range:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(Pe.string(D.uri)||Pe.undefined(D.uri))}s(Ie,"is"),Y.is=Ie})(l||(e.Location=l={}));var u;(function(Y){function Ce(F,D,ee,ge){return{targetUri:F,targetRange:D,targetSelectionRange:ee,originSelectionRange:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.targetRange)&&Pe.string(D.targetUri)&&c.is(D.targetSelectionRange)&&(c.is(D.originSelectionRange)||Pe.undefined(D.originSelectionRange))}s(Ie,"is"),Y.is=Ie})(u||(e.LocationLink=u={}));var f;(function(Y){function Ce(F,D,ee,ge){return{red:F,green:D,blue:ee,alpha:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.numberRange(D.red,0,1)&&Pe.numberRange(D.green,0,1)&&Pe.numberRange(D.blue,0,1)&&Pe.numberRange(D.alpha,0,1)}s(Ie,"is"),Y.is=Ie})(f||(e.Color=f={}));var p;(function(Y){function Ce(F,D){return{range:F,color:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&f.is(D.color)}s(Ie,"is"),Y.is=Ie})(p||(e.ColorInformation=p={}));var m;(function(Y){function Ce(F,D,ee){return{label:F,textEdit:D,additionalTextEdits:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.undefined(D.textEdit)||B.is(D))&&(Pe.undefined(D.additionalTextEdits)||Pe.typedArray(D.additionalTextEdits,B.is))}s(Ie,"is"),Y.is=Ie})(m||(e.ColorPresentation=m={}));var h;(function(Y){Y.Comment="comment",Y.Imports="imports",Y.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={startLine:F,endLine:D};return Pe.defined(ee)&&(St.startCharacter=ee),Pe.defined(ge)&&(St.endCharacter=ge),Pe.defined(_e)&&(St.kind=_e),Pe.defined(ut)&&(St.collapsedText=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.startLine)&&Pe.uinteger(D.startLine)&&(Pe.undefined(D.startCharacter)||Pe.uinteger(D.startCharacter))&&(Pe.undefined(D.endCharacter)||Pe.uinteger(D.endCharacter))&&(Pe.undefined(D.kind)||Pe.string(D.kind))}s(Ie,"is"),Y.is=Ie})(g||(e.FoldingRange=g={}));var A;(function(Y){function Ce(F,D){return{location:F,message:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&l.is(D.location)&&Pe.string(D.message)}s(Ie,"is"),Y.is=Ie})(A||(e.DiagnosticRelatedInformation=A={}));var y;(function(Y){Y.Error=1,Y.Warning=2,Y.Information=3,Y.Hint=4})(y||(e.DiagnosticSeverity=y={}));var E;(function(Y){Y.Unnecessary=1,Y.Deprecated=2})(E||(e.DiagnosticTag=E={}));var b;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&Pe.string(F.href)}s(Ce,"is"),Y.is=Ce})(b||(e.CodeDescription=b={}));var S;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={range:F,message:D};return Pe.defined(ee)&&(St.severity=ee),Pe.defined(ge)&&(St.code=ge),Pe.defined(_e)&&(St.source=_e),Pe.defined(ut)&&(St.relatedInformation=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D,ee=F;return Pe.defined(ee)&&c.is(ee.range)&&Pe.string(ee.message)&&(Pe.number(ee.severity)||Pe.undefined(ee.severity))&&(Pe.integer(ee.code)||Pe.string(ee.code)||Pe.undefined(ee.code))&&(Pe.undefined(ee.codeDescription)||Pe.string((D=ee.codeDescription)===null||D===void 0?void 0:D.href))&&(Pe.string(ee.source)||Pe.undefined(ee.source))&&(Pe.undefined(ee.relatedInformation)||Pe.typedArray(ee.relatedInformation,A.is))}s(Ie,"is"),Y.is=Ie})(S||(e.Diagnostic=S={}));var R;(function(Y){function Ce(F,D){for(var ee=[],ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];var _e={title:F,command:D};return Pe.defined(ee)&&ee.length>0&&(_e.arguments=ee),_e}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.title)&&Pe.string(D.command)}s(Ie,"is"),Y.is=Ie})(R||(e.Command=R={}));var B;(function(Y){function Ce(ee,ge){return{range:ee,newText:ge}}s(Ce,"replace"),Y.replace=Ce;function Ie(ee,ge){return{range:{start:ee,end:ee},newText:ge}}s(Ie,"insert"),Y.insert=Ie;function F(ee){return{range:ee,newText:""}}s(F,"del"),Y.del=F;function D(ee){var ge=ee;return Pe.objectLiteral(ge)&&Pe.string(ge.newText)&&c.is(ge.range)}s(D,"is"),Y.is=D})(B||(e.TextEdit=B={}));var L;(function(Y){function Ce(F,D,ee){var ge={label:F};return D!==void 0&&(ge.needsConfirmation=D),ee!==void 0&&(ge.description=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.boolean(D.needsConfirmation)||D.needsConfirmation===void 0)&&(Pe.string(D.description)||D.description===void 0)}s(Ie,"is"),Y.is=Ie})(L||(e.ChangeAnnotation=L={}));var O;(function(Y){function Ce(Ie){var F=Ie;return Pe.string(F)}s(Ce,"is"),Y.is=Ce})(O||(e.ChangeAnnotationIdentifier=O={}));var K;(function(Y){function Ce(ee,ge,_e){return{range:ee,newText:ge,annotationId:_e}}s(Ce,"replace"),Y.replace=Ce;function Ie(ee,ge,_e){return{range:{start:ee,end:ee},newText:ge,annotationId:_e}}s(Ie,"insert"),Y.insert=Ie;function F(ee,ge){return{range:ee,newText:"",annotationId:ge}}s(F,"del"),Y.del=F;function D(ee){var ge=ee;return B.is(ge)&&(L.is(ge.annotationId)||O.is(ge.annotationId))}s(D,"is"),Y.is=D})(K||(e.AnnotatedTextEdit=K={}));var V;(function(Y){function Ce(F,D){return{textDocument:F,edits:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&ae.is(D.textDocument)&&Array.isArray(D.edits)}s(Ie,"is"),Y.is=Ie})(V||(e.TextDocumentEdit=V={}));var z;(function(Y){function Ce(F,D,ee){var ge={kind:"create",uri:F};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="create"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(z||(e.CreateFile=z={}));var Q;(function(Y){function Ce(F,D,ee,ge){var _e={kind:"rename",oldUri:F,newUri:D};return ee!==void 0&&(ee.overwrite!==void 0||ee.ignoreIfExists!==void 0)&&(_e.options=ee),ge!==void 0&&(_e.annotationId=ge),_e}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="rename"&&Pe.string(D.oldUri)&&Pe.string(D.newUri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(Q||(e.RenameFile=Q={}));var U;(function(Y){function Ce(F,D,ee){var ge={kind:"delete",uri:F};return D!==void 0&&(D.recursive!==void 0||D.ignoreIfNotExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="delete"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.recursive===void 0||Pe.boolean(D.options.recursive))&&(D.options.ignoreIfNotExists===void 0||Pe.boolean(D.options.ignoreIfNotExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(U||(e.DeleteFile=U={}));var Z;(function(Y){function Ce(Ie){var F=Ie;return F&&(F.changes!==void 0||F.documentChanges!==void 0)&&(F.documentChanges===void 0||F.documentChanges.every(function(D){return Pe.string(D.kind)?z.is(D)||Q.is(D)||U.is(D):V.is(D)}))}s(Ce,"is"),Y.is=Ce})(Z||(e.WorkspaceEdit=Z={}));var J=function(){function Y(Ce,Ie){this.edits=Ce,this.changeAnnotations=Ie}return s(Y,"TextEditChangeImpl"),Y.prototype.insert=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.insert(Ce,Ie):O.is(F)?(ee=F,D=K.insert(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=K.insert(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},Y.prototype.replace=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.replace(Ce,Ie):O.is(F)?(ee=F,D=K.replace(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=K.replace(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},Y.prototype.delete=function(Ce,Ie){var F,D;if(Ie===void 0?F=B.del(Ce):O.is(Ie)?(D=Ie,F=K.del(Ce,Ie)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(Ie),F=K.del(Ce,D)),this.edits.push(F),D!==void 0)return D},Y.prototype.add=function(Ce){this.edits.push(Ce)},Y.prototype.all=function(){return this.edits},Y.prototype.clear=function(){this.edits.splice(0,this.edits.length)},Y.prototype.assertChangeAnnotations=function(Ce){if(Ce===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},Y}(),j=function(){function Y(Ce){this._annotations=Ce===void 0?Object.create(null):Ce,this._counter=0,this._size=0}return s(Y,"ChangeAnnotations"),Y.prototype.all=function(){return this._annotations},Object.defineProperty(Y.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),Y.prototype.manage=function(Ce,Ie){var F;if(O.is(Ce)?F=Ce:(F=this.nextId(),Ie=Ce),this._annotations[F]!==void 0)throw new Error("Id ".concat(F," is already in use."));if(Ie===void 0)throw new Error("No annotation provided for id ".concat(F));return this._annotations[F]=Ie,this._size++,F},Y.prototype.nextId=function(){return this._counter++,this._counter.toString()},Y}(),$=function(){function Y(Ce){var Ie=this;this._textEditChanges=Object.create(null),Ce!==void 0?(this._workspaceEdit=Ce,Ce.documentChanges?(this._changeAnnotations=new j(Ce.changeAnnotations),Ce.changeAnnotations=this._changeAnnotations.all(),Ce.documentChanges.forEach(function(F){if(V.is(F)){var D=new J(F.edits,Ie._changeAnnotations);Ie._textEditChanges[F.textDocument.uri]=D}})):Ce.changes&&Object.keys(Ce.changes).forEach(function(F){var D=new J(Ce.changes[F]);Ie._textEditChanges[F]=D})):this._workspaceEdit={}}return s(Y,"WorkspaceChange"),Object.defineProperty(Y.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),Y.prototype.getTextEditChange=function(Ce){if(ae.is(Ce)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Ie={uri:Ce.uri,version:Ce.version},F=this._textEditChanges[Ie.uri];if(!F){var D=[],ee={textDocument:Ie,edits:D};this._workspaceEdit.documentChanges.push(ee),F=new J(D,this._changeAnnotations),this._textEditChanges[Ie.uri]=F}return F}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var F=this._textEditChanges[Ce];if(!F){var D=[];this._workspaceEdit.changes[Ce]=D,F=new J(D),this._textEditChanges[Ce]=F}return F}},Y.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},Y.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},Y.prototype.createFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;L.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=z.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=z.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},Y.prototype.renameFile=function(Ce,Ie,F,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ee;L.is(F)||O.is(F)?ee=F:D=F;var ge,_e;if(ee===void 0?ge=Q.create(Ce,Ie,D):(_e=O.is(ee)?ee:this._changeAnnotations.manage(ee),ge=Q.create(Ce,Ie,D,_e)),this._workspaceEdit.documentChanges.push(ge),_e!==void 0)return _e},Y.prototype.deleteFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;L.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=U.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=U.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},Y}();e.WorkspaceChange=$;var X;(function(Y){function Ce(F){return{uri:F}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)}s(Ie,"is"),Y.is=Ie})(X||(e.TextDocumentIdentifier=X={}));var ie;(function(Y){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.integer(D.version)}s(Ie,"is"),Y.is=Ie})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ae;(function(Y){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&(D.version===null||Pe.integer(D.version))}s(Ie,"is"),Y.is=Ie})(ae||(e.OptionalVersionedTextDocumentIdentifier=ae={}));var te;(function(Y){function Ce(F,D,ee,ge){return{uri:F,languageId:D,version:ee,text:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.string(D.languageId)&&Pe.integer(D.version)&&Pe.string(D.text)}s(Ie,"is"),Y.is=Ie})(te||(e.TextDocumentItem=te={}));var pe;(function(Y){Y.PlainText="plaintext",Y.Markdown="markdown";function Ce(Ie){var F=Ie;return F===Y.PlainText||F===Y.Markdown}s(Ce,"is"),Y.is=Ce})(pe||(e.MarkupKind=pe={}));var Ae;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(Ie)&&pe.is(F.kind)&&Pe.string(F.value)}s(Ce,"is"),Y.is=Ce})(Ae||(e.MarkupContent=Ae={}));var Oe;(function(Y){Y.Text=1,Y.Method=2,Y.Function=3,Y.Constructor=4,Y.Field=5,Y.Variable=6,Y.Class=7,Y.Interface=8,Y.Module=9,Y.Property=10,Y.Unit=11,Y.Value=12,Y.Enum=13,Y.Keyword=14,Y.Snippet=15,Y.Color=16,Y.File=17,Y.Reference=18,Y.Folder=19,Y.EnumMember=20,Y.Constant=21,Y.Struct=22,Y.Event=23,Y.Operator=24,Y.TypeParameter=25})(Oe||(e.CompletionItemKind=Oe={}));var Te;(function(Y){Y.PlainText=1,Y.Snippet=2})(Te||(e.InsertTextFormat=Te={}));var Je;(function(Y){Y.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Fe;(function(Y){function Ce(F,D,ee){return{newText:F,insert:D,replace:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.newText)&&c.is(D.insert)&&c.is(D.replace)}s(Ie,"is"),Y.is=Ie})(Fe||(e.InsertReplaceEdit=Fe={}));var lt;(function(Y){Y.asIs=1,Y.adjustIndentation=2})(lt||(e.InsertTextMode=lt={}));var _t;(function(Y){function Ce(Ie){var F=Ie;return F&&(Pe.string(F.detail)||F.detail===void 0)&&(Pe.string(F.description)||F.description===void 0)}s(Ce,"is"),Y.is=Ce})(_t||(e.CompletionItemLabelDetails=_t={}));var xt;(function(Y){function Ce(Ie){return{label:Ie}}s(Ce,"create"),Y.create=Ce})(xt||(e.CompletionItem=xt={}));var ht;(function(Y){function Ce(Ie,F){return{items:Ie||[],isIncomplete:!!F}}s(Ce,"create"),Y.create=Ce})(ht||(e.CompletionList=ht={}));var ue;(function(Y){function Ce(F){return F.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(Ce,"fromPlainText"),Y.fromPlainText=Ce;function Ie(F){var D=F;return Pe.string(D)||Pe.objectLiteral(D)&&Pe.string(D.language)&&Pe.string(D.value)}s(Ie,"is"),Y.is=Ie})(ue||(e.MarkedString=ue={}));var Ue;(function(Y){function Ce(Ie){var F=Ie;return!!F&&Pe.objectLiteral(F)&&(Ae.is(F.contents)||ue.is(F.contents)||Pe.typedArray(F.contents,ue.is))&&(Ie.range===void 0||c.is(Ie.range))}s(Ce,"is"),Y.is=Ce})(Ue||(e.Hover=Ue={}));var ye;(function(Y){function Ce(Ie,F){return F?{label:Ie,documentation:F}:{label:Ie}}s(Ce,"create"),Y.create=Ce})(ye||(e.ParameterInformation=ye={}));var $e;(function(Y){function Ce(Ie,F){for(var D=[],ee=2;ee<arguments.length;ee++)D[ee-2]=arguments[ee];var ge={label:Ie};return Pe.defined(F)&&(ge.documentation=F),Pe.defined(D)?ge.parameters=D:ge.parameters=[],ge}s(Ce,"create"),Y.create=Ce})($e||(e.SignatureInformation=$e={}));var se;(function(Y){Y.Text=1,Y.Read=2,Y.Write=3})(se||(e.DocumentHighlightKind=se={}));var le;(function(Y){function Ce(Ie,F){var D={range:Ie};return Pe.number(F)&&(D.kind=F),D}s(Ce,"create"),Y.create=Ce})(le||(e.DocumentHighlight=le={}));var qe;(function(Y){Y.File=1,Y.Module=2,Y.Namespace=3,Y.Package=4,Y.Class=5,Y.Method=6,Y.Property=7,Y.Field=8,Y.Constructor=9,Y.Enum=10,Y.Interface=11,Y.Function=12,Y.Variable=13,Y.Constant=14,Y.String=15,Y.Number=16,Y.Boolean=17,Y.Array=18,Y.Object=19,Y.Key=20,Y.Null=21,Y.EnumMember=22,Y.Struct=23,Y.Event=24,Y.Operator=25,Y.TypeParameter=26})(qe||(e.SymbolKind=qe={}));var Be;(function(Y){Y.Deprecated=1})(Be||(e.SymbolTag=Be={}));var Ee;(function(Y){function Ce(Ie,F,D,ee,ge){var _e={name:Ie,kind:F,location:{uri:ee,range:D}};return ge&&(_e.containerName=ge),_e}s(Ce,"create"),Y.create=Ce})(Ee||(e.SymbolInformation=Ee={}));var je;(function(Y){function Ce(Ie,F,D,ee){return ee!==void 0?{name:Ie,kind:F,location:{uri:D,range:ee}}:{name:Ie,kind:F,location:{uri:D}}}s(Ce,"create"),Y.create=Ce})(je||(e.WorkspaceSymbol=je={}));var tt;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={name:F,detail:D,kind:ee,range:ge,selectionRange:_e};return ut!==void 0&&(St.children=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.name)&&Pe.number(D.kind)&&c.is(D.range)&&c.is(D.selectionRange)&&(D.detail===void 0||Pe.string(D.detail))&&(D.deprecated===void 0||Pe.boolean(D.deprecated))&&(D.children===void 0||Array.isArray(D.children))&&(D.tags===void 0||Array.isArray(D.tags))}s(Ie,"is"),Y.is=Ie})(tt||(e.DocumentSymbol=tt={}));var pt;(function(Y){Y.Empty="",Y.QuickFix="quickfix",Y.Refactor="refactor",Y.RefactorExtract="refactor.extract",Y.RefactorInline="refactor.inline",Y.RefactorRewrite="refactor.rewrite",Y.Source="source",Y.SourceOrganizeImports="source.organizeImports",Y.SourceFixAll="source.fixAll"})(pt||(e.CodeActionKind=pt={}));var Ft;(function(Y){Y.Invoked=1,Y.Automatic=2})(Ft||(e.CodeActionTriggerKind=Ft={}));var Jt;(function(Y){function Ce(F,D,ee){var ge={diagnostics:F};return D!=null&&(ge.only=D),ee!=null&&(ge.triggerKind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.typedArray(D.diagnostics,S.is)&&(D.only===void 0||Pe.typedArray(D.only,Pe.string))&&(D.triggerKind===void 0||D.triggerKind===Ft.Invoked||D.triggerKind===Ft.Automatic)}s(Ie,"is"),Y.is=Ie})(Jt||(e.CodeActionContext=Jt={}));var Qt;(function(Y){function Ce(F,D,ee){var ge={title:F},_e=!0;return typeof D=="string"?(_e=!1,ge.kind=D):R.is(D)?ge.command=D:ge.edit=D,_e&&ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.title)&&(D.diagnostics===void 0||Pe.typedArray(D.diagnostics,S.is))&&(D.kind===void 0||Pe.string(D.kind))&&(D.edit!==void 0||D.command!==void 0)&&(D.command===void 0||R.is(D.command))&&(D.isPreferred===void 0||Pe.boolean(D.isPreferred))&&(D.edit===void 0||Z.is(D.edit))}s(Ie,"is"),Y.is=Ie})(Qt||(e.CodeAction=Qt={}));var Vr;(function(Y){function Ce(F,D){var ee={range:F};return Pe.defined(D)&&(ee.data=D),ee}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.command)||R.is(D.command))}s(Ie,"is"),Y.is=Ie})(Vr||(e.CodeLens=Vr={}));var Pr;(function(Y){function Ce(F,D){return{tabSize:F,insertSpaces:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.uinteger(D.tabSize)&&Pe.boolean(D.insertSpaces)}s(Ie,"is"),Y.is=Ie})(Pr||(e.FormattingOptions=Pr={}));var ln;(function(Y){function Ce(F,D,ee){return{range:F,target:D,data:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.target)||Pe.string(D.target))}s(Ie,"is"),Y.is=Ie})(ln||(e.DocumentLink=ln={}));var ve;(function(Y){function Ce(F,D){return{range:F,parent:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(D.parent===void 0||Y.is(D.parent))}s(Ie,"is"),Y.is=Ie})(ve||(e.SelectionRange=ve={}));var Ge;(function(Y){Y.namespace="namespace",Y.type="type",Y.class="class",Y.enum="enum",Y.interface="interface",Y.struct="struct",Y.typeParameter="typeParameter",Y.parameter="parameter",Y.variable="variable",Y.property="property",Y.enumMember="enumMember",Y.event="event",Y.function="function",Y.method="method",Y.macro="macro",Y.keyword="keyword",Y.modifier="modifier",Y.comment="comment",Y.string="string",Y.number="number",Y.regexp="regexp",Y.operator="operator",Y.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(Y){Y.declaration="declaration",Y.definition="definition",Y.readonly="readonly",Y.static="static",Y.deprecated="deprecated",Y.abstract="abstract",Y.async="async",Y.modification="modification",Y.documentation="documentation",Y.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Tt;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&(F.resultId===void 0||typeof F.resultId=="string")&&Array.isArray(F.data)&&(F.data.length===0||typeof F.data[0]=="number")}s(Ce,"is"),Y.is=Ce})(Tt||(e.SemanticTokens=Tt={}));var or;(function(Y){function Ce(F,D){return{range:F,text:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.string(D.text)}s(Ie,"is"),Y.is=Ie})(or||(e.InlineValueText=or={}));var Zt;(function(Y){function Ce(F,D,ee){return{range:F,variableName:D,caseSensitiveLookup:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.boolean(D.caseSensitiveLookup)&&(Pe.string(D.variableName)||D.variableName===void 0)}s(Ie,"is"),Y.is=Ie})(Zt||(e.InlineValueVariableLookup=Zt={}));var Ir;(function(Y){function Ce(F,D){return{range:F,expression:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&(Pe.string(D.expression)||D.expression===void 0)}s(Ie,"is"),Y.is=Ie})(Ir||(e.InlineValueEvaluatableExpression=Ir={}));var ur;(function(Y){function Ce(F,D){return{frameId:F,stoppedLocation:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(F.stoppedLocation)}s(Ie,"is"),Y.is=Ie})(ur||(e.InlineValueContext=ur={}));var rr;(function(Y){Y.Type=1,Y.Parameter=2;function Ce(Ie){return Ie===1||Ie===2}s(Ce,"is"),Y.is=Ce})(rr||(e.InlayHintKind=rr={}));var lr;(function(Y){function Ce(F){return{value:F}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.location===void 0||l.is(D.location))&&(D.command===void 0||R.is(D.command))}s(Ie,"is"),Y.is=Ie})(lr||(e.InlayHintLabelPart=lr={}));var nr;(function(Y){function Ce(F,D,ee){var ge={position:F,label:D};return ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.position)&&(Pe.string(D.label)||Pe.typedArray(D.label,lr.is))&&(D.kind===void 0||rr.is(D.kind))&&D.textEdits===void 0||Pe.typedArray(D.textEdits,B.is)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.paddingLeft===void 0||Pe.boolean(D.paddingLeft))&&(D.paddingRight===void 0||Pe.boolean(D.paddingRight))}s(Ie,"is"),Y.is=Ie})(nr||(e.InlayHint=nr={}));var Nr;(function(Y){function Ce(Ie){return{kind:"snippet",value:Ie}}s(Ce,"createSnippet"),Y.createSnippet=Ce})(Nr||(e.StringValue=Nr={}));var zr;(function(Y){function Ce(Ie,F,D,ee){return{insertText:Ie,filterText:F,range:D,command:ee}}s(Ce,"create"),Y.create=Ce})(zr||(e.InlineCompletionItem=zr={}));var sn;(function(Y){function Ce(Ie){return{items:Ie}}s(Ce,"create"),Y.create=Ce})(sn||(e.InlineCompletionList=sn={}));var yn;(function(Y){Y.Invoked=0,Y.Automatic=1})(yn||(e.InlineCompletionTriggerKind=yn={}));var ri;(function(Y){function Ce(Ie,F){return{range:Ie,text:F}}s(Ce,"create"),Y.create=Ce})(ri||(e.SelectedCompletionInfo=ri={}));var _n;(function(Y){function Ce(Ie,F){return{triggerKind:Ie,selectedCompletionInfo:F}}s(Ce,"create"),Y.create=Ce})(_n||(e.InlineCompletionContext=_n={}));var Zn;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&n.is(F.uri)&&Pe.string(F.name)}s(Ce,"is"),Y.is=Ce})(Zn||(e.WorkspaceFolder=Zn={})),e.EOL=[`
`,`\r
`,"\r"];var an;(function(Y){function Ce(ee,ge,_e,ut){return new Yn(ee,ge,_e,ut)}s(Ce,"create"),Y.create=Ce;function Ie(ee){var ge=ee;return!!(Pe.defined(ge)&&Pe.string(ge.uri)&&(Pe.undefined(ge.languageId)||Pe.string(ge.languageId))&&Pe.uinteger(ge.lineCount)&&Pe.func(ge.getText)&&Pe.func(ge.positionAt)&&Pe.func(ge.offsetAt))}s(Ie,"is"),Y.is=Ie;function F(ee,ge){for(var _e=ee.getText(),ut=D(ge,function(yr,li){var ro=yr.range.start.line-li.range.start.line;return ro===0?yr.range.start.character-li.range.start.character:ro}),St=_e.length,Yt=ut.length-1;Yt>=0;Yt--){var er=ut[Yt],Kt=ee.offsetAt(er.range.start),bt=ee.offsetAt(er.range.end);if(bt<=St)_e=_e.substring(0,Kt)+er.newText+_e.substring(bt,_e.length);else throw new Error("Overlapping edit");St=Kt}return _e}s(F,"applyEdits"),Y.applyEdits=F;function D(ee,ge){if(ee.length<=1)return ee;var _e=ee.length/2|0,ut=ee.slice(0,_e),St=ee.slice(_e);D(ut,ge),D(St,ge);for(var Yt=0,er=0,Kt=0;Yt<ut.length&&er<St.length;){var bt=ge(ut[Yt],St[er]);bt<=0?ee[Kt++]=ut[Yt++]:ee[Kt++]=St[er++]}for(;Yt<ut.length;)ee[Kt++]=ut[Yt++];for(;er<St.length;)ee[Kt++]=St[er++];return ee}s(D,"mergeSort")})(an||(e.TextDocument=an={}));var Yn=function(){function Y(Ce,Ie,F,D){this._uri=Ce,this._languageId=Ie,this._version=F,this._content=D,this._lineOffsets=void 0}return s(Y,"FullTextDocument"),Object.defineProperty(Y.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),Y.prototype.getText=function(Ce){if(Ce){var Ie=this.offsetAt(Ce.start),F=this.offsetAt(Ce.end);return this._content.substring(Ie,F)}return this._content},Y.prototype.update=function(Ce,Ie){this._content=Ce.text,this._version=Ie,this._lineOffsets=void 0},Y.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var Ce=[],Ie=this._content,F=!0,D=0;D<Ie.length;D++){F&&(Ce.push(D),F=!1);var ee=Ie.charAt(D);F=ee==="\r"||ee===`
`,ee==="\r"&&D+1<Ie.length&&Ie.charAt(D+1)===`
`&&D++}F&&Ie.length>0&&Ce.push(Ie.length),this._lineOffsets=Ce}return this._lineOffsets},Y.prototype.positionAt=function(Ce){Ce=Math.max(Math.min(Ce,this._content.length),0);var Ie=this.getLineOffsets(),F=0,D=Ie.length;if(D===0)return a.create(0,Ce);for(;F<D;){var ee=Math.floor((F+D)/2);Ie[ee]>Ce?D=ee:F=ee+1}var ge=F-1;return a.create(ge,Ce-Ie[ge])},Y.prototype.offsetAt=function(Ce){var Ie=this.getLineOffsets();if(Ce.line>=Ie.length)return this._content.length;if(Ce.line<0)return 0;var F=Ie[Ce.line],D=Ce.line+1<Ie.length?Ie[Ce.line+1]:this._content.length;return Math.max(Math.min(F+Ce.character,D),F)},Object.defineProperty(Y.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),Y}(),Pe;(function(Y){var Ce=Object.prototype.toString;function Ie(bt){return typeof bt<"u"}s(Ie,"defined"),Y.defined=Ie;function F(bt){return typeof bt>"u"}s(F,"undefined"),Y.undefined=F;function D(bt){return bt===!0||bt===!1}s(D,"boolean"),Y.boolean=D;function ee(bt){return Ce.call(bt)==="[object String]"}s(ee,"string"),Y.string=ee;function ge(bt){return Ce.call(bt)==="[object Number]"}s(ge,"number"),Y.number=ge;function _e(bt,yr,li){return Ce.call(bt)==="[object Number]"&&yr<=bt&&bt<=li}s(_e,"numberRange"),Y.numberRange=_e;function ut(bt){return Ce.call(bt)==="[object Number]"&&-2147483648<=bt&&bt<=2147483647}s(ut,"integer"),Y.integer=ut;function St(bt){return Ce.call(bt)==="[object Number]"&&0<=bt&&bt<=2147483647}s(St,"uinteger"),Y.uinteger=St;function Yt(bt){return Ce.call(bt)==="[object Function]"}s(Yt,"func"),Y.func=Yt;function er(bt){return bt!==null&&typeof bt=="object"}s(er,"objectLiteral"),Y.objectLiteral=er;function Kt(bt,yr){return Array.isArray(bt)&&bt.every(yr)}s(Kt,"typedArray"),Y.typedArray=Kt})(Pe||(Pe={}))})});var Ta=H(o0=>{"use strict";d();Object.defineProperty(o0,"__esModule",{value:!0});o0.ProtocolNotificationType=o0.ProtocolNotificationType0=o0.ProtocolRequestType=o0.ProtocolRequestType0=o0.RegistrationType=o0.MessageDirection=void 0;var uD=e2(),Y8e;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Y8e||(o0.MessageDirection=Y8e={}));var wpe=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};o0.RegistrationType=wpe;var Spe=class extends uD.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};o0.ProtocolRequestType0=Spe;var _pe=class extends uD.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,uD.ParameterStructures.byName)}};o0.ProtocolRequestType=_pe;var Rpe=class extends uD.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};o0.ProtocolNotificationType0=Rpe;var kpe=class extends uD.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,uD.ParameterStructures.byName)}};o0.ProtocolNotificationType=kpe});var AG=H(el=>{"use strict";d();Object.defineProperty(el,"__esModule",{value:!0});el.objectLiteral=el.typedArray=el.stringArray=el.array=el.func=el.error=el.number=el.string=el.boolean=void 0;function e5t(t){return t===!0||t===!1}s(e5t,"boolean");el.boolean=e5t;function K8e(t){return typeof t=="string"||t instanceof String}s(K8e,"string");el.string=K8e;function t5t(t){return typeof t=="number"||t instanceof Number}s(t5t,"number");el.number=t5t;function r5t(t){return t instanceof Error}s(r5t,"error");el.error=r5t;function n5t(t){return typeof t=="function"}s(n5t,"func");el.func=n5t;function J8e(t){return Array.isArray(t)}s(J8e,"array");el.array=J8e;function i5t(t){return J8e(t)&&t.every(e=>K8e(e))}s(i5t,"stringArray");el.stringArray=i5t;function o5t(t,e){return Array.isArray(t)&&t.every(e)}s(o5t,"typedArray");el.typedArray=o5t;function s5t(t){return t!==null&&typeof t=="object"}s(s5t,"objectLiteral");el.objectLiteral=s5t});var eMe=H(yG=>{"use strict";d();Object.defineProperty(yG,"__esModule",{value:!0});yG.ImplementationRequest=void 0;var X8e=Ta(),Z8e;(function(t){t.method="textDocument/implementation",t.messageDirection=X8e.MessageDirection.clientToServer,t.type=new X8e.ProtocolRequestType(t.method)})(Z8e||(yG.ImplementationRequest=Z8e={}))});var nMe=H(CG=>{"use strict";d();Object.defineProperty(CG,"__esModule",{value:!0});CG.TypeDefinitionRequest=void 0;var tMe=Ta(),rMe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=tMe.MessageDirection.clientToServer,t.type=new tMe.ProtocolRequestType(t.method)})(rMe||(CG.TypeDefinitionRequest=rMe={}))});var sMe=H(dD=>{"use strict";d();Object.defineProperty(dD,"__esModule",{value:!0});dD.DidChangeWorkspaceFoldersNotification=dD.WorkspaceFoldersRequest=void 0;var vG=Ta(),iMe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=vG.MessageDirection.serverToClient,t.type=new vG.ProtocolRequestType0(t.method)})(iMe||(dD.WorkspaceFoldersRequest=iMe={}));var oMe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=vG.MessageDirection.clientToServer,t.type=new vG.ProtocolNotificationType(t.method)})(oMe||(dD.DidChangeWorkspaceFoldersNotification=oMe={}))});var lMe=H(xG=>{"use strict";d();Object.defineProperty(xG,"__esModule",{value:!0});xG.ConfigurationRequest=void 0;var aMe=Ta(),cMe;(function(t){t.method="workspace/configuration",t.messageDirection=aMe.MessageDirection.serverToClient,t.type=new aMe.ProtocolRequestType(t.method)})(cMe||(xG.ConfigurationRequest=cMe={}))});var fMe=H(fD=>{"use strict";d();Object.defineProperty(fD,"__esModule",{value:!0});fD.ColorPresentationRequest=fD.DocumentColorRequest=void 0;var EG=Ta(),uMe;(function(t){t.method="textDocument/documentColor",t.messageDirection=EG.MessageDirection.clientToServer,t.type=new EG.ProtocolRequestType(t.method)})(uMe||(fD.DocumentColorRequest=uMe={}));var dMe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=EG.MessageDirection.clientToServer,t.type=new EG.ProtocolRequestType(t.method)})(dMe||(fD.ColorPresentationRequest=dMe={}))});var hMe=H(pD=>{"use strict";d();Object.defineProperty(pD,"__esModule",{value:!0});pD.FoldingRangeRefreshRequest=pD.FoldingRangeRequest=void 0;var bG=Ta(),pMe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=bG.MessageDirection.clientToServer,t.type=new bG.ProtocolRequestType(t.method)})(pMe||(pD.FoldingRangeRequest=pMe={}));var mMe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=bG.MessageDirection.serverToClient,t.type=new bG.ProtocolRequestType0(t.method)})(mMe||(pD.FoldingRangeRefreshRequest=mMe={}))});var yMe=H(IG=>{"use strict";d();Object.defineProperty(IG,"__esModule",{value:!0});IG.DeclarationRequest=void 0;var gMe=Ta(),AMe;(function(t){t.method="textDocument/declaration",t.messageDirection=gMe.MessageDirection.clientToServer,t.type=new gMe.ProtocolRequestType(t.method)})(AMe||(IG.DeclarationRequest=AMe={}))});var xMe=H(TG=>{"use strict";d();Object.defineProperty(TG,"__esModule",{value:!0});TG.SelectionRangeRequest=void 0;var CMe=Ta(),vMe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=CMe.MessageDirection.clientToServer,t.type=new CMe.ProtocolRequestType(t.method)})(vMe||(TG.SelectionRangeRequest=vMe={}))});var TMe=H(PI=>{"use strict";d();Object.defineProperty(PI,"__esModule",{value:!0});PI.WorkDoneProgressCancelNotification=PI.WorkDoneProgressCreateRequest=PI.WorkDoneProgress=void 0;var a5t=e2(),wG=Ta(),EMe;(function(t){t.type=new a5t.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(EMe||(PI.WorkDoneProgress=EMe={}));var bMe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=wG.MessageDirection.serverToClient,t.type=new wG.ProtocolRequestType(t.method)})(bMe||(PI.WorkDoneProgressCreateRequest=bMe={}));var IMe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=wG.MessageDirection.clientToServer,t.type=new wG.ProtocolNotificationType(t.method)})(IMe||(PI.WorkDoneProgressCancelNotification=IMe={}))});var RMe=H(DI=>{"use strict";d();Object.defineProperty(DI,"__esModule",{value:!0});DI.CallHierarchyOutgoingCallsRequest=DI.CallHierarchyIncomingCallsRequest=DI.CallHierarchyPrepareRequest=void 0;var mD=Ta(),wMe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(wMe||(DI.CallHierarchyPrepareRequest=wMe={}));var SMe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(SMe||(DI.CallHierarchyIncomingCallsRequest=SMe={}));var _Me;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(_Me||(DI.CallHierarchyOutgoingCallsRequest=_Me={}))});var MMe=H(s0=>{"use strict";d();Object.defineProperty(s0,"__esModule",{value:!0});s0.SemanticTokensRefreshRequest=s0.SemanticTokensRangeRequest=s0.SemanticTokensDeltaRequest=s0.SemanticTokensRequest=s0.SemanticTokensRegistrationType=s0.TokenFormat=void 0;var Gv=Ta(),kMe;(function(t){t.Relative="relative"})(kMe||(s0.TokenFormat=kMe={}));var Z9;(function(t){t.method="textDocument/semanticTokens",t.type=new Gv.RegistrationType(t.method)})(Z9||(s0.SemanticTokensRegistrationType=Z9={}));var PMe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Gv.MessageDirection.clientToServer,t.type=new Gv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(PMe||(s0.SemanticTokensRequest=PMe={}));var DMe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Gv.MessageDirection.clientToServer,t.type=new Gv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(DMe||(s0.SemanticTokensDeltaRequest=DMe={}));var BMe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Gv.MessageDirection.clientToServer,t.type=new Gv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(BMe||(s0.SemanticTokensRangeRequest=BMe={}));var NMe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Gv.MessageDirection.serverToClient,t.type=new Gv.ProtocolRequestType0(t.method)})(NMe||(s0.SemanticTokensRefreshRequest=NMe={}))});var OMe=H(SG=>{"use strict";d();Object.defineProperty(SG,"__esModule",{value:!0});SG.ShowDocumentRequest=void 0;var LMe=Ta(),FMe;(function(t){t.method="window/showDocument",t.messageDirection=LMe.MessageDirection.serverToClient,t.type=new LMe.ProtocolRequestType(t.method)})(FMe||(SG.ShowDocumentRequest=FMe={}))});var qMe=H(_G=>{"use strict";d();Object.defineProperty(_G,"__esModule",{value:!0});_G.LinkedEditingRangeRequest=void 0;var QMe=Ta(),UMe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=QMe.MessageDirection.clientToServer,t.type=new QMe.ProtocolRequestType(t.method)})(UMe||(_G.LinkedEditingRangeRequest=UMe={}))});var YMe=H(_d=>{"use strict";d();Object.defineProperty(_d,"__esModule",{value:!0});_d.WillDeleteFilesRequest=_d.DidDeleteFilesNotification=_d.DidRenameFilesNotification=_d.WillRenameFilesRequest=_d.DidCreateFilesNotification=_d.WillCreateFilesRequest=_d.FileOperationPatternKind=void 0;var Gm=Ta(),HMe;(function(t){t.file="file",t.folder="folder"})(HMe||(_d.FileOperationPatternKind=HMe={}));var $Me;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolRequestType(t.method)})($Me||(_d.WillCreateFilesRequest=$Me={}));var WMe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolNotificationType(t.method)})(WMe||(_d.DidCreateFilesNotification=WMe={}));var jMe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolRequestType(t.method)})(jMe||(_d.WillRenameFilesRequest=jMe={}));var GMe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolNotificationType(t.method)})(GMe||(_d.DidRenameFilesNotification=GMe={}));var VMe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolNotificationType(t.method)})(VMe||(_d.DidDeleteFilesNotification=VMe={}));var zMe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Gm.MessageDirection.clientToServer,t.type=new Gm.ProtocolRequestType(t.method)})(zMe||(_d.WillDeleteFilesRequest=zMe={}))});var eLe=H(BI=>{"use strict";d();Object.defineProperty(BI,"__esModule",{value:!0});BI.MonikerRequest=BI.MonikerKind=BI.UniquenessLevel=void 0;var KMe=Ta(),JMe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(JMe||(BI.UniquenessLevel=JMe={}));var XMe;(function(t){t.$import="import",t.$export="export",t.local="local"})(XMe||(BI.MonikerKind=XMe={}));var ZMe;(function(t){t.method="textDocument/moniker",t.messageDirection=KMe.MessageDirection.clientToServer,t.type=new KMe.ProtocolRequestType(t.method)})(ZMe||(BI.MonikerRequest=ZMe={}))});var iLe=H(NI=>{"use strict";d();Object.defineProperty(NI,"__esModule",{value:!0});NI.TypeHierarchySubtypesRequest=NI.TypeHierarchySupertypesRequest=NI.TypeHierarchyPrepareRequest=void 0;var hD=Ta(),tLe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(tLe||(NI.TypeHierarchyPrepareRequest=tLe={}));var rLe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(rLe||(NI.TypeHierarchySupertypesRequest=rLe={}));var nLe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(nLe||(NI.TypeHierarchySubtypesRequest=nLe={}))});var aLe=H(gD=>{"use strict";d();Object.defineProperty(gD,"__esModule",{value:!0});gD.InlineValueRefreshRequest=gD.InlineValueRequest=void 0;var RG=Ta(),oLe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=RG.MessageDirection.clientToServer,t.type=new RG.ProtocolRequestType(t.method)})(oLe||(gD.InlineValueRequest=oLe={}));var sLe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=RG.MessageDirection.serverToClient,t.type=new RG.ProtocolRequestType0(t.method)})(sLe||(gD.InlineValueRefreshRequest=sLe={}))});var dLe=H(MI=>{"use strict";d();Object.defineProperty(MI,"__esModule",{value:!0});MI.InlayHintRefreshRequest=MI.InlayHintResolveRequest=MI.InlayHintRequest=void 0;var AD=Ta(),cLe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=AD.MessageDirection.clientToServer,t.type=new AD.ProtocolRequestType(t.method)})(cLe||(MI.InlayHintRequest=cLe={}));var lLe;(function(t){t.method="inlayHint/resolve",t.messageDirection=AD.MessageDirection.clientToServer,t.type=new AD.ProtocolRequestType(t.method)})(lLe||(MI.InlayHintResolveRequest=lLe={}));var uLe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=AD.MessageDirection.serverToClient,t.type=new AD.ProtocolRequestType0(t.method)})(uLe||(MI.InlayHintRefreshRequest=uLe={}))});var yLe=H(Vm=>{"use strict";d();Object.defineProperty(Vm,"__esModule",{value:!0});Vm.DiagnosticRefreshRequest=Vm.WorkspaceDiagnosticRequest=Vm.DocumentDiagnosticRequest=Vm.DocumentDiagnosticReportKind=Vm.DiagnosticServerCancellationData=void 0;var ALe=e2(),c5t=AG(),yD=Ta(),fLe;(function(t){function e(r){let n=r;return n&&c5t.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(fLe||(Vm.DiagnosticServerCancellationData=fLe={}));var pLe;(function(t){t.Full="full",t.Unchanged="unchanged"})(pLe||(Vm.DocumentDiagnosticReportKind=pLe={}));var mLe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=yD.MessageDirection.clientToServer,t.type=new yD.ProtocolRequestType(t.method),t.partialResult=new ALe.ProgressType})(mLe||(Vm.DocumentDiagnosticRequest=mLe={}));var hLe;(function(t){t.method="workspace/diagnostic",t.messageDirection=yD.MessageDirection.clientToServer,t.type=new yD.ProtocolRequestType(t.method),t.partialResult=new ALe.ProgressType})(hLe||(Vm.WorkspaceDiagnosticRequest=hLe={}));var gLe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=yD.MessageDirection.serverToClient,t.type=new yD.ProtocolRequestType0(t.method)})(gLe||(Vm.DiagnosticRefreshRequest=gLe={}))});var TLe=H(tc=>{"use strict";d();Object.defineProperty(tc,"__esModule",{value:!0});tc.DidCloseNotebookDocumentNotification=tc.DidSaveNotebookDocumentNotification=tc.DidChangeNotebookDocumentNotification=tc.NotebookCellArrayChange=tc.DidOpenNotebookDocumentNotification=tc.NotebookDocumentSyncRegistrationType=tc.NotebookDocument=tc.NotebookCell=tc.ExecutionSummary=tc.NotebookCellKind=void 0;var e6=gG(),aA=AG(),aC=Ta(),Ppe;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Ppe||(tc.NotebookCellKind=Ppe={}));var Dpe;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return aA.objectLiteral(o)&&e6.uinteger.is(o.executionOrder)&&(o.success===void 0||aA.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Dpe||(tc.ExecutionSummary=Dpe={}));var kG;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return aA.objectLiteral(a)&&Ppe.is(a.kind)&&e6.DocumentUri.is(a.document)&&(a.metadata===void 0||aA.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Dpe.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(aA.objectLiteral(o)&&aA.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(kG||(tc.NotebookCell=kG={}));var CLe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return aA.objectLiteral(i)&&aA.string(i.uri)&&e6.integer.is(i.version)&&aA.typedArray(i.cells,kG.is)}s(r,"is"),t.is=r})(CLe||(tc.NotebookDocument=CLe={}));var CD;(function(t){t.method="notebookDocument/sync",t.messageDirection=aC.MessageDirection.clientToServer,t.type=new aC.RegistrationType(t.method)})(CD||(tc.NotebookDocumentSyncRegistrationType=CD={}));var vLe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=aC.MessageDirection.clientToServer,t.type=new aC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(vLe||(tc.DidOpenNotebookDocumentNotification=vLe={}));var xLe;(function(t){function e(n){let i=n;return aA.objectLiteral(i)&&e6.uinteger.is(i.start)&&e6.uinteger.is(i.deleteCount)&&(i.cells===void 0||aA.typedArray(i.cells,kG.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(xLe||(tc.NotebookCellArrayChange=xLe={}));var ELe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=aC.MessageDirection.clientToServer,t.type=new aC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(ELe||(tc.DidChangeNotebookDocumentNotification=ELe={}));var bLe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=aC.MessageDirection.clientToServer,t.type=new aC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(bLe||(tc.DidSaveNotebookDocumentNotification=bLe={}));var ILe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=aC.MessageDirection.clientToServer,t.type=new aC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(ILe||(tc.DidCloseNotebookDocumentNotification=ILe={}))});var _Le=H(PG=>{"use strict";d();Object.defineProperty(PG,"__esModule",{value:!0});PG.InlineCompletionRequest=void 0;var wLe=Ta(),SLe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=wLe.MessageDirection.clientToServer,t.type=new wLe.ProtocolRequestType(t.method)})(SLe||(PG.InlineCompletionRequest=SLe={}))});var q9e=H(be=>{"use strict";d();Object.defineProperty(be,"__esModule",{value:!0});be.WorkspaceSymbolRequest=be.CodeActionResolveRequest=be.CodeActionRequest=be.DocumentSymbolRequest=be.DocumentHighlightRequest=be.ReferencesRequest=be.DefinitionRequest=be.SignatureHelpRequest=be.SignatureHelpTriggerKind=be.HoverRequest=be.CompletionResolveRequest=be.CompletionRequest=be.CompletionTriggerKind=be.PublishDiagnosticsNotification=be.WatchKind=be.RelativePattern=be.FileChangeType=be.DidChangeWatchedFilesNotification=be.WillSaveTextDocumentWaitUntilRequest=be.WillSaveTextDocumentNotification=be.TextDocumentSaveReason=be.DidSaveTextDocumentNotification=be.DidCloseTextDocumentNotification=be.DidChangeTextDocumentNotification=be.TextDocumentContentChangeEvent=be.DidOpenTextDocumentNotification=be.TextDocumentSyncKind=be.TelemetryEventNotification=be.LogMessageNotification=be.ShowMessageRequest=be.ShowMessageNotification=be.MessageType=be.DidChangeConfigurationNotification=be.ExitNotification=be.ShutdownRequest=be.InitializedNotification=be.InitializeErrorCodes=be.InitializeRequest=be.WorkDoneProgressOptions=be.TextDocumentRegistrationOptions=be.StaticRegistrationOptions=be.PositionEncodingKind=be.FailureHandlingKind=be.ResourceOperationKind=be.UnregistrationRequest=be.RegistrationRequest=be.DocumentSelector=be.NotebookCellTextDocumentFilter=be.NotebookDocumentFilter=be.TextDocumentFilter=void 0;be.MonikerRequest=be.MonikerKind=be.UniquenessLevel=be.WillDeleteFilesRequest=be.DidDeleteFilesNotification=be.WillRenameFilesRequest=be.DidRenameFilesNotification=be.WillCreateFilesRequest=be.DidCreateFilesNotification=be.FileOperationPatternKind=be.LinkedEditingRangeRequest=be.ShowDocumentRequest=be.SemanticTokensRegistrationType=be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.TokenFormat=be.CallHierarchyPrepareRequest=be.CallHierarchyOutgoingCallsRequest=be.CallHierarchyIncomingCallsRequest=be.WorkDoneProgressCancelNotification=be.WorkDoneProgressCreateRequest=be.WorkDoneProgress=be.SelectionRangeRequest=be.DeclarationRequest=be.FoldingRangeRefreshRequest=be.FoldingRangeRequest=be.ColorPresentationRequest=be.DocumentColorRequest=be.ConfigurationRequest=be.DidChangeWorkspaceFoldersNotification=be.WorkspaceFoldersRequest=be.TypeDefinitionRequest=be.ImplementationRequest=be.ApplyWorkspaceEditRequest=be.ExecuteCommandRequest=be.PrepareRenameRequest=be.RenameRequest=be.PrepareSupportDefaultBehavior=be.DocumentOnTypeFormattingRequest=be.DocumentRangesFormattingRequest=be.DocumentRangeFormattingRequest=be.DocumentFormattingRequest=be.DocumentLinkResolveRequest=be.DocumentLinkRequest=be.CodeLensRefreshRequest=be.CodeLensResolveRequest=be.CodeLensRequest=be.WorkspaceSymbolResolveRequest=void 0;be.InlineCompletionRequest=be.DidCloseNotebookDocumentNotification=be.DidSaveNotebookDocumentNotification=be.DidChangeNotebookDocumentNotification=be.NotebookCellArrayChange=be.DidOpenNotebookDocumentNotification=be.NotebookDocumentSyncRegistrationType=be.NotebookDocument=be.NotebookCell=be.ExecutionSummary=be.NotebookCellKind=be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=be.InlayHintRefreshRequest=be.InlayHintResolveRequest=be.InlayHintRequest=be.InlineValueRefreshRequest=be.InlineValueRequest=be.TypeHierarchySupertypesRequest=be.TypeHierarchySubtypesRequest=be.TypeHierarchyPrepareRequest=void 0;var jt=Ta(),RLe=gG(),Zl=AG(),l5t=eMe();Object.defineProperty(be,"ImplementationRequest",{enumerable:!0,get:s(function(){return l5t.ImplementationRequest},"get")});var u5t=nMe();Object.defineProperty(be,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return u5t.TypeDefinitionRequest},"get")});var F9e=sMe();Object.defineProperty(be,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return F9e.WorkspaceFoldersRequest},"get")});Object.defineProperty(be,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return F9e.DidChangeWorkspaceFoldersNotification},"get")});var d5t=lMe();Object.defineProperty(be,"ConfigurationRequest",{enumerable:!0,get:s(function(){return d5t.ConfigurationRequest},"get")});var O9e=fMe();Object.defineProperty(be,"DocumentColorRequest",{enumerable:!0,get:s(function(){return O9e.DocumentColorRequest},"get")});Object.defineProperty(be,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return O9e.ColorPresentationRequest},"get")});var Q9e=hMe();Object.defineProperty(be,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return Q9e.FoldingRangeRequest},"get")});Object.defineProperty(be,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return Q9e.FoldingRangeRefreshRequest},"get")});var f5t=yMe();Object.defineProperty(be,"DeclarationRequest",{enumerable:!0,get:s(function(){return f5t.DeclarationRequest},"get")});var p5t=xMe();Object.defineProperty(be,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return p5t.SelectionRangeRequest},"get")});var Fpe=TMe();Object.defineProperty(be,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Fpe.WorkDoneProgress},"get")});Object.defineProperty(be,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Fpe.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(be,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Fpe.WorkDoneProgressCancelNotification},"get")});var Ope=RMe();Object.defineProperty(be,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Ope.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Ope.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Ope.CallHierarchyPrepareRequest},"get")});var vD=MMe();Object.defineProperty(be,"TokenFormat",{enumerable:!0,get:s(function(){return vD.TokenFormat},"get")});Object.defineProperty(be,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRequest},"get")});Object.defineProperty(be,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensDeltaRequest},"get")});Object.defineProperty(be,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRangeRequest},"get")});Object.defineProperty(be,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRefreshRequest},"get")});Object.defineProperty(be,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return vD.SemanticTokensRegistrationType},"get")});var m5t=OMe();Object.defineProperty(be,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return m5t.ShowDocumentRequest},"get")});var h5t=qMe();Object.defineProperty(be,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return h5t.LinkedEditingRangeRequest},"get")});var t2=YMe();Object.defineProperty(be,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return t2.FileOperationPatternKind},"get")});Object.defineProperty(be,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return t2.DidCreateFilesNotification},"get")});Object.defineProperty(be,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return t2.WillCreateFilesRequest},"get")});Object.defineProperty(be,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return t2.DidRenameFilesNotification},"get")});Object.defineProperty(be,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return t2.WillRenameFilesRequest},"get")});Object.defineProperty(be,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return t2.DidDeleteFilesNotification},"get")});Object.defineProperty(be,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return t2.WillDeleteFilesRequest},"get")});var Qpe=eLe();Object.defineProperty(be,"UniquenessLevel",{enumerable:!0,get:s(function(){return Qpe.UniquenessLevel},"get")});Object.defineProperty(be,"MonikerKind",{enumerable:!0,get:s(function(){return Qpe.MonikerKind},"get")});Object.defineProperty(be,"MonikerRequest",{enumerable:!0,get:s(function(){return Qpe.MonikerRequest},"get")});var Upe=iLe();Object.defineProperty(be,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Upe.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(be,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Upe.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(be,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Upe.TypeHierarchySupertypesRequest},"get")});var U9e=aLe();Object.defineProperty(be,"InlineValueRequest",{enumerable:!0,get:s(function(){return U9e.InlineValueRequest},"get")});Object.defineProperty(be,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return U9e.InlineValueRefreshRequest},"get")});var qpe=dLe();Object.defineProperty(be,"InlayHintRequest",{enumerable:!0,get:s(function(){return qpe.InlayHintRequest},"get")});Object.defineProperty(be,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return qpe.InlayHintResolveRequest},"get")});Object.defineProperty(be,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return qpe.InlayHintRefreshRequest},"get")});var t6=yLe();Object.defineProperty(be,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return t6.DiagnosticServerCancellationData},"get")});Object.defineProperty(be,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return t6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(be,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return t6.DocumentDiagnosticRequest},"get")});Object.defineProperty(be,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return t6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(be,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return t6.DiagnosticRefreshRequest},"get")});var cC=TLe();Object.defineProperty(be,"NotebookCellKind",{enumerable:!0,get:s(function(){return cC.NotebookCellKind},"get")});Object.defineProperty(be,"ExecutionSummary",{enumerable:!0,get:s(function(){return cC.ExecutionSummary},"get")});Object.defineProperty(be,"NotebookCell",{enumerable:!0,get:s(function(){return cC.NotebookCell},"get")});Object.defineProperty(be,"NotebookDocument",{enumerable:!0,get:s(function(){return cC.NotebookDocument},"get")});Object.defineProperty(be,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return cC.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(be,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return cC.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(be,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return cC.NotebookCellArrayChange},"get")});Object.defineProperty(be,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return cC.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return cC.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return cC.DidCloseNotebookDocumentNotification},"get")});var g5t=_Le();Object.defineProperty(be,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return g5t.InlineCompletionRequest},"get")});var Bpe;(function(t){function e(r){let n=r;return Zl.string(n)||Zl.string(n.language)||Zl.string(n.scheme)||Zl.string(n.pattern)}s(e,"is"),t.is=e})(Bpe||(be.TextDocumentFilter=Bpe={}));var Npe;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(Zl.string(n.notebookType)||Zl.string(n.scheme)||Zl.string(n.pattern))}s(e,"is"),t.is=e})(Npe||(be.NotebookDocumentFilter=Npe={}));var Mpe;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(Zl.string(n.notebook)||Npe.is(n.notebook))&&(n.language===void 0||Zl.string(n.language))}s(e,"is"),t.is=e})(Mpe||(be.NotebookCellTextDocumentFilter=Mpe={}));var Lpe;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Zl.string(n)&&!Bpe.is(n)&&!Mpe.is(n))return!1;return!0}s(e,"is"),t.is=e})(Lpe||(be.DocumentSelector=Lpe={}));var kLe;(function(t){t.method="client/registerCapability",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(kLe||(be.RegistrationRequest=kLe={}));var PLe;(function(t){t.method="client/unregisterCapability",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(PLe||(be.UnregistrationRequest=PLe={}));var DLe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(DLe||(be.ResourceOperationKind=DLe={}));var BLe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(BLe||(be.FailureHandlingKind=BLe={}));var NLe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(NLe||(be.PositionEncodingKind=NLe={}));var MLe;(function(t){function e(r){let n=r;return n&&Zl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(MLe||(be.StaticRegistrationOptions=MLe={}));var LLe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Lpe.is(n.documentSelector))}s(e,"is"),t.is=e})(LLe||(be.TextDocumentRegistrationOptions=LLe={}));var FLe;(function(t){function e(n){let i=n;return Zl.objectLiteral(i)&&(i.workDoneProgress===void 0||Zl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Zl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(FLe||(be.WorkDoneProgressOptions=FLe={}));var OLe;(function(t){t.method="initialize",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(OLe||(be.InitializeRequest=OLe={}));var QLe;(function(t){t.unknownProtocolVersion=1})(QLe||(be.InitializeErrorCodes=QLe={}));var ULe;(function(t){t.method="initialized",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(ULe||(be.InitializedNotification=ULe={}));var qLe;(function(t){t.method="shutdown",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType0(t.method)})(qLe||(be.ShutdownRequest=qLe={}));var HLe;(function(t){t.method="exit",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType0(t.method)})(HLe||(be.ExitNotification=HLe={}));var $Le;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})($Le||(be.DidChangeConfigurationNotification=$Le={}));var WLe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(WLe||(be.MessageType=WLe={}));var jLe;(function(t){t.method="window/showMessage",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(jLe||(be.ShowMessageNotification=jLe={}));var GLe;(function(t){t.method="window/showMessageRequest",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(GLe||(be.ShowMessageRequest=GLe={}));var VLe;(function(t){t.method="window/logMessage",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(VLe||(be.LogMessageNotification=VLe={}));var zLe;(function(t){t.method="telemetry/event",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(zLe||(be.TelemetryEventNotification=zLe={}));var YLe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(YLe||(be.TextDocumentSyncKind=YLe={}));var KLe;(function(t){t.method="textDocument/didOpen",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(KLe||(be.DidOpenTextDocumentNotification=KLe={}));var JLe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(JLe||(be.TextDocumentContentChangeEvent=JLe={}));var XLe;(function(t){t.method="textDocument/didChange",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(XLe||(be.DidChangeTextDocumentNotification=XLe={}));var ZLe;(function(t){t.method="textDocument/didClose",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(ZLe||(be.DidCloseTextDocumentNotification=ZLe={}));var e9e;(function(t){t.method="textDocument/didSave",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(e9e||(be.DidSaveTextDocumentNotification=e9e={}));var t9e;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(t9e||(be.TextDocumentSaveReason=t9e={}));var r9e;(function(t){t.method="textDocument/willSave",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(r9e||(be.WillSaveTextDocumentNotification=r9e={}));var n9e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(n9e||(be.WillSaveTextDocumentWaitUntilRequest=n9e={}));var i9e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(i9e||(be.DidChangeWatchedFilesNotification=i9e={}));var o9e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(o9e||(be.FileChangeType=o9e={}));var s9e;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(RLe.URI.is(n.baseUri)||RLe.WorkspaceFolder.is(n.baseUri))&&Zl.string(n.pattern)}s(e,"is"),t.is=e})(s9e||(be.RelativePattern=s9e={}));var a9e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(a9e||(be.WatchKind=a9e={}));var c9e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(c9e||(be.PublishDiagnosticsNotification=c9e={}));var l9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(l9e||(be.CompletionTriggerKind=l9e={}));var u9e;(function(t){t.method="textDocument/completion",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(u9e||(be.CompletionRequest=u9e={}));var d9e;(function(t){t.method="completionItem/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(d9e||(be.CompletionResolveRequest=d9e={}));var f9e;(function(t){t.method="textDocument/hover",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(f9e||(be.HoverRequest=f9e={}));var p9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(p9e||(be.SignatureHelpTriggerKind=p9e={}));var m9e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(m9e||(be.SignatureHelpRequest=m9e={}));var h9e;(function(t){t.method="textDocument/definition",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(h9e||(be.DefinitionRequest=h9e={}));var g9e;(function(t){t.method="textDocument/references",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(g9e||(be.ReferencesRequest=g9e={}));var A9e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(A9e||(be.DocumentHighlightRequest=A9e={}));var y9e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(y9e||(be.DocumentSymbolRequest=y9e={}));var C9e;(function(t){t.method="textDocument/codeAction",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(C9e||(be.CodeActionRequest=C9e={}));var v9e;(function(t){t.method="codeAction/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(v9e||(be.CodeActionResolveRequest=v9e={}));var x9e;(function(t){t.method="workspace/symbol",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(x9e||(be.WorkspaceSymbolRequest=x9e={}));var E9e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(E9e||(be.WorkspaceSymbolResolveRequest=E9e={}));var b9e;(function(t){t.method="textDocument/codeLens",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(b9e||(be.CodeLensRequest=b9e={}));var I9e;(function(t){t.method="codeLens/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(I9e||(be.CodeLensResolveRequest=I9e={}));var T9e;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType0(t.method)})(T9e||(be.CodeLensRefreshRequest=T9e={}));var w9e;(function(t){t.method="textDocument/documentLink",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(w9e||(be.DocumentLinkRequest=w9e={}));var S9e;(function(t){t.method="documentLink/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(S9e||(be.DocumentLinkResolveRequest=S9e={}));var _9e;(function(t){t.method="textDocument/formatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(_9e||(be.DocumentFormattingRequest=_9e={}));var R9e;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(R9e||(be.DocumentRangeFormattingRequest=R9e={}));var k9e;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(k9e||(be.DocumentRangesFormattingRequest=k9e={}));var P9e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(P9e||(be.DocumentOnTypeFormattingRequest=P9e={}));var D9e;(function(t){t.Identifier=1})(D9e||(be.PrepareSupportDefaultBehavior=D9e={}));var B9e;(function(t){t.method="textDocument/rename",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(B9e||(be.RenameRequest=B9e={}));var N9e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(N9e||(be.PrepareRenameRequest=N9e={}));var M9e;(function(t){t.method="workspace/executeCommand",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(M9e||(be.ExecuteCommandRequest=M9e={}));var L9e;(function(t){t.method="workspace/applyEdit",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType("workspace/applyEdit")})(L9e||(be.ApplyWorkspaceEditRequest=L9e={}))});var $9e=H(DG=>{"use strict";d();Object.defineProperty(DG,"__esModule",{value:!0});DG.createProtocolConnection=void 0;var H9e=e2();function A5t(t,e,r,n){return H9e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,H9e.createMessageConnection)(t,e,r,n)}s(A5t,"createProtocolConnection");DG.createProtocolConnection=A5t});var j9e=H(a0=>{"use strict";d();var y5t=a0&&a0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BG=a0&&a0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&y5t(e,t,r)};Object.defineProperty(a0,"__esModule",{value:!0});a0.LSPErrorCodes=a0.createProtocolConnection=void 0;BG(e2(),a0);BG(gG(),a0);BG(Ta(),a0);BG(q9e(),a0);var C5t=$9e();Object.defineProperty(a0,"createProtocolConnection",{enumerable:!0,get:s(function(){return C5t.createProtocolConnection},"get")});var W9e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(W9e||(a0.LSPErrorCodes=W9e={}))});var pi=H(lC=>{"use strict";d();var v5t=lC&&lC.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),G9e=lC&&lC.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&v5t(e,t,r)};Object.defineProperty(lC,"__esModule",{value:!0});lC.createProtocolConnection=void 0;var x5t=Tpe();G9e(Tpe(),lC);G9e(j9e(),lC);function E5t(t,e,r,n){return(0,x5t.createMessageConnection)(t,e,r,n)}s(E5t,"createProtocolConnection");lC.createProtocolConnection=E5t});var M6e=H((VG,N6e)=>{d();(function(t,e){typeof VG=="object"&&typeof N6e<"u"?e(VG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(VG,function(t){"use strict";function e(w,P){return w||P}s(e,"_pureAssign");function r(w,P){return w[P]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),S=r(b,l),R=e(String),B=r(R,l),L=e(Math),O=e(Array),K=r(O,l),V=r(K,"slice");function z(w,P){try{return{v:w.apply(this,P)}}catch(N){return{e:N}}}s(z,"safe");function Q(w){return function(P){return typeof P===w}}s(Q,"_createIs");function U(w){var P="[object "+w+"]";return function(N){return!!(N&&Z(N)===P)}}s(U,"_createObjIs");function Z(w){return S[E].call(w)}s(Z,"objToString");function J(w){return typeof w===f||w===f}s(J,"isUndefined");function j(w){return!X(w)}s(j,"isStrictUndefined");function $(w){return w===i||J(w)}s($,"isNullOrUndefined");function X(w){return!!w||w!==n}s(X,"isDefined");var ie=Q("string"),ae=Q(a);function te(w){return!w&&$(w)?!1:!!w&&typeof w===c}s(te,"isObject");var pe=r(O,"isArray"),Ae=U("Error"),Oe=r(b,"getOwnPropertyDescriptor");function Te(w,P){return!!w&&S.hasOwnProperty[y](w,P)}s(Te,"objHasOwnProperty");var Je=e(r(b,"hasOwn"),Fe);function Fe(w,P){return Te(w,P)||!!Oe(w,P)}s(Fe,"polyObjHasOwn");function lt(w,P,N){if(w&&te(w)){for(var W in w)if(Je(w,W)&&P[y](N||w,W,w[W])===-1)break}}s(lt,"objForEachKey");var _t={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function xt(w){var P={};if(P[_t.c]=!0,P[_t.e]=!0,w.l){P.get=function(){return w.l.v};var N=Oe(w.l,"v");N&&N.set&&(P.set=function(W){w.l.v=W})}return lt(w,function(W,de){P[_t[W]]=j(de)?P[_t[W]]:de}),P}s(xt,"_createProp");var ht=r(b,"defineProperty");function ue(w,P,N){return ht(w,P,xt(N))}s(ue,"objDefine");function Ue(w,P,N,W,de){var we={};return lt(w,function(ke,We){ye(we,ke,P?We:ke),ye(we,We,N?We:ke)}),W?W(we):we}s(Ue,"_createKeyValueMap");function ye(w,P,N,W){ht(w,P,{value:N,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var $e=e(R),se="[object Error]";function le(w,P){var N=o,W=S[E][y](w);W===se&&(w={stack:$e(w.stack),message:$e(w.message),name:$e(w.name)});try{N=JSON.stringify(w,i,P?typeof P=="number"?P:4:n),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||$e(w)}catch(de){N=" - "+le(de,P)}return W+": "+N}s(le,"dumpObj");function qe(w){throw new Error(w)}s(qe,"throwError");function Be(w){throw new TypeError(w)}s(Be,"throwTypeError");var Ee=r(b,"freeze");function je(w){return w}s(je,"_doNothing");function tt(w){return w[u]||i}s(tt,"_getProto");var pt=r(b,"assign"),Ft=r(b,"keys"),Jt=e(Ee,je),Qt=e(r(b,"getPrototypeOf"),tt);function Vr(w){return Ue(w,1,0,Jt)}s(Vr,"createEnum");function Pr(w){var P={};return lt(w,function(N,W){ye(P,N,W[1]),ye(P,W[0],W[1])}),Jt(P)}s(Pr,"createSimpleMap");function ln(w){return Pr(w)}s(ln,"createTypeMap");var ve="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function Tt(){if(!Ge){var w=z(ft).v||{};Ge=w[ve]=w[ve]||{}}return Ge}s(Tt,"_getGlobalConfig");var or=Zt;function Zt(w,P,N){var W=P?P[w]:i;return function(de){var we=(de?de[w]:i)||W;if(we||N){var ke=arguments;return(we||N).apply(de,we?V[y](ke,1):ke)}Be('"'+$e(w)+'" not defined for '+le(de))}}s(Zt,"_unwrapFunctionWithPoly");var Ir=r(L,"min"),ur=r(L,"max"),rr=or("slice",B),lr=or("substring",B),nr=Zt("substr",B,Nr);function Nr(w,P,N){return $(w)&&Be("Invalid "+le(w)),N<0?o:(P=P||0,P<0&&(P=ur(P+w[g],0)),J(N)?rr(w,P):rr(w,P,P+N))}s(Nr,"polyStrSubstr");function zr(w,P){return lr(w,0,P)}s(zr,"strLeft");var sn="_urid",yn;function ri(){if(!yn){var w=Tt();yn=w.gblSym=w.gblSym||{k:{},s:{}}}return yn}s(ri,"_globalSymbolRegistry");function _n(w){var P={description:$e(w),toString:s(function(){return m+"("+w+")"},"toString")};return P[h]=!0,P}s(_n,"polyNewSymbol");function Zn(w){var P=ri();if(!Je(P.k,w)){var N=_n(w),W=Ft(P.s).length;N[sn]=function(){return W+"_"+N[E]()},P.k[w]=N,P.s[N[sn]()]=$e(w)}return P.k[w]}s(Zn,"polySymbolFor");var an;function Yn(){an=Tt()}s(Yn,"_initTestHooks");function Pe(w){return ht({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(Pe,"createCachedValue");var Y="window",Ce;function Ie(w,P){var N;return function(){return!an&&Yn(),(!N||an.lzy)&&(N=Pe(z(w,P).v)),N.v}}s(Ie,"_getGlobalInstFn");function F(w){return!an&&Yn(),(!Ce||w===!1||an.lzy)&&(Ce=Pe(z(ft).v||i)),Ce.v}s(F,"getGlobal");function D(w,P){var N;if(!Ce||P===!1?N=F(P):N=Ce.v,N&&N[w])return N[w];if(w===Y)try{return window}catch{}return i}s(D,"getInst");var ee=Ie(D,["document"]);function ge(){return!!_e()}s(ge,"hasWindow");var _e=Ie(D,[Y]);function ut(){return!!St()}s(ut,"hasNavigator");var St=Ie(D,["navigator"]),Yt,er;function Kt(){return Yt=Pe(z(D,[m]).v),Yt}s(Kt,"_initSymbol");function bt(w){var P=(an.lzy?0:Yt)||Kt();return P.v?P.v[w]:n}s(bt,"_getSymbolKey");function yr(w,P){!an&&Yn();var N=(an.lzy?0:Yt)||Kt();return N.v?N.v(w):P?i:_n(w)}s(yr,"newSymbol");function li(w){return!an&&Yn(),er=(an.lzy?0:er)||Pe(z(bt,["for"]).v),(er.v||Zn)(w)}s(li,"symbolFor");function ro(w,P,N){return w.apply(P,N)}s(ro,"fnApply");function Tn(w,P,N){if(w)for(var W=w[g]>>>0,de=0;de<W&&!(de in w&&P[y](N||w,w[de],de,w)===-1);de++);}s(Tn,"arrForEach");var Ao=or("indexOf",K),vi=or("map",K),Xo=or("reduce",K),ha=e(r(b,"create"),Cc);function Cc(w){if(!w)return{};var P=typeof w;P!==c&&P!==a&&Be("Prototype must be an Object or function: "+le(w));function N(){}return s(N,"tempFunc"),N[l]=w,new N}s(Cc,"polyObjCreate");var Mo;function Ws(w,P){var N=b.setPrototypeOf||function(W,de){var we;!Mo&&(Mo=Pe((we={},we[u]=[],we instanceof Array))),Mo.v?W[u]=de:lt(de,function(ke,We){return W[ke]=We})};return N(w,P)}s(Ws,"objSetPrototypeOf");function fd(w,P,N){z(ue,[P,A,{v:w,c:!0,e:!1}]),P=Ws(P,N);function W(){this[p]=P,z(ue,[this,A,{v:w,c:!0,e:!1}])}return s(W,"__"),P[l]=N===i?ha(N):(W[l]=N[l],new W),P}s(fd,"_createCustomError");function vc(w,P){P&&(w[A]=P)}s(vc,"_setName");function Eg(w,P,N){var W=N||Error,de=W[l][A],we=Error.captureStackTrace;return fd(w,function(){var ke=this,We=arguments;try{z(vc,[W,w]);var it=ro(W,ke,V[y](We))||ke;if(it!==ke){var Et=Qt(ke);Et!==Qt(it)&&Ws(it,Et)}return we&&we(it,ke[p]),P&&P(it,We),it}finally{z(vc,[W,de])}},W)}s(Eg,"createCustomError");function bl(){return(Date.now||bg)()}s(bl,"utcNow");function bg(){return new Date().getTime()}s(bg,"polyUtcNow");function Ig(w){return s(function(N){return $(N)&&Be("strTrim called ["+le(N)+"]"),N&&N.replace&&(N=N.replace(w,o)),N},"_doTrim")}s(Ig,"_createTrimFn");var YE=Ig(/^\s+|(?=\s)\s+$/g),Ba=Zt("trim",B,YE),wu=r(L,"floor"),Su,pd,Tg;function $l(w){if(!w||typeof w!==c)return!1;Tg||(Tg=ge()?_e():!0);var P=!1;if(w!==Tg){pd||(Su=Function[l][E],pd=Su[y](b));try{var N=Qt(w);P=!N,P||(Te(N,p)&&(N=N[p]),P=!!(N&&typeof N===a&&Su[y](N)===pd))}catch{}}return P}s($l,"isPlainObject");var KE;function iv(){return!an&&Yn(),(!KE||an.lzy)&&(KE=Pe(z(D,["performance"]).v)),KE.v}s(iv,"getPerformance");var JE=r(L,"round"),Hf=Zt("endsWith",B,$f);function $f(w,P,N){ie(w)||Be("'"+le(w)+"' is not a string");var W=ie(P)?P:$e(P),de=!J(N)&&N<w[g]?N:w[g];return lr(w,de-W[g],de)===W}s($f,"polyStrEndsWith");var Yr=or("indexOf",B),xc="ref",wg="unref",Sg="hasRef",XM="enabled";function Wc(w,P,N){var W=!0,de=w?P(i):i,we;function ke(){return W=!1,de&&de[wg]&&de[wg](),we}s(ke,"_unref");function We(){de&&N(de),de=i}s(We,"_cancel");function it(){return de=P(de),W||ke(),we}s(it,"_refresh");function Et(gr){!gr&&de&&We(),gr&&!de&&it()}return s(Et,"_setEnabled"),we={cancel:We,refresh:it},we[Sg]=function(){return de&&de[Sg]?de[Sg]():W},we[xc]=function(){return W=!0,de&&de[xc]&&de[xc](),we},we[wg]=ke,we=ht(we,XM,{get:s(function(){return!!de},"get"),set:Et}),{h:we,dn:s(function(){de=i},"dn")}}s(Wc,"_createTimerHandler");function Ey(w,P,N){var W=pe(P),de=W?P.length:0,we=(de>0?P[0]:W?n:P)||setTimeout,ke=(de>1?P[1]:n)||clearTimeout,We=N[0];N[0]=function(){it.dn(),ro(We,n,V[y](arguments))};var it=Wc(w,function(Et){if(Et){if(Et.refresh)return Et.refresh(),Et;ro(ke,n,[Et])}return ro(we,n,N)},function(Et){ro(ke,n,[Et])});return it.h}s(Ey,"_createTimeoutWith");function ov(w,P){return Ey(!0,n,V[y](arguments))}s(ov,"scheduleTimeout");var ym=Vr,by=ln,XE="toLowerCase",Es="length",md="warnToConsole",Iy="throwInternal",s5="watch",ZM="apply",no="push",Ty="splice",_g="logger",a5="cancel",ZE="name",hd="unload",eL="version",tL="loggingLevelConsole",rL="messageId",sv="message",nL="diagLog",$H="userAgent",iL="split",eb="replace",wy="type",WH="evtName",c5="traceFlags",oL="getAttribute",l5;function mue(w,P){l5||(l5=Eg("AggregationError",function(W,de){de[Es]>1&&(W.errors=de[1])}));var N=w||"One or more errors occurred.";throw Tn(P,function(W,de){N+=`
`.concat(de," > ").concat(le(W))}),new l5(N,P||[])}s(mue,"throwAggregationError");var hue="function",jH="object",gue="undefined",Rg="prototype",u5=Object,sL=u5[Rg];(F()||{}).Symbol,(F()||{}).Reflect;var d5="hasOwnProperty",Aue=s(function(w){for(var P,N=1,W=arguments.length;N<W;N++){P=arguments[N];for(var de in P)sL[d5].call(P,de)&&(w[de]=P[de])}return w},"__objAssignFnImpl"),f5=pt||Aue,p5=s(function(w,P){return p5=u5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,W){N.__proto__=W}||function(N,W){for(var de in W)W[d5](de)&&(N[de]=W[de])},p5(w,P)},"extendStaticsFn");function Sy(w,P){typeof P!==hue&&P!==null&&Be("Class extends value "+String(P)+" is not a constructor or null"),p5(w,P);function N(){this.constructor=w}s(N,"__"),w[Rg]=P===null?ha(P):(N[Rg]=P[Rg],new N)}s(Sy,"__extendsFn");var m5,av="constructor",Wf="prototype",jf="function",cv="_dynInstFuncs",tb="_isDynProxy",_y="_dynClass",rb="_dynCls$",aL="_dynInstChk",lv=aL,nb="_dfOpts",cL="_unknown_",h5="__proto__",ib="_dyn"+h5,$S="__dynProto$Gbl",g5="_dynInstProto",ob="useBaseInst",sb="setInstFuncs",WS=Object,uv=WS.getPrototypeOf,ab=WS.getOwnPropertyNames,lL=F(),A5=lL[$S]||(lL[$S]={o:(m5={},m5[sb]=!0,m5[ob]=!0,m5),n:1e3});function cb(w){return w&&(w===WS[Wf]||w===Array[Wf])}s(cb,"_isObjectOrArrayPrototype");function lb(w){return cb(w)||w===Function[Wf]}s(lb,"_isObjectArrayOrFunctionPrototype");function kg(w){var P;if(w){if(uv)return uv(w);var N=w[h5]||w[Wf]||(w[av]?w[av][Wf]:null);P=w[ib]||N,Te(w,ib)||(delete w[g5],P=w[ib]=w[g5]||w[ib],w[g5]=N)}return P}s(kg,"_getObjProto");function Cm(w,P){var N=[];if(ab)N=ab(w);else for(var W in w)typeof W=="string"&&Te(w,W)&&N.push(W);if(N&&N.length>0)for(var de=0;de<N.length;de++)P(N[de])}s(Cm,"_forEachProp");function ub(w,P,N){return P!==av&&typeof w[P]===jf&&(N||Te(w,P))&&P!==h5&&P!==Wf}s(ub,"_isDynamicCandidate");function db(w){Be("DynamicProto: "+w)}s(db,"_throwTypeError");function y5(w){var P=ha(null);return Cm(w,function(N){!P[N]&&ub(w,N,!1)&&(P[N]=w[N])}),P}s(y5,"_getInstanceFuncs");function uL(w,P){for(var N=w.length-1;N>=0;N--)if(w[N]===P)return!0;return!1}s(uL,"_hasVisited");function dL(w,P,N,W){function de(it,Et,gr){var Fn=Et[gr];if(Fn[tb]&&W){var ei=it[cv]||{};ei[lv]!==!1&&(Fn=(ei[Et[_y]]||{})[gr]||Fn)}return function(){return Fn.apply(it,arguments)}}s(de,"_instFuncProxy");var we=ha(null);Cm(N,function(it){we[it]=de(P,N,it)});for(var ke=kg(w),We=[];ke&&!lb(ke)&&!uL(We,ke);)Cm(ke,function(it){!we[it]&&ub(ke,it,!uv)&&(we[it]=de(P,ke,it))}),We.push(ke),ke=kg(ke);return we}s(dL,"_getBaseFuncs");function yue(w,P,N,W){var de=null;if(w&&Te(N,_y)){var we=w[cv]||ha(null);if(de=(we[N[_y]]||ha(null))[P],de||db("Missing ["+P+"] "+jf),!de[aL]&&we[lv]!==!1){for(var ke=!Te(w,P),We=kg(w),it=[];ke&&We&&!lb(We)&&!uL(it,We);){var Et=We[P];if(Et){ke=Et===W;break}it.push(We),We=kg(We)}try{ke&&(w[P]=de),de[aL]=1}catch{we[lv]=!1}}}return de}s(yue,"_getInstFunc");function Cue(w,P,N){var W=P[w];return W===N&&(W=kg(P)[w]),typeof W!==jf&&db("["+w+"] is not a "+jf),W}s(Cue,"_getProtoFunc");function vue(w,P,N,W,de){function we(it,Et){var gr=s(function(){var Fn=yue(this,Et,it,gr)||Cue(Et,it,gr);return Fn.apply(this,arguments)},"dynProtoProxy");return gr[tb]=1,gr}if(s(we,"_createDynamicPrototype"),!cb(w)){var ke=N[cv]=N[cv]||ha(null);if(!cb(ke)){var We=ke[P]=ke[P]||ha(null);ke[lv]!==!1&&(ke[lv]=!!de),cb(We)||Cm(N,function(it){ub(N,it,!1)&&N[it]!==W[it]&&(We[it]=N[it],delete N[it],(!Te(w,it)||w[it]&&!w[it][tb])&&(w[it]=we(w,it)))})}}}s(vue,"_populatePrototype");function xue(w,P){if(uv){for(var N=[],W=kg(P);W&&!lb(W)&&!uL(N,W);){if(W===w)return!0;N.push(W),W=kg(W)}return!1}return!0}s(xue,"_checkPrototype");function fL(w,P){return Te(w,Wf)?w.name||P||cL:((w||{})[av]||{}).name||P||cL}s(fL,"_getObjName");function jS(w,P,N,W){Te(w,Wf)||db("theClass is an invalid class definition.");var de=w[Wf];xue(de,P)||db("["+fL(w)+"] not in hierarchy of ["+fL(P)+"]");var we=null;Te(de,_y)?we=de[_y]:(we=rb+fL(w,"_")+"$"+A5.n,A5.n++,de[_y]=we);var ke=jS[nb],We=!!ke[ob];We&&W&&W[ob]!==void 0&&(We=!!W[ob]);var it=y5(P),Et=dL(de,P,it,We);N(P,Et);var gr=!!uv&&!!ke[sb];gr&&W&&(gr=!!W[sb]),vue(de,we,P,it,gr!==!1)}s(jS,"dynamicProto"),jS[nb]=A5.o;var _u=void 0,Na="",GH="Not dynamic - ",VH=/-([a-z])/g,GS=/([^\w\d_$])/g,pL=/^(\d+[\w\d_$])/;function mL(w){return!$(w)}s(mL,"isNotNullOrUndefined");function C5(w){var P=w;return P&&ie(P)&&(P=P[eb](VH,function(N,W){return W.toUpperCase()}),P=P[eb](GS,"_"),P=P[eb](pL,function(N,W){return"_"+W})),P}s(C5,"normalizeJsName");function zH(w,P){return w&&P?Yr(w,P)!==-1:!1}s(zH,"strContains");function Pg(w){return w&&w.toISOString()||""}s(Pg,"toISOString");function Ry(w){return Ae(w)?w[ZE]:Na}s(Ry,"getExceptionName");function VS(w){return function(){function P(){var N=this;w&&lt(w,function(W,de){N[W]=de})}return s(P,"class_1"),P}()}s(VS,"createClassFromInterface");var YH="console",v5="JSON",Eue="crypto",ky="msCrypto",fb="msie",ui="trident/",pb=null,dv=null,Dg=null;function x5(){return typeof console!==gue?console:D(YH)}s(x5,"getConsole");function Eo(){return!!(typeof JSON===jH&&JSON||D(v5)!==null)}s(Eo,"hasJSON");function mb(){return Eo()?JSON||D(v5):null}s(mb,"getJSON");function Ec(){return D(Eue)}s(Ec,"getCrypto");function hb(){return D(ky)}s(hb,"getMsCrypto");function zS(){var w=St();if(w&&(w[$H]!==dv||pb===null)){dv=w[$H];var P=(dv||Na)[XE]();pb=zH(P,fb)||zH(P,ui)}return pb}s(zS,"isIE");function Py(w){return(Dg===null||w===!1)&&(Dg=ut()&&!!St().sendBeacon),Dg}s(Py,"isBeaconsSupported");function YS(w,P){if(w)for(var N=0;N<w[Es];N++){var W=w[N];if(W[ZE]&&W[ZE]===P)return W}return{}}s(YS,"_getNamedValue");function E5(w){var P=ee();return P&&w?YS(P.querySelectorAll("meta"),w).content:null}s(E5,"findMetaTag");function vm(w){var P,N=iv();if(N){var W=N.getEntriesByType("navigation")||[];P=YS((W[Es]>0?W[0]:{}).serverTiming,w).description}return P}s(vm,"findNamedServerTiming");var gb=4294967296,Z0=4294967295,Ab=123456789,Dy=987654321,Wl=!1,yb=Ab,xm=Dy;function KH(w){w<0&&(w>>>=0),yb=Ab+w&Z0,xm=Dy-w&Z0,Wl=!0}s(KH,"_mwcSeed");function fv(){try{var w=bl()&2147483647;KH((Math.random()*gb^w)+w)}catch{}}s(fv,"_autoSeedMwc");function b5(w){return w>0?wu(Cb()/Z0*(w+1))>>>0:0}s(b5,"randomValue");function Cb(w){var P=0,N=Ec()||hb();return N&&N.getRandomValues&&(P=N.getRandomValues(new Uint32Array(1))[0]&Z0),P===0&&zS()&&(Wl||fv(),P=JH()&Z0),P===0&&(P=wu(gb*Math.random()|0)),w||(P>>>=0),P}s(Cb,"random32");function JH(w){xm=36969*(xm&65535)+(xm>>16)&Z0,yb=18e3*(yb&65535)+(yb>>16)&Z0;var P=(xm<<16)+(yb&65535)>>>0&Z0|0;return w||(P>>>=0),P}s(JH,"mwcRandom32");function pv(w){w===void 0&&(w=22);for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=Cb()>>>0,W=0,de=Na;de[Es]<w;)W++,de+=P.charAt(N&63),N>>>=6,W===5&&(N=(Cb()<<2&4294967295|N&3)>>>0,W=0);return de}s(pv,"newId");var Em="3.3.6",I5="."+pv(6),mv=0;function bm(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(bm,"_canAcceptData");function T5(w,P){var N=P[w.id];if(!N){N={};try{bm(P)&&ue(P,w.id,{e:!1,v:N})}catch{}}return N}s(T5,"_getCache");function Bg(w,P){return P===void 0&&(P=!1),C5(w+mv+++(P?"."+Em:Na)+I5)}s(Bg,"createUniqueNamespace");function Im(w){var P={id:Bg("_aiData-"+(w||Na)+"."+Em),accept:s(function(N){return bm(N)},"accept"),get:s(function(N,W,de,we){var ke=N[P.id];return ke?ke[C5(W)]:(we&&(ke=T5(P,N),ke[C5(W)]=de),de)},"get"),kill:s(function(N,W){if(N&&N[W])try{delete N[W]}catch{}},"kill")};return P}s(Im,"createElmNodeData");function By(w){return w&&te(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(By,"_isConfigDefaults");function w5(w,P,N){var W,de=N.dfVal||X;if(P&&N.fb){var we=N.fb;pe(we)||(we=[we]);for(var ke=0;ke<we[Es];ke++){var We=we[ke],it=P[We];if(de(it)?W=it:w&&(it=w.cfg[We],de(it)&&(W=it),w.set(w.cfg,$e(We),it)),de(W))break}}return!de(W)&&de(N.v)&&(W=N.v),W}s(w5,"_getDefault");function Ny(w,P,N){var W=N;if(N&&By(N)&&(W=w5(w,P,N)),W){By(W)&&(W=Ny(w,P,W));var de;pe(W)?(de=[],de[Es]=W[Es]):$l(W)&&(de={}),de&&(lt(W,function(we,ke){ke&&By(ke)&&(ke=Ny(w,P,ke)),de[we]=ke}),W=de)}return W}s(Ny,"_resolveDefaultValue");function My(w,P,N,W){var de,we,ke,We=W,it,Et,gr,Fn;By(We)?(de=We.isVal,we=We.set,gr=We.rdOnly,Fn=We.blkVal,it=We.mrg,Et=We.ref,!Et&&J(Et)&&(Et=!!it),ke=w5(w,P,We)):ke=W,Fn&&w.blkVal(P,N);var ei,xr=!0,Lr=P[N];(Lr||!$(Lr))&&(ei=Lr,xr=!1,de&&ei!==ke&&!de(ei)&&(ei=ke,xr=!0),we&&(ei=we(ei,ke,P),xr=ei===ke)),xr?ke?ei=Ny(w,P,ke):ei=ke:($l(ei)||pe(ke))&&it&&ke&&($l(ke)||pe(ke))&&lt(ke,function(Kn,On){My(w,ei,Kn,On)}),w.set(P,N,ei),Et&&w.ref(P,N),gr&&w.rdOnly(P,N)}s(My,"_applyDefaultValue");var Ru=li("[[ai_dynCfg_1]]"),hL=li("[[ai_blkDynCfg_1]]"),KS=li("[[ai_frcDynCfg_1]]");function gL(w){if(w){var P;if(pe(w)?(P=[],P[Es]=w[Es]):$l(w)&&(P={}),P)return lt(w,function(N,W){P[N]=gL(W)}),P}return w}s(gL,"_cfgDeepCopy");function AL(w){if(w){var P=w[Ru]||w;if(P.cfg&&(P.cfg===w||P.cfg[Ru]===P))return P}return null}s(AL,"getDynamicConfigHandler");function vb(w){if(w&&($l(w)||pe(w)))try{w[hL]=!0}catch{}return w}s(vb,"blockDynamicConversion");function Ly(w,P,N){var W=!1;return N&&!w[P.blkVal]&&(W=N[KS],!W&&!N[hL]&&(W=$l(N)||pe(N))),W}s(Ly,"_canMakeDynamic");function ep(w){Be("InvalidAccess:"+w)}s(ep,"throwInvalidAccess");var XH=["push","pop","shift","unshift","splice"],Ng=s(function(w,P,N,W){w&&w[Iy](3,108,"".concat(N," [").concat(P,"] failed - ")+le(W))},"_throwDynamicError");function yL(w,P,N){pe(P)&&Tn(XH,function(W){var de=P[W];P[W]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var We=de[ZM](this,we);return hv(w,P,N,"Patching"),We}})}s(yL,"_patchArray");function Mg(w,P){var N=Oe(w,P);return N&&N.get}s(Mg,"_getOwnPropGetter");function ZH(w,P,N,W){var de={n:N,h:[],trk:s(function(Et){Et&&Et.fn&&(Ao(de.h,Et)===-1&&de.h[no](Et),w.trk(Et,de))},"trk"),clr:s(function(Et){var gr=Ao(de.h,Et);gr!==-1&&de.h[Ty](gr,1)},"clr")},we=!0,ke=!1;function We(){we&&(ke=ke||Ly(We,w,W),W&&!W[Ru]&&ke&&(W=hv(w,W,N,"Converting")),we=!1);var Et=w.act;return Et&&de.trk(Et),W}s(We,"_getProperty"),We[w.prop]={chng:s(function(){w.add(de)},"chng")};function it(Et){if(W!==Et){We[w.ro]&&!w.upd&&ep("["+N+"] is read-only:"+le(P)),we&&(ke=ke||Ly(We,w,W),we=!1);var gr=ke&&We[w.rf];if(ke)if(gr){lt(W,function(ei){W[ei]=Et?Et[ei]:_u});try{lt(Et,function(ei,xr){xb(w,W,ei,xr)}),Et=W}catch(ei){Ng((w.hdlr||{})[_g],N,"Assigning",ei),ke=!1}}else W&&W[Ru]&&lt(W,function(ei){var xr=Mg(W,ei);if(xr){var Lr=xr[w.prop];Lr&&Lr.chng()}});if(Et!==W){var Fn=Et&&Ly(We,w,Et);!gr&&Fn&&(Et=hv(w,Et,N,"Converting")),W=Et,ke=Fn}w.add(de)}}s(it,"_setProperty"),ue(P,de.n,{g:We,s:it})}s(ZH,"_createDynamicProperty");function xb(w,P,N,W){if(P){var de=Mg(P,N),we=de&&!!de[w.prop];we?P[N]=W:ZH(w,P,N,W)}return P}s(xb,"_setDynamicProperty");function CL(w,P,N,W){if(P){var de=Mg(P,N),we=de&&!!de[w.prop],ke=W&&W[0],We=W&&W[1],it=W&&W[2];if(!we){if(it)try{vb(P)}catch(Et){Ng((w.hdlr||{})[_g],N,"Blocking",Et)}try{xb(w,P,N,P[N]),de=Mg(P,N)}catch(Et){Ng((w.hdlr||{})[_g],N,"State",Et)}}ke&&(de[w.rf]=ke),We&&(de[w.ro]=We),it&&(de[w.blkVal]=!0)}return P}s(CL,"_setDynamicPropertyState");function hv(w,P,N,W){try{lt(P,function(de,we){xb(w,P,de,we)}),P[Ru]||(ht(P,Ru,{get:s(function(){return w.hdlr},"get")}),yL(w,P,N))}catch(de){Ng((w.hdlr||{})[_g],N,W,de)}return P}s(hv,"_makeDynamicObject");var gv="[[ai_",Gf="]]";function e$(w){var P=yr(gv+"get"+w.uid+Gf),N=yr(gv+"ro"+w.uid+Gf),W=yr(gv+"rf"+w.uid+Gf),de=yr(gv+"blkVal"+w.uid+Gf),we=yr(gv+"dtl"+w.uid+Gf),ke=null,We=null,it;function Et(xr,Lr){var Kn=it.act;try{it.act=xr,xr&&xr[we]&&(Tn(xr[we],function(Oi){Oi.clr(xr)}),xr[we]=[]),Lr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Oi){var On=w[_g];throw On&&On[Iy](1,107,le(Oi)),Oi}finally{it.act=Kn||null}}s(Et,"_useHandler");function gr(){if(ke){var xr=ke;ke=null,We&&We[a5](),We=null;var Lr=[];if(Tn(xr,function(Kn){if(Kn&&(Kn[we]&&(Tn(Kn[we],function(On){On.clr(Kn)}),Kn[we]=null),Kn.fn))try{Et(Kn,Kn.fn)}catch(On){Lr[no](On)}}),ke)try{gr()}catch(Kn){Lr[no](Kn)}Lr[Es]>0&&mue("Watcher error(s): ",Lr)}}s(gr,"_notifyWatchers");function Fn(xr){if(xr&&xr.h[Es]>0){ke||(ke=[]),We||(We=ov(function(){We=null,gr()},0));for(var Lr=0;Lr<xr.h[Es];Lr++){var Kn=xr.h[Lr];Kn&&Ao(ke,Kn)===-1&&ke[no](Kn)}}}s(Fn,"_addWatcher");function ei(xr,Lr){if(xr){var Kn=xr[we]=xr[we]||[];Ao(Kn,Lr)===-1&&Kn[no](Lr)}}return s(ei,"_trackHandler"),it={prop:P,ro:N,rf:W,blkVal:de,hdlr:w,add:Fn,notify:gr,use:Et,trk:ei},it}s(e$,"_createState");function bue(w,P){var N={fn:P,rm:s(function(){N.fn=null,w=null,P=null},"rm")};return ue(N,"toJSON",{v:s(function(){return"WatcherHandler"+(N.fn?"":"[X]")},"v")}),w.use(N,P),N}s(bue,"_createAndUseHandler");function t$(w,P,N){var W=AL(P);if(W)return W;var de=Bg("dyncfg",!0),we=P&&N!==!1?P:gL(P),ke;function We(){ke.notify()}s(We,"_notifyWatchers");function it(On,Oi,Lo){try{On=xb(ke,On,Oi,Lo)}catch(io){Ng(w,Oi,"Setting value",io)}return On[Oi]}s(it,"_setValue");function Et(On){return bue(ke,On)}s(Et,"_watch");function gr(On,Oi){ke.use(null,function(Lo){var io=ke.upd;try{J(Oi)||(ke.upd=Oi),On(Lo)}finally{ke.upd=io}})}s(gr,"_block");function Fn(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[0]=!0,Lo))[Oi]}s(Fn,"_ref");function ei(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[1]=!0,Lo))[Oi]}s(ei,"_rdOnly");function xr(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[2]=!0,Lo))[Oi]}s(xr,"_blkPropValue");function Lr(On,Oi){return Oi&&lt(Oi,function(Lo,io){My(Kn,On,Lo,io)}),On}s(Lr,"_applyDefaults");var Kn={uid:null,cfg:we,logger:w,notify:We,set:it,setDf:Lr,watch:Et,ref:Fn,rdOnly:ei,blkVal:xr,_block:gr};return ue(Kn,"uid",{c:!1,e:!1,w:!1,v:de}),ke=e$(Kn),hv(ke,we,"config","Creating"),Kn}s(t$,"_createDynamicHandler");function r$(w,P){w?(w[md](P),w[Iy](2,108,P)):ep(P)}s(r$,"_logInvalidAccess");function JS(w,P,N,W){var de=t$(N,w||{},W);return P&&de.setDf(de.cfg,P),de}s(JS,"createDynamicConfig");function n$(w,P,N){var W=w[Ru]||w;return W.cfg&&(W.cfg===w||W.cfg[Ru]===W)?W[s5](P):(r$(N,GH+le(w)),JS(w,null,N)[s5](P))}s(n$,"onConfigChange");var S5=null;function i$(){var w=D("Microsoft");return w&&(S5=w.ApplicationInsights),S5}s(i$,"_getExtensionNamespace");function Iue(w){var P=S5;return!P&&w.disableDbgExt!==!0&&(P=S5||i$()),P?P.ChromeDbgExt:null}s(Iue,"getDebugExt");var Eb,_5="warnToConsole",o$="AI (Internal): ",s$="AI: ",Tue="AITR_",wue={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},a$=(Eb={},Eb[0]=null,Eb[1]="errorToConsole",Eb[2]=_5,Eb[3]="debugToConsole",Eb);function c$(w){return w?'"'+w[eb](/\"/g,Na)+'"':Na}s(c$,"_sanitizeDiagnosticText");function R5(w,P){var N=x5();if(N){var W="log";N[w]&&(W=w),ae(N[W])&&N[W](P)}}s(R5,"_logToConsole");var k5=function(){function w(P,N,W,de){W===void 0&&(W=!1);var we=this;we[rL]=P,we[sv]=(W?s$:o$)+P;var ke=Na;Eo()&&(ke=mb().stringify(de));var We=(N?" message:"+c$(N):Na)+(de?" props:"+c$(ke):Na);we[sv]+=We}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function Sue(w,P){return(w||{})[_g]||new P5(P)}s(Sue,"safeGetLogger");var P5=function(){function w(P){this.identifier="DiagnosticLogger",this.queue=[];var N=0,W={},de,we,ke,We,it;jS(w,this,function(Et){it=Fn(P||{}),Et.consoleLoggingLevel=function(){return de},Et[Iy]=function(Lr,Kn,On,Oi,Lo){Lo===void 0&&(Lo=!1);var io=new k5(Kn,On,Lo,Oi);if(We)throw le(io);var jc=a$[Lr]||_5;if(J(io[sv]))xr("throw"+(Lr===1?"Critical":"Warning"),io);else{if(Lo){var Zb=+io[rL];!W[Zb]&&de>=Lr&&(Et[jc](io[sv]),W[Zb]=!0)}else de>=Lr&&Et[jc](io[sv]);gr(Lr,io)}},Et.debugToConsole=function(Lr){R5("debug",Lr),xr("warning",Lr)},Et[md]=function(Lr){R5("warn",Lr),xr("warning",Lr)},Et.errorToConsole=function(Lr){R5("error",Lr),xr("error",Lr)},Et.resetInternalMessageCount=function(){N=0,W={}},Et.logInternalMessage=gr,Et[hd]=function(Lr){it&&it.rm(),it=null};function gr(Lr,Kn){if(!ei()){var On=!0,Oi=Tue+Kn[rL];if(W[Oi]?On=!1:W[Oi]=!0,On&&(Lr<=we&&(Et.queue[no](Kn),N++,xr(Lr===1?"error":"warn",Kn)),N===ke)){var Lo="Internal events throttle limit per PageView reached for this app.",io=new k5(23,Lo,!1);Et.queue[no](io),Lr===1?Et.errorToConsole(Lo):Et[md](Lo)}}}s(gr,"_logInternalMessage");function Fn(Lr){return n$(JS(Lr,wue,Et).cfg,function(Kn){var On=Kn.cfg;de=On[tL],we=On.loggingLevelTelemetry,ke=On.maxMessageLimit,We=On.enableDebug})}s(Fn,"_setDefaultsFromConfig");function ei(){return N>=ke}s(ei,"_areInternalMessagesThrottled");function xr(Lr,Kn){var On=Iue(P||{});On&&On[nL]&&On[nL](Lr,Kn)}s(xr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function D5(w){return w||new P5}s(D5,"_getLogger");function ef(w,P,N,W,de,we){we===void 0&&(we=!1),D5(w)[Iy](P,N,W,de,we)}s(ef,"_throwInternal");function B5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],P=Na,N,W=0;W<4;W++)N=Cb(),P+=w[N&15]+w[N>>4&15]+w[N>>8&15]+w[N>>12&15]+w[N>>16&15]+w[N>>20&15]+w[N>>24&15]+w[N>>28&15];var de=w[8+(Cb()&3)|0];return nr(P,0,8)+nr(P,9,4)+"4"+nr(P,13,3)+de+nr(P,16,3)+nr(P,19,12)}s(B5,"generateW3CId");var bb=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,vL="00",Vf="ff",Fi="00000000000000000000000000000000",Lg="0000000000000000",bc=1;function tp(w,P,N){return w&&w[Es]===P&&w!==N?!!w.match(/^[\da-f]*$/i):!1}s(tp,"_isValid");function N5(w,P,N){return tp(w,P)?w:N}s(N5,"_formatValue");function Av(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var P=w.toString(16);P[Es]<2;)P="0"+P;return P}s(Av,"_formatFlags");function Ib(w,P,N,W){return{version:tp(W,2,Vf)?W:vL,traceId:Tb(w)?w:B5(),spanId:wb(P)?P:zr(B5(),16),traceFlags:N>=0&&N<=255?N:1}}s(Ib,"createTraceParent");function zf(w,P){if(!w||(pe(w)&&(w=w[0]||""),!w||!ie(w)||w[Es]>8192))return null;if(w.indexOf(",")!==-1){var N=w[iL](",");w=N[P>0&&N[Es]>P?P:0]}var W=bb.exec(Ba(w));return!W||W[1]===Vf||W[2]===Fi||W[3]===Lg?null:{version:(W[1]||Na)[XE](),traceId:(W[2]||Na)[XE](),spanId:(W[3]||Na)[XE](),traceFlags:parseInt(W[4],16)}}s(zf,"parseTraceParent");function Tb(w){return tp(w,32,Fi)}s(Tb,"isValidTraceId");function wb(w){return tp(w,16,Lg)}s(wb,"isValidSpanId");function Sb(w){return!(!w||!tp(w[eL],2,Vf)||!tp(w.traceId,32,Fi)||!tp(w.spanId,16,Lg)||!tp(Av(w[c5]),2))}s(Sb,"isValidTraceParent");function M5(w){return Sb(w)?(w[c5]&bc)===bc:!1}s(M5,"isSampledFlag");function yv(w){if(w){var P=Av(w[c5]);tp(P,2)||(P="01");var N=w[eL]||vL;return N!=="00"&&N!=="ff"&&(N=vL),"".concat(N.toLowerCase(),"-").concat(N5(w.traceId,32,Fi).toLowerCase(),"-").concat(N5(w.spanId,16,Lg).toLowerCase(),"-").concat(P.toLowerCase())}return""}s(yv,"formatTraceParent");function xL(w){var P="traceparent",N=zf(E5(P),w);return N||(N=zf(vm(P),w)),N}s(xL,"findW3cTraceParent");function EL(w){var P=w.getElementsByTagName("script"),N=[];return Tn(P,function(W){var de=W[oL]("src");if(de){var we=W[oL]("crossorigin"),ke=W.hasAttribute("async")===!0,We=W.hasAttribute("defer")===!0,it=W[oL]("referrerpolicy"),Et={url:de};we&&(Et.crossOrigin=we),ke&&(Et.async=ke),We&&(Et.defer=We),it&&(Et.referrerPolicy=it),N[no](Et)}}),N}s(EL,"findAllScripts");var L5="on",XS="attachEvent",F5="addEventListener",O5="detachEvent",l$="removeEventListener",bL="events";Bg("aiEvtPageHide"),Bg("aiEvtPageShow");var _ue=/\.[\.]+/g,Rue=/[\.]+$/,Q5=1,_b=Im("events"),jl=/^([^.]*)(?:\.(.+)|)/;function ZS(w){return w&&w[eb]?w[eb](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Na):w}s(ZS,"_normalizeNamespace");function Il(w,P){if(P){var N=Na;pe(P)?(N=Na,Tn(P,function(de){de=ZS(de),de&&(de[0]!=="."&&(de="."+de),N+=de)})):N=ZS(P),N&&(N[0]!=="."&&(N="."+N),w=(w||Na)+N)}var W=jl.exec(w||Na)||[];return{type:W[1],ns:(W[2]||Na).replace(_ue,".").replace(Rue,Na)[iL](".").sort().join(".")}}s(Il,"_getEvtNamespace");function Fy(w,P,N){N===void 0&&(N=!0);var W=_b.get(w,bL,{},N),de=W[P];return de||(de=W[P]=[]),de}s(Fy,"_getRegisteredEvents");function u$(w,P,N,W){w&&P&&P[wy]&&(w[l$]?w[l$](P[wy],N,W):w[O5]&&w[O5](L5+P[wy],N))}s(u$,"_doDetach");function kue(w,P,N,W){var de=!1;return w&&P&&P[wy]&&N&&(w[F5]?(w[F5](P[wy],N,W),de=!0):w[XS]&&(w[XS](L5+P[wy],N),de=!0)),de}s(kue,"_doAttach");function e_(w,P,N,W){for(var de=P[Es];de--;){var we=P[de];we&&(!N.ns||N.ns===we[WH].ns)&&(!W||W(we))&&(u$(w,we[WH],we.handler,we.capture),P[Ty](de,1))}}s(e_,"_doUnregister");function IL(w,P,N){if(P[wy])e_(w,Fy(w,P[wy]),P,N);else{var W=_b.get(w,bL,{});lt(W,function(de,we){e_(w,we,P,N)}),Ft(W)[Es]===0&&_b.kill(w,bL)}}s(IL,"_unregisterEvents");function Pue(w,P){var N;return P?(pe(P)?N=[w].concat(P):N=[w,P],N=Il("xx",N).ns[iL](".")):N=w,N}s(Pue,"mergeEvtNamespace");function TL(w,P,N,W,de){de===void 0&&(de=!1);var we=!1;if(w)try{var ke=Il(P,W);if(we=kue(w,ke,N,de),we&&_b.accept(w)){var We={guid:Q5++,evtName:ke,handler:N,capture:de};Fy(w,ke.type)[no](We)}}catch{}return we}s(TL,"eventOn");function d$(w,P,N,W,de){if(de===void 0&&(de=!1),w)try{var we=Il(P,W),ke=!1;IL(w,we,function(We){return we.ns&&!N||We.handler===N?(ke=!0,!0):!1}),ke||u$(w,we,N,de)}catch{}}s(d$,"eventOff");var U5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",f$="sampleRate",q5="ProcessLegacy",p$="http.method",wL="https://dc.services.visualstudio.com",t_="/v2/track",Tm="not_specified",SL="iKey",m$=by({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Oy="split",Ln="length",Rb="toLowerCase",Cv="ingestionendpoint",vv="toString",_L="removeItem",r_="message",kb="count",H5="preTriggerDate",RL="getUTCDate",$5="stringify",Pb="pathname",xv="match",kL="correlationHeaderExcludePatterns",Yf="name",Db="extensionConfig",wm="properties",gd="measurements",Bb="sizeInBytes",n_="typeName",Nb="exceptions",i_="severityLevel",Mb="problemGroup",tf="parsedStack",W5="hasFullStack",j5="assembly",rp="fileName",Lb="line",Qy="aiDataContract",o_="duration";function PL(w,P,N){var W=P[Ln],de=DL(w,P);if(de[Ln]!==W){for(var we=0,ke=de;N[ke]!==void 0;)we++,ke=lr(de,0,147)+h$(we);de=ke}return de}s(PL,"dataSanitizeKeyAndAddUniqueness");function DL(w,P){var N;return P&&(P=Ba($e(P)),P[Ln]>150&&(N=lr(P,0,150),ef(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:P},!0))),N||P}s(DL,"dataSanitizeKey");function Tl(w,P,N){N===void 0&&(N=1024);var W;return P&&(N=N||1024,P=Ba($e(P)),P[Ln]>N&&(W=lr(P,0,N),ef(w,2,61,"string value is too long. It has been truncated to "+N+" characters.",{value:P},!0))),W||P}s(Tl,"dataSanitizeString");function Sm(w,P){return NL(w,P,2048,66)}s(Sm,"dataSanitizeUrl");function G5(w,P){var N;return P&&P[Ln]>32768&&(N=lr(P,0,32768),ef(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:P},!0)),N||P}s(G5,"dataSanitizeMessage");function BL(w,P){var N;if(P){var W=""+P;W[Ln]>32768&&(N=lr(W,0,32768),ef(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:P},!0))}return N||P}s(BL,"dataSanitizeException");function Fg(w,P){if(P){var N={};lt(P,function(W,de){if(te(de)&&Eo())try{de=mb()[$5](de)}catch(we){ef(w,2,49,"custom property is not valid",{exception:we},!0)}de=Tl(w,de,8192),W=PL(w,W,N),N[W]=de}),P=N}return P}s(Fg,"dataSanitizeProperties");function Kf(w,P){if(P){var N={};lt(P,function(W,de){W=PL(w,W,N),N[W]=de}),P=N}return P}s(Kf,"dataSanitizeMeasurements");function Fb(w,P){return P&&NL(w,P,128,69)[vv]()}s(Fb,"dataSanitizeId");function NL(w,P,N,W){var de;return P&&(P=Ba($e(P)),P[Ln]>N&&(de=lr(P,0,N),ef(w,2,W,"input is too long, it has been truncated to "+N+" characters.",{data:P},!0))),de||P}s(NL,"dataSanitizeInput");function h$(w){var P="00"+w;return nr(P,P[Ln]-3)}s(h$,"dsPadNumber");var ML=ee()||{},g$=0,Due=[null,null,null,null,null];function Ob(w){var P=g$,N=Due,W=N[P];return ML.createElement?N[P]||(W=N[P]=ML.createElement("a")):W={host:y$(w,!0)},W.href=w,P++,P>=N[Ln]&&(P=0),g$=P,W}s(Ob,"urlParseUrl");function Bue(w){var P,N=Ob(w);return N&&(P=N.href),P}s(Bue,"urlGetAbsoluteUrl");function Nue(w){var P,N=Ob(w);return N&&(P=N[Pb]),P}s(Nue,"urlGetPathName");function A$(w,P){return w?w.toUpperCase()+" "+P:P}s(A$,"urlGetCompleteUrl");function y$(w,P){var N=Og(w,P)||"";if(N){var W=N[xv](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Ln]>3&&ie(W[2])&&W[2][Ln]>0)return W[2]+(W[3]||"")}return N}s(y$,"urlParseHost");function Og(w,P){var N=null;if(w){var W=w[xv](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Ln]>2&&ie(W[2])&&W[2][Ln]>0&&(N=W[2]||"",P&&W[Ln]>2)){var de=(W[1]||"")[Rb](),we=W[3]||"";(de==="http"&&we===":80"||de==="https"&&we===":443")&&(we=""),N+=we}}return N}s(Og,"urlParseFullHost");var C$=[wL+t_,"https://breeze.aimon.applicationinsights.io"+t_,"https://dc-int.services.visualstudio.com"+t_],Qb="cid-v1:";function v$(w){return Ao(C$,w[Rb]())!==-1}s(v$,"isInternalApplicationInsightsEndpoint");function LL(w){Qb=w}s(LL,"correlationIdSetPrefix");function FL(){return Qb}s(FL,"correlationIdGetPrefix");function Uy(w,P,N){if(!P||w&&w.disableCorrelationHeaders)return!1;if(w&&w[kL]){for(var W=0;W<w.correlationHeaderExcludePatterns[Ln];W++)if(w[kL][W].test(P))return!1}var de=Ob(P).host[Rb]();if(de&&(Yr(de,":443")!==-1||Yr(de,":80")!==-1)&&(de=(Og(P,!0)||"")[Rb]()),(!w||!w.enableCorsCorrelation)&&de&&de!==N)return!1;var we=w&&w.correlationHeaderDomains;if(we){var ke;if(Tn(we,function(Et){var gr=new RegExp(Et.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));ke=ke||gr.test(de)}),!ke)return!1}var We=w&&w.correlationHeaderExcludedDomains;if(!We||We[Ln]===0)return!0;for(var W=0;W<We[Ln];W++){var it=new RegExp(We[W].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(it.test(de))return!1}return de&&de[Ln]>0}s(Uy,"correlationIdCanIncludeCorrelationHeader");function x$(w){if(w){var P=E$(w,m$[1]);if(P&&P!==Qb)return P}}s(x$,"correlationIdGetCorrelationContext");function E$(w,P){if(w)for(var N=w[Oy](","),W=0;W<N[Ln];++W){var de=N[W][Oy]("=");if(de[Ln]===2&&de[0]===P)return de[1]}}s(E$,"correlationIdGetCorrelationContextValue");function b$(w,P,N,W){var de,we=W,ke=W;if(P&&P[Ln]>0){var We=Ob(P);if(de=We.host,!we)if(We[Pb]!=null){var it=We.pathname[Ln]===0?"/":We[Pb];it.charAt(0)!=="/"&&(it="/"+it),ke=We[Pb],we=Tl(w,N?N+" "+it:it)}else we=Tl(w,P)}else de=W,we=W;return{target:de,name:we,data:ke}}s(b$,"AjaxHelperParseDependencyPath");function Mue(){var w=iv();if(w&&w.now&&w.timing){var P=w.now()+w.timing.navigationStart;if(P>0)return P}return bl()}s(Mue,"dateTimeUtilsNow");function Lue(w,P){var N=null;return w!==0&&P!==0&&!$(w)&&!$(P)&&(N=P-w),N}s(Lue,"dateTimeUtilsDuration");function OL(w,P){var N=w||{};return{getName:s(function(){return N[Yf]},"getName"),setName:s(function(W){P&&P.setName(W),N[Yf]=W},"setName"),getTraceId:s(function(){return N.traceID},"getTraceId"),setTraceId:s(function(W){P&&P.setTraceId(W),Tb(W)&&(N.traceID=W)},"setTraceId"),getSpanId:s(function(){return N.parentID},"getSpanId"),setSpanId:s(function(W){P&&P.setSpanId(W),wb(W)&&(N.parentID=W)},"setSpanId"),getTraceFlags:s(function(){return N.traceFlags},"getTraceFlags"),setTraceFlags:s(function(W){P&&P.setTraceFlags(W),N.traceFlags=W},"setTraceFlags")}}s(OL,"createDistributedTraceContextFromTrace");var Ub=ym({LocalStorage:0,SessionStorage:1}),Fue=ym({AI:0,AI_AND_W3C:1,W3C:2}),s_=ym({Normal:1,Critical:2}),qy=void 0,np=void 0,I$="";function qb(){return V5()?Hb(Ub.LocalStorage):null}s(qb,"_getLocalStorageObject");function Hb(w){try{if($(F()))return null;var P=new Date()[vv](),N=D(w===Ub.LocalStorage?"localStorage":"sessionStorage"),W=I$+P;N.setItem(W,P);var de=N.getItem(W)!==P;if(N[_L](W),!de)return N}catch{}return null}s(Hb,"_getVerifiedStorageObject");function $b(){return Qg()?Hb(Ub.SessionStorage):null}s($b,"_getSessionStorageObject");function a_(){qy=!1,np=!1}s(a_,"utlDisableStorage");function c_(w){I$=w||""}s(c_,"utlSetStoragePrefix");function Oue(){qy=V5(!0),np=Qg(!0)}s(Oue,"utlEnableStorage");function V5(w){return(w||qy===void 0)&&(qy=!!Hb(Ub.LocalStorage)),qy}s(V5,"utlCanUseLocalStorage");function T$(w,P){var N=qb();if(N!==null)try{return N.getItem(P)}catch(W){qy=!1,ef(w,2,1,"Browser failed read of local storage. "+Ry(W),{exception:le(W)})}return null}s(T$,"utlGetLocalStorage");function w$(w,P,N){var W=qb();if(W!==null)try{return W.setItem(P,N),!0}catch(de){qy=!1,ef(w,2,3,"Browser failed write to local storage. "+Ry(de),{exception:le(de)})}return!1}s(w$,"utlSetLocalStorage");function Jf(w,P){var N=qb();if(N!==null)try{return N[_L](P),!0}catch(W){qy=!1,ef(w,2,5,"Browser failed removal of local storage item. "+Ry(W),{exception:le(W)})}return!1}s(Jf,"utlRemoveStorage");function Qg(w){return(w||np===void 0)&&(np=!!Hb(Ub.SessionStorage)),np}s(Qg,"utlCanUseSessionStorage");function Wb(){var w=[];return Qg()&&lt(D("sessionStorage"),function(P){w.push(P)}),w}s(Wb,"utlGetSessionStorageKeys");function S$(w,P){var N=$b();if(N!==null)try{return N.getItem(P)}catch(W){np=!1,ef(w,2,2,"Browser failed read of session storage. "+Ry(W),{exception:le(W)})}return null}s(S$,"utlGetSessionStorage");function Que(w,P,N){var W=$b();if(W!==null)try{return W.setItem(P,N),!0}catch(de){np=!1,ef(w,2,4,"Browser failed write to session storage. "+Ry(de),{exception:le(de)})}return!1}s(Que,"utlSetSessionStorage");function _$(w,P){var N=$b();if(N!==null)try{return N[_L](P),!0}catch(W){np=!1,ef(w,2,6,"Browser failed removal of session storage item. "+Ry(W),{exception:le(W)})}return!1}s(_$,"utlRemoveSessionStorage");var Uue="appInsightsThrottle",que=function(){function w(P,N){var W=this,de,we,ke,We,it,Et,gr,Fn=!1,ei=!1;Lr(),W._getDbgPlgTargets=function(){return[gr]},W.getConfig=function(){return ke},W.canThrottle=function(Nt){var Kr=XL(Nt),Cn=Kn(Nt);return Lo(Cn,de,Kr)},W.isTriggered=function(Nt){return j$(Nt)},W.isReady=function(){return Fn},W.flush=function(Nt){try{var Kr=G$(Nt);if(Kr&&Kr[Ln]>0){var Cn=Kr.slice(0);return gr[Nt]=[],Tn(Cn,function(gs){xr(gs.msgID,gs[r_],gs.severity,!1)}),!0}}catch{}return!1},W.flushAll=function(){try{if(gr){var Nt=!0;return lt(gr,function(Kr){var Cn=W.flush(parseInt(Kr));Nt=Nt&&Cn}),Nt}}catch{}return!1},W.onReadyState=function(Nt,Kr){return Kr===void 0&&(Kr=!0),Fn=$(Nt)?!0:Nt,Fn&&Kr?W.flushAll():null},W.sendMessage=function(Nt,Kr,Cn){return xr(Nt,Kr,Cn,!0)};function xr(Nt,Kr,Cn,gs){if(Fn){var Gc=ode(Nt);if(!Gc)return;var Ma=Kn(Nt),Vc=XL(Nt),bv=Lo(Ma,de,Vc),Gy=!1,eI=0,V$=j$(Nt);try{bv&&!V$?(eI=Ir(Ma.limit.maxSendNumber,Vc[kb]+1),Vc[kb]=0,Gy=!0,it[Nt]=!0,Vc[H5]=new Date):(it[Nt]=bv,Vc[kb]+=1);var z$=io(Nt);JL(we,z$,Vc);for(var a4=0;a4<eI;a4++)W$(Nt,we,Kr,Cn)}catch{}return{isThrottled:Gy,throttleNum:eI}}else if(gs){var sde=G$(Nt);sde.push({msgID:Nt,message:Kr,severity:Cn})}return null}s(xr,"_flushMessage");function Lr(){we=Sue(P),it={},We={},gr={},ke={},On(109),Et=mL(N)?N:"",P.addUnloadHook(n$(P.config,function(Nt){var Kr=Nt.cfg;de=V5();var Cn=Kr.throttleMgrCfg||{};lt(Cn,function(gs,Gc){On(parseInt(gs),Gc)})}))}s(Lr,"_initConfig");function Kn(Nt){return ke[Nt]||ke[109]}s(Kn,"_getCfgByKey");function On(Nt,Kr){var Cn,gs;try{var Gc=Kr||{},Ma={};Ma.disabled=!!Gc.disabled;var Vc=Gc.interval||{};ei=Vc?.daysOfMonth&&Vc?.daysOfMonth[Ln]>0,Ma.interval=Oi(Vc);var bv={samplingRate:((Cn=Gc.limit)===null||Cn===void 0?void 0:Cn.samplingRate)||100,maxSendNumber:((gs=Gc.limit)===null||gs===void 0?void 0:gs.maxSendNumber)||1};Ma.limit=bv,ke[Nt]=Ma}catch{}}s(On,"_setCfgByKey");function Oi(Nt){Nt=Nt||{};var Kr=Nt?.monthInterval,Cn=Nt?.dayInterval;return $(Kr)&&$(Cn)&&(Nt.monthInterval=3,ei||(Nt.daysOfMonth=[28],ei=!0)),Nt={monthInterval:Nt?.monthInterval,dayInterval:Nt?.dayInterval,daysOfMonth:Nt?.daysOfMonth},Nt}s(Oi,"_getIntervalConfig");function Lo(Nt,Kr,Cn){if(Nt&&!Nt.disabled&&Kr&&mL(Cn)){var gs=g_(),Gc=Cn.date,Ma=Nt.interval,Vc=1;if(Ma?.monthInterval){var bv=(gs.getUTCFullYear()-Gc.getUTCFullYear())*12+gs.getUTCMonth()-Gc.getUTCMonth();Vc=s4(Ma.monthInterval,0,bv)}var Gy=1;if(ei)Gy=Ao(Ma.daysOfMonth,gs[RL]());else if(Ma?.dayInterval){var eI=wu((gs.getTime()-Gc.getTime())/864e5);Gy=s4(Ma.dayInterval,0,eI)}return Vc>=0&&Gy>=0}return!1}s(Lo,"_canThrottle");function io(Nt,Kr){var Cn=mL(Kr)?Kr:"";return Nt?Uue+Cn+"-"+Nt:null}s(io,"_getLocalStorageName");function jc(Nt){try{if(Nt){var Kr=new Date;return Nt.getUTCFullYear()===Kr.getUTCFullYear()&&Nt.getUTCMonth()===Kr.getUTCMonth()&&Nt[RL]()===Kr[RL]()}}catch{}return!1}s(jc,"_isTriggeredOnCurDate");function Zb(Nt,Kr,Cn){try{var gs={date:g_(),count:0};if(Nt){var Gc=JSON.parse(Nt),Ma={date:g_(Gc.date)||gs.date,count:Gc[kb]||gs[kb],preTriggerDate:Gc.preTriggerDate?g_(Gc[H5]):void 0};return Ma}else return JL(Kr,Cn,gs),gs}catch{}return null}s(Zb,"_getLocalStorageObj");function g_(Nt){try{if(Nt){var Kr=new Date(Nt);if(!isNaN(Kr.getDate()))return Kr}else return new Date}catch{}return null}s(g_,"_getThrottleDate");function JL(Nt,Kr,Cn){try{return w$(Nt,Kr,Ba(JSON[$5](Cn)))}catch{}return!1}s(JL,"_resetLocalStorage");function s4(Nt,Kr,Cn){return Nt<=0?1:Cn>=Kr&&(Cn-Kr)%Nt==0?wu((Cn-Kr)/Nt)+1:-1}s(s4,"_checkInterval");function W$(Nt,Kr,Cn,gs){ef(Kr,gs||1,Nt,Cn)}s(W$,"_sendMessage");function ode(Nt){try{var Kr=Kn(Nt);return b5(1e6)<=Kr.limit.samplingRate}catch{}return!1}s(ode,"_canSampledIn");function XL(Nt){try{var Kr=We[Nt];if(!Kr){var Cn=io(Nt,Et);Kr=Zb(T$(we,Cn),we,Cn),We[Nt]=Kr}return We[Nt]}catch{}return null}s(XL,"_getLocalStorageObjByKey");function j$(Nt){var Kr=it[Nt];if($(Kr)){Kr=!1;var Cn=XL(Nt);Cn&&(Kr=jc(Cn[H5])),it[Nt]=Kr}return it[Nt]}s(j$,"_isTrigger");function G$(Nt){return gr=gr||{},$(gr[Nt])&&(gr[Nt]=[]),gr[Nt]}s(G$,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),QL=";",_m="=";function z5(w){if(!w)return{};var P=w[Oy](QL),N=Xo(P,function(de,we){var ke=we[Oy](_m);if(ke[Ln]===2){var We=ke[0][Rb](),it=ke[1];de[We]=it}return de},{});if(Ft(N)[Ln]>0){if(N.endpointsuffix){var W=N.location?N.location+".":"";N[Cv]=N[Cv]||"https://"+W+"dc."+N.endpointsuffix}N[Cv]=N[Cv]||wL,Hf(N[Cv],"/")&&(N[Cv]=N[Cv].slice(0,-1))}return N}s(z5,"parseConnectionString");var Y5={parse:z5},K5=function(){function w(P,N,W){var de=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[Yf]=Tl(P,W)||Tm,we.data=N,we.time=Pg(new Date),we[Qy]={time:1,iKey:1,name:1,sampleRate:s(function(){return de.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),Hue=function(){function w(P,N,W,de){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[Yf]=Tl(P,N)||Tm,we[wm]=Fg(P,W),we[gd]=Kf(P,de)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),$ue=58,R$=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Wue=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,jb=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,k$=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,jue=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Gue=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Vue=/([^\(\s\n]+):([0-9]+)$/,P$="<no_method>",Gb="error",rf="stack",l_="stackDetails",J5="errorSrc",u_="message",d_="description",UL=[{re:Wue,len:5,m:1,fn:2,ln:3,col:4},{chk:X5,pre:Or,re:jb,len:4,m:1,fn:2,ln:3},{re:k$,len:3,m:1,fn:2,hdl:HL},{re:jue,len:2,fn:1,hdl:HL}];function Or(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Or,"_scrubAnonymous");function X5(w){return Yr(w,"[native")<0}s(X5,"_ignoreNative");function f_(w,P){var N=w;return N&&!ie(N)&&(JSON&&JSON[$5]?(N=JSON[$5](w),P&&(!N||N==="{}")&&(ae(w[vv])?N=w[vv]():N=""+w)):N=""+w+" - (Missing JSON.stringify)"),N||""}s(f_,"_stringify");function Hy(w,P){var N=w;return w&&(N&&!ie(N)&&(N=w[u_]||w[d_]||N),N&&!ie(N)&&(N=f_(N,!0)),w.filename&&(N=N+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),P&&P!=="String"&&P!=="Object"&&P!=="Error"&&Yr(N||"",P)===-1&&(N=P+": "+N),N||""}s(Hy,"_formatMessage");function D$(w){try{if(te(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(D$,"_isExceptionDetailsInternal");function B$(w){try{if(te(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(B$,"_isExceptionInternal");function Z5(w){return w&&w.src&&ie(w.src)&&w.obj&&pe(w.obj)}s(Z5,"_isStackDetails");function Ug(w){var P=w||"";ie(P)||(ie(P[rf])?P=P[rf]:P=""+P);var N=P[Oy](`
`);return{src:P,obj:N}}s(Ug,"_convertStackObj");function N$(w){for(var P=[],N=w[Oy](`
`),W=0;W<N[Ln];W++){var de=N[W];N[W+1]&&(de+="@"+N[W+1],W++),P.push(de)}return{src:w,obj:P}}s(N$,"_getOperaStack");function e4(w){var P=null;if(w)try{if(w[rf])P=Ug(w[rf]);else if(w[Gb]&&w[Gb][rf])P=Ug(w[Gb][rf]);else if(w.exception&&w.exception[rf])P=Ug(w.exception[rf]);else if(Z5(w))P=w;else if(Z5(w[l_]))P=w[l_];else if(_e()&&_e().opera&&w[u_])P=N$(w[r_]);else if(w.reason&&w.reason[rf])P=Ug(w.reason[rf]);else if(ie(w))P=Ug(w);else{var N=w[u_]||w[d_]||"";ie(w[J5])&&(N&&(N+=`
`),N+=" from "+w[J5]),N&&(P=Ug(N))}}catch(W){P=Ug(W)}return P||{src:"",obj:null}}s(e4,"_getStackFromErrorObj");function M$(w){var P="";return w&&(w.obj?P=w.obj.join(`
`):P=w.src||""),P}s(M$,"_formatStackTrace");function t4(w){var P,N=w.obj;if(N&&N[Ln]>0){P=[];var W=0,de=!1,we=0;Tn(N,function(Kn){if(de||zue(Kn)){var On=$e(Kn);de=!0;var Oi=Yue(On,W);Oi&&(we+=Oi[Bb],P.push(Oi),W++)}});var ke=32*1024;if(we>ke)for(var We=0,it=P[Ln]-1,Et=0,gr=We,Fn=it;We<it;){var ei=P[We][Bb],xr=P[it][Bb];if(Et+=ei+xr,Et>ke){var Lr=Fn-gr+1;P.splice(gr,Lr);break}gr=We,Fn=it,We++,it--}}return P}s(t4,"_parseStack");function Vb(w){var P="";if(w&&(P=w.typeName||w[Yf]||"",!P))try{var N=/function (.{1,200})\(/,W=N.exec(w.constructor[vv]());P=W&&W[Ln]>1?W[1]:""}catch{}return P}s(Vb,"_getErrorType");function r4(w){if(w)try{if(!ie(w)){var P=Vb(w),N=f_(w,!1);return(!N||N==="{}")&&(w[Gb]&&(w=w[Gb],P=Vb(w)),N=f_(w,!0)),Yr(N,P)!==0&&P!=="String"?P+":"+N:N}}catch{}return""+(w||"")}s(r4,"_formatErrorCode");var Rm=function(){function w(P,N,W,de,we,ke){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var We=this;We.ver=2,B$(N)?(We[Nb]=N[Nb]||[],We[wm]=N[wm],We[gd]=N[gd],N[i_]&&(We[i_]=N[i_]),N.id&&(We.id=N.id,N[wm].id=N.id),N[Mb]&&(We[Mb]=N[Mb]),$(N.isManual)||(We.isManual=N.isManual)):(W||(W={}),ke&&(W.id=ke),We[Nb]=[O$(P,N,W)],We[wm]=Fg(P,W),We[gd]=Kf(P,de),we&&(We[i_]=we),ke&&(We.id=ke))}return s(w,"Exception"),w.CreateAutoException=function(P,N,W,de,we,ke,We,it){var Et=Vb(we||ke||P);return{message:Hy(P,Et),url:N,lineNumber:W,columnNumber:de,error:r4(we||ke||P),evt:r4(ke||P),typeName:Et,stackDetails:e4(We||we||ke),errorSrc:it}},w.CreateFromInterface=function(P,N,W,de){var we=N[Nb]&&vi(N[Nb],function(We){return qL(P,We)}),ke=new w(P,f5(f5({},N),{exceptions:we}),W,de);return ke},w.prototype.toInterface=function(){var P=this,N=P.exceptions,W=P.properties,de=P.measurements,we=P.severityLevel,ke=P.problemGroup,We=P.id,it=P.isManual,Et=N instanceof Array&&vi(N,function(gr){return gr.toInterface()})||void 0;return{ver:"4.0",exceptions:Et,severityLevel:we,properties:W,measurements:de,problemGroup:ke,id:We,isManual:it}},w.CreateSimpleException=function(P,N,W,de,we,ke){var We;return{exceptions:[(We={},We[W5]=!0,We.message=P,We.stack=we,We.typeName=N,We)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=r4,w}(),L$=Jt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function F$(){var w=this,P=pe(w[tf])&&vi(w[tf],function(W){return U$(W)}),N={id:w.id,outerId:w.outerId,typeName:w[n_],message:w[r_],hasFullStack:w[W5],stack:w[rf],parsedStack:P||void 0};return N}s(F$,"_toInterface");function O$(w,P,N){var W,de,we,ke,We,it,Et,gr;if(D$(P))ke=P[n_],We=P[r_],Et=P[rf],gr=P[tf]||[],it=P[W5];else{var Fn=P,ei=Fn&&Fn.evt;Ae(Fn)||(Fn=Fn[Gb]||ei||Fn),ke=Tl(w,Vb(Fn))||Tm,We=G5(w,Hy(P||Fn,ke))||Tm;var xr=P[l_]||e4(P);gr=t4(xr),pe(gr)&&vi(gr,function(Lr){Lr[j5]=Tl(w,Lr[j5]),Lr[rp]=Tl(w,Lr[rp])}),Et=BL(w,M$(xr)),it=pe(gr)&&gr[Ln]>0,N&&(N[n_]=N[n_]||ke)}return W={},W[Qy]=L$,W.id=de,W.outerId=we,W.typeName=ke,W.message=We,W[W5]=it,W.stack=Et,W.parsedStack=gr,W.toInterface=F$,W}s(O$,"_createExceptionDetails");function qL(w,P){var N=pe(P[tf])&&vi(P[tf],function(de){return Q$(de)})||P[tf],W=O$(w,f5(f5({},P),{parsedStack:N}));return W}s(qL,"_createExDetailsFromInterface");function p_(w,P){var N=P[xv](Gue);if(N&&N[Ln]>=4)w[rp]=N[1],w[Lb]=parseInt(N[2]);else{var W=P[xv](Vue);W&&W[Ln]>=3?(w[rp]=W[1],w[Lb]=parseInt(W[2])):w[rp]=P}}s(p_,"_parseFilename");function HL(w,P,N){var W=w[rp];P.fn&&N&&N[Ln]>P.fn&&(P.ln&&N[Ln]>P.ln?(W=Ba(N[P.fn]||""),w[Lb]=parseInt(Ba(N[P.ln]||""))||0):W=Ba(N[P.fn]||"")),W&&p_(w,W)}s(HL,"_handleFilename");function zue(w){var P=!1;if(w&&ie(w)){var N=Ba(w);N&&(P=R$.test(N))}return P}s(zue,"_isStackFrame");var $L=Jt({level:1,method:1,assembly:0,fileName:0,line:0});function Yue(w,P){var N,W;if(w&&ie(w)&&Ba(w)){W=(N={},N[Qy]=$L,N.level=P,N.assembly=Ba(w),N.method=P$,N.fileName="",N.line=0,N.sizeInBytes=0,N);for(var de=0;de<UL[Ln];){var we=UL[de];if(we.chk&&!we.chk(w))break;we.pre&&(w=we.pre(w));var ke=w[xv](we.re);if(ke&&ke[Ln]>=we.len){we.m&&(W.method=Ba(ke[we.m]||P$)),we.hdl?we.hdl(W,we,ke):we.fn&&(we.ln?(W[rp]=Ba(ke[we.fn]||""),W[Lb]=parseInt(Ba(ke[we.ln]||""))||0):p_(W,ke[we.fn]||""));break}de++}}return WL(W)}s(Yue,"_extractStackFrame");function Q$(w){var P,N=(P={},P[Qy]=$L,P.level=w.level,P.method=w.method,P.assembly=w[j5],P.fileName=w[rp],P.line=w[Lb],P.sizeInBytes=0,P);return WL(N)}s(Q$,"_stackFrameFromInterface");function WL(w){var P=$ue;return w&&(P+=w.method[Ln],P+=w.assembly[Ln],P+=w.fileName[Ln],P+=w.level.toString()[Ln],P+=w.line.toString()[Ln],w[Bb]=P),w}s(WL,"_populateFrameSizeInBytes");function U$(w){return{level:w.level,method:w.method,assembly:w[j5],fileName:w[rp],line:w[Lb]}}s(U$,"_parsedFrameToInterface");var q$=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),Kue=function(){function w(P,N,W,de,we,ke,We,it,Et){this.aiDataContract={ver:1,metrics:1,properties:0};var gr=this;gr.ver=2;var Fn=new q$;Fn[kb]=de>0?de:void 0,Fn.max=isNaN(ke)||ke===null?void 0:ke,Fn.min=isNaN(we)||we===null?void 0:we,Fn[Yf]=Tl(P,N)||Tm,Fn.value=W,Fn.stdDev=isNaN(We)||We===null?void 0:We,gr.metrics=[Fn],gr[wm]=Fg(P,it),gr[gd]=Kf(P,Et)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),zb="";function Jue(w,P){return P===void 0&&(P=!1),w==null?P:w.toString()[Rb]()==="true"}s(Jue,"stringToBoolOrDefault");function jL(w){(isNaN(w)||w<0)&&(w=0),w=JE(w);var P=zb+w%1e3,N=zb+wu(w/1e3)%60,W=zb+wu(w/(1e3*60))%60,de=zb+wu(w/(1e3*60*60))%24,we=wu(w/(1e3*60*60*24));return P=P[Ln]===1?"00"+P:P[Ln]===2?"0"+P:P,N=N[Ln]<2?"0"+N:N,W=W[Ln]<2?"0"+W:W,de=de[Ln]<2?"0"+de:de,(we>0?we+".":zb)+de+":"+W+":"+N+"."+P}s(jL,"msToTimeSpan");function Xue(w,P){var N=null;return Tn(w,function(W){if(W.identifier===P)return N=W,-1}),N}s(Xue,"getExtensionByName");function $y(w,P,N,W,de){return!de&&ie(w)&&(w==="Script error."||w==="Script error")}s($y,"isCrossOriginError");var Zue=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var it=this;it.ver=2,it.id=Fb(P,We),it.url=Sm(P,W),it[Yf]=Tl(P,N)||Tm,isNaN(de)||(it[o_]=jL(de)),it[wm]=Fg(P,we),it[gd]=Kf(P,ke)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),Yb=function(){function w(P,N,W,de,we,ke,We,it,Et,gr,Fn,ei){Et===void 0&&(Et="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var xr=this;xr.ver=2,xr.id=N,xr[o_]=jL(we),xr.success=ke,xr.resultCode=We+"",xr.type=Tl(P,Et);var Lr=b$(P,W,it,de);xr.data=Sm(P,de)||Lr.data,xr.target=Tl(P,Lr.target),gr&&(xr.target="".concat(xr.target," | ").concat(gr)),xr[Yf]=Tl(P,Lr[Yf]),xr[wm]=Fg(P,Fn),xr[gd]=Kf(P,ei)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),GL=function(){function w(P,N,W,de,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var ke=this;ke.ver=2,N=N||Tm,ke[r_]=G5(P,N),ke[wm]=Fg(P,de),ke[gd]=Kf(P,we),W&&(ke[i_]=W)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),m_=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var it=this;it.ver=2,it.url=Sm(P,W),it[Yf]=Tl(P,N)||Tm,it[wm]=Fg(P,we),it[gd]=Kf(P,ke),We&&(it.domProcessing=We.domProcessing,it[o_]=We[o_],it.networkConnect=We.networkConnect,it.perfTotal=We.perfTotal,it.receivedResponse=We.receivedResponse,it.sentRequest=We.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),ede=function(){function w(P,N){this.aiDataContract={baseType:1,baseData:1},this.baseType=P,this.baseData=N}return s(w,"Data"),w}(),n4=ym({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),tde=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(P,N,W,de){de===void 0&&(de=!1);var we;return W&&P[Db]&&P[Db][W]&&!$(P[Db][W][N])?we=P[Db][W][N]:we=P[N],$(we)?de:we},w}();function km(w){var P="ai."+w+".";return function(N){return P+N}}s(km,"_aiNameFunc");var Kb=km("application"),Ic=km("device"),i4=km("location"),Jb=km("operation"),o4=km("session"),Wy=km("user"),Ev=km("cloud"),h_=km("internal"),jy=function(w){Sy(P,w);function P(){return w.call(this)||this}return s(P,"ContextTagKeys"),P}(VS({applicationVersion:Kb("ver"),applicationBuild:Kb("build"),applicationTypeId:Kb("typeId"),applicationId:Kb("applicationId"),applicationLayer:Kb("layer"),deviceId:Ic("id"),deviceIp:Ic("ip"),deviceLanguage:Ic("language"),deviceLocale:Ic("locale"),deviceModel:Ic("model"),deviceFriendlyName:Ic("friendlyName"),deviceNetwork:Ic("network"),deviceNetworkName:Ic("networkName"),deviceOEMName:Ic("oemName"),deviceOS:Ic("os"),deviceOSVersion:Ic("osVersion"),deviceRoleInstance:Ic("roleInstance"),deviceRoleName:Ic("roleName"),deviceScreenResolution:Ic("screenResolution"),deviceType:Ic("type"),deviceMachineName:Ic("machineName"),deviceVMName:Ic("vmName"),deviceBrowser:Ic("browser"),deviceBrowserVersion:Ic("browserVersion"),locationIp:i4("ip"),locationCountry:i4("country"),locationProvince:i4("province"),locationCity:i4("city"),operationId:Jb("id"),operationName:Jb("name"),operationParentId:Jb("parentId"),operationRootId:Jb("rootId"),operationSyntheticSource:Jb("syntheticSource"),operationCorrelationVector:Jb("correlationVector"),sessionId:o4("id"),sessionIsFirst:o4("isFirst"),sessionIsNew:o4("isNew"),userAccountAcquisitionDate:Wy("accountAcquisitionDate"),userAccountId:Wy("accountId"),userAgent:Wy("userAgent"),userId:Wy("id"),userStoreRegion:Wy("storeRegion"),userAuthUserId:Wy("authUserId"),userAnonymousUserAcquisitionDate:Wy("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Wy("authUserAcquisitionDate"),cloudName:Ev("name"),cloudRole:Ev("role"),cloudRoleVer:Ev("roleVer"),cloudRoleInstance:Ev("roleInstance"),cloudEnvironment:Ev("environment"),cloudLocation:Ev("location"),cloudDeploymentUnit:Ev("deploymentUnit"),internalNodeName:h_("nodeName"),internalSdkVersion:h_("sdkVersion"),internalAgentVersion:h_("agentVersion"),internalSnippet:h_("snippet"),internalSdkSrc:h_("sdkSrc")}));function VL(w,P,N,W,de,we){N=Tl(W,N)||Tm,($(w)||$(P)||$(N))&&qe("Input doesn't contain all required fields");var ke="";w[SL]&&(ke=w[SL],delete w[SL]);var We={name:N,time:Pg(new Date),iKey:ke,ext:we||{},tags:[],data:{},baseType:P,baseData:w};return $(de)||lt(de,function(it,Et){We.data[it]=Et}),We}s(VL,"createTelemetryItem");var zL=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=VL,w}(),rde={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},nde=new jy;function H$(w){var P=null;if(ae(Event))P=new Event(w);else{var N=ee();N&&N.createEvent&&(P=N.createEvent("Event"),P.initEvent(w,!0,!0))}return P}s(H$,"createDomEvent");function YL(w,P){d$(w,null,null,P)}s(YL,"_disableEvents");function $$(w){var P=ee(),N=St(),W=!1,de=[],we=1;N&&!$(N.onLine)&&!N.onLine&&(we=2);var ke=0,We=ei(),it=Pue(Bg("OfflineListener"),w);try{if(gr(_e())&&(W=!0),P){var Et=P.body||P;Et.ononline&&gr(Et)&&(W=!0)}}catch{W=!1}function gr(io){var jc=!1;return io&&(jc=TL(io,"online",Kn,it),jc&&TL(io,"offline",On,it)),jc}s(gr,"_enableEvents");function Fn(){return We}s(Fn,"_isOnline");function ei(){return!(ke===2||we===2)}s(ei,"calCurrentState");function xr(){var io=ei();We!==io&&(We=io,Tn(de,function(jc){var Zb={isOnline:We,rState:we,uState:ke};try{jc(Zb)}catch{}}))}s(xr,"listnerNoticeCheck");function Lr(io){ke=io,xr()}s(Lr,"setOnlineState");function Kn(){we=1,xr()}s(Kn,"_setOnline");function On(){we=2,xr()}s(On,"_setOffline");function Oi(){var io=_e();if(io&&W){if(YL(io,it),P){var jc=P.body||P;J(jc.ononline)||YL(jc,it)}W=!1}}s(Oi,"_unload");function Lo(io){return de.push(io),{rm:s(function(){var jc=de.indexOf(io);if(jc>-1)return de.splice(jc,1)},"rm")}}return s(Lo,"addListener"),{isOnline:Fn,isListening:s(function(){return W},"isListening"),unload:Oi,addListener:Lo,setOnlineState:Lr}}s($$,"createOfflineListener");var ide="AppInsightsPropertiesPlugin",KL="AppInsightsChannelPlugin",Xb="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Xb,t.BreezeChannelIdentifier=KL,t.ConfigurationManager=tde,t.ConnectionStringParser=Y5,t.ContextTagKeys=jy,t.CtxTagKeys=nde,t.DEFAULT_BREEZE_ENDPOINT=wL,t.DEFAULT_BREEZE_PATH=t_,t.Data=ede,t.DisabledPropertyName=U5,t.DistributedTracingModes=Fue,t.Envelope=K5,t.Event=Hue,t.EventPersistence=s_,t.Exception=Rm,t.Extensions=rde,t.HttpMethod=p$,t.Metric=Kue,t.PageView=Zue,t.PageViewPerformance=m_,t.ProcessLegacy=q5,t.PropertiesPluginIdentifier=ide,t.RemoteDependencyData=Yb,t.RequestHeaders=m$,t.SampleRate=f$,t.SeverityLevel=n4,t.TelemetryItemCreator=zL,t.ThrottleMgr=que,t.Trace=GL,t.correlationIdCanIncludeCorrelationHeader=Uy,t.correlationIdGetCorrelationContext=x$,t.correlationIdGetCorrelationContextValue=E$,t.correlationIdGetPrefix=FL,t.correlationIdSetPrefix=LL,t.createDistributedTraceContextFromTrace=OL,t.createDomEvent=H$,t.createOfflineListener=$$,t.createTelemetryItem=VL,t.createTraceParent=Ib,t.dataSanitizeException=BL,t.dataSanitizeId=Fb,t.dataSanitizeInput=NL,t.dataSanitizeKey=DL,t.dataSanitizeKeyAndAddUniqueness=PL,t.dataSanitizeMeasurements=Kf,t.dataSanitizeMessage=G5,t.dataSanitizeProperties=Fg,t.dataSanitizeString=Tl,t.dataSanitizeUrl=Sm,t.dateTimeUtilsDuration=Lue,t.dateTimeUtilsNow=Mue,t.dsPadNumber=h$,t.findAllScripts=EL,t.findW3cTraceParent=xL,t.formatTraceParent=yv,t.getExtensionByName=Xue,t.isBeaconApiSupported=Py,t.isCrossOriginError=$y,t.isInternalApplicationInsightsEndpoint=v$,t.isSampledFlag=M5,t.isValidSpanId=wb,t.isValidTraceId=Tb,t.isValidTraceParent=Sb,t.msToTimeSpan=jL,t.parseConnectionString=z5,t.parseTraceParent=zf,t.strNotSpecified=Tm,t.stringToBoolOrDefault=Jue,t.urlGetAbsoluteUrl=Bue,t.urlGetCompleteUrl=A$,t.urlGetPathName=Nue,t.urlParseFullHost=Og,t.urlParseHost=y$,t.urlParseUrl=Ob,t.utlCanUseLocalStorage=V5,t.utlCanUseSessionStorage=Qg,t.utlDisableStorage=a_,t.utlEnableStorage=Oue,t.utlGetLocalStorage=T$,t.utlGetSessionStorage=S$,t.utlGetSessionStorageKeys=Wb,t.utlRemoveSessionStorage=_$,t.utlRemoveStorage=Jf,t.utlSetLocalStorage=w$,t.utlSetSessionStorage=Que,t.utlSetStoragePrefix=c_})});var F6e=H((zG,L6e)=>{d();(function(t,e){typeof zG=="object"&&typeof L6e<"u"?e(zG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(zG,function(t){"use strict";function e(v,I){return v||I}s(e,"_pureAssign");function r(v,I){return v[I]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),S=r(b,l),R=e(String),B=r(R,l),L=e(Math),O=e(Array),K=r(O,l),V=r(K,"slice");function z(v,I){try{return{v:v.apply(this,I)}}catch(T){return{e:T}}}s(z,"safe");function Q(v,I){var T=z(v);return T.e?I:T.v}s(Q,"safeGet");var U;function Z(v){return function(I){return typeof I===v}}s(Z,"_createIs");function J(v){var I="[object "+v+"]";return function(T){return!!(T&&j(T)===I)}}s(J,"_createObjIs");function j(v){return S[E].call(v)}s(j,"objToString");function $(v){return typeof v===f||v===f}s($,"isUndefined");function X(v){return!te(v)}s(X,"isStrictUndefined");function ie(v){return v===i||$(v)}s(ie,"isNullOrUndefined");function ae(v){return v===i||!te(v)}s(ae,"isStrictNullOrUndefined");function te(v){return!!v||v!==n}s(te,"isDefined");function pe(v){return!U&&(U=["string","number","boolean",f,"symbol","bigint"]),v!==c&&U.indexOf(v)!==-1}s(pe,"isPrimitiveType");var Ae=Z("string"),Oe=Z(a);function Te(v){return!v&&ie(v)?!1:!!v&&typeof v===c}s(Te,"isObject");var Je=r(O,"isArray"),Fe=J("Date"),lt=Z("number"),_t=Z("boolean"),xt=J("Error");function ht(v){return!!(v&&v.then&&Oe(v.then))}s(ht,"isPromiseLike");function ue(v){return!(!v||Q(function(){return!(v&&0+v)},!v))}s(ue,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(v,I){return!!v&&S.hasOwnProperty[y](v,I)}s(ye,"objHasOwnProperty");var $e=e(r(b,"hasOwn"),se);function se(v,I){return ye(v,I)||!!Ue(v,I)}s(se,"polyObjHasOwn");function le(v,I,T){if(v&&Te(v)){for(var k in v)if($e(v,k)&&I[y](T||v,k,v[k])===-1)break}}s(le,"objForEachKey");var qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Be(v){var I={};if(I[qe.c]=!0,I[qe.e]=!0,v.l){I.get=function(){return v.l.v};var T=Ue(v.l,"v");T&&T.set&&(I.set=function(k){v.l.v=k})}return le(v,function(k,M){I[qe[k]]=X(M)?I[qe[k]]:M}),I}s(Be,"_createProp");var Ee=r(b,"defineProperty");function je(v,I,T){return Ee(v,I,Be(T))}s(je,"objDefine");function tt(v,I,T,k,M){var q={};return le(v,function(G,ce){pt(q,G,I?ce:G),pt(q,ce,T?ce:G)}),k?k(q):q}s(tt,"_createKeyValueMap");function pt(v,I,T,k){Ee(v,I,{value:T,enumerable:!0,writable:!1})}s(pt,"_assignMapValue");var Ft=e(R),Jt="[object Error]";function Qt(v,I){var T=o,k=S[E][y](v);k===Jt&&(v={stack:Ft(v.stack),message:Ft(v.message),name:Ft(v.name)});try{T=JSON.stringify(v,i,I?typeof I=="number"?I:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ft(v)}catch(M){T=" - "+Qt(M,I)}return k+": "+T}s(Qt,"dumpObj");function Vr(v){throw new Error(v)}s(Vr,"throwError");function Pr(v){throw new TypeError(v)}s(Pr,"throwTypeError");var ln=r(b,"freeze");function ve(v){return v}s(ve,"_doNothing");function Ge(v){return v[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Tt=r(b,"keys");function or(v){return ln&&le(v,function(I,T){(Je(T)||Te(T))&&or(T)}),Zt(v)}s(or,"objDeepFreeze");var Zt=e(ln,ve),Ir=e(r(b,"getPrototypeOf"),Ge);function ur(v){return tt(v,1,0,Zt)}s(ur,"createEnum");function rr(v){return tt(v,0,0,Zt)}s(rr,"createEnumKeyMap");function lr(v){var I={};return le(v,function(T,k){pt(I,T,k[1]),pt(I,k[0],k[1])}),Zt(I)}s(lr,"createSimpleMap");function nr(v){return lr(v)}s(nr,"createTypeMap");var Nr=rr({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),zr="__tsUtils$gblCfg",sn;function yn(){var v;return typeof globalThis!==f&&(v=globalThis),!v&&typeof self!==f&&(v=self),!v&&typeof window!==f&&(v=window),!v&&typeof global!==f&&(v=global),v}s(yn,"_getGlobalValue");function ri(){if(!sn){var v=z(yn).v||{};sn=v[zr]=v[zr]||{}}return sn}s(ri,"_getGlobalConfig");var _n=Zn;function Zn(v,I,T){var k=I?I[v]:i;return function(M){var q=(M?M[v]:i)||k;if(q||T){var G=arguments;return(q||T).apply(M,q?V[y](G,1):G)}Pr('"'+Ft(v)+'" not defined for '+Qt(M))}}s(Zn,"_unwrapFunctionWithPoly");function an(v){return function(I){return I[v]}}s(an,"_unwrapProp");var Yn=r(L,"min"),Pe=r(L,"max"),Y=_n("slice",B),Ce=_n("substring",B),Ie=Zn("substr",B,F);function F(v,I,T){return ie(v)&&Pr("Invalid "+Qt(v)),T<0?o:(I=I||0,I<0&&(I=Pe(I+v[g],0)),$(T)?Y(v,I):Y(v,I,I+T))}s(F,"polyStrSubstr");function D(v,I){return Ce(v,0,I)}s(D,"strLeft");var ee="_urid",ge;function _e(){if(!ge){var v=ri();ge=v.gblSym=v.gblSym||{k:{},s:{}}}return ge}s(_e,"_globalSymbolRegistry");var ut;function St(v){var I={description:Ft(v),toString:s(function(){return m+"("+v+")"},"toString")};return I[h]=!0,I}s(St,"polyNewSymbol");function Yt(v){var I=_e();if(!$e(I.k,v)){var T=St(v),k=Tt(I.s).length;T[ee]=function(){return k+"_"+T[E]()},I.k[v]=T,I.s[T[ee]()]=Ft(v)}return I.k[v]}s(Yt,"polySymbolFor");function er(v){!ut&&(ut={});var I,T=Nr[v];return T&&(I=ut[T]=ut[T]||St(m+"."+T)),I}s(er,"polyGetKnownSymbol");var Kt;function bt(){Kt=ri()}s(bt,"_initTestHooks");function yr(v){var I={};return!Kt&&bt(),I.b=Kt.lzy,Ee(I,"v",{configurable:!0,get:s(function(){var T=v();return Kt.lzy||Ee(I,"v",{value:T}),I.b=Kt.lzy,T},"get")}),I}s(yr,"getLazy");function li(v){return Ee({toJSON:s(function(){return v},"toJSON")},"v",{value:v})}s(li,"createCachedValue");var ro="window",Tn;function Ao(v,I){var T;return function(){return!Kt&&bt(),(!T||Kt.lzy)&&(T=li(z(v,I).v)),T.v}}s(Ao,"_getGlobalInstFn");function vi(v){return!Kt&&bt(),(!Tn||v===!1||Kt.lzy)&&(Tn=li(z(yn).v||i)),Tn.v}s(vi,"getGlobal");function Xo(v,I){var T;if(!Tn||I===!1?T=vi(I):T=Tn.v,T&&T[v])return T[v];if(v===ro)try{return window}catch{}return i}s(Xo,"getInst");function ha(){return!!Cc()}s(ha,"hasDocument");var Cc=Ao(Xo,["document"]);function Mo(){return!!Ws()}s(Mo,"hasWindow");var Ws=Ao(Xo,[ro]);function fd(){return!!vc()}s(fd,"hasNavigator");var vc=Ao(Xo,["navigator"]),Eg=Ao(function(){return!!z(function(){return process&&(process.versions||{}).node}).v}),bl,bg;function Ig(){return bl=li(z(Xo,[m]).v),bl}s(Ig,"_initSymbol");function YE(v){var I=(Kt.lzy?0:bl)||Ig();return I.v?I.v[v]:n}s(YE,"_getSymbolKey");function Ba(){return!!wu()}s(Ba,"hasSymbol");function wu(){return!Kt&&bt(),((Kt.lzy?0:bl)||Ig()).v}s(wu,"getSymbol");function Su(v,I){var T=Nr[v];!Kt&&bt();var k=(Kt.lzy?0:bl)||Ig();return k.v?k.v[T||v]:I?n:er(v)}s(Su,"getKnownSymbol");function pd(v,I){!Kt&&bt();var T=(Kt.lzy?0:bl)||Ig();return T.v?T.v(v):I?i:St(v)}s(pd,"newSymbol");function Tg(v){return!Kt&&bt(),bg=(Kt.lzy?0:bg)||li(z(YE,["for"]).v),(bg.v||Yt)(v)}s(Tg,"symbolFor");function $l(v){return!!v&&Oe(v.next)}s($l,"isIterator");function KE(v){return!ae(v)&&Oe(v[Su(3)])}s(KE,"isIterable");var iv;function JE(v,I,T){if(v&&($l(v)||(!iv&&(iv=li(Su(3))),v=v[iv.v]?v[iv.v]():i),$l(v))){var k=n,M=n;try{for(var q=0;!(M=v.next()).done&&I[y](T||v,M.value,q,v)!==-1;)q++}catch(G){k={e:G},v.throw&&(M=i,v.throw(k))}finally{try{M&&!M.done&&v.return&&v.return(M)}finally{if(k)throw k.e}}}}s(JE,"iterForOf");function Hf(v,I,T){return v.apply(I,T)}s(Hf,"fnApply");function $f(v,I){return!$(I)&&v&&(Je(I)?Hf(v.push,v,I):$l(I)||KE(I)?JE(I,function(T){v.push(T)}):v.push(I)),v}s($f,"arrAppend");function Yr(v,I,T){if(v)for(var k=v[g]>>>0,M=0;M<k&&!(M in v&&I[y](T||v,v[M],M,v)===-1);M++);}s(Yr,"arrForEach");var xc=_n("indexOf",K),wg=_n("map",K);function Sg(v,I,T){return((v?v.slice:i)||V).apply(v,V[y](arguments,1))}s(Sg,"arrSlice");var XM=_n("reduce",K),Wc=e(r(b,"create"),Ey);function Ey(v){if(!v)return{};var I=typeof v;I!==c&&I!==a&&Pr("Prototype must be an Object or function: "+Qt(v));function T(){}return s(T,"tempFunc"),T[l]=v,new T}s(Ey,"polyObjCreate");var ov;function ym(v,I){var T=b.setPrototypeOf||function(k,M){var q;!ov&&(ov=li((q={},q[u]=[],q instanceof Array))),ov.v?k[u]=M:le(M,function(G,ce){return k[G]=ce})};return T(v,I)}s(ym,"objSetPrototypeOf");function by(v,I,T){z(je,[I,A,{v,c:!0,e:!1}]),I=ym(I,T);function k(){this[p]=I,z(je,[this,A,{v,c:!0,e:!1}])}return s(k,"__"),I[l]=T===i?Wc(T):(k[l]=T[l],new k),I}s(by,"_createCustomError");function XE(v,I){I&&(v[A]=I)}s(XE,"_setName");function Es(v,I,T){var k=T||Error,M=k[l][A],q=Error.captureStackTrace;return by(v,function(){var G=this,ce=arguments;try{z(XE,[k,v]);var fe=Hf(k,G,V[y](ce))||G;if(fe!==G){var xe=Ir(G);xe!==Ir(fe)&&ym(fe,xe)}return q&&q(fe,G[p]),I&&I(fe,ce),fe}finally{z(XE,[k,M])}},k)}s(Es,"createCustomError");function md(){return(Date.now||Iy)()}s(md,"utcNow");function Iy(){return new Date().getTime()}s(Iy,"polyUtcNow");function s5(v){return s(function(T){return ie(T)&&Pr("strTrim called ["+Qt(T)+"]"),T&&T.replace&&(T=T.replace(v,o)),T},"_doTrim")}s(s5,"_createTrimFn");var ZM=s5(/^\s+|(?=\s)\s+$/g),no=Zn("trim",B,ZM),Ty=r(L,"floor"),_g,a5,ZE;function hd(v){if(!v||typeof v!==c)return!1;ZE||(ZE=Mo()?Ws():!0);var I=!1;if(v!==ZE){a5||(_g=Function[l][E],a5=_g[y](b));try{var T=Ir(v);I=!T,I||(ye(T,p)&&(T=T[p]),I=!!(T&&typeof T===a&&_g[y](T)===a5))}catch{}}return I}s(hd,"isPlainObject");function eL(v){return v.value&&c5(v),!0}s(eL,"_defaultDeepCopyHandler");var tL=[eb,c5,WH,wy];function rL(v,I,T,k){var M;return Yr(v,function(q){if(q.k===I)return M=q,-1}),M||(M={k:I,v:I},v.push(M),k(M)),M.v}s(rL,"_getSetVisited");function sv(v,I,T,k){var M=T.handler,q=T.path?k?T.path.concat(k):T.path:[],G={handler:T.handler,src:T.src,path:q},ce=typeof I,fe=!1,xe=I===i;xe||(I&&ce===c?fe=hd(I):xe=pe(ce));var Re={type:ce,isPrim:xe,isPlain:fe,value:I,result:I,path:q,origin:T.src,copy:s(function(Qe,et){return sv(v,Qe,et?G:T,et)},"copy"),copyTo:s(function(Qe,et){return nL(v,Qe,et,G)},"copyTo")};return Re.isPrim?M&&M[y](T,Re)?Re.result:I:rL(v,I,q,function(Qe){je(Re,"result",{g:s(function(){return Qe.v},"g"),s:s(function(Ye){Qe.v=Ye},"s")});for(var et=0,He=M;!(He||(et<tL.length?tL[et++]:eL))[y](T,Re);)He=i})}s(sv,"_deepCopy");function nL(v,I,T,k){if(!ie(T))for(var M in T)I[M]=sv(v,T[M],k,M);return I}s(nL,"_copyProps");function $H(v,I,T){var k={handler:T,src:I,path:[]};return nL([],v,I,k)}s($H,"objCopyProps");function iL(v,I){var T={handler:I,src:v};return sv([],v,T)}s(iL,"objDeepCopy");function eb(v){var I=v.value;if(Je(I)){var T=v.result=[];return T.length=I.length,v.copyTo(T,I),!0}return!1}s(eb,"arrayDeepCopyHandler");function wy(v){var I=v.value;return Fe(I)?(v.result=new Date(I.getTime()),!0):!1}s(wy,"dateDeepCopyHandler");function WH(v){return v.type===a}s(WH,"functionDeepCopyHandler");function c5(v){var I=v.value;if(I&&v.isPlain){var T=v.result={};return v.copyTo(T,I),!0}return!1}s(c5,"plainObjDeepCopyHandler");function oL(v,I){return Yr(I,function(T){$H(v,T)}),v}s(oL,"_doExtend");function l5(v,I,T,k,M,q,G){return oL(iL(v)||{},V[y](arguments))}s(l5,"deepExtend");var mue=an(g),hue=r(L,"round"),jH=Zn("endsWith",B,gue);function gue(v,I,T){Ae(v)||Pr("'"+Qt(v)+"' is not a string");var k=Ae(I)?I:Ft(I),M=!$(T)&&T<v[g]?T:v[g];return Ce(v,M-k[g],M)===k}s(gue,"polyStrEndsWith");var Rg=_n("indexOf",B),u5="ref",sL="unref",d5="hasRef",Aue="enabled";function f5(v,I,T){var k=!0,M=v?I(i):i,q;function G(){return k=!1,M&&M[sL]&&M[sL](),q}s(G,"_unref");function ce(){M&&T(M),M=i}s(ce,"_cancel");function fe(){return M=I(M),k||G(),q}s(fe,"_refresh");function xe(Re){!Re&&M&&ce(),Re&&!M&&fe()}return s(xe,"_setEnabled"),q={cancel:ce,refresh:fe},q[d5]=function(){return M&&M[d5]?M[d5]():k},q[u5]=function(){return k=!0,M&&M[u5]&&M[u5](),q},q[sL]=G,q=Ee(q,Aue,{get:s(function(){return!!M},"get"),set:xe}),{h:q,dn:s(function(){M=i},"dn")}}s(f5,"_createTimerHandler");function p5(v,I,T){var k=Je(I),M=k?I.length:0,q=(M>0?I[0]:k?n:I)||setTimeout,G=(M>1?I[1]:n)||clearTimeout,ce=T[0];T[0]=function(){fe.dn(),Hf(ce,n,V[y](arguments))};var fe=f5(v,function(xe){if(xe){if(xe.refresh)return xe.refresh(),xe;Hf(G,n,[xe])}return Hf(q,n,T)},function(xe){Hf(G,n,[xe])});return fe.h}s(p5,"_createTimeoutWith");function Sy(v,I){return p5(!0,n,V[y](arguments))}s(Sy,"scheduleTimeout");function m5(v,I){return p5(!1,n,V[y](arguments))}s(m5,"createTimeout");var av,Wf="constructor",jf="prototype",cv="function",tb="_dynInstFuncs",_y="_isDynProxy",rb="_dynClass",aL="_dynCls$",lv="_dynInstChk",nb=lv,cL="_dfOpts",h5="_unknown_",ib="__proto__",$S="_dyn"+ib,g5="__dynProto$Gbl",ob="_dynInstProto",sb="useBaseInst",WS="setInstFuncs",uv=Object,ab=uv.getPrototypeOf,lL=uv.getOwnPropertyNames,A5=vi(),cb=A5[g5]||(A5[g5]={o:(av={},av[WS]=!0,av[sb]=!0,av),n:1e3});function lb(v){return v&&(v===uv[jf]||v===Array[jf])}s(lb,"_isObjectOrArrayPrototype");function kg(v){return lb(v)||v===Function[jf]}s(kg,"_isObjectArrayOrFunctionPrototype");function Cm(v){var I;if(v){if(ab)return ab(v);var T=v[ib]||v[jf]||(v[Wf]?v[Wf][jf]:null);I=v[$S]||T,ye(v,$S)||(delete v[ob],I=v[$S]=v[ob]||v[$S],v[ob]=T)}return I}s(Cm,"_getObjProto");function ub(v,I){var T=[];if(lL)T=lL(v);else for(var k in v)typeof k=="string"&&ye(v,k)&&T.push(k);if(T&&T.length>0)for(var M=0;M<T.length;M++)I(T[M])}s(ub,"_forEachProp");function db(v,I,T){return I!==Wf&&typeof v[I]===cv&&(T||ye(v,I))&&I!==ib&&I!==jf}s(db,"_isDynamicCandidate");function y5(v){Pr("DynamicProto: "+v)}s(y5,"_throwTypeError");function uL(v){var I=Wc(null);return ub(v,function(T){!I[T]&&db(v,T,!1)&&(I[T]=v[T])}),I}s(uL,"_getInstanceFuncs");function dL(v,I){for(var T=v.length-1;T>=0;T--)if(v[T]===I)return!0;return!1}s(dL,"_hasVisited");function yue(v,I,T,k){function M(fe,xe,Re){var Qe=xe[Re];if(Qe[_y]&&k){var et=fe[tb]||{};et[nb]!==!1&&(Qe=(et[xe[rb]]||{})[Re]||Qe)}return function(){return Qe.apply(fe,arguments)}}s(M,"_instFuncProxy");var q=Wc(null);ub(T,function(fe){q[fe]=M(I,T,fe)});for(var G=Cm(v),ce=[];G&&!kg(G)&&!dL(ce,G);)ub(G,function(fe){!q[fe]&&db(G,fe,!ab)&&(q[fe]=M(I,G,fe))}),ce.push(G),G=Cm(G);return q}s(yue,"_getBaseFuncs");function Cue(v,I,T,k){var M=null;if(v&&ye(T,rb)){var q=v[tb]||Wc(null);if(M=(q[T[rb]]||Wc(null))[I],M||y5("Missing ["+I+"] "+cv),!M[lv]&&q[nb]!==!1){for(var G=!ye(v,I),ce=Cm(v),fe=[];G&&ce&&!kg(ce)&&!dL(fe,ce);){var xe=ce[I];if(xe){G=xe===k;break}fe.push(ce),ce=Cm(ce)}try{G&&(v[I]=M),M[lv]=1}catch{q[nb]=!1}}}return M}s(Cue,"_getInstFunc");function vue(v,I,T){var k=I[v];return k===T&&(k=Cm(I)[v]),typeof k!==cv&&y5("["+v+"] is not a "+cv),k}s(vue,"_getProtoFunc");function xue(v,I,T,k,M){function q(fe,xe){var Re=s(function(){var Qe=Cue(this,xe,fe,Re)||vue(xe,fe,Re);return Qe.apply(this,arguments)},"dynProtoProxy");return Re[_y]=1,Re}if(s(q,"_createDynamicPrototype"),!lb(v)){var G=T[tb]=T[tb]||Wc(null);if(!lb(G)){var ce=G[I]=G[I]||Wc(null);G[nb]!==!1&&(G[nb]=!!M),lb(ce)||ub(T,function(fe){db(T,fe,!1)&&T[fe]!==k[fe]&&(ce[fe]=T[fe],delete T[fe],(!ye(v,fe)||v[fe]&&!v[fe][_y])&&(v[fe]=q(v,fe)))})}}}s(xue,"_populatePrototype");function fL(v,I){if(ab){for(var T=[],k=Cm(I);k&&!kg(k)&&!dL(T,k);){if(k===v)return!0;T.push(k),k=Cm(k)}return!1}return!0}s(fL,"_checkPrototype");function jS(v,I){return ye(v,jf)?v.name||I||h5:((v||{})[Wf]||{}).name||I||h5}s(jS,"_getObjName");function _u(v,I,T,k){ye(v,jf)||y5("theClass is an invalid class definition.");var M=v[jf];fL(M,I)||y5("["+jS(v)+"] not in hierarchy of ["+jS(I)+"]");var q=null;ye(M,rb)?q=M[rb]:(q=aL+jS(v,"_")+"$"+cb.n,cb.n++,M[rb]=q);var G=_u[cL],ce=!!G[sb];ce&&k&&k[sb]!==void 0&&(ce=!!k[sb]);var fe=uL(I),xe=yue(M,I,fe,ce);T(I,xe);var Re=!!ab&&!!G[WS];Re&&k&&(Re=!!k[WS]),xue(M,q,I,fe,Re!==!1)}s(_u,"dynamicProto"),_u[cL]=cb.o;var Na="function",GH="object",VH="undefined",GS="prototype",pL=Object,mL=pL[GS];(vi()||{}).Symbol,(vi()||{}).Reflect;var C5="hasOwnProperty",zH=s(function(v){for(var I,T=1,k=arguments.length;T<k;T++){I=arguments[T];for(var M in I)mL[C5].call(I,M)&&(v[M]=I[M])}return v},"__objAssignFnImpl"),Pg=ft||zH,Ry=s(function(v,I){return Ry=pL.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var M in k)k[C5](M)&&(T[M]=k[M])},Ry(v,I)},"extendStaticsFn");function VS(v,I){typeof I!==Na&&I!==null&&Pr("Class extends value "+String(I)+" is not a constructor or null"),Ry(v,I);function T(){this.constructor=v}s(T,"__"),v[GS]=I===null?Wc(I):(T[GS]=I[GS],new T)}s(VS,"__extendsFn");function YH(v,I){for(var T=0,k=I.length,M=v.length;T<k;T++,M++)v[M]=I[T];return v}s(YH,"__spreadArrayFn");var v5=ur,Eue=nr,ky=v5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),fb="toLowerCase",ui="length",pb="warnToConsole",dv="throwInternal",Dg="watch",x5="apply",Eo="push",mb="splice",Ec="logger",hb="cancel",zS="initialize",Py="identifier",YS="removeNotificationListener",E5="addNotificationListener",vm="isInitialized",gb="value",Z0="getNotifyMgr",Ab="getPlugin",Dy="name",Wl="processNext",yb="getProcessTelContext",xm="enabled",KH="stopPollingInternalLogs",fv="unload",b5="onComplete",Cb="version",JH="loggingLevelConsole",pv="createNew",Em="teardown",I5="messageId",mv="message",bm="diagLog",T5="_doTeardown",Bg="update",Im="getNext",By="setNextPlugin",w5="userAgent",Ny="split",My="replace",Ru="type",hL="evtName",KS="status",gL="getAllResponseHeaders",AL="isChildEvt",vb="data",Ly="getCtx",ep="setCtx",XH="itemsReceived",Ng="urlString",yL="headers",Mg="timeout",ZH="traceFlags",xb;function CL(v,I){xb||(xb=Es("AggregationError",function(k,M){M[ui]>1&&(k.errors=M[1])}));var T=v||"One or more errors occurred.";throw Yr(I,function(k,M){T+=`
`.concat(M," > ").concat(Qt(k))}),new xb(T,I||[])}s(CL,"throwAggregationError");var hv="Promise",gv="rejected";function Gf(v,I){return e$(v,function(T){return I?I({status:"fulfilled",rejected:!1,value:T}):T},function(T){return I?I({status:gv,rejected:!0,reason:T}):T})}s(Gf,"doAwaitResponse");function e$(v,I,T,k){var M=v;try{if(ht(v))(I||T)&&(M=v.then(I,T));else try{I&&(M=I(v))}catch(q){if(T)M=T(q);else throw q}}finally{k&&bue(M,k)}return M}s(e$,"doAwait");function bue(v,I){var T=v;return I&&(ht(v)?v.finally?T=v.finally(I):T=v.then(function(k){return I(),k},function(k){throw I(),k}):I()),T}s(bue,"doFinally");var t$=["pending","resolving","resolved",gv],r$="dispatchEvent",JS;function n$(v){var I;return v&&v.createEvent&&(I=v.createEvent("Event")),!!I&&I.initEvent}s(n$,"_hasInitEventFn");function S5(v,I,T,k){var M=Cc();!JS&&(JS=li(!!z(n$,[M]).v));var q=JS.v?M.createEvent("Event"):k?new Event(I):{};if(T&&T(q),JS.v&&q.initEvent(I,!1,!0),q&&v[r$])v[r$](q);else{var G=v["on"+I];if(G)G(q);else{var ce=Xo("console");ce&&(ce.error||ce.log)(I,Qt(q))}}}s(S5,"emitEvent");var i$="unhandledRejection",Iue=i$.toLowerCase(),Eb=10,_5;function o$(v){return Oe(v)?v.toString():Qt(v)}s(o$,"dumpFnObj");function s$(v,I,T){var k=Sg(arguments,3),M=0,q=!1,G,ce=[],fe=!1,xe=null,Re;function Qe(sr,_r){try{fe=!0,xe&&xe.cancel(),xe=null;var ni=v(function(Hi,$i){ce.push(function(){try{var Go=M===2?sr:_r,wn=$(Go)?G:Oe(Go)?Go(G):Go;ht(wn)?wn.then(Hi,$i):Go?Hi(wn):M===3?$i(wn):Hi(wn)}catch(tn){$i(tn)}}),q&&gt()},k);return ni}finally{}}s(Qe,"_then");function et(sr){return Qe(void 0,sr)}s(et,"_catch");function He(sr){var _r=sr,ni=sr;return Oe(sr)&&(_r=s(function(Hi){return sr&&sr(),Hi},"thenFinally"),ni=s(function(Hi){throw sr&&sr(),Hi},"catchFinally")),Qe(_r,ni)}s(He,"_finally");function Ye(){return t$[M]}s(Ye,"_strState");function gt(){if(ce.length>0){var sr=ce.slice();ce=[],fe=!0,xe&&xe.cancel(),xe=null,I(sr)}}s(gt,"_processQueue");function st(sr,_r){return function(ni){if(M===_r){if(sr===2&&ht(ni)){M=1,ni.then(st(2,1),st(3,1));return}M=sr,q=!0,G=ni,gt(),!fe&&sr===3&&!xe&&(xe=Sy(wt,Eb))}}}s(st,"_createSettleIfFn");function wt(){if(!fe)if(fe=!0,Eg())process.emit(i$,G,Re);else{var sr=Ws()||vi();!_5&&(_5=li(z(Xo,[hv+"RejectionEvent"]).v)),S5(sr,Iue,function(_r){return je(_r,"promise",{g:s(function(){return Re},"g")}),_r.reason=G,_r},!!_5.v)}}s(wt,"_notifyUnhandledRejection"),Re={then:Qe,catch:et,finally:He},Ee(Re,"state",{get:Ye}),Ba()&&(Re[Su(11)]="IPromise");function $t(){return"IPromise "+Ye()+(q?" - "+o$(G):"")}return s($t,"_toString"),Re.toString=$t,s(function(){Oe(T)||Pr(hv+": executor is not a function - "+o$(T));var _r=st(3,0);try{T.call(Re,st(2,0),_r)}catch(ni){_r(ni)}},"_initialize")(),Re}s(s$,"_createPromise");function Tue(v){return function(I){var T=Sg(arguments,1);return v(function(k,M){try{var q=[],G=1;JE(I,function(ce,fe){ce&&(G++,e$(ce,function(xe){q[fe]=xe,--G===0&&k(q)},M))}),G--,G===0&&k(q)}catch(ce){M(ce)}},T)}}s(Tue,"_createAllPromise");function wue(v){return li(function(I){var T=Sg(arguments,1);return v(function(k,M){var q=[],G=1;function ce(fe,xe){G++,Gf(fe,function(Re){Re.rejected?q[xe]={status:gv,reason:Re.reason}:q[xe]={status:"fulfilled",value:Re.value},--G===0&&k(q)})}s(ce,"processItem");try{Je(I)?Yr(I,ce):KE(I)?JE(I,ce):Pr("Input is not an iterable"),G--,G===0&&k(q)}catch(fe){M(fe)}},T)})}s(wue,"_createAllSettledPromise");function a$(v){Yr(v,function(I){try{I()}catch{}})}s(a$,"syncItemProcessor");function c$(v){var I=lt(v)?v:0;return function(T){Sy(function(){a$(T)},I)}}s(c$,"timeoutItemProcessor");function R5(v,I){return s$(R5,c$(I),v,I)}s(R5,"createAsyncPromise");var k5;function Sue(v,I){!k5&&(k5=li(z(Xo,[hv]).v||null));var T=k5.v;if(!T)return R5(v);Oe(v)||Pr(hv+": executor is not a function - "+Qt(v));var k=0;function M(){return t$[k]}s(M,"_strState");var q=new T(function(G,ce){function fe(Re){k=2,G(Re)}s(fe,"_resolve");function xe(Re){k=3,ce(Re)}s(xe,"_reject"),v(fe,xe)});return Ee(q,"state",{get:M}),q}s(Sue,"createNativePromise");var P5;function D5(v){return s$(D5,a$,v)}s(D5,"createSyncPromise");function ef(v,I){return!P5&&(P5=wue(D5)),P5.v(v,I)}s(ef,"createSyncAllSettledPromise");var B5;function bb(v,I){return!B5&&(B5=li(Sue)),B5.v.call(this,v,I)}s(bb,"createPromise");var vL=Tue(bb),Vf=void 0,Fi="",Lg="channels",bc="core",tp="createPerfMgr",N5="disabled",Av="extensionConfig",Ib="extensions",zf="processTelemetry",Tb="priority",wb="eventsSent",Sb="eventsDiscarded",M5="eventsSendRequest",yv="perfEvent",xL="offlineEventsStored",EL="offlineBatchSent",L5="offlineBatchDrop",XS="getPerfMgr",F5="domain",O5="path",l$="Not dynamic - ",bL=/-([a-z])/g,_ue=/([^\w\d_$])/g,Rue=/^(\d+[\w\d_$])/;function Q5(v){return!ie(v)}s(Q5,"isNotNullOrUndefined");function _b(v){var I=v;return I&&Ae(I)&&(I=I[My](bL,function(T,k){return k.toUpperCase()}),I=I[My](_ue,"_"),I=I[My](Rue,function(T,k){return"_"+k})),I}s(_b,"normalizeJsName");function jl(v,I){return v&&I?Rg(v,I)!==-1:!1}s(jl,"strContains");function ZS(v){return v&&v.toISOString()||""}s(ZS,"toISOString");function Il(v){return xt(v)?v[Dy]:Fi}s(Il,"getExceptionName");function Fy(v,I,T,k,M){var q=T;return v&&(q=v[I],q!==T&&(!M||M(q))&&(!k||k(T))&&(q=T,v[I]=q)),q}s(Fy,"setValue");function u$(v,I,T){var k;return v?(k=v[I],!k&&ie(k)&&(k=$(T)?{}:T,v[I]=k)):k=$(T)?{}:T,k}s(u$,"getSetValue");function kue(v,I){var T=null,k=null;return Oe(v)?T=v:k=v,function(){var M=arguments;if(T&&(k=T()),k)return k[I][x5](k,M)}}s(kue,"_createProxyFunction");function e_(v,I,T,k,M){v&&I&&T&&(M!==!1||$(v[I]))&&(v[I]=kue(T,k))}s(e_,"proxyFunctionAs");function IL(v,I,T,k){return v&&I&&Te(v)&&Je(T)&&Yr(T,function(M){Ae(M)&&e_(v,M,I,M,k)}),v}s(IL,"proxyFunctions");function Pue(v){return function(){function I(){var T=this;v&&le(v,function(k,M){T[k]=M})}return s(I,"class_1"),I}()}s(Pue,"createClassFromInterface");function TL(v){return v&&ft&&(v=pL(ft({},v))),v}s(TL,"optimizeObject");function d$(v,I,T,k,M,q){var G=arguments,ce=G[0]||{},fe=G[ui],xe=!1,Re=1;for(fe>0&&_t(ce)&&(xe=ce,ce=G[Re]||{},Re++),Te(ce)||(ce={});Re<fe;Re++){var Qe=G[Re],et=Je(Qe),He=Te(Qe);for(var Ye in Qe){var gt=et&&Ye in Qe||He&&$e(Qe,Ye);if(gt){var st=Qe[Ye],wt=void 0;if(xe&&st&&((wt=Je(st))||hd(st))){var $t=ce[Ye];wt?Je($t)||($t=[]):hd($t)||($t={}),st=d$(xe,$t,st)}st!==void 0&&(ce[Ye]=st)}}}return ce}s(d$,"objExtend");function U5(v){try{return v.responseText}catch{}return null}s(U5,"getResponseText");function f$(v,I){return v?"XDomainRequest,Response:"+U5(v)||"":I}s(f$,"formatErrorMessageXdr");function q5(v,I){return v?"XMLHttpRequest,Status:"+v[KS]+",Response:"+U5(v)||v.response||"":I}s(q5,"formatErrorMessageXhr");function p$(v,I){return I&&(lt(I)?v=[I].concat(v):Je(I)&&(v=I.concat(v))),v}s(p$,"prependTransports");var wL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",t_="withCredentials",Tm="timeout";function SL(v,I,T,k,M,q){k===void 0&&(k=!1),M===void 0&&(M=!1);function G(fe,xe,Re){try{fe[xe]=Re}catch{}}s(G,"_wrapSetXhrProp");var ce=new XMLHttpRequest;return k&&G(ce,wL,k),T&&G(ce,t_,T),ce.open(v,I,!M),T&&G(ce,t_,T),!M&&q&&G(ce,Tm,q),ce}s(SL,"openXhr");function m$(v){var I={};if(Ae(v)){var T=no(v)[Ny](/[\r\n]+/);Yr(T,function(k){if(k){var M=k.indexOf(": ");if(M!==-1){var q=no(k.substring(0,M))[fb](),G=no(k.substring(M+1));I[q]=G}else I[no(k)]=1}})}return I}s(m$,"convertAllHeadersToMap");function Oy(v,I,T){if(!v[T]&&I&&I.getResponseHeader){var k=I.getResponseHeader(T);k&&(v[T]=no(k))}return v}s(Oy,"_appendHeader");var Ln="kill-duration",Rb="kill-duration-seconds",Cv="time-delta-millis";function vv(v,I){var T={};return v[gL]?T=m$(v[gL]()):I&&(T=Oy(T,v,Cv),T=Oy(T,v,Ln),T=Oy(T,v,Rb)),T}s(vv,"_getAllResponseHeaders");var _L="documentMode",r_="location",kb="console",H5="JSON",RL="crypto",$5="msCrypto",Pb="msie",xv="trident/",kL="XMLHttpRequest",Yf=null,Db=null,wm=!1,gd=null,Bb=null;function n_(v,I){var T=!1;if(v){try{if(T=I in v,!T){var k=v[GS];k&&(T=I in k)}}catch{}if(!T)try{var M=new v;T=!$(M[I])}catch{}}return T}s(n_,"_hasProperty");function Nb(v){if(v&&wm){var I=Xo("__mockLocation");if(I)return I}return typeof location===GH&&location?location:Xo(r_)}s(Nb,"getLocation");function i_(){return typeof console!==VH?console:Xo(kb)}s(i_,"getConsole");function Mb(){return!!(typeof JSON===GH&&JSON||Xo(H5)!==null)}s(Mb,"hasJSON");function tf(){return Mb()?JSON||Xo(H5):null}s(tf,"getJSON");function W5(){return Xo(RL)}s(W5,"getCrypto");function j5(){return Xo($5)}s(j5,"getMsCrypto");function rp(){var v=vc();if(v&&(v[w5]!==Db||Yf===null)){Db=v[w5];var I=(Db||Fi)[fb]();Yf=jl(I,Pb)||jl(I,xv)}return Yf}s(rp,"isIE");function Lb(v){if(v===void 0&&(v=null),!v){var I=vc()||{};v=I?(I.userAgent||Fi)[fb]():Fi}var T=(v||Fi)[fb]();if(jl(T,Pb)){var k=Cc()||{};return Pe(parseInt(T[Ny](Pb)[1]),k[_L]||0)}else if(jl(T,xv)){var M=parseInt(T[Ny](xv)[1]);if(M)return M+4}return null}s(Lb,"getIEVersion");function Qy(v){return(Bb===null||v===!1)&&(Bb=fd()&&!!vc().sendBeacon),Bb}s(Qy,"isBeaconsSupported");function o_(v){var I=!1;try{I=!!Xo("fetch");var T=Xo("Request");I&&v&&T&&(I=n_(T,"keepalive"))}catch{}return I}s(o_,"isFetchSupported");function PL(){return gd===null&&(gd=typeof XDomainRequest!==VH,gd&&DL()&&(gd=gd&&!n_(Xo(kL),"withCredentials"))),gd}s(PL,"useXDomainRequest");function DL(){var v=!1;try{var I=Xo(kL);v=!!I}catch{}return v}s(DL,"isXhrSupported");var Tl=4294967296,Sm=4294967295,G5=123456789,BL=987654321,Fg=!1,Kf=G5,Fb=BL;function NL(v){v<0&&(v>>>=0),Kf=G5+v&Sm,Fb=BL-v&Sm,Fg=!0}s(NL,"_mwcSeed");function h$(){try{var v=md()&2147483647;NL((Math.random()*Tl^v)+v)}catch{}}s(h$,"_autoSeedMwc");function ML(v){var I=0,T=W5()||j5();return T&&T.getRandomValues&&(I=T.getRandomValues(new Uint32Array(1))[0]&Sm),I===0&&rp()&&(Fg||h$(),I=g$()&Sm),I===0&&(I=Ty(Tl*Math.random()|0)),v||(I>>>=0),I}s(ML,"random32");function g$(v){Fb=36969*(Fb&65535)+(Fb>>16)&Sm,Kf=18e3*(Kf&65535)+(Kf>>16)&Sm;var I=(Fb<<16)+(Kf&65535)>>>0&Sm|0;return v||(I>>>=0),I}s(g$,"mwcRandom32");function Due(v){v===void 0&&(v=22);for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=ML()>>>0,k=0,M=Fi;M[ui]<v;)k++,M+=I.charAt(T&63),T>>>=6,k===5&&(T=(ML()<<2&4294967295|T&3)>>>0,k=0);return M}s(Due,"newId");var Ob="3.3.6",Bue="."+Due(6),Nue=0;function A$(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}s(A$,"_canAcceptData");function y$(v,I){var T=I[v.id];if(!T){T={};try{A$(I)&&je(I,v.id,{e:!1,v:T})}catch{}}return T}s(y$,"_getCache");function Og(v,I){return I===void 0&&(I=!1),_b(v+Nue+++(I?"."+Ob:Fi)+Bue)}s(Og,"createUniqueNamespace");function C$(v){var I={id:Og("_aiData-"+(v||Fi)+"."+Ob),accept:s(function(T){return A$(T)},"accept"),get:s(function(T,k,M,q){var G=T[I.id];return G?G[_b(k)]:(q&&(G=y$(I,T),G[_b(k)]=M),M)},"get"),kill:s(function(T,k){if(T&&T[k])try{delete T[k]}catch{}},"kill")};return I}s(C$,"createElmNodeData");function Qb(v){return v&&Te(v)&&(v.isVal||v.fb||$e(v,"v")||$e(v,"mrg")||$e(v,"ref")||v.set)}s(Qb,"_isConfigDefaults");function v$(v,I,T){var k,M=T.dfVal||te;if(I&&T.fb){var q=T.fb;Je(q)||(q=[q]);for(var G=0;G<q[ui];G++){var ce=q[G],fe=I[ce];if(M(fe)?k=fe:v&&(fe=v.cfg[ce],M(fe)&&(k=fe),v.set(v.cfg,Ft(ce),fe)),M(k))break}}return!M(k)&&M(T.v)&&(k=T.v),k}s(v$,"_getDefault");function LL(v,I,T){var k=T;if(T&&Qb(T)&&(k=v$(v,I,T)),k){Qb(k)&&(k=LL(v,I,k));var M;Je(k)?(M=[],M[ui]=k[ui]):hd(k)&&(M={}),M&&(le(k,function(q,G){G&&Qb(G)&&(G=LL(v,I,G)),M[q]=G}),k=M)}return k}s(LL,"_resolveDefaultValue");function FL(v,I,T,k){var M,q,G,ce=k,fe,xe,Re,Qe;Qb(ce)?(M=ce.isVal,q=ce.set,Re=ce.rdOnly,Qe=ce.blkVal,fe=ce.mrg,xe=ce.ref,!xe&&$(xe)&&(xe=!!fe),G=v$(v,I,ce)):G=k,Qe&&v.blkVal(I,T);var et,He=!0,Ye=I[T];(Ye||!ie(Ye))&&(et=Ye,He=!1,M&&et!==G&&!M(et)&&(et=G,He=!0),q&&(et=q(et,G,I),He=et===G)),He?G?et=LL(v,I,G):et=G:(hd(et)||Je(G))&&fe&&G&&(hd(G)||Je(G))&&le(G,function(gt,st){FL(v,et,gt,st)}),v.set(I,T,et),xe&&v.ref(I,T),Re&&v.rdOnly(I,T)}s(FL,"_applyDefaultValue");var Uy=Tg("[[ai_dynCfg_1]]"),x$=Tg("[[ai_blkDynCfg_1]]"),E$=Tg("[[ai_frcDynCfg_1]]");function b$(v){if(v){var I;if(Je(v)?(I=[],I[ui]=v[ui]):hd(v)&&(I={}),I)return le(v,function(T,k){I[T]=b$(k)}),I}return v}s(b$,"_cfgDeepCopy");function Mue(v){if(v){var I=v[Uy]||v;if(I.cfg&&(I.cfg===v||I.cfg[Uy]===I))return I}return null}s(Mue,"getDynamicConfigHandler");function Lue(v){if(v&&(hd(v)||Je(v)))try{v[x$]=!0}catch{}return v}s(Lue,"blockDynamicConversion");function OL(v,I,T){var k=!1;return T&&!v[I.blkVal]&&(k=T[E$],!k&&!T[x$]&&(k=hd(T)||Je(T))),k}s(OL,"_canMakeDynamic");function Ub(v){Pr("InvalidAccess:"+v)}s(Ub,"throwInvalidAccess");var Fue=["push","pop","shift","unshift","splice"],s_=s(function(v,I,T,k){v&&v[dv](3,108,"".concat(T," [").concat(I,"] failed - ")+Qt(k))},"_throwDynamicError");function qy(v,I,T){Je(I)&&Yr(Fue,function(k){var M=I[k];I[k]=function(){for(var q=[],G=0;G<arguments.length;G++)q[G]=arguments[G];var ce=M[x5](this,q);return $b(v,I,T,"Patching"),ce}})}s(qy,"_patchArray");function np(v,I){var T=Ue(v,I);return T&&T.get}s(np,"_getOwnPropGetter");function I$(v,I,T,k){var M={n:T,h:[],trk:s(function(xe){xe&&xe.fn&&(xc(M.h,xe)===-1&&M.h[Eo](xe),v.trk(xe,M))},"trk"),clr:s(function(xe){var Re=xc(M.h,xe);Re!==-1&&M.h[mb](Re,1)},"clr")},q=!0,G=!1;function ce(){q&&(G=G||OL(ce,v,k),k&&!k[Uy]&&G&&(k=$b(v,k,T,"Converting")),q=!1);var xe=v.act;return xe&&M.trk(xe),k}s(ce,"_getProperty"),ce[v.prop]={chng:s(function(){v.add(M)},"chng")};function fe(xe){if(k!==xe){ce[v.ro]&&!v.upd&&Ub("["+T+"] is read-only:"+Qt(I)),q&&(G=G||OL(ce,v,k),q=!1);var Re=G&&ce[v.rf];if(G)if(Re){le(k,function(et){k[et]=xe?xe[et]:Vf});try{le(xe,function(et,He){qb(v,k,et,He)}),xe=k}catch(et){s_((v.hdlr||{})[Ec],T,"Assigning",et),G=!1}}else k&&k[Uy]&&le(k,function(et){var He=np(k,et);if(He){var Ye=He[v.prop];Ye&&Ye.chng()}});if(xe!==k){var Qe=xe&&OL(ce,v,xe);!Re&&Qe&&(xe=$b(v,xe,T,"Converting")),k=xe,G=Qe}v.add(M)}}s(fe,"_setProperty"),je(I,M.n,{g:ce,s:fe})}s(I$,"_createDynamicProperty");function qb(v,I,T,k){if(I){var M=np(I,T),q=M&&!!M[v.prop];q?I[T]=k:I$(v,I,T,k)}return I}s(qb,"_setDynamicProperty");function Hb(v,I,T,k){if(I){var M=np(I,T),q=M&&!!M[v.prop],G=k&&k[0],ce=k&&k[1],fe=k&&k[2];if(!q){if(fe)try{Lue(I)}catch(xe){s_((v.hdlr||{})[Ec],T,"Blocking",xe)}try{qb(v,I,T,I[T]),M=np(I,T)}catch(xe){s_((v.hdlr||{})[Ec],T,"State",xe)}}G&&(M[v.rf]=G),ce&&(M[v.ro]=ce),fe&&(M[v.blkVal]=!0)}return I}s(Hb,"_setDynamicPropertyState");function $b(v,I,T,k){try{le(I,function(M,q){qb(v,I,M,q)}),I[Uy]||(Ee(I,Uy,{get:s(function(){return v.hdlr},"get")}),qy(v,I,T))}catch(M){s_((v.hdlr||{})[Ec],T,k,M)}return I}s($b,"_makeDynamicObject");var a_="[[ai_",c_="]]";function Oue(v){var I=pd(a_+"get"+v.uid+c_),T=pd(a_+"ro"+v.uid+c_),k=pd(a_+"rf"+v.uid+c_),M=pd(a_+"blkVal"+v.uid+c_),q=pd(a_+"dtl"+v.uid+c_),G=null,ce=null,fe;function xe(He,Ye){var gt=fe.act;try{fe.act=He,He&&He[q]&&(Yr(He[q],function(wt){wt.clr(He)}),He[q]=[]),Ye({cfg:v.cfg,set:v.set.bind(v),setDf:v.setDf.bind(v),ref:v.ref.bind(v),rdOnly:v.rdOnly.bind(v)})}catch(wt){var st=v[Ec];throw st&&st[dv](1,107,Qt(wt)),wt}finally{fe.act=gt||null}}s(xe,"_useHandler");function Re(){if(G){var He=G;G=null,ce&&ce[hb](),ce=null;var Ye=[];if(Yr(He,function(gt){if(gt&&(gt[q]&&(Yr(gt[q],function(st){st.clr(gt)}),gt[q]=null),gt.fn))try{xe(gt,gt.fn)}catch(st){Ye[Eo](st)}}),G)try{Re()}catch(gt){Ye[Eo](gt)}Ye[ui]>0&&CL("Watcher error(s): ",Ye)}}s(Re,"_notifyWatchers");function Qe(He){if(He&&He.h[ui]>0){G||(G=[]),ce||(ce=Sy(function(){ce=null,Re()},0));for(var Ye=0;Ye<He.h[ui];Ye++){var gt=He.h[Ye];gt&&xc(G,gt)===-1&&G[Eo](gt)}}}s(Qe,"_addWatcher");function et(He,Ye){if(He){var gt=He[q]=He[q]||[];xc(gt,Ye)===-1&&gt[Eo](Ye)}}return s(et,"_trackHandler"),fe={prop:I,ro:T,rf:k,blkVal:M,hdlr:v,add:Qe,notify:Re,use:xe,trk:et},fe}s(Oue,"_createState");function V5(v,I){var T={fn:I,rm:s(function(){T.fn=null,v=null,I=null},"rm")};return je(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),v.use(T,I),T}s(V5,"_createAndUseHandler");function T$(v,I,T){var k=Mue(I);if(k)return k;var M=Og("dyncfg",!0),q=I&&T!==!1?I:b$(I),G;function ce(){G.notify()}s(ce,"_notifyWatchers");function fe(st,wt,$t){try{st=qb(G,st,wt,$t)}catch(sr){s_(v,wt,"Setting value",sr)}return st[wt]}s(fe,"_setValue");function xe(st){return V5(G,st)}s(xe,"_watch");function Re(st,wt){G.use(null,function($t){var sr=G.upd;try{$(wt)||(G.upd=wt),st($t)}finally{G.upd=sr}})}s(Re,"_block");function Qe(st,wt){var $t;return Hb(G,st,wt,($t={},$t[0]=!0,$t))[wt]}s(Qe,"_ref");function et(st,wt){var $t;return Hb(G,st,wt,($t={},$t[1]=!0,$t))[wt]}s(et,"_rdOnly");function He(st,wt){var $t;return Hb(G,st,wt,($t={},$t[2]=!0,$t))[wt]}s(He,"_blkPropValue");function Ye(st,wt){return wt&&le(wt,function($t,sr){FL(gt,st,$t,sr)}),st}s(Ye,"_applyDefaults");var gt={uid:null,cfg:q,logger:v,notify:ce,set:fe,setDf:Ye,watch:xe,ref:Qe,rdOnly:et,blkVal:He,_block:Re};return je(gt,"uid",{c:!1,e:!1,w:!1,v:M}),G=Oue(gt),$b(G,q,"config","Creating"),gt}s(T$,"_createDynamicHandler");function w$(v,I){v?(v[pb](I),v[dv](2,108,I)):Ub(I)}s(w$,"_logInvalidAccess");function Jf(v,I,T,k){var M=T$(T,v||{},k);return I&&M.setDf(M.cfg,I),M}s(Jf,"createDynamicConfig");function Qg(v,I,T){var k=v[Uy]||v;return k.cfg&&(k.cfg===v||k.cfg[Uy]===k)?k[Dg](I):(w$(T,l$+Qt(v)),Jf(v,null,T)[Dg](I))}s(Qg,"onConfigChange");function Wb(v,I){if(v&&v[fv])return v[fv](I)}s(Wb,"runTargetUnload");function S$(v,I,T){var k;return T||(k=bb(function(M){T=M})),v&&mue(v)>0?Gf(Wb(v[0],I),function(){S$(Sg(v,1),I,T)}):T(),k}s(S$,"doUnloadAll");var Que=500,_$="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Uue(v,I,T){return!v&&ie(v)?I:_t(v)?v:Ft(v)[fb]()==="true"}s(Uue,"_stringToBoolOrDefault");function que(v){return{mrg:!0,v}}s(que,"cfgDfMerge");function QL(v,I,T){return{fb:T,isVal:v,v:I}}s(QL,"cfgDfValidate");function _m(v,I){return{fb:I,set:Uue,v:!!v}}s(_m,"cfgDfBoolean");var z5=[wb,Sb,M5,yv],Y5=null,K5;function Hue(v,I){return function(){var T=arguments,k=R$(I);if(k){var M=k.listener;M&&M[v]&&M[v][x5](M,T)}}}s(Hue,"_listenerProxyFunc");function $ue(){var v=Xo("Microsoft");return v&&(Y5=v.ApplicationInsights),Y5}s($ue,"_getExtensionNamespace");function R$(v){var I=Y5;return!I&&v.disableDbgExt!==!0&&(I=Y5||$ue()),I?I.ChromeDbgExt:null}s(R$,"getDebugExt");function Wue(v){if(!K5){K5={};for(var I=0;I<z5[ui];I++)K5[z5[I]]=Hue(z5[I],v)}return K5}s(Wue,"getDebugListener");var jb,k$="warnToConsole",jue="AI (Internal): ",Gue="AI: ",Vue="AITR_",P$={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Gb=(jb={},jb[0]=null,jb[1]="errorToConsole",jb[2]=k$,jb[3]="debugToConsole",jb);function rf(v){return v?'"'+v[My](/\"/g,Fi)+'"':Fi}s(rf,"_sanitizeDiagnosticText");function l_(v,I){var T=i_();if(T){var k="log";T[v]&&(k=v),Oe(T[k])&&T[k](I)}}s(l_,"_logToConsole");var J5=function(){function v(I,T,k,M){k===void 0&&(k=!1);var q=this;q[I5]=I,q[mv]=(k?Gue:jue)+I;var G=Fi;Mb()&&(G=tf().stringify(M));var ce=(T?" message:"+rf(T):Fi)+(M?" props:"+rf(G):Fi);q[mv]+=ce}return s(v,"_InternalLogMessage"),v.dataType="MessageData",v}();function u_(v,I){return(v||{})[Ec]||new d_(I)}s(u_,"safeGetLogger");var d_=function(){function v(I){this.identifier="DiagnosticLogger",this.queue=[];var T=0,k={},M,q,G,ce,fe;_u(v,this,function(xe){fe=Qe(I||{}),xe.consoleLoggingLevel=function(){return M},xe[dv]=function(Ye,gt,st,wt,$t){$t===void 0&&($t=!1);var sr=new J5(gt,st,$t,wt);if(ce)throw Qt(sr);var _r=Gb[Ye]||k$;if($(sr[mv]))He("throw"+(Ye===1?"Critical":"Warning"),sr);else{if($t){var ni=+sr[I5];!k[ni]&&M>=Ye&&(xe[_r](sr[mv]),k[ni]=!0)}else M>=Ye&&xe[_r](sr[mv]);Re(Ye,sr)}},xe.debugToConsole=function(Ye){l_("debug",Ye),He("warning",Ye)},xe[pb]=function(Ye){l_("warn",Ye),He("warning",Ye)},xe.errorToConsole=function(Ye){l_("error",Ye),He("error",Ye)},xe.resetInternalMessageCount=function(){T=0,k={}},xe.logInternalMessage=Re,xe[fv]=function(Ye){fe&&fe.rm(),fe=null};function Re(Ye,gt){if(!et()){var st=!0,wt=Vue+gt[I5];if(k[wt]?st=!1:k[wt]=!0,st&&(Ye<=q&&(xe.queue[Eo](gt),T++,He(Ye===1?"error":"warn",gt)),T===G)){var $t="Internal events throttle limit per PageView reached for this app.",sr=new J5(23,$t,!1);xe.queue[Eo](sr),Ye===1?xe.errorToConsole($t):xe[pb]($t)}}}s(Re,"_logInternalMessage");function Qe(Ye){return Qg(Jf(Ye,P$,xe).cfg,function(gt){var st=gt.cfg;M=st[JH],q=st.loggingLevelTelemetry,G=st.maxMessageLimit,ce=st.enableDebug})}s(Qe,"_setDefaultsFromConfig");function et(){return T>=G}s(et,"_areInternalMessagesThrottled");function He(Ye,gt){var st=R$(I||{});st&&st[bm]&&st[bm](Ye,gt)}s(He,"_debugExtMsg")})}return s(v,"DiagnosticLogger"),v.__ieDyn=1,v}();function UL(v){return v||new d_}s(UL,"_getLogger");function Or(v,I,T,k,M,q){q===void 0&&(q=!1),UL(v)[dv](I,T,k,M,q)}s(Or,"_throwInternal");function X5(v,I){UL(v)[pb](I)}s(X5,"_warnToConsole");var f_,Hy,D$="toGMTString",B$="toUTCString",Z5="cookie",Ug="expires",N$="isCookieUseDisabled",e4="disableCookiesUsage",M$="_ckMgr",t4=null,Vb=null,r4=null,Rm,L$={},F$={},O$=(f_={cookieCfg:que((Hy={},Hy[F5]={fb:"cookieDomain",dfVal:Q5},Hy.path={fb:"cookiePath",dfVal:Q5},Hy.enabled=Vf,Hy.ignoreCookies=Vf,Hy.blockedCookies=Vf,Hy)),cookieDomain:Vf,cookiePath:Vf},f_[e4]=Vf,f_);function qL(){!Rm&&(Rm=yr(function(){return Cc()}))}s(qL,"_getDoc");function p_(v){return v?v.isEnabled():!0}s(p_,"_isMgrEnabled");function HL(v,I){return I&&v&&Je(v.ignoreCookies)?xc(v.ignoreCookies,I)!==-1:!1}s(HL,"_isIgnoredCookie");function zue(v,I){return I&&v&&Je(v.blockedCookies)&&xc(v.blockedCookies,I)!==-1?!0:HL(v,I)}s(zue,"_isBlockedCookie");function $L(v,I){var T=I[xm];if(ie(T)){var k=void 0;$(v[N$])||(k=!v[N$]),$(v[e4])||(k=!v[e4]),T=k}return T}s($L,"_isCfgEnabled");function Yue(v,I){var T,k,M,q,G,ce,fe,xe;v=Jf(v||F$,null,I).cfg,q=Qg(v,function(Qe){Qe.setDf(Qe.cfg,O$),T=Qe.ref(Qe.cfg,"cookieCfg"),k=T[O5]||"/",M=T[F5],G=$L(v,T)!==!1,ce=T.getCookie||Kue,fe=T.setCookie||zb,xe=T.delCookie||zb},I);var Re={isEnabled:s(function(){var Qe=$L(v,T)!==!1&&G&&Q$(I),et=F$[M$];return Qe&&et&&Re!==et&&(Qe=p_(et)),Qe},"isEnabled"),setEnabled:s(function(Qe){G=Qe!==!1,T[xm]=Qe},"setEnabled"),set:s(function(Qe,et,He,Ye,gt){var st=!1;if(p_(Re)&&!zue(T,Qe)){var wt={},$t=no(et||Fi),sr=Rg($t,";");if(sr!==-1&&($t=no(D(et,sr)),wt=WL(Ce(et,sr+1))),Fy(wt,F5,Ye||M,ue,$),!ie(He)){var _r=rp();if($(wt[Ug])){var ni=md(),Hi=ni+He*1e3;if(Hi>0){var $i=new Date;$i.setTime(Hi),Fy(wt,Ug,U$($i,_r?D$:B$)||U$($i,_r?D$:B$)||Fi,ue)}}_r||Fy(wt,"max-age",Fi+He,null,$)}var Go=Nb();Go&&Go.protocol==="https:"&&(Fy(wt,"secure",null,null,$),Vb===null&&(Vb=!Jue((vc()||{})[w5])),Vb&&Fy(wt,"SameSite","None",null,$)),Fy(wt,O5,gt||k,null,$),fe(Qe,q$($t,wt)),st=!0}return st},"set"),get:s(function(Qe){var et=Fi;return p_(Re)&&!HL(T,Qe)&&(et=ce(Qe)),et},"get"),del:s(function(Qe,et){var He=!1;return p_(Re)&&(He=Re.purge(Qe,et)),He},"del"),purge:s(function(Qe,et){var He,Ye=!1;if(Q$(I)){var gt=(He={},He[O5]=et||"/",He[Ug]="Thu, 01 Jan 1970 00:00:01 GMT",He);rp()||(gt["max-age"]="0"),xe(Qe,q$(Fi,gt)),Ye=!0}return Ye},"purge"),unload:s(function(Qe){q&&q.rm(),q=null},"unload")};return Re[M$]=Re,Re}s(Yue,"createCookieMgr");function Q$(v){if(t4===null){t4=!1,!Rm&&qL();try{var I=Rm.v||{};t4=I[Z5]!==void 0}catch(T){Or(v,2,68,"Cannot access document.cookie - "+Il(T),{exception:Qt(T)})}}return t4}s(Q$,"areCookiesSupported");function WL(v){var I={};if(v&&v[ui]){var T=no(v)[Ny](";");Yr(T,function(k){if(k=no(k||Fi),k){var M=Rg(k,"=");M===-1?I[k]=null:I[no(D(k,M))]=no(Ce(k,M+1))}})}return I}s(WL,"_extractParts");function U$(v,I){return Oe(v[I])?v[I]():null}s(U$,"_formatDate");function q$(v,I){var T=v||Fi;return le(I,function(k,M){T+="; "+k+(ie(M)?Fi:"="+M)}),T}s(q$,"_formatCookieValue");function Kue(v){var I=Fi;if(!Rm&&qL(),Rm.v){var T=Rm.v[Z5]||Fi;r4!==T&&(L$=WL(T),r4=T),I=no(L$[v]||Fi)}return I}s(Kue,"_getCookieValue");function zb(v,I){!Rm&&qL(),Rm.v&&(Rm.v[Z5]=v+"="+I)}s(zb,"_setCookieValue");function Jue(v){return Ae(v)?!!(jl(v,"CPU iPhone OS 12")||jl(v,"iPad; CPU OS 12")||jl(v,"Macintosh; Intel Mac OS X 10_14")&&jl(v,"Version/")&&jl(v,"Safari")||jl(v,"Macintosh; Intel Mac OS X 10_14")&&jH(v,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||jl(v,"Chrome/5")||jl(v,"Chrome/6")||jl(v,"UnrealEngine")&&!jl(v,"Chrome")||jl(v,"UCBrowser/12")||jl(v,"UCBrowser/11")):!1}s(Jue,"uaDisallowsSameSiteNone");var jL={perfEvtsSendAll:!1};function Xue(v){v.h=null;var I=v.cb;v.cb=[],Yr(I,function(T){z(T.fn,[T.arg])})}s(Xue,"_runScheduledListeners");function $y(v,I,T,k){Yr(v,function(M){M&&M[I]&&(T?(T.cb[Eo]({fn:k,arg:M}),T.h=T.h||Sy(Xue,0,T)):z(k,[M]))})}s($y,"_runListeners");var Zue=function(){function v(I){this.listeners=[];var T,k,M=[],q={h:null,cb:[]},G=Jf(I,jL);k=G[Dg](function(ce){T=!!ce.cfg.perfEvtsSendAll}),_u(v,this,function(ce){je(ce,"listeners",{g:s(function(){return M},"g")}),ce[E5]=function(fe){M[Eo](fe)},ce[YS]=function(fe){for(var xe=xc(M,fe);xe>-1;)M[mb](xe,1),xe=xc(M,fe)},ce[wb]=function(fe){$y(M,wb,q,function(xe){xe[wb](fe)})},ce[Sb]=function(fe,xe){$y(M,Sb,q,function(Re){Re[Sb](fe,xe)})},ce[M5]=function(fe,xe){$y(M,M5,xe?q:null,function(Re){Re[M5](fe,xe)})},ce[yv]=function(fe){fe&&(T||!fe[AL]())&&$y(M,yv,null,function(xe){fe.isAsync?Sy(function(){return xe[yv](fe)},0):xe[yv](fe)})},ce[xL]=function(fe){fe&&fe[ui]&&$y(M,xL,q,function(xe){xe[xL](fe)})},ce[EL]=function(fe){fe&&fe[vb]&&$y(M,EL,q,function(xe){xe[EL](fe)})},ce[L5]=function(fe,xe){if(fe>0){var Re=xe||0;$y(M,L5,q,function(Qe){Qe[L5](fe,Re)})}},ce[fv]=function(fe){var xe=s(function(){k&&k.rm(),k=null,M=[],q.h&&q.h[hb](),q.h=null,q.cb=[]},"_finishUnload"),Re;if($y(M,"unload",null,function(Qe){var et=Qe[fv](fe);et&&(Re||(Re=[]),Re[Eo](et))}),Re)return bb(function(Qe){return Gf(vL(Re),function(){xe(),Qe()})});xe()}})}return s(v,"NotificationManager"),v.__ieDyn=1,v}(),Yb="ctx",GL="ParentContextKey",m_="ChildrenContextKey",ede=null,n4=function(){function v(I,T,k){var M=this;if(M.start=md(),M[Dy]=I,M.isAsync=k,M[AL]=function(){return!1},Oe(T)){var q;je(M,"payload",{g:s(function(){return!q&&Oe(T)&&(q=T(),T=null),q},"g")})}M[Ly]=function(G){return G?G===v[GL]||G===v[m_]?M[G]:(M[Yb]||{})[G]:null},M[ep]=function(G,ce){if(G)if(G===v[GL])M[G]||(M[AL]=function(){return!0}),M[G]=ce;else if(G===v[m_])M[G]=ce;else{var fe=M[Yb]=M[Yb]||{};fe[G]=ce}},M.complete=function(){var G=0,ce=M[Ly](v[m_]);if(Je(ce))for(var fe=0;fe<ce[ui];fe++){var xe=ce[fe];xe&&(G+=xe.time)}M.time=md()-M.start,M.exTime=M.time-G,M.complete=function(){}}}return s(v,"PerfEvent"),v.ParentContextKey="parent",v.ChildrenContextKey="childEvts",v}(),tde=function(){function v(I){this.ctx={},_u(v,this,function(T){T.create=function(k,M,q){return new n4(k,M,q)},T.fire=function(k){k&&(k.complete(),I&&Oe(I[yv])&&I[yv](k))},T[ep]=function(k,M){if(k){var q=T[Yb]=T[Yb]||{};q[k]=M}},T[Ly]=function(k){return(T[Yb]||{})[k]}})}return s(v,"PerfManager"),v.__ieDyn=1,v}(),km="CoreUtils.doPerf";function Kb(v,I,T,k,M){if(v){var q=v;if(q[XS]&&(q=q[XS]()),q){var G=void 0,ce=q[Ly](km);try{if(G=q.create(I(),k,M),G){if(ce&&G[ep]&&(G[ep](n4[GL],ce),ce[Ly]&&ce[ep])){var fe=ce[Ly](n4[m_]);fe||(fe=[],ce[ep](n4[m_],fe)),fe[Eo](G)}return q[ep](km,G),T(G)}}catch(xe){G&&G[ep]&&G[ep]("exception",xe)}finally{G&&q.fire(G),q[ep](km,ce)}}}return T()}s(Kb,"doPerf");function Ic(){return ede}s(Ic,"getGblPerfMgr");var i4="00000000000000000000000000000000",Jb="0000000000000000";function o4(v,I,T){return v&&v[ui]===I&&v!==T?!!v.match(/^[\da-f]*$/i):!1}s(o4,"_isValid");function Wy(v){return o4(v,32,i4)}s(Wy,"isValidTraceId");function Ev(v){return o4(v,16,Jb)}s(Ev,"isValidSpanId");var h_=C$("plugin");function jy(v){return h_.get(v,"state",{},!0)}s(jy,"_getPluginState");function VL(v,I){for(var T=[],k=null,M=v[Im](),q;M;){var G=M[Ab]();if(G){k&&k[By]&&G[zf]&&k[By](G),q=jy(G);var ce=!!q[vm];G[vm]&&(ce=G[vm]()),ce||T[Eo](G),k=G,M=M[Im]()}}Yr(T,function(fe){var xe=v[bc]();fe[zS](v.getCfg(),xe,I,v[Im]()),q=jy(fe),!fe[bc]&&!q[bc]&&(q[bc]=xe),q[vm]=!0,delete q[Em]})}s(VL,"initializePlugins");function zL(v){return v.sort(function(I,T){var k=0;if(T){var M=T[zf];I[zf]?k=M?I[Tb]-T[Tb]:1:M&&(k=-1)}else k=I?1:-1;return k})}s(zL,"sortPlugins");function rde(v){var I={};return{getName:s(function(){return I[Dy]},"getName"),setName:s(function(T){v&&v.setName(T),I[Dy]=T},"setName"),getTraceId:s(function(){return I.traceId},"getTraceId"),setTraceId:s(function(T){v&&v.setTraceId(T),Wy(T)&&(I.traceId=T)},"setTraceId"),getSpanId:s(function(){return I.spanId},"getSpanId"),setSpanId:s(function(T){v&&v.setSpanId(T),Ev(T)&&(I.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return I[ZH]},"getTraceFlags"),setTraceFlags:s(function(T){v&&v.setTraceFlags(T),I[ZH]=T},"setTraceFlags")}}s(rde,"createDistributedTraceContext");var nde="TelemetryPluginChain",H$="_hasRun",YL="_getTelCtx",$$=0;function ide(v,I,T){for(;v;){if(v[Ab]()===T)return v;v=v[Im]()}return N([T],I.config||{},I)}s(ide,"_getNextProxyStart");function KL(v,I,T,k){var M=null,q=[];I||(I=Jf({},null,T[Ec])),k!==null&&(M=k?ide(v,T,k):v);var G={_next:fe,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return u_(T,I.cfg)},"diagLog"),getCfg:s(function(){return I.cfg},"getCfg"),getExtCfg:Re,getConfig:Qe,hasNext:s(function(){return!!M},"hasNext"),getNext:s(function(){return M},"getNext"),setNext:s(function(He){M=He},"setNext"),iterate:et,onComplete:ce}};function ce(He,Ye){for(var gt=[],st=2;st<arguments.length;st++)gt[st-2]=arguments[st];He&&q[Eo]({func:He,self:$(Ye)?G.ctx:Ye,args:gt})}s(ce,"_addOnComplete");function fe(){var He=M;if(M=He?He[Im]():null,!He){var Ye=q;Ye&&Ye[ui]>0&&(Yr(Ye,function(gt){try{gt.func.call(gt.self,gt.args)}catch(st){Or(T[Ec],2,73,"Unexpected Exception during onComplete - "+Qt(st))}}),q=[])}return He}s(fe,"_moveNext");function xe(He,Ye){var gt=null,st=I.cfg;if(st&&He){var wt=st[Av];!wt&&Ye&&(wt={}),st[Av]=wt,wt=I.ref(st,Av),wt&&(gt=wt[He],!gt&&Ye&&(gt={}),wt[He]=gt,gt=I.ref(wt,He))}return gt}s(xe,"_getExtCfg");function Re(He,Ye){var gt=xe(He,!0);return Ye&&le(Ye,function(st,wt){if(ie(gt[st])){var $t=I.cfg[st];($t||!ie($t))&&(gt[st]=$t)}FL(I,gt,st,wt)}),I.setDf(gt,Ye)}s(Re,"_resolveExtCfg");function Qe(He,Ye,gt){gt===void 0&&(gt=!1);var st,wt=xe(He,!1),$t=I.cfg;return wt&&(wt[Ye]||!ie(wt[Ye]))?st=wt[Ye]:($t[Ye]||!ie($t[Ye]))&&(st=$t[Ye]),st||!ie(st)?st:gt}s(Qe,"_getConfig");function et(He){for(var Ye;Ye=G._next();){var gt=Ye[Ab]();gt&&He(gt)}}return s(et,"_iterateChain"),G}s(KL,"_createInternalContext");function Xb(v,I,T,k){var M=Jf(I),q=KL(v,M,T,k),G=q.ctx;function ce(xe){var Re=q._next();return Re&&Re[zf](xe,G),!Re}s(ce,"_processNext");function fe(xe,Re){return xe===void 0&&(xe=null),Je(xe)&&(xe=N(xe,M.cfg,T,Re)),Xb(xe||G[Im](),M.cfg,T,Re)}return s(fe,"_createNew"),G[Wl]=ce,G[pv]=fe,G}s(Xb,"createProcessTelemetryContext");function w(v,I,T){var k=Jf(I.config),M=KL(v,k,I,T),q=M.ctx;function G(fe){var xe=M._next();return xe&&xe[fv](q,fe),!xe}s(G,"_processNext");function ce(fe,xe){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,I,xe)),w(fe||q[Im](),I,xe)}return s(ce,"_createNew"),q[Wl]=G,q[pv]=ce,q}s(w,"createProcessTelemetryUnloadContext");function P(v,I,T){var k=Jf(I.config),M=KL(v,k,I,T),q=M.ctx;function G(fe){return q.iterate(function(xe){Oe(xe[Bg])&&xe[Bg](q,fe)})}s(G,"_processNext");function ce(fe,xe){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,I,xe)),P(fe||q[Im](),I,xe)}return s(ce,"_createNew"),q[Wl]=G,q[pv]=ce,q}s(P,"createProcessTelemetryUpdateContext");function N(v,I,T,k){var M=null,q=!k;if(Je(v)&&v[ui]>0){var G=null;Yr(v,function(ce){if(!q&&k===ce&&(q=!0),q&&ce&&Oe(ce[zf])){var fe=W(ce,I,T);M||(M=fe),G&&G._setNext(fe),G=fe}})}return k&&!M?N([k],I,T):M}s(N,"createTelemetryProxyChain");function W(v,I,T){var k=null,M=Oe(v[zf]),q=Oe(v[By]),G;v?G=v[Py]+"-"+v[Tb]+"-"+$$++:G="Unknown-0-"+$$++;var ce={getPlugin:s(function(){return v},"getPlugin"),getNext:s(function(){return k},"getNext"),processTelemetry:Re,unload:Qe,update:et,_id:G,_setNext:s(function(He){k=He},"_setNext")};function fe(){var He;return v&&Oe(v[YL])&&(He=v[YL]()),He||(He=Xb(ce,I,T)),He}s(fe,"_getTelCtx");function xe(He,Ye,gt,st,wt){var $t=!1,sr=v?v[Py]:nde,_r=He[H$];return _r||(_r=He[H$]={}),He.setNext(k),v&&Kb(He[bc](),function(){return sr+":"+gt},function(){_r[G]=!0;try{var ni=k?k._id:Fi;ni&&(_r[ni]=!1),$t=Ye(He)}catch($i){var Hi=k?_r[k._id]:!0;Hi&&($t=!0),(!k||!Hi)&&Or(He[bm](),1,73,"Plugin ["+sr+"] failed during "+gt+" - "+Qt($i)+", run flags: "+Qt(_r))}},st,wt),$t}s(xe,"_processChain");function Re(He,Ye){Ye=Ye||fe();function gt(st){if(!v||!M)return!1;var wt=jy(v);return wt[Em]||wt[N5]?!1:(q&&v[By](k),v[zf](He,st),!0)}s(gt,"_callProcessTelemetry"),xe(Ye,gt,"processTelemetry",function(){return{item:He}},!He.sync)||Ye[Wl](He)}s(Re,"_processTelemetry");function Qe(He,Ye){function gt(){var st=!1;if(v){var wt=jy(v),$t=v[bc]||wt[bc];v&&(!$t||$t===He.core())&&!wt[Em]&&(wt[bc]=null,wt[Em]=!0,wt[vm]=!1,v[Em]&&v[Em](He,Ye)===!0&&(st=!0))}return st}s(gt,"_callTeardown"),xe(He,gt,"unload",function(){},Ye.isAsync)||He[Wl](Ye)}s(Qe,"_unloadPlugin");function et(He,Ye){function gt(){var st=!1;if(v){var wt=jy(v),$t=v[bc]||wt[bc];v&&(!$t||$t===He.core())&&!wt[Em]&&v[Bg]&&v[Bg](He,Ye)===!0&&(st=!0)}return st}s(gt,"_callUpdate"),xe(He,gt,"update",function(){},!1)||He[Wl](Ye)}return s(et,"_updatePlugin"),Zt(ce)}s(W,"createTelemetryPluginProxy");function de(){var v=[];function I(k){k&&v[Eo](k)}s(I,"_addHandler");function T(k,M){Yr(v,function(q){try{q(k,M)}catch(G){Or(k[bm](),2,73,"Unexpected error calling unload handler - "+Qt(G))}}),v=[]}return s(T,"_runHandlers"),{add:I,run:T}}s(de,"createUnloadHandlerContainer");function we(){var v=[];function I(k){var M=v;v=[],Yr(M,function(q){try{(q.rm||q.remove).call(q)}catch(G){Or(k,2,73,"Unloading:"+Qt(G))}})}s(I,"_doUnload");function T(k){k&&$f(v,k)}return s(T,"_addHook"),{run:I,add:T}}s(we,"createUnloadHookContainer");var ke,We="getPlugin",it=(ke={},ke[Av]={isVal:Q5,v:{}},ke),Et=function(){function v(){var I=this,T,k,M,q,G;xe(),_u(v,I,function(Re){Re[zS]=function(Qe,et,He,Ye){fe(Qe,et,Ye),T=!0},Re[Em]=function(Qe,et){var He=Re[bc];if(!He||Qe&&He!==Qe[bc]())return;var Ye,gt=!1,st=Qe||w(null,He,M&&M[We]?M[We]():M),wt=et||{reason:0,isAsync:!1};function $t(){gt||(gt=!0,q.run(st,et),G.run(st[bm]()),Ye===!0&&st[Wl](wt),xe())}return s($t,"_unloadCallback"),!Re[T5]||Re[T5](st,wt,$t)!==!0?$t():Ye=!0,Ye},Re[Bg]=function(Qe,et){var He=Re[bc];if(!He||Qe&&He!==Qe[bc]())return;var Ye,gt=!1,st=Qe||P(null,He,M&&M[We]?M[We]():M),wt=et||{reason:0};function $t(){gt||(gt=!0,fe(st.getCfg(),st.core(),st[Im]()))}return s($t,"_updateCallback"),!Re._doUpdate||Re._doUpdate(st,wt,$t)!==!0?$t():Ye=!0,Ye},e_(Re,"_addUnloadCb",function(){return q},"add"),e_(Re,"_addHook",function(){return G},"add"),je(Re,"_unloadHooks",{g:s(function(){return G},"g")})}),I[bm]=function(Re){return ce(Re)[bm]()},I[vm]=function(){return T},I.setInitialized=function(Re){T=Re},I[By]=function(Re){M=Re},I[Wl]=function(Re,Qe){Qe?Qe[Wl](Re):M&&Oe(M[zf])&&M[zf](Re,null)},I._getTelCtx=ce;function ce(Re){Re===void 0&&(Re=null);var Qe=Re;if(!Qe){var et=k||Xb(null,{},I[bc]);M&&M[We]?Qe=et[pv](null,M[We]):Qe=et[pv](null,M)}return Qe}s(ce,"_getTelCtx");function fe(Re,Qe,et){Jf(Re,it,u_(Qe)),!et&&Qe&&(et=Qe[yb]()[Im]());var He=M;M&&M[We]&&(He=M[We]()),I[bc]=Qe,k=Xb(et,Re,Qe,He)}s(fe,"_setDefaults");function xe(){T=!1,I[bc]=null,k=null,M=null,G=we(),q=de()}s(xe,"_initDefaults")}return s(v,"BaseTelemetryPlugin"),v.__ieDyn=1,v}();function gr(v,I,T){var k={id:I,fn:T};$f(v,k);var M={remove:s(function(){Yr(v,function(q,G){if(q.id===k.id)return v[mb](G,1),-1})},"remove")};return M}s(gr,"_addInitializer");function Fn(v,I,T){for(var k=!1,M=v[ui],q=0;q<M;++q){var G=v[q];if(G)try{if(G.fn[x5](null,[I])===!1){k=!0;break}}catch(ce){Or(T,2,64,"Telemetry initializer failed: "+Il(ce),{exception:Qt(ce)},!0)}}return!k}s(Fn,"_runInitializers");var ei=function(v){VS(I,v);function I(){var T=v.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var k,M;q(),_u(I,T,function(G,ce){G.addTelemetryInitializer=function(fe){return gr(M,k++,fe)},G[zf]=function(fe,xe){Fn(M,fe,xe?xe[bm]():G[bm]())&&G[Wl](fe,xe)},G[T5]=function(){q()}});function q(){k=0,M=[]}return s(q,"_initDefaults"),T}return s(I,"TelemetryInitializerPlugin"),I.__ieDyn=1,I}(Et),xr,Lr="Plugins must provide initialize method",Kn="_notificationManager",On="SDK is still unloading...",Oi="SDK is not initialized",Lo=100,io=5e4,jc=or((xr={cookieCfg:{}},xr[Ib]={rdOnly:!0,ref:!0,v:[]},xr[Lg]={rdOnly:!0,ref:!0,v:[]},xr[Av]={ref:!0,v:{}},xr[tp]=Vf,xr.loggingLevelConsole=0,xr.diagnosticLogInterval=Vf,xr));function Zb(v,I){return new tde(I)}s(Zb,"_createPerfManager");function g_(v,I,T){var k=[],M=[],q={};return Yr(T,function(G){(ie(G)||ie(G[zS]))&&Vr(Lr);var ce=G[Tb],fe=G[Py];G&&ce&&(ie(q[ce])?q[ce]=fe:X5(v,"Two extensions have same priority #"+ce+" - "+q[ce]+", "+fe)),!ce||ce<I?k[Eo](G):M[Eo](G)}),{core:k,channels:M}}s(g_,"_validateExtensions");function JL(v,I){var T=!1;return Yr(I,function(k){if(k===v)return T=!0,-1}),T}s(JL,"_isPluginPresent");function s4(v,I,T,k){T&&le(T,function(M,q){k&&hd(q)&&hd(I[M])&&s4(v,I[M],q,k),k&&hd(q)&&hd(I[M])?s4(v,I[M],q,k):v.set(I,M,q)})}s(s4,"_deepMergeConfig");function W$(v,I){var T=null,k=-1;return Yr(v,function(M,q){if(M.w===I)return T=M,k=q,-1}),{i:k,l:T}}s(W$,"_findWatcher");function ode(v,I){var T=W$(v,I).l;return T||(T={w:I,rm:s(function(){var k=W$(v,I);k.i!==-1&&v[mb](k.i,1)},"rm")},v[Eo](T)),T}s(ode,"_addDelayedCfgListener");function XL(v,I,T){Yr(I,function(k){var M=Qg(v,k.w,T);delete k.w,k.rm=function(){M.rm()}})}s(XL,"_registerDelayedCfgListener");function j$(v,I,T,k){return I.add(v[Dg](function(M){var q=M.cfg.disableDbgExt;q===!0&&k&&(T[YS](k),k=null),T&&!k&&q!==!0&&(k=Wue(M.cfg),T[E5](k))})),k}s(j$,"_initDebugListener");function G$(v){return je({rm:s(function(){v.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(v)+">"},"v")})}s(G$,"_createUnloadHook");var Nt=function(){function v(){var I,T,k,M,q,G,ce,fe,xe,Re,Qe,et,He,Ye,gt,st,wt,$t,sr,_r,ni,Hi,$i,Go,wn,tn,Wi,Aa,bs,Wt,rn,Fo;_u(v,this,function(Dt){dt(),Dt._getDbgPlgTargets=function(){return[$i,M]},Dt[vm]=function(){return T},Dt.activeStatus=function(){return tn},Dt._setPendingStatus=function(){tn=3},Dt[zS]=function(yt,Tr,Wn,Jr){He&&Vr(On),Dt[vm]()&&Vr("Core cannot be initialized more than once"),I=Jf(yt,jc,Wn||Dt[Ec],!1),yt=I.cfg,Pu(I[Dg](function(os){var Gs=os.cfg,Cd=tn===3;if(!Cd){Aa=Gs.initInMemoMaxSize||Lo;var Xf=Gs.instrumentationKey,$g=Gs.endpointUrl;if(ie(Xf)){ni=null,tn=ky.INACTIVE;var Wg="Please provide instrumentation key";T?(Or(k,1,100,Wg),La()):Vr(Wg);return}var C4=[];if(ht(Xf)?(C4[Eo](Xf),ni=null):ni=Xf,ht($g)?(C4[Eo]($g),Wi=null):Wi=$g,C4[ui]){bs=!1,tn=3;var y9=Q5(Gs.initTimeOut)?Gs.initTimeOut:io,Fde=ef(C4);Sy(function(){bs||Qn()},y9),Gf(Fde,function(uI){try{if(bs)return;if(!uI.rejected){var dI=uI[gb];if(dI&&dI[ui]){var gW=dI[0];if(ni=gW&&gW[gb],dI[ui]>1){var AW=dI[1];Wi=AW&&AW[gb]}}ni&&(yt.instrumentationKey=ni,yt.endpointUrl=Wi)}Qn()}catch{bs||Qn()}})}else Qn();var v4=os.ref(os.cfg,Av);le(v4,function(uI){os.ref(v4,uI)})}})),q=Jr,sr=j$(I,$t,q&&Dt[Z0](),sr),cI(),Dt[Ec]=Wn;var jn=yt[Ib];if(Re=[],Re[Eo].apply(Re,YH(YH([],Tr,!1),jn)),Qe=yt[Lg],Fa(null),(!et||et[ui]===0)&&Vr("No "+Lg+" available"),Qe&&Qe[ui]>1){var Zo=Dt[Ab]("TeeChannelController");(!Zo||!Zo.plugin)&&Or(k,1,28,"TeeChannel required")}XL(yt,Hi,k),Hi=null,T=!0,tn===ky.ACTIVE&&La()},Dt.getChannels=function(){var yt=[];return et&&Yr(et,function(Tr){yt[Eo](Tr)}),Zt(yt)},Dt.track=function(yt){Kb(Dt[XS](),function(){return"AppInsightsCore:track"},function(){yt===null&&(ya(yt),Vr("Invalid telemetry item")),!yt[Dy]&&ie(yt[Dy])&&(ya(yt),Vr("telemetry name required")),yt.iKey=yt.iKey||ni,yt.time=yt.time||ZS(new Date),yt.ver=yt.ver||"4.0",!He&&Dt[vm]()&&tn===ky.ACTIVE?zc()[Wl](yt):tn!==ky.INACTIVE&&M[ui]<=Aa&&M[Eo](yt)},function(){return{item:yt}},!yt.sync)},Dt[yb]=zc,Dt[Z0]=function(){return q||(q=new Zue(I.cfg),Dt[Kn]=q),q},Dt[E5]=function(yt){Dt.getNotifyMgr()[E5](yt)},Dt[YS]=function(yt){q&&q[YS](yt)},Dt.getCookieMgr=function(){return fe||(fe=Yue(I.cfg,Dt[Ec])),fe},Dt.setCookieMgr=function(yt){fe!==yt&&(Wb(fe,!1),fe=yt)},Dt[XS]=function(){return G||ce||Ic()},Dt.setPerfMgr=function(yt){G=yt},Dt.eventCnt=function(){return M[ui]},Dt.releaseQueue=function(){if(T&&M[ui]>0){var yt=M;M=[],tn===2?Yr(yt,function(Tr){Tr.iKey=Tr.iKey||ni,zc()[Wl](Tr)}):Or(k,2,20,"core init status is not active")}},Dt.pollInternalLogs=function(yt){return gt=yt||null,Fo=!1,Wt&&Wt[hb](),Vo(!0)};function Qn(){bs=!0,ie(ni)?(tn=ky.INACTIVE,Or(k,1,112,"ikey can't be resolved from promises")):tn=ky.ACTIVE,La()}s(Qn,"_setStatus");function La(){T&&(Dt.releaseQueue(),Dt.pollInternalLogs())}s(La,"_releaseQueues");function Vo(yt){if((!Wt||!Wt[xm])&&!Fo){var Tr=yt||k&&k.queue[ui]>0;Tr&&(rn||(rn=!0,Pu(I[Dg](function(Wn){var Jr=Wn.cfg.diagnosticLogInterval;(!Jr||!(Jr>0))&&(Jr=1e4);var jn=!1;Wt&&(jn=Wt[xm],Wt[hb]()),Wt=m5(aI,Jr),Wt.unref(),Wt[xm]=jn}))),Wt[xm]=!0)}return Wt}s(Vo,"_startLogPoller"),Dt[KH]=function(){Fo=!0,Wt&&Wt[hb](),aI()},IL(Dt,function(){return Ye},["addTelemetryInitializer"]),Dt[fv]=function(yt,Tr,Wn){yt===void 0&&(yt=!0),T||Vr(Oi),He&&Vr(On);var Jr={reason:50,isAsync:yt,flushComplete:!1},jn;yt&&!Tr&&(jn=bb(function(Gs){Tr=Gs}));var Zo=w(Dm(),Dt);Zo[b5](function(){$t.run(Dt[Ec]),S$([fe,q,k],yt,function(){dt(),Tr&&Tr(Jr)})},Dt);function os(Gs){Jr.flushComplete=Gs,He=!0,wt.run(Zo,Jr),Dt[KH](),Zo[Wl](Jr)}return s(os,"_doUnload"),aI(),qg(yt,os,6,Wn),jn},Dt[Ab]=Yl,Dt.addPlugin=function(yt,Tr,Wn,Jr){if(!yt){Jr&&Jr(!1),lI(Lr);return}var jn=Yl(yt[Py]);if(jn&&!Tr){Jr&&Jr(!1),lI("Plugin ["+yt[Py]+"] is already loaded!");return}var Zo={reason:16};function os(Xf){Re[Eo](yt),Zo.added=[yt],Fa(Zo),Jr&&Jr(!0)}if(s(os,"_addPlugin"),jn){var Gs=[jn.plugin],Cd={reason:2,isAsync:!!Wn};nf(Gs,Cd,function(Xf){Xf?(Zo.removed=Gs,Zo.reason|=32,os()):Jr&&Jr(!1)})}else os()},Dt.updateCfg=function(yt,Tr){Tr===void 0&&(Tr=!0);var Wn;if(Dt[vm]()){Wn={reason:1,cfg:I.cfg,oldCfg:l5({},I.cfg),newConfig:l5({},yt),merge:Tr},yt=Wn.newConfig;var Jr=I.cfg;yt[Ib]=Jr[Ib],yt[Lg]=Jr[Lg]}I._block(function(jn){var Zo=jn.cfg;s4(jn,Zo,yt,Tr),Tr||le(Zo,function(os){$e(yt,os)||jn.set(Zo,os,Vf)}),jn.setDf(Zo,jc)},!0),I.notify(),Wn&&Hg(Wn)},Dt.evtNamespace=function(){return st},Dt.flush=qg,Dt.getTraceCtx=function(yt){return _r||(_r=rde()),_r},Dt.setTraceCtx=function(yt){_r=yt||null},Dt.addUnloadHook=Pu,e_(Dt,"addUnloadCb",function(){return wt},"add"),Dt.onCfgChange=function(yt){var Tr;return T?Tr=Qg(I.cfg,yt,Dt[Ec]):Tr=ode(Hi,yt),G$(Tr)},Dt.getWParam=function(){return ha()||I.cfg.enableWParam?0:-1};function zl(){var yt={};Go=[];var Tr=s(function(Wn){Wn&&Yr(Wn,function(Jr){if(Jr[Py]&&Jr[Cb]&&!yt[Jr.identifier]){var jn=Jr[Py]+"="+Jr[Cb];Go[Eo](jn),yt[Jr.identifier]=Jr}})},"_addPluginVersions");Tr(et),Qe&&Yr(Qe,function(Wn){Tr(Wn)}),Tr(Re)}s(zl,"_setPluginVersions");function dt(){T=!1,I=Jf({},jc,Dt[Ec]),I.cfg[JH]=1,je(Dt,"config",{g:s(function(){return I.cfg},"g"),s:s(function(Tr){Dt.updateCfg(Tr,!1)},"s")}),je(Dt,"pluginVersionStringArr",{g:s(function(){return Go||zl(),Go},"g")}),je(Dt,"pluginVersionString",{g:s(function(){return wn||(Go||zl(),wn=Go.join(";")),wn||Fi},"g")}),je(Dt,"logger",{g:s(function(){return k||(k=new d_(I.cfg),I[Ec]=k),k},"g"),s:s(function(Tr){I[Ec]=Tr,k!==Tr&&(Wb(k,!1),k=Tr)},"s")}),Dt[Ec]=new d_(I.cfg),$i=[];var yt=Dt.config[Ib]||[];yt.splice(0,yt[ui]),$f(yt,$i),Ye=new ei,M=[],Wb(q,!1),q=null,G=null,ce=null,Wb(fe,!1),fe=null,xe=null,Re=[],Qe=null,et=null,He=!1,gt=null,st=Og("AIBaseCore",!0),wt=de(),_r=null,ni=null,$t=we(),Hi=[],wn=null,Go=null,Fo=!1,Wt=null,rn=!1,tn=0,Wi=null,Aa=null,bs=!1}s(dt,"_initDefaults");function zc(){var yt=Xb(Dm(),I.cfg,Dt);return yt[b5](Vo),yt}s(zc,"_createTelCtx");function Fa(yt){var Tr=g_(Dt[Ec],Que,Re);xe=null,wn=null,Go=null,et=(Qe||[])[0]||[],et=zL($f(et,Tr[Lg]));var Wn=$f(zL(Tr[bc]),et);$i=Zt(Wn);var Jr=Dt.config[Ib]||[];Jr.splice(0,Jr[ui]),$f(Jr,$i);var jn=zc();et&&et[ui]>0&&VL(jn[pv](et),Wn),VL(jn,Wn),yt&&Hg(yt)}s(Fa,"_initPluginChain");function Yl(yt){var Tr=null,Wn=null,Jr=[];return Yr($i,function(jn){if(jn[Py]===yt&&jn!==Ye)return Wn=jn,-1;jn.getChannel&&Jr[Eo](jn)}),!Wn&&Jr[ui]>0&&Yr(Jr,function(jn){if(Wn=jn.getChannel(yt),!Wn)return-1}),Wn&&(Tr={plugin:Wn,setEnabled:s(function(jn){jy(Wn)[N5]=!jn},"setEnabled"),isEnabled:s(function(){var jn=jy(Wn);return!jn[Em]&&!jn[N5]},"isEnabled"),remove:s(function(jn,Zo){jn===void 0&&(jn=!0);var os=[Wn],Gs={reason:1,isAsync:jn};nf(os,Gs,function(Cd){Cd&&Fa({reason:32,removed:os}),Zo&&Zo(Cd)})},"remove")}),Tr}s(Yl,"_getPlugin");function Dm(){if(!xe){var yt=($i||[]).slice();xc(yt,Ye)===-1&&yt[Eo](Ye),xe=N(zL(yt),I.cfg,Dt)}return xe}s(Dm,"_getPluginChain");function nf(yt,Tr,Wn){if(yt&&yt[ui]>0){var Jr=N(yt,I.cfg,Dt),jn=w(Jr,Dt);jn[b5](function(){var Zo=!1,os=[];Yr(Re,function(Cd,Xf){JL(Cd,yt)?Zo=!0:os[Eo](Cd)}),Re=os,wn=null,Go=null;var Gs=[];Qe&&(Yr(Qe,function(Cd,Xf){var $g=[];Yr(Cd,function(Wg){JL(Wg,yt)?Zo=!0:$g[Eo](Wg)}),Gs[Eo]($g)}),Qe=Gs),Wn&&Wn(Zo),Vo()}),jn[Wl](Tr)}else Wn(!1)}s(nf,"_removePlugins");function aI(){if(k&&k.queue){var yt=k.queue.slice(0);k.queue[ui]=0,Yr(yt,function(Tr){var Wn={name:gt||"InternalMessageId: "+Tr[I5],iKey:ni,time:ZS(new Date),baseType:J5.dataType,baseData:{message:Tr[mv]}};Dt.track(Wn)})}}s(aI,"_flushInternalLogs");function qg(yt,Tr,Wn,Jr){var jn=1,Zo=!1,os=null;Jr=Jr||5e3;function Gs(){jn--,Zo&&jn===0&&(os&&os[hb](),os=null,Tr&&Tr(Zo),Tr=null)}if(s(Gs,"doCallback"),et&&et[ui]>0){var Cd=zc()[pv](et);Cd.iterate(function(Xf){if(Xf.flush){jn++;var $g=!1;Xf.flush(yt,function(){$g=!0,Gs()},Wn)||$g||(yt&&os==null?os=Sy(function(){os=null,Gs()},Jr):Gs())}})}return Zo=!0,Gs(),!0}s(qg,"_flushChannels");function cI(){var yt;Pu(I[Dg](function(Tr){var Wn=Tr.cfg.enablePerfMgr;if(Wn){var Jr=Tr.cfg[tp];(yt!==Jr||!yt)&&(Jr||(Jr=Zb),u$(Tr.cfg,tp,Jr),yt=Jr,ce=null),!G&&!ce&&Oe(Jr)&&(ce=Jr(Dt,Dt[Z0]()))}else ce=null,yt=null}))}s(cI,"_initPerfManager");function Hg(yt){var Tr=P(Dm(),Dt);Tr[b5](Vo),(!Dt._updateHook||Dt._updateHook(Tr,yt)!==!0)&&Tr[Wl](yt)}s(Hg,"_doUpdate");function lI(yt){var Tr=Dt[Ec];Tr?(Or(Tr,2,73,yt),Vo()):Vr(yt)}s(lI,"_logOrThrowError");function ya(yt){var Tr=Dt[Z0]();Tr&&Tr[Sb]([yt],2)}s(ya,"_notifyInvalidEvent");function Pu(yt){$t.add(yt)}s(Pu,"_addUnloadHook")})}return s(v,"AppInsightsCore"),v.__ieDyn=1,v}();function Kr(v,I){try{if(v&&v!==""){var T=tf().parse(v);if(T&&T[XH]&&T[XH]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ui])return T}}catch(k){Or(I,1,43,"Cannot parse the response. "+(k[Dy]||Qt(k)),{response:v})}return null}s(Kr,"parseResponse");var Cn="",gs="NoResponseBody",Gc="&"+gs+"=true",Ma="POST",Vc=function(){function v(){var I=0,T,k,M,q,G,ce,fe,xe,Re,Qe,et,He,Ye,gt;_u(v,this,function(st,wt){var $t=!0;bs(),st[zS]=function(Wt,rn){M=rn,k&&Or(M,1,28,"Sender is already initialized"),st.SetConfig(Wt),k=!0},st._getDbgPlgTargets=function(){return[k,q,ce,T]},st.SetConfig=function(Wt){try{if(G=Wt.senderOnCompleteCallBack||{},ce=!!Wt.disableCredentials,fe=Wt.fetchCredentials,q=!!Wt.isOneDs,T=!!Wt.enableSendPromise,Re=!!Wt.disableXhr,Qe=!!Wt.disableBeacon,et=!!Wt.disableBeaconSync,gt=Wt.timeWrapper,Ye=!!Wt.addNoResponse,He=!!Wt.disableFetchKeepAlive,xe={sendPOST:tn},q||($t=!1),ce){var rn=Nb();rn&&rn.protocol&&rn.protocol[fb]()==="file:"&&($t=!1)}return!0}catch{}return!1},st.getSyncFetchPayload=function(){return I},st.getSenderInst=function(Wt,rn){return Wt&&Wt[ui]?Hi(Wt,rn):null},st.getFallbackInst=function(){return xe},st[T5]=function(Wt,rn){bs()};function sr(Wt,rn){$i(rn,200,{},Wt)}s(sr,"_onSuccess");function _r(Wt,rn){Or(M,2,26,"Failed to send telemetry.",{message:Wt}),$i(rn,400,{})}s(_r,"_onError");function ni(Wt){_r("No endpoint url is provided for the batch",Wt)}s(ni,"_onNoPayloadUrl");function Hi(Wt,rn){for(var Fo=0,Dt=null,Qn=0;Dt==null&&Qn<Wt[ui];)Fo=Wt[Qn],!Re&&Fo===1?PL()?Dt=Aa:DL()&&(Dt=tn):Fo===2&&o_(rn)&&(!rn||!He)?Dt=Wi:Fo===3&&Qy()&&(rn?!et:!Qe)&&(Dt=wn),Qn++;return Dt?{_transport:Fo,_isSync:rn,sendPOST:Dt}:null}s(Hi,"_getSenderInterface");function $i(Wt,rn,Fo,Dt){try{Wt&&Wt(rn,Fo,Dt)}catch{}}s($i,"_doOnComplete");function Go(Wt,rn){var Fo=vc(),Dt=Wt[Ng];if(!Dt)return ni(rn),!0;Dt=Wt[Ng]+(Ye?Gc:Cn);var Qn=Wt[vb],La=q?Qn:new Blob([Qn],{type:"text/plain;charset=UTF-8"}),Vo=Fo.sendBeacon(Dt,La);return Vo}s(Go,"_doBeaconSend");function wn(Wt,rn,Fo){var Dt=Wt[vb];try{if(Dt)if(Go(Wt,rn))sr(Cn,rn);else{var Qn=G&&G.beaconOnRetry;Qn&&Oe(Qn)?Qn(Wt,rn,Go):(xe&&xe.sendPOST(Wt,rn,!0),Or(M,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(La){q&&X5(M,"Failed to send telemetry using sendBeacon API. Ex:"+Qt(La)),$i(rn,q?0:400,{},Cn)}}s(wn,"_beaconSender");function tn(Wt,rn,Fo){var Dt,Qn,La,Vo=Wt[yL]||{};!Fo&&T&&(Dt=bb(function(Fa,Yl){Qn=Fa,La=Yl})),q&&Fo&&Wt.disableXhrSync&&(Fo=!1);var zl=Wt[Ng];if(!zl){ni(rn),Qn&&Qn(!1);return}var dt=SL(Ma,zl,$t,!0,Fo,Wt[Mg]);q||dt.setRequestHeader("Content-type","application/json"),Yr(Tt(Vo),function(Fa){dt.setRequestHeader(Fa,Vo[Fa])}),dt.onreadystatechange=function(){q||(zc(dt),dt.readyState===4&&Qn&&Qn(!0))},dt.onload=function(){q&&zc(dt)};function zc(Fa){var Yl=G&&G.xhrOnComplete,Dm=Yl&&Oe(Yl);if(Dm)Yl(Fa,rn,Wt);else{var nf=U5(Fa);$i(rn,Fa[KS],vv(Fa,q),nf)}}return s(zc,"_doOnReadyFunc"),dt.onerror=function(Fa){$i(rn,q?dt[KS]:400,vv(dt,q),q?Cn:q5(dt)),La&&La(Fa)},dt.ontimeout=function(){$i(rn,q?dt[KS]:500,vv(dt,q),q?Cn:q5(dt)),Qn&&Qn(!1)},dt.send(Wt[vb]),Dt}s(tn,"_xhrSender");function Wi(Wt,rn,Fo){var Dt,Qn=Wt[Ng],La=Wt[vb],Vo=q?La:new Blob([La],{type:"application/json"}),zl,dt,zc,Fa=new Headers,Yl=La[ui],Dm=!1,nf=!1,aI=Wt[yL]||{},qg=(Dt={method:Ma,body:Vo},Dt[_$]=!0,Dt);Wt.headers&&Tt(Wt.headers)[ui]>0&&(Yr(Tt(aI),function(ya){Fa.append(ya,aI[ya])}),qg[yL]=Fa),fe?qg.credentials=fe:$t&&q&&(qg.credentials="include"),Fo&&(qg.keepalive=!0,I+=Yl,q?Wt._sendReason===2&&(Dm=!0,Ye&&(Qn+=Gc)):Dm=!0);var cI=new Request(Qn,qg);try{cI[_$]=!0}catch{}if(!Fo&&T&&(zl=bb(function(ya,Pu){dt=ya,zc=Pu})),!Qn){ni(rn),dt&&dt(!1);return}function Hg(ya){$i(rn,q?0:400,{},q?Cn:ya)}s(Hg,"_handleError");function lI(ya,Pu,yt){var Tr=ya[KS],Wn=G.fetchOnComplete;Wn&&Oe(Wn)?Wn(ya,rn,yt||Cn,Pu):$i(rn,Tr,{},yt||Cn)}s(lI,"_onFetchComplete");try{Gf(fetch(q?Qn:cI,q?qg:null),function(ya){if(Fo&&(I-=Yl,Yl=0),!nf)if(nf=!0,ya.rejected)Hg(ya.reason&&ya.reason[mv]),zc&&zc(ya.reason);else{var Pu=ya[gb];try{!q&&!Pu.ok?(Hg(Pu.statusText),dt&&dt(!1)):q&&!Pu.body?(lI(Pu,null,Cn),dt&&dt(!0)):Gf(Pu.text(),function(yt){lI(Pu,Wt,yt[gb]),dt&&dt(!0)})}catch(yt){Hg(Qt(yt)),zc&&zc(yt)}}})}catch(ya){nf||(Hg(Qt(ya)),zc&&zc(ya))}return Dm&&!nf&&(nf=!0,$i(rn,200,{}),dt&&dt(!0)),q&&!nf&&Wt[Mg]>0&&gt&&gt.set(function(){nf||(nf=!0,$i(rn,500,{}),dt&&dt(!0))},Wt[Mg]),zl}s(Wi,"_doFetchSender");function Aa(Wt,rn,Fo){var Dt=Ws(),Qn=new XDomainRequest,La=Wt[vb];Qn.onload=function(){var Fa=U5(Qn),Yl=G&&G.xdrOnComplete;Yl&&Oe(Yl)?Yl(Qn,rn,Wt):$i(rn,200,{},Fa)},Qn.onerror=function(){$i(rn,400,{},q?Cn:f$(Qn))},Qn.ontimeout=function(){$i(rn,500,{})},Qn.onprogress=function(){};var Vo=Dt&&Dt.location&&Dt.location.protocol||"",zl=Wt[Ng];if(!zl){ni(rn);return}if(!q&&zl.lastIndexOf(Vo,0)!==0){var dt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Or(M,2,40,". "+dt),_r(dt,rn);return}var zc=q?zl:zl[My](/^(https?:)/,"");Qn.open(Ma,zc),Wt[Mg]&&(Qn[Mg]=Wt[Mg]),Qn.send(La),q&&Fo?gt&&gt.set(function(){Qn.send(La)},0):Qn.send(La)}s(Aa,"_xdrSender");function bs(){I=0,k=!1,T=!1,M=null,q=null,G=null,ce=null,fe=null,xe=null,Re=!1,Qe=!1,et=!1,He=!1,Ye=!1,gt=null}s(bs,"_initDefaults")})}return s(v,"SenderPostManager"),v.__ieDyn=1,v}(),bv="on",Gy="attachEvent",eI="addEventListener",V$="detachEvent",z$="removeEventListener",a4="events";Og("aiEvtPageHide"),Og("aiEvtPageShow");var sde=/\.[\.]+/g,V5e=/[\.]+$/,ebt=1,Y$=C$("events"),tbt=/^([^.]*)(?:\.(.+)|)/;function z5e(v){return v&&v[My]?v[My](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Fi):v}s(z5e,"_normalizeNamespace");function ade(v,I){if(I){var T=Fi;Je(I)?(T=Fi,Yr(I,function(M){M=z5e(M),M&&(M[0]!=="."&&(M="."+M),T+=M)})):T=z5e(I),T&&(T[0]!=="."&&(T="."+T),v=(v||Fi)+T)}var k=tbt.exec(v||Fi)||[];return{type:k[1],ns:(k[2]||Fi).replace(sde,".").replace(V5e,Fi)[Ny](".").sort().join(".")}}s(ade,"_getEvtNamespace");function Y5e(v,I,T){T===void 0&&(T=!0);var k=Y$.get(v,a4,{},T),M=k[I];return M||(M=k[I]=[]),M}s(Y5e,"_getRegisteredEvents");function K5e(v,I,T,k){v&&I&&I[Ru]&&(v[z$]?v[z$](I[Ru],T,k):v[V$]&&v[V$](bv+I[Ru],T))}s(K5e,"_doDetach");function rbt(v,I,T,k){var M=!1;return v&&I&&I[Ru]&&T&&(v[eI]?(v[eI](I[Ru],T,k),M=!0):v[Gy]&&(v[Gy](bv+I[Ru],T),M=!0)),M}s(rbt,"_doAttach");function J5e(v,I,T,k){for(var M=I[ui];M--;){var q=I[M];q&&(!T.ns||T.ns===q[hL].ns)&&(!k||k(q))&&(K5e(v,q[hL],q.handler,q.capture),I[mb](M,1))}}s(J5e,"_doUnregister");function nbt(v,I,T){if(I[Ru])J5e(v,Y5e(v,I[Ru]),I,T);else{var k=Y$.get(v,a4,{});le(k,function(M,q){J5e(v,q,I,T)}),Tt(k)[ui]===0&&Y$.kill(v,a4)}}s(nbt,"_unregisterEvents");function X5e(v,I){var T;return I?(Je(I)?T=[v].concat(I):T=[v,I],T=ade("xx",T).ns[Ny](".")):T=v,T}s(X5e,"mergeEvtNamespace");function Z5e(v,I,T,k,M){M===void 0&&(M=!1);var q=!1;if(v)try{var G=ade(I,k);if(q=rbt(v,G,T,M),q&&Y$.accept(v)){var ce={guid:ebt++,evtName:G,handler:T,capture:M};Y5e(v,G.type)[Eo](ce)}}catch{}return q}s(Z5e,"eventOn");function ibt(v,I,T,k,M){if(M===void 0&&(M=!1),v)try{var q=ade(I,k),G=!1;nbt(v,q,function(ce){return q.ns&&!T||ce.handler===T?(G=!0,!0):!1}),G||K5e(v,q,T,M)}catch{}}s(ibt,"eventOff");var e4e="sampleRate",cde="ProcessLegacy",t4e="http.method",lde="https://dc.services.visualstudio.com",c4="/v2/track",tI="not_specified",r4e=Eue({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),K$="split",Ri="length",ude="toLowerCase",A_="ingestionendpoint",ZL="toString",n4e="removeItem",J$="message",obt="count",dde="stringify",fde="pathname",e9="match",rI="name",Vy="properties",Iv="measurements",X$="sizeInBytes",Z$="typeName",t9="exceptions",r9="severityLevel",pde="problemGroup",l4="parsedStack",eW="hasFullStack",tW="assembly",Tv="fileName",u4="line",rW="aiDataContract",nW="duration";function i4e(v,I,T){var k=I[Ri],M=sbt(v,I);if(M[Ri]!==k){for(var q=0,G=M;T[G]!==void 0;)q++,G=Ce(M,0,147)+lbt(q);M=G}return M}s(i4e,"dataSanitizeKeyAndAddUniqueness");function sbt(v,I){var T;return I&&(I=no(Ft(I)),I[Ri]>150&&(T=Ce(I,0,150),Or(v,2,57,"name is too long.  It has been truncated to 150 characters.",{name:I},!0))),T||I}s(sbt,"dataSanitizeKey");function Ad(v,I,T){T===void 0&&(T=1024);var k;return I&&(T=T||1024,I=no(Ft(I)),I[Ri]>T&&(k=Ce(I,0,T),Or(v,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:I},!0))),k||I}s(Ad,"dataSanitizeString");function mde(v,I){return s4e(v,I,2048,66)}s(mde,"dataSanitizeUrl");function o4e(v,I){var T;return I&&I[Ri]>32768&&(T=Ce(I,0,32768),Or(v,2,56,"message is too long, it has been truncated to 32768 characters.",{message:I},!0)),T||I}s(o4e,"dataSanitizeMessage");function abt(v,I){var T;if(I){var k=""+I;k[Ri]>32768&&(T=Ce(k,0,32768),Or(v,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:I},!0))}return T||I}s(abt,"dataSanitizeException");function y_(v,I){if(I){var T={};le(I,function(k,M){if(Te(M)&&Mb())try{M=tf()[dde](M)}catch(q){Or(v,2,49,"custom property is not valid",{exception:q},!0)}M=Ad(v,M,8192),k=i4e(v,k,T),T[k]=M}),I=T}return I}s(y_,"dataSanitizeProperties");function C_(v,I){if(I){var T={};le(I,function(k,M){k=i4e(v,k,T),T[k]=M}),I=T}return I}s(C_,"dataSanitizeMeasurements");function cbt(v,I){return I&&s4e(v,I,128,69)[ZL]()}s(cbt,"dataSanitizeId");function s4e(v,I,T,k){var M;return I&&(I=no(Ft(I)),I[Ri]>T&&(M=Ce(I,0,T),Or(v,2,k,"input is too long, it has been truncated to "+T+" characters.",{data:I},!0))),M||I}s(s4e,"dataSanitizeInput");function lbt(v){var I="00"+v;return Ie(I,I[Ri]-3)}s(lbt,"dsPadNumber");var a4e=Cc()||{},c4e=0,ubt=[null,null,null,null,null];function dbt(v){var I=c4e,T=ubt,k=T[I];return a4e.createElement?T[I]||(k=T[I]=a4e.createElement("a")):k={host:fbt(v,!0)},k.href=v,I++,I>=T[Ri]&&(I=0),c4e=I,k}s(dbt,"urlParseUrl");function fbt(v,I){var T=pbt(v,I)||"";if(T){var k=T[e9](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ri]>3&&Ae(k[2])&&k[2][Ri]>0)return k[2]+(k[3]||"")}return T}s(fbt,"urlParseHost");function pbt(v,I){var T=null;if(v){var k=v[e9](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ri]>2&&Ae(k[2])&&k[2][Ri]>0&&(T=k[2]||"",I&&k[Ri]>2)){var M=(k[1]||"")[ude](),q=k[3]||"";(M==="http"&&q===":80"||M==="https"&&q===":443")&&(q=""),T+=q}}return T}s(pbt,"urlParseFullHost");var mbt=[lde+c4,"https://breeze.aimon.applicationinsights.io"+c4,"https://dc-int.services.visualstudio.com"+c4];function l4e(v){return xc(mbt,v[ude]())!==-1}s(l4e,"isInternalApplicationInsightsEndpoint");function hbt(v,I,T,k){var M,q=k,G=k;if(I&&I[Ri]>0){var ce=dbt(I);if(M=ce.host,!q)if(ce[fde]!=null){var fe=ce.pathname[Ri]===0?"/":ce[fde];fe.charAt(0)!=="/"&&(fe="/"+fe),G=ce[fde],q=Ad(v,T?T+" "+fe:fe)}else q=Ad(v,I)}else M=k,q=k;return{target:M,name:q,data:G}}s(hbt,"AjaxHelperParseDependencyPath");var hde=v5({LocalStorage:0,SessionStorage:1}),d4=void 0,u4e="";function d4e(v){try{if(ie(vi()))return null;var I=new Date()[ZL](),T=Xo(v===hde.LocalStorage?"localStorage":"sessionStorage"),k=u4e+I;T.setItem(k,I);var M=T.getItem(k)!==I;if(T[n4e](k),!M)return T}catch{}return null}s(d4e,"_getVerifiedStorageObject");function gde(){return f4e()?d4e(hde.SessionStorage):null}s(gde,"_getSessionStorageObject");function gbt(v){u4e=v||""}s(gbt,"utlSetStoragePrefix");function f4e(v){return(v||d4===void 0)&&(d4=!!d4e(hde.SessionStorage)),d4}s(f4e,"utlCanUseSessionStorage");function Abt(v,I){var T=gde();if(T!==null)try{return T.getItem(I)}catch(k){d4=!1,Or(v,2,2,"Browser failed read of session storage. "+Il(k),{exception:Qt(k)})}return null}s(Abt,"utlGetSessionStorage");function ybt(v,I,T){var k=gde();if(k!==null)try{return k.setItem(I,T),!0}catch(M){d4=!1,Or(v,2,4,"Browser failed write to session storage. "+Il(M),{exception:Qt(M)})}return!1}s(ybt,"utlSetSessionStorage");function Cbt(v,I){var T=gde();if(T!==null)try{return T[n4e](I),!0}catch(k){d4=!1,Or(v,2,6,"Browser failed removal of session storage item. "+Il(k),{exception:Qt(k)})}return!1}s(Cbt,"utlRemoveSessionStorage");var vbt=";",xbt="=";function Ade(v){if(!v)return{};var I=v[K$](vbt),T=XM(I,function(M,q){var G=q[K$](xbt);if(G[Ri]===2){var ce=G[0][ude](),fe=G[1];M[ce]=fe}return M},{});if(Tt(T)[Ri]>0){if(T.endpointsuffix){var k=T.location?T.location+".":"";T[A_]=T[A_]||"https://"+k+"dc."+T.endpointsuffix}T[A_]=T[A_]||lde,jH(T[A_],"/")&&(T[A_]=T[A_].slice(0,-1))}return T}s(Ade,"parseConnectionString");var Ebt=function(){function v(I,T,k){var M=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[rI]=Ad(I,k)||tI,q.data=T,q.time=ZS(new Date),q[rW]={time:1,iKey:1,name:1,sampleRate:s(function(){return M.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(v,"Envelope"),v}(),f4=function(){function v(I,T,k,M){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[rI]=Ad(I,T)||tI,q[Vy]=y_(I,k),q[Iv]=C_(I,M)}return s(v,"Event"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Event",v.dataType="EventData",v}(),bbt=58,Ibt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Tbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,wbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Sbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,_bt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Rbt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,kbt=/([^\(\s\n]+):([0-9]+)$/,p4e="<no_method>",p4="error",Pm="stack",yde="stackDetails",m4e="errorSrc",Cde="message",h4e="description",g4e=[{re:Tbt,len:5,m:1,fn:2,ln:3,col:4},{chk:Dbt,pre:Pbt,re:wbt,len:4,m:1,fn:2,ln:3},{re:Sbt,len:3,m:1,fn:2,hdl:E4e},{re:_bt,len:2,fn:1,hdl:E4e}];function Pbt(v){return v.replace(/(\(anonymous\))/,"<anonymous>")}s(Pbt,"_scrubAnonymous");function Dbt(v){return Rg(v,"[native")<0}s(Dbt,"_ignoreNative");function vde(v,I){var T=v;return T&&!Ae(T)&&(JSON&&JSON[dde]?(T=JSON[dde](v),I&&(!T||T==="{}")&&(Oe(v[ZL])?T=v[ZL]():T=""+v)):T=""+v+" - (Missing JSON.stringify)"),T||""}s(vde,"_stringify");function A4e(v,I){var T=v;return v&&(T&&!Ae(T)&&(T=v[Cde]||v[h4e]||T),T&&!Ae(T)&&(T=vde(T,!0)),v.filename&&(T=T+" @"+(v.filename||"")+":"+(v.lineno||"?")+":"+(v.colno||"?"))),I&&I!=="String"&&I!=="Object"&&I!=="Error"&&Rg(T||"",I)===-1&&(T=I+": "+T),T||""}s(A4e,"_formatMessage");function Bbt(v){try{if(Te(v))return"hasFullStack"in v&&"typeName"in v}catch{}return!1}s(Bbt,"_isExceptionDetailsInternal");function Nbt(v){try{if(Te(v))return"ver"in v&&"exceptions"in v&&"properties"in v}catch{}return!1}s(Nbt,"_isExceptionInternal");function y4e(v){return v&&v.src&&Ae(v.src)&&v.obj&&Je(v.obj)}s(y4e,"_isStackDetails");function v_(v){var I=v||"";Ae(I)||(Ae(I[Pm])?I=I[Pm]:I=""+I);var T=I[K$](`
`);return{src:I,obj:T}}s(v_,"_convertStackObj");function Mbt(v){for(var I=[],T=v[K$](`
`),k=0;k<T[Ri];k++){var M=T[k];T[k+1]&&(M+="@"+T[k+1],k++),I.push(M)}return{src:v,obj:I}}s(Mbt,"_getOperaStack");function C4e(v){var I=null;if(v)try{if(v[Pm])I=v_(v[Pm]);else if(v[p4]&&v[p4][Pm])I=v_(v[p4][Pm]);else if(v.exception&&v.exception[Pm])I=v_(v.exception[Pm]);else if(y4e(v))I=v;else if(y4e(v[yde]))I=v[yde];else if(Ws()&&Ws().opera&&v[Cde])I=Mbt(v[J$]);else if(v.reason&&v.reason[Pm])I=v_(v.reason[Pm]);else if(Ae(v))I=v_(v);else{var T=v[Cde]||v[h4e]||"";Ae(v[m4e])&&(T&&(T+=`
`),T+=" from "+v[m4e]),T&&(I=v_(T))}}catch(k){I=v_(k)}return I||{src:"",obj:null}}s(C4e,"_getStackFromErrorObj");function Lbt(v){var I="";return v&&(v.obj?I=v.obj.join(`
`):I=v.src||""),I}s(Lbt,"_formatStackTrace");function Fbt(v){var I,T=v.obj;if(T&&T[Ri]>0){I=[];var k=0,M=!1,q=0;Yr(T,function(gt){if(M||qbt(gt)){var st=Ft(gt);M=!0;var wt=Hbt(st,k);wt&&(q+=wt[X$],I.push(wt),k++)}});var G=32*1024;if(q>G)for(var ce=0,fe=I[Ri]-1,xe=0,Re=ce,Qe=fe;ce<fe;){var et=I[ce][X$],He=I[fe][X$];if(xe+=et+He,xe>G){var Ye=Qe-Re+1;I.splice(Re,Ye);break}Re=ce,Qe=fe,ce++,fe--}}return I}s(Fbt,"_parseStack");function iW(v){var I="";if(v&&(I=v.typeName||v[rI]||"",!I))try{var T=/function (.{1,200})\(/,k=T.exec(v.constructor[ZL]());I=k&&k[Ri]>1?k[1]:""}catch{}return I}s(iW,"_getErrorType");function xde(v){if(v)try{if(!Ae(v)){var I=iW(v),T=vde(v,!1);return(!T||T==="{}")&&(v[p4]&&(v=v[p4],I=iW(v)),T=vde(v,!0)),Rg(T,I)!==0&&I!=="String"?I+":"+T:T}}catch{}return""+(v||"")}s(xde,"_formatErrorCode");var oW=function(){function v(I,T,k,M,q,G){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ce=this;ce.ver=2,Nbt(T)?(ce[t9]=T[t9]||[],ce[Vy]=T[Vy],ce[Iv]=T[Iv],T[r9]&&(ce[r9]=T[r9]),T.id&&(ce.id=T.id,T[Vy].id=T.id),T[pde]&&(ce[pde]=T[pde]),ie(T.isManual)||(ce.isManual=T.isManual)):(k||(k={}),G&&(k.id=G),ce[t9]=[v4e(I,T,k)],ce[Vy]=y_(I,k),ce[Iv]=C_(I,M),q&&(ce[r9]=q),G&&(ce.id=G))}return s(v,"Exception"),v.CreateAutoException=function(I,T,k,M,q,G,ce,fe){var xe=iW(q||G||I);return{message:A4e(I,xe),url:T,lineNumber:k,columnNumber:M,error:xde(q||G||I),evt:xde(G||I),typeName:xe,stackDetails:C4e(ce||q||G),errorSrc:fe}},v.CreateFromInterface=function(I,T,k,M){var q=T[t9]&&wg(T[t9],function(ce){return Ubt(I,ce)}),G=new v(I,Pg(Pg({},T),{exceptions:q}),k,M);return G},v.prototype.toInterface=function(){var I=this,T=I.exceptions,k=I.properties,M=I.measurements,q=I.severityLevel,G=I.problemGroup,ce=I.id,fe=I.isManual,xe=T instanceof Array&&wg(T,function(Re){return Re.toInterface()})||void 0;return{ver:"4.0",exceptions:xe,severityLevel:q,properties:k,measurements:M,problemGroup:G,id:ce,isManual:fe}},v.CreateSimpleException=function(I,T,k,M,q,G){var ce;return{exceptions:[(ce={},ce[eW]=!0,ce.message=I,ce.stack=q,ce.typeName=T,ce)]}},v.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",v.dataType="ExceptionData",v.formatError=xde,v}(),Obt=Zt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Qbt(){var v=this,I=Je(v[l4])&&wg(v[l4],function(k){return Wbt(k)}),T={id:v.id,outerId:v.outerId,typeName:v[Z$],message:v[J$],hasFullStack:v[eW],stack:v[Pm],parsedStack:I||void 0};return T}s(Qbt,"_toInterface");function v4e(v,I,T){var k,M,q,G,ce,fe,xe,Re;if(Bbt(I))G=I[Z$],ce=I[J$],xe=I[Pm],Re=I[l4]||[],fe=I[eW];else{var Qe=I,et=Qe&&Qe.evt;xt(Qe)||(Qe=Qe[p4]||et||Qe),G=Ad(v,iW(Qe))||tI,ce=o4e(v,A4e(I||Qe,G))||tI;var He=I[yde]||C4e(I);Re=Fbt(He),Je(Re)&&wg(Re,function(Ye){Ye[tW]=Ad(v,Ye[tW]),Ye[Tv]=Ad(v,Ye[Tv])}),xe=abt(v,Lbt(He)),fe=Je(Re)&&Re[Ri]>0,T&&(T[Z$]=T[Z$]||G)}return k={},k[rW]=Obt,k.id=M,k.outerId=q,k.typeName=G,k.message=ce,k[eW]=fe,k.stack=xe,k.parsedStack=Re,k.toInterface=Qbt,k}s(v4e,"_createExceptionDetails");function Ubt(v,I){var T=Je(I[l4])&&wg(I[l4],function(M){return $bt(M)})||I[l4],k=v4e(v,Pg(Pg({},I),{parsedStack:T}));return k}s(Ubt,"_createExDetailsFromInterface");function x4e(v,I){var T=I[e9](Rbt);if(T&&T[Ri]>=4)v[Tv]=T[1],v[u4]=parseInt(T[2]);else{var k=I[e9](kbt);k&&k[Ri]>=3?(v[Tv]=k[1],v[u4]=parseInt(k[2])):v[Tv]=I}}s(x4e,"_parseFilename");function E4e(v,I,T){var k=v[Tv];I.fn&&T&&T[Ri]>I.fn&&(I.ln&&T[Ri]>I.ln?(k=no(T[I.fn]||""),v[u4]=parseInt(no(T[I.ln]||""))||0):k=no(T[I.fn]||"")),k&&x4e(v,k)}s(E4e,"_handleFilename");function qbt(v){var I=!1;if(v&&Ae(v)){var T=no(v);T&&(I=Ibt.test(T))}return I}s(qbt,"_isStackFrame");var b4e=Zt({level:1,method:1,assembly:0,fileName:0,line:0});function Hbt(v,I){var T,k;if(v&&Ae(v)&&no(v)){k=(T={},T[rW]=b4e,T.level=I,T.assembly=no(v),T.method=p4e,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var M=0;M<g4e[Ri];){var q=g4e[M];if(q.chk&&!q.chk(v))break;q.pre&&(v=q.pre(v));var G=v[e9](q.re);if(G&&G[Ri]>=q.len){q.m&&(k.method=no(G[q.m]||p4e)),q.hdl?q.hdl(k,q,G):q.fn&&(q.ln?(k[Tv]=no(G[q.fn]||""),k[u4]=parseInt(no(G[q.ln]||""))||0):x4e(k,G[q.fn]||""));break}M++}}return I4e(k)}s(Hbt,"_extractStackFrame");function $bt(v){var I,T=(I={},I[rW]=b4e,I.level=v.level,I.method=v.method,I.assembly=v[tW],I.fileName=v[Tv],I.line=v[u4],I.sizeInBytes=0,I);return I4e(T)}s($bt,"_stackFrameFromInterface");function I4e(v){var I=bbt;return v&&(I+=v.method[Ri],I+=v.assembly[Ri],I+=v.fileName[Ri],I+=v.level.toString()[Ri],I+=v.line.toString()[Ri],v[X$]=I),v}s(I4e,"_populateFrameSizeInBytes");function Wbt(v){return{level:v.level,method:v.method,assembly:v[tW],fileName:v[Tv],line:v[u4]}}s(Wbt,"_parsedFrameToInterface");var jbt=function(){function v(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(v,"DataPoint"),v}(),n9=function(){function v(I,T,k,M,q,G,ce,fe,xe){this.aiDataContract={ver:1,metrics:1,properties:0};var Re=this;Re.ver=2;var Qe=new jbt;Qe[obt]=M>0?M:void 0,Qe.max=isNaN(G)||G===null?void 0:G,Qe.min=isNaN(q)||q===null?void 0:q,Qe[rI]=Ad(I,T)||tI,Qe.value=k,Qe.stdDev=isNaN(ce)||ce===null?void 0:ce,Re.metrics=[Qe],Re[Vy]=y_(I,fe),Re[Iv]=C_(I,xe)}return s(v,"Metric"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",v.dataType="MetricData",v}(),i9="";function T4e(v){(isNaN(v)||v<0)&&(v=0),v=hue(v);var I=i9+v%1e3,T=i9+Ty(v/1e3)%60,k=i9+Ty(v/(1e3*60))%60,M=i9+Ty(v/(1e3*60*60))%24,q=Ty(v/(1e3*60*60*24));return I=I[Ri]===1?"00"+I:I[Ri]===2?"0"+I:I,T=T[Ri]<2?"0"+T:T,k=k[Ri]<2?"0"+k:k,M=M[Ri]<2?"0"+M:M,(q>0?q+".":i9)+M+":"+k+":"+T+"."+I}s(T4e,"msToTimeSpan");var sW=function(){function v(I,T,k,M,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var fe=this;fe.ver=2,fe.id=cbt(I,ce),fe.url=mde(I,k),fe[rI]=Ad(I,T)||tI,isNaN(M)||(fe[nW]=T4e(M)),fe[Vy]=y_(I,q),fe[Iv]=C_(I,G)}return s(v,"PageView"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",v.dataType="PageviewData",v}(),aW=function(){function v(I,T,k,M,q,G,ce,fe,xe,Re,Qe,et){xe===void 0&&(xe="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var He=this;He.ver=2,He.id=T,He[nW]=T4e(q),He.success=G,He.resultCode=ce+"",He.type=Ad(I,xe);var Ye=hbt(I,k,fe,M);He.data=mde(I,M)||Ye.data,He.target=Ad(I,Ye.target),Re&&(He.target="".concat(He.target," | ").concat(Re)),He[rI]=Ad(I,Ye[rI]),He[Vy]=y_(I,Qe),He[Iv]=C_(I,et)}return s(v,"RemoteDependencyData"),v.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",v.dataType="RemoteDependencyData",v}(),cW=function(){function v(I,T,k,M,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var G=this;G.ver=2,T=T||tI,G[J$]=o4e(I,T),G[Vy]=y_(I,M),G[Iv]=C_(I,q),k&&(G[r9]=k)}return s(v,"Trace"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Message",v.dataType="MessageData",v}(),lW=function(){function v(I,T,k,M,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var fe=this;fe.ver=2,fe.url=mde(I,k),fe[rI]=Ad(I,T)||tI,fe[Vy]=y_(I,q),fe[Iv]=C_(I,G),ce&&(fe.domProcessing=ce.domProcessing,fe[nW]=ce[nW],fe.networkConnect=ce.networkConnect,fe.perfTotal=ce.perfTotal,fe.receivedResponse=ce.receivedResponse,fe.sentRequest=ce.sentRequest)}return s(v,"PageViewPerformance"),v.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",v.dataType="PageviewPerformanceData",v}(),x_=function(){function v(I,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=I,this.baseData=T}return s(v,"Data"),v}(),Gbt=v5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function nI(v){var I="ai."+v+".";return function(T){return I+T}}s(nI,"_aiNameFunc");var o9=nI("application"),wl=nI("device"),uW=nI("location"),m4=nI("operation"),Ede=nI("session"),iI=nI("user"),E_=nI("cloud"),s9=nI("internal"),w4e=function(v){VS(I,v);function I(){return v.call(this)||this}return s(I,"ContextTagKeys"),I}(Pue({applicationVersion:o9("ver"),applicationBuild:o9("build"),applicationTypeId:o9("typeId"),applicationId:o9("applicationId"),applicationLayer:o9("layer"),deviceId:wl("id"),deviceIp:wl("ip"),deviceLanguage:wl("language"),deviceLocale:wl("locale"),deviceModel:wl("model"),deviceFriendlyName:wl("friendlyName"),deviceNetwork:wl("network"),deviceNetworkName:wl("networkName"),deviceOEMName:wl("oemName"),deviceOS:wl("os"),deviceOSVersion:wl("osVersion"),deviceRoleInstance:wl("roleInstance"),deviceRoleName:wl("roleName"),deviceScreenResolution:wl("screenResolution"),deviceType:wl("type"),deviceMachineName:wl("machineName"),deviceVMName:wl("vmName"),deviceBrowser:wl("browser"),deviceBrowserVersion:wl("browserVersion"),locationIp:uW("ip"),locationCountry:uW("country"),locationProvince:uW("province"),locationCity:uW("city"),operationId:m4("id"),operationName:m4("name"),operationParentId:m4("parentId"),operationRootId:m4("rootId"),operationSyntheticSource:m4("syntheticSource"),operationCorrelationVector:m4("correlationVector"),sessionId:Ede("id"),sessionIsFirst:Ede("isFirst"),sessionIsNew:Ede("isNew"),userAccountAcquisitionDate:iI("accountAcquisitionDate"),userAccountId:iI("accountId"),userAgent:iI("userAgent"),userId:iI("id"),userStoreRegion:iI("storeRegion"),userAuthUserId:iI("authUserId"),userAnonymousUserAcquisitionDate:iI("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:iI("authUserAcquisitionDate"),cloudName:E_("name"),cloudRole:E_("role"),cloudRoleVer:E_("roleVer"),cloudRoleInstance:E_("roleInstance"),cloudEnvironment:E_("environment"),cloudLocation:E_("location"),cloudDeploymentUnit:E_("deploymentUnit"),internalNodeName:s9("nodeName"),internalSdkVersion:s9("sdkVersion"),internalAgentVersion:s9("agentVersion"),internalSnippet:s9("snippet"),internalSdkSrc:s9("sdkSrc")})),Gl=new w4e;function S4e(v,I){ibt(v,null,null,I)}s(S4e,"_disableEvents");function Vbt(v){var I=Cc(),T=vc(),k=!1,M=[],q=1;T&&!ie(T.onLine)&&!T.onLine&&(q=2);var G=0,ce=et(),fe=X5e(Og("OfflineListener"),v);try{if(Re(Ws())&&(k=!0),I){var xe=I.body||I;xe.ononline&&Re(xe)&&(k=!0)}}catch{k=!1}function Re(sr){var _r=!1;return sr&&(_r=Z5e(sr,"online",gt,fe),_r&&Z5e(sr,"offline",st,fe)),_r}s(Re,"_enableEvents");function Qe(){return ce}s(Qe,"_isOnline");function et(){return!(G===2||q===2)}s(et,"calCurrentState");function He(){var sr=et();ce!==sr&&(ce=sr,Yr(M,function(_r){var ni={isOnline:ce,rState:q,uState:G};try{_r(ni)}catch{}}))}s(He,"listnerNoticeCheck");function Ye(sr){G=sr,He()}s(Ye,"setOnlineState");function gt(){q=1,He()}s(gt,"_setOnline");function st(){q=2,He()}s(st,"_setOffline");function wt(){var sr=Ws();if(sr&&k){if(S4e(sr,fe),I){var _r=I.body||I;$(_r.ononline)||S4e(_r,fe)}k=!1}}s(wt,"_unload");function $t(sr){return M.push(sr),{rm:s(function(){var _r=M.indexOf(sr);if(_r>-1)return M.splice(_r,1)},"rm")}}return s($t,"addListener"),{isOnline:Qe,isListening:s(function(){return k},"isListening"),unload:wt,addListener:$t,setOnlineState:Ye}}s(Vbt,"createOfflineListener");var zbt="AppInsightsChannelPlugin",b_="duration",ku="tags",bde="deviceType",ip="data",wv="name",a9="traceID",Qi="length",c9="stringify",I_="measurements",zy="dataType",T_="envelopeType",w_="toString",S_="enqueue",__="count",Sv="push",Ide="emitLineDelimitedJson",h4="clear",dW="markAsSent",l9="clearSent",Tde="bufferOverride",u9="BUFFER_KEY",oI="SENT_BUFFER_KEY",g4="concat",d9="MAX_BUFFER_SIZE",f9="triggerSend",yd="diagLog",wde="initialize",p9="_sender",m9="endpointUrl",h9="instrumentationKey",Sde="customHeaders",_4e="maxBatchSizeInBytes",_de="onunloadDisableBeacon",Rde="isBeaconApiDisabled",R4e="alwaysUseXhrOverride",k4e="enableSessionStorageBuffer",Yy="_buffer",P4e="onunloadDisableFetch",D4e="disableSendBeaconSplit",fW="getSenderInst",R_="_onError",kde="_onPartialSuccess",pW="_onSuccess",Pde="itemsReceived",Dde="itemsAccepted",Bde="baseType",mW="sampleRate",Ybt="getHashCodeScore",Nde="baseType",ga="baseData",Vl="properties",B4e="true";function Tc(v,I,T){return Fy(v,I,T,ue)}s(Tc,"_setValueIf");function Kbt(v,I,T){var k=T[ku]=T[ku]||{},M=I.ext=I.ext||{},q=I[ku]=I[ku]||[],G=M.user;G&&(Tc(k,Gl.userAuthUserId,G.authId),Tc(k,Gl.userId,G.id||G.localId));var ce=M.app;ce&&Tc(k,Gl.sessionId,ce.sesId);var fe=M.device;fe&&(Tc(k,Gl.deviceId,fe.id||fe.localId),Tc(k,Gl[bde],fe.deviceClass),Tc(k,Gl.deviceIp,fe.ip),Tc(k,Gl.deviceModel,fe.model),Tc(k,Gl[bde],fe[bde]));var xe=I.ext.web;if(xe){Tc(k,Gl.deviceLanguage,xe.browserLang),Tc(k,Gl.deviceBrowserVersion,xe.browserVer),Tc(k,Gl.deviceBrowser,xe.browser);var Re=T[ip]=T[ip]||{},Qe=Re[ga]=Re[ga]||{},et=Qe[Vl]=Qe[Vl]||{};Tc(et,"domain",xe.domain),Tc(et,"isManual",xe.isManual?B4e:null),Tc(et,"screenRes",xe.screenRes),Tc(et,"userConsent",xe.userConsent?B4e:null)}var He=M.os;He&&(Tc(k,Gl.deviceOS,He[wv]),Tc(k,Gl.deviceOSVersion,He.osVer));var Ye=M.trace;Ye&&(Tc(k,Gl.operationParentId,Ye.parentID),Tc(k,Gl.operationName,Ad(v,Ye[wv])),Tc(k,Gl.operationId,Ye[a9]));for(var gt={},st=q[Qi]-1;st>=0;st--){var wt=q[st];le(wt,function(sr,_r){gt[sr]=_r}),q.splice(st,1)}le(q,function(sr,_r){gt[sr]=_r});var $t=Pg(Pg({},k),gt);$t[Gl.internalSdkVersion]||($t[Gl.internalSdkVersion]=Ad(v,"javascript:".concat(Jbt.Version),64)),T[ku]=TL($t)}s(Kbt,"_extractPartAExtensions");function sI(v,I,T){ie(v)||le(v,function(k,M){lt(M)?T[k]=M:Ae(M)?I[k]=M:Mb()&&(I[k]=tf()[c9](M))})}s(sI,"_extractPropsAndMeasurements");function k_(v,I){ie(v)||le(v,function(T,k){v[T]=k||I})}s(k_,"_convertPropsUndefinedToCustomDefinedValue");function P_(v,I,T,k){var M=new Ebt(v,k,I);Tc(M,"sampleRate",T[e4e]),(T[ga]||{}).startTime&&(M.time=ZS(T[ga].startTime)),M.iKey=T.iKey;var q=T.iKey.replace(/-/g,"");return M[wv]=M[wv].replace("{0}",q),Kbt(v,T,M),T[ku]=T[ku]||[],TL(M)}s(P_,"_createEnvelope");function D_(v,I){ie(I[ga])&&Or(v,1,46,"telemetryItem.baseData cannot be null.")}s(D_,"EnvelopeCreatorInit");var Jbt={Version:"3.3.6"};function Xbt(v,I,T){D_(v,I);var k=I[ga][I_]||{},M=I[ga][Vl]||{};sI(I[ip],M,k),ie(T)||k_(M,T);var q=I[ga];if(ie(q))return X5(v,"Invalid input for dependency data"),null;var G=q[Vl]&&q[Vl][t4e]?q[Vl][t4e]:"GET",ce=new aW(v,q.id,q.target,q[wv],q[b_],q.success,q.responseCode,G,q.type,q.correlationContext,M,k),fe=new x_(aW[zy],ce);return P_(v,aW[T_],I,fe)}s(Xbt,"DependencyEnvelopeCreator");function N4e(v,I,T){D_(v,I);var k={},M={};I[Nde]!==f4[zy]&&(k.baseTypeSource=I[Nde]),I[Nde]===f4[zy]?(k=I[ga][Vl]||{},M=I[ga][I_]||{}):I[ga]&&sI(I[ga],k,M),sI(I[ip],k,M),ie(T)||k_(k,T);var q=I[ga][wv],G=new f4(v,q,k,M),ce=new x_(f4[zy],G);return P_(v,f4[T_],I,ce)}s(N4e,"EventEnvelopeCreator");function Zbt(v,I,T){D_(v,I);var k=I[ga][I_]||{},M=I[ga][Vl]||{};sI(I[ip],M,k),ie(T)||k_(M,T);var q=I[ga],G=oW.CreateFromInterface(v,q,M,k),ce=new x_(oW[zy],G);return P_(v,oW[T_],I,ce)}s(Zbt,"ExceptionEnvelopeCreator");function eIt(v,I,T){D_(v,I);var k=I[ga],M=k[Vl]||{},q=k[I_]||{};sI(I[ip],M,q),ie(T)||k_(M,T);var G=new n9(v,k[wv],k.average,k.sampleCount,k.min,k.max,k.stdDev,M,q),ce=new x_(n9[zy],G);return P_(v,n9[T_],I,ce)}s(eIt,"MetricEnvelopeCreator");function tIt(v,I,T){D_(v,I);var k,M=I[ga];!ie(M)&&!ie(M[Vl])&&!ie(M[Vl][b_])?(k=M[Vl][b_],delete M[Vl][b_]):!ie(I[ip])&&!ie(I[ip][b_])&&(k=I[ip][b_],delete I[ip][b_]);var q=I[ga],G;((I.ext||{}).trace||{})[a9]&&(G=I.ext.trace[a9]);var ce=q.id||G,fe=q[wv],xe=q.uri,Re=q[Vl]||{},Qe=q[I_]||{};if(ie(q.refUri)||(Re.refUri=q.refUri),ie(q.pageType)||(Re.pageType=q.pageType),ie(q.isLoggedIn)||(Re.isLoggedIn=q.isLoggedIn[w_]()),!ie(q[Vl])){var et=q[Vl];le(et,function(gt,st){Re[gt]=st})}sI(I[ip],Re,Qe),ie(T)||k_(Re,T);var He=new sW(v,fe,xe,k,Re,Qe,ce),Ye=new x_(sW[zy],He);return P_(v,sW[T_],I,Ye)}s(tIt,"PageViewEnvelopeCreator");function rIt(v,I,T){D_(v,I);var k=I[ga],M=k[wv],q=k.uri||k.url,G=k[Vl]||{},ce=k[I_]||{};sI(I[ip],G,ce),ie(T)||k_(G,T);var fe=new lW(v,M,q,void 0,G,ce,k),xe=new x_(lW[zy],fe);return P_(v,lW[T_],I,xe)}s(rIt,"PageViewPerformanceEnvelopeCreator");function nIt(v,I,T){D_(v,I);var k=I[ga].message,M=I[ga].severityLevel,q=I[ga][Vl]||{},G=I[ga][I_]||{};sI(I[ip],q,G),ie(T)||k_(q,T);var ce=new cW(v,k,M,q,G),fe=new x_(cW[zy],ce);return P_(v,cW[T_],I,fe)}s(nIt,"TraceEnvelopeCreator");var M4e=function(){function v(I,T){var k=[],M=!1,q=T.maxRetryCnt;this._get=function(){return k},this._set=function(G){return k=G,k},_u(v,this,function(G){G[S_]=function(ce){if(G[__]()>=T.eventsLimitInMem){M||(Or(I,2,105,"Maximum in-memory buffer size reached: "+G[__](),!0),M=!0);return}ce.cnt=ce.cnt||0,!(!ie(q)&&ce.cnt>q)&&k[Sv](ce)},G[__]=function(){return k[Qi]},G.size=function(){for(var ce=k[Qi],fe=0;fe<k[Qi];fe++)ce+=k[fe].item[Qi];return T[Ide]||(ce+=2),ce},G[h4]=function(){k=[],M=!1},G.getItems=function(){return k.slice(0)},G.batchPayloads=function(ce){if(ce&&ce[Qi]>0){var fe=[];Yr(ce,function(Re){fe[Sv](Re.item)});var xe=T[Ide]?fe.join(`
`):"["+fe.join(",")+"]";return xe}return null},G.createNew=function(ce,fe,xe){var Re=k.slice(0);ce=ce||I,fe=fe||{};var Qe=xe?new L4e(ce,fe):new Mde(ce,fe);return Yr(Re,function(et){Qe[S_](et)}),Qe}})}return s(v,"BaseSendBuffer"),v.__ieDyn=1,v}(),Mde=function(v){VS(I,v);function I(T,k){var M=v.call(this,T,k)||this;return _u(I,M,function(q,G){q[dW]=function(ce){G[h4]()},q[l9]=function(ce){}}),M}return s(I,"ArraySendBuffer"),I.__ieDyn=1,I}(M4e),iIt=["AI_buffer","AI_sentBuffer"],L4e=function(v){VS(I,v);function I(k,M){var q=v.call(this,k,M)||this,G=!1,ce=M?.namePrefix,fe=M[Tde]||{getItem:Abt,setItem:ybt},xe=fe.getItem,Re=fe.setItem,Qe=M.maxRetryCnt;return _u(I,q,function(et,He){var Ye=_r(I[u9]),gt=_r(I[oI]),st=$i(),wt=gt[g4](st),$t=et._set(Ye[g4](wt));$t[Qi]>I[d9]&&($t[Qi]=I[d9]),Hi(I[oI],[]),Hi(I[u9],$t),et[S_]=function(wn){if(et[__]()>=I[d9]){G||(Or(k,2,67,"Maximum buffer size reached: "+et[__](),!0),G=!0);return}wn.cnt=wn.cnt||0,!(!ie(Qe)&&wn.cnt>Qe)&&(He[S_](wn),Hi(I[u9],et._get()))},et[h4]=function(){He[h4](),Hi(I[u9],et._get()),Hi(I[oI],[]),G=!1},et[dW]=function(wn){Hi(I[u9],et._set(sr(wn,et._get())));var tn=_r(I[oI]);tn instanceof Array&&wn instanceof Array&&(tn=tn[g4](wn),tn[Qi]>I[d9]&&(Or(k,1,67,"Sent buffer reached its maximum size: "+tn[Qi],!0),tn[Qi]=I[d9]),Hi(I[oI],tn))},et[l9]=function(wn){var tn=_r(I[oI]);tn=sr(wn,tn),Hi(I[oI],tn)},et.createNew=function(wn,tn,Wi){Wi=!!Wi;var Aa=et._get().slice(0),bs=_r(I[oI]).slice(0);wn=wn||k,tn=tn||{},et[h4]();var Wt=Wi?new I(wn,tn):new Mde(wn,tn);return Yr(Aa,function(rn){Wt[S_](rn)}),Wi&&Wt[dW](bs),Wt};function sr(wn,tn){var Wi=[],Aa=[];return Yr(wn,function(bs){Aa[Sv](bs.item)}),Yr(tn,function(bs){!Oe(bs)&&xc(Aa,bs.item)===-1&&Wi[Sv](bs)}),Wi}s(sr,"_removePayloadsFromBuffer");function _r(wn){var tn=wn;return tn=ce?ce+"_"+tn:tn,ni(tn)}s(_r,"_getBuffer");function ni(wn){try{var tn=xe(k,wn);if(tn){var Wi=tf().parse(tn);if(Ae(Wi)&&(Wi=tf().parse(Wi)),Wi&&Je(Wi))return Wi}}catch(Aa){Or(k,1,42," storage key: "+wn+", "+Il(Aa),{exception:Qt(Aa)})}return[]}s(ni,"_getBufferBase");function Hi(wn,tn){var Wi=wn;try{Wi=ce?ce+"_"+Wi:Wi;var Aa=JSON[c9](tn);Re(k,Wi,Aa)}catch(bs){Re(k,Wi,JSON[c9]([])),Or(k,2,41," storage key: "+Wi+", "+Il(bs)+". Buffer cleared",{exception:Qt(bs)})}}s(Hi,"_setBuffer");function $i(){var wn=[];try{return Yr(iIt,function(tn){var Wi=Go(tn);if(wn=wn[g4](Wi),ce){var Aa=ce+"_"+tn,bs=Go(Aa);wn=wn[g4](bs)}}),wn}catch(tn){Or(k,2,41,"Transfer events from previous buffers: "+Il(tn)+". previous Buffer items can not be removed",{exception:Qt(tn)})}return[]}s($i,"_getPreviousEvents");function Go(wn){try{var tn=ni(wn),Wi=[];return Yr(tn,function(Aa){var bs={item:Aa,cnt:0};Wi[Sv](bs)}),Cbt(k,wn),Wi}catch{}return[]}s(Go,"_getItemsFromPreviousKey")}),q}s(I,"SessionStorageSendBuffer");var T;return T=I,I.VERSION="_1",I.BUFFER_KEY="AI_buffer"+T.VERSION,I.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,I.MAX_BUFFER_SIZE=2e3,I}(M4e),oIt=function(){function v(I){_u(v,this,function(T){T.serialize=function(G){var ce=k(G,"root");try{return tf()[c9](ce)}catch(fe){Or(I,1,48,fe&&Oe(fe[w_])?fe[w_]():"Error serializing object",null,!0)}};function k(G,ce){var fe="__aiCircularRefCheck",xe={};if(!G)return Or(I,1,48,"cannot serialize object because it is null or undefined",{name:ce},!0),xe;if(G[fe])return Or(I,2,50,"Circular reference detected while serializing object",{name:ce},!0),xe;if(!G.aiDataContract){if(ce==="measurements")xe=q(G,"number",ce);else if(ce==="properties")xe=q(G,"string",ce);else if(ce==="tags")xe=q(G,"string",ce);else if(Je(G))xe=M(G,ce);else{Or(I,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ce},!0);try{tf()[c9](G),xe=G}catch(Re){Or(I,1,48,Re&&Oe(Re[w_])?Re[w_]():"Error serializing object",null,!0)}}return xe}return G[fe]=!0,le(G.aiDataContract,function(Re,Qe){var et=Oe(Qe)?Qe()&1:Qe&1,He=Oe(Qe)?Qe()&4:Qe&4,Ye=Qe&2,gt=G[Re]!==void 0,st=Te(G[Re])&&G[Re]!==null;if(et&&!gt&&!Ye)Or(I,1,24,"Missing required field specification. The field is required but not present on source",{field:Re,name:ce});else if(!He){var wt=void 0;st?Ye?wt=M(G[Re],Re):wt=k(G[Re],Re):wt=G[Re],wt!==void 0&&(xe[Re]=wt)}}),delete G[fe],xe}s(k,"_serializeObject");function M(G,ce){var fe;if(G)if(!Je(G))Or(I,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ce},!0);else{fe=[];for(var xe=0;xe<G[Qi];xe++){var Re=G[xe],Qe=k(Re,ce+"["+xe+"]");fe[Sv](Qe)}}return fe}s(M,"_serializeArray");function q(G,ce,fe){var xe;return G&&(xe={},le(G,function(Re,Qe){if(ce==="string")Qe===void 0?xe[Re]="undefined":Qe===null?xe[Re]="null":Qe[w_]?xe[Re]=Qe[w_]():xe[Re]="invalid field: toString() is not defined.";else if(ce==="number")if(Qe===void 0)xe[Re]="undefined";else if(Qe===null)xe[Re]="null";else{var et=parseFloat(Qe);xe[Re]=et}else xe[Re]="invalid field: "+fe+" is of unknown type.",Or(I,1,xe[Re],null,!0)})),xe}s(q,"_serializeStringMap")})}return s(v,"Serializer"),v.__ieDyn=1,v}(),sIt=8,aIt=function(){function v(){}return s(v,"HashCodeScoreGenerator"),v.prototype.getHashCodeScore=function(I){var T=this.getHashCode(I)/v.INT_MAX_VALUE;return T*100},v.prototype.getHashCode=function(I){if(I==="")return 0;for(;I[Qi]<sIt;)I=I[g4](I);for(var T=5381,k=0;k<I[Qi];++k)T=(T<<5)+T+I.charCodeAt(k),T=T&T;return Math.abs(T)},v.INT_MAX_VALUE=2147483647,v}(),cIt=function(){function v(){var I=this,T=new aIt,k=new w4e;I.getSamplingScore=function(M){var q=0;return M[ku]&&M[ku][k.userId]?q=T.getHashCodeScore(M[ku][k.userId]):M.ext&&M.ext.user&&M.ext.user.id?q=T[Ybt](M.ext.user.id):M[ku]&&M[ku][k.operationId]?q=T.getHashCodeScore(M[ku][k.operationId]):M.ext&&M.ext.telemetryTrace&&M.ext.telemetryTrace[a9]?q=T.getHashCodeScore(M.ext.telemetryTrace[a9]):q=Math.random()*100,q}}return s(v,"SamplingScoreGenerator"),v}(),lIt=function(){function v(I,T){this.INT_MAX_VALUE=2147483647;var k=T||u_(null);(I>100||I<0)&&(k.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:I},!0),I=100),this[mW]=I,this.samplingScoreGenerator=new cIt}return s(v,"Sample"),v.prototype.isSampledIn=function(I){var T=this[mW],k=!1;return T==null||T>=100||I.baseType===n9[zy]?!0:(k=this.samplingScoreGenerator.getSamplingScore(I)<T,k)},v}(),js,_v,Ky=void 0,F4e="",uIt=65e3;function O4e(v){try{return v.responseText}catch{}return null}s(O4e,"_getResponseText");function dIt(v){return v&&v.sendPOST}s(dIt,"isOverrideFn");var Q4e=or((js={endpointUrl:QL(ue,lde+c4)},js[Ide]=_m(),js.maxBatchInterval=15e3,js[_4e]=102400,js.disableTelemetry=_m(),js[k4e]=_m(!0),js.isRetryDisabled=_m(),js[Rde]=_m(!0),js[D4e]=_m(!0),js.disableXhr=_m(),js[P4e]=_m(),js[_de]=_m(),js[h9]=Ky,js.namePrefix=Ky,js.samplingPercentage=QL(fIt,100),js[Sde]=Ky,js.convertUndefined=Ky,js.eventsLimitInMem=1e4,js[Tde]=!1,js.httpXHROverride={isVal:dIt,v:Ky},js[R4e]=_m(),js.transports=Ky,js.retryCodes=Ky,js.maxRetryCnt={isVal:lt,v:10},js));function fIt(v){return!isNaN(v)&&v>0&&v<=100}s(fIt,"_chkSampling");var pIt=(_v={},_v[f4.dataType]=N4e,_v[cW.dataType]=nIt,_v[sW.dataType]=tIt,_v[lW.dataType]=rIt,_v[oW.dataType]=Zbt,_v[n9.dataType]=eIt,_v[aW.dataType]=Xbt,_v),U4e=function(v){VS(I,v);function I(){var T=v.call(this)||this;T.priority=1001,T.identifier=zbt;var k,M,q,G,ce,fe,xe,Re=0,Qe,et,He,Ye,gt,st,wt,$t,sr,_r,ni,Hi,$i,Go,wn,tn,Wi,Aa,bs,Wt,rn,Fo,Dt,Qn,La,Vo,zl;return _u(I,T,function(dt,zc){H4e(),dt.pause=function(){uI(),q=!0},dt.resume=function(){q&&(q=!1,M=null,os(),v4())},dt.flush=function(Ve,It,dr){if(Ve===void 0&&(Ve=!0),!q){uI();try{return dt[f9](Ve,null,dr||1)}catch(jr){Or(dt[yd](),1,22,"flush failed, telemetry will not be collected: "+Il(jr),{exception:Qt(jr)})}}},dt.onunloadFlush=function(){if(!q)if(wt||Wt)try{return dt[f9](!0,Xf,2)}catch(Ve){Or(dt[yd](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Il(Ve),{exception:Qt(Ve)})}else dt.flush(!1)},dt.addHeader=function(Ve,It){xe[Ve]=It},dt[wde]=function(Ve,It,dr,jr){dt.isInitialized()&&Or(dt[yd](),1,28,"Sender is already initialized"),zc[wde](Ve,It,dr,jr);var Gn=dt.identifier;ce=new oIt(It.logger),k=0,M=null,dt[p9]=null,fe=0;var Rn=dt[yd]();He=X5e(Og("Sender"),It.evtNamespace&&It.evtNamespace()),et=Vbt(He),dt._addHook(Qg(Ve,function(bo){var wc=bo.cfg;wc.storagePrefix&&gbt(wc.storagePrefix);var op=Xb(null,wc,It),wi=op.getExtCfg(Gn,Q4e),$4e=wi[m9];if(Ye&&$4e===Ye){var Ode=wc[m9];Ode&&Ode!==$4e&&(wi[m9]=Ode)}ht(wi[h9])&&(wi[h9]=wc[h9]),je(dt,"_senderConfig",{g:s(function(){return wi},"g")}),gt!==wi[m9]&&(Ye=gt=wi[m9]),It.activeStatus()===ky.PENDING?dt.pause():It.activeStatus()===ky.ACTIVE&&dt.resume(),_r&&_r!==wi[Sde]&&Yr(_r,function(Du){delete xe[Du.header]}),st=wi[_4e],wt=(wi[_de]===!1||wi[Rde]===!1)&&Qy(),$t=wi[_de]===!1&&Qy(),sr=wi[Rde]===!1&&Qy(),Wt=wi[R4e],rn=!!wi.disableXhr,zl=wi.retryCodes;var Qde=wi[Tde],x4=!!wi[k4e]&&(!!Qde||f4e()),W4e=wi.namePrefix,AIt=x4!==tn||x4&&Aa!==W4e||x4&&Wi!==Qde;if(dt[Yy]){if(AIt)try{dt[Yy]=dt[Yy].createNew(Rn,wi,x4)}catch(Du){Or(dt[yd](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Il(Du),{exception:Qt(Du)})}os()}else dt[Yy]=x4?new L4e(Rn,wi):new Mde(Rn,wi);Aa=W4e,tn=x4,Wi=Qde,Fo=!wi[P4e]&&o_(!0),La=!!wi[D4e],dt._sample=new lIt(wi.samplingPercentage,Rn),Hi=wi[h9],!ht(Hi)&&!q4e(Hi,wc)&&Or(Rn,1,100,"Invalid Instrumentation key "+Hi),_r=wi[Sde],Ae(Ye)&&!l4e(Ye)&&_r&&_r[Qi]>0?Yr(_r,function(Du){T.addHeader(Du.header,Du.value)}):_r=null,bs=wi.enableSendPromise;var j4e=Yl();Vo?Vo.SetConfig(j4e):(Vo=new Vc,Vo[wde](j4e,Rn));var yW=wi.httpXHROverride,CW=null,C9=null,yIt=p$([3,1,2],wi.transports);CW=Vo&&Vo[fW](yIt,!1);var Ude=Vo&&Vo.getFallbackInst();Dt=s(function(Du,B_){return Jr(Ude,Du,B_)},"_xhrSend"),Qn=s(function(Du,B_){return Jr(Ude,Du,B_,!1)},"_fallbackSend"),CW=Wt?yW:CW||yW||Ude,dt[p9]=function(Du,B_){return Jr(CW,Du,B_)},Fo&&(Qe=C4);var qde=p$([3,1],wi.unloadTransports);Fo||(qde=qde.filter(function(Du){return Du!==2})),C9=Vo&&Vo[fW](qde,!0),C9=Wt?yW:C9||yW,(Wt||wi.unloadTransports||!Qe)&&C9&&(Qe=s(function(Du,B_){return Jr(C9,Du,B_)},"_syncUnloadSender")),Qe||(Qe=Dt),ni=wi.disableTelemetry,$i=wi.convertUndefined||Ky,Go=wi.isRetryDisabled,wn=wi.maxBatchInterval}))},dt.processTelemetry=function(Ve,It){It=dt._getTelCtx(It);var dr=It[yd]();try{var jr=Hg(Ve,dr);if(!jr)return;var Gn=lI(Ve,dr);if(!Gn)return;var Rn=ce.serialize(Gn),bo=dt[Yy];os(Rn);var wc={item:Rn,cnt:0};bo[S_](wc),v4()}catch(op){Or(dr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Il(op),{exception:Qt(op)})}dt.processNext(Ve,It)},dt.isCompletelyIdle=function(){return!q&&Re===0&&dt._buffer[__]()===0},dt.getOfflineListener=function(){return et},dt._xhrReadyStateChange=function(Ve,It,dr){if(!Wg(It))return Dm(Ve,It,dr)},dt[f9]=function(Ve,It,dr){Ve===void 0&&(Ve=!0);var jr;if(!q)try{var Gn=dt[Yy];if(ni)Gn[h4]();else if(Gn[__]()>0){var Rn=Gn.getItems();AW(dr||0,Ve),It?jr=It.call(dt,Rn,Ve):jr=dt[p9](Rn,Ve)}uI()}catch(wc){var bo=Lb();(!bo||bo>9)&&Or(dt[yd](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Il(wc),{exception:Qt(wc)})}return jr},dt.getOfflineSupport=function(){return{getUrl:s(function(){return Ye},"getUrl"),createPayload:yt,serialize:ya,batch:Pu,shouldProcess:s(function(Ve){return!!Hg(Ve)},"shouldProcess")}},dt._doTeardown=function(Ve,It){dt.onunloadFlush(),Wb(et,!1),H4e()},dt[R_]=function(Ve,It,dr){if(!Wg(Ve))return nf(Ve,It)},dt[kde]=function(Ve,It){if(!Wg(Ve))return aI(Ve,It)},dt[pW]=function(Ve,It){if(!Wg(Ve))return qg(Ve)},dt._xdrOnLoad=function(Ve,It){if(!Wg(It))return Fa(Ve,It)};function Fa(Ve,It){var dr=O4e(Ve);if(Ve&&(dr+""=="200"||dr===""))k=0,dt[pW](It,0);else{var jr=Kr(dr);jr&&jr[Pde]&&jr[Pde]>jr[Dde]&&!Go?dt[kde](It,jr):dt[R_](It,f$(Ve))}}s(Fa,"_xdrOnLoad");function Yl(){try{var Ve={xdrOnComplete:s(function(dr,jr,Gn){var Rn=cI(Gn);if(Rn)return Fa(dr,Rn)},"xdrOnComplete"),fetchOnComplete:s(function(dr,jr,Gn,Rn){var bo=cI(Rn);if(bo)return Gs(dr.status,bo,dr.url,bo[Qi],dr.statusText,Gn||"")},"fetchOnComplete"),xhrOnComplete:s(function(dr,jr,Gn){var Rn=cI(Gn);if(Rn)return Dm(dr,Rn,Rn[Qi])},"xhrOnComplete"),beaconOnRetry:s(function(dr,jr,Gn){return $g(dr,jr,Gn)},"beaconOnRetry")},It={enableSendPromise:bs,isOneDs:!1,disableCredentials:!1,disableXhr:rn,disableBeacon:!sr,disableBeaconSync:!$t,senderOnCompleteCallBack:Ve};return It}catch{}return null}s(Yl,"_getSendPostMgrConfig");function Dm(Ve,It,dr){Ve.readyState===4&&Gs(Ve.status,It,Ve.responseURL,dr,q5(Ve),O4e(Ve)||Ve.response)}s(Dm,"_xhrReadyStateChange");function nf(Ve,It,dr){Or(dt[yd](),2,26,"Failed to send telemetry.",{message:It}),dt._buffer&&dt._buffer[l9](Ve)}s(nf,"_onError");function aI(Ve,It){for(var dr=[],jr=[],Gn=It.errors.reverse(),Rn=0,bo=Gn;Rn<bo.length;Rn++){var wc=bo[Rn],op=Ve.splice(wc.index,1)[0];dI(wc.statusCode)?jr[Sv](op):dr[Sv](op)}Ve[Qi]>0&&dt[pW](Ve,It[Dde]),dr[Qi]>0&&dt[R_](dr,q5(null,["partial success",It[Dde],"of",It.itemsReceived].join(" "))),jr[Qi]>0&&(y9(jr),Or(dt[yd](),2,40,"Partial success. Delivered: "+Ve[Qi]+", Failed: "+dr[Qi]+". Will retry to send "+jr[Qi]+" our of "+It[Pde]+" items"))}s(aI,"_onPartialSuccess");function qg(Ve,It){dt._buffer&&dt._buffer[l9](Ve)}s(qg,"_onSuccess");function cI(Ve){try{if(Ve){var It=Ve,dr=It.oriPayload;return dr&&dr[Qi]?dr:null}}catch{}return null}s(cI,"_getPayloadArr");function Hg(Ve,It){if(ni)return!1;if(!Ve)return It&&Or(It,1,7,"Cannot send empty telemetry"),!1;if(Ve.baseData&&!Ve[Bde])return It&&Or(It,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ve[Bde]||(Ve[Bde]="EventData"),!dt[p9])return It&&Or(It,1,28,"Sender was not initialized"),!1;if(Tr(Ve))Ve[e4e]=dt._sample[mW];else return It&&Or(It,2,33,"Telemetry item was sampled out and not sent",{SampleRate:dt._sample[mW]}),!1;return!0}s(Hg,"_validate");function lI(Ve,It){var dr=Ve.iKey||Hi,jr=I.constructEnvelope(Ve,dr,It,$i);if(!jr){Or(It,1,47,"Unable to create an AppInsights envelope");return}var Gn=!1;if(Ve[ku]&&Ve[ku][cde]&&(Yr(Ve[ku][cde],function(Rn){try{Rn&&Rn(jr)===!1&&(Gn=!0,X5(It,"Telemetry processor check returns false"))}catch(bo){Or(It,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Il(bo),{exception:Qt(bo)},!0)}}),delete Ve[ku][cde]),!Gn)return jr}s(lI,"_getEnvelope");function ya(Ve){var It=F4e,dr=dt[yd]();try{var jr=Hg(Ve,dr),Gn=null;jr&&(Gn=lI(Ve,dr)),Gn&&(It=ce.serialize(Gn))}catch{}return It}s(ya,"_serialize");function Pu(Ve){var It=F4e;return Ve&&Ve[Qi]&&(It="["+Ve.join(",")+"]"),It}s(Pu,"_batch");function yt(Ve){var It=Zo();return{urlString:Ye,data:Ve,headers:It}}s(yt,"_createPayload");function Tr(Ve){return dt._sample.isSampledIn(Ve)}s(Tr,"_isSampledIn");function Wn(Ve,It,dr,jr){It===200&&Ve?dt._onSuccess(Ve,Ve[Qi]):jr&&dt[R_](Ve,jr)}s(Wn,"_getOnComplete");function Jr(Ve,It,dr,jr){jr===void 0&&(jr=!0);var Gn=s(function(wc,op,wi){return Wn(It,wc,op,wi)},"onComplete"),Rn=jn(It),bo=Ve&&Ve.sendPOST;return bo&&Rn?(jr&&dt._buffer[dW](It),bo(Rn,Gn,!dr)):null}s(Jr,"_doSend");function jn(Ve){if(Je(Ve)&&Ve[Qi]>0){var It=dt[Yy].batchPayloads(Ve),dr=Zo(),jr={data:It,urlString:Ye,headers:dr,disableXhrSync:rn,disableFetchKeepAlive:!Fo,oriPayload:Ve};return jr}return null}s(jn,"_getPayload");function Zo(){try{var Ve=xe||{};return l4e(Ye)&&(Ve[r4e[6]]=r4e[7]),Ve}catch{}return null}s(Zo,"_getHeaders");function os(Ve){var It=Ve?Ve[Qi]:0;return dt[Yy].size()+It>st?((!et||et.isOnline())&&dt[f9](!0,null,10),!0):!1}s(os,"_checkMaxSize");function Gs(Ve,It,dr,jr,Gn,Rn){var bo=null;if(dt._appId||(bo=Kr(Rn),bo&&bo.appId&&(dt._appId=bo.appId)),(Ve<200||Ve>=300)&&Ve!==0){if((Ve===301||Ve===307||Ve===308)&&!Cd(dr)){dt[R_](It,Gn);return}if(et&&!et.isOnline()){if(!Go){var wc=10;y9(It,wc),Or(dt[yd](),2,40,". Offline - Response Code: ".concat(Ve,". Offline status: ").concat(!et.isOnline(),". Will retry to send ").concat(It.length," items."))}return}!Go&&dI(Ve)?(y9(It),Or(dt[yd](),2,40,". Response code "+Ve+". Will retry to send "+It[Qi]+" items.")):dt[R_](It,Gn)}else Cd(dr),Ve===206?(bo||(bo=Kr(Rn)),bo&&!Go?dt[kde](It,bo):dt[R_](It,Gn)):(k=0,dt[pW](It,jr))}s(Gs,"_checkResponsStatus");function Cd(Ve){return fe>=10?!1:!ie(Ve)&&Ve!==""&&Ve!==Ye?(Ye=Ve,++fe,!0):!1}s(Cd,"_checkAndUpdateEndPointUrl");function Xf(Ve,It){if(Qe)Qe(Ve,!1);else{var dr=Vo&&Vo[fW]([3],!0);return Jr(dr,Ve,It)}}s(Xf,"_doUnloadSend");function $g(Ve,It,dr){var jr=Ve,Gn=jr&&jr.oriPayload;if(La)Qn&&Qn(Gn,!0),Or(dt[yd](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Rn=[],bo=0;bo<Gn[Qi];bo++){var wc=Gn[bo],op=[wc],wi=jn(op);dr(wi,It)?dt._onSuccess(op,op[Qi]):Rn[Sv](wc)}Rn[Qi]>0&&(Qn&&Qn(Rn,!0),Or(dt[yd](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s($g,"_onBeaconRetry");function Wg(Ve){try{if(Ve&&Ve[Qi])return Ae(Ve[0])}catch{}return null}s(Wg,"_isStringArr");function C4(Ve,It){var dr=null;if(Je(Ve)){for(var jr=Ve[Qi],Gn=0;Gn<Ve[Qi];Gn++)jr+=Ve[Gn].item[Qi];var Rn=Vo.getSyncFetchPayload();Rn+jr<=uIt?dr=2:Qy()?dr=3:(dr=1,Or(dt[yd](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var bo=Vo&&Vo[fW]([dr],!0);return Jr(bo,Ve,It)}return null}s(C4,"_fetchKeepAliveSender");function y9(Ve,It){if(It===void 0&&(It=1),!(!Ve||Ve[Qi]===0)){var dr=dt[Yy];dr[l9](Ve),k++;for(var jr=0,Gn=Ve;jr<Gn.length;jr++){var Rn=Gn[jr];Rn.cnt=Rn.cnt||0,Rn.cnt++,dr[S_](Rn)}Fde(It),v4()}}s(y9,"_resendPayload");function Fde(Ve){var It=10,dr;if(k<=1)dr=It;else{var jr=(Math.pow(2,k)-1)/2,Gn=Ty(Math.random()*jr*It)+1;Gn=Ve*Gn,dr=Pe(Yn(Gn,3600),It)}var Rn=md()+dr*1e3;M=Rn}s(Fde,"_setRetryTime");function v4(){if(!G&&!q){var Ve=M?Pe(0,M-md()):0,It=Pe(wn,Ve);G=Sy(function(){G=null,dt[f9](!0,null,1)},It)}}s(v4,"_setupTimer");function uI(){G&&G.cancel(),G=null,M=null}s(uI,"_clearScheduledTimer");function dI(Ve){return ie(zl)?Ve===401||Ve===408||Ve===429||Ve===500||Ve===502||Ve===503||Ve===504:zl[Qi]&&zl.indexOf(Ve)>-1}s(dI,"_isRetriable");function gW(){var Ve="getNotifyMgr";return dt.core[Ve]?dt.core[Ve]():dt.core._notificationManager}s(gW,"_getNotifyMgr");function AW(Ve,It){var dr=gW();if(dr&&dr.eventsSendRequest)try{dr.eventsSendRequest(Ve,It)}catch(jr){Or(dt[yd](),1,74,"send request notification failed: "+Il(jr),{exception:Qt(jr)})}}s(AW,"_notifySendRequest");function q4e(Ve,It){var dr=It.disableInstrumentationKeyValidation,jr=ie(dr)?!1:dr;if(jr)return!0;var Gn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Rn=new RegExp(Gn);return Rn.test(Ve)}s(q4e,"_validateInstrumentationKey");function H4e(){dt[p9]=null,dt[Yy]=null,dt._appId=null,dt._sample=null,xe={},et=null,k=0,M=null,q=!1,G=null,ce=null,fe=0,Re=0,Qe=null,He=null,Ye=null,gt=null,st=0,wt=!1,_r=null,ni=!1,Hi=null,$i=Ky,Go=!1,tn=null,Aa=Ky,rn=!1,Fo=!1,La=!1,Dt=null,Qn=null,Vo=null,je(dt,"_senderConfig",{g:s(function(){return d$({},Q4e)},"g")})}s(H4e,"_initDefaults")}),T}return s(I,"Sender"),I.constructEnvelope=function(T,k,M,q){var G;k!==T.iKey&&!ie(k)?G=Pg(Pg({},T),{iKey:k}):G=T;var ce=pIt[G.baseType]||N4e;return ce(M,G,q)},I}(Et),A4="instrumentationKey",hW="connectionString",g9="endpointUrl",A9="userOverrideEndpointUrl",y4,Lde=void 0,mIt=(y4={diagnosticLogInterval:QL(hIt,1e4)},y4[hW]=Lde,y4.endpointUrl=Lde,y4[A4]=Lde,y4.extensionConfig={},y4);function hIt(v){return v&&v>0}s(hIt,"_chkDiagLevel");var gIt=function(){function v(I){var T=new Nt,k;(ie(I)||ie(I[A4])&&ie(I[hW]))&&Vr("Invalid input configuration"),_u(v,this,function(q){je(q,"config",{g:s(function(){return k},"g")}),G(),q.initialize=G,q.track=M,IL(q,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function G(){var ce=Jf(I||{},mIt);k=ce.cfg,T.addUnloadHook(Qg(ce,function(){var fe=k[hW];if(ht(fe)){var xe=D5(function(He,Ye){Gf(fe,function(gt){var st=gt.value,wt=k[A4];if(!gt.rejected&&st){k[hW]=st;var $t=Ade(st);wt=$t.instrumentationkey||wt}He(wt)})}),Re=D5(function(He,Ye){Gf(fe,function(gt){var st=gt.value,wt=k[g9];if(!gt.rejected&&st){var $t=Ade(st),sr=$t.ingestionendpoint;wt=sr?sr+c4:wt}He(wt)})});k[A4]=xe,k[g9]=k[A9]||Re}if(Ae(fe)){var Qe=Ade(fe),et=Qe.ingestionendpoint;k[g9]=k[A9]?k[A9]:et+c4,k[A4]=Qe.instrumentationkey||k[A4]}k[g9]=k[A9]?k[A9]:k[g9]})),T.initialize(k,[new U4e])}s(G,"_initialize")});function M(q){q&&(q.baseData=q.baseData||{},q.baseType=q.baseType||"EventData"),T.track(q)}s(M,"_track")}return s(v,"ApplicationInsights"),v.__ieDyn=1,v}();t.AppInsightsCore=Nt,t.ApplicationInsights=gIt,t.Sender=U4e,t.SeverityLevel=Gbt,t.arrForEach=Yr,t.isNullOrUndefined=ie,t.proxyFunctions=IL,t.throwError=Vr})});var AFe=H(dV=>{"use strict";d();Object.defineProperty(dV,"__esModule",{value:!0});dV.state=void 0;dV.state={instrumenterImplementation:void 0}});var zD=H(($he,cOe)=>{d();var iz=require("buffer"),xC=iz.Buffer;function aOe(t,e){for(var r in t)e[r]=t[r]}s(aOe,"copyProps");xC.from&&xC.alloc&&xC.allocUnsafe&&xC.allocUnsafeSlow?cOe.exports=iz:(aOe(iz,$he),$he.Buffer=K2);function K2(t,e,r){return xC(t,e,r)}s(K2,"SafeBuffer");K2.prototype=Object.create(xC.prototype);aOe(xC,K2);K2.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return xC(t,e,r)};K2.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=xC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};K2.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return xC(t)};K2.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return iz.SlowBuffer(t)}});var Whe=H((oan,lOe)=>{d();var oz=zD().Buffer,bDt=require("stream"),IDt=require("util");function sz(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=oz.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=oz.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(sz,"DataStream");IDt.inherits(sz,bDt);sz.prototype.write=s(function(e){this.buffer=oz.concat([this.buffer,oz.from(e)]),this.emit("data",e)},"write");sz.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");lOe.exports=sz});var dOe=H((can,uOe)=>{"use strict";d();function jhe(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(jhe,"getParamSize");var TDt={ES256:jhe(256),ES384:jhe(384),ES512:jhe(521)};function wDt(t){var e=TDt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(wDt,"getParamBytesForAlg");uOe.exports=wDt});var yOe=H((dan,AOe)=>{"use strict";d();var az=zD().Buffer,pOe=dOe(),cz=128,mOe=0,SDt=32,_Dt=16,RDt=2,hOe=_Dt|SDt|mOe<<6,lz=RDt|mOe<<6;function kDt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(kDt,"base64Url");function gOe(t){if(az.isBuffer(t))return t;if(typeof t=="string")return az.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(gOe,"signatureAsBuffer");function PDt(t,e){t=gOe(t);var r=pOe(e),n=r+1,i=t.length,o=0;if(t[o++]!==hOe)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(cz|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==lz)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==lz)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=az.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,f+Math.max(-m,0),f+u),h=h.toString("base64"),h=kDt(h),h}s(PDt,"derToJose");function fOe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=cz;return i&&--n,n}s(fOe,"countPadding");function DDt(t,e){t=gOe(t);var r=pOe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=fOe(t,0,r),o=fOe(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<cz,f=az.allocUnsafe((u?2:3)+l),p=0;return f[p++]=hOe,u?f[p++]=l:(f[p++]=cz|1,f[p++]=l&255),f[p++]=lz,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=lz,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(DDt,"joseToDer");AOe.exports={derToJose:PDt,joseToDer:DDt}});var vOe=H((man,COe)=>{"use strict";d();var EF=require("buffer").Buffer,Ghe=require("buffer").SlowBuffer;COe.exports=uz;function uz(t,e){if(!EF.isBuffer(t)||!EF.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(uz,"bufferEq");uz.install=function(){EF.prototype.equal=Ghe.prototype.equal=s(function(e){return uz(this,e)},"equal")};var BDt=EF.prototype.equal,NDt=Ghe.prototype.equal;uz.restore=function(){EF.prototype.equal=BDt,Ghe.prototype.equal=NDt}});var Khe=H((Aan,ROe)=>{d();var KD=zD().Buffer,Zm=require("crypto"),EOe=yOe(),xOe=require("util"),MDt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,bF="secret must be a string or buffer",YD="key must be a string or a buffer",LDt="key must be a string, a buffer or an object",zhe=typeof Zm.createPublicKey=="function";zhe&&(YD+=" or a KeyObject",bF+="or a KeyObject");function bOe(t){if(!KD.isBuffer(t)&&typeof t!="string"&&(!zhe||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw mA(YD)}s(bOe,"checkIsPublicKey");function IOe(t){if(!KD.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw mA(LDt)}s(IOe,"checkIsPrivateKey");function FDt(t){if(!KD.isBuffer(t)){if(typeof t=="string")return t;if(!zhe||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw mA(bF)}}s(FDt,"checkIsSecretKey");function Yhe(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Yhe,"fromBase64");function TOe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(TOe,"toBase64");function mA(t){var e=[].slice.call(arguments,1),r=xOe.format.bind(xOe,t).apply(null,e);return new TypeError(r)}s(mA,"typeError");function ODt(t){return KD.isBuffer(t)||typeof t=="string"}s(ODt,"bufferOrString");function IF(t){return ODt(t)||(t=JSON.stringify(t)),t}s(IF,"normalizeInput");function wOe(t){return s(function(r,n){FDt(n),r=IF(r);var i=Zm.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return Yhe(o)},"sign")}s(wOe,"createHmacSigner");var Vhe,QDt="timingSafeEqual"in Zm?s(function(e,r){return e.byteLength!==r.byteLength?!1:Zm.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return Vhe||(Vhe=vOe()),Vhe(e,r)},"timingSafeEqual");function UDt(t){return s(function(r,n,i){var o=wOe(t)(r,i);return QDt(KD.from(n),KD.from(o))},"verify")}s(UDt,"createHmacVerifier");function SOe(t){return s(function(r,n){IOe(n),r=IF(r);var i=Zm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return Yhe(o)},"sign")}s(SOe,"createKeySigner");function _Oe(t){return s(function(r,n,i){bOe(i),r=IF(r),n=TOe(n);var o=Zm.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(_Oe,"createKeyVerifier");function qDt(t){return s(function(r,n){IOe(n),r=IF(r);var i=Zm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:Zm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Zm.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Yhe(o)},"sign")}s(qDt,"createPSSKeySigner");function HDt(t){return s(function(r,n,i){bOe(i),r=IF(r),n=TOe(n);var o=Zm.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:Zm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Zm.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(HDt,"createPSSKeyVerifier");function $Dt(t){var e=SOe(t);return s(function(){var n=e.apply(null,arguments);return n=EOe.derToJose(n,"ES"+t),n},"sign")}s($Dt,"createECDSASigner");function WDt(t){var e=_Oe(t);return s(function(n,i,o){i=EOe.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(WDt,"createECDSAVerifer");function jDt(){return s(function(){return""},"sign")}s(jDt,"createNoneSigner");function GDt(){return s(function(e,r){return r===""},"verify")}s(GDt,"createNoneVerifier");ROe.exports=s(function(e){var r={hs:wOe,rs:SOe,ps:qDt,es:$Dt,none:jDt},n={hs:UDt,rs:_Oe,ps:HDt,es:WDt,none:GDt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw mA(MDt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var Jhe=H((van,kOe)=>{d();var VDt=require("buffer").Buffer;kOe.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||VDt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var LOe=H((ban,MOe)=>{d();var zDt=zD().Buffer,POe=Whe(),YDt=Khe(),KDt=require("stream"),DOe=Jhe(),Xhe=require("util");function BOe(t,e){return zDt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(BOe,"base64url");function JDt(t,e,r){r=r||"utf8";var n=BOe(DOe(t),"binary"),i=BOe(DOe(e),r);return Xhe.format("%s.%s",n,i)}s(JDt,"jwsSecuredInput");function NOe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=YDt(e.alg),a=JDt(e,r,i),c=o.sign(a,n);return Xhe.format("%s.%s",a,c)}s(NOe,"jwsSign");function dz(t){var e=t.secret||t.privateKey||t.key,r=new POe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new POe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(dz,"SignStream");Xhe.inherits(dz,KDt);dz.prototype.sign=s(function(){try{var e=NOe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");dz.sign=NOe;MOe.exports=dz});var GOe=H((wan,jOe)=>{d();var OOe=zD().Buffer,FOe=Whe(),XDt=Khe(),ZDt=require("stream"),QOe=Jhe(),eBt=require("util"),tBt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function rBt(t){return Object.prototype.toString.call(t)==="[object Object]"}s(rBt,"isObject");function nBt(t){if(rBt(t))return t;try{return JSON.parse(t)}catch{return}}s(nBt,"safeJsonParse");function UOe(t){var e=t.split(".",1)[0];return nBt(OOe.from(e,"base64").toString("binary"))}s(UOe,"headerFromJWS");function iBt(t){return t.split(".",2).join(".")}s(iBt,"securedInputFromJWS");function qOe(t){return t.split(".")[2]}s(qOe,"signatureFromJWS");function oBt(t,e){e=e||"utf8";var r=t.split(".")[1];return OOe.from(r,"base64").toString(e)}s(oBt,"payloadFromJWS");function HOe(t){return tBt.test(t)&&!!UOe(t)}s(HOe,"isValidJws");function $Oe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=QOe(t);var i=qOe(t),o=iBt(t),a=XDt(e);return a.verify(o,i,r)}s($Oe,"jwsVerify");function WOe(t,e){if(e=e||{},t=QOe(t),!HOe(t))return null;var r=UOe(t);if(!r)return null;var n=oBt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:qOe(t)}}s(WOe,"jwsDecode");function JD(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new FOe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new FOe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(JD,"VerifyStream");eBt.inherits(JD,ZDt);JD.prototype.verify=s(function(){try{var e=$Oe(this.signature.buffer,this.algorithm,this.key.buffer),r=WOe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");JD.decode=WOe;JD.isValid=HOe;JD.verify=$Oe;jOe.exports=JD});var pz=H(sT=>{d();var VOe=LOe(),fz=GOe(),sBt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];sT.ALGORITHMS=sBt;sT.sign=VOe.sign;sT.verify=fz.verify;sT.decode=fz.decode;sT.isValid=fz.isValid;sT.createSign=s(function(e){return new VOe(e)},"createSign");sT.createVerify=s(function(e){return new fz(e)},"createVerify")});var Zhe=H((Dan,zOe)=>{d();var aBt=pz();zOe.exports=function(t,e){e=e||{};var r=aBt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var TF=H((Nan,YOe)=>{d();var mz=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");mz.prototype=Object.create(Error.prototype);mz.prototype.constructor=mz;YOe.exports=mz});var ege=H((Fan,JOe)=>{d();var KOe=TF(),hz=s(function(t,e){KOe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");hz.prototype=Object.create(KOe.prototype);hz.prototype.constructor=hz;JOe.exports=hz});var tge=H((Uan,ZOe)=>{d();var XOe=TF(),gz=s(function(t,e){XOe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");gz.prototype=Object.create(XOe.prototype);gz.prototype.constructor=gz;ZOe.exports=gz});var rge=H(($an,e7e)=>{d();var XD=1e3,ZD=XD*60,eB=ZD*60,J2=eB*24,cBt=J2*7,lBt=J2*365.25;e7e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return uBt(t);if(r==="number"&&isFinite(t))return e.long?fBt(t):dBt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function uBt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*lBt;case"weeks":case"week":case"w":return r*cBt;case"days":case"day":case"d":return r*J2;case"hours":case"hour":case"hrs":case"hr":case"h":return r*eB;case"minutes":case"minute":case"mins":case"min":case"m":return r*ZD;case"seconds":case"second":case"secs":case"sec":case"s":return r*XD;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(uBt,"parse");function dBt(t){var e=Math.abs(t);return e>=J2?Math.round(t/J2)+"d":e>=eB?Math.round(t/eB)+"h":e>=ZD?Math.round(t/ZD)+"m":e>=XD?Math.round(t/XD)+"s":t+"ms"}s(dBt,"fmtShort");function fBt(t){var e=Math.abs(t);return e>=J2?Az(t,e,J2,"day"):e>=eB?Az(t,e,eB,"hour"):e>=ZD?Az(t,e,ZD,"minute"):e>=XD?Az(t,e,XD,"second"):t+" ms"}s(fBt,"fmtLong");function Az(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(Az,"plural")});var nge=H((Gan,t7e)=>{d();var pBt=rge();t7e.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=pBt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var wF=H((zan,r7e)=>{"use strict";d();var mBt="2.0.0",hBt=Number.MAX_SAFE_INTEGER||9007199254740991,gBt=16,ABt=250,yBt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];r7e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:gBt,MAX_SAFE_BUILD_LENGTH:ABt,MAX_SAFE_INTEGER:hBt,RELEASE_TYPES:yBt,SEMVER_SPEC_VERSION:mBt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var SF=H((Kan,n7e)=>{"use strict";d();var CBt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};n7e.exports=CBt});var tB=H((EC,i7e)=>{"use strict";d();var{MAX_SAFE_COMPONENT_LENGTH:ige,MAX_SAFE_BUILD_LENGTH:vBt,MAX_LENGTH:xBt}=wF(),EBt=SF();EC=i7e.exports={};var bBt=EC.re=[],IBt=EC.safeRe=[],Rr=EC.src=[],TBt=EC.safeSrc=[],kr=EC.t={},wBt=0,oge="[a-zA-Z0-9-]",SBt=[["\\s",1],["\\d",xBt],[oge,vBt]],_Bt=s(t=>{for(let[e,r]of SBt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),mi=s((t,e,r)=>{let n=_Bt(e),i=wBt++;EBt(t,i,e),kr[t]=i,Rr[i]=e,TBt[i]=n,bBt[i]=new RegExp(e,r?"g":void 0),IBt[i]=new RegExp(n,r?"g":void 0)},"createToken");mi("NUMERICIDENTIFIER","0|[1-9]\\d*");mi("NUMERICIDENTIFIERLOOSE","\\d+");mi("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${oge}*`);mi("MAINVERSION",`(${Rr[kr.NUMERICIDENTIFIER]})\\.(${Rr[kr.NUMERICIDENTIFIER]})\\.(${Rr[kr.NUMERICIDENTIFIER]})`);mi("MAINVERSIONLOOSE",`(${Rr[kr.NUMERICIDENTIFIERLOOSE]})\\.(${Rr[kr.NUMERICIDENTIFIERLOOSE]})\\.(${Rr[kr.NUMERICIDENTIFIERLOOSE]})`);mi("PRERELEASEIDENTIFIER",`(?:${Rr[kr.NONNUMERICIDENTIFIER]}|${Rr[kr.NUMERICIDENTIFIER]})`);mi("PRERELEASEIDENTIFIERLOOSE",`(?:${Rr[kr.NONNUMERICIDENTIFIER]}|${Rr[kr.NUMERICIDENTIFIERLOOSE]})`);mi("PRERELEASE",`(?:-(${Rr[kr.PRERELEASEIDENTIFIER]}(?:\\.${Rr[kr.PRERELEASEIDENTIFIER]})*))`);mi("PRERELEASELOOSE",`(?:-?(${Rr[kr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Rr[kr.PRERELEASEIDENTIFIERLOOSE]})*))`);mi("BUILDIDENTIFIER",`${oge}+`);mi("BUILD",`(?:\\+(${Rr[kr.BUILDIDENTIFIER]}(?:\\.${Rr[kr.BUILDIDENTIFIER]})*))`);mi("FULLPLAIN",`v?${Rr[kr.MAINVERSION]}${Rr[kr.PRERELEASE]}?${Rr[kr.BUILD]}?`);mi("FULL",`^${Rr[kr.FULLPLAIN]}$`);mi("LOOSEPLAIN",`[v=\\s]*${Rr[kr.MAINVERSIONLOOSE]}${Rr[kr.PRERELEASELOOSE]}?${Rr[kr.BUILD]}?`);mi("LOOSE",`^${Rr[kr.LOOSEPLAIN]}$`);mi("GTLT","((?:<|>)?=?)");mi("XRANGEIDENTIFIERLOOSE",`${Rr[kr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);mi("XRANGEIDENTIFIER",`${Rr[kr.NUMERICIDENTIFIER]}|x|X|\\*`);mi("XRANGEPLAIN",`[v=\\s]*(${Rr[kr.XRANGEIDENTIFIER]})(?:\\.(${Rr[kr.XRANGEIDENTIFIER]})(?:\\.(${Rr[kr.XRANGEIDENTIFIER]})(?:${Rr[kr.PRERELEASE]})?${Rr[kr.BUILD]}?)?)?`);mi("XRANGEPLAINLOOSE",`[v=\\s]*(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:${Rr[kr.PRERELEASELOOSE]})?${Rr[kr.BUILD]}?)?)?`);mi("XRANGE",`^${Rr[kr.GTLT]}\\s*${Rr[kr.XRANGEPLAIN]}$`);mi("XRANGELOOSE",`^${Rr[kr.GTLT]}\\s*${Rr[kr.XRANGEPLAINLOOSE]}$`);mi("COERCEPLAIN",`(^|[^\\d])(\\d{1,${ige}})(?:\\.(\\d{1,${ige}}))?(?:\\.(\\d{1,${ige}}))?`);mi("COERCE",`${Rr[kr.COERCEPLAIN]}(?:$|[^\\d])`);mi("COERCEFULL",Rr[kr.COERCEPLAIN]+`(?:${Rr[kr.PRERELEASE]})?(?:${Rr[kr.BUILD]})?(?:$|[^\\d])`);mi("COERCERTL",Rr[kr.COERCE],!0);mi("COERCERTLFULL",Rr[kr.COERCEFULL],!0);mi("LONETILDE","(?:~>?)");mi("TILDETRIM",`(\\s*)${Rr[kr.LONETILDE]}\\s+`,!0);EC.tildeTrimReplace="$1~";mi("TILDE",`^${Rr[kr.LONETILDE]}${Rr[kr.XRANGEPLAIN]}$`);mi("TILDELOOSE",`^${Rr[kr.LONETILDE]}${Rr[kr.XRANGEPLAINLOOSE]}$`);mi("LONECARET","(?:\\^)");mi("CARETTRIM",`(\\s*)${Rr[kr.LONECARET]}\\s+`,!0);EC.caretTrimReplace="$1^";mi("CARET",`^${Rr[kr.LONECARET]}${Rr[kr.XRANGEPLAIN]}$`);mi("CARETLOOSE",`^${Rr[kr.LONECARET]}${Rr[kr.XRANGEPLAINLOOSE]}$`);mi("COMPARATORLOOSE",`^${Rr[kr.GTLT]}\\s*(${Rr[kr.LOOSEPLAIN]})$|^$`);mi("COMPARATOR",`^${Rr[kr.GTLT]}\\s*(${Rr[kr.FULLPLAIN]})$|^$`);mi("COMPARATORTRIM",`(\\s*)${Rr[kr.GTLT]}\\s*(${Rr[kr.LOOSEPLAIN]}|${Rr[kr.XRANGEPLAIN]})`,!0);EC.comparatorTrimReplace="$1$2$3";mi("HYPHENRANGE",`^\\s*(${Rr[kr.XRANGEPLAIN]})\\s+-\\s+(${Rr[kr.XRANGEPLAIN]})\\s*$`);mi("HYPHENRANGELOOSE",`^\\s*(${Rr[kr.XRANGEPLAINLOOSE]})\\s+-\\s+(${Rr[kr.XRANGEPLAINLOOSE]})\\s*$`);mi("STAR","(<|>)?=?\\s*\\*");mi("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");mi("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var yz=H((ecn,o7e)=>{"use strict";d();var RBt=Object.freeze({loose:!0}),kBt=Object.freeze({}),PBt=s(t=>t?typeof t!="object"?RBt:t:kBt,"parseOptions");o7e.exports=PBt});var sge=H((ncn,c7e)=>{"use strict";d();var s7e=/^[0-9]+$/,a7e=s((t,e)=>{let r=s7e.test(t),n=s7e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),DBt=s((t,e)=>a7e(e,t),"rcompareIdentifiers");c7e.exports={compareIdentifiers:a7e,rcompareIdentifiers:DBt}});var Bd=H((scn,u7e)=>{"use strict";d();var Cz=SF(),{MAX_LENGTH:l7e,MAX_SAFE_INTEGER:vz}=wF(),{safeRe:xz,t:Ez}=tB(),BBt=yz(),{compareIdentifiers:rB}=sge(),age=class t{static{s(this,"SemVer")}constructor(e,r){if(r=BBt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>l7e)throw new TypeError(`version is longer than ${l7e} characters`);Cz("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?xz[Ez.LOOSE]:xz[Ez.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vz||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vz||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vz||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<vz)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Cz("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),rB(this.major,e.major)||rB(this.minor,e.minor)||rB(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Cz("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return rB(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Cz("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return rB(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?xz[Ez.PRERELEASELOOSE]:xz[Ez.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),rB(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};u7e.exports=age});var X2=H((lcn,f7e)=>{"use strict";d();var d7e=Bd(),NBt=s((t,e,r=!1)=>{if(t instanceof d7e)return t;try{return new d7e(t,e)}catch(n){if(!r)return null;throw n}},"parse");f7e.exports=NBt});var m7e=H((fcn,p7e)=>{"use strict";d();var MBt=X2(),LBt=s((t,e)=>{let r=MBt(t,e);return r?r.version:null},"valid");p7e.exports=LBt});var g7e=H((hcn,h7e)=>{"use strict";d();var FBt=X2(),OBt=s((t,e)=>{let r=FBt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");h7e.exports=OBt});var C7e=H((ycn,y7e)=>{"use strict";d();var A7e=Bd(),QBt=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new A7e(t instanceof A7e?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");y7e.exports=QBt});var E7e=H((xcn,x7e)=>{"use strict";d();var v7e=X2(),UBt=s((t,e)=>{let r=v7e(t,null,!0),n=v7e(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");x7e.exports=UBt});var I7e=H((Icn,b7e)=>{"use strict";d();var qBt=Bd(),HBt=s((t,e)=>new qBt(t,e).major,"major");b7e.exports=HBt});var w7e=H((Scn,T7e)=>{"use strict";d();var $Bt=Bd(),WBt=s((t,e)=>new $Bt(t,e).minor,"minor");T7e.exports=WBt});var _7e=H((kcn,S7e)=>{"use strict";d();var jBt=Bd(),GBt=s((t,e)=>new jBt(t,e).patch,"patch");S7e.exports=GBt});var k7e=H((Bcn,R7e)=>{"use strict";d();var VBt=X2(),zBt=s((t,e)=>{let r=VBt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");R7e.exports=zBt});var eh=H((Lcn,D7e)=>{"use strict";d();var P7e=Bd(),YBt=s((t,e,r)=>new P7e(t,r).compare(new P7e(e,r)),"compare");D7e.exports=YBt});var N7e=H((Qcn,B7e)=>{"use strict";d();var KBt=eh(),JBt=s((t,e,r)=>KBt(e,t,r),"rcompare");B7e.exports=JBt});var L7e=H((Hcn,M7e)=>{"use strict";d();var XBt=eh(),ZBt=s((t,e)=>XBt(t,e,!0),"compareLoose");M7e.exports=ZBt});var bz=H((jcn,O7e)=>{"use strict";d();var F7e=Bd(),e3t=s((t,e,r)=>{let n=new F7e(t,r),i=new F7e(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");O7e.exports=e3t});var U7e=H((zcn,Q7e)=>{"use strict";d();var t3t=bz(),r3t=s((t,e)=>t.sort((r,n)=>t3t(r,n,e)),"sort");Q7e.exports=r3t});var H7e=H((Jcn,q7e)=>{"use strict";d();var n3t=bz(),i3t=s((t,e)=>t.sort((r,n)=>n3t(n,r,e)),"rsort");q7e.exports=i3t});var _F=H((eln,$7e)=>{"use strict";d();var o3t=eh(),s3t=s((t,e,r)=>o3t(t,e,r)>0,"gt");$7e.exports=s3t});var Iz=H((nln,W7e)=>{"use strict";d();var a3t=eh(),c3t=s((t,e,r)=>a3t(t,e,r)<0,"lt");W7e.exports=c3t});var cge=H((sln,j7e)=>{"use strict";d();var l3t=eh(),u3t=s((t,e,r)=>l3t(t,e,r)===0,"eq");j7e.exports=u3t});var lge=H((lln,G7e)=>{"use strict";d();var d3t=eh(),f3t=s((t,e,r)=>d3t(t,e,r)!==0,"neq");G7e.exports=f3t});var Tz=H((fln,V7e)=>{"use strict";d();var p3t=eh(),m3t=s((t,e,r)=>p3t(t,e,r)>=0,"gte");V7e.exports=m3t});var wz=H((hln,z7e)=>{"use strict";d();var h3t=eh(),g3t=s((t,e,r)=>h3t(t,e,r)<=0,"lte");z7e.exports=g3t});var uge=H((yln,Y7e)=>{"use strict";d();var A3t=cge(),y3t=lge(),C3t=_F(),v3t=Tz(),x3t=Iz(),E3t=wz(),b3t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return A3t(t,r,n);case"!=":return y3t(t,r,n);case">":return C3t(t,r,n);case">=":return v3t(t,r,n);case"<":return x3t(t,r,n);case"<=":return E3t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");Y7e.exports=b3t});var J7e=H((xln,K7e)=>{"use strict";d();var I3t=Bd(),T3t=X2(),{safeRe:Sz,t:_z}=tB(),w3t=s((t,e)=>{if(t instanceof I3t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Sz[_z.COERCEFULL]:Sz[_z.COERCE]);else{let l=e.includePrerelease?Sz[_z.COERCERTLFULL]:Sz[_z.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return T3t(`${n}.${i}.${o}${a}${c}`,e)},"coerce");K7e.exports=w3t});var Z7e=H((Iln,X7e)=>{"use strict";d();var dge=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};X7e.exports=dge});var th=H((Sln,nQe)=>{"use strict";d();var S3t=/\s+/g,fge=class t{static{s(this,"Range")}constructor(e,r){if(r=R3t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof pge)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(S3t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!tQe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&L3t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&N3t)|(this.options.loose&&M3t))+":"+e,i=eQe.get(n);if(i)return i;let o=this.options.loose,a=o?m0[Af.HYPHENRANGELOOSE]:m0[Af.HYPHENRANGE];e=e.replace(a,G3t(this.options.includePrerelease)),ra("hyphen replace",e),e=e.replace(m0[Af.COMPARATORTRIM],P3t),ra("comparator trim",e),e=e.replace(m0[Af.TILDETRIM],D3t),ra("tilde trim",e),e=e.replace(m0[Af.CARETTRIM],B3t),ra("caret trim",e);let c=e.split(" ").map(p=>F3t(p,this.options)).join(" ").split(/\s+/).map(p=>j3t(p,this.options));o&&(c=c.filter(p=>(ra("loose invalid filter",p,this.options),!!p.match(m0[Af.COMPARATORLOOSE])))),ra("range list",c);let l=new Map,u=c.map(p=>new pge(p,this.options));for(let p of u){if(tQe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return eQe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>rQe(n,r)&&e.set.some(i=>rQe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new k3t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(V3t(this.set[r],e,this.options))return!0;return!1}};nQe.exports=fge;var _3t=Z7e(),eQe=new _3t,R3t=yz(),pge=RF(),ra=SF(),k3t=Bd(),{safeRe:m0,t:Af,comparatorTrimReplace:P3t,tildeTrimReplace:D3t,caretTrimReplace:B3t}=tB(),{FLAG_INCLUDE_PRERELEASE:N3t,FLAG_LOOSE:M3t}=wF(),tQe=s(t=>t.value==="<0.0.0-0","isNullSet"),L3t=s(t=>t.value==="","isAny"),rQe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),F3t=s((t,e)=>(ra("comp",t,e),t=U3t(t,e),ra("caret",t),t=O3t(t,e),ra("tildes",t),t=H3t(t,e),ra("xrange",t),t=W3t(t,e),ra("stars",t),t),"parseComparator"),yf=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),O3t=s((t,e)=>t.trim().split(/\s+/).map(r=>Q3t(r,e)).join(" "),"replaceTildes"),Q3t=s((t,e)=>{let r=e.loose?m0[Af.TILDELOOSE]:m0[Af.TILDE];return t.replace(r,(n,i,o,a,c)=>{ra("tilde",t,n,i,o,a,c);let l;return yf(i)?l="":yf(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:yf(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(ra("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,ra("tilde return",l),l})},"replaceTilde"),U3t=s((t,e)=>t.trim().split(/\s+/).map(r=>q3t(r,e)).join(" "),"replaceCarets"),q3t=s((t,e)=>{ra("caret",t,e);let r=e.loose?m0[Af.CARETLOOSE]:m0[Af.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{ra("caret",t,i,o,a,c,l);let u;return yf(o)?u="":yf(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:yf(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(ra("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(ra("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),ra("caret return",u),u})},"replaceCaret"),H3t=s((t,e)=>(ra("replaceXRanges",t,e),t.split(/\s+/).map(r=>$3t(r,e)).join(" ")),"replaceXRanges"),$3t=s((t,e)=>{t=t.trim();let r=e.loose?m0[Af.XRANGELOOSE]:m0[Af.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{ra("xRange",t,n,i,o,a,c,l);let u=yf(o),f=u||yf(a),p=f||yf(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),ra("xRange return",n),n})},"replaceXRange"),W3t=s((t,e)=>(ra("replaceStars",t,e),t.trim().replace(m0[Af.STAR],"")),"replaceStars"),j3t=s((t,e)=>(ra("replaceGTE0",t,e),t.trim().replace(m0[e.includePrerelease?Af.GTE0PRE:Af.GTE0],"")),"replaceGTE0"),G3t=s(t=>(e,r,n,i,o,a,c,l,u,f,p,m)=>(yf(n)?r="":yf(i)?r=`>=${n}.0.0${t?"-0":""}`:yf(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,yf(u)?l="":yf(f)?l=`<${+u+1}.0.0-0`:yf(p)?l=`<${u}.${+f+1}.0-0`:m?l=`<=${u}.${f}.${p}-${m}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),V3t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(ra(t[n].semver),t[n].semver!==pge.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var RF=H((kln,lQe)=>{"use strict";d();var kF=Symbol("SemVer ANY"),gge=class t{static{s(this,"Comparator")}static get ANY(){return kF}constructor(e,r){if(r=iQe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),hge("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===kF?this.value="":this.value=this.operator+this.semver.version,hge("comp",this)}parse(e){let r=this.options.loose?oQe[sQe.COMPARATORLOOSE]:oQe[sQe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new aQe(n[2],this.options.loose):this.semver=kF}toString(){return this.value}test(e){if(hge("Comparator.test",e,this.options.loose),this.semver===kF||e===kF)return!0;if(typeof e=="string")try{e=new aQe(e,this.options)}catch{return!1}return mge(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cQe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new cQe(this.value,r).test(e.semver):(r=iQe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||mge(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||mge(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};lQe.exports=gge;var iQe=yz(),{safeRe:oQe,t:sQe}=tB(),mge=uge(),hge=SF(),aQe=Bd(),cQe=th()});var PF=H((Bln,uQe)=>{"use strict";d();var z3t=th(),Y3t=s((t,e,r)=>{try{e=new z3t(e,r)}catch{return!1}return e.test(t)},"satisfies");uQe.exports=Y3t});var fQe=H((Lln,dQe)=>{"use strict";d();var K3t=th(),J3t=s((t,e)=>new K3t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");dQe.exports=J3t});var mQe=H((Qln,pQe)=>{"use strict";d();var X3t=Bd(),Z3t=th(),eNt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new Z3t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new X3t(n,r))}),n},"maxSatisfying");pQe.exports=eNt});var gQe=H((Hln,hQe)=>{"use strict";d();var tNt=Bd(),rNt=th(),nNt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new rNt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new tNt(n,r))}),n},"minSatisfying");hQe.exports=nNt});var CQe=H((jln,yQe)=>{"use strict";d();var Age=Bd(),iNt=th(),AQe=_F(),oNt=s((t,e)=>{t=new iNt(t,e);let r=new Age("0.0.0");if(t.test(r)||(r=new Age("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new Age(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||AQe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||AQe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");yQe.exports=oNt});var xQe=H((zln,vQe)=>{"use strict";d();var sNt=th(),aNt=s((t,e)=>{try{return new sNt(t,e).range||"*"}catch{return null}},"validRange");vQe.exports=aNt});var Rz=H((Jln,TQe)=>{"use strict";d();var cNt=Bd(),IQe=RF(),{ANY:lNt}=IQe,uNt=th(),dNt=PF(),EQe=_F(),bQe=Iz(),fNt=wz(),pNt=Tz(),mNt=s((t,e,r,n)=>{t=new cNt(t,n),e=new uNt(e,n);let i,o,a,c,l;switch(r){case">":i=EQe,o=fNt,a=bQe,c=">",l=">=";break;case"<":i=bQe,o=pNt,a=EQe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dNt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,m=null;if(f.forEach(h=>{h.semver===lNt&&(h=new IQe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");TQe.exports=mNt});var SQe=H((eun,wQe)=>{"use strict";d();var hNt=Rz(),gNt=s((t,e,r)=>hNt(t,e,">",r),"gtr");wQe.exports=gNt});var RQe=H((iun,_Qe)=>{"use strict";d();var ANt=Rz(),yNt=s((t,e,r)=>ANt(t,e,"<",r),"ltr");_Qe.exports=yNt});var DQe=H((aun,PQe)=>{"use strict";d();var kQe=th(),CNt=s((t,e,r)=>(t=new kQe(t,r),e=new kQe(e,r),t.intersects(e,r)),"intersects");PQe.exports=CNt});var NQe=H((uun,BQe)=>{"use strict";d();var vNt=PF(),xNt=eh();BQe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>xNt(f,p,r));for(let f of a)vNt(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var UQe=H((fun,QQe)=>{"use strict";d();var MQe=th(),Cge=RF(),{ANY:yge}=Cge,DF=PF(),vge=eh(),ENt=s((t,e,r={})=>{if(t===e)return!0;t=new MQe(t,r),e=new MQe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=INt(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),bNt=[new Cge(">=0.0.0-0")],LQe=[new Cge(">=0.0.0")],INt=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===yge){if(e.length===1&&e[0].semver===yge)return!0;r.includePrerelease?t=bNt:t=LQe}if(e.length===1&&e[0].semver===yge){if(r.includePrerelease)return!0;e=LQe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=FQe(i,h,r):h.operator==="<"||h.operator==="<="?o=OQe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=vge(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!DF(h,String(i),r)||o&&!DF(h,String(o),r))return null;for(let g of e)if(!DF(h,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(f=f||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=FQe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!DF(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=OQe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!DF(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||m||p)},"simpleSubset"),FQe=s((t,e,r)=>{if(!t)return e;let n=vge(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),OQe=s((t,e,r)=>{if(!t)return e;let n=vge(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");QQe.exports=ENt});var nB=H((hun,$Qe)=>{"use strict";d();var xge=tB(),qQe=wF(),TNt=Bd(),HQe=sge(),wNt=X2(),SNt=m7e(),_Nt=g7e(),RNt=C7e(),kNt=E7e(),PNt=I7e(),DNt=w7e(),BNt=_7e(),NNt=k7e(),MNt=eh(),LNt=N7e(),FNt=L7e(),ONt=bz(),QNt=U7e(),UNt=H7e(),qNt=_F(),HNt=Iz(),$Nt=cge(),WNt=lge(),jNt=Tz(),GNt=wz(),VNt=uge(),zNt=J7e(),YNt=RF(),KNt=th(),JNt=PF(),XNt=fQe(),ZNt=mQe(),e8t=gQe(),t8t=CQe(),r8t=xQe(),n8t=Rz(),i8t=SQe(),o8t=RQe(),s8t=DQe(),a8t=NQe(),c8t=UQe();$Qe.exports={parse:wNt,valid:SNt,clean:_Nt,inc:RNt,diff:kNt,major:PNt,minor:DNt,patch:BNt,prerelease:NNt,compare:MNt,rcompare:LNt,compareLoose:FNt,compareBuild:ONt,sort:QNt,rsort:UNt,gt:qNt,lt:HNt,eq:$Nt,neq:WNt,gte:jNt,lte:GNt,cmp:VNt,coerce:zNt,Comparator:YNt,Range:KNt,satisfies:JNt,toComparators:XNt,maxSatisfying:ZNt,minSatisfying:e8t,minVersion:t8t,validRange:r8t,outside:n8t,gtr:i8t,ltr:o8t,intersects:s8t,simplifyRange:a8t,subset:c8t,SemVer:TNt,re:xge.re,src:xge.src,tokens:xge.t,SEMVER_SPEC_VERSION:qQe.SEMVER_SPEC_VERSION,RELEASE_TYPES:qQe.RELEASE_TYPES,compareIdentifiers:HQe.compareIdentifiers,rcompareIdentifiers:HQe.rcompareIdentifiers}});var jQe=H((Aun,WQe)=>{d();var l8t=nB();WQe.exports=l8t.satisfies(process.version,">=15.7.0")});var VQe=H((Cun,GQe)=>{d();var u8t=nB();GQe.exports=u8t.satisfies(process.version,">=16.9.0")});var Ege=H((xun,zQe)=>{d();var d8t=jQe(),f8t=VQe(),p8t={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},m8t={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};zQe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=p8t[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(d8t)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=m8t[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(f8t){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var bge=H((bun,YQe)=>{d();var h8t=nB();YQe.exports=h8t.satisfies(process.version,"^6.12.0 || >=8.0.0")});var XQe=H((Tun,JQe)=>{d();var Fs=TF(),g8t=ege(),KQe=tge(),A8t=Zhe(),y8t=nge(),C8t=Ege(),v8t=bge(),x8t=pz(),{KeyObject:E8t,createSecretKey:b8t,createPublicKey:I8t}=require("crypto"),Ige=["RS256","RS384","RS512"],T8t=["ES256","ES384","ES512"],Tge=["RS256","RS384","RS512"],w8t=["HS256","HS384","HS512"];v8t&&(Ige.splice(Ige.length,0,"PS256","PS384","PS512"),Tge.splice(Tge.length,0,"PS256","PS384","PS512"));JQe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new Fs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new Fs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new Fs("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new Fs("jwt must be provided"));if(typeof t!="string")return i(new Fs("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new Fs("jwt malformed"));let c;try{c=A8t(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new Fs("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new Fs("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new Fs("error in secret or public key callback: "+f.message));let m=a[2].trim()!=="";if(!m&&p)return i(new Fs("jwt signature is required"));if(m&&!p)return i(new Fs("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new Fs('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof E8t))try{p=I8t(p)}catch{try{p=b8t(typeof p=="string"?Buffer.from(p):p)}catch{return i(new Fs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=w8t:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=Tge:p.asymmetricKeyType==="ec"?r.algorithms=T8t:r.algorithms=Ige),r.algorithms.indexOf(c.header.alg)===-1)return i(new Fs("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new Fs(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new Fs(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{C8t(l.alg,p)}catch(A){return i(A)}let h;try{h=x8t.verify(t,c.header.alg,p)}catch(A){return i(A)}if(!h)return i(new Fs("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new Fs("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new g8t("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new Fs("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new KQe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let A=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return A.some(function(S){return S instanceof RegExp?S.test(b):S===b})}))return i(new Fs("jwt audience invalid. expected: "+A.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new Fs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new Fs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new Fs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new Fs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new Fs("iat required when maxAge is specified"));let A=y8t(r.maxAge,g.iat);if(typeof A>"u")return i(new Fs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(r.clockTolerance||0))return i(new KQe("maxAge exceeded",new Date(A*1e3)))}if(r.complete===!0){let A=c.signature;return i(null,{header:l,payload:g,signature:A})}return i(null,g)})}});var iUe=H((_un,nUe)=>{d();var ZQe=1/0,tUe=9007199254740991,S8t=17976931348623157e292,eUe=NaN,_8t="[object Arguments]",R8t="[object Function]",k8t="[object GeneratorFunction]",P8t="[object String]",D8t="[object Symbol]",B8t=/^\s+|\s+$/g,N8t=/^[-+]0x[0-9a-f]+$/i,M8t=/^0b[01]+$/i,L8t=/^0o[0-7]+$/i,F8t=/^(?:0|[1-9]\d*)$/,O8t=parseInt;function Q8t(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(Q8t,"arrayMap");function U8t(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(U8t,"baseFindIndex");function q8t(t,e,r){if(e!==e)return U8t(t,H8t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(q8t,"baseIndexOf");function H8t(t){return t!==t}s(H8t,"baseIsNaN");function $8t(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s($8t,"baseTimes");function W8t(t,e){return Q8t(e,function(r){return t[r]})}s(W8t,"baseValues");function j8t(t,e){return function(r){return t(e(r))}}s(j8t,"overArg");var kz=Object.prototype,Sge=kz.hasOwnProperty,Pz=kz.toString,G8t=kz.propertyIsEnumerable,V8t=j8t(Object.keys,Object),z8t=Math.max;function Y8t(t,e){var r=rUe(t)||eMt(t)?$8t(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||Sge.call(t,o))&&!(i&&(o=="length"||J8t(o,n)))&&r.push(o);return r}s(Y8t,"arrayLikeKeys");function K8t(t){if(!X8t(t))return V8t(t);var e=[];for(var r in Object(t))Sge.call(t,r)&&r!="constructor"&&e.push(r);return e}s(K8t,"baseKeys");function J8t(t,e){return e=e??tUe,!!e&&(typeof t=="number"||F8t.test(t))&&t>-1&&t%1==0&&t<e}s(J8t,"isIndex");function X8t(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||kz;return t===r}s(X8t,"isPrototype");function Z8t(t,e,r,n){t=_ge(t)?t:uMt(t),r=r&&!n?aMt(r):0;var i=t.length;return r<0&&(r=z8t(i+r,0)),iMt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&q8t(t,e,r)>-1}s(Z8t,"includes");function eMt(t){return tMt(t)&&Sge.call(t,"callee")&&(!G8t.call(t,"callee")||Pz.call(t)==_8t)}s(eMt,"isArguments");var rUe=Array.isArray;function _ge(t){return t!=null&&nMt(t.length)&&!rMt(t)}s(_ge,"isArrayLike");function tMt(t){return Rge(t)&&_ge(t)}s(tMt,"isArrayLikeObject");function rMt(t){var e=wge(t)?Pz.call(t):"";return e==R8t||e==k8t}s(rMt,"isFunction");function nMt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tUe}s(nMt,"isLength");function wge(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(wge,"isObject");function Rge(t){return!!t&&typeof t=="object"}s(Rge,"isObjectLike");function iMt(t){return typeof t=="string"||!rUe(t)&&Rge(t)&&Pz.call(t)==P8t}s(iMt,"isString");function oMt(t){return typeof t=="symbol"||Rge(t)&&Pz.call(t)==D8t}s(oMt,"isSymbol");function sMt(t){if(!t)return t===0?t:0;if(t=cMt(t),t===ZQe||t===-ZQe){var e=t<0?-1:1;return e*S8t}return t===t?t:0}s(sMt,"toFinite");function aMt(t){var e=sMt(t),r=e%1;return e===e?r?e-r:e:0}s(aMt,"toInteger");function cMt(t){if(typeof t=="number")return t;if(oMt(t))return eUe;if(wge(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wge(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(B8t,"");var r=M8t.test(t);return r||L8t.test(t)?O8t(t.slice(2),r?2:8):N8t.test(t)?eUe:+t}s(cMt,"toNumber");function lMt(t){return _ge(t)?Y8t(t):K8t(t)}s(lMt,"keys");function uMt(t){return t?W8t(t,lMt(t)):[]}s(uMt,"values");nUe.exports=Z8t});var sUe=H((Pun,oUe)=>{d();var dMt="[object Boolean]",fMt=Object.prototype,pMt=fMt.toString;function mMt(t){return t===!0||t===!1||hMt(t)&&pMt.call(t)==dMt}s(mMt,"isBoolean");function hMt(t){return!!t&&typeof t=="object"}s(hMt,"isObjectLike");oUe.exports=mMt});var dUe=H((Mun,uUe)=>{d();var aUe=1/0,gMt=17976931348623157e292,cUe=NaN,AMt="[object Symbol]",yMt=/^\s+|\s+$/g,CMt=/^[-+]0x[0-9a-f]+$/i,vMt=/^0b[01]+$/i,xMt=/^0o[0-7]+$/i,EMt=parseInt,bMt=Object.prototype,IMt=bMt.toString;function TMt(t){return typeof t=="number"&&t==RMt(t)}s(TMt,"isInteger");function lUe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(lUe,"isObject");function wMt(t){return!!t&&typeof t=="object"}s(wMt,"isObjectLike");function SMt(t){return typeof t=="symbol"||wMt(t)&&IMt.call(t)==AMt}s(SMt,"isSymbol");function _Mt(t){if(!t)return t===0?t:0;if(t=kMt(t),t===aUe||t===-aUe){var e=t<0?-1:1;return e*gMt}return t===t?t:0}s(_Mt,"toFinite");function RMt(t){var e=_Mt(t),r=e%1;return e===e?r?e-r:e:0}s(RMt,"toInteger");function kMt(t){if(typeof t=="number")return t;if(SMt(t))return cUe;if(lUe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=lUe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(yMt,"");var r=vMt.test(t);return r||xMt.test(t)?EMt(t.slice(2),r?2:8):CMt.test(t)?cUe:+t}s(kMt,"toNumber");uUe.exports=TMt});var pUe=H((Oun,fUe)=>{d();var PMt="[object Number]",DMt=Object.prototype,BMt=DMt.toString;function NMt(t){return!!t&&typeof t=="object"}s(NMt,"isObjectLike");function MMt(t){return typeof t=="number"||NMt(t)&&BMt.call(t)==PMt}s(MMt,"isNumber");fUe.exports=MMt});var AUe=H((qun,gUe)=>{d();var LMt="[object Object]";function FMt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(FMt,"isHostObject");function OMt(t,e){return function(r){return t(e(r))}}s(OMt,"overArg");var QMt=Function.prototype,mUe=Object.prototype,hUe=QMt.toString,UMt=mUe.hasOwnProperty,qMt=hUe.call(Object),HMt=mUe.toString,$Mt=OMt(Object.getPrototypeOf,Object);function WMt(t){return!!t&&typeof t=="object"}s(WMt,"isObjectLike");function jMt(t){if(!WMt(t)||HMt.call(t)!=LMt||FMt(t))return!1;var e=$Mt(t);if(e===null)return!0;var r=UMt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&hUe.call(r)==qMt}s(jMt,"isPlainObject");gUe.exports=jMt});var CUe=H((Wun,yUe)=>{d();var GMt="[object String]",VMt=Object.prototype,zMt=VMt.toString,YMt=Array.isArray;function KMt(t){return!!t&&typeof t=="object"}s(KMt,"isObjectLike");function JMt(t){return typeof t=="string"||!YMt(t)&&KMt(t)&&zMt.call(t)==GMt}s(JMt,"isString");yUe.exports=JMt});var IUe=H((Vun,bUe)=>{d();var XMt="Expected a function",vUe=1/0,ZMt=17976931348623157e292,xUe=NaN,eLt="[object Symbol]",tLt=/^\s+|\s+$/g,rLt=/^[-+]0x[0-9a-f]+$/i,nLt=/^0b[01]+$/i,iLt=/^0o[0-7]+$/i,oLt=parseInt,sLt=Object.prototype,aLt=sLt.toString;function cLt(t,e){var r;if(typeof e!="function")throw new TypeError(XMt);return t=pLt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(cLt,"before");function lLt(t){return cLt(2,t)}s(lLt,"once");function EUe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(EUe,"isObject");function uLt(t){return!!t&&typeof t=="object"}s(uLt,"isObjectLike");function dLt(t){return typeof t=="symbol"||uLt(t)&&aLt.call(t)==eLt}s(dLt,"isSymbol");function fLt(t){if(!t)return t===0?t:0;if(t=mLt(t),t===vUe||t===-vUe){var e=t<0?-1:1;return e*ZMt}return t===t?t:0}s(fLt,"toFinite");function pLt(t){var e=fLt(t),r=e%1;return e===e?r?e-r:e:0}s(pLt,"toInteger");function mLt(t){if(typeof t=="number")return t;if(dLt(t))return xUe;if(EUe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=EUe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(tLt,"");var r=nLt.test(t);return r||iLt.test(t)?oLt(t.slice(2),r?2:8):rLt.test(t)?xUe:+t}s(mLt,"toNumber");bUe.exports=lLt});var BUe=H((Kun,DUe)=>{d();var TUe=nge(),hLt=bge(),gLt=Ege(),wUe=pz(),ALt=iUe(),Dz=sUe(),SUe=dUe(),kge=pUe(),RUe=AUe(),aT=CUe(),yLt=IUe(),{KeyObject:CLt,createSecretKey:vLt,createPrivateKey:xLt}=require("crypto"),kUe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];hLt&&kUe.splice(3,0,"PS256","PS384","PS512");var ELt={expiresIn:{isValid:s(function(t){return SUe(t)||aT(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return SUe(t)||aT(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return aT(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:ALt.bind(null,kUe),message:'"algorithm" must be a valid string enum value'},header:{isValid:RUe,message:'"header" must be an object'},encoding:{isValid:aT,message:'"encoding" must be a string'},issuer:{isValid:aT,message:'"issuer" must be a string'},subject:{isValid:aT,message:'"subject" must be a string'},jwtid:{isValid:aT,message:'"jwtid" must be a string'},noTimestamp:{isValid:Dz,message:'"noTimestamp" must be a boolean'},keyid:{isValid:aT,message:'"keyid" must be a string'},mutatePayload:{isValid:Dz,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Dz,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Dz,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},bLt={iat:{isValid:kge,message:'"iat" should be a number of seconds'},exp:{isValid:kge,message:'"exp" should be a number of seconds'},nbf:{isValid:kge,message:'"nbf" should be a number of seconds'}};function PUe(t,e,r,n){if(!RUe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(PUe,"validate");function ILt(t){return PUe(ELt,!1,t,"options")}s(ILt,"validateOptions");function TLt(t){return PUe(bLt,!0,t,"payload")}s(TLt,"validatePayload");var _Ue={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},wLt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];DUe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof CLt))try{e=xLt(e)}catch{try{e=vLt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{TLt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=wLt.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{ILt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{gLt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=TUe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=TUe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(_Ue).forEach(function(u){let f=_Ue[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&yLt(n),wUe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=wUe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var MUe=H((Zun,NUe)=>{d();NUe.exports={decode:Zhe(),verify:XQe(),sign:BUe(),JsonWebTokenError:TF(),NotBeforeError:ege(),TokenExpiredError:tge()}});var sAe=H((BAn,Rqe)=>{d();function w9t(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=rge(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,m=null,h,g;function A(...y){if(!A.enabled)return;let E=A,b=Number(new Date),S=b-(p||b);E.diff=S,E.prev=p,E.curr=b,p=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let R=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(L,O)=>{if(L==="%%")return"%";R++;let K=r.formatters[O];if(typeof K=="function"){let V=y[R];L=K.call(E,V),y.splice(R,1),R--}return L}),r.formatArgs.call(E,y),(E.log||r.log).apply(E,y)}return s(A,"debug"),A.namespace=f,A.useColors=r.useColors(),A.color=r.selectColor(f),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),"get"),set:s(y=>{m=y},"set")}),typeof r.init=="function"&&r.init(A),A}s(r,"createDebug");function n(f,p){let m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,m=(typeof f=="string"?f:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(f=m[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(f))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(w9t,"setup");Rqe.exports=w9t});var kqe=H((kp,aY)=>{d();kp.formatArgs=_9t;kp.save=R9t;kp.load=k9t;kp.useColors=S9t;kp.storage=P9t();kp.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();kp.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function S9t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(S9t,"useColors");function _9t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+aY.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(_9t,"formatArgs");kp.log=console.debug||console.log||(()=>{});function R9t(t){try{t?kp.storage.setItem("debug",t):kp.storage.removeItem("debug")}catch{}}s(R9t,"save");function k9t(){let t;try{t=kp.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(k9t,"load");function P9t(){try{return localStorage}catch{}}s(P9t,"localstorage");aY.exports=sAe()(kp);var{formatters:D9t}=aY.exports;D9t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Dqe=H((OAn,Pqe)=>{"use strict";d();Pqe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Mqe=H((UAn,Nqe)=>{"use strict";d();var B9t=require("os"),Bqe=require("tty"),nh=Dqe(),{env:iu}=process,fT;nh("no-color")||nh("no-colors")||nh("color=false")||nh("color=never")?fT=0:(nh("color")||nh("colors")||nh("color=true")||nh("color=always"))&&(fT=1);"FORCE_COLOR"in iu&&(iu.FORCE_COLOR==="true"?fT=1:iu.FORCE_COLOR==="false"?fT=0:fT=iu.FORCE_COLOR.length===0?1:Math.min(parseInt(iu.FORCE_COLOR,10),3));function aAe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(aAe,"translateLevel");function cAe(t,e){if(fT===0)return 0;if(nh("color=16m")||nh("color=full")||nh("color=truecolor"))return 3;if(nh("color=256"))return 2;if(t&&!e&&fT===void 0)return 0;let r=fT||0;if(iu.TERM==="dumb")return r;if(process.platform==="win32"){let n=B9t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in iu)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in iu)||iu.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in iu)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(iu.TEAMCITY_VERSION)?1:0;if(iu.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in iu){let n=parseInt((iu.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(iu.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(iu.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(iu.TERM)||"COLORTERM"in iu?1:r}s(cAe,"supportsColor");function N9t(t){let e=cAe(t,t&&t.isTTY);return aAe(e)}s(N9t,"getSupportLevel");Nqe.exports={supportsColor:N9t,stdout:aAe(cAe(!0,Bqe.isatty(1))),stderr:aAe(cAe(!0,Bqe.isatty(2)))}});var Fqe=H((zu,lY)=>{d();var M9t=require("tty"),cY=require("util");zu.init=H9t;zu.log=Q9t;zu.formatArgs=F9t;zu.save=U9t;zu.load=q9t;zu.useColors=L9t;zu.destroy=cY.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");zu.colors=[6,2,3,4,5,1];try{let t=Mqe();t&&(t.stderr||t).level>=2&&(zu.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}zu.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function L9t(){return"colors"in zu.inspectOpts?!!zu.inspectOpts.colors:M9t.isatty(process.stderr.fd)}s(L9t,"useColors");function F9t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+lY.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=O9t()+e+" "+t[0]}s(F9t,"formatArgs");function O9t(){return zu.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(O9t,"getDate");function Q9t(...t){return process.stderr.write(cY.format(...t)+`
`)}s(Q9t,"log");function U9t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(U9t,"save");function q9t(){return process.env.DEBUG}s(q9t,"load");function H9t(t){t.inspectOpts={};let e=Object.keys(zu.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=zu.inspectOpts[e[r]]}s(H9t,"init");lY.exports=sAe()(zu);var{formatters:Lqe}=lY.exports;Lqe.o=function(t){return this.inspectOpts.colors=this.useColors,cY.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Lqe.O=function(t){return this.inspectOpts.colors=this.useColors,cY.inspect(t,this.inspectOpts)}});var TC=H((jAn,lAe)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?lAe.exports=kqe():lAe.exports=Fqe()});var Uqe=H(A0=>{"use strict";d();var $9t=A0&&A0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W9t=A0&&A0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oqe=A0&&A0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$9t(e,t,r);return W9t(e,t),e};Object.defineProperty(A0,"__esModule",{value:!0});A0.req=A0.json=A0.toBuffer=void 0;var j9t=Oqe(require("http")),G9t=Oqe(require("https"));async function Qqe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(Qqe,"toBuffer");A0.toBuffer=Qqe;async function V9t(t){let r=(await Qqe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(V9t,"json");A0.json=V9t;function z9t(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?G9t:j9t).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(z9t,"req");A0.req=z9t});var dAe=H(Pp=>{"use strict";d();var Hqe=Pp&&Pp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Y9t=Pp&&Pp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$qe=Pp&&Pp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hqe(e,t,r);return Y9t(e,t),e},K9t=Pp&&Pp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hqe(e,t,r)};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.Agent=void 0;var J9t=$qe(require("net")),qqe=$qe(require("http")),X9t=require("https");K9t(Uqe(),Pp);var wC=Symbol("AgentBaseInternalState"),uAe=class extends qqe.Agent{static{s(this,"Agent")}constructor(e){super(e),this[wC]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new J9t.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?X9t.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof qqe.Agent)return c.addRequest(e,i);this[wC].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[wC].currentSocket;if(this[wC].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[wC].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[wC]&&(this[wC].defaultPort=e)}get protocol(){return this[wC].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[wC]&&(this[wC].protocol=e)}};Pp.Agent=uAe});var Wqe=H(AB=>{"use strict";d();var Z9t=AB&&AB.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(AB,"__esModule",{value:!0});AB.parseProxyResponse=void 0;var e6t=Z9t(TC()),uY=(0,e6t.default)("https-proxy-agent:parse-proxy-response");function t6t(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),uY("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),uY("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){uY("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=g.split(" "),y=+A[1],E=A.slice(2).join(" "),b={};for(let S of h){if(!S)continue;let R=S.indexOf(":");if(R===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${S}"`));let B=S.slice(0,R).toLowerCase(),L=S.slice(R+1).trimStart(),O=b[B];typeof O=="string"?b[B]=[O,L]:Array.isArray(O)?O.push(L):b[B]=L}uY("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:y,statusText:E,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(t6t,"parseProxyResponse");AB.parseProxyResponse=t6t});var Yqe=H(ih=>{"use strict";d();var r6t=ih&&ih.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),n6t=ih&&ih.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vqe=ih&&ih.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&r6t(e,t,r);return n6t(e,t),e},zqe=ih&&ih.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ih,"__esModule",{value:!0});ih.HttpsProxyAgent=void 0;var fAe=Vqe(require("net")),jqe=Vqe(require("tls")),i6t=zqe(require("assert")),o6t=zqe(TC()),s6t=dAe(),a6t=require("url"),c6t=Wqe(),jF=(0,o6t.default)("https-proxy-agent"),dY=class extends s6t.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new a6t.URL(e):e,this.proxyHeaders=r?.headers??{},jF("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?Gqe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){jF("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=jqe.connect({...this.connectOpts,servername:m})}else jF("Creating `net.Socket`: %o",this.connectOpts),i=fAe.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=fAe.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,c6t.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",l6t),r.secureEndpoint){jF("Upgrading socket connection to TLS");let m=r.servername||r.host;return jqe.connect({...Gqe(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new fAe.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{jF("Replaying proxy buffer for failed request"),(0,i6t.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};dY.protocols=["http","https"];ih.HttpsProxyAgent=dY;function l6t(t){t.resume()}s(l6t,"resume");function Gqe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(Gqe,"omit")});var Xqe=H(oh=>{"use strict";d();var u6t=oh&&oh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),d6t=oh&&oh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jqe=oh&&oh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u6t(e,t,r);return d6t(e,t),e},f6t=oh&&oh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oh,"__esModule",{value:!0});oh.HttpProxyAgent=void 0;var p6t=Jqe(require("net")),m6t=Jqe(require("tls")),h6t=f6t(TC()),g6t=require("events"),A6t=dAe(),Kqe=require("url"),yB=(0,h6t.default)("http-proxy-agent"),fY=class extends A6t.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new Kqe.URL(e):e,this.proxyHeaders=r?.headers??{},yB("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?y6t(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new Kqe.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;yB("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(yB("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),yB("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(yB("Creating `tls.Socket`: %o",this.connectOpts),o=m6t.connect(this.connectOpts)):(yB("Creating `net.Socket`: %o",this.connectOpts),o=p6t.connect(this.connectOpts)),await(0,g6t.once)(o,"connect"),o}};fY.protocols=["http","https"];oh.HttpProxyAgent=fY;function y6t(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(y6t,"omit")});var IHe=H(_Y=>{"use strict";d();Object.defineProperty(_Y,"__esModule",{value:!0});_Y.state=void 0;_Y.state={operationRequestMap:new WeakMap}});function _Ft(){try{return $Ae.default.statSync("/.dockerenv"),!0}catch{return!1}}function RFt(){try{return $Ae.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function WAe(){return HAe===void 0&&(HAe=_Ft()||RFt()),HAe}var $Ae,HAe,QHe=Bm(()=>{d();$Ae=Ne(require("node:fs"),1);s(_Ft,"hasDockerEnv");s(RFt,"hasDockerCGroup");s(WAe,"isDocker")});function EB(){return jAe===void 0&&(jAe=kFt()||WAe()),jAe}var UHe,jAe,kFt,GAe=Bm(()=>{d();UHe=Ne(require("node:fs"),1);QHe();kFt=s(()=>{try{return UHe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(EB,"isInsideContainer")});var VAe,HHe,$He,qHe,gT,zAe=Bm(()=>{d();VAe=Ne(require("node:process"),1),HHe=Ne(require("node:os"),1),$He=Ne(require("node:fs"),1);GAe();qHe=s(()=>{if(VAe.default.platform!=="linux")return!1;if(HHe.default.release().toLowerCase().includes("microsoft"))return!EB();try{return $He.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!EB():!1}catch{return!1}},"isWsl"),gT=VAe.default.env.__IS_WSL_TEST__?qHe:qHe()});var YAe,JF,PFt,DFt,KAe,WHe=Bm(()=>{d();YAe=Ne(require("node:process"),1),JF=Ne(require("node:fs/promises"),1);zAe();zAe();PFt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await JF.default.access(r,JF.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await JF.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),DFt=s(async()=>`${await PFt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"powerShellPathFromWsl"),KAe=s(async()=>gT?DFt():`${YAe.default.env.SYSTEMROOT||YAe.default.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`,"powerShellPath")});function AT(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var jHe=Bm(()=>{d();s(AT,"defineLazyProperty")});async function JAe(){if(VHe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await BFt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var GHe,VHe,zHe,BFt,YHe=Bm(()=>{d();GHe=require("node:util"),VHe=Ne(require("node:process"),1),zHe=require("node:child_process"),BFt=(0,GHe.promisify)(zHe.execFile);s(JAe,"defaultBrowserId")});async function XHe(t,{humanReadableOutput:e=!0}={}){if(KHe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await NFt("osascript",["-e",t,r]);return n.trim()}var KHe,JHe,XAe,NFt,ZHe=Bm(()=>{d();KHe=Ne(require("node:process"),1),JHe=require("node:util"),XAe=require("node:child_process"),NFt=(0,JHe.promisify)(XAe.execFile);s(XHe,"runAppleScript")});async function ZAe(t){return XHe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var e$e=Bm(()=>{d();ZHe();s(ZAe,"bundleName")});async function eye(t=MFt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new kY(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=LFt[n];if(!i)throw new kY(`Unknown browser ID: ${n}`);return i}var t$e,r$e,MFt,LFt,kY,n$e=Bm(()=>{d();t$e=require("node:util"),r$e=require("node:child_process"),MFt=(0,t$e.promisify)(r$e.execFile),LFt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},kY=class extends Error{static{s(this,"UnknownBrowserError")}};s(eye,"defaultBrowser")});async function tye(){if(PY.default.platform==="darwin"){let t=await JAe();return{name:await ZAe(t),id:t}}if(PY.default.platform==="linux"){let{stdout:t}=await FFt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:OFt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(PY.default.platform==="win32")return eye();throw new Error("Only macOS, Linux, and Windows are supported")}var i$e,PY,o$e,FFt,OFt,s$e=Bm(()=>{d();i$e=require("node:util"),PY=Ne(require("node:process"),1),o$e=require("node:child_process");YHe();e$e();n$e();FFt=(0,i$e.promisify)(o$e.execFile),OFt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(tye,"defaultBrowser")});var p$e={};Ca(p$e,{apps:()=>yT,default:()=>ZF,openApp:()=>HFt});async function UFt(){let t=await KAe(),e=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,r=iye.Buffer.from(e,"utf16le").toString("base64"),{stdout:n}=await QFt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function u$e(t){if(typeof t=="string"||Array.isArray(t))return t;let{[c$e]:e}=t;if(!e)throw new Error(`${c$e} is not supported`);return e}function BY({[bB]:t},{wsl:e}){if(e&&gT)return u$e(e);if(!t)throw new Error(`${bB} is not supported`);return u$e(t)}var nye,iye,oye,d$e,f$e,sye,DY,QFt,rye,a$e,bB,c$e,l$e,XF,qFt,HFt,yT,ZF,NY=Bm(()=>{d();nye=Ne(require("node:process"),1),iye=require("node:buffer"),oye=Ne(require("node:path"),1),d$e=require("node:url"),f$e=require("node:util"),sye=Ne(require("node:child_process"),1),DY=Ne(require("node:fs/promises"),1);WHe();jHe();s$e();GAe();QFt=(0,f$e.promisify)(sye.default.execFile),rye=oye.default.dirname((0,d$e.fileURLToPath)(importMetaUrlShim)),a$e=oye.default.join(rye,"xdg-open"),{platform:bB,arch:c$e}=nye.default;s(UFt,"getWindowsDefaultBrowserFromWsl");l$e=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),XF=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return l$e(t.app,c=>XF({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return l$e(e,c=>XF({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=gT?await UFt():await tye();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),XF({...t,app:{name:yT[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(bB==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(bB==="win32"||gT&&!EB()&&!e){n=await KAe(),i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),gT||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=iye.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!rye||rye==="/",l=!1;try{await DY.default.access(a$e,DY.constants.X_OK),l=!0}catch{}n=nye.default.versions.electron??(bB==="android"||c||!l)?"xdg-open":a$e}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}bB==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=sye.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),qFt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return XF({...e,target:t})},"open"),HFt=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return XF({...e,app:{name:t,arguments:r}})},"openApp");s(u$e,"detectArchBinary");s(BY,"detectPlatformBinary");yT={};AT(yT,"chrome",()=>BY({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));AT(yT,"brave",()=>BY({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}}));AT(yT,"firefox",()=>BY({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));AT(yT,"edge",()=>BY({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));AT(yT,"browser",()=>"browser");AT(yT,"browserPrivate",()=>"browserPrivate");ZF=qFt});var q$e=H(DC=>{"use strict";d();Object.defineProperty(DC,"__esModule",{value:!0});DC.bytePairEncode=DC.BinaryMap=DC.binaryMapKey=void 0;var hOt=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");DC.binaryMapKey=hOt;var Eye=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,DC.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,DC.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};DC.BinaryMap=Eye;var PC=new Int32Array(128),Ef=new Int32Array(128);function gOt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;PC.length<r*2;)Ef=new Int32Array(Ef.length*2),PC=new Int32Array(PC.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Ef[l]=l,PC[l]=u}Ef[r-1]=r-1,PC[r-1]=2147483647,Ef[r]=r,PC[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Ef[l],Ef[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){PC[Ef[i]]=a(i,1),i>0&&(PC[Ef[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Ef[l]=Ef[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=PC[Ef[l]];PC[Ef[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Ef[l],Ef[l+1]));return c}s(gOt,"bytePairEncode");DC.bytePairEncode=gOt});var H$e=H(jY=>{"use strict";d();Object.defineProperty(jY,"__esModule",{value:!0});jY.makeTextEncoder=void 0;var bye=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},Iye=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},AOt=s(()=>typeof Buffer<"u"?new Iye:new bye,"makeTextEncoder");jY.makeTextEncoder=AOt});var $$e=H(GY=>{"use strict";d();Object.defineProperty(GY,"__esModule",{value:!0});GY.LRUCache=void 0;var Tye=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new wye(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};GY.LRUCache=Tye;var wye=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var _ye=H(zY=>{"use strict";d();Object.defineProperty(zY,"__esModule",{value:!0});zY.TikTokenizer=void 0;var VY=q$e(),yOt=H$e(),COt=$$e();function vOt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(vOt,"loadTikTokenBpe");function xOt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(xOt,"escapeRegExp");var Sye=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,yOt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new COt.LRUCache(i);let o=typeof e=="string"?vOt(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new VY.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>xOt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,VY.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let m=o-a;a+=m,c+=f.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(f),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(f,[h]),a+1<=o)a++,c+=f.length,r.push(h);else break;else{let g=(0,VY.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let A of g)r.push(A)}else{let A=o-a;a+=A,c+=f.length;for(let y=0;y<A;y++)r.push(g[y]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,A=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(A);){let y=g[0],E=this.cache.get(y);if(E)a+=E.length,c+=y.length,i.push(...E),l.set(a,c);else{let b=this.textEncoder.encode(y),S=this.encoder.get(b);if(S!==void 0)this.cache.set(y,[S]),a++,c+=y.length,i.push(S),l.set(a,c);else{let R=(0,VY.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(y,R),a+=R.length,c+=y.length;for(let B of R)i.push(B);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[m,h]of l)if(m>=u){f=m,p=h;break}if(f>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};zY.TikTokenizer=Sye});var Z$e=H(nl=>{"use strict";d();Object.defineProperty(nl,"__esModule",{value:!0});nl.createTokenizer=nl.createByEncoderName=nl.createByModelName=nl.getRegexByModel=nl.getRegexByEncoder=nl.getSpecialTokensByModel=nl.getSpecialTokensByEncoder=nl.MODEL_TO_ENCODING=void 0;var EOt=_ye(),bOt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);nl.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var YY="<|endoftext|>",W$e="<|fim_prefix|>",j$e="<|fim_middle|>",G$e="<|fim_suffix|>",V$e="<|endofprompt|>",dO="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",z$e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",IOt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Y$e=IOt.join("|");function Rye(t){let e="";if(nl.MODEL_TO_ENCODING.has(t))e=nl.MODEL_TO_ENCODING.get(t);else for(let[r,n]of bOt)if(t.startsWith(r)){e=n;break}return e}s(Rye,"getEncoderFromModelName");async function TOt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(TOt,"fetchAndSaveFile");function kye(t){let e=new Map([[YY,50256]]);switch(t){case"o200k_base":e=new Map([[YY,199999],[V$e,200018]]);break;case"cl100k_base":e=new Map([[YY,100257],[W$e,100258],[j$e,100259],[G$e,100260],[V$e,100276]]);break;case"p50k_edit":e=new Map([[YY,50256],[W$e,50281],[j$e,50282],[G$e,50283]]);break;default:break}return e}s(kye,"getSpecialTokensByEncoder");nl.getSpecialTokensByEncoder=kye;function wOt(t){let e=Rye(t);return kye(e)}s(wOt,"getSpecialTokensByModel");nl.getSpecialTokensByModel=wOt;function K$e(t){switch(t){case"o200k_base":return Y$e;case"cl100k_base":return z$e;default:break}return dO}s(K$e,"getRegexByEncoder");nl.getRegexByEncoder=K$e;function SOt(t){let e=Rye(t);return K$e(e)}s(SOt,"getRegexByModel");nl.getRegexByModel=SOt;async function _Ot(t,e=null){return J$e(Rye(t),e)}s(_Ot,"createByModelName");nl.createByModelName=_Ot;async function J$e(t,e=null){let r,n,i=kye(t);switch(t){case"o200k_base":r=Y$e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=z$e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=dO,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await TOt(n,u),console.log(`Saved file to ${u}`)),X$e(u,i,r)}s(J$e,"createByEncoderName");nl.createByEncoderName=J$e;function X$e(t,e,r,n=8192){return new EOt.TikTokenizer(t,e,r,n)}s(X$e,"createTokenizer");nl.createTokenizer=X$e});var eWe=H(il=>{"use strict";d();Object.defineProperty(il,"__esModule",{value:!0});il.createTokenizer=il.createByEncoderName=il.createByModelName=il.getSpecialTokensByModel=il.getSpecialTokensByEncoder=il.getRegexByModel=il.getRegexByEncoder=il.MODEL_TO_ENCODING=il.TikTokenizer=void 0;var ROt=_ye();Object.defineProperty(il,"TikTokenizer",{enumerable:!0,get:s(function(){return ROt.TikTokenizer},"get")});var vT=Z$e();Object.defineProperty(il,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return vT.MODEL_TO_ENCODING},"get")});Object.defineProperty(il,"getRegexByEncoder",{enumerable:!0,get:s(function(){return vT.getRegexByEncoder},"get")});Object.defineProperty(il,"getRegexByModel",{enumerable:!0,get:s(function(){return vT.getRegexByModel},"get")});Object.defineProperty(il,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return vT.getSpecialTokensByEncoder},"get")});Object.defineProperty(il,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return vT.getSpecialTokensByModel},"get")});Object.defineProperty(il,"createByModelName",{enumerable:!0,get:s(function(){return vT.createByModelName},"get")});Object.defineProperty(il,"createByEncoderName",{enumerable:!0,get:s(function(){return vT.createByEncoderName},"get")});Object.defineProperty(il,"createTokenizer",{enumerable:!0,get:s(function(){return vT.createTokenizer},"get")})});var Qye=H((gBn,bWe)=>{"use strict";d();bWe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var TWe=H((CBn,IWe)=>{"use strict";d();var aUt=Qye();function cUt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=aUt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(cUt,"parsePath");IWe.exports=cUt});var PWe=H((EBn,kWe)=>{"use strict";d();var lUt=TWe();function uUt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(uUt,"_interopDefaultLegacy");var dUt=uUt(lUt);function fUt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(fUt,"getAugmentedNamespace");var SWe={},pUt="text/plain",mUt="us-ascii",wWe=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),hUt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===mUt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==pUt)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function gUt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return hUt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],m=f.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];wWe(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])wWe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(gUt,"normalizeUrl");var AUt=Object.freeze({__proto__:null,default:gUt}),yUt=fUt(AUt);Object.defineProperty(SWe,"__esModule",{value:!0});var CUt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vUt=yUt,xUt=_We(vUt),EUt=dUt.default,bUt=_We(EUt);function _We(t){return t&&t.__esModule?t:{default:t}}s(_We,"_interopRequireDefault");var RWe=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":CUt(r))!=="object"&&(r={stripHash:!1}),e=(0,xUt.default)(e,r));var o=(0,bUt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");RWe.MAX_INPUT_LENGTH=2048;var IUt=SWe.default=RWe;kWe.exports=IUt});var NWe=H((TBn,BWe)=>{"use strict";d();var TUt=Qye();function DWe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=TUt(t);if(t=t.substring(t.indexOf("://")+3),DWe(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(DWe,"isSsh");BWe.exports=DWe});var FWe=H((_Bn,LWe)=>{"use strict";d();var wUt=PWe(),MWe=NWe();function SUt(t){let e=wUt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),MWe(e.protocols)||e.protocols.length===0&&MWe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(SUt,"gitUp");LWe.exports=SUt});var QWe=H((PBn,OWe)=>{"use strict";d();var _Ut=FWe();function Uye(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=_Ut(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return Uye.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var A=o.length>a&&o[a+1]==="-"?a+1:a;o.length>A+2&&["raw","src","blob","tree","edit"].indexOf(o[A+1])>=0&&(n.filepathtype=o[A+1],n.ref=o[A+2],o.length>A+3&&(n.filepath=o.slice(A+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var y=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,E=y.exec(n.pathname);return E!=null&&(n.source="bitbucket-server",E[1]==="users"?n.owner="~"+E[2]:n.owner=E[2],n.organization=n.owner,n.name=E[3],o=E[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=PUt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Uye,"gitUrlParse");Uye.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?RUt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+kUt(t)+i;default:return t.href}};function RUt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(RUt,"buildToken");function kUt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(kUt,"buildPath");function PUt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(PUt,"findLongestMatchingSubstring");OWe.exports=Uye});var GWe=H((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var E=0,b=1;;){var S=t[e++];if(E+=(127&S)*b,b*=128,!(128&S))break}return E}s(n,"_");function i(){var E=n();return UTF8ArrayToString(t,(e+=E)-E,E)}s(i,"n");function o(E,b){if(E)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(f=n(),p=0;p<f;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var A=n();A--;){var y=i();256&n()&&u.tlsExports.add(y)}else if(h===4)for(A=n();A--;)i(),y=i(),(3&n())==1&&u.weakImports.add(y);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let A=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),y=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,E=e.substr(y,100).split(`
`)[0],b,S=E.match(QUERY_WORD_REGEX)[0];switch(A){case 2:b=new RangeError(`Bad node name '${S}'`);break;case 3:b=new RangeError(`Bad field name '${S}'`);break;case 4:b=new RangeError(`Bad capture name @${S}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${y}: '${E}'...`),S="";break;default:b=new SyntaxError(`Bad syntax at offset ${y}: '${E}'...`),S=""}throw b.index=y,b.length=S.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let A=0;A<a;A++){let y=C._ts_query_capture_name_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");l[A]=UTF8ToString(y,E)}for(let A=0;A<o;A++){let y=C._ts_query_string_value_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");u[A]=UTF8ToString(y,E)}let f=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let A=0;A<c;A++){let y=C._ts_query_predicates_for_pattern(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");h[A]=[],g[A]=[];let b=[],S=y;for(let R=0;R<E;R++){let B=getValue(S,"i32");S+=SIZE_OF_INT;let L=getValue(S,"i32");if(S+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[L]});else if(B===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[L]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=b[0].value,K=!0;switch(O){case"not-eq?":K=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let U=b[1].name,Z=b[2].name;g[A].push(function(J){let j,$;for(let X of J)X.name===U&&(j=X.node),X.name===Z&&($=X.node);return j===void 0||$===void 0||j.text===$.text===K})}else{let U=b[1].name,Z=b[2].value;g[A].push(function(J){for(let j of J)if(j.name===U)return j.node.text===Z===K;return!0})}break;case"not-match?":K=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let V=b[1].name,z=new RegExp(b[2].value);g[A].push(function(U){for(let Z of U)if(Z.name===V)return z.test(Z.node.text)===K;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[A]||(f[A]={}),f[A][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let Q=O==="is?"?p:m;Q[A]||(Q[A]={}),Q[A][b[1].value]=b[2]?b[2].value:null;break;default:h[A].push({operator:O,operands:b.slice(1)})}b.length=0}}Object.freeze(f[A]),Object.freeze(p[A]),Object.freeze(m[A])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(f),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,A),this.textPredicates[h].every(y=>y(A))){u[f++]={pattern:h,captures:A};let y=this.setProperties[h];y&&(u[m].setProperties=y);let E=this.assertedProperties[h];E&&(u[m].assertedProperties=E);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[h].every(y=>y(f))){let y=f[A],E=this.setProperties[h];E&&(y.setProperties=E);let b=this.assertedProperties[h];b&&(y.assertedProperties=b);let S=this.refutedProperties[h];S&&(y.refutedProperties=S),u.push(y)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var wCe=H((OLn,Sje)=>{d();var TCe=require("fs"),HK=require("path"),MO=HK.join,pHt=HK.dirname,Tje=TCe.accessSync&&function(t){try{TCe.accessSync(t)}catch{return!1}return!0}||TCe.existsSync||HK.existsSync,wje={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function mHt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(wje).map(function(l){l in t||(t[l]=wje[l])}),t.module_root||(t.module_root=hHt(__filename)),HK.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=MO.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(mHt,"bindings");Sje.exports=mHt;function hHt(t){for(var e=pHt(t),r;;){if(e==="."&&(e=process.cwd()),Tje(MO(e,"dist")))return MO(e,"dist");if(Tje(MO(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=MO(e,"..")}}s(hHt,"getRoot")});var Rje=H((qLn,_je)=>{d();_je.exports=wCe()("node_sqlite3.node")});var Dje=H(Pje=>{d();var gHt=require("util");function AHt(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return gHt.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=kje(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+kje(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(AHt,"extendTrace");Pje.extendTrace=AHt;function kje(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(kje,"filter")});var Lje=H((Nje,Mje)=>{d();var yHt=require("path"),ph=Rje(),QB=require("events").EventEmitter;Mje.exports=Nje=ph;function UB(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new $K(this,e,r);return t.call(this,i,n)}}s(UB,"normalizeMethod");function _Ce(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(_Ce,"inherits");ph.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new If(t,e,r);let n;if(t=yHt.resolve(t),!ph.cached.objects[t])n=ph.cached.objects[t]=new If(t,e,r);else{n=ph.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var If=ph.Database,$K=ph.Statement,SCe=ph.Backup;_Ce(If,QB);_Ce($K,QB);_Ce(SCe,QB);If.prototype.prepare=UB(function(t,e){return e.length?t.bind.apply(t,e):t});If.prototype.run=UB(function(t,e){return t.run.apply(t,e).finalize(),this});If.prototype.get=UB(function(t,e){return t.get.apply(t,e).finalize(),this});If.prototype.all=UB(function(t,e){return t.all.apply(t,e).finalize(),this});If.prototype.each=UB(function(t,e){return t.each.apply(t,e).finalize(),this});If.prototype.map=UB(function(t,e){return t.map.apply(t,e).finalize(),this});If.prototype.backup=function(){let t;return arguments.length<=2?t=new SCe(this,arguments[0],"main","main",!0,arguments[1]):t=new SCe(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[ph.BUSY,ph.LOCKED],t};$K.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var Bje=!1,RCe=["trace","profile","change"];If.prototype.addListener=If.prototype.on=function(t){let e=QB.prototype.addListener.apply(this,arguments);return RCe.indexOf(t)>=0&&this.configure(t,!0),e};If.prototype.removeListener=function(t){let e=QB.prototype.removeListener.apply(this,arguments);return RCe.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};If.prototype.removeAllListeners=function(t){let e=QB.prototype.removeAllListeners.apply(this,arguments);return RCe.indexOf(t)>=0&&this.configure(t,!1),e};ph.verbose=function(){if(!Bje){let t=Dje();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(If.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace($K.prototype,e)}),Bje=!0}return ph}});var rJ=H(al=>{"use strict";d();Object.defineProperty(al,"__esModule",{value:!0});al.thenable=al.typedArray=al.stringArray=al.array=al.func=al.error=al.number=al.string=al.boolean=void 0;function vHt(t){return t===!0||t===!1}s(vHt,"boolean");al.boolean=vHt;function qje(t){return typeof t=="string"||t instanceof String}s(qje,"string");al.string=qje;function xHt(t){return typeof t=="number"||t instanceof Number}s(xHt,"number");al.number=xHt;function EHt(t){return t instanceof Error}s(EHt,"error");al.error=EHt;function Hje(t){return typeof t=="function"}s(Hje,"func");al.func=Hje;function $je(t){return Array.isArray(t)}s($je,"array");al.array=$je;function bHt(t){return $je(t)&&t.every(e=>qje(e))}s(bHt,"stringArray");al.stringArray=bHt;function IHt(t,e){return Array.isArray(t)&&t.every(e)}s(IHt,"typedArray");al.typedArray=IHt;function THt(t){return t&&Hje(t.then)}s(THt,"thenable");al.thenable=THt});var DCe=H(mh=>{"use strict";d();Object.defineProperty(mh,"__esModule",{value:!0});mh.generateUuid=mh.parse=mh.isUUID=mh.v4=mh.empty=void 0;var OO=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},QO=class t extends OO{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};QO._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];QO._timeHighBits=["8","9","a","b"];mh.empty=new OO("00000000-0000-0000-0000-000000000000");function Wje(){return new QO}s(Wje,"v4");mh.v4=Wje;var wHt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function jje(t){return wHt.test(t)}s(jje,"isUUID");mh.isUUID=jje;function SHt(t){if(!jje(t))throw new Error("invalid uuid");return new OO(t)}s(SHt,"parse");mh.parse=SHt;function _Ht(){return Wje().asHex()}s(_Ht,"generateUuid");mh.generateUuid=_Ht});var Gje=H(PT=>{"use strict";d();Object.defineProperty(PT,"__esModule",{value:!0});PT.attachPartialResult=PT.ProgressFeature=PT.attachWorkDone=void 0;var kT=pi(),RHt=DCe(),CR=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,{kind:"end"})}};CR.Instances=new Map;var nJ=class extends CR{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new kT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},UO=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},iJ=class extends UO{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new kT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function kHt(t,e){if(e===void 0||e.workDoneToken===void 0)return new UO;let r=e.workDoneToken;return delete e.workDoneToken,new CR(t,r)}s(kHt,"attachWorkDone");PT.attachWorkDone=kHt;var PHt=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(kT.WorkDoneProgressCancelNotification.type,r=>{let n=CR.Instances.get(r.token);(n instanceof nJ||n instanceof iJ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new UO:new CR(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,RHt.generateUuid)();return this.connection.sendRequest(kT.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new nJ(this.connection,e))}else return Promise.resolve(new iJ)}},"ProgressFeature");PT.ProgressFeature=PHt;var BCe;(function(t){t.type=new kT.ProgressType})(BCe||(BCe={}));var NCe=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(BCe.type,this._token,e)}};function DHt(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new NCe(t,r)}s(DHt,"attachPartialResult");PT.attachPartialResult=DHt});var Vje=H(oJ=>{"use strict";d();Object.defineProperty(oJ,"__esModule",{value:!0});oJ.ConfigurationFeature=void 0;var BHt=pi(),NHt=rJ(),MHt=s(t=>class extends t{getConfiguration(e){return e?NHt.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(BHt.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");oJ.ConfigurationFeature=MHt});var zje=H(aJ=>{"use strict";d();Object.defineProperty(aJ,"__esModule",{value:!0});aJ.WorkspaceFoldersFeature=void 0;var sJ=pi(),LHt=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new sJ.Emitter,this.connection.onNotification(sJ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(sJ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(sJ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");aJ.WorkspaceFoldersFeature=LHt});var Yje=H(cJ=>{"use strict";d();Object.defineProperty(cJ,"__esModule",{value:!0});cJ.CallHierarchyFeature=void 0;var MCe=pi(),FHt=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(MCe.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=MCe.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=MCe.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");cJ.CallHierarchyFeature=FHt});var FCe=H(DT=>{"use strict";d();Object.defineProperty(DT,"__esModule",{value:!0});DT.SemanticTokensBuilder=DT.SemanticTokensDiff=DT.SemanticTokensFeature=void 0;var lJ=pi(),OHt=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(lJ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=lJ.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=lJ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=lJ.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");DT.SemanticTokensFeature=OHt;var uJ=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};DT.SemanticTokensDiff=uJ;var LCe=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new uJ(this._prevData,this._data).computeDiff()}:this.build()}};DT.SemanticTokensBuilder=LCe});var Kje=H(dJ=>{"use strict";d();Object.defineProperty(dJ,"__esModule",{value:!0});dJ.ShowDocumentFeature=void 0;var QHt=pi(),UHt=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(QHt.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");dJ.ShowDocumentFeature=UHt});var Jje=H(fJ=>{"use strict";d();Object.defineProperty(fJ,"__esModule",{value:!0});fJ.FileOperationsFeature=void 0;var HB=pi(),qHt=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(HB.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(HB.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(HB.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(HB.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(HB.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(HB.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");fJ.FileOperationsFeature=qHt});var Xje=H(pJ=>{"use strict";d();Object.defineProperty(pJ,"__esModule",{value:!0});pJ.LinkedEditingRangeFeature=void 0;var HHt=pi(),$Ht=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(HHt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");pJ.LinkedEditingRangeFeature=$Ht});var Zje=H(mJ=>{"use strict";d();Object.defineProperty(mJ,"__esModule",{value:!0});mJ.TypeHierarchyFeature=void 0;var OCe=pi(),WHt=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(OCe.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=OCe.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=OCe.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");mJ.TypeHierarchyFeature=WHt});var tGe=H(hJ=>{"use strict";d();Object.defineProperty(hJ,"__esModule",{value:!0});hJ.InlineValueFeature=void 0;var eGe=pi(),jHt=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(eGe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(eGe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");hJ.InlineValueFeature=jHt});var nGe=H(gJ=>{"use strict";d();Object.defineProperty(gJ,"__esModule",{value:!0});gJ.FoldingRangeFeature=void 0;var rGe=pi(),GHt=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(rGe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=rGe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");gJ.FoldingRangeFeature=GHt});var iGe=H(AJ=>{"use strict";d();Object.defineProperty(AJ,"__esModule",{value:!0});AJ.InlayHintFeature=void 0;var QCe=pi(),VHt=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(QCe.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(QCe.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(QCe.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");AJ.InlayHintFeature=VHt});var oGe=H(yJ=>{"use strict";d();Object.defineProperty(yJ,"__esModule",{value:!0});yJ.DiagnosticFeature=void 0;var qO=pi(),zHt=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(qO.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(qO.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(qO.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(qO.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(qO.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");yJ.DiagnosticFeature=zHt});var qCe=H(CJ=>{"use strict";d();Object.defineProperty(CJ,"__esModule",{value:!0});CJ.TextDocuments=void 0;var vR=pi(),UCe=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new vR.Emitter,this._onDidOpen=new vR.Emitter,this._onDidClose=new vR.Emitter,this._onDidSave=new vR.Emitter,this._onWillSave=new vR.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=vR.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),vR.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};CJ.TextDocuments=UCe});var $Ce=H($B=>{"use strict";d();Object.defineProperty($B,"__esModule",{value:!0});$B.NotebookDocuments=$B.NotebookSyncFeature=void 0;var hh=pi(),sGe=qCe(),YHt=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(hh.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(hh.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(hh.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(hh.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");$B.NotebookSyncFeature=YHt;var vJ=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,hh.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,hh.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,hh.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};vJ.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var HCe=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof sGe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new sGe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new hh.Emitter,this._onDidChange=new hh.Emitter,this._onDidSave=new hh.Emitter,this._onDidClose=new hh.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new vJ,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],m=[];if(l.cells!==void 0){let E=l.cells;if(E.structure!==void 0){let b=E.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),E.structure.didOpen!==void 0)for(let S of E.structure.didOpen)r.openTextDocument({textDocument:S}),u.push(S.uri);if(E.structure.didClose)for(let S of E.structure.didClose)r.closeTextDocument({textDocument:S}),f.push(S.uri)}if(E.data!==void 0){let b=new Map(E.data.map(S=>[S.document,S]));for(let S=0;S<=o.cells.length;S++){let R=b.get(o.cells[S].document);if(R!==void 0){let B=o.cells.splice(S,1,R);if(p.push({old:B[0],new:R}),b.delete(R.document),b.size===0)break}}}if(E.textContent!==void 0)for(let b of E.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let E of u)g.push(this.getNotebookCell(E));let A=[];for(let E of f)A.push(this.getNotebookCell(E));let y=[];for(let E of m)y.push(this.getNotebookCell(E));(g.length>0||A.length>0||p.length>0||y.length>0)&&(h.cells={added:g,removed:A,changed:{data:p,textContent:y}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),hh.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};$B.NotebookDocuments=HCe});var aGe=H(xJ=>{"use strict";d();Object.defineProperty(xJ,"__esModule",{value:!0});xJ.MonikerFeature=void 0;var KHt=pi(),JHt=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=KHt.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");xJ.MonikerFeature=JHt});var YCe=H($o=>{"use strict";d();Object.defineProperty($o,"__esModule",{value:!0});$o.createConnection=$o.combineFeatures=$o.combineNotebooksFeatures=$o.combineLanguagesFeatures=$o.combineWorkspaceFeatures=$o.combineWindowFeatures=$o.combineClientFeatures=$o.combineTracerFeatures=$o.combineTelemetryFeatures=$o.combineConsoleFeatures=$o._NotebooksImpl=$o._LanguagesImpl=$o.BulkUnregistration=$o.BulkRegistration=$o.ErrorMessageTracker=void 0;var ar=pi(),gh=rJ(),jCe=DCe(),di=Gje(),XHt=Vje(),ZHt=zje(),e$t=Yje(),t$t=FCe(),r$t=Kje(),n$t=Jje(),i$t=Xje(),o$t=Zje(),s$t=tGe(),a$t=nGe(),c$t=iGe(),l$t=oGe(),u$t=$Ce(),d$t=aGe();function WCe(t){if(t!==null)return t}s(WCe,"null2Undefined");var GCe=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};$o.ErrorMessageTracker=GCe;var EJ=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(ar.MessageType.Error,e)}warn(e){this.send(ar.MessageType.Warning,e)}info(e){this.send(ar.MessageType.Info,e)}log(e){this.send(ar.MessageType.Log,e)}debug(e){this.send(ar.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(ar.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,ar.RAL)().console.error("Sending log message failed")})}},VCe=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:ar.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(WCe)}showWarningMessage(e,...r){let n={type:ar.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(WCe)}showInformationMessage(e,...r){let n={type:ar.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(WCe)}},cGe=(0,r$t.ShowDocumentFeature)((0,di.ProgressFeature)(VCe)),lGe;(function(t){function e(){return new bJ}s(e,"create"),t.create=e})(lGe||($o.BulkRegistration=lGe={}));var bJ=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=gh.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=jCe.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},uGe;(function(t){function e(){return new HO(void 0,[])}s(e,"create"),t.create=e})(uGe||($o.BulkUnregistration=uGe={}));var HO=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(ar.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=gh.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(ar.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},IJ=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof bJ?this.registerMany(e):e instanceof HO?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=gh.string(r)?r:r.method,o=jCe.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(ar.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=gh.string(e)?e:e.method,i=jCe.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(ar.RegistrationRequest.type,o).then(a=>ar.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(ar.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(ar.RegistrationRequest.type,r).then(()=>new HO(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},zCe=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(ar.ApplyWorkspaceEditRequest.type,n)}},dGe=(0,n$t.FileOperationsFeature)((0,ZHt.WorkspaceFoldersFeature)((0,XHt.ConfigurationFeature)(zCe))),TJ=class{static{s(this,"TracerImpl")}constructor(){this._trace=ar.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==ar.Trace.Off&&this.connection.sendNotification(ar.LogTraceNotification.type,{message:e,verbose:this._trace===ar.Trace.Verbose?r:void 0}).catch(()=>{})}},wJ=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(ar.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},SJ=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,di.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,di.attachPartialResult)(this.connection,r)}};$o._LanguagesImpl=SJ;var fGe=(0,a$t.FoldingRangeFeature)((0,d$t.MonikerFeature)((0,l$t.DiagnosticFeature)((0,c$t.InlayHintFeature)((0,s$t.InlineValueFeature)((0,o$t.TypeHierarchyFeature)((0,i$t.LinkedEditingRangeFeature)((0,t$t.SemanticTokensFeature)((0,e$t.CallHierarchyFeature)(SJ))))))))),_J=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,di.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,di.attachPartialResult)(this.connection,r)}};$o._NotebooksImpl=_J;var pGe=(0,u$t.NotebookSyncFeature)(_J);function mGe(t,e){return function(r){return e(t(r))}}s(mGe,"combineConsoleFeatures");$o.combineConsoleFeatures=mGe;function hGe(t,e){return function(r){return e(t(r))}}s(hGe,"combineTelemetryFeatures");$o.combineTelemetryFeatures=hGe;function gGe(t,e){return function(r){return e(t(r))}}s(gGe,"combineTracerFeatures");$o.combineTracerFeatures=gGe;function AGe(t,e){return function(r){return e(t(r))}}s(AGe,"combineClientFeatures");$o.combineClientFeatures=AGe;function yGe(t,e){return function(r){return e(t(r))}}s(yGe,"combineWindowFeatures");$o.combineWindowFeatures=yGe;function CGe(t,e){return function(r){return e(t(r))}}s(CGe,"combineWorkspaceFeatures");$o.combineWorkspaceFeatures=CGe;function vGe(t,e){return function(r){return e(t(r))}}s(vGe,"combineLanguagesFeatures");$o.combineLanguagesFeatures=vGe;function xGe(t,e){return function(r){return e(t(r))}}s(xGe,"combineNotebooksFeatures");$o.combineNotebooksFeatures=xGe;function f$t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,mGe),tracer:r(t.tracer,e.tracer,gGe),telemetry:r(t.telemetry,e.telemetry,hGe),client:r(t.client,e.client,AGe),window:r(t.window,e.window,yGe),workspace:r(t.workspace,e.workspace,CGe),languages:r(t.languages,e.languages,vGe),notebooks:r(t.notebooks,e.notebooks,xGe)}}s(f$t,"combineFeatures");$o.combineFeatures=f$t;function p$t(t,e,r){let n=r&&r.console?new(r.console(EJ)):new EJ,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(TJ)):new TJ,a=r&&r.telemetry?new(r.telemetry(wJ)):new wJ,c=r&&r.client?new(r.client(IJ)):new IJ,l=r&&r.window?new(r.window(cGe)):new cGe,u=r&&r.workspace?new(r.workspace(dGe)):new dGe,f=r&&r.languages?new(r.languages(fGe)):new fGe,p=r&&r.notebooks?new(r.notebooks(pGe)):new pGe,m=[n,o,a,c,l,u,f,p];function h(b){return b instanceof Promise?b:gh.thenable(b)?new Promise((S,R)=>{b.then(B=>S(B),B=>R(B))}):Promise.resolve(b)}s(h,"asPromise");let g,A,y,E={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,...S)=>i.sendRequest(gh.string(b)?b:b.method,...S),"sendRequest"),onRequest:s((b,S)=>i.onRequest(b,S),"onRequest"),sendNotification:s((b,S)=>{let R=gh.string(b)?b:b.method;return i.sendNotification(R,S)},"sendNotification"),onNotification:s((b,S)=>i.onNotification(b,S),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(A=b,{dispose:s(()=>{A=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(ar.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(ar.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(ar.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(ar.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(ar.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(ar.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(ar.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(ar.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(ar.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(ar.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(ar.HoverRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(ar.CompletionRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(ar.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(ar.SignatureHelpRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(ar.DeclarationRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDeclaration"),onDefinition:s(b=>i.onRequest(ar.DefinitionRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(ar.TypeDefinitionRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(ar.ImplementationRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onImplementation"),onReferences:s(b=>i.onRequest(ar.ReferencesRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(ar.DocumentHighlightRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(ar.DocumentSymbolRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(ar.WorkspaceSymbolRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(ar.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(ar.CodeActionRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(ar.CodeActionResolveRequest.type,(S,R)=>b(S,R)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(ar.CodeLensRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(ar.CodeLensResolveRequest.type,(S,R)=>b(S,R)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(ar.DocumentFormattingRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(ar.DocumentRangeFormattingRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(ar.DocumentOnTypeFormattingRequest.type,(S,R)=>b(S,R)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(ar.RenameRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(ar.PrepareRenameRequest.type,(S,R)=>b(S,R)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(ar.DocumentLinkRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(ar.DocumentLinkResolveRequest.type,(S,R)=>b(S,R)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(ar.DocumentColorRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(ar.ColorPresentationRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(ar.FoldingRangeRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(ar.SelectionRangeRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),(0,di.attachPartialResult)(i,S))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(ar.ExecuteCommandRequest.type,(S,R)=>b(S,R,(0,di.attachWorkDone)(i,S),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(E);return i.onRequest(ar.InitializeRequest.type,b=>{e.initialize(b),gh.string(b.trace)&&(o.trace=ar.Trace.fromString(b.trace));for(let S of m)S.initialize(b.capabilities);if(A){let S=A(b,new ar.CancellationTokenSource().token,(0,di.attachWorkDone)(i,b),void 0);return h(S).then(R=>{if(R instanceof ar.ResponseError)return R;let B=R;B||(B={capabilities:{}});let L=B.capabilities;L||(L={},B.capabilities=L),L.textDocumentSync===void 0||L.textDocumentSync===null?L.textDocumentSync=gh.number(E.__textDocumentSync)?E.__textDocumentSync:ar.TextDocumentSyncKind.None:!gh.number(L.textDocumentSync)&&!gh.number(L.textDocumentSync.change)&&(L.textDocumentSync.change=gh.number(E.__textDocumentSync)?E.__textDocumentSync:ar.TextDocumentSyncKind.None);for(let O of m)O.fillServerCapabilities(L);return B})}else{let S={capabilities:{textDocumentSync:ar.TextDocumentSyncKind.None}};for(let R of m)R.fillServerCapabilities(S.capabilities);return S}}),i.onRequest(ar.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new ar.CancellationTokenSource().token)}),i.onNotification(ar.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(ar.SetTraceNotification.type,b=>{o.trace=ar.Trace.fromString(b.value)}),E}s(p$t,"createConnection");$o.createConnection=p$t});var EGe=H(x0=>{"use strict";d();Object.defineProperty(x0,"__esModule",{value:!0});x0.resolveModulePath=x0.FileSystem=x0.resolveGlobalYarnPath=x0.resolveGlobalNodePath=x0.resolve=x0.uriToFilePath=void 0;var m$t=require("url"),bA=require("path"),KCe=require("fs"),e1e=require("child_process");function h$t(t){let e=m$t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return bA.normalize(r.join("/"))}s(h$t,"uriToFilePath");x0.uriToFilePath=h$t;function JCe(){return process.platform==="win32"}s(JCe,"isWindows");function RJ(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&KCe.existsSync(e)&&(u[i]?u[i]=e+bA.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,e1e.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(RJ,"resolve");x0.resolve=RJ;function XCe(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};JCe()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,e1e.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?JCe()?bA.join(a,"node_modules"):bA.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(XCe,"resolveGlobalNodePath");x0.resolveGlobalNodePath=XCe;function g$t(t){let e="yarn",r={encoding:"utf8"};JCe()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,e1e.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return bA.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(g$t,"resolveGlobalYarnPath");x0.resolveGlobalYarnPath=g$t;var ZCe;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!KCe.existsSync(__filename.toUpperCase())||!KCe.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?bA.normalize(o).indexOf(bA.normalize(i))===0:bA.normalize(o).toLowerCase().indexOf(bA.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(ZCe||(x0.FileSystem=ZCe={}));function A$t(t,e,r,n){return r?(bA.isAbsolute(r)||(r=bA.join(t,r)),RJ(e,r,r,n).then(i=>ZCe.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>RJ(e,XCe(n),t,n))):RJ(e,XCe(n),t,n)}s(A$t,"resolveModulePath");x0.resolveModulePath=A$t});var t1e=H((nFn,bGe)=>{"use strict";d();bGe.exports=pi()});var IGe=H(kJ=>{"use strict";d();Object.defineProperty(kJ,"__esModule",{value:!0});kJ.InlineCompletionFeature=void 0;var y$t=pi(),C$t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(y$t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");kJ.InlineCompletionFeature=C$t});var SGe=H(Fd=>{"use strict";d();var v$t=Fd&&Fd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wGe=Fd&&Fd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&v$t(e,t,r)};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.ProposedFeatures=Fd.NotebookDocuments=Fd.TextDocuments=Fd.SemanticTokensBuilder=void 0;var x$t=FCe();Object.defineProperty(Fd,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return x$t.SemanticTokensBuilder},"get")});var E$t=IGe();wGe(pi(),Fd);var b$t=qCe();Object.defineProperty(Fd,"TextDocuments",{enumerable:!0,get:s(function(){return b$t.TextDocuments},"get")});var I$t=$Ce();Object.defineProperty(Fd,"NotebookDocuments",{enumerable:!0,get:s(function(){return I$t.NotebookDocuments},"get")});wGe(YCe(),Fd);var TGe;(function(t){t.all={__brand:"features",languages:E$t.InlineCompletionFeature}})(TGe||(Fd.ProposedFeatures=TGe={}))});var cl=H(Ah=>{"use strict";d();var T$t=Ah&&Ah.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PGe=Ah&&Ah.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&T$t(e,t,r)};Object.defineProperty(Ah,"__esModule",{value:!0});Ah.createConnection=Ah.Files=void 0;var _Ge=require("node:util"),r1e=rJ(),w$t=YCe(),$O=EGe(),xR=t1e();PGe(t1e(),Ah);PGe(SGe(),Ah);var RGe;(function(t){t.uriToFilePath=$O.uriToFilePath,t.resolveGlobalNodePath=$O.resolveGlobalNodePath,t.resolveGlobalYarnPath=$O.resolveGlobalYarnPath,t.resolve=$O.resolve,t.resolveModulePath=$O.resolveModulePath})(RGe||(Ah.Files=RGe={}));var kGe;function PJ(){if(kGe!==void 0)try{kGe.end()}catch{}}s(PJ,"endProtocolConnection");var WB=!1,DGe;function S$t(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(DGe=setInterval(()=>{try{process.kill(n,0)}catch{PJ(),process.exit(WB?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(S$t,"setupExitTimer");S$t();var _$t={initialize:s(t=>{let e=t.processId;r1e.number(e)&&DGe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(WB?0:1)}},3e3)},"initialize"),get shutdownReceived(){return WB},set shutdownReceived(t){WB=t},exit:s(t=>{PJ(),process.exit(t)},"exit")};function R$t(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),xR.ConnectionStrategy.is(t)||xR.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),k$t(o,a,c,i)}s(R$t,"createConnection");Ah.createConnection=R$t;function k$t(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let m=f[p];if(m==="--node-ipc"){t=new xR.IPCMessageReader(process),e=new xR.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(f[p+1]);break}else if(m==="--pipe"){u=f[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,xR.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,xR.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(r1e.func(t.read)&&r1e.func(t.on)){let l=t;l.on("end",()=>{PJ(),process.exit(WB?0:1)}),l.on("close",()=>{PJ(),process.exit(WB?0:1)})}let c=s(l=>{let u=(0,xR.createProtocolConnection)(t,e,l,r);return i&&P$t(l),u},"connectionFactory");return(0,w$t.createConnection)(c,_$t,n)}s(k$t,"_createConnection");function P$t(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,_Ge.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,_Ge.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(P$t,"patchConsole")});var IA=H((hFn,BGe)=>{"use strict";d();BGe.exports=cl()});var vYe=H((Tqn,CYe)=>{"use strict";d();CYe.exports=AYe;function AYe(t,e,r){t instanceof RegExp&&(t=gYe(t,r)),e instanceof RegExp&&(e=gYe(e,r));var n=yYe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(AYe,"balanced");function gYe(t,e){var r=e.match(t);return r?r[0]:null}s(gYe,"maybeMatch");AYe.range=yYe;function yYe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(yYe,"range")});var _Ye=H((_qn,SYe)=>{d();var xYe=vYe();SYe.exports=EWt;var EYe="\0SLASH"+Math.random()+"\0",bYe="\0OPEN"+Math.random()+"\0",ive="\0CLOSE"+Math.random()+"\0",IYe="\0COMMA"+Math.random()+"\0",TYe="\0PERIOD"+Math.random()+"\0";function nve(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(nve,"numeric");function vWt(t){return t.split("\\\\").join(EYe).split("\\{").join(bYe).split("\\}").join(ive).split("\\,").join(IYe).split("\\.").join(TYe)}s(vWt,"escapeBraces");function xWt(t){return t.split(EYe).join("\\").split(bYe).join("{").split(ive).join("}").split(IYe).join(",").split(TYe).join(".")}s(xWt,"unescapeBraces");function wYe(t){if(!t)return[""];var e=[],r=xYe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=wYe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(wYe,"parseCommaParts");function EWt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),e7(vWt(t),!0).map(xWt)):[]}s(EWt,"expandTop");function bWt(t){return"{"+t+"}"}s(bWt,"embrace");function IWt(t){return/^-?0\d/.test(t)}s(IWt,"isPadded");function TWt(t,e){return t<=e}s(TWt,"lte");function wWt(t,e){return t>=e}s(wWt,"gte");function e7(t,e){var r=[],n=xYe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?e7(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+ive+n.post,e7(t)):[t];var m;if(f)m=n.body.split(/\.\./);else if(m=wYe(n.body),m.length===1&&(m=e7(m[0],!1).map(bWt),m.length===1))return o.map(function(z){return n.pre+m[0]+z});var h;if(f){var g=nve(m[0]),A=nve(m[1]),y=Math.max(m[0].length,m[1].length),E=m.length==3?Math.abs(nve(m[2])):1,b=TWt,S=A<g;S&&(E*=-1,b=wWt);var R=m.some(IWt);h=[];for(var B=g;b(B,A);B+=E){var L;if(u)L=String.fromCharCode(B),L==="\\"&&(L="");else if(L=String(B),R){var O=y-L.length;if(O>0){var K=new Array(O+1).join("0");B<0?L="-"+K+L.slice(1):L=K+L}}h.push(L)}}else{h=[];for(var V=0;V<m.length;V++)h.push.apply(h,e7(m[V],!1))}for(var V=0;V<h.length;V++)for(var a=0;a<o.length;a++){var c=i+h[V]+o[a];(!e||f||c)&&r.push(c)}}return r}s(e7,"expand")});var Ra=H((Xui,$Xe)=>{d();$Xe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Yo=H((edi,WXe)=>{"use strict";d();var Va=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Nxe=class extends Va{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Mxe=class extends Va{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},Lxe=class extends Va{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Fxe=class extends Va{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Oxe=class extends Va{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Qxe=class extends Va{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Uxe=class extends Va{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Aee=class extends Va{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},qxe=class extends Aee{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Hxe=class extends Va{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},$xe=class extends Va{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Wxe=class extends Va{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},jxe=class extends Va{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Gxe=class extends Va{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Vxe=class extends Va{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},zxe=class extends Va{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Yxe=class extends Va{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Kxe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},Jxe=class extends Va{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Xxe=class extends Va{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Zxe=class extends Va{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},eEe=class extends Va{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};WXe.exports={AbortError:Aee,HTTPParserError:Kxe,UndiciError:Va,HeadersTimeoutError:Mxe,HeadersOverflowError:Lxe,BodyTimeoutError:Fxe,RequestContentLengthMismatchError:$xe,ConnectTimeoutError:Nxe,ResponseStatusCodeError:Oxe,InvalidArgumentError:Qxe,InvalidReturnValueError:Uxe,RequestAbortedError:qxe,ClientDestroyedError:jxe,ClientClosedError:Gxe,InformationalError:Hxe,SocketError:Vxe,NotSupportedError:zxe,ResponseContentLengthMismatchError:Wxe,BalancedPoolMissingUpstreamError:Yxe,ResponseExceededMaxSizeError:Jxe,RequestRetryError:Xxe,ResponseError:Zxe,SecureProxyConnectionError:eEe}});var Cee=H((ndi,jXe)=>{"use strict";d();var yee={},tEe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<tEe.length;++t){let e=tEe[t],r=e.toLowerCase();yee[e]=yee[r]=r}Object.setPrototypeOf(yee,null);jXe.exports={wellknownHeaderNames:tEe,headerNameLowerCasedRecord:yee}});var YXe=H((odi,zXe)=>{"use strict";d();var{wellknownHeaderNames:GXe,headerNameLowerCasedRecord:Mzt}=Cee(),rEe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},vee=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new rEe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},VXe=new vee;for(let t=0;t<GXe.length;++t){let e=Mzt[GXe[t]];VXe.insert(e,e)}zXe.exports={TernarySearchTree:vee,tree:VXe}});var qi=H((cdi,dZe)=>{"use strict";d();var D7=require("node:assert"),{kDestroyed:JXe,kBodyUsed:U3,kListeners:nEe,kBody:KXe}=Ra(),{IncomingMessage:Lzt}=require("node:http"),bee=require("node:stream"),Fzt=require("node:net"),{Blob:Ozt}=require("node:buffer"),Qzt=require("node:util"),{stringify:Uzt}=require("node:querystring"),{EventEmitter:qzt}=require("node:events"),{InvalidArgumentError:du}=Yo(),{headerNameLowerCasedRecord:Hzt}=Cee(),{tree:XXe}=YXe(),[$zt,Wzt]=process.versions.node.split(".").map(t=>Number(t)),Eee=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[KXe]=e,this[U3]=!1}async*[Symbol.asyncIterator](){D7(!this[U3],"disturbed"),this[U3]=!0,yield*this[KXe]}};function jzt(t){return Iee(t)?(nZe(t)===0&&t.on("data",function(){D7(!1)}),typeof t.readableDidRead!="boolean"&&(t[U3]=!1,qzt.prototype.on.call(t,"data",function(){this[U3]=!0})),t):t&&typeof t.pipeTo=="function"?new Eee(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&rZe(t)?new Eee(t):t}s(jzt,"wrapRequestBody");function Gzt(){}s(Gzt,"nop");function Iee(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Iee,"isStream");function ZXe(t){if(t===null)return!1;if(t instanceof Ozt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(ZXe,"isBlobLike");function Vzt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=Uzt(e);return r&&(t+="?"+r),t}s(Vzt,"buildURL");function eZe(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(eZe,"isValidPort");function xee(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(xee,"isHttpOrHttpsPrefixed");function tZe(t){if(typeof t=="string"){if(t=new URL(t),!xee(t.origin||t.protocol))throw new du("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new du("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&eZe(t.port)===!1)throw new du("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new du("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new du("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new du("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new du("Invalid URL origin: the origin must be a string or null/undefined.");if(!xee(t.origin||t.protocol))throw new du("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!xee(t.origin||t.protocol))throw new du("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(tZe,"parseURL");function zzt(t){if(t=tZe(t),t.pathname!=="/"||t.search||t.hash)throw new du("invalid url");return t}s(zzt,"parseOrigin");function Yzt(t){if(t[0]==="["){let r=t.indexOf("]");return D7(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(Yzt,"getHostname");function Kzt(t){if(!t)return null;D7(typeof t=="string");let e=Yzt(t);return Fzt.isIP(e)?"":e}s(Kzt,"getServerName");function Jzt(t){return JSON.parse(JSON.stringify(t))}s(Jzt,"deepClone");function Xzt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(Xzt,"isAsyncIterable");function rZe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(rZe,"isIterable");function nZe(t){if(t==null)return 0;if(Iee(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(ZXe(t))return t.size!=null?t.size:null;if(sZe(t))return t.byteLength}return null}s(nZe,"bodyLength");function iZe(t){return t&&!!(t.destroyed||t[JXe]||bee.isDestroyed?.(t))}s(iZe,"isDestroyed");function Zzt(t,e){t==null||!Iee(t)||iZe(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===Lzt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[JXe]=!0))}s(Zzt,"destroy");var eYt=/timeout=(\d+)/;function tYt(t){let e=t.toString().match(eYt);return e?parseInt(e[1],10)*1e3:null}s(tYt,"parseKeepAliveTimeout");function oZe(t){return typeof t=="string"?Hzt[t]??t.toLowerCase():XXe.lookup(t)??t.toString("latin1").toLowerCase()}s(oZe,"headerNameToString");function rYt(t){return XXe.lookup(t)??t.toString("latin1").toLowerCase()}s(rYt,"bufferToLowerCasedHeaderName");function nYt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=oZe(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(nYt,"parseHeaders");function iYt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(iYt,"parseRawHeaders");function sZe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(sZe,"isBuffer");function oYt(t,e,r){if(!t||typeof t!="object")throw new du("handler must be an object");if(typeof t.onConnect!="function")throw new du("invalid onConnect method");if(typeof t.onError!="function")throw new du("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new du("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new du("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new du("invalid onHeaders method");if(typeof t.onData!="function")throw new du("invalid onData method");if(typeof t.onComplete!="function")throw new du("invalid onComplete method")}}s(oYt,"validateHandler");function sYt(t){return!!(t&&(bee.isDisturbed(t)||t[U3]))}s(sYt,"isDisturbed");function aYt(t){return!!(t&&bee.isErrored(t))}s(aYt,"isErrored");function cYt(t){return!!(t&&bee.isReadable(t))}s(cYt,"isReadable");function lYt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(lYt,"getSocketInfo");function uYt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(uYt,"ReadableStreamFrom");function dYt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(dYt,"isFormDataLike");function fYt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(fYt,"addAbortListener");var pYt=typeof String.prototype.toWellFormed=="function",mYt=typeof String.prototype.isWellFormed=="function";function aZe(t){return pYt?`${t}`.toWellFormed():Qzt.toUSVString(t)}s(aZe,"toUSVString");function hYt(t){return mYt?`${t}`.isWellFormed():aZe(t)===`${t}`}s(hYt,"isUSVString");function cZe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(cZe,"isTokenCharCode");function gYt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!cZe(t.charCodeAt(e)))return!1;return!0}s(gYt,"isValidHTTPToken");var AYt=/[^\t\x20-\x7e\x80-\xff]/;function yYt(t){return!AYt.test(t)}s(yYt,"isValidHeaderValue");function CYt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(CYt,"parseRangeHeader");function vYt(t,e,r){return(t[nEe]??=[]).push([e,r]),t.on(e,r),t}s(vYt,"addListener");function xYt(t){for(let[e,r]of t[nEe]??[])t.removeListener(e,r);t[nEe]=null}s(xYt,"removeAllListeners");function EYt(t,e,r){try{e.onError(r),D7(e.aborted)}catch(n){t.emit("error",n)}}s(EYt,"errorRequest");var lZe=Object.create(null);lZe.enumerable=!0;var iEe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},uZe={...iEe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(iEe,null);Object.setPrototypeOf(uZe,null);dZe.exports={kEnumerableProperty:lZe,nop:Gzt,isDisturbed:sYt,isErrored:aYt,isReadable:cYt,toUSVString:aZe,isUSVString:hYt,isBlobLike:ZXe,parseOrigin:zzt,parseURL:tZe,getServerName:Kzt,isStream:Iee,isIterable:rZe,isAsyncIterable:Xzt,isDestroyed:iZe,headerNameToString:oZe,bufferToLowerCasedHeaderName:rYt,addListener:vYt,removeAllListeners:xYt,errorRequest:EYt,parseRawHeaders:iYt,parseHeaders:nYt,parseKeepAliveTimeout:tYt,destroy:Zzt,bodyLength:nZe,deepClone:Jzt,ReadableStreamFrom:uYt,isBuffer:sZe,validateHandler:oYt,getSocketInfo:lYt,isFormDataLike:dYt,buildURL:Vzt,addAbortListener:fYt,isValidHTTPToken:gYt,isValidHeaderValue:yYt,isTokenCharCode:cZe,parseRangeHeader:CYt,normalizedMethodRecordsBase:iEe,normalizedMethodRecords:uZe,isValidPort:eZe,isHttpOrHttpsPrefixed:xee,nodeMajor:$zt,nodeMinor:Wzt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:jzt}});var q3=H((ddi,pZe)=>{"use strict";d();var rs=require("node:diagnostics_channel"),sEe=require("node:util"),Tee=sEe.debuglog("undici"),oEe=sEe.debuglog("fetch"),ZR=sEe.debuglog("websocket"),fZe=!1,bYt={beforeConnect:rs.channel("undici:client:beforeConnect"),connected:rs.channel("undici:client:connected"),connectError:rs.channel("undici:client:connectError"),sendHeaders:rs.channel("undici:client:sendHeaders"),create:rs.channel("undici:request:create"),bodySent:rs.channel("undici:request:bodySent"),headers:rs.channel("undici:request:headers"),trailers:rs.channel("undici:request:trailers"),error:rs.channel("undici:request:error"),open:rs.channel("undici:websocket:open"),close:rs.channel("undici:websocket:close"),socketError:rs.channel("undici:websocket:socket_error"),ping:rs.channel("undici:websocket:ping"),pong:rs.channel("undici:websocket:pong")};if(Tee.enabled||oEe.enabled){let t=oEe.enabled?oEe:Tee;rs.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),rs.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),rs.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),rs.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),rs.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),rs.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),rs.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),fZe=!0}if(ZR.enabled){if(!fZe){let t=Tee.enabled?Tee:ZR;rs.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),rs.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),rs.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),rs.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}rs.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;ZR("connection opened %s%s",e,r?`:${r}`:"")}),rs.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;ZR("closed connection to %s - %s %s",e.url,r,n)}),rs.channel("undici:websocket:socket_error").subscribe(t=>{ZR("connection errored - %s",t.message)}),rs.channel("undici:websocket:ping").subscribe(t=>{ZR("ping received")}),rs.channel("undici:websocket:pong").subscribe(t=>{ZR("pong received")})}pZe.exports={channels:bYt}});var yZe=H((pdi,AZe)=>{"use strict";d();var{InvalidArgumentError:za,NotSupportedError:IYt}=Yo(),Ox=require("node:assert"),{isValidHTTPToken:gZe,isValidHeaderValue:mZe,isStream:TYt,destroy:wYt,isBuffer:SYt,isFormDataLike:_Yt,isIterable:RYt,isBlobLike:kYt,buildURL:PYt,validateHandler:DYt,getServerName:BYt,normalizedMethodRecords:NYt}=qi(),{channels:YC}=q3(),{headerNameLowerCasedRecord:hZe}=Cee(),MYt=/[^\u0021-\u00ff]/,Mh=Symbol("handler"),aEe=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:A},y){if(typeof r!="string")throw new za("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new za("path must be an absolute URL or start with a slash");if(MYt.test(r))throw new za("invalid request path");if(typeof n!="string")throw new za("method must be a string");if(NYt[n]===void 0&&!gZe(n))throw new za("invalid request method");if(u&&typeof u!="string")throw new za("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new za("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new za("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new za("invalid reset");if(g!=null&&typeof g!="boolean")throw new za("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(TYt(i)){this.body=i;let E=this.body._readableState;(!E||!E.autoDestroy)&&(this.endHandler=s(function(){wYt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(SYt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(_Yt(i)||RYt(i)||kYt(i))this.body=i;else throw new za("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?PYt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new za("headers array must be even");for(let E=0;E<o.length;E+=2)wee(this,o[E],o[E+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let E of o){if(!Array.isArray(E)||E.length!==2)throw new za("headers must be in key-value pair format");wee(this,E[0],E[1])}else{let E=Object.keys(o);for(let b=0;b<E.length;++b)wee(this,E[b],o[E[b]])}else if(o!=null)throw new za("headers must be an object or an array");DYt(y,n,u),this.servername=A||BYt(this.host),this[Mh]=y,YC.create.hasSubscribers&&YC.create.publish({request:this})}onBodySent(e){if(this[Mh].onBodySent)try{return this[Mh].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(YC.bodySent.hasSubscribers&&YC.bodySent.publish({request:this}),this[Mh].onRequestSent)try{return this[Mh].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Ox(!this.aborted),Ox(!this.completed),this.error)e(this.error);else return this.abort=e,this[Mh].onConnect(e)}onResponseStarted(){return this[Mh].onResponseStarted?.()}onHeaders(e,r,n,i){Ox(!this.aborted),Ox(!this.completed),YC.headers.hasSubscribers&&YC.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Mh].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){Ox(!this.aborted),Ox(!this.completed);try{return this[Mh].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Ox(!this.aborted),Ox(!this.completed),this[Mh].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Ox(!this.aborted),this.completed=!0,YC.trailers.hasSubscribers&&YC.trailers.publish({request:this,trailers:e});try{return this[Mh].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),YC.error.hasSubscribers&&YC.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Mh].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return wee(this,e,r),this}};function wee(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new za(`invalid ${e} header`);if(r===void 0)return;let n=hZe[e];if(n===void 0&&(n=e.toLowerCase(),hZe[n]===void 0&&!gZe(n)))throw new za("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!mZe(r[o]))throw new za(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new za(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!mZe(r))throw new za(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new za("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new za("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new za(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new za("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new IYt("expect header not supported");t.headers.push(e,r)}}}s(wee,"processHeader");AZe.exports=aEe});var B7=H((gdi,CZe)=>{"use strict";d();var LYt=require("node:events"),See=class extends LYt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new cEe(this,n)}},cEe=class extends See{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};CZe.exports=See});var j3=H((Cdi,vZe)=>{"use strict";d();var FYt=B7(),{ClientDestroyedError:lEe,ClientClosedError:OYt,InvalidArgumentError:H3}=Yo(),{kDestroy:QYt,kClose:UYt,kClosed:N7,kDestroyed:$3,kDispatch:uEe,kInterceptors:ek}=Ra(),Qx=Symbol("onDestroyed"),W3=Symbol("onClosed"),_ee=Symbol("Intercepted Dispatch"),dEe=class extends FYt{static{s(this,"DispatcherBase")}constructor(){super(),this[$3]=!1,this[Qx]=null,this[N7]=!1,this[W3]=[]}get destroyed(){return this[$3]}get closed(){return this[N7]}get interceptors(){return this[ek]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[ek][r]!="function")throw new H3("interceptor must be an function")}this[ek]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new H3("invalid callback");if(this[$3]){queueMicrotask(()=>e(new lEe,null));return}if(this[N7]){this[W3]?this[W3].push(e):queueMicrotask(()=>e(null,null));return}this[N7]=!0,this[W3].push(e);let r=s(()=>{let n=this[W3];this[W3]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[UYt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new H3("invalid callback");if(this[$3]){this[Qx]?this[Qx].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new lEe),this[$3]=!0,this[Qx]=this[Qx]||[],this[Qx].push(r);let n=s(()=>{let i=this[Qx];this[Qx]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[QYt](e).then(()=>{queueMicrotask(n)})}[_ee](e,r){if(!this[ek]||this[ek].length===0)return this[_ee]=this[uEe],this[uEe](e,r);let n=this[uEe].bind(this);for(let i=this[ek].length-1;i>=0;i--)n=this[ek][i](n);return this[_ee]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new H3("handler must be an object");try{if(!e||typeof e!="object")throw new H3("opts must be an object.");if(this[$3]||this[Qx])throw new lEe;if(this[N7])throw new OYt;return this[_ee](e,r)}catch(n){if(typeof r.onError!="function")throw new H3("invalid onError method");return r.onError(n),!1}}};vZe.exports=dEe});var yEe=H((Edi,IZe)=>{"use strict";d();var G3=0,fEe=1e3,pEe=(fEe>>1)-1,Ux,mEe=Symbol("kFastTimer"),qx=[],hEe=-2,gEe=-1,EZe=0,xZe=1;function AEe(){G3+=pEe;let t=0,e=qx.length;for(;t<e;){let r=qx[t];r._state===EZe?(r._idleStart=G3-pEe,r._state=xZe):r._state===xZe&&G3>=r._idleStart+r._idleTimeout&&(r._state=gEe,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===gEe?(r._state=hEe,--e!==0&&(qx[t]=qx[e])):++t}qx.length=e,qx.length!==0&&bZe()}s(AEe,"onTick");function bZe(){Ux?Ux.refresh():(clearTimeout(Ux),Ux=setTimeout(AEe,pEe),Ux.unref&&Ux.unref())}s(bZe,"refreshTimeout");var Ree=class{static{s(this,"FastTimer")}[mEe]=!0;_state=hEe;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===hEe&&qx.push(this),(!Ux||qx.length===1)&&bZe(),this._state=EZe}clear(){this._state=gEe,this._idleStart=-1}};IZe.exports={setTimeout(t,e,r){return e<=fEe?setTimeout(t,e,r):new Ree(t,e,r)},clearTimeout(t){t[mEe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new Ree(t,e,r)},clearFastTimeout(t){t.clear()},now(){return G3},tick(t=0){G3+=t-fEe+1,AEe(),AEe()},reset(){G3=0,qx.length=0,clearTimeout(Ux),Ux=null},kFastTimer:mEe}});var M7=H((Sdi,RZe)=>{"use strict";d();var qYt=require("node:net"),TZe=require("node:assert"),_Ze=qi(),{InvalidArgumentError:HYt,ConnectTimeoutError:$Yt}=Yo(),kee=yEe();function wZe(){}s(wZe,"noop");var CEe,vEe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?vEe=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:vEe=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function WYt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new HYt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new vEe(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:m,servername:h,localAddress:g,httpSocket:A},y){let E;if(p==="https:"){CEe||(CEe=require("node:tls")),h=h||a.servername||_Ze.getServerName(f)||null;let S=h||u;TZe(S);let R=i||c.get(S)||null;m=m||443,E=CEe.connect({highWaterMark:16384,...a,servername:h,session:R,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:A,port:m,host:u}),E.on("session",function(B){c.set(S,B)})}else TZe(!A,"httpSocket can only be sent on TLS update"),m=m||80,E=qYt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let S=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;E.setKeepAlive(!0,S)}let b=jYt(new WeakRef(E),{timeout:n,hostname:u,port:m});return E.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),y){let S=y;y=null,S(null,this)}}).on("error",function(S){if(queueMicrotask(b),y){let R=y;y=null,R(S)}}),E},"connect")}s(WYt,"buildConnector");var jYt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return wZe;let r=null,n=null,i=kee.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>SZe(t.deref(),e))})},e.timeout);return()=>{kee.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return wZe;let r=null,n=kee.setFastTimeout(()=>{r=setImmediate(()=>{SZe(t.deref(),e)})},e.timeout);return()=>{kee.clearFastTimeout(n),clearImmediate(r)}};function SZe(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,_Ze.destroy(t,new $Yt(r))}s(SZe,"onConnectTimeout");RZe.exports=WYt});var kZe=H(Pee=>{"use strict";d();Object.defineProperty(Pee,"__esModule",{value:!0});Pee.enumToMap=void 0;function GYt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(GYt,"enumToMap");Pee.enumToMap=GYt});var PZe=H(zt=>{"use strict";d();Object.defineProperty(zt,"__esModule",{value:!0});zt.SPECIAL_HEADERS=zt.HEADER_STATE=zt.MINOR=zt.MAJOR=zt.CONNECTION_TOKEN_CHARS=zt.HEADER_CHARS=zt.TOKEN=zt.STRICT_TOKEN=zt.HEX=zt.URL_CHAR=zt.STRICT_URL_CHAR=zt.USERINFO_CHARS=zt.MARK=zt.ALPHANUM=zt.NUM=zt.HEX_MAP=zt.NUM_MAP=zt.ALPHA=zt.FINISH=zt.H_METHOD_MAP=zt.METHOD_MAP=zt.METHODS_RTSP=zt.METHODS_ICE=zt.METHODS_HTTP=zt.METHODS=zt.LENIENT_FLAGS=zt.FLAGS=zt.TYPE=zt.ERROR=void 0;var VYt=kZe(),zYt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(zYt=zt.ERROR||(zt.ERROR={}));var YYt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(YYt=zt.TYPE||(zt.TYPE={}));var KYt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(KYt=zt.FLAGS||(zt.FLAGS={}));var JYt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(JYt=zt.LENIENT_FLAGS||(zt.LENIENT_FLAGS={}));var bn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(bn=zt.METHODS||(zt.METHODS={}));zt.METHODS_HTTP=[bn.DELETE,bn.GET,bn.HEAD,bn.POST,bn.PUT,bn.CONNECT,bn.OPTIONS,bn.TRACE,bn.COPY,bn.LOCK,bn.MKCOL,bn.MOVE,bn.PROPFIND,bn.PROPPATCH,bn.SEARCH,bn.UNLOCK,bn.BIND,bn.REBIND,bn.UNBIND,bn.ACL,bn.REPORT,bn.MKACTIVITY,bn.CHECKOUT,bn.MERGE,bn["M-SEARCH"],bn.NOTIFY,bn.SUBSCRIBE,bn.UNSUBSCRIBE,bn.PATCH,bn.PURGE,bn.MKCALENDAR,bn.LINK,bn.UNLINK,bn.PRI,bn.SOURCE];zt.METHODS_ICE=[bn.SOURCE];zt.METHODS_RTSP=[bn.OPTIONS,bn.DESCRIBE,bn.ANNOUNCE,bn.SETUP,bn.PLAY,bn.PAUSE,bn.TEARDOWN,bn.GET_PARAMETER,bn.SET_PARAMETER,bn.REDIRECT,bn.RECORD,bn.FLUSH,bn.GET,bn.POST];zt.METHOD_MAP=VYt.enumToMap(bn);zt.H_METHOD_MAP={};Object.keys(zt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(zt.H_METHOD_MAP[t]=zt.METHOD_MAP[t])});var XYt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(XYt=zt.FINISH||(zt.FINISH={}));zt.ALPHA=[];for(let t=65;t<=90;t++)zt.ALPHA.push(String.fromCharCode(t)),zt.ALPHA.push(String.fromCharCode(t+32));zt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};zt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};zt.NUM=["0","1","2","3","4","5","6","7","8","9"];zt.ALPHANUM=zt.ALPHA.concat(zt.NUM);zt.MARK=["-","_",".","!","~","*","'","(",")"];zt.USERINFO_CHARS=zt.ALPHANUM.concat(zt.MARK).concat(["%",";",":","&","=","+","$",","]);zt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(zt.ALPHANUM);zt.URL_CHAR=zt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)zt.URL_CHAR.push(t);zt.HEX=zt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);zt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(zt.ALPHANUM);zt.TOKEN=zt.STRICT_TOKEN.concat([" "]);zt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&zt.HEADER_CHARS.push(t);zt.CONNECTION_TOKEN_CHARS=zt.HEADER_CHARS.filter(t=>t!==44);zt.MAJOR=zt.NUM_MAP;zt.MINOR=zt.MAJOR;var V3;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(V3=zt.HEADER_STATE||(zt.HEADER_STATE={}));zt.SPECIAL_HEADERS={connection:V3.CONNECTION,"content-length":V3.CONTENT_LENGTH,"proxy-connection":V3.CONNECTION,"transfer-encoding":V3.TRANSFER_ENCODING,upgrade:V3.UPGRADE}});var xEe=H((Mdi,DZe)=>{"use strict";d();var{Buffer:ZYt}=require("node:buffer");DZe.exports=ZYt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var NZe=H((Fdi,BZe)=>{"use strict";d();var{Buffer:eKt}=require("node:buffer");BZe.exports=eKt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var L7=H((Qdi,HZe)=>{"use strict";d();var MZe=["GET","HEAD","POST"],tKt=new Set(MZe),rKt=[101,204,205,304],LZe=[301,302,303,307,308],nKt=new Set(LZe),FZe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],iKt=new Set(FZe),OZe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],oKt=new Set(OZe),sKt=["follow","manual","error"],QZe=["GET","HEAD","OPTIONS","TRACE"],aKt=new Set(QZe),cKt=["navigate","same-origin","no-cors","cors"],lKt=["omit","same-origin","include"],uKt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],dKt=["content-encoding","content-language","content-location","content-type","content-length"],fKt=["half"],UZe=["CONNECT","TRACE","TRACK"],pKt=new Set(UZe),qZe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],mKt=new Set(qZe);HZe.exports={subresource:qZe,forbiddenMethods:UZe,requestBodyHeader:dKt,referrerPolicy:OZe,requestRedirect:sKt,requestMode:cKt,requestCredentials:lKt,requestCache:uKt,redirectStatus:LZe,corsSafeListedMethods:MZe,nullBodyStatus:rKt,safeMethods:QZe,badPorts:FZe,requestDuplex:fKt,subresourceSet:mKt,badPortsSet:iKt,redirectStatusSet:nKt,corsSafeListedMethodsSet:tKt,safeMethodsSet:aKt,forbiddenMethodsSet:pKt,referrerPolicySet:oKt}});var bEe=H((qdi,$Ze)=>{"use strict";d();var EEe=Symbol.for("undici.globalOrigin.1");function hKt(){return globalThis[EEe]}s(hKt,"getGlobalOrigin");function gKt(t){if(t===void 0){Object.defineProperty(globalThis,EEe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,EEe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(gKt,"setGlobalOrigin");$Ze.exports={getGlobalOrigin:hKt,setGlobalOrigin:gKt}});var R0=H((Wdi,KZe)=>{"use strict";d();var Bee=require("node:assert"),AKt=new TextEncoder,F7=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,yKt=/[\u000A\u000D\u0009\u0020]/,CKt=/[\u0009\u000A\u000C\u000D\u0020]/g,vKt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function xKt(t){Bee(t.protocol==="data:");let e=GZe(t,!0);e=e.slice(5);let r={position:0},n=z3(",",e,r),i=n.length;if(n=SKt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=VZe(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=YZe(a);if(a=bKt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=IEe(n);return c==="failure"&&(c=IEe("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(xKt,"dataURLProcessor");function GZe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(GZe,"URLSerializer");function Nee(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(Nee,"collectASequenceOfCodePoints");function z3(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(z3,"collectASequenceOfCodePointsFast");function VZe(t){let e=AKt.encode(t);return EKt(e)}s(VZe,"stringPercentDecode");function WZe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(WZe,"isHexCharByte");function jZe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(jZe,"hexByteToNumber");function EKt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(WZe(t[i+1])&&WZe(t[i+2]))?r[n++]=37:(r[n++]=jZe(t[i+1])<<4|jZe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(EKt,"percentDecode");function IEe(t){t=Dee(t,!0,!0);let e={position:0},r=z3("/",t,e);if(r.length===0||!F7.test(r)||e.position>t.length)return"failure";e.position++;let n=z3(";",t,e);if(n=Dee(n,!1,!0),n.length===0||!F7.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Nee(u=>yKt.test(u),t,e);let c=Nee(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=zZe(t,e,!0),z3(";",t,e);else if(l=z3(";",t,e),l=Dee(l,!1,!0),l.length===0)continue;c.length!==0&&F7.test(c)&&(l.length===0||vKt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(IEe,"parseMIMEType");function bKt(t){t=t.replace(CKt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(bKt,"forgivingBase64");function zZe(t,e,r){let n=e.position,i="";for(Bee(t[e.position]==='"'),e.position++;i+=Nee(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Bee(o==='"');break}}return r?i:t.slice(n,e.position)}s(zZe,"collectAnHTTPQuotedString");function IKt(t){Bee(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",F7.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(IKt,"serializeAMimeType");function TKt(t){return t===13||t===10||t===9||t===32}s(TKt,"isHTTPWhiteSpace");function Dee(t,e=!0,r=!0){return TEe(t,e,r,TKt)}s(Dee,"removeHTTPWhitespace");function wKt(t){return t===13||t===10||t===9||t===12||t===32}s(wKt,"isASCIIWhitespace");function SKt(t,e=!0,r=!0){return TEe(t,e,r,wKt)}s(SKt,"removeASCIIWhitespace");function TEe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(TEe,"removeChars");function YZe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(YZe,"isomorphicDecode");function _Kt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(_Kt,"minimizeSupportedMimeType");KZe.exports={dataURLProcessor:xKt,URLSerializer:GZe,collectASequenceOfCodePoints:Nee,collectASequenceOfCodePointsFast:z3,stringPercentDecode:VZe,parseMIMEType:IEe,collectAnHTTPQuotedString:zZe,serializeAMimeType:IKt,removeChars:TEe,removeHTTPWhitespace:Dee,minimizeSupportedMimeType:_Kt,HTTP_TOKEN_CODEPOINTS:F7,isomorphicDecode:YZe}});var ed=H((Vdi,JZe)=>{"use strict";d();var{types:KC,inspect:RKt}=require("node:util"),{markAsUncloneable:kKt}=require("node:worker_threads"),{toUSVString:PKt}=qi(),qt={};qt.converters={};qt.util={};qt.errors={};qt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};qt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return qt.errors.exception({header:t.prefix,message:r})};qt.errors.invalidArgument=function(t){return qt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};qt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};qt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw qt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};qt.illegalConstructor=function(){throw qt.errors.exception({header:"TypeError",message:"Illegal constructor"})};qt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};qt.util.markAsUncloneable=kKt||(()=>{});qt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw qt.errors.exception({header:"Integer conversion",message:`Could not convert ${qt.util.Stringify(t)} to an integer.`});if(a=qt.util.IntegerPart(a),a<o||a>i)throw qt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=qt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};qt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};qt.util.Stringify=function(t){switch(qt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return RKt(t);case"String":return`"${t}"`;default:return`${t}`}};qt.sequenceConverter=function(t){return(e,r,n,i)=>{if(qt.util.Type(e)!=="Object")throw qt.errors.exception({header:r,message:`${n} (${qt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw qt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};qt.recordConverter=function(t,e){return(r,n,i)=>{if(qt.util.Type(r)!=="Object")throw qt.errors.exception({header:n,message:`${i} ("${qt.util.Type(r)}") is not an Object.`});let o={};if(!KC.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};qt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw qt.errors.exception({header:r,message:`Expected ${n} ("${qt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};qt.dictionaryConverter=function(t){return(e,r,n)=>{let i=qt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw qt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw qt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw qt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};qt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};qt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw qt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};qt.converters.ByteString=function(t,e,r){let n=qt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};qt.converters.USVString=PKt;qt.converters.boolean=function(t){return!!t};qt.converters.any=function(t){return t};qt.converters["long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"signed",void 0,e,r)};qt.converters["unsigned long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};qt.converters["unsigned long"]=function(t,e,r){return qt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};qt.converters["unsigned short"]=function(t,e,r,n){return qt.util.ConvertToInt(t,16,"unsigned",n,e,r)};qt.converters.ArrayBuffer=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!KC.isAnyArrayBuffer(t))throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&KC.isSharedArrayBuffer(t))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.TypedArray=function(t,e,r,n,i){if(qt.util.Type(t)!=="Object"||!KC.isTypedArray(t)||t.constructor.name!==e.name)throw qt.errors.conversionFailed({prefix:r,argument:`${n} ("${qt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&KC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.DataView=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!KC.isDataView(t))throw qt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&KC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.BufferSource=function(t,e,r,n){if(KC.isAnyArrayBuffer(t))return qt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(KC.isTypedArray(t))return qt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(KC.isDataView(t))return qt.converters.DataView(t,e,r,{...n,allowShared:!1});throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["BufferSource"]})};qt.converters["sequence<ByteString>"]=qt.sequenceConverter(qt.converters.ByteString);qt.converters["sequence<sequence<ByteString>>"]=qt.sequenceConverter(qt.converters["sequence<ByteString>"]);qt.converters["record<ByteString, ByteString>"]=qt.recordConverter(qt.converters.ByteString,qt.converters.ByteString);JZe.exports={webidl:qt}});var Wp=H((Ydi,fet)=>{"use strict";d();var{Transform:DKt}=require("node:stream"),XZe=require("node:zlib"),{redirectStatusSet:BKt,referrerPolicySet:NKt,badPortsSet:MKt}=L7(),{getGlobalOrigin:ZZe}=bEe(),{collectASequenceOfCodePoints:tk,collectAnHTTPQuotedString:LKt,removeChars:FKt,parseMIMEType:OKt}=R0(),{performance:QKt}=require("node:perf_hooks"),{isBlobLike:UKt,ReadableStreamFrom:qKt,isValidHTTPToken:eet,normalizedMethodRecordsBase:HKt}=qi(),rk=require("node:assert"),{isUint8Array:$Kt}=require("node:util/types"),{webidl:O7}=ed(),tet=[],Lee;try{Lee=require("node:crypto");let t=["sha256","sha384","sha512"];tet=Lee.getHashes().filter(e=>t.includes(e))}catch{}function ret(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(ret,"responseURL");function WKt(t,e){if(!BKt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&iet(r)&&(net(r)||(r=jKt(r)),r=new URL(r,ret(t))),r&&!r.hash&&(r.hash=e),r}s(WKt,"responseLocationURL");function net(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(net,"isValidEncodedURL");function jKt(t){return Buffer.from(t,"binary").toString("utf8")}s(jKt,"normalizeBinaryStringToUtf8");function U7(t){return t.urlList[t.urlList.length-1]}s(U7,"requestCurrentURL");function GKt(t){let e=U7(t);return uet(e)&&MKt.has(e.port)?"blocked":"allowed"}s(GKt,"requestBadPort");function VKt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(VKt,"isErrorLike");function zKt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(zKt,"isValidReasonPhrase");var YKt=eet;function iet(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(iet,"isValidHeaderValue");function KKt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(NKt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(KKt,"setRequestReferrerPolicyOnRedirect");function JKt(){return"allowed"}s(JKt,"crossOriginResourcePolicyCheck");function XKt(){return"success"}s(XKt,"corsCheck");function ZKt(){return"success"}s(ZKt,"TAOCheck");function eJt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(eJt,"appendFetchMetadata");function tJt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&SEe(t.origin)&&!SEe(U7(t))&&(e=null);break;case"same-origin":Fee(t,U7(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(tJt,"appendRequestOriginHeader");function Y3(t,e){return t}s(Y3,"coarsenTime");function rJt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:Y3(t.domainLookupStartTime,r),domainLookupEndTime:Y3(t.domainLookupEndTime,r),connectionStartTime:Y3(t.connectionStartTime,r),connectionEndTime:Y3(t.connectionEndTime,r),secureConnectionStartTime:Y3(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(rJt,"clampAndCoarsenConnectionTimingInfo");function nJt(t){return Y3(QKt.now(),t)}s(nJt,"coarsenedSharedCurrentTime");function iJt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(iJt,"createOpaqueTimingInfo");function oet(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(oet,"makePolicyContainer");function oJt(t){return{referrerPolicy:t.referrerPolicy}}s(oJt,"clonePolicyContainer");function sJt(t){let e=t.referrerPolicy;rk(e);let r=null;if(t.referrer==="client"){let c=ZZe();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=wEe(r),i=wEe(r,!0);n.toString().length>4096&&(n=i);let o=Fee(t,n),a=Q7(n)&&!Q7(t.url);switch(e){case"origin":return i??wEe(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=U7(t);return Fee(n,c)?n:Q7(n)&&!Q7(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(sJt,"determineRequestsReferrer");function wEe(t,e){return rk(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(wEe,"stripURLForReferrer");function Q7(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(Q7,"isURLPotentiallyTrustworthy");function aJt(t,e){if(Lee===void 0)return!0;let r=set(e);if(r==="no metadata"||r.length===0)return!0;let n=lJt(r),i=uJt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=Lee.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),dJt(l,c))return!0}return!1}s(aJt,"bytesMatch");var cJt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function set(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=cJt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();tet.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(set,"parseMetadata");function lJt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(lJt,"getStrongestMetadata");function uJt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(uJt,"filterMetadataListByAlgorithm");function dJt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(dJt,"compareBase64Mixed");function fJt(t){}s(fJt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function Fee(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(Fee,"sameOrigin");function pJt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(pJt,"createDeferredPromise");function mJt(t){return t.controller.state==="aborted"}s(mJt,"isAborted");function hJt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(hJt,"isCancelled");function gJt(t){return HKt[t.toLowerCase()]??t}s(gJt,"normalizeMethod");function AJt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return rk(typeof e=="string"),e}s(AJt,"serializeJavascriptValueToJSONString");var yJt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function aet(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,yJt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(aet,"createIterator");function CJt(t,e,r,n=0,i=1){let o=aet(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return O7.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return O7.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return O7.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(O7.brandCheck(this,e),O7.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(CJt,"iteratorMixin");async function vJt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await cet(o))}catch(a){i(a)}}s(vJt,"fullyReadBody");function xJt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(xJt,"isReadableStreamLike");function EJt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(EJt,"readableStreamClose");var bJt=/[^\x00-\xFF]/;function Mee(t){return rk(!bJt.test(t)),t}s(Mee,"isomorphicEncode");async function cet(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!$Kt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(cet,"readAllBytes");function IJt(t){rk("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(IJt,"urlIsLocal");function SEe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(SEe,"urlHasHttpsScheme");function uet(t){rk("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(uet,"urlIsHttpHttpsScheme");function TJt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&tk(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&tk(l=>l==="	"||l===" ",r,n);let i=tk(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&tk(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&tk(l=>l==="	"||l===" ",r,n);let a=tk(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(TJt,"simpleRangeHeaderValue");function wJt(t,e,r){let n="bytes ";return n+=Mee(`${t}`),n+="-",n+=Mee(`${e}`),n+="/",n+=Mee(`${r}`),n}s(wJt,"buildContentRange");var _Ee=class extends DKt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?XZe.createInflate(this.#e):XZe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function SJt(t){return new _Ee(t)}s(SJt,"createInflate");function _Jt(t){let e=null,r=null,n=null,i=det("content-type",t);if(i===null)return"failure";for(let o of i){let a=OKt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(_Jt,"extractMimeType");function RJt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=tk(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=LKt(e,r),r.position<e.length)continue}else rk(e.charCodeAt(r.position)===44),r.position++;i=FKt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(RJt,"gettingDecodingSplitting");function det(t,e){let r=e.get(t,!0);return r===null?null:RJt(r)}s(det,"getDecodeSplit");var kJt=new TextDecoder;function PJt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),kJt.decode(t))}s(PJt,"utf8DecodeBytes");var REe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return ZZe()}get origin(){return this.baseUrl?.origin}policyContainer=oet()},kEe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new REe},DJt=new kEe;fet.exports={isAborted:mJt,isCancelled:hJt,isValidEncodedURL:net,createDeferredPromise:pJt,ReadableStreamFrom:qKt,tryUpgradeRequestToAPotentiallyTrustworthyURL:fJt,clampAndCoarsenConnectionTimingInfo:rJt,coarsenedSharedCurrentTime:nJt,determineRequestsReferrer:sJt,makePolicyContainer:oet,clonePolicyContainer:oJt,appendFetchMetadata:eJt,appendRequestOriginHeader:tJt,TAOCheck:ZKt,corsCheck:XKt,crossOriginResourcePolicyCheck:JKt,createOpaqueTimingInfo:iJt,setRequestReferrerPolicyOnRedirect:KKt,isValidHTTPToken:eet,requestBadPort:GKt,requestCurrentURL:U7,responseURL:ret,responseLocationURL:WKt,isBlobLike:UKt,isURLPotentiallyTrustworthy:Q7,isValidReasonPhrase:zKt,sameOrigin:Fee,normalizeMethod:gJt,serializeJavascriptValueToJSONString:AJt,iteratorMixin:CJt,createIterator:aet,isValidHeaderName:YKt,isValidHeaderValue:iet,isErrorLike:VKt,fullyReadBody:vJt,bytesMatch:aJt,isReadableStreamLike:xJt,readableStreamClose:EJt,isomorphicEncode:Mee,urlIsLocal:IJt,urlHasHttpsScheme:SEe,urlIsHttpHttpsScheme:uet,readAllBytes:cet,simpleRangeHeaderValue:TJt,buildContentRange:wJt,parseMetadata:set,createInflate:SJt,extractMimeType:_Jt,getDecodeSplit:det,utf8DecodeBytes:PJt,environmentSettingsObject:DJt}});var ew=H((Xdi,pet)=>{"use strict";d();pet.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var DEe=H((efi,met)=>{"use strict";d();var{Blob:BJt,File:NJt}=require("node:buffer"),{kState:Hx}=ew(),{webidl:JC}=ed(),PEe=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[Hx]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return JC.brandCheck(this,t),this[Hx].blobLike.stream(...e)}arrayBuffer(...e){return JC.brandCheck(this,t),this[Hx].blobLike.arrayBuffer(...e)}slice(...e){return JC.brandCheck(this,t),this[Hx].blobLike.slice(...e)}text(...e){return JC.brandCheck(this,t),this[Hx].blobLike.text(...e)}get size(){return JC.brandCheck(this,t),this[Hx].blobLike.size}get type(){return JC.brandCheck(this,t),this[Hx].blobLike.type}get name(){return JC.brandCheck(this,t),this[Hx].name}get lastModified(){return JC.brandCheck(this,t),this[Hx].lastModified}get[Symbol.toStringTag](){return"File"}};JC.converters.Blob=JC.interfaceConverter(BJt);function MJt(t){return t instanceof NJt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(MJt,"isFileLike");met.exports={FileLike:PEe,isFileLike:MJt}});var H7=H((nfi,Cet)=>{"use strict";d();var{isBlobLike:Oee,iteratorMixin:LJt}=Wp(),{kState:Pf}=ew(),{kEnumerableProperty:K3}=qi(),{FileLike:het,isFileLike:FJt}=DEe(),{webidl:Us}=ed(),{File:yet}=require("node:buffer"),get=require("node:util"),Aet=globalThis.File??yet,q7=class t{static{s(this,"FormData")}constructor(e){if(Us.util.markAsUncloneable(this),e!==void 0)throw Us.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Pf]=[]}append(e,r,n=void 0){Us.brandCheck(this,t);let i="FormData.append";if(Us.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oee(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Us.converters.USVString(e,i,"name"),r=Oee(r)?Us.converters.Blob(r,i,"value",{strict:!1}):Us.converters.USVString(r,i,"value"),n=arguments.length===3?Us.converters.USVString(n,i,"filename"):void 0;let o=BEe(e,r,n);this[Pf].push(o)}delete(e){Us.brandCheck(this,t);let r="FormData.delete";Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf]=this[Pf].filter(n=>n.name!==e)}get(e){Us.brandCheck(this,t);let r="FormData.get";Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name");let n=this[Pf].findIndex(i=>i.name===e);return n===-1?null:this[Pf][n].value}getAll(e){Us.brandCheck(this,t);let r="FormData.getAll";return Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf].filter(n=>n.name===e).map(n=>n.value)}has(e){Us.brandCheck(this,t);let r="FormData.has";return Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Us.brandCheck(this,t);let i="FormData.set";if(Us.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oee(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Us.converters.USVString(e,i,"name"),r=Oee(r)?Us.converters.Blob(r,i,"name",{strict:!1}):Us.converters.USVString(r,i,"name"),n=arguments.length===3?Us.converters.USVString(n,i,"name"):void 0;let o=BEe(e,r,n),a=this[Pf].findIndex(c=>c.name===e);a!==-1?this[Pf]=[...this[Pf].slice(0,a),o,...this[Pf].slice(a+1).filter(c=>c.name!==e)]:this[Pf].push(o)}[get.inspect.custom](e,r){let n=this[Pf].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=get.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};LJt("FormData",q7,Pf,"name","value");Object.defineProperties(q7.prototype,{append:K3,delete:K3,get:K3,getAll:K3,has:K3,set:K3,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function BEe(t,e,r){if(typeof e!="string"){if(FJt(e)||(e=e instanceof Blob?new Aet([e],"blob",{type:e.type}):new het(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof yet?new Aet([e],r,n):new het(e,r,n)}}return{name:t,value:e}}s(BEe,"makeEntry");Cet.exports={FormData:q7,makeEntry:BEe}});var Tet=H((sfi,Iet)=>{"use strict";d();var{isUSVString:vet,bufferToLowerCasedHeaderName:OJt}=qi(),{utf8DecodeBytes:QJt}=Wp(),{HTTP_TOKEN_CODEPOINTS:UJt,isomorphicDecode:xet}=R0(),{isFileLike:qJt}=DEe(),{makeEntry:HJt}=H7(),Qee=require("node:assert"),{File:$Jt}=require("node:buffer"),WJt=globalThis.File??$Jt,jJt=Buffer.from('form-data; name="'),Eet=Buffer.from("; filename"),GJt=Buffer.from("--"),VJt=Buffer.from(`--\r
`);function zJt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(zJt,"isAsciiString");function YJt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(YJt,"validateBoundary");function KJt(t,e){Qee(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&Uee(t,GJt,o)||o.position===t.length-4&&Uee(t,VJt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=JJt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(f??="text/plain",zJt(f)||(f=""),h=new WJt([m],u,{type:f})):h=QJt(Buffer.from(m)),Qee(vet(l)),Qee(typeof h=="string"&&vet(h)||qJt(h)),i.push(HJt(l,h,u))}}s(KJt,"multipartFormDataParser");function JJt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=J3(c=>c!==10&&c!==13&&c!==58,t,e);if(a=NEe(a,!0,!0,c=>c===9||c===32),!UJt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,J3(c=>c===32||c===9,t,e),OJt(a)){case"content-disposition":{if(r=n=null,!Uee(t,jJt,e)||(e.position+=17,r=bet(t,e),r===null))return"failure";if(Uee(t,Eet,e)){let c=e.position+Eet.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=bet(t,e),n===null))return"failure"}break}case"content-type":{let c=J3(l=>l!==10&&l!==13,t,e);c=NEe(c,!1,!0,l=>l===9||l===32),i=xet(c);break}case"content-transfer-encoding":{let c=J3(l=>l!==10&&l!==13,t,e);c=NEe(c,!1,!0,l=>l===9||l===32),o=xet(c);break}default:J3(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(JJt,"parseMultipartFormDataHeaders");function bet(t,e){Qee(t[e.position-1]===34);let r=J3(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(bet,"parseMultipartFormDataName");function J3(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(J3,"collectASequenceOfBytes");function NEe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(NEe,"removeChars");function Uee(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(Uee,"bufferStartsWith");Iet.exports={multipartFormDataParser:KJt,validateBoundary:YJt}});var eN=H((lfi,Net)=>{"use strict";d();var $7=qi(),{ReadableStreamFrom:XJt,isBlobLike:wet,isReadableStreamLike:ZJt,readableStreamClose:eXt,createDeferredPromise:tXt,fullyReadBody:rXt,extractMimeType:nXt,utf8DecodeBytes:ket}=Wp(),{FormData:_et}=H7(),{kState:Z3}=ew(),{webidl:iXt}=ed(),{Blob:oXt}=require("node:buffer"),MEe=require("node:assert"),{isErrored:Pet,isDisturbed:sXt}=require("node:stream"),{isArrayBuffer:aXt}=require("node:util/types"),{serializeAMimeType:cXt}=R0(),{multipartFormDataParser:lXt}=Tet(),LEe;try{let t=require("node:crypto");LEe=s(e=>t.randomInt(0,e),"random")}catch{LEe=s(t=>Math.floor(Math.random(t)),"random")}var qee=new TextEncoder;function uXt(){}s(uXt,"noop");var FEe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,OEe;FEe&&(OEe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!sXt(e)&&!Pet(e)&&e.cancel("Response object has been garbage collected").catch(uXt)}));function Det(t,e=!1){let r=null;t instanceof ReadableStream?r=t:wet(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?qee.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>eXt(l))},start(){},type:"bytes"}),MEe(ZJt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(aXt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if($7.isFormDataLike(t)){let l=`----formdata-undici-0${`${LEe(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(y=>y.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[y,E]of t)if(typeof E=="string"){let b=qee.encode(u+`; name="${f(p(y))}"\r
\r
${p(E)}\r
`);m.push(b),o+=b.byteLength}else{let b=qee.encode(`${u}; name="${f(p(y))}"`+(E.name?`; filename="${f(E.name)}"`:"")+`\r
Content-Type: ${E.type||"application/octet-stream"}\r
\r
`);m.push(b,E,h),typeof E.size=="number"?o+=b.byteLength+E.size+h.byteLength:g=!0}let A=qee.encode(`--${l}--\r
`);m.push(A),o+=A.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let y of m)y.stream?yield*y.stream():yield y},"action"),a=`multipart/form-data; boundary=${l}`}else if(wet(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if($7.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:XJt(t)}if((typeof i=="string"||$7.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!Pet(r)){let m=new Uint8Array(f);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(Det,"extractBody");function dXt(t,e=!1){return t instanceof ReadableStream&&(MEe(!$7.isDisturbed(t),"The body has already been consumed."),MEe(!t.locked,"The stream is locked.")),Det(t,e)}s(dXt,"safelyExtractBody");function fXt(t,e){let[r,n]=e.stream.tee();return FEe&&OEe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(fXt,"cloneBody");function pXt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(pXt,"throwIfAborted");function mXt(t){return{blob(){return X3(this,r=>{let n=Ret(this);return n===null?n="":n&&(n=cXt(n)),new oXt([r],{type:n})},t)},arrayBuffer(){return X3(this,r=>new Uint8Array(r).buffer,t)},text(){return X3(this,ket,t)},json(){return X3(this,gXt,t)},formData(){return X3(this,r=>{let n=Ret(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=lXt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new _et;return o[Z3]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new _et;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return X3(this,r=>new Uint8Array(r),t)}}}s(mXt,"bodyMixinMethods");function hXt(t){Object.assign(t.prototype,mXt(t))}s(hXt,"mixinBody");async function X3(t,e,r){if(iXt.brandCheck(t,r),Bet(t))throw new TypeError("Body is unusable: Body has already been read");pXt(t[Z3]);let n=tXt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[Z3].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await rXt(t[Z3].body,o,i),n.promise)}s(X3,"consumeBody");function Bet(t){let e=t[Z3].body;return e!=null&&(e.stream.locked||$7.isDisturbed(e.stream))}s(Bet,"bodyUnusable");function gXt(t){return JSON.parse(ket(t))}s(gXt,"parseJSONFromBytes");function Ret(t){let e=t[Z3].headersList,r=nXt(e);return r==="failure"?null:r}s(Ret,"bodyMimeType");Net.exports={extractBody:Det,safelyExtractBody:dXt,cloneBody:fXt,mixinBody:hXt,streamRegistry:OEe,hasFinalizationRegistry:FEe,bodyUnusable:Bet}});var jet=H((ffi,Wet)=>{"use strict";d();var Bn=require("node:assert"),ci=qi(),{channels:Met}=q3(),QEe=yEe(),{RequestContentLengthMismatchError:nk,ResponseContentLengthMismatchError:AXt,RequestAbortedError:qet,HeadersTimeoutError:yXt,HeadersOverflowError:CXt,SocketError:Vee,InformationalError:tN,BodyTimeoutError:vXt,HTTPParserError:xXt,ResponseExceededMaxSizeError:EXt}=Yo(),{kUrl:Het,kReset:k0,kClient:$Ee,kParser:dc,kBlocking:G7,kRunning:Qd,kPending:bXt,kSize:Let,kWriting:rw,kQueue:LA,kNoRef:W7,kKeepAliveDefaultTimeout:IXt,kHostHeader:TXt,kPendingIdx:wXt,kRunningIdx:Lh,kError:Fh,kPipelining:jee,kSocket:rN,kKeepAliveTimeoutValue:zee,kMaxHeadersSize:UEe,kKeepAliveMaxTimeout:SXt,kKeepAliveTimeoutThreshold:_Xt,kHeadersTimeout:RXt,kBodyTimeout:kXt,kStrictContentLength:WEe,kMaxRequests:Fet,kCounter:PXt,kMaxResponseSize:DXt,kOnError:BXt,kResume:tw,kHTTPContext:$et}=Ra(),XC=PZe(),NXt=Buffer.alloc(0),Hee=Buffer[Symbol.species],$ee=ci.addListener,MXt=ci.removeAllListeners,qEe;async function LXt(){let t=process.env.JEST_WORKER_ID?xEe():void 0,e;try{e=await WebAssembly.compile(NZe())}catch{e=await WebAssembly.compile(t||xEe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Bn(Fl.ptr===r);let o=n-e1+ZC.byteOffset;return Fl.onStatus(new Hee(ZC.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Bn(Fl.ptr===r),Fl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Bn(Fl.ptr===r);let o=n-e1+ZC.byteOffset;return Fl.onHeaderField(new Hee(ZC.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Bn(Fl.ptr===r);let o=n-e1+ZC.byteOffset;return Fl.onHeaderValue(new Hee(ZC.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Bn(Fl.ptr===r),Fl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Bn(Fl.ptr===r);let o=n-e1+ZC.byteOffset;return Fl.onBody(new Hee(ZC.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Bn(Fl.ptr===r),Fl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(LXt,"lazyllhttp");var HEe=null,jEe=LXt();jEe.catch();var Fl=null,ZC=null,Wee=0,e1=null,FXt=0,j7=1,nN=2|j7,Gee=4|j7,GEe=8|FXt,VEe=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Bn(Number.isFinite(e[UEe])&&e[UEe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(XC.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[UEe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[DXt]}setTimeout(e,r){e!==this.timeoutValue||r&j7^this.timeoutType&j7?(this.timeout&&(QEe.clearTimeout(this.timeout),this.timeout=null),e&&(r&j7?this.timeout=QEe.setFastTimeout(Oet,e,new WeakRef(this)):(this.timeout=setTimeout(Oet,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Bn(this.ptr!=null),Bn(Fl==null),this.llhttp.llhttp_resume(this.ptr),Bn(this.timeoutType===Gee),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||NXt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Bn(this.ptr!=null),Bn(Fl==null),Bn(!this.paused);let{socket:r,llhttp:n}=this;e.length>Wee&&(e1&&n.free(e1),Wee=Math.ceil(e.length/4096)*4096,e1=n.malloc(Wee)),new Uint8Array(n.memory.buffer,e1,Wee).set(e);try{let i;try{ZC=e,Fl=this,i=n.llhttp_execute(this.ptr,e1,e.length)}catch(a){throw a}finally{Fl=null,ZC=null}let o=n.llhttp_get_error_pos(this.ptr)-e1;if(i===XC.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===XC.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==XC.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new xXt(c,XC.ERROR[i],e.slice(o))}}catch(i){ci.destroy(r,i)}}destroy(){Bn(this.ptr!=null),Bn(Fl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&QEe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[LA][r[Lh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=ci.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&ci.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&ci.destroy(this.socket,new CXt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Bn(r),Bn(n[rN]===i),Bn(!i.destroyed),Bn(!this.paused),Bn((o.length&1)===0);let c=n[LA][n[Lh]];Bn(c),Bn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[dc].destroy(),i[dc]=null,i[$Ee]=null,i[Fh]=null,MXt(i),n[rN]=null,n[$et]=null,n[LA][n[Lh]++]=null,n.emit("disconnect",n[Het],[n],new tN("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){ci.destroy(i,l)}n[tw]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[LA][i[Lh]];if(!l)return-1;if(Bn(!this.upgrade),Bn(this.statusCode<200),e===100)return ci.destroy(o,new Vee("bad response",ci.getSocketInfo(o))),-1;if(r&&!l.upgrade)return ci.destroy(o,new Vee("bad upgrade",ci.getSocketInfo(o))),-1;if(Bn(this.timeoutType===nN),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[k0]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[kXt];this.setTimeout(f,Gee)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Bn(i[Qd]===1),this.upgrade=!0,2;if(r)return Bn(i[Qd]===1),this.upgrade=!0,2;if(Bn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[jee]){let f=this.keepAlive?ci.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[_Xt],i[SXt]);p<=0?o[k0]=!0:i[zee]=p}else i[zee]=i[IXt]}else o[k0]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[G7]&&(o[G7]=!1,i[tw]()),u?XC.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[LA][r[Lh]];if(Bn(a),Bn(this.timeoutType===Gee),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Bn(i>=200),o>-1&&this.bytesRead+e.length>o)return ci.destroy(n,new EXt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return XC.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Bn(n>=100),Bn((this.headers.length&1)===0);let u=e[LA][e[Lh]];if(Bn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return ci.destroy(r,new AXt),-1;if(u.onComplete(o),e[LA][e[Lh]++]=null,r[rw])return Bn(e[Qd]===0),ci.destroy(r,new tN("reset")),XC.ERROR.PAUSED;if(l){if(r[k0]&&e[Qd]===0)return ci.destroy(r,new tN("reset")),XC.ERROR.PAUSED;e[jee]==null||e[jee]===1?setImmediate(()=>e[tw]()):e[tw]()}else return ci.destroy(r,new tN("reset")),XC.ERROR.PAUSED}}};function Oet(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===nN?(!e[rw]||e.writableNeedDrain||n[Qd]>1)&&(Bn(!i,"cannot be paused while waiting for headers"),ci.destroy(e,new yXt)):r===Gee?i||ci.destroy(e,new vXt):r===GEe&&(Bn(n[Qd]===0&&n[zee]),ci.destroy(e,new tN("socket idle timeout")))}s(Oet,"onParserTimeout");async function OXt(t,e){t[rN]=e,HEe||(HEe=await jEe,jEe=null),e[W7]=!1,e[rw]=!1,e[k0]=!1,e[G7]=!1,e[dc]=new VEe(t,e,HEe),$ee(e,"error",function(n){Bn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[dc];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Fh]=n,this[$Ee][BXt](n)}),$ee(e,"readable",function(){let n=this[dc];n&&n.readMore()}),$ee(e,"end",function(){let n=this[dc];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}ci.destroy(this,new Vee("other side closed",ci.getSocketInfo(this)))}),$ee(e,"close",function(){let n=this[$Ee],i=this[dc];i&&(!this[Fh]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[dc].destroy(),this[dc]=null);let o=this[Fh]||new Vee("closed",ci.getSocketInfo(this));if(n[rN]=null,n[$et]=null,n.destroyed){Bn(n[bXt]===0);let a=n[LA].splice(n[Lh]);for(let c=0;c<a.length;c++){let l=a[c];ci.errorRequest(n,l,o)}}else if(n[Qd]>0&&o.code!=="UND_ERR_INFO"){let a=n[LA][n[Lh]];n[LA][n[Lh]++]=null,ci.errorRequest(n,a,o)}n[wXt]=n[Lh],Bn(n[Qd]===0),n.emit("disconnect",n[Het],[n],o),n[tw]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return qXt(t,...n)},resume(){QXt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[rw]||e[k0]||e[G7]||n&&(t[Qd]>0&&!n.idempotent||t[Qd]>0&&(n.upgrade||n.method==="CONNECT")||t[Qd]>0&&ci.bodyLength(n.body)!==0&&(ci.isStream(n.body)||ci.isAsyncIterable(n.body)||ci.isFormDataLike(n.body))))}}}s(OXt,"connectH1");function QXt(t){let e=t[rN];if(e&&!e.destroyed){if(t[Let]===0?!e[W7]&&e.unref&&(e.unref(),e[W7]=!0):e[W7]&&e.ref&&(e.ref(),e[W7]=!1),t[Let]===0)e[dc].timeoutType!==GEe&&e[dc].setTimeout(t[zee],GEe);else if(t[Qd]>0&&e[dc].statusCode<200&&e[dc].timeoutType!==nN){let r=t[LA][t[Lh]],n=r.headersTimeout!=null?r.headersTimeout:t[RXt];e[dc].setTimeout(n,nN)}}}s(QXt,"resumeH1");function UXt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(UXt,"shouldSendContentLength");function qXt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(ci.isFormDataLike(l)){qEe||(qEe=eN().extractBody);let[y,E]=qEe(l);e.contentType==null&&u.push("content-type",E),l=y.stream,f=y.length}else ci.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=ci.bodyLength(l);if(f=m??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),UXt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[WEe])return ci.errorRequest(t,e,new nk),!1;process.emitWarning(new nk)}let h=t[rN],g=s(y=>{e.aborted||e.completed||(ci.errorRequest(t,e,y||new qet),ci.destroy(l),ci.destroy(h,new tN("aborted")))},"abort");try{e.onConnect(g)}catch(y){ci.errorRequest(t,e,y)}if(e.aborted)return!1;r==="HEAD"&&(h[k0]=!0),(o||r==="CONNECT")&&(h[k0]=!0),c!=null&&(h[k0]=c),t[Fet]&&h[PXt]++>=t[Fet]&&(h[k0]=!0),a&&(h[G7]=!0);let A=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?A+=`host: ${i}\r
`:A+=t[TXt],o?A+=`connection: upgrade\r
upgrade: ${o}\r
`:t[jee]&&!h[k0]?A+=`connection: keep-alive\r
`:A+=`connection: close\r
`,Array.isArray(u))for(let y=0;y<u.length;y+=2){let E=u[y+0],b=u[y+1];if(Array.isArray(b))for(let S=0;S<b.length;S++)A+=`${E}: ${b[S]}\r
`;else A+=`${E}: ${b}\r
`}return Met.sendHeaders.hasSubscribers&&Met.sendHeaders.publish({request:e,headers:A,socket:h}),!l||m===0?Qet(g,null,t,e,h,f,A,p):ci.isBuffer(l)?Qet(g,l,t,e,h,f,A,p):ci.isBlobLike(l)?typeof l.stream=="function"?Uet(g,l.stream(),t,e,h,f,A,p):$Xt(g,l,t,e,h,f,A,p):ci.isStream(l)?HXt(g,l,t,e,h,f,A,p):ci.isIterable(l)?Uet(g,l,t,e,h,f,A,p):Bn(!1),!0}s(qXt,"writeH1");function HXt(t,e,r,n,i,o,a,c){Bn(o!==0||r[Qd]===0,"stream body cannot be pipelined");let l=!1,u=new Yee({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(A){ci.destroy(this,A)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new qet;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Bn(i.destroyed||i[rw]&&r[Qd]<=1),i.off("drain",p).off("error",h),e.removeListener("data",f).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(A){g=A}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?ci.destroy(e,g):ci.destroy(e)}},"onFinished");e.on("data",f).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(HXt,"writeStream");function Qet(t,e,r,n,i,o,a,c){try{e?ci.isBuffer(e)&&(Bn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[k0]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Bn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[tw]()}catch(l){t(l)}}s(Qet,"writeBuffer");async function $Xt(t,e,r,n,i,o,a,c){Bn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new nk;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[k0]=!0),r[tw]()}catch(l){t(l)}}s($Xt,"writeBlob");async function Uet(t,e,r,n,i,o,a,c){Bn(o!==0||r[Qd]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let f=s(()=>new Promise((m,h)=>{Bn(l===null),i[Fh]?h(i[Fh]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new Yee({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Fh])throw i[Fh];p.write(m)||await f()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(Uet,"writeIterable");var Yee=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[rw]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Fh])throw r[Fh];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[WEe])throw new nk;process.emitWarning(new nk)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[k0]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[dc].timeout&&r[dc].timeoutType===nN&&r[dc].timeout.refresh&&r[dc].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[rw]=!1,e[Fh])throw e[Fh];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[WEe])throw new nk;process.emitWarning(new nk)}e[dc].timeout&&e[dc].timeoutType===nN&&e[dc].timeout.refresh&&e[dc].timeout.refresh(),n[tw]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[rw]=!1,e&&(Bn(n[Qd]<=1,"pipeline should only contain this request"),i(e))}};Wet.exports=OXt});var Zet=H((hfi,Xet)=>{"use strict";d();var Oh=require("node:assert"),{pipeline:WXt}=require("node:stream"),fo=qi(),{RequestContentLengthMismatchError:zEe,RequestAbortedError:Get,SocketError:V7,InformationalError:YEe}=Yo(),{kUrl:Kee,kReset:Xee,kClient:iN,kRunning:Zee,kPending:jXt,kQueue:nw,kPendingIdx:KEe,kRunningIdx:FA,kError:QA,kSocket:fu,kStrictContentLength:GXt,kOnError:JEe,kMaxConcurrentStreams:Jet,kHTTP2Session:OA,kResume:iw,kSize:VXt,kHTTPContext:zXt}=Ra(),$x=Symbol("open streams"),Vet,zet=!1,Jee;try{Jee=require("node:http2")}catch{Jee={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:YXt,HTTP2_HEADER_METHOD:KXt,HTTP2_HEADER_PATH:JXt,HTTP2_HEADER_SCHEME:XXt,HTTP2_HEADER_CONTENT_LENGTH:ZXt,HTTP2_HEADER_EXPECT:eZt,HTTP2_HEADER_STATUS:tZt}}=Jee;function rZt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(rZt,"parseH2Headers");async function nZt(t,e){t[fu]=e,zet||(zet=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=Jee.connect(t[Kee],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[Jet]});r[$x]=0,r[iN]=t,r[fu]=e,fo.addListener(r,"error",oZt),fo.addListener(r,"frameError",sZt),fo.addListener(r,"end",aZt),fo.addListener(r,"goaway",cZt),fo.addListener(r,"close",function(){let{[iN]:i}=this,{[fu]:o}=i,a=this[fu][QA]||this[QA]||new V7("closed",fo.getSocketInfo(o));if(i[OA]=null,i.destroyed){Oh(i[jXt]===0);let c=i[nw].splice(i[FA]);for(let l=0;l<c.length;l++){let u=c[l];fo.errorRequest(i,u,a)}}}),r.unref(),t[OA]=r,e[OA]=r,fo.addListener(e,"error",function(i){Oh(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[QA]=i,this[iN][JEe](i)}),fo.addListener(e,"end",function(){fo.destroy(this,new V7("other side closed",fo.getSocketInfo(this)))}),fo.addListener(e,"close",function(){let i=this[QA]||new V7("closed",fo.getSocketInfo(this));t[fu]=null,this[OA]!=null&&this[OA].destroy(i),t[KEe]=t[FA],Oh(t[Zee]===0),t.emit("disconnect",t[Kee],[t],i),t[iw]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return uZt(t,...i)},resume(){iZt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(nZt,"connectH2");function iZt(t){let e=t[fu];e?.destroyed===!1&&(t[VXt]===0&&t[Jet]===0?(e.unref(),t[OA].unref()):(e.ref(),t[OA].ref()))}s(iZt,"resumeH2");function oZt(t){Oh(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[fu][QA]=t,this[iN][JEe](t)}s(oZt,"onHttp2SessionError");function sZt(t,e,r){if(r===0){let n=new YEe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[fu][QA]=n,this[iN][JEe](n)}}s(sZt,"onHttp2FrameError");function aZt(){let t=new V7("other side closed",fo.getSocketInfo(this[fu]));this.destroy(t),fo.destroy(this[fu],t)}s(aZt,"onHttp2SessionEnd");function cZt(t){let e=this[QA]||new V7(`HTTP/2: "GOAWAY" frame received with code ${t}`,fo.getSocketInfo(this)),r=this[iN];if(r[fu]=null,r[zXt]=null,this[OA]!=null&&(this[OA].destroy(e),this[OA]=null),fo.destroy(this[fu],e),r[FA]<r[nw].length){let n=r[nw][r[FA]];r[nw][r[FA]++]=null,fo.errorRequest(r,n,e),r[KEe]=r[FA]}Oh(r[Zee]===0),r.emit("disconnect",r[Kee],[r],e),r[iw]()}s(cZt,"onHTTP2GoAway");function lZt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(lZt,"shouldSendContentLength");function uZt(t,e){let r=t[OA],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return fo.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let R=0;R<u.length;R+=2){let B=u[R+0],L=u[R+1];if(Array.isArray(L))for(let O=0;O<L.length;O++)p[B]?p[B]+=`,${L[O]}`:p[B]=L[O];else p[B]=L}let m,{hostname:h,port:g}=t[Kee];p[YXt]=o||`${h}${g?`:${g}`:""}`,p[KXt]=n;let A=s(R=>{e.aborted||e.completed||(R=R||new Get,fo.errorRequest(t,e,R),m!=null&&fo.destroy(m,R),fo.destroy(f,R),t[nw][t[FA]++]=null,t[iw]())},"abort");try{e.onConnect(A)}catch(R){fo.errorRequest(t,e,R)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[$x],t[nw][t[FA]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[$x],t[nw][t[FA]++]=null}),m.once("close",()=>{r[$x]-=1,r[$x]===0&&r.unref()}),!0;p[JXt]=i,p[XXt]="https";let y=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let E=fo.bodyLength(f);if(fo.isFormDataLike(f)){Vet??=eN().extractBody;let[R,B]=Vet(f);p["content-type"]=B,f=R.stream,E=R.length}if(E==null&&(E=e.contentLength),(E===0||!y)&&(E=null),lZt(n)&&E>0&&e.contentLength!=null&&e.contentLength!==E){if(t[GXt])return fo.errorRequest(t,e,new zEe),!1;process.emitWarning(new zEe)}E!=null&&(Oh(f,"no body must not have content length"),p[ZXt]=`${E}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[eZt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",S)):(m=r.request(p,{endStream:b,signal:l}),S()),++r[$x],m.once("response",R=>{let{[tZt]:B,...L}=R;if(e.onResponseStarted(),e.aborted){let O=new Get;fo.errorRequest(t,e,O),fo.destroy(m,O);return}e.onHeaders(Number(B),rZt(L),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",O=>{e.onData(O)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[$x]===0&&r.unref(),A(new YEe("HTTP/2: stream half-closed (remote)")),t[nw][t[FA]++]=null,t[KEe]=t[FA],t[iw]()}),m.once("close",()=>{r[$x]-=1,r[$x]===0&&r.unref()}),m.once("error",function(R){A(R)}),m.once("frameError",(R,B)=>{A(new YEe(`HTTP/2: "frameError" received - type ${R}, code ${B}`))}),!0;function S(){!f||E===0?Yet(A,m,null,t,e,t[fu],E,y):fo.isBuffer(f)?Yet(A,m,f,t,e,t[fu],E,y):fo.isBlobLike(f)?typeof f.stream=="function"?Ket(A,m,f.stream(),t,e,t[fu],E,y):fZt(A,m,f,t,e,t[fu],E,y):fo.isStream(f)?dZt(A,t[fu],y,m,f,t,e,E):fo.isIterable(f)?Ket(A,m,f,t,e,t[fu],E,y):Oh(!1)}s(S,"writeBodyH2")}s(uZt,"writeH2");function Yet(t,e,r,n,i,o,a,c){try{r!=null&&fo.isBuffer(r)&&(Oh(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[Xee]=!0),i.onRequestSent(),n[iw]()}catch(l){t(l)}}s(Yet,"writeBuffer");function dZt(t,e,r,n,i,o,a,c){Oh(c!==0||o[Zee]===0,"stream body cannot be pipelined");let l=WXt(i,n,f=>{f?(fo.destroy(l,f),t(f)):(fo.removeAllListeners(l),a.onRequestSent(),r||(e[Xee]=!0),o[iw]())});fo.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(dZt,"writeStream");async function fZt(t,e,r,n,i,o,a,c){Oh(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new zEe;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[Xee]=!0),n[iw]()}catch(l){t(l)}}s(fZt,"writeBlob");async function Ket(t,e,r,n,i,o,a,c){Oh(a!==0||n[Zee]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,m)=>{Oh(l===null),o[QA]?m(o[QA]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[QA])throw o[QA];let m=e.write(p);i.onBodySent(p),m||await f()}e.end(),i.onRequestSent(),c||(o[Xee]=!0),n[iw]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(Ket,"writeIterable");Xet.exports=nZt});var tte=H((yfi,rtt)=>{"use strict";d();var t1=qi(),{kBodyUsed:z7}=Ra(),ZEe=require("node:assert"),{InvalidArgumentError:pZt}=Yo(),mZt=require("node:events"),hZt=[300,301,302,303,307,308],ett=Symbol("body"),ete=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[ett]=e,this[z7]=!1}async*[Symbol.asyncIterator](){ZEe(!this[z7],"disturbed"),this[z7]=!0,yield*this[ett]}},XEe=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new pZt("maxRedirections must be a positive number");t1.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,t1.isStream(this.opts.body)?(t1.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){ZEe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[z7]=!1,mZt.prototype.on.call(this.opts.body,"data",function(){this[z7]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new ete(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&t1.isIterable(this.opts.body)&&(this.opts.body=new ete(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||t1.isDisturbed(this.opts.body)?null:gZt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=t1.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=AZt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function gZt(t,e){if(hZt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&t1.headerNameToString(e[r])==="location")return e[r+1]}s(gZt,"parseLocation");function ttt(t,e,r){if(t.length===4)return t1.headerNameToString(t)==="host";if(e&&t1.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=t1.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(ttt,"shouldRemoveHeader");function AZt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)ttt(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))ttt(i,e,r)||n.push(i,t[i]);else ZEe(t==null,"headers must be an object or an array");return n}s(AZt,"cleanRequestHeaders");rtt.exports=XEe});var rte=H((xfi,ntt)=>{"use strict";d();var yZt=tte();function CZt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new yZt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(CZt,"createRedirectInterceptor");ntt.exports=CZt});var tQ=H((Ifi,ptt)=>{"use strict";d();var Wx=require("node:assert"),ltt=require("node:net"),vZt=require("node:http"),ik=qi(),{channels:oN}=q3(),xZt=yZe(),EZt=j3(),{InvalidArgumentError:Qc,InformationalError:bZt,ClientDestroyedError:IZt}=Yo(),TZt=M7(),{kUrl:r1,kServerName:ow,kClient:wZt,kBusy:ebe,kConnect:SZt,kResuming:ok,kRunning:Z7,kPending:eQ,kSize:X7,kQueue:UA,kConnected:_Zt,kConnecting:sN,kNeedDrain:aw,kKeepAliveDefaultTimeout:itt,kHostHeader:RZt,kPendingIdx:qA,kRunningIdx:jx,kError:kZt,kPipelining:nte,kKeepAliveTimeoutValue:PZt,kMaxHeadersSize:DZt,kKeepAliveMaxTimeout:BZt,kKeepAliveTimeoutThreshold:NZt,kHeadersTimeout:MZt,kBodyTimeout:LZt,kStrictContentLength:FZt,kConnector:Y7,kMaxRedirections:OZt,kMaxRequests:tbe,kCounter:QZt,kClose:UZt,kDestroy:qZt,kDispatch:HZt,kInterceptors:ott,kLocalAddress:K7,kMaxResponseSize:$Zt,kOnError:WZt,kHTTPContext:Uc,kMaxConcurrentStreams:jZt,kResume:J7}=Ra(),GZt=jet(),VZt=Zet(),stt=!1,sw=Symbol("kClosedResolve"),att=s(()=>{},"noop");function utt(t){return t[nte]??t[Uc]?.defaultPipelining??1}s(utt,"getPipelining");var rbe=class extends EZt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:A,pipelining:y,tls:E,strictContentLength:b,maxCachedSessions:S,maxRedirections:R,connect:B,maxRequestsPerClient:L,localAddress:O,maxResponseSize:K,autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z,maxConcurrentStreams:Q,allowH2:U}={}){if(super(),f!==void 0)throw new Qc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Qc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Qc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Qc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Qc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Qc("invalid maxHeaderSize");if(A!=null&&typeof A!="string")throw new Qc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new Qc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Qc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Qc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Qc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Qc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new Qc("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Qc("connect must be a function or an object");if(R!=null&&(!Number.isInteger(R)||R<0))throw new Qc("maxRedirections must be a positive number");if(L!=null&&(!Number.isInteger(L)||L<0))throw new Qc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||ltt.isIP(O)===0))throw new Qc("localAddress must be valid string IP address");if(K!=null&&(!Number.isInteger(K)||K<-1))throw new Qc("maxResponseSize must be a positive number");if(z!=null&&(!Number.isInteger(z)||z<-1))throw new Qc("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Qc("allowH2 must be a valid boolean value");if(Q!=null&&(typeof Q!="number"||Q<1))throw new Qc("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=TZt({...E,maxCachedSessions:S,allowH2:U,socketPath:A,timeout:c,...V?{autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[ott]=r.Client,stt||(stt=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[ott]=[zZt({maxRedirections:R})],this[r1]=ik.parseOrigin(e),this[Y7]=B,this[nte]=y??1,this[DZt]=n||vZt.maxHeaderSize,this[itt]=p??4e3,this[BZt]=h??6e5,this[NZt]=g??2e3,this[PZt]=this[itt],this[ow]=null,this[K7]=O??null,this[ok]=0,this[aw]=0,this[RZt]=`host: ${this[r1].hostname}${this[r1].port?`:${this[r1].port}`:""}\r
`,this[LZt]=l??3e5,this[MZt]=i??3e5,this[FZt]=b??!0,this[OZt]=R,this[tbe]=L,this[sw]=null,this[$Zt]=K>-1?K:-1,this[jZt]=Q??100,this[Uc]=null,this[UA]=[],this[jx]=0,this[qA]=0,this[J7]=Z=>nbe(this,Z),this[WZt]=Z=>dtt(this,Z)}get pipelining(){return this[nte]}set pipelining(e){this[nte]=e,this[J7](!0)}get[eQ](){return this[UA].length-this[qA]}get[Z7](){return this[qA]-this[jx]}get[X7](){return this[UA].length-this[jx]}get[_Zt](){return!!this[Uc]&&!this[sN]&&!this[Uc].destroyed}get[ebe](){return!!(this[Uc]?.busy(null)||this[X7]>=(utt(this)||1)||this[eQ]>0)}[SZt](e){ftt(this),this.once("connect",e)}[HZt](e,r){let n=e.origin||this[r1].origin,i=new xZt(n,e,r);return this[UA].push(i),this[ok]||(ik.bodyLength(i.body)==null&&ik.isIterable(i.body)?(this[ok]=1,queueMicrotask(()=>nbe(this))):this[J7](!0)),this[ok]&&this[aw]!==2&&this[ebe]&&(this[aw]=2),this[aw]<2}async[UZt](){return new Promise(e=>{this[X7]?this[sw]=e:e(null)})}async[qZt](e){return new Promise(r=>{let n=this[UA].splice(this[qA]);for(let o=0;o<n.length;o++){let a=n[o];ik.errorRequest(this,a,e)}let i=s(()=>{this[sw]&&(this[sw](),this[sw]=null),r(null)},"callback");this[Uc]?(this[Uc].destroy(e,i),this[Uc]=null):queueMicrotask(i),this[J7]()})}},zZt=rte();function dtt(t,e){if(t[Z7]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){Wx(t[qA]===t[jx]);let r=t[UA].splice(t[jx]);for(let n=0;n<r.length;n++){let i=r[n];ik.errorRequest(t,i,e)}Wx(t[X7]===0)}}s(dtt,"onError");async function ftt(t){Wx(!t[sN]),Wx(!t[Uc]);let{host:e,hostname:r,protocol:n,port:i}=t[r1];if(r[0]==="["){let o=r.indexOf("]");Wx(o!==-1);let a=r.substring(1,o);Wx(ltt.isIP(a)),r=a}t[sN]=!0,oN.beforeConnect.hasSubscribers&&oN.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Uc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[Y7]});try{let o=await new Promise((a,c)=>{t[Y7]({host:e,hostname:r,protocol:n,port:i,servername:t[ow],localAddress:t[K7]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){ik.destroy(o.on("error",att),new IZt);return}Wx(o);try{t[Uc]=o.alpnProtocol==="h2"?await VZt(t,o):await GZt(t,o)}catch(a){throw o.destroy().on("error",att),a}t[sN]=!1,o[QZt]=0,o[tbe]=t[tbe],o[wZt]=t,o[kZt]=null,oN.connected.hasSubscribers&&oN.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Uc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[Y7],socket:o}),t.emit("connect",t[r1],[t])}catch(o){if(t.destroyed)return;if(t[sN]=!1,oN.connectError.hasSubscribers&&oN.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Uc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[Y7],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(Wx(t[Z7]===0);t[eQ]>0&&t[UA][t[qA]].servername===t[ow];){let a=t[UA][t[qA]++];ik.errorRequest(t,a,o)}else dtt(t,o);t.emit("connectionError",t[r1],[t],o)}t[J7]()}s(ftt,"connect");function ctt(t){t[aw]=0,t.emit("drain",t[r1],[t])}s(ctt,"emitDrain");function nbe(t,e){t[ok]!==2&&(t[ok]=2,YZt(t,e),t[ok]=0,t[jx]>256&&(t[UA].splice(0,t[jx]),t[qA]-=t[jx],t[jx]=0))}s(nbe,"resume");function YZt(t,e){for(;;){if(t.destroyed){Wx(t[eQ]===0);return}if(t[sw]&&!t[X7]){t[sw](),t[sw]=null;return}if(t[Uc]&&t[Uc].resume(),t[ebe])t[aw]=2;else if(t[aw]===2){e?(t[aw]=1,queueMicrotask(()=>ctt(t))):ctt(t);continue}if(t[eQ]===0||t[Z7]>=(utt(t)||1))return;let r=t[UA][t[qA]];if(t[r1].protocol==="https:"&&t[ow]!==r.servername){if(t[Z7]>0)return;t[ow]=r.servername,t[Uc]?.destroy(new bZt("servername changed"),()=>{t[Uc]=null,nbe(t)})}if(t[sN])return;if(!t[Uc]){ftt(t);return}if(t[Uc].destroyed||t[Uc].busy(r))return;!r.aborted&&t[Uc].write(r)?t[qA]++:t[UA].splice(t[qA],1)}}s(YZt,"_resume");ptt.exports=rbe});var ibe=H((_fi,mtt)=>{"use strict";d();var ite=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};mtt.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new ite}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new ite),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var gtt=H((Pfi,htt)=>{d();var{kFree:KZt,kConnected:JZt,kPending:XZt,kQueued:ZZt,kRunning:eer,kSize:ter}=Ra(),sk=Symbol("pool"),obe=class{static{s(this,"PoolStats")}constructor(e){this[sk]=e}get connected(){return this[sk][JZt]}get free(){return this[sk][KZt]}get pending(){return this[sk][XZt]}get queued(){return this[sk][ZZt]}get running(){return this[sk][eer]}get size(){return this[sk][ter]}};htt.exports=obe});var dbe=H((Nfi,wtt)=>{"use strict";d();var rer=j3(),ner=ibe(),{kConnected:sbe,kSize:Att,kRunning:ytt,kPending:Ctt,kQueued:rQ,kBusy:ier,kFree:oer,kUrl:ser,kClose:aer,kDestroy:cer,kDispatch:ler}=Ra(),uer=gtt(),P0=Symbol("clients"),Df=Symbol("needDrain"),nQ=Symbol("queue"),abe=Symbol("closed resolve"),cbe=Symbol("onDrain"),vtt=Symbol("onConnect"),xtt=Symbol("onDisconnect"),Ett=Symbol("onConnectionError"),lbe=Symbol("get dispatcher"),Itt=Symbol("add client"),Ttt=Symbol("remove client"),btt=Symbol("stats"),ube=class extends rer{static{s(this,"PoolBase")}constructor(){super(),this[nQ]=new ner,this[P0]=[],this[rQ]=0;let e=this;this[cbe]=s(function(n,i){let o=e[nQ],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[rQ]--,a=!this.dispatch(c.opts,c.handler)}this[Df]=a,!this[Df]&&e[Df]&&(e[Df]=!1,e.emit("drain",n,[e,...i])),e[abe]&&o.isEmpty()&&Promise.all(e[P0].map(c=>c.close())).then(e[abe])},"onDrain"),this[vtt]=(r,n)=>{e.emit("connect",r,[e,...n])},this[xtt]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[Ett]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[btt]=new uer(this)}get[ier](){return this[Df]}get[sbe](){return this[P0].filter(e=>e[sbe]).length}get[oer](){return this[P0].filter(e=>e[sbe]&&!e[Df]).length}get[Ctt](){let e=this[rQ];for(let{[Ctt]:r}of this[P0])e+=r;return e}get[ytt](){let e=0;for(let{[ytt]:r}of this[P0])e+=r;return e}get[Att](){let e=this[rQ];for(let{[Att]:r}of this[P0])e+=r;return e}get stats(){return this[btt]}async[aer](){this[nQ].isEmpty()?await Promise.all(this[P0].map(e=>e.close())):await new Promise(e=>{this[abe]=e})}async[cer](e){for(;;){let r=this[nQ].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[P0].map(r=>r.destroy(e)))}[ler](e,r){let n=this[lbe]();return n?n.dispatch(e,r)||(n[Df]=!0,this[Df]=!this[lbe]()):(this[Df]=!0,this[nQ].push({opts:e,handler:r}),this[rQ]++),!this[Df]}[Itt](e){return e.on("drain",this[cbe]).on("connect",this[vtt]).on("disconnect",this[xtt]).on("connectionError",this[Ett]),this[P0].push(e),this[Df]&&queueMicrotask(()=>{this[Df]&&this[cbe](e[ser],[this,e])}),this}[Ttt](e){e.close(()=>{let r=this[P0].indexOf(e);r!==-1&&this[P0].splice(r,1)}),this[Df]=this[P0].some(r=>!r[Df]&&r.closed!==!0&&r.destroyed!==!0)}};wtt.exports={PoolBase:ube,kClients:P0,kNeedDrain:Df,kAddClient:Itt,kRemoveClient:Ttt,kGetDispatcher:lbe}});var aN=H((Ffi,ktt)=>{"use strict";d();var{PoolBase:der,kClients:ote,kNeedDrain:fer,kAddClient:per,kGetDispatcher:mer}=dbe(),her=tQ(),{InvalidArgumentError:fbe}=Yo(),Stt=qi(),{kUrl:_tt,kInterceptors:ger}=Ra(),Aer=M7(),pbe=Symbol("options"),mbe=Symbol("connections"),Rtt=Symbol("factory");function yer(t,e){return new her(t,e)}s(yer,"defaultFactory");var hbe=class extends der{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=yer,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new fbe("invalid connections");if(typeof n!="function")throw new fbe("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new fbe("connect must be a function or an object");typeof i!="function"&&(i=Aer({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[ger]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[mbe]=r||null,this[_tt]=Stt.parseOrigin(e),this[pbe]={...Stt.deepClone(m),connect:i,allowH2:p},this[pbe].interceptors=m.interceptors?{...m.interceptors}:void 0,this[Rtt]=n,this.on("connectionError",(h,g,A)=>{for(let y of g){let E=this[ote].indexOf(y);E!==-1&&this[ote].splice(E,1)}})}[mer](){for(let e of this[ote])if(!e[fer])return e;if(!this[mbe]||this[ote].length<this[mbe]){let e=this[Rtt](this[_tt],this[pbe]);return this[per](e),e}}};ktt.exports=hbe});var Mtt=H((Ufi,Ntt)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:Cer,InvalidArgumentError:ver}=Yo(),{PoolBase:xer,kClients:Ud,kNeedDrain:iQ,kAddClient:Eer,kRemoveClient:ber,kGetDispatcher:Ier}=dbe(),Ter=aN(),{kUrl:gbe,kInterceptors:wer}=Ra(),{parseOrigin:Ptt}=qi(),Dtt=Symbol("factory"),ste=Symbol("options"),Btt=Symbol("kGreatestCommonDivisor"),ak=Symbol("kCurrentWeight"),ck=Symbol("kIndex"),Qh=Symbol("kWeight"),ate=Symbol("kMaxWeightPerServer"),cte=Symbol("kErrorPenalty");function Ser(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(Ser,"getGreatestCommonDivisor");function _er(t,e){return new Ter(t,e)}s(_er,"defaultFactory");var Abe=class extends xer{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=_er,...n}={}){if(super(),this[ste]=n,this[ck]=-1,this[ak]=0,this[ate]=this[ste].maxWeightPerServer||100,this[cte]=this[ste].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new ver("factory must be a function.");this[wer]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[Dtt]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=Ptt(e).origin;if(this[Ud].find(i=>i[gbe].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[Dtt](r,Object.assign({},this[ste]));this[Eer](n),n.on("connect",()=>{n[Qh]=Math.min(this[ate],n[Qh]+this[cte])}),n.on("connectionError",()=>{n[Qh]=Math.max(1,n[Qh]-this[cte]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Qh]=Math.max(1,n[Qh]-this[cte]),this._updateBalancedPoolStats())});for(let i of this[Ud])i[Qh]=this[ate];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Ud].length;r++)e=Ser(this[Ud][r][Qh],e);this[Btt]=e}removeUpstream(e){let r=Ptt(e).origin,n=this[Ud].find(i=>i[gbe].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[ber](n),this}get upstreams(){return this[Ud].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[gbe].origin)}[Ier](){if(this[Ud].length===0)throw new Cer;if(!this[Ud].find(o=>!o[iQ]&&o.closed!==!0&&o.destroyed!==!0)||this[Ud].map(o=>o[iQ]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Ud].findIndex(o=>!o[iQ]);for(;n++<this[Ud].length;){this[ck]=(this[ck]+1)%this[Ud].length;let o=this[Ud][this[ck]];if(o[Qh]>this[Ud][i][Qh]&&!o[iQ]&&(i=this[ck]),this[ck]===0&&(this[ak]=this[ak]-this[Btt],this[ak]<=0&&(this[ak]=this[ate])),o[Qh]>=this[ak]&&!o[iQ])return o}return this[ak]=this[Ud][i][Qh],this[ck]=i,this[Ud][i]}};Ntt.exports=Abe});var cN=H(($fi,Htt)=>{"use strict";d();var{InvalidArgumentError:lte}=Yo(),{kClients:cw,kRunning:Ltt,kClose:Rer,kDestroy:ker,kDispatch:Per,kInterceptors:Der}=Ra(),Ber=j3(),Ner=aN(),Mer=tQ(),Ler=qi(),Fer=rte(),Ftt=Symbol("onConnect"),Ott=Symbol("onDisconnect"),Qtt=Symbol("onConnectionError"),Oer=Symbol("maxRedirections"),Utt=Symbol("onDrain"),qtt=Symbol("factory"),ybe=Symbol("options");function Qer(t,e){return e&&e.connections===1?new Mer(t,e):new Ner(t,e)}s(Qer,"defaultFactory");var Cbe=class extends Ber{static{s(this,"Agent")}constructor({factory:e=Qer,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new lte("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new lte("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new lte("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[Der]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Fer({maxRedirections:r})],this[ybe]={...Ler.deepClone(i),connect:n},this[ybe].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Oer]=r,this[qtt]=e,this[cw]=new Map,this[Utt]=(o,a)=>{this.emit("drain",o,[this,...a])},this[Ftt]=(o,a)=>{this.emit("connect",o,[this,...a])},this[Ott]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[Qtt]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[Ltt](){let e=0;for(let r of this[cw].values())e+=r[Ltt];return e}[Per](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new lte("opts.origin must be a non-empty string or URL.");let i=this[cw].get(n);return i||(i=this[qtt](e.origin,this[ybe]).on("drain",this[Utt]).on("connect",this[Ftt]).on("disconnect",this[Ott]).on("connectionError",this[Qtt]),this[cw].set(n,i)),i.dispatch(e,r)}async[Rer](){let e=[];for(let r of this[cw].values())e.push(r.close());this[cw].clear(),await Promise.all(e)}async[ker](e){let r=[];for(let n of this[cw].values())r.push(n.destroy(e));this[cw].clear(),await Promise.all(r)}};Htt.exports=Cbe});var Ebe=H((Gfi,Gtt)=>{"use strict";d();var{kProxy:Uer,kClose:qer,kDestroy:Her,kInterceptors:$er}=Ra(),{URL:oQ}=require("node:url"),Wer=cN(),jer=aN(),Ger=j3(),{InvalidArgumentError:fte,RequestAbortedError:Ver,SecureProxyConnectionError:zer}=Yo(),$tt=M7(),ute=Symbol("proxy agent"),dte=Symbol("proxy client"),sQ=Symbol("proxy headers"),vbe=Symbol("request tls settings"),Wtt=Symbol("proxy tls settings"),jtt=Symbol("connect endpoint function");function Yer(t){return t==="https:"?443:80}s(Yer,"defaultProtocolPort");function Ker(t,e){return new jer(t,e)}s(Ker,"defaultFactory");var Jer=s(()=>{},"noop"),xbe=class extends Ger{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof oQ)&&!e.uri)throw new fte("Proxy uri is mandatory");let{clientFactory:r=Ker}=e;if(typeof r!="function")throw new fte("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[Uer]={uri:i,protocol:c},this[$er]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[vbe]=e.requestTls,this[Wtt]=e.proxyTls,this[sQ]=e.headers||{},e.auth&&e.token)throw new fte("opts.auth cannot be used in combination with opts.token");e.auth?this[sQ]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[sQ]["proxy-authorization"]=e.token:l&&u&&(this[sQ]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=$tt({...e.proxyTls});this[jtt]=$tt({...e.requestTls}),this[dte]=r(n,{connect:p}),this[ute]=new Wer({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${Yer(m.protocol)}`);try{let{socket:A,statusCode:y}=await this[dte].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[sQ],host:m.host},servername:this[Wtt]?.servername||f});if(y!==200&&(A.on("error",Jer).destroy(),h(new Ver(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,A);return}let E;this[vbe]?E=this[vbe].servername:E=m.servername,this[jtt]({...m,servername:E,httpSocket:A},h)}catch(A){A.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new zer(A)):h(A)}},"connect")})}dispatch(e,r){let n=Xer(e.headers);if(Zer(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new oQ(e.origin);n.host=i}return this[ute].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new oQ(e):e instanceof oQ?e:new oQ(e.uri)}async[qer](){await this[ute].close(),await this[dte].close()}async[Her](){await this[ute].destroy(),await this[dte].destroy()}};function Xer(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(Xer,"buildHeaders");function Zer(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new fte("Proxy-Authorization should be sent in ProxyAgent constructor")}s(Zer,"throwIfProxyAuthIsSent");Gtt.exports=xbe});var Xtt=H((Yfi,Jtt)=>{"use strict";d();var etr=j3(),{kClose:ttr,kDestroy:rtr,kClosed:Vtt,kDestroyed:ztt,kDispatch:ntr,kNoProxyAgent:aQ,kHttpProxyAgent:lw,kHttpsProxyAgent:lk}=Ra(),Ytt=Ebe(),itr=cN(),otr={"http:":80,"https:":443},Ktt=!1,bbe=class extends etr{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,Ktt||(Ktt=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[aQ]=new itr(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[lw]=new Ytt({...o,uri:a}):this[lw]=this[aQ];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[lk]=new Ytt({...o,uri:c}):this[lk]=this[lw],this.#o()}[ntr](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[ttr](){await this[aQ].close(),this[lw][Vtt]||await this[lw].close(),this[lk][Vtt]||await this[lk].close()}async[rtr](e){await this[aQ].destroy(e),this[lw][ztt]||await this[lw].destroy(e),this[lk][ztt]||await this[lk].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||otr[r]||0,this.#r(n,i)?r==="https:"?this[lk]:this[lw]:this[aQ]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};Jtt.exports=bbe});var pte=H((Xfi,rrt)=>{"use strict";d();var lN=require("node:assert"),{kRetryHandlerDefaultRetry:Ztt}=Ra(),{RequestRetryError:cQ}=Yo(),{isDisturbed:ert,parseHeaders:str,parseRangeHeader:trt,wrapRequestBody:atr}=qi();function ctr(t){let e=Date.now();return new Date(t).getTime()-e}s(ctr,"calculateRetryAfterHeader");var Ibe=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:atr(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[Ztt],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[Ztt](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:A,methods:y}=u,{counter:E}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!A.includes(a)){i(e);return}if(Array.isArray(y)&&!y.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(E>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?ctr(b):b*1e3);let S=b>0?Math.min(b,m):Math.min(p*h**(E-1),m);setTimeout(()=>i(null),S)}onHeaders(e,r,n,i){let o=str(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new cQ("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new cQ("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=trt(o["content-range"]);if(!c)return this.abort(new cQ("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new cQ("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return lN(this.start===l,"content-range mismatch"),lN(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=trt(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;lN(l!=null&&Number.isFinite(l),"content-range mismatch"),lN(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return lN(Number.isFinite(this.start)),lN(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new cQ("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||ert(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||ert(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};rrt.exports=Ibe});var irt=H((t0i,nrt)=>{"use strict";d();var ltr=B7(),utr=pte(),Tbe=class extends ltr{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new utr({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};nrt.exports=Tbe});var Pbe=H((i0i,prt)=>{"use strict";d();var lrt=require("node:assert"),{Readable:dtr}=require("node:stream"),{RequestAbortedError:urt,NotSupportedError:ftr,InvalidArgumentError:ptr,AbortError:wbe}=Yo(),drt=qi(),{ReadableStreamFrom:mtr}=qi(),jp=Symbol("kConsume"),lQ=Symbol("kReading"),uw=Symbol("kBody"),ort=Symbol("kAbort"),frt=Symbol("kContentType"),srt=Symbol("kContentLength"),htr=s(()=>{},"noop"),Sbe=class extends dtr{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[ort]=r,this[jp]=null,this[uw]=null,this[frt]=n,this[srt]=i,this[lQ]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new urt),e&&this[ort](),super.destroy(e)}_destroy(e,r){this[lQ]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[lQ]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[lQ]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[jp]&&e!==null?(Rbe(this[jp],e),this[lQ]?super.push(e):!0):super.push(e)}async text(){return uQ(this,"text")}async json(){return uQ(this,"json")}async blob(){return uQ(this,"blob")}async bytes(){return uQ(this,"bytes")}async arrayBuffer(){return uQ(this,"arrayBuffer")}async formData(){throw new ftr}get bodyUsed(){return drt.isDisturbed(this)}get body(){return this[uw]||(this[uw]=mtr(this),this[jp]&&(this[uw].getReader(),lrt(this[uw].locked))),this[uw]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new ptr("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[srt]>r&&this.destroy(new wbe);let a=s(()=>{this.destroy(n.reason??new wbe)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new wbe):i(null)}).on("error",htr).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function gtr(t){return t[uw]&&t[uw].locked===!0||t[jp]}s(gtr,"isLocked");function Atr(t){return drt.isDisturbed(t)||gtr(t)}s(Atr,"isUnusable");async function uQ(t,e){return lrt(!t[jp]),new Promise((r,n)=>{if(Atr(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[jp]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){kbe(this[jp],i)}).on("close",function(){this[jp].body!==null&&kbe(this[jp],new urt)}),ytr(t[jp])})})}s(uQ,"consume");function ytr(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)Rbe(t,e.buffer[i])}else for(let r of e.buffer)Rbe(t,r);for(e.endEmitted?crt(this[jp]):t.stream.on("end",function(){crt(this[jp])}),t.stream.resume();t.stream.read()!=null;);}s(ytr,"consumeStart");function _be(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(_be,"chunksDecode");function art(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(art,"chunksConcat");function crt(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(_be(r,o)):e==="json"?n(JSON.parse(_be(r,o))):e==="arrayBuffer"?n(art(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[frt]})):e==="bytes"&&n(art(r,o)),kbe(t)}catch(a){i.destroy(a)}}s(crt,"consumeEnd");function Rbe(t,e){t.length+=e.length,t.body.push(e)}s(Rbe,"consumePush");function kbe(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(kbe,"consumeFinish");prt.exports={Readable:Sbe,chunksDecode:_be}});var Dbe=H((a0i,yrt)=>{d();var Ctr=require("node:assert"),{ResponseStatusCodeError:mrt}=Yo(),{chunksDecode:hrt}=Pbe(),vtr=128*1024;async function xtr({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){Ctr(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>vtr){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new mrt(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{grt(r)?f=JSON.parse(hrt(a,c)):Art(r)&&(f=hrt(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new mrt(l,n,o,f)))}s(xtr,"getResolveErrorBodyCallback");var grt=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),Art=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");yrt.exports={getResolveErrorBodyCallback:xtr,isContentTypeApplicationJson:grt,isContentTypeText:Art}});var xrt=H((u0i,Bbe)=>{"use strict";d();var Etr=require("node:assert"),{Readable:btr}=Pbe(),{InvalidArgumentError:uN,RequestAbortedError:Crt}=Yo(),Gp=qi(),{getResolveErrorBodyCallback:Itr}=Dbe(),{AsyncResource:Ttr}=require("node:async_hooks"),mte=class extends Ttr{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new uN("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new uN("invalid callback");if(f&&(typeof f!="number"||f<0))throw new uN("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new uN("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new uN("invalid method");if(c&&typeof c!="function")throw new uN("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw Gp.isStream(a)&&Gp.destroy(a.on("error",Gp.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,Gp.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new Crt:this.removeAbortListener=Gp.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new Crt,this.res?Gp.destroy(this.res.on("error",Gp.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}Etr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?Gp.parseRawHeaders(r):Gp.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?Gp.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],A=new btr({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&A.on("close",this.removeAbortListener),this.callback=null,this.res=A,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(Itr,null,{callback:o,body:A,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:A,context:l}))}onData(e){return this.res.push(e)}onComplete(e){Gp.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{Gp.destroy(r,e)})),i&&(this.body=null,Gp.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function vrt(t,e){if(e===void 0)return new Promise((r,n)=>{vrt.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new mte(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(vrt,"request");Bbe.exports=vrt;Bbe.exports.RequestHandler=mte});var dQ=H((p0i,Irt)=>{d();var{addAbortListener:wtr}=qi(),{RequestAbortedError:Str}=Yo(),dN=Symbol("kListener"),n1=Symbol("kSignal");function Ert(t){t.abort?t.abort(t[n1]?.reason):t.reason=t[n1]?.reason??new Str,brt(t)}s(Ert,"abort");function _tr(t,e){if(t.reason=null,t[n1]=null,t[dN]=null,!!e){if(e.aborted){Ert(t);return}t[n1]=e,t[dN]=()=>{Ert(t)},wtr(t[n1],t[dN])}}s(_tr,"addSignal");function brt(t){t[n1]&&("removeEventListener"in t[n1]?t[n1].removeEventListener("abort",t[dN]):t[n1].removeListener("abort",t[dN]),t[n1]=null,t[dN]=null)}s(brt,"removeSignal");Irt.exports={addSignal:_tr,removeSignal:brt}});var _rt=H((g0i,Srt)=>{"use strict";d();var Rtr=require("node:assert"),{finished:ktr,PassThrough:Ptr}=require("node:stream"),{InvalidArgumentError:fN,InvalidReturnValueError:Dtr}=Yo(),HA=qi(),{getResolveErrorBodyCallback:Btr}=Dbe(),{AsyncResource:Ntr}=require("node:async_hooks"),{addSignal:Mtr,removeSignal:Trt}=dQ(),Nbe=class extends Ntr{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new fN("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new fN("invalid callback");if(typeof r!="function")throw new fN("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new fN("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new fN("invalid method");if(l&&typeof l!="function")throw new fN("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw HA.isStream(c)&&HA.destroy(c.on("error",HA.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,HA.isStream(c)&&c.on("error",p=>{this.onError(p)}),Mtr(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}Rtr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?HA.parseRawHeaders(r):HA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?HA.parseHeaders(r):f)["content-type"];p=new Ptr,this.callback=null,this.runInAsyncScope(Btr,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new Dtr("expected Writable");ktr(p,{readable:!1},h=>{let{callback:g,res:A,opaque:y,trailers:E,abort:b}=this;this.res=null,(h||!A.readable)&&HA.destroy(A,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:y,trailers:E}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;Trt(this),r&&(this.trailers=HA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;Trt(this),this.factory=null,r?(this.res=null,HA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,HA.destroy(o,e))}};function wrt(t,e,r){if(r===void 0)return new Promise((n,i)=>{wrt.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Nbe(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(wrt,"stream");Srt.exports=wrt});var Drt=H((C0i,Prt)=>{"use strict";d();var{Readable:krt,Duplex:Ltr,PassThrough:Ftr}=require("node:stream"),{InvalidArgumentError:fQ,InvalidReturnValueError:Otr,RequestAbortedError:Mbe}=Yo(),Uh=qi(),{AsyncResource:Qtr}=require("node:async_hooks"),{addSignal:Utr,removeSignal:qtr}=dQ(),Rrt=require("node:assert"),pN=Symbol("resume"),Lbe=class extends krt{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[pN]=null}_read(){let{[pN]:e}=this;e&&(this[pN]=null,e())}_destroy(e,r){this._read(),r(e)}},Fbe=class extends krt{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[pN]=e}_read(){this[pN]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new Mbe),r(e)}},Obe=class extends Qtr{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new fQ("invalid opts");if(typeof r!="function")throw new fQ("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new fQ("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new fQ("invalid method");if(a&&typeof a!="function")throw new fQ("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new Lbe().on("error",Uh.nop),this.ret=new Ltr({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[pN]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new Mbe),g&&l&&g(),Uh.destroy(f,l),Uh.destroy(p,l),Uh.destroy(m,l),qtr(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,Utr(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}Rrt(!i,"pipeline cannot be retried"),Rrt(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?Uh.parseRawHeaders(r):Uh.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new Fbe(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?Uh.parseRawHeaders(r):Uh.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",Uh.nop),l}if(!c||typeof c.on!="function")throw new Otr("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;Uh.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||Uh.destroy(l,new Mbe)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,Uh.destroy(r,e)}};function Htr(t,e){try{let r=new Obe(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new Ftr().destroy(r)}}s(Htr,"pipeline");Prt.exports=Htr});var Ort=H((E0i,Frt)=>{"use strict";d();var{InvalidArgumentError:Qbe,SocketError:$tr}=Yo(),{AsyncResource:Wtr}=require("node:async_hooks"),Brt=qi(),{addSignal:jtr,removeSignal:Nrt}=dQ(),Mrt=require("node:assert"),Ube=class extends Wtr{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Qbe("invalid opts");if(typeof r!="function")throw new Qbe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Qbe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,jtr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Mrt(this.callback),this.abort=e,this.context=null}onHeaders(){throw new $tr("bad upgrade",null)}onUpgrade(e,r,n){Mrt(e===101);let{callback:i,opaque:o,context:a}=this;Nrt(this),this.callback=null;let c=this.responseHeaders==="raw"?Brt.parseRawHeaders(r):Brt.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;Nrt(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function Lrt(t,e){if(e===void 0)return new Promise((r,n)=>{Lrt.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Ube(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(Lrt,"upgrade");Frt.exports=Lrt});var $rt=H((T0i,Hrt)=>{"use strict";d();var Gtr=require("node:assert"),{AsyncResource:Vtr}=require("node:async_hooks"),{InvalidArgumentError:qbe,SocketError:ztr}=Yo(),Qrt=qi(),{addSignal:Ytr,removeSignal:Urt}=dQ(),Hbe=class extends Vtr{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new qbe("invalid opts");if(typeof r!="function")throw new qbe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new qbe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,Ytr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Gtr(this.callback),this.abort=e,this.context=r}onHeaders(){throw new ztr("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;Urt(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?Qrt.parseRawHeaders(r):Qrt.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;Urt(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function qrt(t,e){if(e===void 0)return new Promise((r,n)=>{qrt.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Hbe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(qrt,"connect");Hrt.exports=qrt});var Wrt=H((_0i,mN)=>{"use strict";d();mN.exports.request=xrt();mN.exports.stream=_rt();mN.exports.pipeline=Drt();mN.exports.upgrade=Ort();mN.exports.connect=$rt()});var Wbe=H((k0i,jrt)=>{"use strict";d();var{UndiciError:Ktr}=Yo(),$be=class t extends Ktr{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};jrt.exports={MockNotMatchedError:$be}});var hN=H((B0i,Grt)=>{"use strict";d();Grt.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var pQ=H((M0i,nnt)=>{"use strict";d();var{MockNotMatchedError:uk}=Wbe(),{kDispatches:hte,kMockAgent:Jtr,kOriginalDispatch:Xtr,kOrigin:Ztr,kGetNetConnect:trr}=hN(),{buildURL:rrr}=qi(),{STATUS_CODES:nrr}=require("node:http"),{types:{isPromise:irr}}=require("node:util");function Gx(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(Gx,"matchValue");function zrt(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(zrt,"lowerCaseEntries");function Yrt(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):zrt(t)[e.toLocaleLowerCase()]}s(Yrt,"getHeaderByName");function Vbe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Vbe,"buildHeadersFromArray");function Krt(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Vbe(e)),t.headers(e?zrt(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=Yrt(e,r);if(!Gx(n,i))return!1}return!0}s(Krt,"matchHeaders");function Vrt(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(Vrt,"safeUrl");function orr(t,{path:e,method:r,body:n,headers:i}){let o=Gx(t.path,e),a=Gx(t.method,r),c=typeof t.body<"u"?Gx(t.body,n):!0,l=Krt(t,i);return o&&a&&c&&l}s(orr,"matchKey");function Jrt(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(Jrt,"getResponseData");function Xrt(t,e){let r=e.query?rrr(e.path,e.query):e.path,n=typeof r=="string"?Vrt(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>Gx(Vrt(o),n));if(i.length===0)throw new uk(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>Gx(o,e.method)),i.length===0)throw new uk(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?Gx(o,e.body):!0),i.length===0)throw new uk(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>Krt(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new uk(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(Xrt,"getMockDispatch");function srr(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(srr,"addMockDispatch");function jbe(t,e){let r=t.findIndex(n=>n.consumed?orr(n,e):!1);r!==-1&&t.splice(r,1)}s(jbe,"deleteMockDispatch");function Zrt(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(Zrt,"buildKey");function Gbe(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Gbe,"generateKeyValues");function ent(t){return nrr[t]||"unknown"}s(ent,"getStatusText");async function arr(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(arr,"getResponse");function tnt(t,e){let r=Zrt(t),n=Xrt(this[hte],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!f&&p>=m,n.pending=p<m,l!==null)return jbe(this[hte],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[hte])},u):h(this[hte]);function h(A,y=o){let E=Array.isArray(t.headers)?Vbe(t.headers):t.headers,b=typeof y=="function"?y({...t,headers:E}):y;if(irr(b)){b.then(L=>h(A,L));return}let S=Jrt(b),R=Gbe(a),B=Gbe(c);e.onConnect?.(L=>e.onError(L),null),e.onHeaders?.(i,R,g,ent(i)),e.onData?.(Buffer.from(S)),e.onComplete?.(B),jbe(A,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(tnt,"mockDispatch");function crr(){let t=this[Jtr],e=this[Ztr],r=this[Xtr];return s(function(i,o){if(t.isMockActive)try{tnt.call(this,i,o)}catch(a){if(a instanceof uk){let c=t[trr]();if(c===!1)throw new uk(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(rnt(c,e))r.call(this,i,o);else throw new uk(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(crr,"buildMockDispatch");function rnt(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>Gx(n,r.host)))}s(rnt,"checkNetConnect");function lrr(t){if(t){let{agent:e,...r}=t;return r}}s(lrr,"buildMockOptions");nnt.exports={getResponseData:Jrt,getMockDispatch:Xrt,addMockDispatch:srr,deleteMockDispatch:jbe,buildKey:Zrt,generateKeyValues:Gbe,matchValue:Gx,getResponse:arr,getStatusText:ent,mockDispatch:tnt,buildMockDispatch:crr,checkNetConnect:rnt,buildMockOptions:lrr,getHeaderByName:Yrt,buildHeadersFromArray:Vbe}});var eIe=H((O0i,Zbe)=>{"use strict";d();var{getResponseData:urr,buildKey:drr,addMockDispatch:zbe}=pQ(),{kDispatches:gte,kDispatchKey:Ate,kDefaultHeaders:Ybe,kDefaultTrailers:Kbe,kContentLength:Jbe,kMockDispatch:yte}=hN(),{InvalidArgumentError:i1}=Yo(),{buildURL:frr}=qi(),gN=class{static{s(this,"MockScope")}constructor(e){this[yte]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new i1("waitInMs must be a valid integer > 0");return this[yte].delay=e,this}persist(){return this[yte].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new i1("repeatTimes must be a valid integer > 0");return this[yte].times=e,this}},Xbe=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new i1("opts must be an object");if(typeof e.path>"u")throw new i1("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=frr(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[Ate]=drr(e),this[gte]=r,this[Ybe]={},this[Kbe]={},this[Jbe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=urr(r),o=this[Jbe]?{"content-length":i.length}:{},a={...this[Ybe],...o,...n.headers},c={...this[Kbe],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new i1("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new i1("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new i1("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=zbe(this[gte],this[Ate],o);return new gN(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=zbe(this[gte],this[Ate],n);return new gN(i)}replyWithError(e){if(typeof e>"u")throw new i1("error must be defined");let r=zbe(this[gte],this[Ate],{error:e});return new gN(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new i1("headers must be defined");return this[Ybe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new i1("trailers must be defined");return this[Kbe]=e,this}replyContentLength(){return this[Jbe]=!0,this}};Zbe.exports.MockInterceptor=Xbe;Zbe.exports.MockScope=gN});var nIe=H((q0i,unt)=>{"use strict";d();var{promisify:prr}=require("node:util"),mrr=tQ(),{buildMockDispatch:hrr}=pQ(),{kDispatches:int,kMockAgent:ont,kClose:snt,kOriginalClose:ant,kOrigin:cnt,kOriginalDispatch:grr,kConnected:tIe}=hN(),{MockInterceptor:Arr}=eIe(),lnt=Ra(),{InvalidArgumentError:yrr}=Yo(),rIe=class extends mrr{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new yrr("Argument opts.agent must implement Agent");this[ont]=r.agent,this[cnt]=e,this[int]=[],this[tIe]=1,this[grr]=this.dispatch,this[ant]=this.close.bind(this),this.dispatch=hrr.call(this),this.close=this[snt]}get[lnt.kConnected](){return this[tIe]}intercept(e){return new Arr(e,this[int])}async[snt](){await prr(this[ant])(),this[tIe]=0,this[ont][lnt.kClients].delete(this[cnt])}};unt.exports=rIe});var sIe=H((W0i,Ant)=>{"use strict";d();var{promisify:Crr}=require("node:util"),vrr=aN(),{buildMockDispatch:xrr}=pQ(),{kDispatches:dnt,kMockAgent:fnt,kClose:pnt,kOriginalClose:mnt,kOrigin:hnt,kOriginalDispatch:Err,kConnected:iIe}=hN(),{MockInterceptor:brr}=eIe(),gnt=Ra(),{InvalidArgumentError:Irr}=Yo(),oIe=class extends vrr{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new Irr("Argument opts.agent must implement Agent");this[fnt]=r.agent,this[hnt]=e,this[dnt]=[],this[iIe]=1,this[Err]=this.dispatch,this[mnt]=this.close.bind(this),this.dispatch=xrr.call(this),this.close=this[pnt]}get[gnt.kConnected](){return this[iIe]}intercept(e){return new brr(e,this[dnt])}async[pnt](){await Crr(this[mnt])(),this[iIe]=0,this[fnt][gnt.kClients].delete(this[hnt])}};Ant.exports=oIe});var Cnt=H((z0i,ynt)=>{"use strict";d();var Trr={pronoun:"it",is:"is",was:"was",this:"this"},wrr={pronoun:"they",is:"are",was:"were",this:"these"};ynt.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?Trr:wrr,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var xnt=H((X0i,vnt)=>{"use strict";d();var{Transform:Srr}=require("node:stream"),{Console:_rr}=require("node:console"),Rrr=process.versions.icu?"\u2705":"Y ",krr=process.versions.icu?"\u274C":"N ";vnt.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new Srr({transform(r,n,i){i(null,r)}}),this.logger=new _rr({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?Rrr:krr,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var Tnt=H((tpi,Int)=>{"use strict";d();var{kClients:dk}=Ra(),Prr=cN(),{kAgent:aIe,kMockAgentSet:Cte,kMockAgentGet:Ent,kDispatches:cIe,kIsMockActive:vte,kNetConnect:fk,kGetNetConnect:Drr,kOptions:xte,kFactory:Ete}=hN(),Brr=nIe(),Nrr=sIe(),{matchValue:Mrr,buildMockOptions:Lrr}=pQ(),{InvalidArgumentError:bnt,UndiciError:Frr}=Yo(),Orr=B7(),Qrr=Cnt(),Urr=xnt(),lIe=class extends Orr{static{s(this,"MockAgent")}constructor(e){if(super(e),this[fk]=!0,this[vte]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new bnt("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new Prr(e);this[aIe]=r,this[dk]=r[dk],this[xte]=Lrr(e)}get(e){let r=this[Ent](e);return r||(r=this[Ete](e),this[Cte](e,r)),r}dispatch(e,r){return this.get(e.origin),this[aIe].dispatch(e,r)}async close(){await this[aIe].close(),this[dk].clear()}deactivate(){this[vte]=!1}activate(){this[vte]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[fk])?this[fk].push(e):this[fk]=[e];else if(typeof e>"u")this[fk]=!0;else throw new bnt("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[fk]=!1}get isMockActive(){return this[vte]}[Cte](e,r){this[dk].set(e,r)}[Ete](e){let r=Object.assign({agent:this},this[xte]);return this[xte]&&this[xte].connections===1?new Brr(e,r):new Nrr(e,r)}[Ent](e){let r=this[dk].get(e);if(r)return r;if(typeof e!="string"){let n=this[Ete]("http://localhost:9999");return this[Cte](e,n),n}for(let[n,i]of Array.from(this[dk]))if(i&&typeof n!="string"&&Mrr(n,e)){let o=this[Ete](e);return this[Cte](e,o),o[cIe]=i[cIe],o}}[Drr](){return this[fk]}pendingInterceptors(){let e=this[dk];return Array.from(e.entries()).flatMap(([r,n])=>n[cIe].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new Urr}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new Qrr("interceptor","interceptors").pluralize(r.length);throw new Frr(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};Int.exports=lIe});var bte=H((ipi,Rnt)=>{"use strict";d();var wnt=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:qrr}=Yo(),Hrr=cN();_nt()===void 0&&Snt(new Hrr);function Snt(t){if(!t||typeof t.dispatch!="function")throw new qrr("Argument agent must implement Agent");Object.defineProperty(globalThis,wnt,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(Snt,"setGlobalDispatcher");function _nt(){return globalThis[wnt]}s(_nt,"getGlobalDispatcher");Rnt.exports={setGlobalDispatcher:Snt,getGlobalDispatcher:_nt}});var Ite=H((cpi,knt)=>{"use strict";d();knt.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var Dnt=H((dpi,Pnt)=>{"use strict";d();var $rr=tte();Pnt.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new $rr(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var Nnt=H((mpi,Bnt)=>{"use strict";d();var Wrr=pte();Bnt.exports=t=>e=>s(function(n,i){return e(n,new Wrr({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var Lnt=H((Api,Mnt)=>{"use strict";d();var jrr=qi(),{InvalidArgumentError:Grr,RequestAbortedError:Vrr}=Yo(),zrr=Ite(),uIe=class extends zrr{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new Grr("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=jrr.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new Vrr(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function Yrr({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new uIe({maxSize:o},i);return e(n,a)},"Intercept")}s(Yrr,"createDumpInterceptor");Mnt.exports=Yrr});var Qnt=H((vpi,Ont)=>{"use strict";d();var{isIP:Krr}=require("node:net"),{lookup:Jrr}=require("node:dns"),Xrr=Ite(),{InvalidArgumentError:AN,InformationalError:Zrr}=Yo(),Fnt=Math.pow(2,31)-1,dIe=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new Zrr("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){Jrr(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===Fnt?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===Fnt?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new fIe(this,e,r)}},fIe=class extends Xrr{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};Ont.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new AN("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new AN("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new AN("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new AN("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new AN("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new AN("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new dIe(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return Krr(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var pk=H((bpi,Gnt)=>{"use strict";d();var{kConstruct:enr}=Ra(),{kEnumerableProperty:yN}=qi(),{iteratorMixin:tnr,isValidHeaderName:mQ,isValidHeaderValue:qnt}=Wp(),{webidl:Po}=ed(),pIe=require("node:assert"),Tte=require("node:util"),dl=Symbol("headers map"),Vp=Symbol("headers map sorted");function Unt(t){return t===10||t===13||t===9||t===32}s(Unt,"isHTTPWhiteSpaceCharCode");function Hnt(t){let e=0,r=t.length;for(;r>e&&Unt(t.charCodeAt(r-1));)--r;for(;r>e&&Unt(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(Hnt,"headerValueNormalize");function $nt(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Po.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});mIe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)mIe(t,r[n],e[r[n]])}else throw Po.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s($nt,"fill");function mIe(t,e,r){if(r=Hnt(r),mQ(e)){if(!qnt(r))throw Po.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Po.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(jnt(t)==="immutable")throw new TypeError("immutable");return hIe(t).append(e,r,!1)}s(mIe,"appendHeader");function Wnt(t,e){return t[0]<e[0]?-1:1}s(Wnt,"compareHeaderName");var wte=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[dl]=new Map(e[dl]),this[Vp]=e[Vp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[dl]=new Map(e),this[Vp]=null)}contains(e,r){return this[dl].has(r?e:e.toLowerCase())}clear(){this[dl].clear(),this[Vp]=null,this.cookies=null}append(e,r,n){this[Vp]=null;let i=n?e:e.toLowerCase(),o=this[dl].get(i);if(o){let a=i==="cookie"?"; ":", ";this[dl].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[dl].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[Vp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[dl].set(i,{name:e,value:r})}delete(e,r){this[Vp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[dl].delete(e)}get(e,r){return this[dl].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[dl])yield[e,r]}get entries(){let e={};if(this[dl].size!==0)for(let{name:r,value:n}of this[dl].values())e[r]=n;return e}rawValues(){return this[dl].values()}get entriesList(){let e=[];if(this[dl].size!==0)for(let{0:r,1:{name:n,value:i}}of this[dl])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[dl].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[dl][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],pIe(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],pIe(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[dl])r[n++]=[i,o],pIe(o!==null);return r.sort(Wnt)}}},$A=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Po.util.markAsUncloneable(this),e!==enr&&(this.#t=new wte,this.#e="none",e!==void 0&&(e=Po.converters.HeadersInit(e,"Headers contructor","init"),$nt(this,e)))}append(e,r){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Po.converters.ByteString(e,n,"name"),r=Po.converters.ByteString(r,n,"value"),mIe(this,e,r)}delete(e){if(Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.delete"),e=Po.converters.ByteString(e,"Headers.delete","name"),!mQ(e))throw Po.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Po.converters.ByteString(e,r,"name"),!mQ(e))throw Po.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Po.converters.ByteString(e,r,"name"),!mQ(e))throw Po.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Po.converters.ByteString(e,n,"name"),r=Po.converters.ByteString(r,n,"value"),r=Hnt(r),mQ(e)){if(!qnt(r))throw Po.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Po.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Po.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[Vp](){if(this.#t[Vp])return this.#t[Vp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[Vp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[Vp]=e}[Tte.inspect.custom](e,r){return r.depth??=e,`Headers ${Tte.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:jnt,setHeadersGuard:rnr,getHeadersList:hIe,setHeadersList:nnr}=$A;Reflect.deleteProperty($A,"getHeadersGuard");Reflect.deleteProperty($A,"setHeadersGuard");Reflect.deleteProperty($A,"getHeadersList");Reflect.deleteProperty($A,"setHeadersList");tnr("Headers",$A,Vp,0,1);Object.defineProperties($A.prototype,{append:yN,delete:yN,get:yN,has:yN,set:yN,getSetCookie:yN,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[Tte.inspect.custom]:{enumerable:!1}});Po.converters.HeadersInit=function(t,e,r){if(Po.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!Tte.types.isProxy(t)&&n===$A.prototype.entries)try{return hIe(t).entriesList}catch{}return typeof n=="function"?Po.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Po.converters["record<ByteString, ByteString>"](t,e,r)}throw Po.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Gnt.exports={fill:$nt,compareHeaderName:Wnt,Headers:$A,HeadersList:wte,getHeadersGuard:jnt,setHeadersGuard:rnr,setHeadersList:nnr,getHeadersList:hIe}});var gQ=H((wpi,rit)=>{"use strict";d();var{Headers:Xnt,HeadersList:Vnt,fill:inr,getHeadersGuard:onr,setHeadersGuard:Znt,setHeadersList:eit}=pk(),{extractBody:znt,cloneBody:snr,mixinBody:anr,hasFinalizationRegistry:cnr,streamRegistry:lnr,bodyUnusable:unr}=eN(),gIe=qi(),Ynt=require("node:util"),{kEnumerableProperty:zp}=gIe,{isValidReasonPhrase:dnr,isCancelled:fnr,isAborted:pnr,isBlobLike:mnr,serializeJavascriptValueToJSONString:hnr,isErrorLike:gnr,isomorphicEncode:Anr,environmentSettingsObject:ynr}=Wp(),{redirectStatusSet:Cnr,nullBodyStatus:vnr}=L7(),{kState:fc,kHeaders:Vx}=ew(),{webidl:Ei}=ed(),{FormData:xnr}=H7(),{URLSerializer:Knt}=R0(),{kConstruct:_te}=Ra(),AIe=require("node:assert"),{types:Enr}=require("node:util"),bnr=new TextEncoder("utf-8"),mk=class t{static{s(this,"Response")}static error(){return hQ(Rte(),"immutable")}static json(e,r={}){Ei.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ei.converters.ResponseInit(r));let n=bnr.encode(hnr(e)),i=znt(n),o=hQ(CN({}),"response");return Jnt(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){Ei.argumentLengthCheck(arguments,1,"Response.redirect"),e=Ei.converters.USVString(e),r=Ei.converters["unsigned short"](r);let n;try{n=new URL(e,ynr.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!Cnr.has(r))throw new RangeError(`Invalid status code ${r}`);let i=hQ(CN({}),"immutable");i[fc].status=r;let o=Anr(Knt(n));return i[fc].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(Ei.util.markAsUncloneable(this),e===_te)return;e!==null&&(e=Ei.converters.BodyInit(e)),r=Ei.converters.ResponseInit(r),this[fc]=CN({}),this[Vx]=new Xnt(_te),Znt(this[Vx],"response"),eit(this[Vx],this[fc].headersList);let n=null;if(e!=null){let[i,o]=znt(e);n={body:i,type:o}}Jnt(this,r,n)}get type(){return Ei.brandCheck(this,t),this[fc].type}get url(){Ei.brandCheck(this,t);let e=this[fc].urlList,r=e[e.length-1]??null;return r===null?"":Knt(r,!0)}get redirected(){return Ei.brandCheck(this,t),this[fc].urlList.length>1}get status(){return Ei.brandCheck(this,t),this[fc].status}get ok(){return Ei.brandCheck(this,t),this[fc].status>=200&&this[fc].status<=299}get statusText(){return Ei.brandCheck(this,t),this[fc].statusText}get headers(){return Ei.brandCheck(this,t),this[Vx]}get body(){return Ei.brandCheck(this,t),this[fc].body?this[fc].body.stream:null}get bodyUsed(){return Ei.brandCheck(this,t),!!this[fc].body&&gIe.isDisturbed(this[fc].body.stream)}clone(){if(Ei.brandCheck(this,t),unr(this))throw Ei.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=yIe(this[fc]);return hQ(e,onr(this[Vx]))}[Ynt.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${Ynt.formatWithOptions(r,n)}`}};anr(mk);Object.defineProperties(mk.prototype,{type:zp,url:zp,status:zp,ok:zp,redirected:zp,statusText:zp,headers:zp,clone:zp,body:zp,bodyUsed:zp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(mk,{json:zp,redirect:zp,error:zp});function yIe(t){if(t.internalResponse)return tit(yIe(t.internalResponse),t.type);let e=CN({...t,body:null});return t.body!=null&&(e.body=snr(e,t.body)),e}s(yIe,"cloneResponse");function CN(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new Vnt(t?.headersList):new Vnt,urlList:t?.urlList?[...t.urlList]:[]}}s(CN,"makeResponse");function Rte(t){let e=gnr(t);return CN({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(Rte,"makeNetworkError");function Inr(t){return t.type==="error"&&t.status===0}s(Inr,"isNetworkError");function Ste(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return AIe(!(n in e)),r[n]=i,!0}})}s(Ste,"makeFilteredResponse");function tit(t,e){if(e==="basic")return Ste(t,{type:"basic",headersList:t.headersList});if(e==="cors")return Ste(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return Ste(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return Ste(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});AIe(!1)}s(tit,"filterResponse");function Tnr(t,e=null){return AIe(fnr(t)),pnr(t)?Rte(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):Rte(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(Tnr,"makeAppropriateNetworkError");function Jnt(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!dnr(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[fc].status=e.status),"statusText"in e&&e.statusText!=null&&(t[fc].statusText=e.statusText),"headers"in e&&e.headers!=null&&inr(t[Vx],e.headers),r){if(vnr.includes(t.status))throw Ei.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[fc].body=r.body,r.type!=null&&!t[fc].headersList.contains("content-type",!0)&&t[fc].headersList.append("content-type",r.type,!0)}}s(Jnt,"initializeResponse");function hQ(t,e){let r=new mk(_te);return r[fc]=t,r[Vx]=new Xnt(_te),eit(r[Vx],t.headersList),Znt(r[Vx],e),cnr&&t.body?.stream&&lnr.register(r,new WeakRef(t.body.stream)),r}s(hQ,"fromInnerResponse");Ei.converters.ReadableStream=Ei.interfaceConverter(ReadableStream);Ei.converters.FormData=Ei.interfaceConverter(xnr);Ei.converters.URLSearchParams=Ei.interfaceConverter(URLSearchParams);Ei.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?Ei.converters.USVString(t,e,r):mnr(t)?Ei.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||Enr.isArrayBuffer(t)?Ei.converters.BufferSource(t,e,r):gIe.isFormDataLike(t)?Ei.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?Ei.converters.URLSearchParams(t,e,r):Ei.converters.DOMString(t,e,r)};Ei.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?Ei.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:Ei.converters.XMLHttpRequestBodyInit(t,e,r)};Ei.converters.ResponseInit=Ei.dictionaryConverter([{key:"status",converter:Ei.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:Ei.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:Ei.converters.HeadersInit}]);rit.exports={isNetworkError:Inr,makeNetworkError:Rte,makeResponse:CN,makeAppropriateNetworkError:Tnr,filterResponse:tit,Response:mk,cloneResponse:yIe,fromInnerResponse:hQ}});var sit=H((Rpi,oit)=>{"use strict";d();var{kConnected:nit,kSize:iit}=Ra(),CIe=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[nit]===0&&this.value[iit]===0?void 0:this.value}},vIe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[nit]===0&&e[iit]===0&&this.finalizer(r)})}unregister(e){}};oit.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:CIe,FinalizationRegistry:vIe}):{WeakRef,FinalizationRegistry}}});var vN=H((Dpi,xit)=>{"use strict";d();var{extractBody:wnr,mixinBody:Snr,cloneBody:_nr,bodyUnusable:ait}=eN(),{Headers:git,fill:Rnr,HeadersList:Bte,setHeadersGuard:EIe,getHeadersGuard:knr,setHeadersList:Ait,getHeadersList:cit}=pk(),{FinalizationRegistry:Pnr}=sit()(),Pte=qi(),lit=require("node:util"),{isValidHTTPToken:Dnr,sameOrigin:uit,environmentSettingsObject:kte}=Wp(),{forbiddenMethodsSet:Bnr,corsSafeListedMethodsSet:Nnr,referrerPolicy:Mnr,requestRedirect:Lnr,requestMode:Fnr,requestCredentials:Onr,requestCache:Qnr,requestDuplex:Unr}=L7(),{kEnumerableProperty:fl,normalizedMethodRecordsBase:qnr,normalizedMethodRecords:Hnr}=Pte,{kHeaders:Yp,kSignal:Dte,kState:aa,kDispatcher:xIe}=ew(),{webidl:Nn}=ed(),{URLSerializer:$nr}=R0(),{kConstruct:Nte}=Ra(),Wnr=require("node:assert"),{getMaxListeners:dit,setMaxListeners:fit,getEventListeners:jnr,defaultMaxListeners:pit}=require("node:events"),Gnr=Symbol("abortController"),yit=new Pnr(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),Mte=new WeakMap;function mit(t){return e;function e(){let r=t.deref();if(r!==void 0){yit.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=Mte.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}Mte.delete(r.signal)}}}}s(mit,"buildAbort");var hit=!1,dw=class t{static{s(this,"Request")}constructor(e,r={}){if(Nn.util.markAsUncloneable(this),e===Nte)return;let n="Request constructor";Nn.argumentLengthCheck(arguments,1,n),e=Nn.converters.RequestInfo(e,n,"input"),r=Nn.converters.RequestInit(r,n,"init");let i=null,o=null,a=kte.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[xIe]=r.dispatcher;let E;try{E=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(E.username||E.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=Lte({urlList:[E]}),o="cors"}else this[xIe]=r.dispatcher||e[xIe],Wnr(e instanceof t),i=e[aa],c=e[Dte];let l=kte.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&uit(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=Lte({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:kte.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let E=r.referrer;if(E==="")i.referrer="no-referrer";else{let b;try{b=new URL(E,a)}catch(S){throw new TypeError(`Referrer "${E}" is not a valid URL.`,{cause:S})}b.protocol==="about:"&&b.hostname==="client"||l&&!uit(b,kte.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw Nn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let E=r.method,b=Hnr[E];if(b!==void 0)i.method=b;else{if(!Dnr(E))throw new TypeError(`'${E}' is not a valid HTTP method.`);let S=E.toUpperCase();if(Bnr.has(S))throw new TypeError(`'${E}' HTTP method is unsupported.`);E=qnr[S]??E,i.method=E}!hit&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),hit=!0)}r.signal!==void 0&&(c=r.signal),this[aa]=i;let m=new AbortController;if(this[Dte]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[Gnr]=m;let E=new WeakRef(m),b=mit(E);try{(typeof dit=="function"&&dit(c)===pit||jnr(c,"abort").length>=pit)&&fit(1500,c)}catch{}Pte.addAbortListener(c,b),yit.register(m,{signal:c,abort:b},b)}}if(this[Yp]=new git(Nte),Ait(this[Yp],i.headersList),EIe(this[Yp],"request"),p==="no-cors"){if(!Nnr.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);EIe(this[Yp],"request-no-cors")}if(f){let E=cit(this[Yp]),b=r.headers!==void 0?r.headers:new Bte(E);if(E.clear(),b instanceof Bte){for(let{name:S,value:R}of b.rawValues())E.append(S,R,!1);E.cookies=b.cookies}else Rnr(this[Yp],b)}let h=e instanceof t?e[aa].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[E,b]=wnr(r.body,i.keepalive);g=E,b&&!cit(this[Yp]).contains("content-type",!0)&&this[Yp].append("content-type",b)}let A=g??h;if(A!=null&&A.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let y=A;if(g==null&&h!=null){if(ait(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let E=new TransformStream;h.stream.pipeThrough(E),y={source:h.source,length:h.length,stream:E.readable}}this[aa].body=y}get method(){return Nn.brandCheck(this,t),this[aa].method}get url(){return Nn.brandCheck(this,t),$nr(this[aa].url)}get headers(){return Nn.brandCheck(this,t),this[Yp]}get destination(){return Nn.brandCheck(this,t),this[aa].destination}get referrer(){return Nn.brandCheck(this,t),this[aa].referrer==="no-referrer"?"":this[aa].referrer==="client"?"about:client":this[aa].referrer.toString()}get referrerPolicy(){return Nn.brandCheck(this,t),this[aa].referrerPolicy}get mode(){return Nn.brandCheck(this,t),this[aa].mode}get credentials(){return this[aa].credentials}get cache(){return Nn.brandCheck(this,t),this[aa].cache}get redirect(){return Nn.brandCheck(this,t),this[aa].redirect}get integrity(){return Nn.brandCheck(this,t),this[aa].integrity}get keepalive(){return Nn.brandCheck(this,t),this[aa].keepalive}get isReloadNavigation(){return Nn.brandCheck(this,t),this[aa].reloadNavigation}get isHistoryNavigation(){return Nn.brandCheck(this,t),this[aa].historyNavigation}get signal(){return Nn.brandCheck(this,t),this[Dte]}get body(){return Nn.brandCheck(this,t),this[aa].body?this[aa].body.stream:null}get bodyUsed(){return Nn.brandCheck(this,t),!!this[aa].body&&Pte.isDisturbed(this[aa].body.stream)}get duplex(){return Nn.brandCheck(this,t),"half"}clone(){if(Nn.brandCheck(this,t),ait(this))throw new TypeError("unusable");let e=Cit(this[aa]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=Mte.get(this.signal);n===void 0&&(n=new Set,Mte.set(this.signal,n));let i=new WeakRef(r);n.add(i),Pte.addAbortListener(r.signal,mit(i))}return vit(e,r.signal,knr(this[Yp]))}[lit.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${lit.formatWithOptions(r,n)}`}};Snr(dw);function Lte(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new Bte(t.headersList):new Bte}}s(Lte,"makeRequest");function Cit(t){let e=Lte({...t,body:null});return t.body!=null&&(e.body=_nr(e,t.body)),e}s(Cit,"cloneRequest");function vit(t,e,r){let n=new dw(Nte);return n[aa]=t,n[Dte]=e,n[Yp]=new git(Nte),Ait(n[Yp],t.headersList),EIe(n[Yp],r),n}s(vit,"fromInnerRequest");Object.defineProperties(dw.prototype,{method:fl,url:fl,headers:fl,redirect:fl,clone:fl,signal:fl,duplex:fl,destination:fl,body:fl,bodyUsed:fl,isHistoryNavigation:fl,isReloadNavigation:fl,keepalive:fl,integrity:fl,cache:fl,credentials:fl,attribute:fl,referrerPolicy:fl,referrer:fl,mode:fl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Nn.converters.Request=Nn.interfaceConverter(dw);Nn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Nn.converters.USVString(t,e,r):t instanceof dw?Nn.converters.Request(t,e,r):Nn.converters.USVString(t,e,r)};Nn.converters.AbortSignal=Nn.interfaceConverter(AbortSignal);Nn.converters.RequestInit=Nn.dictionaryConverter([{key:"method",converter:Nn.converters.ByteString},{key:"headers",converter:Nn.converters.HeadersInit},{key:"body",converter:Nn.nullableConverter(Nn.converters.BodyInit)},{key:"referrer",converter:Nn.converters.USVString},{key:"referrerPolicy",converter:Nn.converters.DOMString,allowedValues:Mnr},{key:"mode",converter:Nn.converters.DOMString,allowedValues:Fnr},{key:"credentials",converter:Nn.converters.DOMString,allowedValues:Onr},{key:"cache",converter:Nn.converters.DOMString,allowedValues:Qnr},{key:"redirect",converter:Nn.converters.DOMString,allowedValues:Lnr},{key:"integrity",converter:Nn.converters.DOMString},{key:"keepalive",converter:Nn.converters.boolean},{key:"signal",converter:Nn.nullableConverter(t=>Nn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Nn.converters.any},{key:"duplex",converter:Nn.converters.DOMString,allowedValues:Unr},{key:"dispatcher",converter:Nn.converters.any}]);xit.exports={Request:dw,makeRequest:Lte,fromInnerRequest:vit,cloneRequest:Cit}});var yQ=H((Mpi,Lit)=>{"use strict";d();var{makeNetworkError:ps,makeAppropriateNetworkError:Fte,filterResponse:bIe,makeResponse:Ote,fromInnerResponse:Vnr}=gQ(),{HeadersList:Eit}=pk(),{Request:znr,cloneRequest:Ynr}=vN(),fw=require("node:zlib"),{bytesMatch:Knr,makePolicyContainer:Jnr,clonePolicyContainer:Xnr,requestBadPort:Znr,TAOCheck:eir,appendRequestOriginHeader:tir,responseLocationURL:rir,requestCurrentURL:o1,setRequestReferrerPolicyOnRedirect:nir,tryUpgradeRequestToAPotentiallyTrustworthyURL:iir,createOpaqueTimingInfo:_Ie,appendFetchMetadata:oir,corsCheck:sir,crossOriginResourcePolicyCheck:air,determineRequestsReferrer:cir,coarsenedSharedCurrentTime:AQ,createDeferredPromise:lir,isBlobLike:uir,sameOrigin:SIe,isCancelled:hk,isAborted:bit,isErrorLike:dir,fullyReadBody:fir,readableStreamClose:pir,isomorphicEncode:Qte,urlIsLocal:mir,urlIsHttpHttpsScheme:RIe,urlHasHttpsScheme:hir,clampAndCoarsenConnectionTimingInfo:gir,simpleRangeHeaderValue:Air,buildContentRange:yir,createInflate:Cir,extractMimeType:vir}=Wp(),{kState:Sit,kDispatcher:xir}=ew(),gk=require("node:assert"),{safelyExtractBody:kIe,extractBody:Iit}=eN(),{redirectStatusSet:_it,nullBodyStatus:Rit,safeMethodsSet:Eir,requestBodyHeader:bir,subresourceSet:Iir}=L7(),Tir=require("node:events"),{Readable:wir,pipeline:Sir,finished:_ir}=require("node:stream"),{addAbortListener:Rir,isErrored:kir,isReadable:Ute,bufferToLowerCasedHeaderName:Tit}=qi(),{dataURLProcessor:Pir,serializeAMimeType:Dir,minimizeSupportedMimeType:Bir}=R0(),{getGlobalDispatcher:Nir}=bte(),{webidl:Mir}=ed(),{STATUS_CODES:Lir}=require("node:http"),Fir=["GET","HEAD"],Oir=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",IIe,qte=class extends Tir{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Qir(t){kit(t,"fetch")}s(Qir,"handleFetchDone");function Uir(t,e=void 0){Mir.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=lir(),n;try{n=new znr(t,e)}catch(f){return r.reject(f),r.promise}let i=n[Sit];if(n.signal.aborted)return TIe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return Rir(n.signal,()=>{c=!0,gk(l!=null),l.abort(n.signal.reason);let f=a?.deref();TIe(r,i,f,n.signal.reason)}),l=Dit({request:i,processResponseEndOfBody:Qir,processResponse:s(f=>{if(!c){if(f.aborted){TIe(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(Vnr(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[xir]}),r.promise}s(Uir,"fetch");function kit(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;RIe(r)&&n!==null&&(t.timingAllowPassed||(n=_Ie({startTime:n.startTime}),i=""),n.endTime=AQ(),t.timingInfo=n,Pit(n,r.href,e,globalThis,i))}s(kit,"finalizeAndReportTiming");var Pit=performance.markResourceTiming;function TIe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&Ute(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[Sit];i.body!=null&&Ute(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(TIe,"abortFetch");function Dit({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=Nir()}){gk(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=AQ(u),p=_Ie({startTime:f}),m={controller:new qte(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return gk(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=Xnr(t.client.policyContainer):t.policyContainer=Jnr()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,Iir.has(t.destination),Bit(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(Dit,"fetching");async function Bit(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!mir(o1(r))&&(n=ps("local URLs only")),iir(r),Znr(r)==="blocked"&&(n=ps("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=cir(r)),n===null&&(n=await(async()=>{let o=o1(r);return SIe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await wit(t)):r.mode==="same-origin"?ps('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?ps('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await wit(t)):RIe(o1(r))?(r.responseTainting="cors",await Nit(t)):ps("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=bIe(n,"basic"):r.responseTainting==="cors"?n=bIe(n,"cors"):r.responseTainting==="opaque"?n=bIe(n,"opaque"):gk(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=ps()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Rit.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>wIe(t,ps(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!Knr(c,r.integrity)){o("integrity mismatch");return}n.body=kIe(c)[0],wIe(t,n)},"processBody");await fir(n.body,a,o)}else wIe(t,n)}s(Bit,"mainFetch");function wit(t){if(hk(t)&&t.request.redirectCount===0)return Promise.resolve(Fte(t));let{request:e}=t,{protocol:r}=o1(e);switch(r){case"about:":return Promise.resolve(ps("about scheme is not supported"));case"blob:":{IIe||(IIe=require("node:buffer").resolveObjectURL);let n=o1(e);if(n.search.length!==0)return Promise.resolve(ps("NetworkError when attempting to fetch resource."));let i=IIe(n.toString());if(e.method!=="GET"||!uir(i))return Promise.resolve(ps("invalid method"));let o=Ote(),a=i.size,c=Qte(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=Air(u,!0);if(f==="failure")return Promise.resolve(ps("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=f;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(ps("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=Iit(h);o.body=g[0];let A=Qte(`${h.size}`),y=yir(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",A,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",y,!0)}else{let u=Iit(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=o1(e),i=Pir(n);if(i==="failure")return Promise.resolve(ps("failed to fetch the data URL"));let o=Dir(i.mimeType);return Promise.resolve(Ote({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:kIe(i.body)[0]}))}case"file:":return Promise.resolve(ps("not implemented... yet..."));case"http:":case"https:":return Nit(t).catch(n=>ps(n));default:return Promise.resolve(ps("unknown scheme"))}}s(wit,"schemeFetch");function qir(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(qir,"finalizeResponse");function wIe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=_Ie(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=vir(e.headersList);f!=="failure"&&(l.contentType=Bir(f))}t.request.initiatorType!=null&&Pit(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():_ir(i.body.stream,()=>{n()})}s(wIe,"fetchFinale");async function Nit(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await Mit(t),e.responseTainting==="cors"&&sir(e,r)==="failure")return ps("cors failure");eir(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&air(e.origin,e.client,e.destination,n)==="blocked"?ps("blocked"):(_it.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=ps("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await Hir(t,r):gk(!1)),r.timingInfo=i,r)}s(Nit,"httpFetch");function Hir(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=rir(n,o1(r).hash),i==null)return e}catch(a){return Promise.resolve(ps(a))}if(!RIe(i))return Promise.resolve(ps("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(ps("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!SIe(r,i))return Promise.resolve(ps('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(ps('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(ps());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!Fir.includes(r.method)){r.method="GET",r.body=null;for(let a of bir)r.headersList.delete(a)}SIe(o1(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(gk(r.body.source!=null),r.body=kIe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=AQ(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),nir(r,n),Bit(t,!0)}s(Hir,"httpRedirectFetch");async function Mit(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=Ynr(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=Qte(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",Qte(o.referrer.href),!0),tir(o),oir(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Oir),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(hir(o1(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return ps("only if cached");let m=await $ir(i,u,r);!Eir.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?ps():hk(t)?Fte(t):ps("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(hk(t))return Fte(t);t.controller.connection.destroy(),a=await Mit(t,e,!0)}return a}s(Mit,"httpNetworkOrCacheFetch");async function $ir(t,e=!1,r=!1){gk(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,A=!0){this.destroyed||(this.destroyed=!0,A&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(E){hk(t)||(yield E,t.processRequestBodyChunkLength?.(E.byteLength))},"processBodyChunk"),A=s(()=>{hk(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),y=s(E=>{hk(t)||(E.name==="AbortError"?t.controller.abort():t.controller.terminate(E))},"processBodyError");l=async function*(){try{for await(let E of n.body.stream)yield*g(E);A()}catch(E){y(E)}}()}try{let{body:g,status:A,statusText:y,headersList:E,socket:b}=await h({body:l});if(b)i=Ote({status:A,statusText:y,headersList:E,socket:b});else{let S=g[Symbol.asyncIterator]();t.controller.next=()=>S.next(),i=Ote({status:A,statusText:y,headersList:E})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),Fte(t,g)):ps(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{hk(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,A;try{let{done:E,value:b}=await t.controller.next();if(bit(t))break;g=E?void 0:b}catch(E){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=E,A=!0)}if(g===void 0){pir(t.controller.controller),qir(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,A){t.controller.terminate(g);return}let y=new Uint8Array(g);if(y.byteLength&&t.controller.controller.enqueue(y),kir(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){bit(t)?(i.aborted=!0,Ute(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):Ute(p)&&t.controller.controller.error(new TypeError("terminated",{cause:dir(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let A=o1(n),y=t.controller.dispatcher;return new Promise((E,b)=>y.dispatch({path:A.pathname+A.search,origin:A.origin,method:n.method,body:y.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(S){let{connection:R}=t.controller;o.finalConnectionTimingInfo=gir(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),R.destroyed?S(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",S),this.abort=R.abort=S),o.finalNetworkRequestStartTime=AQ(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=AQ(t.crossOriginIsolatedCapability)},onHeaders(S,R,B,L){if(S<200)return;let O=[],K="",V=new Eit;for(let J=0;J<R.length;J+=2)V.append(Tit(R[J]),R[J+1].toString("latin1"),!0);let z=V.get("content-encoding",!0);z&&(O=z.toLowerCase().split(",").map(J=>J.trim())),K=V.get("location",!0),this.body=new wir({read:B});let Q=[],U=K&&n.redirect==="follow"&&_it.has(S);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Rit.includes(S)&&!U)for(let J=O.length-1;J>=0;--J){let j=O[J];if(j==="x-gzip"||j==="gzip")Q.push(fw.createGunzip({flush:fw.constants.Z_SYNC_FLUSH,finishFlush:fw.constants.Z_SYNC_FLUSH}));else if(j==="deflate")Q.push(Cir({flush:fw.constants.Z_SYNC_FLUSH,finishFlush:fw.constants.Z_SYNC_FLUSH}));else if(j==="br")Q.push(fw.createBrotliDecompress({flush:fw.constants.BROTLI_OPERATION_FLUSH,finishFlush:fw.constants.BROTLI_OPERATION_FLUSH}));else{Q.length=0;break}}let Z=this.onError.bind(this);return E({status:S,statusText:L,headersList:V,body:Q.length?Sir(this.body,...Q,J=>{J&&this.onError(J)}).on("error",Z):this.body.on("error",Z)}),!0},onData(S){if(t.controller.dump)return;let R=S;return o.encodedBodySize+=R.byteLength,this.body.push(R)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(S){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(S),t.controller.terminate(S),b(S)},onUpgrade(S,R,B){if(S!==101)return;let L=new Eit;for(let O=0;O<R.length;O+=2)L.append(Tit(R[O]),R[O+1].toString("latin1"),!0);return E({status:S,statusText:Lir[S],headersList:L,socket:B}),!0}}))}s(h,"dispatch")}s($ir,"httpNetworkFetch");Lit.exports={fetch:Uir,Fetch:qte,fetching:Dit,finalizeAndReportTiming:kit}});var PIe=H((Opi,Fit)=>{"use strict";d();Fit.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Qit=H((Upi,Oit)=>{"use strict";d();var{webidl:Kp}=ed(),Hte=Symbol("ProgressEvent state"),DIe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=Kp.converters.DOMString(e,"ProgressEvent constructor","type"),r=Kp.converters.ProgressEventInit(r??{}),super(e,r),this[Hte]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Kp.brandCheck(this,t),this[Hte].lengthComputable}get loaded(){return Kp.brandCheck(this,t),this[Hte].loaded}get total(){return Kp.brandCheck(this,t),this[Hte].total}};Kp.converters.ProgressEventInit=Kp.dictionaryConverter([{key:"lengthComputable",converter:Kp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:Kp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:Kp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:Kp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Kp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Kp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);Oit.exports={ProgressEvent:DIe}});var qit=H(($pi,Uit)=>{"use strict";d();function Wir(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Wir,"getEncoding");Uit.exports={getEncoding:Wir}});var Yit=H((Gpi,zit)=>{"use strict";d();var{kState:xN,kError:BIe,kResult:Hit,kAborted:CQ,kLastProgressEventFired:NIe}=PIe(),{ProgressEvent:jir}=Qit(),{getEncoding:$it}=qit(),{serializeAMimeType:Gir,parseMIMEType:Wit}=R0(),{types:Vir}=require("node:util"),{StringDecoder:jit}=require("string_decoder"),{btoa:Git}=require("node:buffer"),zir={enumerable:!0,writable:!1,configurable:!1};function Yir(t,e,r,n){if(t[xN]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[xN]="loading",t[Hit]=null,t[BIe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[CQ];)try{let{done:u,value:f}=await c;if(l&&!t[CQ]&&queueMicrotask(()=>{pw("loadstart",t)}),l=!1,!u&&Vir.isUint8Array(f))a.push(f),(t[NIe]===void 0||Date.now()-t[NIe]>=50)&&!t[CQ]&&(t[NIe]=Date.now(),queueMicrotask(()=>{pw("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[xN]="done";try{let p=Kir(a,r,e.type,n);if(t[CQ])return;t[Hit]=p,pw("load",t)}catch(p){t[BIe]=p,pw("error",t)}t[xN]!=="loading"&&pw("loadend",t)});break}}catch(u){if(t[CQ])return;queueMicrotask(()=>{t[xN]="done",t[BIe]=u,pw("error",t),t[xN]!=="loading"&&pw("loadend",t)});break}})()}s(Yir,"readOperation");function pw(t,e){let r=new jir(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(pw,"fireAProgressEvent");function Kir(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=Wit(r||"application/octet-stream");o!=="failure"&&(i+=Gir(o)),i+=";base64,";let a=new jit("latin1");for(let c of t)i+=Git(a.write(c));return i+=Git(a.end()),i}case"Text":{let i="failure";if(n&&(i=$it(n)),i==="failure"&&r){let o=Wit(r);o!=="failure"&&(i=$it(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Jir(t,i)}case"ArrayBuffer":return Vit(t).buffer;case"BinaryString":{let i="",o=new jit("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(Kir,"packageData");function Jir(t,e){let r=Vit(t),n=Xir(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(Jir,"decode");function Xir(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(Xir,"BOMSniffing");function Vit(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(Vit,"combineByteSequences");zit.exports={staticPropertyDescriptors:zir,readOperation:Yir,fireAProgressEvent:pw}});var Zit=H((Ypi,Xit)=>{"use strict";d();var{staticPropertyDescriptors:EN,readOperation:$te,fireAProgressEvent:Kit}=Yit(),{kState:Ak,kError:Jit,kResult:Wte,kEvents:Ko,kAborted:Zir}=PIe(),{webidl:xs}=ed(),{kEnumerableProperty:D0}=qi(),WA=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[Ak]="empty",this[Wte]=null,this[Jit]=null,this[Ko]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"ArrayBuffer")}readAsBinaryString(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"BinaryString")}readAsText(e,r=void 0){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=xs.converters.Blob(e,{strict:!1}),r!==void 0&&(r=xs.converters.DOMString(r,"FileReader.readAsText","encoding")),$te(this,e,"Text",r)}readAsDataURL(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"DataURL")}abort(){if(this[Ak]==="empty"||this[Ak]==="done"){this[Wte]=null;return}this[Ak]==="loading"&&(this[Ak]="done",this[Wte]=null),this[Zir]=!0,Kit("abort",this),this[Ak]!=="loading"&&Kit("loadend",this)}get readyState(){switch(xs.brandCheck(this,t),this[Ak]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return xs.brandCheck(this,t),this[Wte]}get error(){return xs.brandCheck(this,t),this[Jit]}get onloadend(){return xs.brandCheck(this,t),this[Ko].loadend}set onloadend(e){xs.brandCheck(this,t),this[Ko].loadend&&this.removeEventListener("loadend",this[Ko].loadend),typeof e=="function"?(this[Ko].loadend=e,this.addEventListener("loadend",e)):this[Ko].loadend=null}get onerror(){return xs.brandCheck(this,t),this[Ko].error}set onerror(e){xs.brandCheck(this,t),this[Ko].error&&this.removeEventListener("error",this[Ko].error),typeof e=="function"?(this[Ko].error=e,this.addEventListener("error",e)):this[Ko].error=null}get onloadstart(){return xs.brandCheck(this,t),this[Ko].loadstart}set onloadstart(e){xs.brandCheck(this,t),this[Ko].loadstart&&this.removeEventListener("loadstart",this[Ko].loadstart),typeof e=="function"?(this[Ko].loadstart=e,this.addEventListener("loadstart",e)):this[Ko].loadstart=null}get onprogress(){return xs.brandCheck(this,t),this[Ko].progress}set onprogress(e){xs.brandCheck(this,t),this[Ko].progress&&this.removeEventListener("progress",this[Ko].progress),typeof e=="function"?(this[Ko].progress=e,this.addEventListener("progress",e)):this[Ko].progress=null}get onload(){return xs.brandCheck(this,t),this[Ko].load}set onload(e){xs.brandCheck(this,t),this[Ko].load&&this.removeEventListener("load",this[Ko].load),typeof e=="function"?(this[Ko].load=e,this.addEventListener("load",e)):this[Ko].load=null}get onabort(){return xs.brandCheck(this,t),this[Ko].abort}set onabort(e){xs.brandCheck(this,t),this[Ko].abort&&this.removeEventListener("abort",this[Ko].abort),typeof e=="function"?(this[Ko].abort=e,this.addEventListener("abort",e)):this[Ko].abort=null}};WA.EMPTY=WA.prototype.EMPTY=0;WA.LOADING=WA.prototype.LOADING=1;WA.DONE=WA.prototype.DONE=2;Object.defineProperties(WA.prototype,{EMPTY:EN,LOADING:EN,DONE:EN,readAsArrayBuffer:D0,readAsBinaryString:D0,readAsText:D0,readAsDataURL:D0,abort:D0,readyState:D0,result:D0,error:D0,onloadstart:D0,onprogress:D0,onload:D0,onabort:D0,onerror:D0,onloadend:D0,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(WA,{EMPTY:EN,LOADING:EN,DONE:EN});Xit.exports={FileReader:WA}});var jte=H((Xpi,eot)=>{"use strict";d();eot.exports={kConstruct:Ra().kConstruct}});var not=H((emi,rot)=>{"use strict";d();var eor=require("node:assert"),{URLSerializer:tot}=R0(),{isValidHeaderName:tor}=Wp();function ror(t,e,r=!1){let n=tot(t,r),i=tot(e,r);return n===i}s(ror,"urlEquals");function nor(t){eor(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),tor(r)&&e.push(r);return e}s(nor,"getFieldValues");rot.exports={urlEquals:ror,getFieldValues:nor}});var sot=H((nmi,oot)=>{"use strict";d();var{kConstruct:ior}=jte(),{urlEquals:oor,getFieldValues:MIe}=not(),{kEnumerableProperty:yk,isDisturbed:sor}=qi(),{webidl:hn}=ed(),{Response:aor,cloneResponse:cor,fromInnerResponse:lor}=gQ(),{Request:zx,fromInnerRequest:uor}=vN(),{kState:jA}=ew(),{fetching:dor}=yQ(),{urlIsHttpHttpsScheme:Gte,createDeferredPromise:bN,readAllBytes:por}=Wp(),LIe=require("node:assert"),Vte=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==ior&&hn.illegalConstructor(),hn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){hn.brandCheck(this,t);let n="Cache.match";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.RequestInfo(e,n,"request"),r=hn.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){hn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=hn.converters.RequestInfo(e,n,"request")),r=hn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){hn.brandCheck(this,t);let r="Cache.add";hn.argumentLengthCheck(arguments,1,r),e=hn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){hn.brandCheck(this,t);let r="Cache.addAll";hn.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw hn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=hn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[jA];if(!Gte(h.url)||h.method!=="GET")throw hn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new zx(m)[jA];if(!Gte(h.url))throw hn.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=bN();o.push(dor({request:h,processResponse(A){if(A.type==="error"||A.status===206||A.status<200||A.status>299)g.reject(hn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(A.headersList.contains("vary")){let y=MIe(A.headersList.get("vary"));for(let E of y)if(E==="*"){g.reject(hn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(A){if(A.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(A)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let f=bN(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){hn.brandCheck(this,t);let n="Cache.put";hn.argumentLengthCheck(arguments,2,n),e=hn.converters.RequestInfo(e,n,"request"),r=hn.converters.Response(r,n,"response");let i=null;if(e instanceof zx?i=e[jA]:i=new zx(e)[jA],!Gte(i.url)||i.method!=="GET")throw hn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[jA];if(o.status===206)throw hn.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=MIe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw hn.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(sor(o.body.stream)||o.body.stream.locked))throw hn.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=cor(o),c=bN();if(o.body!=null){let g=o.body.stream.getReader();por(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=bN(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){hn.brandCheck(this,t);let n="Cache.delete";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.RequestInfo(e,n,"request"),r=hn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof zx){if(i=e[jA],i.method!=="GET"&&!r.ignoreMethod)return!1}else LIe(typeof e=="string"),i=new zx(e)[jA];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=bN(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){hn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=hn.converters.RequestInfo(e,n,"request")),r=hn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof zx){if(i=e[jA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new zx(e)[jA]);let o=bN(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=uor(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);LIe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!Gte(l.url))throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw hn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);LIe(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!oor(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=MIe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof zx){if(i=e[jA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new zx(e)[jA]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=lor(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(Vte.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:yk,matchAll:yk,add:yk,addAll:yk,put:yk,delete:yk,keys:yk});var iot=[{key:"ignoreSearch",converter:hn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:hn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:hn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];hn.converters.CacheQueryOptions=hn.dictionaryConverter(iot);hn.converters.MultiCacheQueryOptions=hn.dictionaryConverter([...iot,{key:"cacheName",converter:hn.converters.DOMString}]);hn.converters.Response=hn.interfaceConverter(aor);hn.converters["sequence<RequestInfo>"]=hn.sequenceConverter(hn.converters.RequestInfo);oot.exports={Cache:Vte}});var cot=H((smi,aot)=>{"use strict";d();var{kConstruct:vQ}=jte(),{Cache:zte}=sot(),{webidl:qd}=ed(),{kEnumerableProperty:xQ}=qi(),Yte=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==vQ&&qd.illegalConstructor(),qd.util.markAsUncloneable(this)}async match(e,r={}){if(qd.brandCheck(this,t),qd.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=qd.converters.RequestInfo(e),r=qd.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new zte(vQ,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new zte(vQ,n).match(e,r);if(o!==void 0)return o}}async has(e){qd.brandCheck(this,t);let r="CacheStorage.has";return qd.argumentLengthCheck(arguments,1,r),e=qd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){qd.brandCheck(this,t);let r="CacheStorage.open";if(qd.argumentLengthCheck(arguments,1,r),e=qd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new zte(vQ,i)}let n=[];return this.#e.set(e,n),new zte(vQ,n)}async delete(e){qd.brandCheck(this,t);let r="CacheStorage.delete";return qd.argumentLengthCheck(arguments,1,r),e=qd.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return qd.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(Yte.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:xQ,has:xQ,open:xQ,delete:xQ,keys:xQ});aot.exports={CacheStorage:Yte}});var uot=H((lmi,lot)=>{"use strict";d();lot.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var FIe=H((dmi,hot)=>{"use strict";d();function mor(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(mor,"isCTLExcludingHtab");function dot(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(dot,"validateCookieName");function fot(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(fot,"validateCookieValue");function pot(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(pot,"validateCookiePath");function hor(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(hor,"validateCookieDomain");var gor=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Aor=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Kte=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function mot(t){return typeof t=="number"&&(t=new Date(t)),`${gor[t.getUTCDay()]}, ${Kte[t.getUTCDate()]} ${Aor[t.getUTCMonth()]} ${t.getUTCFullYear()} ${Kte[t.getUTCHours()]}:${Kte[t.getUTCMinutes()]}:${Kte[t.getUTCSeconds()]} GMT`}s(mot,"toIMFDate");function yor(t){if(t<0)throw new Error("Invalid cookie max-age")}s(yor,"validateCookieMaxAge");function Cor(t){if(t.name.length===0)return null;dot(t.name),fot(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(yor(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(hor(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(pot(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${mot(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(Cor,"stringify");hot.exports={isCTLExcludingHtab:mor,validateCookieName:dot,validateCookiePath:pot,validateCookieValue:fot,toIMFDate:mot,stringify:Cor}});var Aot=H((mmi,got)=>{"use strict";d();var{maxNameValuePairSize:vor,maxAttributeValueSize:xor}=uot(),{isCTLExcludingHtab:Eor}=FIe(),{collectASequenceOfCodePointsFast:Jte}=R0(),bor=require("node:assert");function Ior(t){if(Eor(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=Jte(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=Jte("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>vor?null:{name:n,value:i,...IN(r)}}s(Ior,"parseSetCookie");function IN(t,e={}){if(t.length===0)return e;bor(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=Jte(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=Jte("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>xor)return IN(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return IN(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return IN(t,e)}s(IN,"parseUnparsedAttributes");got.exports={parseSetCookie:Ior,parseUnparsedAttributes:IN}});var vot=H((Ami,Cot)=>{"use strict";d();var{parseSetCookie:Tor}=Aot(),{stringify:wor}=FIe(),{webidl:po}=ed(),{Headers:Xte}=pk();function Sor(t){po.argumentLengthCheck(arguments,1,"getCookies"),po.brandCheck(t,Xte,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(Sor,"getCookies");function _or(t,e,r){po.brandCheck(t,Xte,{strict:!1});let n="deleteCookie";po.argumentLengthCheck(arguments,2,n),e=po.converters.DOMString(e,n,"name"),r=po.converters.DeleteCookieAttributes(r),yot(t,{name:e,value:"",expires:new Date(0),...r})}s(_or,"deleteCookie");function Ror(t){po.argumentLengthCheck(arguments,1,"getSetCookies"),po.brandCheck(t,Xte,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>Tor(r)):[]}s(Ror,"getSetCookies");function yot(t,e){po.argumentLengthCheck(arguments,2,"setCookie"),po.brandCheck(t,Xte,{strict:!1}),e=po.converters.Cookie(e);let r=wor(e);r&&t.append("Set-Cookie",r)}s(yot,"setCookie");po.converters.DeleteCookieAttributes=po.dictionaryConverter([{converter:po.nullableConverter(po.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);po.converters.Cookie=po.dictionaryConverter([{converter:po.converters.DOMString,key:"name"},{converter:po.converters.DOMString,key:"value"},{converter:po.nullableConverter(t=>typeof t=="number"?po.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:po.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:po.sequenceConverter(po.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);Cot.exports={getCookies:Sor,deleteCookie:_or,getSetCookies:Ror,setCookie:yot}});var wN=H((vmi,Eot)=>{"use strict";d();var{webidl:fn}=ed(),{kEnumerableProperty:B0}=qi(),{kConstruct:xot}=Ra(),{MessagePort:kor}=require("node:worker_threads"),TN=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===xot){super(arguments[1],arguments[2]),fn.util.markAsUncloneable(this);return}let n="MessageEvent constructor";fn.argumentLengthCheck(arguments,1,n),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,fn.util.markAsUncloneable(this)}get data(){return fn.brandCheck(this,t),this.#e.data}get origin(){return fn.brandCheck(this,t),this.#e.origin}get lastEventId(){return fn.brandCheck(this,t),this.#e.lastEventId}get source(){return fn.brandCheck(this,t),this.#e.source}get ports(){return fn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return fn.brandCheck(this,t),fn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(xot,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Por}=TN;delete TN.createFastMessageEvent;var Zte=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";fn.argumentLengthCheck(arguments,1,n),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.CloseEventInit(r),super(e,r),this.#e=r,fn.util.markAsUncloneable(this)}get wasClean(){return fn.brandCheck(this,t),this.#e.wasClean}get code(){return fn.brandCheck(this,t),this.#e.code}get reason(){return fn.brandCheck(this,t),this.#e.reason}},ere=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";fn.argumentLengthCheck(arguments,1,n),super(e,r),fn.util.markAsUncloneable(this),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return fn.brandCheck(this,t),this.#e.message}get filename(){return fn.brandCheck(this,t),this.#e.filename}get lineno(){return fn.brandCheck(this,t),this.#e.lineno}get colno(){return fn.brandCheck(this,t),this.#e.colno}get error(){return fn.brandCheck(this,t),this.#e.error}};Object.defineProperties(TN.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:B0,origin:B0,lastEventId:B0,source:B0,ports:B0,initMessageEvent:B0});Object.defineProperties(Zte.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:B0,code:B0,wasClean:B0});Object.defineProperties(ere.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:B0,filename:B0,lineno:B0,colno:B0,error:B0});fn.converters.MessagePort=fn.interfaceConverter(kor);fn.converters["sequence<MessagePort>"]=fn.sequenceConverter(fn.converters.MessagePort);var OIe=[{key:"bubbles",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];fn.converters.MessageEventInit=fn.dictionaryConverter([...OIe,{key:"data",converter:fn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:fn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:fn.nullableConverter(fn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:fn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);fn.converters.CloseEventInit=fn.dictionaryConverter([...OIe,{key:"wasClean",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:fn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);fn.converters.ErrorEventInit=fn.dictionaryConverter([...OIe,{key:"message",converter:fn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:fn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:fn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:fn.converters.any}]);Eot.exports={MessageEvent:TN,CloseEvent:Zte,ErrorEvent:ere,createFastMessageEvent:Por}});var Ck=H((bmi,bot)=>{"use strict";d();var Dor="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Bor={enumerable:!0,writable:!1,configurable:!1},Nor={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Mor={NOT_SENT:0,PROCESSING:1,SENT:2},Lor={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},For=2**16-1,Oor={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},Qor=Buffer.allocUnsafe(0),Uor={string:1,typedArray:2,arrayBuffer:3,blob:4};bot.exports={uid:Dor,sentCloseFrameState:Mor,staticPropertyDescriptors:Bor,states:Nor,opcodes:Lor,maxUnsigned16Bit:For,parserStates:Oor,emptyBuffer:Qor,sendHints:Uor}});var EQ=H((Tmi,Iot)=>{"use strict";d();Iot.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var TQ=H((Smi,Bot)=>{"use strict";d();var{kReadyState:bQ,kController:qor,kResponse:Hor,kBinaryType:$or,kWebSocketURL:Wor}=EQ(),{states:IQ,opcodes:mw}=Ck(),{ErrorEvent:jor,createFastMessageEvent:Gor}=wN(),{isUtf8:Vor}=require("node:buffer"),{collectASequenceOfCodePointsFast:zor,removeHTTPWhitespace:Tot}=R0();function Yor(t){return t[bQ]===IQ.CONNECTING}s(Yor,"isConnecting");function Kor(t){return t[bQ]===IQ.OPEN}s(Kor,"isEstablished");function Jor(t){return t[bQ]===IQ.CLOSING}s(Jor,"isClosing");function Xor(t){return t[bQ]===IQ.CLOSED}s(Xor,"isClosed");function QIe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(QIe,"fireEvent");function Zor(t,e,r){if(t[bQ]!==IQ.OPEN)return;let n;if(e===mw.TEXT)try{n=Dot(r)}catch{Sot(t,"Received invalid UTF-8 in text frame.");return}else e===mw.BINARY&&(t[$or]==="blob"?n=new Blob([r]):n=esr(r));QIe("message",t,Gor,{origin:t[Wor].origin,data:n})}s(Zor,"websocketMessageReceived");function esr(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(esr,"toArrayBuffer");function tsr(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(tsr,"isValidSubprotocol");function rsr(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(rsr,"isValidStatusCode");function Sot(t,e){let{[qor]:r,[Hor]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&QIe("error",t,(i,o)=>new jor(i,o),{error:new Error(e),message:e})}s(Sot,"failWebsocketConnection");function _ot(t){return t===mw.CLOSE||t===mw.PING||t===mw.PONG}s(_ot,"isControlFrame");function Rot(t){return t===mw.CONTINUATION}s(Rot,"isContinuationFrame");function kot(t){return t===mw.TEXT||t===mw.BINARY}s(kot,"isTextBinaryFrame");function nsr(t){return kot(t)||Rot(t)||_ot(t)}s(nsr,"isValidOpcode");function isr(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=zor(";",t,e),[i,o=""]=n.split("=");r.set(Tot(i,!0,!1),Tot(o,!1,!0)),e.position++}return r}s(isr,"parseExtensions");function osr(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(osr,"isValidClientWindowBits");var Pot=typeof process.versions.icu=="string",wot=Pot?new TextDecoder("utf-8",{fatal:!0}):void 0,Dot=Pot?wot.decode.bind(wot):function(t){if(Vor(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Bot.exports={isConnecting:Yor,isEstablished:Kor,isClosing:Jor,isClosed:Xor,fireEvent:QIe,isValidSubprotocol:tsr,isValidStatusCode:rsr,failWebsocketConnection:Sot,websocketMessageReceived:Zor,utf8Decode:Dot,isControlFrame:_ot,isContinuationFrame:Rot,isTextBinaryFrame:kot,isValidOpcode:nsr,parseExtensions:isr,isValidClientWindowBits:osr}});var rre=H((kmi,Not)=>{"use strict";d();var{maxUnsigned16Bit:ssr}=Ck(),tre=16386,UIe,wQ=null,SN=tre;try{UIe=require("node:crypto")}catch{UIe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function asr(){return SN===tre&&(SN=0,UIe.randomFillSync(wQ??=Buffer.allocUnsafe(tre),0,tre)),[wQ[SN++],wQ[SN++],wQ[SN++],wQ[SN++]]}s(asr,"generateMask");var qIe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=asr(),i=r?.byteLength??0,o=i,a=6;i>ssr?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};Not.exports={WebsocketFrameSend:qIe}});var $Ie=H((Bmi,qot)=>{"use strict";d();var{uid:csr,states:SQ,sentCloseFrameState:nre,emptyBuffer:lsr,opcodes:usr}=Ck(),{kReadyState:_Q,kSentClose:ire,kByteParser:Lot,kReceivedClose:Mot,kResponse:Fot}=EQ(),{fireEvent:dsr,failWebsocketConnection:hw,isClosing:fsr,isClosed:psr,isEstablished:msr,parseExtensions:hsr}=TQ(),{channels:_N}=q3(),{CloseEvent:gsr}=wN(),{makeRequest:Asr}=vN(),{fetching:ysr}=yQ(),{Headers:Csr,getHeadersList:vsr}=pk(),{getDecodeSplit:xsr}=Wp(),{WebsocketFrameSend:Esr}=rre(),HIe;try{HIe=require("node:crypto")}catch{}function bsr(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=Asr({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=vsr(new Csr(o.headers));c.headersList=p}let l=HIe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),ysr({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){hw(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){hw(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){hw(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){hw(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=HIe.createHash("sha1").update(l+csr).digest("base64");if(m!==h){hw(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),A;if(g!==null&&(A=hsr(g),!A.has("permessage-deflate"))){hw(n,"Sec-WebSocket-Extensions header does not match.");return}let y=p.headersList.get("Sec-WebSocket-Protocol");if(y!==null&&!xsr("sec-websocket-protocol",c.headersList).includes(y)){hw(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",Oot),p.socket.on("close",Qot),p.socket.on("error",Uot),_N.open.hasSubscribers&&_N.open.publish({address:p.socket.address(),protocol:y,extensions:g}),i(p,A)}})}s(bsr,"establishWebSocketConnection");function Isr(t,e,r,n){if(!(fsr(t)||psr(t)))if(!msr(t))hw(t,"Connection was closed before it was established."),t[_Q]=SQ.CLOSING;else if(t[ire]===nre.NOT_SENT){t[ire]=nre.PROCESSING;let i=new Esr;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=lsr,t[Fot].socket.write(i.createFrame(usr.CLOSE)),t[ire]=nre.SENT,t[_Q]=SQ.CLOSING}else t[_Q]=SQ.CLOSING}s(Isr,"closeWebSocketConnection");function Oot(t){this.ws[Lot].write(t)||this.pause()}s(Oot,"onSocketData");function Qot(){let{ws:t}=this,{[Fot]:e}=t;e.socket.off("data",Oot),e.socket.off("close",Qot),e.socket.off("error",Uot);let r=t[ire]===nre.SENT&&t[Mot],n=1005,i="",o=t[Lot].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[Mot]||(n=1006),t[_Q]=SQ.CLOSED,dsr("close",t,(a,c)=>new gsr(a,c),{wasClean:r,code:n,reason:i}),_N.close.hasSubscribers&&_N.close.publish({websocket:t,code:n,reason:i})}s(Qot,"onSocketClose");function Uot(t){let{ws:e}=this;e[_Q]=SQ.CLOSING,_N.socketError.hasSubscribers&&_N.socketError.publish(t),this.destroy()}s(Uot,"onSocketError");qot.exports={establishWebSocketConnection:bsr,closeWebSocketConnection:Isr}});var $ot=H((Lmi,Hot)=>{"use strict";d();var{createInflateRaw:Tsr,Z_DEFAULT_WINDOWBITS:wsr}=require("node:zlib"),{isValidClientWindowBits:Ssr}=TQ(),_sr=Buffer.from([0,0,255,255]),ore=Symbol("kBuffer"),sre=Symbol("kLength"),WIe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=wsr;if(this.#t.serverMaxWindowBits){if(!Ssr(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Tsr({windowBits:i}),this.#e[ore]=[],this.#e[sre]=0,this.#e.on("data",o=>{this.#e[ore].push(o),this.#e[sre]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(_sr),this.#e.flush(()=>{let i=Buffer.concat(this.#e[ore],this.#e[sre]);this.#e[ore].length=0,this.#e[sre]=0,n(null,i)})}};Hot.exports={PerMessageDeflate:WIe}});var est=H((Qmi,Zot)=>{"use strict";d();var{Writable:Rsr}=require("node:stream"),ksr=require("node:assert"),{parserStates:N0,opcodes:RN,states:Psr,emptyBuffer:Wot,sentCloseFrameState:jot}=Ck(),{kReadyState:Dsr,kSentClose:Got,kResponse:Vot,kReceivedClose:zot}=EQ(),{channels:are}=q3(),{isValidStatusCode:Bsr,isValidOpcode:Nsr,failWebsocketConnection:qh,websocketMessageReceived:Yot,utf8Decode:Msr,isControlFrame:Kot,isTextBinaryFrame:jIe,isContinuationFrame:Lsr}=TQ(),{WebsocketFrameSend:Jot}=rre(),{closeWebSocketConnection:Xot}=$Ie(),{PerMessageDeflate:Fsr}=$ot(),GIe=class extends Rsr{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=N0.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new Fsr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===N0.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==RN.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!Nsr(i))return qh(this.ws,"Invalid opcode received"),e();if(o)return qh(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){qh(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){qh(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!jIe(i)){qh(this.ws,"Invalid frame type was fragmented.");return}if(jIe(i)&&this.#o.length>0){qh(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){qh(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&Kot(i)){qh(this.ws,"Control frame either too large or fragmented");return}if(Lsr(i)&&this.#o.length===0&&!this.#r.compressed){qh(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=N0.READ_DATA):c===126?this.#n=N0.PAYLOADLENGTH_16:c===127&&(this.#n=N0.PAYLOADLENGTH_64),jIe(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===N0.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=N0.READ_DATA}else if(this.#n===N0.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){qh(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=N0.READ_DATA}else if(this.#n===N0.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(Kot(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=N0.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){Xot(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=N0.INFO,this.#i=!0,this.run(e);return}Yot(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=N0.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Yot(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=N0.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return Wot;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){ksr(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!Bsr(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=Msr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===RN.CLOSE){if(n===1)return qh(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return Xot(this.ws,i,o,o.length),qh(this.ws,o),!1}if(this.ws[Got]!==jot.SENT){let i=Wot;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new Jot(i);this.ws[Vot].socket.write(o.createFrame(RN.CLOSE),a=>{a||(this.ws[Got]=jot.SENT)})}return this.ws[Dsr]=Psr.CLOSING,this.ws[zot]=!0,!1}else if(r===RN.PING){if(!this.ws[zot]){let i=new Jot(e);this.ws[Vot].socket.write(i.createFrame(RN.PONG)),are.ping.hasSubscribers&&are.ping.publish({payload:e})}}else r===RN.PONG&&are.pong.hasSubscribers&&are.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};Zot.exports={ByteParser:GIe}});var ost=H((Hmi,ist)=>{"use strict";d();var{WebsocketFrameSend:Osr}=rre(),{opcodes:tst,sendHints:kN}=Ck(),Qsr=ibe(),rst=Buffer[Symbol.species],VIe=class{static{s(this,"SendQueue")}#e=new Qsr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==kN.blob){let o=nst(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=nst(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function nst(t,e){return new Osr(Usr(t,e)).createFrame(e===kN.string?tst.TEXT:tst.BINARY)}s(nst,"createFrame");function Usr(t,e){switch(e){case kN.string:return Buffer.from(t);case kN.arrayBuffer:case kN.blob:return new rst(t);case kN.typedArray:return new rst(t.buffer,t.byteOffset,t.byteLength)}}s(Usr,"toBuffer");ist.exports={SendQueue:VIe}});var mst=H((jmi,pst)=>{"use strict";d();var{webidl:Xn}=ed(),{URLSerializer:qsr}=R0(),{environmentSettingsObject:sst}=Wp(),{staticPropertyDescriptors:gw,states:RQ,sentCloseFrameState:Hsr,sendHints:cre}=Ck(),{kWebSocketURL:ast,kReadyState:zIe,kController:$sr,kBinaryType:lre,kResponse:cst,kSentClose:Wsr,kByteParser:jsr}=EQ(),{isConnecting:Gsr,isEstablished:Vsr,isClosing:zsr,isValidSubprotocol:Ysr,fireEvent:lst}=TQ(),{establishWebSocketConnection:Ksr,closeWebSocketConnection:ust}=$Ie(),{ByteParser:Jsr}=est(),{kEnumerableProperty:Hh,isBlobLike:dst}=qi(),{getGlobalDispatcher:Xsr}=bte(),{types:fst}=require("node:util"),{ErrorEvent:Zsr,CloseEvent:ear}=wN(),{SendQueue:tar}=ost(),Jp=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Xn.util.markAsUncloneable(this);let n="WebSocket constructor";Xn.argumentLengthCheck(arguments,1,n);let i=Xn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Xn.converters.USVString(e,n,"url"),r=i.protocols;let o=sst.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>Ysr(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[ast]=new URL(a.href);let c=sst.settingsObject;this[$sr]=Ksr(a,r,c,this,(l,u)=>this.#o(l,u),i),this[zIe]=t.CONNECTING,this[Wsr]=Hsr.NOT_SENT,this[lre]="blob"}close(e=void 0,r=void 0){Xn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Xn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Xn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");ust(this,e,r,i)}send(e){Xn.brandCheck(this,t);let r="WebSocket.send";if(Xn.argumentLengthCheck(arguments,1,r),e=Xn.converters.WebSocketSendData(e,r,"data"),Gsr(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Vsr(this)||zsr(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},cre.string)}else fst.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},cre.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},cre.typedArray)):dst(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},cre.blob))}get readyState(){return Xn.brandCheck(this,t),this[zIe]}get bufferedAmount(){return Xn.brandCheck(this,t),this.#t}get url(){return Xn.brandCheck(this,t),qsr(this[ast])}get extensions(){return Xn.brandCheck(this,t),this.#n}get protocol(){return Xn.brandCheck(this,t),this.#i}get onopen(){return Xn.brandCheck(this,t),this.#e.open}set onopen(e){Xn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Xn.brandCheck(this,t),this.#e.error}set onerror(e){Xn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Xn.brandCheck(this,t),this.#e.close}set onclose(e){Xn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Xn.brandCheck(this,t),this.#e.message}set onmessage(e){Xn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Xn.brandCheck(this,t),this[lre]}set binaryType(e){Xn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[lre]="blob":this[lre]=e}#o(e,r){this[cst]=e;let n=new Jsr(this,r);n.on("drain",rar),n.on("error",nar.bind(this)),e.socket.ws=this,this[jsr]=n,this.#r=new tar(e.socket),this[zIe]=RQ.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),lst("open",this)}};Jp.CONNECTING=Jp.prototype.CONNECTING=RQ.CONNECTING;Jp.OPEN=Jp.prototype.OPEN=RQ.OPEN;Jp.CLOSING=Jp.prototype.CLOSING=RQ.CLOSING;Jp.CLOSED=Jp.prototype.CLOSED=RQ.CLOSED;Object.defineProperties(Jp.prototype,{CONNECTING:gw,OPEN:gw,CLOSING:gw,CLOSED:gw,url:Hh,readyState:Hh,bufferedAmount:Hh,onopen:Hh,onerror:Hh,onclose:Hh,close:Hh,onmessage:Hh,binaryType:Hh,send:Hh,extensions:Hh,protocol:Hh,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Jp,{CONNECTING:gw,OPEN:gw,CLOSING:gw,CLOSED:gw});Xn.converters["sequence<DOMString>"]=Xn.sequenceConverter(Xn.converters.DOMString);Xn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Xn.util.Type(t)==="Object"&&Symbol.iterator in t?Xn.converters["sequence<DOMString>"](t):Xn.converters.DOMString(t,e,r)};Xn.converters.WebSocketInit=Xn.dictionaryConverter([{key:"protocols",converter:Xn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Xn.converters.any,defaultValue:s(()=>Xsr(),"defaultValue")},{key:"headers",converter:Xn.nullableConverter(Xn.converters.HeadersInit)}]);Xn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Xn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Xn.converters.WebSocketInit(t):{protocols:Xn.converters["DOMString or sequence<DOMString>"](t)}};Xn.converters.WebSocketSendData=function(t){if(Xn.util.Type(t)==="Object"){if(dst(t))return Xn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||fst.isArrayBuffer(t))return Xn.converters.BufferSource(t)}return Xn.converters.USVString(t)};function rar(){this.ws[cst].socket.resume()}s(rar,"onParserDrain");function nar(t){let e,r;t instanceof ear?(e=t.reason,r=t.code):e=t.message,lst("error",this,()=>new Zsr("error",{error:t,message:e})),ust(this,r)}s(nar,"onParserError");pst.exports={WebSocket:Jp}});var YIe=H((zmi,hst)=>{"use strict";d();function iar(t){return t.indexOf("\0")===-1}s(iar,"isValidLastEventId");function oar(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(oar,"isASCIINumber");function sar(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(sar,"delay");hst.exports={isValidLastEventId:iar,isASCIINumber:oar,delay:sar}});var Cst=H((Jmi,yst)=>{"use strict";d();var{Transform:aar}=require("node:stream"),{isASCIINumber:gst,isValidLastEventId:Ast}=YIe(),Yx=[239,187,191],KIe=10,ure=13,car=58,lar=32,JIe=class extends aar{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Yx[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]&&this.buffer[2]===Yx[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]&&this.buffer[2]===Yx[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===KIe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===KIe||this.buffer[this.pos]===ure){this.buffer[this.pos]===ure&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===KIe||this.buffer[this.pos]===ure){this.buffer[this.pos]===ure&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(car);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===lar&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":gst(o)&&(r[i]=o);break;case"id":Ast(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&gst(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&Ast(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};yst.exports={EventSourceStream:JIe}});var Sst=H((ehi,wst)=>{"use strict";d();var{pipeline:uar}=require("node:stream"),{fetching:dar}=yQ(),{makeRequest:far}=vN(),{webidl:Kx}=ed(),{EventSourceStream:par}=Cst(),{parseMIMEType:mar}=R0(),{createFastMessageEvent:har}=wN(),{isNetworkError:vst}=gQ(),{delay:gar}=YIe(),{kEnumerableProperty:vk}=qi(),{environmentSettingsObject:xst}=Wp(),Est=!1,bst=3e3,kQ=0,Ist=1,PQ=2,Aar="anonymous",yar="use-credentials",PN=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=kQ;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),Kx.util.markAsUncloneable(this);let n="EventSource constructor";Kx.argumentLengthCheck(arguments,1,n),Est||(Est=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=Kx.converters.USVString(e,n,"url"),r=Kx.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:bst};let i=xst,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=Aar;r.withCredentials&&(a=yar,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=xst.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=far(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===PQ)return;this.#n=kQ;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{vst(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(vst(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?mar(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=Ist,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new par({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(har(l.type,l.options))},"push")});uar(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=dar(e)}async#l(){this.#n!==PQ&&(this.#n=kQ,this.dispatchEvent(new Event("error")),await gar(this.#a.reconnectionTime),this.#n===kQ&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){Kx.brandCheck(this,t),this.#n!==PQ&&(this.#n=PQ,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Tst={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:kQ,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:Ist,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:PQ,writable:!1}};Object.defineProperties(PN,Tst);Object.defineProperties(PN.prototype,Tst);Object.defineProperties(PN.prototype,{close:vk,onerror:vk,onmessage:vk,onopen:vk,readyState:vk,url:vk,withCredentials:vk});Kx.converters.EventSourceInitDict=Kx.dictionaryConverter([{key:"withCredentials",converter:Kx.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:Kx.converters.any}]);wst.exports={EventSource:PN,defaultReconnectionTime:bst}});var Pst=H((nhi,Hn)=>{"use strict";d();var Car=tQ(),_st=B7(),xar=aN(),Ear=Mtt(),bar=cN(),Iar=Ebe(),Tar=Xtt(),war=irt(),Rst=Yo(),fre=qi(),{InvalidArgumentError:dre}=Rst,DN=Wrt(),Sar=M7(),_ar=nIe(),Rar=Tnt(),kar=sIe(),Par=Wbe(),Dar=pte(),{getGlobalDispatcher:kst,setGlobalDispatcher:Bar}=bte(),Nar=Ite(),Mar=tte(),Lar=rte();Object.assign(_st.prototype,DN);Hn.exports.Dispatcher=_st;Hn.exports.Client=Car;Hn.exports.Pool=xar;Hn.exports.BalancedPool=Ear;Hn.exports.Agent=bar;Hn.exports.ProxyAgent=Iar;Hn.exports.EnvHttpProxyAgent=Tar;Hn.exports.RetryAgent=war;Hn.exports.RetryHandler=Dar;Hn.exports.DecoratorHandler=Nar;Hn.exports.RedirectHandler=Mar;Hn.exports.createRedirectInterceptor=Lar;Hn.exports.interceptors={redirect:Dnt(),retry:Nnt(),dump:Lnt(),dns:Qnt()};Hn.exports.buildConnector=Sar;Hn.exports.errors=Rst;Hn.exports.util={parseHeaders:fre.parseHeaders,headerNameToString:fre.headerNameToString};function DQ(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new dre("invalid url");if(r!=null&&typeof r!="object")throw new dre("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new dre("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(fre.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=fre.parseURL(e);let{agent:i,dispatcher:o=kst()}=r;if(i)throw new dre("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(DQ,"makeDispatcher");Hn.exports.setGlobalDispatcher=Bar;Hn.exports.getGlobalDispatcher=kst;var Far=yQ().fetch;Hn.exports.fetch=s(async function(e,r=void 0){try{return await Far(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Hn.exports.Headers=pk().Headers;Hn.exports.Response=gQ().Response;Hn.exports.Request=vN().Request;Hn.exports.FormData=H7().FormData;Hn.exports.File=globalThis.File??require("node:buffer").File;Hn.exports.FileReader=Zit().FileReader;var{setGlobalOrigin:Oar,getGlobalOrigin:Qar}=bEe();Hn.exports.setGlobalOrigin=Oar;Hn.exports.getGlobalOrigin=Qar;var{CacheStorage:Uar}=cot(),{kConstruct:qar}=jte();Hn.exports.caches=new Uar(qar);var{deleteCookie:Har,getCookies:$ar,getSetCookies:War,setCookie:jar}=vot();Hn.exports.deleteCookie=Har;Hn.exports.getCookies=$ar;Hn.exports.getSetCookies=War;Hn.exports.setCookie=jar;var{parseMIMEType:Gar,serializeAMimeType:Var}=R0();Hn.exports.parseMIMEType=Gar;Hn.exports.serializeAMimeType=Var;var{CloseEvent:zar,ErrorEvent:Yar,MessageEvent:Kar}=wN();Hn.exports.WebSocket=mst().WebSocket;Hn.exports.CloseEvent=zar;Hn.exports.ErrorEvent=Yar;Hn.exports.MessageEvent=Kar;Hn.exports.request=DQ(DN.request);Hn.exports.stream=DQ(DN.stream);Hn.exports.pipeline=DQ(DN.pipeline);Hn.exports.connect=DQ(DN.connect);Hn.exports.upgrade=DQ(DN.upgrade);Hn.exports.MockClient=_ar;Hn.exports.MockPool=kar;Hn.exports.MockAgent=Rar;Hn.exports.mockErrors=Par;var{EventSource:Jar}=Sst();Hn.exports.EventSource=Jar});var _i=H((shi,Dst)=>{d();Dst.exports={options:{usePureJavaScript:!1}}});var Mst=H((chi,Nst)=>{d();var XIe={};Nst.exports=XIe;var Bst={};XIe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Xar(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};XIe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Bst[e];if(!r){r=Bst[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function Xar(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(Xar,"_encodeWithByteBuffer")});var qo=H((dhi,Qst)=>{d();var Lst=_i(),Fst=Mst(),Me=Qst.exports=Lst.util=Lst.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Me.nextTick=process.nextTick,typeof setImmediate=="function"?Me.setImmediate=setImmediate:Me.setImmediate=Me.nextTick;return}if(typeof setImmediate=="function"){Me.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Me.nextTick=function(c){return setImmediate(c)};return}if(Me.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Me.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Me.setImmediate;Me.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Me.nextTick=Me.setImmediate})();Me.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Me.globalScope=function(){return Me.isNodejs?global:typeof self>"u"?window:self}();Me.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Me.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Me.isArrayBufferView=function(t){return t&&Me.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function BQ(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(BQ,"_checkBitsParam");Me.ByteBuffer=ZIe;function ZIe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Me.isArrayBuffer(t)||Me.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof ZIe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(ZIe,"ByteStringBuffer");Me.ByteStringBuffer=ZIe;var Zar=4096;Me.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Zar&&(this.data.substr(0,1),this._constructedStringLength=0)};Me.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Me.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Me.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Me.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Me.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Me.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Me.encodeUtf8(t))};Me.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Me.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Me.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Me.ByteStringBuffer.prototype.putInt=function(t,e){BQ(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Me.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Me.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Me.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Me.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Me.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Me.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Me.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Me.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Me.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Me.ByteStringBuffer.prototype.getInt=function(t){BQ(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Me.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Me.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Me.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Me.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Me.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Me.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Me.ByteStringBuffer.prototype.copy=function(){var t=Me.createBuffer(this.data);return t.read=this.read,t};Me.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Me.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Me.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Me.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Me.ByteStringBuffer.prototype.toString=function(){return Me.decodeUtf8(this.bytes())};function ecr(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Me.isArrayBuffer(t),n=Me.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(ecr,"DataBuffer");Me.DataBuffer=ecr;Me.DataBuffer.prototype.length=function(){return this.write-this.read};Me.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Me.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Me.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Me.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Me.DataBuffer.prototype.putBytes=function(t,e){if(Me.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Me.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Me.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Me.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Me.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Me.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Me.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Me.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Me.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Me.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Me.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Me.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Me.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Me.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Me.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Me.DataBuffer.prototype.putInt=function(t,e){BQ(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Me.DataBuffer.prototype.putSignedInt=function(t,e){return BQ(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Me.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Me.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Me.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Me.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Me.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Me.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Me.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Me.DataBuffer.prototype.getInt=function(t){BQ(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Me.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Me.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Me.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Me.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Me.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Me.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Me.DataBuffer.prototype.copy=function(){return new Me.DataBuffer(this)};Me.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Me.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Me.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Me.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Me.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Me.binary.raw.encode(e);if(t==="hex")return Me.binary.hex.encode(e);if(t==="base64")return Me.binary.base64.encode(e);if(t==="utf8")return Me.text.utf8.decode(e);if(t==="utf16")return Me.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Me.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Me.encodeUtf8(t)),new Me.ByteBuffer(t)};Me.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Me.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Me.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Me.bytesToHex=function(t){return Me.createBuffer(t).toHex()};Me.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yw=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Ost="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Me.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=Aw.charAt(i>>2),r+=Aw.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Aw.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Aw.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Me.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=yw[t.charCodeAt(a++)-43],n=yw[t.charCodeAt(a++)-43],i=yw[t.charCodeAt(a++)-43],o=yw[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Me.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Me.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Me.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Fst.encode,decode:Fst.decode}};Me.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Me.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Me.binary.hex.encode=Me.bytesToHex;Me.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Me.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=Aw.charAt(i>>2),r+=Aw.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Aw.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Aw.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Me.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=yw[t.charCodeAt(l++)-43],o=yw[t.charCodeAt(l++)-43],a=yw[t.charCodeAt(l++)-43],c=yw[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Me.binary.base58.encode=function(t,e){return Me.binary.baseN.encode(t,Ost,e)};Me.binary.base58.decode=function(t,e){return Me.binary.baseN.decode(t,Ost,e)};Me.text={utf8:{},utf16:{}};Me.text.utf8.encode=function(t,e,r){t=Me.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Me.text.utf8.decode=function(t){return Me.decodeUtf8(String.fromCharCode.apply(null,t))};Me.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Me.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Me.deflate=function(t,e,r){if(e=Me.decode64(t.deflate(Me.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Me.inflate=function(t,e,r){var n=t.inflate(Me.encode64(e)).rval;return n===null?null:Me.decode64(n)};var eTe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Me.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),tTe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Me.decode64(r))),r},"_getStorageObject"),tcr=s(function(t,e,r,n){var i=tTe(t,e);i===null&&(i={}),i[r]=n,eTe(t,e,i)},"_setItem"),rcr=s(function(t,e,r){var n=tTe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),ncr=s(function(t,e,r){var n=tTe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),eTe(t,e,n)}},"_removeItem"),icr=s(function(t,e){eTe(t,e,null)},"_clearItems"),pre=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Me.setItem=function(t,e,r,n,i){pre(tcr,arguments,i)};Me.getItem=function(t,e,r,n){return pre(rcr,arguments,n)};Me.removeItem=function(t,e,r,n){pre(ncr,arguments,n)};Me.clearItems=function(t,e,r){pre(icr,arguments,r)};Me.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Me.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Me.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Me.formatSize=function(t){return t>=1073741824?t=Me.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Me.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Me.formatNumber(t/1024,0)+" KiB":t=Me.formatNumber(t,0)+" bytes",t};Me.bytesFromIP=function(t){return t.indexOf(".")!==-1?Me.bytesFromIPv4(t):t.indexOf(":")!==-1?Me.bytesFromIPv6(t):null};Me.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Me.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Me.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Me.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Me.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Me.bytesToIP=function(t){return t.length===4?Me.bytesToIPv4(t):t.length===16?Me.bytesToIPv6(t):null};Me.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Me.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Me.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Me.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Me&&!t.update)return e(null,Me.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Me.cores=navigator.hardwareConcurrency,e(null,Me.cores);if(typeof Worker>"u")return Me.cores=1,e(null,Me.cores);if(typeof Blob>"u")return Me.cores=2,e(null,Me.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Me.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Me.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(f.st>h.st&&f.st<h.et||h.st>f.st&&h.st<f.et)&&p.push(m)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}s(o,"reduce")}});var mre=H((mhi,Ust)=>{d();var pu=_i();qo();Ust.exports=pu.cipher=pu.cipher||{};pu.cipher.algorithms=pu.cipher.algorithms||{};pu.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=pu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new pu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};pu.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=pu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new pu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};pu.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),pu.cipher.algorithms[t]=e};pu.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in pu.cipher.algorithms?pu.cipher.algorithms[t]:null};var rTe=pu.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};rTe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=pu.util.createBuffer(),this.output=t.output||pu.util.createBuffer(),this.mode.start(e)};rTe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};rTe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var iTe=H((ghi,qst)=>{d();var mu=_i();qo();mu.cipher=mu.cipher||{};var Ki=qst.exports=mu.cipher.modes=mu.cipher.modes||{};Ki.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ki.ecb.prototype.start=function(t){};Ki.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Ki.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Ki.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Ki.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Ki.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ki.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=hre(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Ki.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Ki.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Ki.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Ki.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Ki.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=mu.util.createBuffer(),this._partialBytes=0};Ki.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ki.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ki.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ki.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=mu.util.createBuffer(),this._partialBytes=0};Ki.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ki.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ki.ofb.prototype.decrypt=Ki.ofb.prototype.encrypt;Ki.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=mu.util.createBuffer(),this._partialBytes=0};Ki.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ki.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}gre(this._inBlock)};Ki.ctr.prototype.decrypt=Ki.ctr.prototype.encrypt;Ki.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=mu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Ki.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=mu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=mu.util.createBuffer(t.additionalData):r=mu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=mu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(nTe(n*8)))}this._inBlock=this._j0.slice(0),gre(this._inBlock),this._partialBytes=0,r=mu.util.createBuffer(r),this._aDataLength=nTe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Ki.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),gre(this._inBlock)};Ki.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),gre(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Ki.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=mu.util.createBuffer();var n=this._aDataLength.concat(nTe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Ki.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Ki.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Ki.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Ki.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Ki.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};Ki.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function hre(t,e){if(typeof t=="string"&&(t=mu.util.createBuffer(t)),mu.util.isArray(t)&&t.length>4){var r=t;t=mu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!mu.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(hre,"transformIV");function gre(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(gre,"inc32");function nTe(t){return[t/4294967296|0,t&4294967295]}s(nTe,"from64To32")});var Cw=H((Chi,jst)=>{d();var qs=_i();mre();iTe();qo();jst.exports=qs.aes=qs.aes||{};qs.aes.startEncrypting=function(t,e,r,n){var i=Are({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};qs.aes.createEncryptionCipher=function(t,e){return Are({key:t,output:null,decrypt:!1,mode:e})};qs.aes.startDecrypting=function(t,e,r,n){var i=Are({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};qs.aes.createDecryptionCipher=function(t,e){return Are({key:t,output:null,decrypt:!0,mode:e})};qs.aes.Algorithm=function(t,e){aTe||$st();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return sTe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return sTe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};qs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=qs.util.createBuffer(e);else if(qs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=qs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!qs.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!qs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Wst(e,t.decrypt&&!a),this._init=!0}};qs.aes._expandKey=function(t,e){return aTe||$st(),Wst(t,e)};qs.aes._updateBlock=sTe;NN("AES-ECB",qs.cipher.modes.ecb);NN("AES-CBC",qs.cipher.modes.cbc);NN("AES-CFB",qs.cipher.modes.cfb);NN("AES-OFB",qs.cipher.modes.ofb);NN("AES-CTR",qs.cipher.modes.ctr);NN("AES-GCM",qs.cipher.modes.gcm);function NN(t,e){var r=s(function(){return new qs.aes.Algorithm(t,e)},"factory");qs.cipher.registerAlgorithm(t,r)}s(NN,"registerAlgorithm");var aTe=!1,BN=4,Bf,oTe,Hst,xk,GA;function $st(){aTe=!0,Hst=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Bf=new Array(256),oTe=new Array(256),xk=new Array(4),GA=new Array(4);for(var e=0;e<4;++e)xk[e]=new Array(256),GA[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,Bf[r]=c,oTe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)xk[p][r]=u,GA[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s($st,"initialize");function Wst(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=BN*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=Bf[n>>>16&255]<<24^Bf[n>>>8&255]<<16^Bf[n&255]<<8^Bf[n>>>24]^Hst[i]<<24,i++):o>6&&l%o===4&&(n=Bf[n>>>24]<<24^Bf[n>>>16&255]<<16^Bf[n>>>8&255]<<8^Bf[n&255]),r[l]=r[l-o]^n;if(e){var u,f=GA[0],p=GA[1],m=GA[2],h=GA[3],g=r.slice(0);c=r.length;for(var l=0,A=c-BN;l<c;l+=BN,A-=BN)if(l===0||l===c-BN)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var y=0;y<BN;++y)u=r[A+y],g[l+(3&-y)]=f[Bf[u>>>24]]^p[Bf[u>>>16&255]]^m[Bf[u>>>8&255]]^h[Bf[u&255]];r=g}return r}s(Wst,"_expandKey");function sTe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=GA[0],a=GA[1],c=GA[2],l=GA[3],u=oTe):(o=xk[0],a=xk[1],c=xk[2],l=xk[3],u=Bf);var f,p,m,h,g,A,y;f=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var E=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++E],A=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[f&255]^t[++E],y=o[m>>>24]^a[h>>>16&255]^c[f>>>8&255]^l[p&255]^t[++E],h=o[h>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[m&255]^t[++E],f=g,p=A,m=y;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++E],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^t[++E],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++E],r[n?1:3]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++E]}s(sTe,"_updateBlock");function Are(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=qs.cipher.createDecipher(r,t.key):n=qs.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof qs.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(Are,"_createCipher")});var vw=H((Ehi,Gst)=>{d();var NQ=_i();NQ.pki=NQ.pki||{};var cTe=Gst.exports=NQ.pki.oids=NQ.oids=NQ.oids||{};function Lt(t,e){cTe[t]=e,cTe[e]=t}s(Lt,"_IN");function ns(t,e){cTe[t]=e}s(ns,"_I_");Lt("1.2.840.113549.1.1.1","rsaEncryption");Lt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Lt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Lt("1.2.840.113549.1.1.7","RSAES-OAEP");Lt("1.2.840.113549.1.1.8","mgf1");Lt("1.2.840.113549.1.1.9","pSpecified");Lt("1.2.840.113549.1.1.10","RSASSA-PSS");Lt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Lt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Lt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Lt("1.3.101.112","EdDSA25519");Lt("1.2.840.10040.4.3","dsa-with-sha1");Lt("1.3.14.3.2.7","desCBC");Lt("1.3.14.3.2.26","sha1");Lt("1.3.14.3.2.29","sha1WithRSASignature");Lt("2.16.840.1.101.3.4.2.1","sha256");Lt("2.16.840.1.101.3.4.2.2","sha384");Lt("2.16.840.1.101.3.4.2.3","sha512");Lt("2.16.840.1.101.3.4.2.4","sha224");Lt("2.16.840.1.101.3.4.2.5","sha512-224");Lt("2.16.840.1.101.3.4.2.6","sha512-256");Lt("1.2.840.113549.2.2","md2");Lt("1.2.840.113549.2.5","md5");Lt("1.2.840.113549.1.7.1","data");Lt("1.2.840.113549.1.7.2","signedData");Lt("1.2.840.113549.1.7.3","envelopedData");Lt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Lt("1.2.840.113549.1.7.5","digestedData");Lt("1.2.840.113549.1.7.6","encryptedData");Lt("1.2.840.113549.1.9.1","emailAddress");Lt("1.2.840.113549.1.9.2","unstructuredName");Lt("1.2.840.113549.1.9.3","contentType");Lt("1.2.840.113549.1.9.4","messageDigest");Lt("1.2.840.113549.1.9.5","signingTime");Lt("1.2.840.113549.1.9.6","counterSignature");Lt("1.2.840.113549.1.9.7","challengePassword");Lt("1.2.840.113549.1.9.8","unstructuredAddress");Lt("1.2.840.113549.1.9.14","extensionRequest");Lt("1.2.840.113549.1.9.20","friendlyName");Lt("1.2.840.113549.1.9.21","localKeyId");Lt("1.2.840.113549.1.9.22.1","x509Certificate");Lt("1.2.840.113549.1.12.10.1.1","keyBag");Lt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Lt("1.2.840.113549.1.12.10.1.3","certBag");Lt("1.2.840.113549.1.12.10.1.4","crlBag");Lt("1.2.840.113549.1.12.10.1.5","secretBag");Lt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Lt("1.2.840.113549.1.5.13","pkcs5PBES2");Lt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Lt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Lt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Lt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Lt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Lt("1.2.840.113549.2.7","hmacWithSHA1");Lt("1.2.840.113549.2.8","hmacWithSHA224");Lt("1.2.840.113549.2.9","hmacWithSHA256");Lt("1.2.840.113549.2.10","hmacWithSHA384");Lt("1.2.840.113549.2.11","hmacWithSHA512");Lt("1.2.840.113549.3.7","des-EDE3-CBC");Lt("2.16.840.1.101.3.4.1.2","aes128-CBC");Lt("2.16.840.1.101.3.4.1.22","aes192-CBC");Lt("2.16.840.1.101.3.4.1.42","aes256-CBC");Lt("2.5.4.3","commonName");Lt("2.5.4.4","surname");Lt("2.5.4.5","serialNumber");Lt("2.5.4.6","countryName");Lt("2.5.4.7","localityName");Lt("2.5.4.8","stateOrProvinceName");Lt("2.5.4.9","streetAddress");Lt("2.5.4.10","organizationName");Lt("2.5.4.11","organizationalUnitName");Lt("2.5.4.12","title");Lt("2.5.4.13","description");Lt("2.5.4.15","businessCategory");Lt("2.5.4.17","postalCode");Lt("2.5.4.42","givenName");Lt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Lt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Lt("2.16.840.1.113730.1.1","nsCertType");Lt("2.16.840.1.113730.1.13","nsComment");ns("2.5.29.1","authorityKeyIdentifier");ns("2.5.29.2","keyAttributes");ns("2.5.29.3","certificatePolicies");ns("2.5.29.4","keyUsageRestriction");ns("2.5.29.5","policyMapping");ns("2.5.29.6","subtreesConstraint");ns("2.5.29.7","subjectAltName");ns("2.5.29.8","issuerAltName");ns("2.5.29.9","subjectDirectoryAttributes");ns("2.5.29.10","basicConstraints");ns("2.5.29.11","nameConstraints");ns("2.5.29.12","policyConstraints");ns("2.5.29.13","basicConstraints");Lt("2.5.29.14","subjectKeyIdentifier");Lt("2.5.29.15","keyUsage");ns("2.5.29.16","privateKeyUsagePeriod");Lt("2.5.29.17","subjectAltName");Lt("2.5.29.18","issuerAltName");Lt("2.5.29.19","basicConstraints");ns("2.5.29.20","cRLNumber");ns("2.5.29.21","cRLReason");ns("2.5.29.22","expirationDate");ns("2.5.29.23","instructionCode");ns("2.5.29.24","invalidityDate");ns("2.5.29.25","cRLDistributionPoints");ns("2.5.29.26","issuingDistributionPoint");ns("2.5.29.27","deltaCRLIndicator");ns("2.5.29.28","issuingDistributionPoint");ns("2.5.29.29","certificateIssuer");ns("2.5.29.30","nameConstraints");Lt("2.5.29.31","cRLDistributionPoints");Lt("2.5.29.32","certificatePolicies");ns("2.5.29.33","policyMappings");ns("2.5.29.34","policyConstraints");Lt("2.5.29.35","authorityKeyIdentifier");ns("2.5.29.36","policyConstraints");Lt("2.5.29.37","extKeyUsage");ns("2.5.29.46","freshestCRL");ns("2.5.29.54","inhibitAnyPolicy");Lt("1.3.6.1.4.1.11129.2.4.2","timestampList");Lt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Lt("1.3.6.1.5.5.7.3.1","serverAuth");Lt("1.3.6.1.5.5.7.3.2","clientAuth");Lt("1.3.6.1.5.5.7.3.3","codeSigning");Lt("1.3.6.1.5.5.7.3.4","emailProtection");Lt("1.3.6.1.5.5.7.3.8","timeStamping")});var VA=H((Thi,zst)=>{d();var ca=_i();qo();vw();var hr=zst.exports=ca.asn1=ca.asn1||{};hr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};hr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};hr.create=function(t,e,r,n,i){if(ca.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||ca.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=hr.copy(c)),c};hr.copy=function(t,e){var r;if(ca.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(hr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:hr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};hr.equals=function(t,e,r){if(ca.util.isArray(t)){if(!ca.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!hr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&hr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};hr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function MQ(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(MQ,"_checkBufferLength");var ocr=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;MQ(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");hr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=ca.util.createBuffer(t));var r=t.length(),n=yre(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function yre(t,e,r,n){var i;MQ(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=ocr(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,m=(o&32)===32;if(m)if(f=[],l===void 0)for(;;){if(MQ(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(yre(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(yre(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===hr.Class.UNIVERSAL&&c===hr.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===hr.Class.UNIVERSAL&&c===hr.Type.BITSTRING&&l>1){var h=t.read,g=e,A=0;if(c===hr.Type.BITSTRING&&(MQ(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},E=yre(t,e,r+1,y),b=i-t.length();e-=b,c==hr.Type.BITSTRING&&b++;var S=E.tagClass;b===l&&(S===hr.Class.UNIVERSAL||S===hr.Class.CONTEXT_SPECIFIC)&&(f=[E])}catch{}f===void 0&&(t.read=h,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===hr.Type.BMPSTRING)for(f="";l>0;l-=2)MQ(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var R=p===void 0?null:{bitStringContents:p};return hr.create(a,c,m,f,R)}s(yre,"_fromDer");hr.toDer=function(t){var e=ca.util.createBuffer(),r=t.tagClass|t.type,n=ca.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=hr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(hr.toDer(t.value[o]))}else if(t.type===hr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===hr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};hr.oidToDer=function(t){var e=t.split("."),r=ca.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};hr.derToOid=function(t){var e;typeof t=="string"&&(t=ca.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};hr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=f*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};hr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};hr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};hr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};hr.integerToDer=function(t){var e=ca.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};hr.derToInteger=function(t){typeof t=="string"&&(t=ca.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};hr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&ca.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=hr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Vst=/[^\\u0000-\\u00ff]/;hr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case hr.Class.UNIVERSAL:n+="Universal:";break;case hr.Class.APPLICATION:n+="Application:";break;case hr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case hr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===hr.Class.UNIVERSAL)switch(n+=t.type,t.type){case hr.Type.NONE:n+=" (None)";break;case hr.Type.BOOLEAN:n+=" (Boolean)";break;case hr.Type.INTEGER:n+=" (Integer)";break;case hr.Type.BITSTRING:n+=" (Bit string)";break;case hr.Type.OCTETSTRING:n+=" (Octet string)";break;case hr.Type.NULL:n+=" (Null)";break;case hr.Type.OID:n+=" (Object Identifier)";break;case hr.Type.ODESC:n+=" (Object Descriptor)";break;case hr.Type.EXTERNAL:n+=" (External or Instance of)";break;case hr.Type.REAL:n+=" (Real)";break;case hr.Type.ENUMERATED:n+=" (Enumerated)";break;case hr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case hr.Type.UTF8:n+=" (UTF8)";break;case hr.Type.ROID:n+=" (Relative Object Identifier)";break;case hr.Type.SEQUENCE:n+=" (Sequence)";break;case hr.Type.SET:n+=" (Set)";break;case hr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case hr.Type.IA5String:n+=" (IA5String (ASCII))";break;case hr.Type.UTCTIME:n+=" (UTC time)";break;case hr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case hr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=hr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===hr.Type.OID){var l=hr.derToOid(t.value);n+=l,ca.pki&&ca.pki.oids&&l in ca.pki.oids&&(n+=" ("+ca.pki.oids[l]+") ")}if(t.type===hr.Type.INTEGER)try{n+=hr.derToInteger(t.value)}catch{n+="0x"+ca.util.bytesToHex(t.value)}else if(t.type===hr.Type.BITSTRING){if(t.value.length>1?n+="0x"+ca.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===hr.Type.OCTETSTRING)Vst.test(t.value)||(n+="("+t.value+") "),n+="0x"+ca.util.bytesToHex(t.value);else if(t.type===hr.Type.UTF8)try{n+=ca.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+ca.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===hr.Type.PRINTABLESTRING||t.type===hr.Type.IA5String?n+=t.value:Vst.test(t.value)?n+="0x"+ca.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var s1=H((_hi,Yst)=>{d();var Cre=_i();Yst.exports=Cre.md=Cre.md||{};Cre.md.algorithms=Cre.md.algorithms||{}});var MN=H((khi,Kst)=>{d();var Jx=_i();s1();qo();var scr=Kst.exports=Jx.hmac=Jx.hmac||{};scr.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Jx.md.algorithms)e=Jx.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=Jx.util.createBuffer(a);else if(Jx.util.isArray(a)){var c=a;a=Jx.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=Jx.util.createBuffer(),n=Jx.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var xre=H((Dhi,eat)=>{d();var a1=_i();s1();qo();var Xst=eat.exports=a1.md5=a1.md5||{};a1.md.md5=a1.md.algorithms.md5=Xst;Xst.create=function(){Zst||acr();var t=null,e=a1.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=a1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=a1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Jst(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=a1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(lTe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};Jst(f,r,i);var p=a1.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var lTe=null,vre=null,LQ=null,LN=null,Zst=!1;function acr(){lTe="\x80",lTe+=a1.util.fillString("\0",64),vre=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],LQ=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],LN=new Array(64);for(var t=0;t<64;++t)LN[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);Zst=!0}s(acr,"_init");function Jst(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+LN[f]+e[f],u=LQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+LN[f]+e[vre[f]],u=LQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+LN[f]+e[vre[f]],u=LQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+LN[f]+e[vre[f]],u=LQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(Jst,"_update")});var Ek=H((Mhi,rat)=>{d();var bre=_i();qo();var tat=rat.exports=bre.pem=bre.pem||{};tat.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Ere(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Ere(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Ere(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Ere(t.headers[i]);return t.procType&&(r+=`\r
`),r+=bre.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};tat.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:bre.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;f+=m,u=p}if(o=f.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),A=0;A<g.length;++A)h.values.push(ccr(g[A]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Ere(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(Ere,"foldHeader");function ccr(t){return t.replace(/^\s+/,"")}s(ccr,"ltrim")});var FQ=H((Ohi,iat)=>{d();var ka=_i();mre();iTe();qo();iat.exports=ka.des=ka.des||{};ka.des.startEncrypting=function(t,e,r,n){var i=Ire({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ka.des.createEncryptionCipher=function(t,e){return Ire({key:t,output:null,decrypt:!1,mode:e})};ka.des.startDecrypting=function(t,e,r,n){var i=Ire({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ka.des.createDecryptionCipher=function(t,e){return Ire({key:t,output:null,decrypt:!0,mode:e})};ka.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return nat(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return nat(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};ka.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ka.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Acr(e),this._init=!0}};c1("DES-ECB",ka.cipher.modes.ecb);c1("DES-CBC",ka.cipher.modes.cbc);c1("DES-CFB",ka.cipher.modes.cfb);c1("DES-OFB",ka.cipher.modes.ofb);c1("DES-CTR",ka.cipher.modes.ctr);c1("3DES-ECB",ka.cipher.modes.ecb);c1("3DES-CBC",ka.cipher.modes.cbc);c1("3DES-CFB",ka.cipher.modes.cfb);c1("3DES-OFB",ka.cipher.modes.ofb);c1("3DES-CTR",ka.cipher.modes.ctr);function c1(t,e){var r=s(function(){return new ka.des.Algorithm(t,e)},"factory");ka.cipher.registerAlgorithm(t,r)}s(c1,"registerAlgorithm");var lcr=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ucr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],dcr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],fcr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],pcr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],mcr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],hcr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],gcr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Acr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,y=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,S,R=0;R<A;R++){var B=t.getInt32(),L=t.getInt32();S=(B>>>4^L)&252645135,L^=S,B^=S<<4,S=(L>>>-16^B)&65535,B^=S,L^=S<<-16,S=(B>>>2^L)&858993459,L^=S,B^=S<<2,S=(L>>>-16^B)&65535,B^=S,L^=S<<-16,S=(B>>>1^L)&1431655765,L^=S,B^=S<<1,S=(L>>>8^B)&16711935,B^=S,L^=S<<8,S=(B>>>1^L)&1431655765,L^=S,B^=S<<1,S=B<<8|L>>>20&240,B=L<<24|L<<8&16711680|L>>>8&65280|L>>>24&240,L=S;for(var O=0;O<E.length;++O){E[O]?(B=B<<2|B>>>26,L=L<<2|L>>>26):(B=B<<1|B>>>27,L=L<<1|L>>>27),B&=-15,L&=-15;var K=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|c[B>>>4&15],V=l[L>>>28]|u[L>>>24&15]|f[L>>>20&15]|p[L>>>16&15]|m[L>>>12&15]|h[L>>>8&15]|g[L>>>4&15];S=(V>>>16^K)&65535,y[b++]=K^S,y[b++]=V^S<<16}}return y}s(Acr,"_createKeys");function nat(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],m=o[u];m!=f;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(ucr[h>>>24&63]|fcr[h>>>16&63]|mcr[h>>>8&63]|gcr[h&63]|lcr[g>>>24&63]|dcr[g>>>16&63]|pcr[g>>>8&63]|hcr[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(nat,"_updateBlock");function Ire(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ka.cipher.createDecipher(r,t.key):n=ka.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof ka.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(Ire,"_createCipher")});var Tre=H((qhi,oat)=>{d();var Nf=_i();MN();s1();qo();var ycr=Nf.pkcs5=Nf.pkcs5||{},Xx;Nf.util.isNodejs&&!Nf.options.usePureJavaScript&&(Xx=require("crypto"));oat.exports=Nf.pbkdf2=ycr.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Nf.util.isNodejs&&!Nf.options.usePureJavaScript&&Xx.pbkdf2&&(i===null||typeof i!="object")&&(Xx.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Xx.pbkdf2Sync.length===4?Xx.pbkdf2(t,e,r,n,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):Xx.pbkdf2(t,e,r,n,i,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):Xx.pbkdf2Sync.length===4?Xx.pbkdf2Sync(t,e,r,n).toString("binary"):Xx.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Nf.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Nf.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=Nf.hmac.create();f.start(i,t);var p="",m,h,g;if(!o){for(var A=1;A<=l;++A){f.start(null,null),f.update(e),f.update(Nf.util.int32ToBytes(A)),m=g=f.digest().getBytes();for(var y=2;y<=r;++y)f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Nf.util.xorBytes(m,h,a),g=h;p+=A<l?m:m.substr(0,u)}return p}var A=1,y;function E(){if(A>l)return o(null,p);f.start(null,null),f.update(e),f.update(Nf.util.int32ToBytes(A)),m=g=f.digest().getBytes(),y=2,b()}s(E,"outer");function b(){if(y<=r)return f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Nf.util.xorBytes(m,h,a),g=h,++y,Nf.util.setImmediate(b);p+=A<l?m:m.substr(0,u),++A,E()}s(b,"inner"),E()}});var dTe=H((Whi,uat)=>{d();var l1=_i();s1();qo();var aat=uat.exports=l1.sha256=l1.sha256||{};l1.md.sha256=l1.md.algorithms.sha256=aat;aat.create=function(){cat||Ccr();var t=null,e=l1.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=l1.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=l1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),sat(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=l1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(uTe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};sat(p,r,i);var m=l1.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var uTe=null,cat=!1,lat=null;function Ccr(){uTe="\x80",uTe+=l1.util.fillString("\0",64),lat=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],cat=!0}s(Ccr,"_init");function sat(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,A,y,E,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,A=t.h5,y=t.h6,E=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=y^g&(A^y),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|m&(f^p),n=E+a+c+lat[u]+e[u],i=o+l,E=y,y=A,A=g,g=h+n>>>0,h=m,m=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+A|0,t.h6=t.h6+y|0,t.h7=t.h7+E|0,b-=64}}s(sat,"_update")});var fTe=H((Vhi,dat)=>{d();var u1=_i();qo();var wre=null;u1.util.isNodejs&&!u1.options.usePureJavaScript&&!process.versions["node-webkit"]&&(wre=require("crypto"));var vcr=dat.exports=u1.prng=u1.prng||{};vcr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,A=u1.util.createBuffer();e.key=null,y();function y(E){if(E)return f(E);if(A.length()>=u)return f(null,A.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return u1.util.nextTick(function(){o(y)});var b=p(e.key,e.seed);e.generated+=b.length,A.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),u1.util.setImmediate(y)}s(y,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=u1.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var A=f(e.key,e.seed);e.generated+=A.length,g.putBytes(A),e.key=m(f(e.key,p(e.seed))),e.seed=h(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var f=null,p=u1.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(f=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=u1.util.createBuffer();if(f)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{f(A);for(var y=0;y<A.length;++y)h.putInt32(A[y])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var E,b,S,R=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(R&65535),E=16807*(R>>16),b+=(E&32767)<<16,b+=E>>15,b=(b&2147483647)+(b>>31),R=b&4294967295;for(var y=0;y<3;++y)S=R>>>(y<<3),S^=Math.floor(Math.random()*256),h.putByte(S&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),wre?(e.seedFile=function(u,f){wre.randomBytes(u,function(p,m){if(p)return f(p);f(null,m.toString())})},e.seedFileSync=function(u){return wre.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",m=0;m<f;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",h),m(A.forge.prng.err,A.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var $h=H((Khi,pTe)=>{d();var hu=_i();Cw();dTe();fTe();qo();(function(){if(hu.random&&hu.random.getBytes){pTe.exports=hu.random;return}(function(t){var e={},r=new Array(4),n=hu.util.createBuffer();e.formatKey=function(p){var m=hu.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),hu.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=hu.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return hu.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=hu.md.sha256;function i(){var p=hu.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=hu.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),hu.options.usePureJavaScript||!hu.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!hu.random)hu.random=o;else for(var f in o)hu.random[f]=o[f];hu.random.createInstance=i,pTe.exports=hu.random})(typeof jQuery<"u"?jQuery:null)})()});var hTe=H((Zhi,mat)=>{d();var M0=_i();qo();var mTe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],fat=[1,2,3,5],xcr=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),Ecr=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");mat.exports=M0.rc2=M0.rc2||{};M0.rc2.expandKey=function(t,e){typeof t=="string"&&(t=M0.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(mTe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,mTe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,mTe[r.at(c+1)^r.at(c+o)]);return r};var pat=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=M0.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=xcr(g[u],fat[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=Ecr(g[u],fat[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var A=[];for(u=0;u<4;u++){var y=i.getInt16Le();a!==null&&(r?y^=a.getInt16Le():a.putInt16Le(y)),A.push(y&65535)}f=r?0:63;for(var E=0;E<g.length;E++)for(var b=0;b<g[E][0];b++)g[E][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),o.putInt16Le(A[u])},"runPlan"),h=null;return h={start:s(function(g,A){g&&typeof g=="string"&&(g=M0.util.createBuffer(g)),n=!1,i=M0.util.createBuffer(),o=A||new M0.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(A&&(n=!0,h.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,o,!r);else{var E=o.length(),b=o.at(E-1);b>E?A=!1:o.truncate(b)}return A},"finish")},h},"createCipher");M0.rc2.startEncrypting=function(t,e,r){var n=M0.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};M0.rc2.createEncryptionCipher=function(t,e){return pat(t,e,!0)};M0.rc2.startDecrypting=function(t,e,r){var n=M0.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};M0.rc2.createDecryptionCipher=function(t,e){return pat(t,e,!1)}});var QQ=H((rgi,Eat)=>{d();var gTe=_i();Eat.exports=gTe.jsbn=gTe.jsbn||{};var Zx,bcr=0xdeadbeefcafe,hat=(bcr&16777215)==15715070;function kt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(kt,"BigInteger");gTe.jsbn.BigInteger=kt;function Ho(){return new kt(null)}s(Ho,"nbi");function Icr(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(Icr,"am1");function Tcr(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(Tcr,"am2");function gat(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s(gat,"am3");typeof navigator>"u"?(kt.prototype.am=gat,Zx=28):hat&&navigator.appName=="Microsoft Internet Explorer"?(kt.prototype.am=Tcr,Zx=30):hat&&navigator.appName!="Netscape"?(kt.prototype.am=Icr,Zx=26):(kt.prototype.am=gat,Zx=28);kt.prototype.DB=Zx;kt.prototype.DM=(1<<Zx)-1;kt.prototype.DV=1<<Zx;var ATe=52;kt.prototype.FV=Math.pow(2,ATe);kt.prototype.F1=ATe-Zx;kt.prototype.F2=2*Zx-ATe;var wcr="0123456789abcdefghijklmnopqrstuvwxyz",Sre=new Array,FN,Wh;FN=48;for(Wh=0;Wh<=9;++Wh)Sre[FN++]=Wh;FN=97;for(Wh=10;Wh<36;++Wh)Sre[FN++]=Wh;FN=65;for(Wh=10;Wh<36;++Wh)Sre[FN++]=Wh;function Aat(t){return wcr.charAt(t)}s(Aat,"int2char");function yat(t,e){var r=Sre[t.charCodeAt(e)];return r??-1}s(yat,"intAt");function Scr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(Scr,"bnpCopyTo");function _cr(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(_cr,"bnpFromInt");function xw(t){var e=Ho();return e.fromInt(t),e}s(xw,"nbv");function Rcr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:yat(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&kt.ZERO.subTo(this,this)}s(Rcr,"bnpFromString");function kcr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(kcr,"bnpClamp");function Pcr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=Aat(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=Aat(n));return i?o:"0"}s(Pcr,"bnToString");function Dcr(){var t=Ho();return kt.ZERO.subTo(this,t),t}s(Dcr,"bnNegate");function Bcr(){return this.s<0?this.negate():this}s(Bcr,"bnAbs");function Ncr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(Ncr,"bnCompareTo");function _re(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(_re,"nbits");function Mcr(){return this.t<=0?0:this.DB*(this.t-1)+_re(this.data[this.t-1]^this.s&this.DM)}s(Mcr,"bnBitLength");function Lcr(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(Lcr,"bnpDLShiftTo");function Fcr(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(Fcr,"bnpDRShiftTo");function Ocr(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(Ocr,"bnpLShiftTo");function Qcr(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(Qcr,"bnpRShiftTo");function Ucr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(Ucr,"bnpSubTo");function qcr(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&kt.ZERO.subTo(e,e)}s(qcr,"bnpMultiplyTo");function Hcr(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(Hcr,"bnpSquareTo");function $cr(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ho());var o=Ho(),a=this.s,c=t.s,l=this.DB-_re(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,A=r.t,y=A-u,E=e??Ho();for(o.dlShiftTo(y,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),kt.ONE.dlShiftTo(u,E),E.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var b=r.data[--A]==f?this.DM:Math.floor(r.data[A]*m+(r.data[A-1]+g)*h);if((r.data[A]+=o.am(0,b,r,y,0,u))<b)for(o.dlShiftTo(y,E),r.subTo(E,r);r.data[A]<--b;)r.subTo(E,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&kt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&kt.ZERO.subTo(r,r)}}}s($cr,"bnpDivRemTo");function Wcr(t){var e=Ho();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(kt.ZERO)>0&&t.subTo(e,e),e}s(Wcr,"bnMod");function bk(t){this.m=t}s(bk,"Classic");function jcr(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(jcr,"cConvert");function Gcr(t){return t}s(Gcr,"cRevert");function Vcr(t){t.divRemTo(this.m,null,t)}s(Vcr,"cReduce");function zcr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(zcr,"cMulTo");function Ycr(t,e){t.squareTo(e),this.reduce(e)}s(Ycr,"cSqrTo");bk.prototype.convert=jcr;bk.prototype.revert=Gcr;bk.prototype.reduce=Vcr;bk.prototype.mulTo=zcr;bk.prototype.sqrTo=Ycr;function Kcr(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(Kcr,"bnpInvDigit");function Ik(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(Ik,"Montgomery");function Jcr(t){var e=Ho();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(kt.ZERO)>0&&this.m.subTo(e,e),e}s(Jcr,"montConvert");function Xcr(t){var e=Ho();return t.copyTo(e),this.reduce(e),e}s(Xcr,"montRevert");function Zcr(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(Zcr,"montReduce");function elr(t,e){t.squareTo(e),this.reduce(e)}s(elr,"montSqrTo");function tlr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(tlr,"montMulTo");Ik.prototype.convert=Jcr;Ik.prototype.revert=Xcr;Ik.prototype.reduce=Zcr;Ik.prototype.mulTo=tlr;Ik.prototype.sqrTo=elr;function rlr(){return(this.t>0?this.data[0]&1:this.s)==0}s(rlr,"bnpIsEven");function nlr(t,e){if(t>4294967295||t<1)return kt.ONE;var r=Ho(),n=Ho(),i=e.convert(this),o=_re(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(nlr,"bnpExp");function ilr(t,e){var r;return t<256||e.isEven()?r=new bk(e):r=new Ik(e),this.exp(t,r)}s(ilr,"bnModPowInt");kt.prototype.copyTo=Scr;kt.prototype.fromInt=_cr;kt.prototype.fromString=Rcr;kt.prototype.clamp=kcr;kt.prototype.dlShiftTo=Lcr;kt.prototype.drShiftTo=Fcr;kt.prototype.lShiftTo=Ocr;kt.prototype.rShiftTo=Qcr;kt.prototype.subTo=Ucr;kt.prototype.multiplyTo=qcr;kt.prototype.squareTo=Hcr;kt.prototype.divRemTo=$cr;kt.prototype.invDigit=Kcr;kt.prototype.isEven=rlr;kt.prototype.exp=nlr;kt.prototype.toString=Pcr;kt.prototype.negate=Dcr;kt.prototype.abs=Bcr;kt.prototype.compareTo=Ncr;kt.prototype.bitLength=Mcr;kt.prototype.mod=Wcr;kt.prototype.modPowInt=ilr;kt.ZERO=xw(0);kt.ONE=xw(1);function olr(){var t=Ho();return this.copyTo(t),t}s(olr,"bnClone");function slr(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(slr,"bnIntValue");function alr(){return this.t==0?this.s:this.data[0]<<24>>24}s(alr,"bnByteValue");function clr(){return this.t==0?this.s:this.data[0]<<16>>16}s(clr,"bnShortValue");function llr(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(llr,"bnpChunkSize");function ulr(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(ulr,"bnSigNum");function dlr(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=xw(r),i=Ho(),o=Ho(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(dlr,"bnpToRadix");function flr(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=yat(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&kt.ZERO.subTo(this,this)}s(flr,"bnpFromRadix");function plr(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(kt.ONE.shiftLeft(t-1),yTe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(kt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(plr,"bnpFromNumber");function mlr(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(mlr,"bnToByteArray");function hlr(t){return this.compareTo(t)==0}s(hlr,"bnEquals");function glr(t){return this.compareTo(t)<0?this:t}s(glr,"bnMin");function Alr(t){return this.compareTo(t)>0?this:t}s(Alr,"bnMax");function ylr(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(ylr,"bnpBitwiseTo");function Clr(t,e){return t&e}s(Clr,"op_and");function vlr(t){var e=Ho();return this.bitwiseTo(t,Clr,e),e}s(vlr,"bnAnd");function yTe(t,e){return t|e}s(yTe,"op_or");function xlr(t){var e=Ho();return this.bitwiseTo(t,yTe,e),e}s(xlr,"bnOr");function Cat(t,e){return t^e}s(Cat,"op_xor");function Elr(t){var e=Ho();return this.bitwiseTo(t,Cat,e),e}s(Elr,"bnXor");function vat(t,e){return t&~e}s(vat,"op_andnot");function blr(t){var e=Ho();return this.bitwiseTo(t,vat,e),e}s(blr,"bnAndNot");function Ilr(){for(var t=Ho(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(Ilr,"bnNot");function Tlr(t){var e=Ho();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(Tlr,"bnShiftLeft");function wlr(t){var e=Ho();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(wlr,"bnShiftRight");function Slr(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(Slr,"lbit");function _lr(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Slr(this.data[t]);return this.s<0?this.t*this.DB:-1}s(_lr,"bnGetLowestSetBit");function Rlr(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(Rlr,"cbit");function klr(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Rlr(this.data[r]^e);return t}s(klr,"bnBitCount");function Plr(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(Plr,"bnTestBit");function Dlr(t,e){var r=kt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(Dlr,"bnpChangeBit");function Blr(t){return this.changeBit(t,yTe)}s(Blr,"bnSetBit");function Nlr(t){return this.changeBit(t,vat)}s(Nlr,"bnClearBit");function Mlr(t){return this.changeBit(t,Cat)}s(Mlr,"bnFlipBit");function Llr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(Llr,"bnpAddTo");function Flr(t){var e=Ho();return this.addTo(t,e),e}s(Flr,"bnAdd");function Olr(t){var e=Ho();return this.subTo(t,e),e}s(Olr,"bnSubtract");function Qlr(t){var e=Ho();return this.multiplyTo(t,e),e}s(Qlr,"bnMultiply");function Ulr(t){var e=Ho();return this.divRemTo(t,e,null),e}s(Ulr,"bnDivide");function qlr(t){var e=Ho();return this.divRemTo(t,null,e),e}s(qlr,"bnRemainder");function Hlr(t){var e=Ho(),r=Ho();return this.divRemTo(t,e,r),new Array(e,r)}s(Hlr,"bnDivideAndRemainder");function $lr(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s($lr,"bnpDMultiply");function Wlr(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(Wlr,"bnpDAddOffset");function OQ(){}s(OQ,"NullExp");function xat(t){return t}s(xat,"nNop");function jlr(t,e,r){t.multiplyTo(e,r)}s(jlr,"nMulTo");function Glr(t,e){t.squareTo(e)}s(Glr,"nSqrTo");OQ.prototype.convert=xat;OQ.prototype.revert=xat;OQ.prototype.mulTo=jlr;OQ.prototype.sqrTo=Glr;function Vlr(t){return this.exp(t,new OQ)}s(Vlr,"bnPow");function zlr(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(zlr,"bnpMultiplyLowerTo");function Ylr(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(Ylr,"bnpMultiplyUpperTo");function ON(t){this.r2=Ho(),this.q3=Ho(),kt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(ON,"Barrett");function Klr(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ho();return t.copyTo(e),this.reduce(e),e}s(Klr,"barrettConvert");function Jlr(t){return t}s(Jlr,"barrettRevert");function Xlr(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(Xlr,"barrettReduce");function Zlr(t,e){t.squareTo(e),this.reduce(e)}s(Zlr,"barrettSqrTo");function eur(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(eur,"barrettMulTo");ON.prototype.convert=Klr;ON.prototype.revert=Jlr;ON.prototype.reduce=Xlr;ON.prototype.mulTo=eur;ON.prototype.sqrTo=Zlr;function tur(t,e){var r=t.bitLength(),n,i=xw(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new bk(e):e.isEven()?o=new ON(e):o=new Ik(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=Ho();for(o.sqrTo(a[1],f);c<=u;)a[c]=Ho(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Ho(),A;for(r=_re(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(A=i,i=g,g=A),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(tur,"bnModPow");function rur(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(rur,"bnGCD");function nur(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(nur,"bnpModInt");function iur(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return kt.ZERO;for(var r=t.clone(),n=this.clone(),i=xw(1),o=xw(0),a=xw(0),c=xw(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(kt.ONE)!=0)return kt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(iur,"bnModInverse");var zA=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],our=(1<<26)/zA[zA.length-1];function sur(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=zA[zA.length-1]){for(e=0;e<zA.length;++e)if(r.data[0]==zA[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<zA.length;){for(var n=zA[e],i=e+1;i<zA.length&&n<our;)n*=zA[i++];for(n=r.modInt(n);e<i;)if(n%zA[e++]==0)return!1}return r.millerRabin(t)}s(sur,"bnIsProbablePrime");function aur(t){var e=this.subtract(kt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=cur(),o,a=0;a<t;++a){do o=new kt(this.bitLength(),i);while(o.compareTo(kt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(kt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(kt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(aur,"bnpMillerRabin");function cur(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(cur,"bnGetPrng");kt.prototype.chunkSize=llr;kt.prototype.toRadix=dlr;kt.prototype.fromRadix=flr;kt.prototype.fromNumber=plr;kt.prototype.bitwiseTo=ylr;kt.prototype.changeBit=Dlr;kt.prototype.addTo=Llr;kt.prototype.dMultiply=$lr;kt.prototype.dAddOffset=Wlr;kt.prototype.multiplyLowerTo=zlr;kt.prototype.multiplyUpperTo=Ylr;kt.prototype.modInt=nur;kt.prototype.millerRabin=aur;kt.prototype.clone=olr;kt.prototype.intValue=slr;kt.prototype.byteValue=alr;kt.prototype.shortValue=clr;kt.prototype.signum=ulr;kt.prototype.toByteArray=mlr;kt.prototype.equals=hlr;kt.prototype.min=glr;kt.prototype.max=Alr;kt.prototype.and=vlr;kt.prototype.or=xlr;kt.prototype.xor=Elr;kt.prototype.andNot=blr;kt.prototype.not=Ilr;kt.prototype.shiftLeft=Tlr;kt.prototype.shiftRight=wlr;kt.prototype.getLowestSetBit=_lr;kt.prototype.bitCount=klr;kt.prototype.testBit=Plr;kt.prototype.setBit=Blr;kt.prototype.clearBit=Nlr;kt.prototype.flipBit=Mlr;kt.prototype.add=Flr;kt.prototype.subtract=Olr;kt.prototype.multiply=Qlr;kt.prototype.divide=Ulr;kt.prototype.remainder=qlr;kt.prototype.divideAndRemainder=Hlr;kt.prototype.modPow=tur;kt.prototype.modInverse=iur;kt.prototype.pow=Vlr;kt.prototype.gcd=rur;kt.prototype.isProbablePrime=sur});var QN=H((ogi,wat)=>{d();var d1=_i();s1();qo();var Iat=wat.exports=d1.sha1=d1.sha1||{};d1.md.sha1=d1.md.algorithms.sha1=Iat;Iat.create=function(){Tat||lur();var t=null,e=d1.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=d1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=d1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),bat(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=d1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(CTe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};bat(p,r,i);var m=d1.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var CTe=null,Tat=!1;function lur(){CTe="\x80",CTe+=d1.util.fillString("\0",64),Tat=!0}s(lur,"_init");function bat(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(bat,"_update")});var vTe=H((cgi,_at)=>{d();var f1=_i();qo();$h();QN();var Sat=_at.exports=f1.pkcs1=f1.pkcs1||{};Sat.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=f1.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=f1.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var A=Rre(i,c-o.digestLength-1,a),y=f1.util.xorBytes(g,A,g.length),E=Rre(y,o.digestLength,a),b=f1.util.xorBytes(i,E,i.length);return"\0"+b+y};Sat.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=a,y}if(i===void 0?i=f1.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=Rre(f,i.digestLength,o),m=f1.util.xorBytes(u,p,u.length),h=Rre(m,a-i.digestLength-1,o),g=f1.util.xorBytes(f,h,f.length),A=g.substring(0,i.digestLength),y=l!=="\0",E=0;E<i.digestLength;++E)y|=c.charAt(E)!==A.charAt(E);for(var b=1,S=i.digestLength,R=i.digestLength;R<g.length;R++){var B=g.charCodeAt(R),L=B&1^1,O=b?65534:0;y|=B&O,b=b&L,S+=b}if(y||g.charCodeAt(S)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(S+1)};function Rre(t,e,r){r||(r=f1.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(Rre,"rsa_mgf1")});var ETe=H((dgi,xTe)=>{d();var Ew=_i();qo();QQ();$h();(function(){if(Ew.prime){xTe.exports=Ew.prime;return}var t=xTe.exports=Ew.prime=Ew.prime||{},e=Ew.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=m.prng||Ew.random,y={nextBytes:s(function(E){for(var b=A.getBytesSync(E.length),S=0;S<E.length;++S)E[S]=b.charCodeAt(S)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,y,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var A=u(p,m),y=0,E=f(A.bitLength());"millerRabinTests"in h&&(E=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(A,p,m,y,E,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,A,y,E){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(A))return E(null,p);p.dAddOffset(r[g++%8],0)}while(y<0||+new Date-b<y);Ew.util.setImmediate(function(){c(p,m,h,g,A,y,E)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var A=u(p,m),y=h.workers,E=h.workLoad||100,b=E*30/8,S=h.workerScript||"forge/prime.worker.js";if(y===-1)return Ew.util.estimateCores(function(B,L){B&&(L=2),y=L-1,R()});R();function R(){y=Math.max(1,y);for(var B=[],L=0;L<y;++L)B[L]=new Worker(S);for(var O=y,L=0;L<y;++L)B[L].addEventListener("message",V);var K=!1;function V(z){if(!K){--O;var Q=z.data;if(Q.found){for(var U=0;U<B.length;++U)B[U].terminate();return K=!0,g(null,new e(Q.prime,16))}A.bitLength()>p&&(A=u(p,m));var Z=A.toString(16);z.target.postMessage({hex:Z,workLoad:E}),A.dAddOffset(b,0)}}s(V,"workerMessage")}s(R,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var UQ=H((mgi,Mat)=>{d();var gn=_i();VA();QQ();vw();vTe();ETe();$h();qo();typeof Do>"u"&&(Do=gn.jsbn.BigInteger);var Do,bTe=gn.util.isNodejs?require("crypto"):null,ze=gn.asn1,jh=gn.util;gn.pki=gn.pki||{};Mat.exports=gn.pki.rsa=gn.rsa=gn.rsa||{};var hi=gn.pki,uur=[6,4,2,4,2,4,6,2],dur={name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},fur={name:"RSAPrivateKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},pur={name:"RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},mur=gn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},hur={name:"DigestInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ze.Class.UNIVERSAL,type:ze.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},gur=s(function(t){var e;if(t.algorithm in hi.oids)e=hi.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ze.oidToDer(e).getBytes(),i=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]),o=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]);o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,n)),o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,""));var a=ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),ze.toDer(i).getBytes()},"emsaPkcs1v15encode"),Bat=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Do.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Do.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Do(gn.util.bytesToHex(gn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Do.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");hi.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Nat(t,e,r)):(i=gn.util.createBuffer(),i.putBytes(t));for(var a=new Do(i.toHex(),16),c=Bat(a,e,n),l=c.toString(16),u=gn.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(gn.util.hexToBytes(l)),u.getBytes()};hi.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Do(gn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=Bat(a,e,r),l=c.toString(16),u=gn.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(gn.util.hexToBytes(l)),n!==!1?kre(u.getBytes(),e,r):u.getBytes()};hi.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||gn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Do(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};hi.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Do(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Do(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Do.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(yur(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(uur[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Do.ONE),t.q1=t.q.subtract(Do.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Do.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:hi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:hi.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};hi.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!gn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Rat("generateKeyPair"))return bTe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:hi.privateKeyFromPem(u),publicKey:hi.publicKeyFromPem(l)})});if(kat("generateKey")&&kat("exportKey"))return jh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Dat(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return jh.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=hi.privateKeyFromAsn1(ze.fromDer(gn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:hi.setRsaPublicKey(l.n,l.e)})}});if(Pat("generateKey")&&Pat("exportKey")){var i=jh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Dat(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=jh.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,m=hi.privateKeyFromAsn1(ze.fromDer(gn.util.createBuffer(p)));n(null,{privateKey:m,publicKey:hi.setRsaPublicKey(m.n,m.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(Rat("generateKeyPairSync")){var o=bTe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:hi.privateKeyFromPem(o.privateKey),publicKey:hi.publicKeyFromPem(o.publicKey)}}}var a=hi.rsa.createKeyPairGenerationState(t,e,r);if(!n)return hi.rsa.stepKeyPairGenerationState(a,0),a.keys;Aur(a,r,n)};hi.setRsaPublicKey=hi.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return Nat(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return gn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return hi.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=kre(u,r,!0);var f=ze.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!ze.validate(f,hur,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=ze.derToOid(p.algorithmIdentifier);if(!(g===gn.oids.md2||g===gn.oids.md5||g===gn.oids.sha1||g===gn.oids.sha224||g===gn.oids.sha256||g===gn.oids.sha384||g===gn.oids.sha512||g===gn.oids["sha512-224"]||g===gn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===gn.oids.md2||g===gn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=kre(u,r,!0),l===u},"verify")});var c=hi.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};hi.setRsaPrivateKey=hi.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var m=hi.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:kre};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(h,g){return gn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(m,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:gur},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var m=f.encode(u,l.n.bitLength());return hi.rsa.encrypt(m,l,p)},l};hi.wrapRsaPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(hi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,ze.toDer(t).getBytes())])};hi.privateKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,dur,e,r)&&(t=ze.fromDer(gn.util.createBuffer(e.privateKey))),e={},r=[],!ze.validate(t,fur,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=gn.util.createBuffer(e.privateKeyModulus).toHex(),o=gn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=gn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=gn.util.createBuffer(e.privateKeyPrime1).toHex(),l=gn.util.createBuffer(e.privateKeyPrime2).toHex(),u=gn.util.createBuffer(e.privateKeyExponent1).toHex(),f=gn.util.createBuffer(e.privateKeyExponent2).toHex(),p=gn.util.createBuffer(e.privateKeyCoefficient).toHex(),hi.setRsaPrivateKey(new Do(i,16),new Do(o,16),new Do(a,16),new Do(c,16),new Do(l,16),new Do(u,16),new Do(f,16),new Do(p,16))};hi.privateKeyToAsn1=hi.privateKeyToRSAPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.e)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.d)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.p)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.q)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.dP)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.dQ)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.qInv))])};hi.publicKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,mur,e,r)){var n=ze.derToOid(e.publicKeyOid);if(n!==hi.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ze.validate(t,pur,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=gn.util.createBuffer(e.publicKeyModulus).toHex(),a=gn.util.createBuffer(e.publicKeyExponent).toHex();return hi.setRsaPublicKey(new Do(o,16),new Do(a,16))};hi.publicKeyToAsn1=hi.publicKeyToSubjectPublicKeyInfo=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(hi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.BITSTRING,!1,[hi.publicKeyToRSAPublicKey(t)])])};hi.publicKeyToRSAPublicKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,p1(t.e))])};function Nat(t,e,r){var n=gn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=gn.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(Nat,"_encodePkcs1_v1_5");function kre(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=gn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(kre,"_decodePkcs1_v1_5");function Aur(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){gn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Do.ONE),t.q1=t.q.subtract(Do.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Do.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:hi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:hi.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(Aur,"_generateKeyPair");function p1(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=gn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(p1,"_bnToBytes");function yur(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(yur,"_getMillerRabinTests");function Rat(t){return gn.util.isNodejs&&typeof bTe[t]=="function"}s(Rat,"_detectNodeCrypto");function kat(t){return typeof jh.globalScope<"u"&&typeof jh.globalScope.crypto=="object"&&typeof jh.globalScope.crypto.subtle=="object"&&typeof jh.globalScope.crypto.subtle[t]=="function"}s(kat,"_detectSubtleCrypto");function Pat(t){return typeof jh.globalScope<"u"&&typeof jh.globalScope.msCrypto=="object"&&typeof jh.globalScope.msCrypto.subtle=="object"&&typeof jh.globalScope.msCrypto.subtle[t]=="function"}s(Pat,"_detectSubtleMsCrypto");function Dat(t){for(var e=gn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(Dat,"_intToUint8Array")});var ITe=H((Agi,Uat)=>{d();var br=_i();Cw();VA();FQ();s1();vw();Tre();Ek();$h();hTe();UQ();qo();typeof Lat>"u"&&(Lat=br.jsbn.BigInteger);var Lat,mt=br.asn1,bi=br.pki=br.pki||{};Uat.exports=bi.pbe=br.pbe=br.pbe||{};var Tk=bi.oids,Cur={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},vur={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},xur={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};bi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=br.random.getBytesSync(r.saltSize),i=r.count,o=mt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=Tk["aes128-CBC"],p=br.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=Tk["aes192-CBC"],p=br.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=Tk["aes256-CBC"],p=br.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=Tk.desCBC,p=br.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=Qat(h),A=br.pkcs5.pbkdf2(e,n,i,a,g),y=br.random.getBytesSync(u),E=p(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes();var b=Eur(n,o,a,h);c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk.pkcs5PBKDF2).getBytes()),b]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(f).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){a=24;var S=new br.util.ByteBuffer(n),A=bi.pbe.generatePkcs12Key(e,S,1,i,a),y=bi.pbe.generatePkcs12Key(e,S,2,i,a),E=br.des.createEncryptionCipher(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes(),c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,n),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var R=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[c,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,l)]);return R};bi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!mt.validate(t,Cur,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mt.derToOid(n.encryptionOid),c=bi.pbe.getCipher(a,n.encryptionParams,e),l=br.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=mt.fromDer(c.output)),r};bi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(t).getBytes()};return br.pem.encode(r,{maxline:e})};bi.encryptedPrivateKeyFromPem=function(t){var e=br.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(e.body)};bi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=bi.wrapRsaPrivateKey(bi.privateKeyToAsn1(t));return n=bi.encryptPrivateKeyInfo(n,e,r),bi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=br.random.getBytesSync(8),c=br.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=br.random.getBytesSync(8),c=br.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=br.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(mt.toDer(bi.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:br.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return br.pem.encode(p)};bi.decryptRsaPrivateKey=function(t,e){var r=null,n=br.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=br.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=br.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=br.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=br.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=br.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return br.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return br.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return br.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=br.util.hexToBytes(n.dekInfo.parameters),l=br.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(br.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=bi.decryptPrivateKeyInfo(mt.fromDer(r),e):r=mt.fromDer(r),r!==null&&(r=bi.privateKeyFromAsn1(r)),r};bi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in br.md))throw new Error('"sha1" hash algorithm unavailable.');o=br.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new br.util.ByteBuffer,p=new br.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new br.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(h/u),y=new br.util.ByteBuffer;for(c=0;c<A;c++)y.putByte(e.at(c%h));var E=u*Math.ceil(m/u),b=new br.util.ByteBuffer;for(c=0;c<E;c++)b.putByte(p.at(c%m));var S=y;S.putBuffer(b);for(var R=Math.ceil(i/l),B=1;B<=R;B++){var L=new br.util.ByteBuffer;L.putBytes(g.bytes()),L.putBytes(S.bytes());for(var O=0;O<n;O++)o.start(),o.update(L.getBytes()),L=o.digest();var K=new br.util.ByteBuffer;for(c=0;c<u;c++)K.putByte(L.at(c%l));var V=Math.ceil(h/u)+Math.ceil(m/u),z=new br.util.ByteBuffer;for(a=0;a<V;a++){var Q=new br.util.ByteBuffer(S.getBytes(u)),U=511;for(c=K.length()-1;c>=0;c--)U=U>>8,U+=K.at(c)+Q.at(c),Q.setAt(c,U&255);z.putBuffer(Q)}S=z,f.putBuffer(L)}return f.truncate(f.length()-i),f};bi.pbe.getCipher=function(t,e,r){switch(t){case bi.oids.pkcs5PBES2:return bi.pbe.getCipherForPBES2(t,e,r);case bi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case bi.oids["pbewithSHAAnd40BitRC2-CBC"]:return bi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};bi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!mt.validate(e,vur,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=mt.derToOid(n.kdfOid),t!==bi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=mt.derToOid(n.encOid),t!==bi.oids["aes128-CBC"]&&t!==bi.oids["aes192-CBC"]&&t!==bi.oids["aes256-CBC"]&&t!==bi.oids["des-EDE3-CBC"]&&t!==bi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=br.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(bi.oids[t]){case"aes128-CBC":l=16,u=br.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=br.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=br.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=br.des.createDecryptionCipher;break;case"desCBC":l=8,u=br.des.createDecryptionCipher;break}var f=Oat(n.prfOid),p=br.pkcs5.pbkdf2(r,a,c,l,f),m=n.encIv,h=u(p);return h.start(m),h};bi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!mt.validate(e,xur,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=br.util.createBuffer(n.salt),c=br.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case bi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=br.des.startDecrypting;break;case bi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(A,y){var E=br.rc2.createDecryptionCipher(A,40);return E.start(y,null),E},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=Oat(n.prfOid),m=bi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=bi.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(m,h)};bi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in br.md))throw new Error('"md5" hash algorithm unavailable.');n=br.md.md5.create()}e===null&&(e="");for(var i=[Fat(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(Fat(n,i[a-1]+t+e));return i.join("").substr(0,r)};function Fat(t,e){return t.start().update(e).digest().getBytes()}s(Fat,"hash");function Oat(t){var e;if(!t)e="hmacWithSHA1";else if(e=bi.oids[mt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Qat(e)}s(Oat,"prfOidToMessageDigest");function Qat(t){var e=br.md;switch(t){case"hmacWithSHA224":e=br.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(Qat,"prfAlgorithmToMessageDigest");function Eur(t,e,r,n){var i=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,t),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,br.util.hexToBytes(r.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(bi.oids[n]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),i}s(Eur,"createPbkdf2Params")});var TTe=H((vgi,$at)=>{d();var UN=_i();VA();qo();var Ar=UN.asn1,qN=$at.exports=UN.pkcs7asn1=UN.pkcs7asn1||{};UN.pkcs7=UN.pkcs7||{};UN.pkcs7.asn1=qN;var qat={name:"ContentInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};qN.contentInfoValidator=qat;var Hat={name:"EncryptedContentInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};qN.envelopedDataValidator={name:"EnvelopedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Hat)};qN.encryptedDataValidator={name:"EncryptedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"}].concat(Hat)};var bur={name:"SignerInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};qN.signedDataValidator={name:"SignedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},qat,{name:"SignedData.Certificates",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,capture:"signerInfos",optional:!0,value:[bur]}]};qN.recipientInfoValidator={name:"RecipientInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var wTe=H((Egi,Wat)=>{d();var wk=_i();qo();wk.mgf=wk.mgf||{};var Iur=Wat.exports=wk.mgf.mgf1=wk.mgf1=wk.mgf1||{};Iur.create=function(t){var e={generate:s(function(r,n){for(var i=new wk.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new wk.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var Gat=H((Tgi,jat)=>{d();var Pre=_i();wTe();jat.exports=Pre.mgf=Pre.mgf||{};Pre.mgf.mgf1=Pre.mgf1});var Dre=H((Sgi,Vat)=>{d();var Sk=_i();$h();qo();var Tur=Vat.exports=Sk.pss=Sk.pss||{};Tur.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Sk.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||Sk.random,c={};return c.encode=function(l,u){var f,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var A=new Sk.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(h),A.putBytes(g),e.start(),e.update(A.getBytes());var y=e.digest().getBytes(),E=new Sk.util.ByteBuffer;E.fillWithByte(0,m-o-n-2),E.putByte(1),E.putBytes(g);var b=E.getBytes(),S=m-n-1,R=r.generate(y,S),B="";for(f=0;f<S;f++)B+=String.fromCharCode(b.charCodeAt(f)^R.charCodeAt(f));var L=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~L)+B.substr(1),B+y+"\xBC"},c.verify=function(l,u,f){var p,m=f-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,A=u.substr(0,g),y=u.substr(g,n),E=65280>>8*h-m&255;if((A.charCodeAt(0)&E)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(y,g),S="";for(p=0;p<g;p++)S+=String.fromCharCode(A.charCodeAt(p)^b.charCodeAt(p));S=String.fromCharCode(S.charCodeAt(0)&~E)+S.substr(1);var R=h-n-o-2;for(p=0;p<R;p++)if(S.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=S.substr(-o),L=new Sk.util.ByteBuffer;L.fillWithByte(0,8),L.putBytes(l),L.putBytes(B),e.start(),e.update(L.getBytes());var O=e.digest().getBytes();return y===O},c}});var Mre=H((Rgi,Xat)=>{d();var An=_i();Cw();VA();FQ();s1();Gat();vw();Ek();Dre();UQ();qo();var re=An.asn1,Xt=Xat.exports=An.pki=An.pki||{},Bo=Xt.oids,pc={};pc.CN=Bo.commonName;pc.commonName="CN";pc.C=Bo.countryName;pc.countryName="C";pc.L=Bo.localityName;pc.localityName="L";pc.ST=Bo.stateOrProvinceName;pc.stateOrProvinceName="ST";pc.O=Bo.organizationName;pc.organizationName="O";pc.OU=Bo.organizationalUnitName;pc.organizationalUnitName="OU";pc.E=Bo.emailAddress;pc.emailAddress="E";var Yat=An.pki.rsa.publicKeyValidator,wur={name:"Certificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Yat,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Sur={name:"rsapss",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},_ur={name:"CertificationRequestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Yat,{name:"CertificationRequestInfo.attributes",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0}]}]}]},Rur={name:"CertificationRequest",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[_ur,{name:"CertificationRequest.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Xt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=re.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Bo&&(o.name=Bo[o.type],o.name in pc&&(o.shortName=pc[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Xt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=re.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in Bo&&(c.name=Bo[c.type],c.name in pc&&(c.shortName=pc[c.name])),c.type===Bo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(Xt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function bw(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(bw,"_getAttribute");var Bre=s(function(t,e,r){var n={};if(t!==Bo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Bo.sha1},mgf:{algorithmOid:Bo.mgf1,hash:{algorithmOid:Bo.sha1}},saltLength:20});var i={},o=[];if(!re.validate(e,Sur,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=re.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=re.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=re.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),Nre=s(function(t){switch(Bo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return An.md.sha1.create();case"md5WithRSAEncryption":return An.md.md5.create();case"sha256WithRSAEncryption":return An.md.sha256.create();case"sha384WithRSAEncryption":return An.md.sha384.create();case"sha512WithRSAEncryption":return An.md.sha512.create();case"RSASSA-PSS":return An.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Kat=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case Bo.sha1WithRSAEncryption:case Bo.sha1WithRSASignature:break;case Bo["RSASSA-PSS"]:var n,i;if(n=Bo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||An.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Bo[e.signatureParameters.mgf.algorithmOid],i===void 0||An.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=An.mgf[i].create(An.md[n].create()),n=Bo[e.signatureParameters.hash.algorithmOid],n===void 0||An.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=An.pss.create(An.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Xt.certificateFromPem=function(t,e,r){var n=An.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Xt.certificateFromAsn1(o,e)};Xt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:re.toDer(Xt.certificateToAsn1(t)).getBytes()};return An.pem.encode(r,{maxline:e})};Xt.publicKeyFromPem=function(t){var e=An.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=re.fromDer(e.body);return Xt.publicKeyFromAsn1(n)};Xt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:re.toDer(Xt.publicKeyToAsn1(t)).getBytes()};return An.pem.encode(r,{maxline:e})};Xt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:re.toDer(Xt.publicKeyToRSAPublicKey(t)).getBytes()};return An.pem.encode(r,{maxline:e})};Xt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||An.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=re.toDer(Xt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=re.toDer(Xt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Xt.certificationRequestFromPem=function(t,e,r){var n=An.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Xt.certificationRequestFromAsn1(o,e)};Xt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:re.toDer(Xt.certificationRequestToAsn1(t)).getBytes()};return An.pem.encode(r,{maxline:e})};Xt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return bw(t.issuer,e)},t.issuer.addField=function(e){Gh([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return bw(t.subject,e)},t.subject.addField=function(e){Gh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Gh(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Gh(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Jat(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||An.md.sha1.create();var n=Bo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Xt.getTBSCertificate(t);var o=re.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=Nre({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||Xt.getTBSCertificate(e),l=re.toDer(c);a.update(l.getBytes())}return a!==null&&(r=Kat({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Xt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Bo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return An.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Xt.certificateFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,wur,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Xt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Xt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=An.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=An.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Bre(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=An.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Bre(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=Nre({signatureOid:a.signatureOid,type:"certificate"});var u=re.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=An.md.sha1.create(),p=re.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return bw(a.issuer,g)},a.issuer.addField=function(g){Gh([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Xt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var m=An.md.sha1.create(),h=re.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return bw(a.subject,g)},a.subject.addField=function(g){Gh([g]),a.subject.attributes.push(g)},a.subject.attributes=Xt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Xt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Xt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Xt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Xt.certificateExtensionFromAsn1(n.value[i]));return e};Xt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=re.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===re.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Bo){if(e.name=Bo[e.id],e.name==="keyUsage"){var r=re.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=re.fromDer(e.value);r.value.length>0&&r.value[0].type===re.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===re.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=re.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=re.fromDer(e.value),a=0;a<r.value.length;++a){var c=re.derToOid(r.value[a].value);c in Bo?e[Bo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=re.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=re.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=An.util.bytesToIP(l.value);break;case 8:f.oid=re.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=re.fromDer(e.value);e.subjectKeyIdentifier=An.util.bytesToHex(r.value)}}return e};Xt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Rur,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Xt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Xt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=An.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Bre(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=An.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Bre(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=Nre({signatureOid:a.signatureOid,type:"certification request"});var c=re.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=An.md.sha1.create();return a.subject.getField=function(u){return bw(a.subject,u)},a.subject.addField=function(u){Gh([u]),a.subject.attributes.push(u)},a.subject.attributes=Xt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Xt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return bw(a,u)},a.addAttribute=function(u){Gh([u]),a.attributes.push(u)},a.attributes=Xt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Xt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return bw(t.subject,e)},t.subject.addField=function(e){Gh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return bw(t,e)},t.addAttribute=function(e){Gh([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Gh(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Gh(e),t.attributes=e},t.sign=function(e,r){t.md=r||An.md.sha1.create();var n=Bo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Xt.getCertificationRequestInfo(t);var o=re.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Nre({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Xt.getCertificationRequestInfo(t),i=re.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Kat({certificate:t,md:r,signature:t.signature})),e},t};function HN(t){for(var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=re.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===re.Type.UTF8&&(a=An.util.encodeUtf8(a))),n=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(r.type).getBytes()),re.create(re.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(HN,"_dnToAsn1");function Gh(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Xt.oids?e.name=Xt.oids[e.type]:e.shortName&&e.shortName in pc&&(e.name=Xt.oids[pc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Xt.oids)e.type=Xt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in pc&&(e.shortName=pc[e.name]),e.type===Bo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=re.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Xt.certificateExtensionToAsn1(Jat(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Gh,"_fillMissingFields");function Jat(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Xt.oids&&(t.name=Xt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Xt.oids)t.id=Xt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in Bo?c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Bo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=An.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));t.value.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=re.create(re.Class.UNIVERSAL,re.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[re.create(re.Class.CONTEXT_SPECIFIC,4,!0,[HN(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=An.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var c=t.value.value,A=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),y=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=An.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));y.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[y])),c.push(A)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(Jat,"_fillMissingExtensionFields");function STe(t,e){switch(t){case Bo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(e.saltLength).getBytes())])),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,r);default:return re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")}}s(STe,"_signatureParametersToAsn1");function kur(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=re.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===re.Type.UTF8&&(o=An.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(i.type).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(kur,"_CRIAttributesToAsn1");var Pur=new Date("1950-01-01T00:00:00Z"),Dur=new Date("2050-01-01T00:00:00Z");function zat(t){return t>=Pur&&t<Dur?re.create(re.Class.UNIVERSAL,re.Type.UTCTIME,!1,re.dateToUtcTime(t)):re.create(re.Class.UNIVERSAL,re.Type.GENERALIZEDTIME,!1,re.dateToGeneralizedTime(t))}s(zat,"_dateToAsn1");Xt.getTBSCertificate=function(t){var e=zat(t.validity.notBefore),r=zat(t.validity.notAfter),n=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,An.util.hexToBytes(t.serialNumber)),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.siginfo.algorithmOid).getBytes()),STe(t.siginfo.algorithmOid,t.siginfo.parameters)]),HN(t.issuer),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,r]),HN(t.subject),Xt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Xt.certificateExtensionsToAsn1(t.extensions)),n};Xt.getCertificationRequestInfo=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes()),HN(t.subject),Xt.publicKeyToAsn1(t.publicKey),kur(t)]);return e};Xt.distinguishedNameToAsn1=function(t){return HN(t)};Xt.certificateToAsn1=function(t){var e=t.tbsCertificate||Xt.getTBSCertificate(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),STe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Xt.certificateExtensionsToAsn1=function(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,3,!0,[]),r=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Xt.certificateExtensionToAsn1(t[n]));return e};Xt.certificateExtensionToAsn1=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.id).getBytes())),t.critical&&e.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=re.toDer(r).getBytes()),e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r)),e};Xt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Xt.getCertificationRequestInfo(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),STe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Xt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=An.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];An.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=An.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;An.util.isArray(c)||(c=[c]);for(var l=re.toDer(Xt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=re.toDer(Xt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!An.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=An.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!An.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=re.toDer(Xt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=re.toDer(Xt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=An.md.sha1.create();a.attributes=Xt.RDNAttributesAsArray(HN(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Xt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Xt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Xt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;An.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Xt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Xt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Xt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Xt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var y=l.getExtension("basicConstraints"),E=l.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||y===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Xt.certificateError.bad_certificate}),a===null&&y!==null&&!y.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Xt.certificateError.bad_certificate}),a===null&&E!==null&&"pathLenConstraint"in y){var b=c-1;b>y.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Xt.certificateError.bad_certificate})}}var S=a===null?!0:a.error,R=r.verify?r.verify(S,c,n):S;if(R===!0)a=null;else throw S===!0&&(a={message:"The application rejected the certificate.",error:Xt.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!An.util.isArray(R)?(R.message&&(a.message=R.message),R.error&&(a.error=R.error)):typeof R=="string"&&(a.error=R)),a;o=!1,++c}while(e.length>0);return!0}});var RTe=H((Dgi,ect)=>{d();var Hs=_i();VA();MN();vw();TTe();ITe();$h();UQ();QN();qo();Mre();var Se=Hs.asn1,Ji=Hs.pki,HQ=ect.exports=Hs.pkcs12=Hs.pkcs12||{},Zat={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Bur={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},Zat,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Nur={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Mur={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},Lur={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function qQ(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(qQ,"_getBagsByAttribute");HQ.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Se.validate(t,Bur,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(y){var E={},b;return"localKeyId"in y?b=y.localKeyId:"localKeyIdHex"in y&&(b=Hs.util.hexToBytes(y.localKeyIdHex)),b===void 0&&!("friendlyName"in y)&&"bagType"in y&&(E[y.bagType]=qQ(a.safeContents,null,null,y.bagType)),b!==void 0&&(E.localKeyId=qQ(a.safeContents,"localKeyId",b,y.bagType)),"friendlyName"in y&&(E.friendlyName=qQ(a.safeContents,"friendlyName",y.friendlyName,y.bagType)),E},"getBags"),getBagsByFriendlyName:s(function(y,E){return qQ(a.safeContents,"friendlyName",y,E)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(y,E){return qQ(a.safeContents,"localKeyId",y,E)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Se.derToOid(n.contentType)!==Ji.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Se.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Se.Class.UNIVERSAL||c.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=_Te(c),n.mac){var l=null,u=0,f=Se.derToOid(n.macAlgorithm);switch(f){case Ji.oids.sha1:l=Hs.md.sha1.create(),u=20;break;case Ji.oids.sha256:l=Hs.md.sha256.create(),u=32;break;case Ji.oids.sha384:l=Hs.md.sha384.create(),u=48;break;case Ji.oids.sha512:l=Hs.md.sha512.create(),u=64;break;case Ji.oids.md5:l=Hs.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new Hs.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(Hs.util.bytesToHex(n.macIterations),16):1,h=HQ.generateKey(r,p,3,m,u,l),g=Hs.hmac.create();g.start(l,h),g.update(c.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Fur(a,c.value,e,r),a};function _Te(t){if(t.composed||t.constructed){for(var e=Hs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(_Te,"_decodePkcs7Data");function Fur(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Se.validate(o,Zat,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(Se.derToOid(a.contentType)){case Ji.oids.data:if(p.tagClass!==Se.Class.UNIVERSAL||p.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=_Te(p).value;break;case Ji.oids.encryptedData:f=Our(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Se.derToOid(a.contentType),l}u.safeBags=Qur(f,r,n),t.safeContents.push(u)}}s(Fur,"_decodeAuthenticatedSafe");function Our(t,e){var r={},n=[];if(!Se.validate(t,Hs.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Se.derToOid(r.contentType);if(o!==Ji.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Se.derToOid(r.encAlgorithm);var a=Ji.pbe.getCipher(o,r.encParameter,e),c=_Te(r.encryptedContentAsn1),l=Hs.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(Our,"_decryptSafeContents");function Qur(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Se.validate(o,Nur,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Se.derToOid(a.bagId),attributes:Uur(a.bagAttributes)};n.push(u);var f,p,m=a.bagValue.value[0];switch(u.type){case Ji.oids.pkcs8ShroudedKeyBag:if(m=Ji.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ji.oids.keyBag:try{u.key=Ji.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Ji.oids.certBag:f=Lur,p=s(function(){if(Se.derToOid(a.certId)!==Ji.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Se.derToOid(a.certId),g}var A=Se.fromDer(a.cert,e);try{u.cert=Ji.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!Se.validate(m,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(Qur,"_decodeSafeContents");function Uur(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Se.validate(t[r],Mur,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Se.derToOid(n.oid);if(Ji.oids[a]!==void 0){e[Ji.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Ji.oids[a]].push(n.values[c].value)}}return e}s(Uur,"_decodeBagAttributes");HQ.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Hs.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=Hs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Ji.certificateFromPem(a));var c=Hs.md.sha1.create();c.update(Se.toDer(Ji.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=Hs.random.getBytes(20);var l=[];i!==null&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,l));var u=[],f=[];e!==null&&(Hs.util.isArray(e)?f=e:f=[e]);for(var p=[],m=0;m<f.length;++m){e=f[m],typeof e=="string"&&(e=Ji.certificateFromPem(e));var h=m===0?o:void 0,g=Ji.certificateToAsn1(e),A=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(g).getBytes())])])]),h]);p.push(A)}if(p.length>0){var y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,p),E=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(y).getBytes())])]);u.push(E)}var b=null;if(t!==null){var S=Ji.wrapRsaPrivateKey(Ji.privateKeyToAsn1(t));r===null?b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[S]),o]):b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Ji.encryptPrivateKeyInfo(S,r,n)]),o]);var R=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[b]),B=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(R).getBytes())])]);u.push(B)}var L=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,u),O;if(n.useMac){var c=Hs.md.sha1.create(),K=new Hs.util.ByteBuffer(Hs.random.getBytes(n.saltSize)),V=n.count,t=HQ.generateKey(r,K,3,V,20),z=Hs.hmac.create();z.start(c,t),z.update(Se.toDer(L).getBytes());var Q=z.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Q.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,K.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(V).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(L).getBytes())])]),O])};HQ.generateKey=Hs.pbe.generatePkcs12Key});var PTe=H((Mgi,tct)=>{d();var Iw=_i();VA();vw();ITe();Ek();Tre();RTe();Dre();UQ();qo();Mre();var kTe=Iw.asn1,$N=tct.exports=Iw.pki=Iw.pki||{};$N.pemToDer=function(t){var e=Iw.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Iw.util.createBuffer(e.body)};$N.privateKeyFromPem=function(t){var e=Iw.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=kTe.fromDer(e.body);return $N.privateKeyFromAsn1(n)};$N.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:kTe.toDer($N.privateKeyToAsn1(t)).getBytes()};return Iw.pem.encode(r,{maxline:e})};$N.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:kTe.toDer(t).getBytes()};return Iw.pem.encode(r,{maxline:e})}});var FTe=H((Fgi,lct)=>{d();var Pt=_i();VA();MN();xre();Ek();PTe();$h();QN();qo();var Qre=s(function(t,e,r,n){var i=Pt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=Pt.util.createBuffer(),f=Pt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);f.start("MD5",c);var h=Pt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",l);var A=Pt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),A.putBuffer(f.digest());return i.putBytes(Pt.util.xorBytes(h.getBytes(),A.getBytes(),n)),i},"prf_TLS1"),qur=s(function(t,e,r){var n=Pt.hmac.create();n.start("SHA1",t);var i=Pt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Hur=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=Pt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),$ur=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=Pt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),Xp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Pt.util.createBuffer(t.getBytes(r))},"readVector"),Vh=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),oe={};oe.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};oe.SupportedVersions=[oe.Versions.TLS_1_1,oe.Versions.TLS_1_0];oe.Version=oe.SupportedVersions[0];oe.MaxFragment=15360;oe.ConnectionEnd={server:0,client:1};oe.PRFAlgorithm={tls_prf_sha256:0};oe.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};oe.CipherType={stream:0,block:1,aead:2};oe.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};oe.CompressionMethod={none:0,deflate:1};oe.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};oe.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};oe.Alert={};oe.Alert.Level={warning:1,fatal:2};oe.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};oe.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};oe.CipherSuites={};oe.getCipherSuite=function(t){var e=null;for(var r in oe.CipherSuites){var n=oe.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};oe.handleUnexpected=function(t,e){var r=!t.open&&t.entity===oe.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})};oe.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(oe.queue(t,oe.createAlert(t,{level:oe.Alert.Level.warning,description:oe.Alert.Description.no_renegotiation})),oe.flush(t)),t.process()};oe.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===oe.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:Pt.util.createBuffer(o.getBytes(32)),session_id:Xp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=Xp(o,2),n.compression_methods=Xp(o,1)),a=r-(a-o.length()),a>0){for(var c=Xp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:Xp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=Xp(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(Xp(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=oe.getCipherSuite(n.cipher_suite);else for(var m=Pt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=oe.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure},cipherSuite:Pt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=oe.CompressionMethod.none}return n};oe.createSecurityParameters=function(t,e){var r=t.entity===oe.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:oe.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:oe.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};oe.handleServerHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=ict,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=jur,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.session.id=i,t.process()}};oe.handleClientHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=Pt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<oe.SupportedVersions.length&&(a=oe.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=MTe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Xur:NTe,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.open=!0,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHello(t)})),t.session.resuming?(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.pending=oe.createConnectionState(t),t.state.current.write=t.state.pending.write,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))):(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)})),t.fail||(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerKeyExchange(t)})),t.verifyClient!==!1&&oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificateRequest(t)})),oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHelloDone(t)})))),oe.flush(t),t.process()}};oe.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Xp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=Xp(i.certificate_list,3),a=Pt.asn1.fromDer(o),o=Pt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var l=t.entity===oe.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?rct:NTe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],oe.verifyCertificateChain(t,c)&&(t.expect=l?rct:NTe)),t.process()};oe.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});t.expect=Gur,t.process()};oe.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Xp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=Pt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=Pt.random.getBytes(48)}t.expect=MTe,t.session.clientCertificate!==null&&(t.expect=Zur),t.process()};oe.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Xp(n,1),certificate_authorities:Xp(n,2)};t.session.certificateRequest=i,t.expect=Vur,t.process()};oe.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:Xp(n,2).getBytes()},a=Pt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure}})}t.expect=MTe,t.process()};oe.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!Pt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)}),oe.queue(t,e)),e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createClientKeyExchange(t)}),oe.queue(t,e),t.expect=Kur;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createCertificateVerify(c,l)})),oe.queue(c,oe.createRecord(c,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),c.state.pending=oe.createConnectionState(c),c.state.current.write=c.state.pending.write,oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createFinished(c)})),c.expect=ict,oe.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);oe.getClientSignature(t,a)};oe.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var r=t.entity===oe.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=oe.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?zur:edr,t.process()};oe.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=Pt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===oe.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=Qre;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))),t.expect=a?Yur:tdr,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,oe.flush(t),t.isConnected=!0,t.connected(t),t.process()};oe.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case oe.Alert.Description.close_notify:i="Connection closed.";break;case oe.Alert.Description.unexpected_message:i="Unexpected message.";break;case oe.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case oe.Alert.Description.decryption_failed:i="Decryption failed.";break;case oe.Alert.Description.record_overflow:i="Record overflow.";break;case oe.Alert.Description.decompression_failure:i="Decompression failed.";break;case oe.Alert.Description.handshake_failure:i="Handshake failure.";break;case oe.Alert.Description.bad_certificate:i="Bad certificate.";break;case oe.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case oe.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case oe.Alert.Description.certificate_expired:i="Certificate expired.";break;case oe.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case oe.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case oe.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case oe.Alert.Description.access_denied:i="Access denied.";break;case oe.Alert.Description.decode_error:i="Decode error.";break;case oe.Alert.Description.decrypt_error:i="Decrypt error.";break;case oe.Alert.Description.export_restriction:i="Export restriction.";break;case oe.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case oe.Alert.Description.insufficient_security:i="Insufficient security.";break;case oe.Alert.Description.internal_error:i="Internal error.";break;case oe.Alert.Description.user_canceled:i="User canceled.";break;case oe.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===oe.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===oe.ConnectionEnd.client?"server":"client",alert:n}),t.process()};oe.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=Pt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in Ore[t.entity][t.expect]?(t.entity===oe.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Pt.md.md5.create(),sha1:Pt.md.sha1.create()}),n!==oe.HandshakeType.hello_request&&n!==oe.HandshakeType.certificate_verify&&n!==oe.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),Ore[t.entity][t.expect][n](t,e,i)):oe.handleUnexpected(t,e)};oe.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};oe.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===oe.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();oe.queue(t,oe.createRecord(t,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_response,o)})),oe.flush(t)}else if(n===oe.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Pt.util.createBuffer(o))}t.process()};var Wur=0,jur=1,rct=2,Gur=3,Vur=4,ict=5,zur=6,Yur=7,Kur=8,Jur=0,Xur=1,NTe=2,Zur=3,MTe=4,edr=5,tdr=6,ne=oe.handleUnexpected,oct=oe.handleChangeCipherSpec,td=oe.handleAlert,Mf=oe.handleHandshake,sct=oe.handleApplicationData,rd=oe.handleHeartbeat,LTe=[];LTe[oe.ConnectionEnd.client]=[[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[oct,td,ne,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,sct,rd],[ne,td,Mf,ne,rd]];LTe[oe.ConnectionEnd.server]=[[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,ne,rd],[oct,td,ne,ne,rd],[ne,td,Mf,ne,rd],[ne,td,Mf,sct,rd],[ne,td,Mf,ne,rd]];var Tw=oe.handleHelloRequest,rdr=oe.handleServerHello,act=oe.handleCertificate,nct=oe.handleServerKeyExchange,DTe=oe.handleCertificateRequest,Lre=oe.handleServerHelloDone,cct=oe.handleFinished,Ore=[];Ore[oe.ConnectionEnd.client]=[[ne,ne,rdr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,act,nct,DTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,nct,DTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,DTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,cct],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];var ndr=oe.handleClientHello,idr=oe.handleClientKeyExchange,odr=oe.handleCertificateVerify;Ore[oe.ConnectionEnd.server]=[[ne,ndr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,act,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,idr,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,odr,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,cct],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];oe.generateKeys=function(t,e){var r=Qre,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===oe.Versions.TLS_1_0.major&&t.version.minor===oe.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};oe.createConnectionState=function(t){var e=t.entity===oe.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=oe.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case oe.CompressionMethod.none:break;case oe.CompressionMethod.deflate:n.read.compressFunction=$ur,n.write.compressFunction=Hur;break;default:throw new Error("Unsupported compression algorithm.")}}return n};oe.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Pt.util.createBuffer();return r.putInt32(e),r.putBytes(Pt.random.getBytes(28)),r};oe.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};oe.createAlert=function(t,e){var r=Pt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),oe.createRecord(t,{type:oe.ContentType.alert,data:r})};oe.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Pt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=Pt.util.createBuffer();o.putByte(oe.CompressionMethod.none);var a=o.length(),c=Pt.util.createBuffer();if(t.virtualHost){var l=Pt.util.createBuffer();l.putByte(0),l.putByte(0);var u=Pt.util.createBuffer();u.putByte(0),Vh(u,2,Pt.util.createBuffer(t.virtualHost));var f=Pt.util.createBuffer();Vh(f,2,u),Vh(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=Pt.util.createBuffer();return g.putByte(oe.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),Vh(g,1,Pt.util.createBuffer(m)),Vh(g,2,e),Vh(g,1,o),p>0&&Vh(g,2,c),g};oe.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Pt.util.createBuffer();return n.putByte(oe.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Vh(n,1,Pt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};oe.createCertificate=function(t){var e=t.entity===oe.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=Pt.util.createBuffer();if(r!==null)try{Pt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=Pt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=Pt.util.createBuffer(c.body);o===null&&(o=Pt.asn1.fromDer(u.bytes(),!1));var f=Pt.util.createBuffer();Vh(f,3,u),i.putBuffer(f)}r=Pt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var p=3+i.length(),m=Pt.util.createBuffer();return m.putByte(oe.HandshakeType.certificate),m.putInt24(p),Vh(m,3,i),m};oe.createClientKeyExchange=function(t){var e=Pt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Pt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=Pt.util.createBuffer();return o.putByte(oe.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};oe.createServerKeyExchange=function(t){var e=0,r=Pt.util.createBuffer();return e>0&&(r.putByte(oe.HandshakeType.server_key_exchange),r.putInt24(e)),r};oe.getClientSignature=function(t,e){var r=Pt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=Pt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};oe.createCertificateVerify=function(t,e){var r=e.length+2,n=Pt.util.createBuffer();return n.putByte(oe.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};oe.createCertificateRequest=function(t){var e=Pt.util.createBuffer();e.putByte(1);var r=Pt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=Pt.pki.distinguishedNameToAsn1(i.subject),a=Pt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=Pt.util.createBuffer();return l.putByte(oe.HandshakeType.certificate_request),l.putInt24(c),Vh(l,1,e),Vh(l,2,r),l};oe.createServerHelloDone=function(t){var e=Pt.util.createBuffer();return e.putByte(oe.HandshakeType.server_hello_done),e.putInt24(0),e};oe.createChangeCipherSpec=function(){var t=Pt.util.createBuffer();return t.putByte(1),t};oe.createFinished=function(t){var e=Pt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===oe.ConnectionEnd.client,n=t.session.sp,i=12,o=Qre,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=Pt.util.createBuffer();return c.putByte(oe.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};oe.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Pt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(Pt.random.getBytes(o)),n};oe.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===oe.ContentType.handshake||e.type===oe.ContentType.alert||e.type===oe.ContentType.change_cipher_spec))){if(e.type===oe.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=oe.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>oe.MaxFragment;)n.push(oe.createRecord(t,{type:e.type,data:Pt.util.createBuffer(i.slice(0,oe.MaxFragment))})),i=i.slice(oe.MaxFragment);i.length>0&&n.push(oe.createRecord(t,{type:e.type,data:Pt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};oe.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var BTe=s(function(t){switch(t){case!0:return!0;case Pt.pki.certificateError.bad_certificate:return oe.Alert.Description.bad_certificate;case Pt.pki.certificateError.unsupported_certificate:return oe.Alert.Description.unsupported_certificate;case Pt.pki.certificateError.certificate_revoked:return oe.Alert.Description.certificate_revoked;case Pt.pki.certificateError.certificate_expired:return oe.Alert.Description.certificate_expired;case Pt.pki.certificateError.certificate_unknown:return oe.Alert.Description.certificate_unknown;case Pt.pki.certificateError.unknown_ca:return oe.Alert.Description.unknown_ca;default:return oe.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),sdr=s(function(t){switch(t){case!0:return!0;case oe.Alert.Description.bad_certificate:return Pt.pki.certificateError.bad_certificate;case oe.Alert.Description.unsupported_certificate:return Pt.pki.certificateError.unsupported_certificate;case oe.Alert.Description.certificate_revoked:return Pt.pki.certificateError.certificate_revoked;case oe.Alert.Description.certificate_expired:return Pt.pki.certificateError.certificate_expired;case oe.Alert.Description.certificate_unknown:return Pt.pki.certificateError.certificate_unknown;case oe.Alert.Description.unknown_ca:return Pt.pki.certificateError.unknown_ca;default:return Pt.pki.certificateError.bad_certificate}},"_alertDescToCertError");oe.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=BTe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!Pt.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=sdr(u))}return u},Pt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||Pt.util.isArray(i))&&(i={send:!0,alert:{level:oe.Alert.Level.fatal,description:BTe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:oe.Alert.Level.fatal,description:BTe(i.error)}),t.error(t,i)}return!t.fail};oe.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=Pt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=Pt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};oe.createConnection=function(t){var e=null;t.caStore?Pt.util.isArray(t.caStore)?e=Pt.pki.createCaStore(t.caStore):e=t.caStore:e=Pt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in oe.CipherSuites)r.push(oe.CipherSuites[n])}var i=t.server?oe.ConnectionEnd.server:oe.ConnectionEnd.client,o=t.sessionCache?oe.createSessionCache(t.sessionCache):null,a={version:{major:oe.Version.major,minor:oe.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Pt.util.createBuffer(),tlsData:Pt.util.createBuffer(),data:Pt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===oe.ConnectionEnd.client?"client":"server"),p.send&&(oe.queue(f,oe.createAlert(f,p.alert)),oe.flush(f));var m=p.fatal!==!1;m&&(f.fail=!0),t.error(f,p),m&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:oe.Version.major,minor:oe.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===oe.ConnectionEnd.client?Wur:Jur,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=oe.createConnectionState(a)},a.reset();var c=s(function(f,p){var m=p.type-oe.ContentType.change_cipher_spec,h=LTe[f.entity][f.expect];m in h?h[m](f,p):oe.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,m=f.input,h=m.length();if(h<5)p=5-h;else{f.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:Pt.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,m=f.input,h=m.length();if(h<f.record.length)p=f.record.length-h;else{f.record.fragment.putBytes(m.getBytes(f.record.length)),m.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==oe.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Pt.md.md5.create(),sha1:Pt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=oe.createRandom().getBytes(),a.open=!0,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.handshake,data:oe.createClientHello(a)})),oe.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return oe.queue(a,oe.createRecord(a,{type:oe.ContentType.application_data,data:Pt.util.createBuffer(f)})),oe.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof Pt.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_request,f,p)})),oe.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,oe.queue(a,oe.createAlert(a,{level:oe.Alert.Level.warning,description:oe.Alert.Description.close_notify})),oe.flush(a)),a.closed(a)),a.reset(f)},a};lct.exports=Pt.tls=Pt.tls||{};for(Fre in oe)typeof oe[Fre]!="function"&&(Pt.tls[Fre]=oe[Fre]);var Fre;Pt.tls.prf_tls1=Qre;Pt.tls.hmac_sha1=qur;Pt.tls.createSessionCache=oe.createSessionCache;Pt.tls.createConnection=oe.createConnection});var fct=H((Ugi,dct)=>{d();var ww=_i();Cw();FTe();var zh=dct.exports=ww.tls;zh.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=zh.BulkCipherAlgorithm.aes,t.cipher_type=zh.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=zh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:uct};zh.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=zh.BulkCipherAlgorithm.aes,t.cipher_type=zh.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=zh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:uct};function uct(t,e,r){var n=e.entity===ww.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ww.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ww.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=udr,t.write.cipherFunction=adr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=zh.hmac_sha1}s(uct,"initConnectionState");function adr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===zh.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ww.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=zh.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(cdr)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(adr,"encrypt_aes_cbc_sha1");function cdr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(cdr,"encrypt_aes_cbc_sha1_padding");function ldr(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(ldr,"decrypt_aes_cbc_sha1_padding");function udr(t,e){var r=!1,n;t.version.minor===zh.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(ldr);var o=e.macLength,a=ww.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=ww.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=ddr(e.macKey,a,l)&&r,r}s(udr,"decrypt_aes_cbc_sha1");function ddr(t,e,r){var n=ww.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(ddr,"compareMacs")});var UTe=H(($gi,gct)=>{d();var la=_i();s1();qo();var $Q=gct.exports=la.sha512=la.sha512||{};la.md.sha512=la.md.algorithms.sha512=$Q;var mct=la.sha384=la.sha512.sha384=la.sha512.sha384||{};mct.create=function(){return $Q.create("SHA-384")};la.md.sha384=la.md.algorithms.sha384=mct;la.sha512.sha256=la.sha512.sha256||{create:s(function(){return $Q.create("SHA-512/256")},"create")};la.md["sha512/256"]=la.md.algorithms["sha512/256"]=la.sha512.sha256;la.sha512.sha224=la.sha512.sha224||{create:s(function(){return $Q.create("SHA-512/224")},"create")};la.md["sha512/224"]=la.md.algorithms["sha512/224"]=la.sha512.sha224;$Q.create=function(t){if(hct||fdr(),typeof t>"u"&&(t="SHA-512"),!(t in _k))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=_k[t],r=null,n=la.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=la.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=la.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),pct(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=la.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes(OTe.substr(0,c.blockLength-f));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);pct(A,i,l);var y=la.util.createBuffer(),E;t==="SHA-512"?E=A.length:t==="SHA-384"?E=A.length-2:E=A.length-4;for(var g=0;g<E;++g)y.putInt32(A[g][0]),(g!==E-1||t!=="SHA-512/224")&&y.putInt32(A[g][1]);return y},c};var OTe=null,hct=!1,QTe=null,_k=null;function fdr(){OTe="\x80",OTe+=la.util.fillString("\0",128),QTe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_k={},_k["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_k["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_k["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_k["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],hct=!0}s(fdr,"_init");function pct(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,A,y,E,b,S,R,B,L,O,K,V,z,Q,U,Z,J,j,$,X,ie,ae,te,pe,Ae=r.length();Ae>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ie=e[j-2],$=ie[0],X=ie[1],n=(($>>>19|X<<13)^(X>>>29|$<<3)^$>>>6)>>>0,i=(($<<13|X>>>19)^(X<<3|$>>>29)^($<<26|X>>>6))>>>0,te=e[j-15],$=te[0],X=te[1],o=(($>>>1|X<<31)^($>>>8|X<<24)^$>>>7)>>>0,a=(($<<31|X>>>1)^($<<24|X>>>8)^($<<25|X>>>7))>>>0,ae=e[j-7],pe=e[j-16],X=i+ae[1]+a+pe[1],e[j][0]=n+ae[0]+o+pe[0]+(X/4294967296>>>0)>>>0,e[j][1]=X>>>0;for(A=t[0][0],y=t[0][1],E=t[1][0],b=t[1][1],S=t[2][0],R=t[2][1],B=t[3][0],L=t[3][1],O=t[4][0],K=t[4][1],V=t[5][0],z=t[5][1],Q=t[6][0],U=t[6][1],Z=t[7][0],J=t[7][1],j=0;j<80;++j)u=((O>>>14|K<<18)^(O>>>18|K<<14)^(K>>>9|O<<23))>>>0,f=((O<<18|K>>>14)^(O<<14|K>>>18)^(K<<23|O>>>9))>>>0,p=(Q^O&(V^Q))>>>0,m=(U^K&(z^U))>>>0,c=((A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25))>>>0,l=((A<<4|y>>>28)^(y<<30|A>>>2)^(y<<25|A>>>7))>>>0,h=(A&E|S&(A^E))>>>0,g=(y&b|R&(y^b))>>>0,X=J+f+m+QTe[j][1]+e[j][1],n=Z+u+p+QTe[j][0]+e[j][0]+(X/4294967296>>>0)>>>0,i=X>>>0,X=l+g,o=c+h+(X/4294967296>>>0)>>>0,a=X>>>0,Z=Q,J=U,Q=V,U=z,V=O,z=K,X=L+i,O=B+n+(X/4294967296>>>0)>>>0,K=X>>>0,B=S,L=R,S=E,R=b,E=A,b=y,X=i+a,A=n+o+(X/4294967296>>>0)>>>0,y=X>>>0;X=t[0][1]+y,t[0][0]=t[0][0]+A+(X/4294967296>>>0)>>>0,t[0][1]=X>>>0,X=t[1][1]+b,t[1][0]=t[1][0]+E+(X/4294967296>>>0)>>>0,t[1][1]=X>>>0,X=t[2][1]+R,t[2][0]=t[2][0]+S+(X/4294967296>>>0)>>>0,t[2][1]=X>>>0,X=t[3][1]+L,t[3][0]=t[3][0]+B+(X/4294967296>>>0)>>>0,t[3][1]=X>>>0,X=t[4][1]+K,t[4][0]=t[4][0]+O+(X/4294967296>>>0)>>>0,t[4][1]=X>>>0,X=t[5][1]+z,t[5][0]=t[5][0]+V+(X/4294967296>>>0)>>>0,t[5][1]=X>>>0,X=t[6][1]+U,t[6][0]=t[6][0]+Q+(X/4294967296>>>0)>>>0,t[6][1]=X>>>0,X=t[7][1]+J,t[7][0]=t[7][0]+Z+(X/4294967296>>>0)>>>0,t[7][1]=X>>>0,Ae-=128}}s(pct,"_update")});var Act=H(qTe=>{d();var pdr=_i();VA();var gu=pdr.asn1;qTe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:gu.Class.UNIVERSAL,type:gu.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:gu.Class.UNIVERSAL,type:gu.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:gu.Class.UNIVERSAL,type:gu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:gu.Class.UNIVERSAL,type:gu.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:gu.Class.UNIVERSAL,type:gu.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};qTe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:gu.Class.UNIVERSAL,type:gu.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:gu.Class.UNIVERSAL,type:gu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:gu.Class.UNIVERSAL,type:gu.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:gu.Class.UNIVERSAL,type:gu.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var kct=H((zgi,Rct)=>{d();var nd=_i();QQ();$h();UTe();qo();var bct=Act(),mdr=bct.publicKeyValidator,hdr=bct.privateKeyValidator;typeof yct>"u"&&(yct=nd.jsbn.BigInteger);var yct,WTe=nd.util.ByteBuffer,L0=typeof Buffer>"u"?Uint8Array:Buffer;nd.pki=nd.pki||{};Rct.exports=nd.pki.ed25519=nd.ed25519=nd.ed25519||{};var Xi=nd.ed25519;Xi.constants={};Xi.constants.PUBLIC_KEY_BYTE_LENGTH=32;Xi.constants.PRIVATE_KEY_BYTE_LENGTH=64;Xi.constants.SEED_BYTE_LENGTH=32;Xi.constants.SIGN_BYTE_LENGTH=64;Xi.constants.HASH_BYTE_LENGTH=64;Xi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=nd.random.getBytesSync(Xi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Xi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Xi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=eE({message:e,encoding:"binary"});for(var r=new L0(Xi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new L0(Xi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Cdr(r,n),{publicKey:r,privateKey:n}};Xi.privateKeyFromAsn1=function(t){var e={},r=[],n=nd.asn1.validate(t,hdr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=nd.asn1.derToOid(e.privateKeyOid),a=nd.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=eE({message:nd.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};Xi.publicKeyFromAsn1=function(t){var e={},r=[],n=nd.asn1.validate(t,mdr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=nd.asn1.derToOid(e.publicKeyOid),a=nd.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==Xi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return eE({message:c,encoding:"binary"})};Xi.publicKeyFromPrivateKey=function(t){t=t||{};var e=eE({message:t.privateKey,encoding:"binary"});if(e.length!==Xi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Xi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new L0(Xi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Xi.sign=function(t){t=t||{};var e=eE(t),r=eE({message:t.privateKey,encoding:"binary"});if(r.length===Xi.constants.SEED_BYTE_LENGTH){var n=Xi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Xi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Xi.constants.SEED_BYTE_LENGTH+" or "+Xi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new L0(Xi.constants.SIGN_BYTE_LENGTH+e.length);vdr(i,e,e.length,r);for(var o=new L0(Xi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Xi.verify=function(t){t=t||{};var e=eE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=eE({message:t.signature,encoding:"binary"});if(r.length!==Xi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Xi.constants.SIGN_BYTE_LENGTH);var n=eE({message:t.publicKey,encoding:"binary"});if(n.length!==Xi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Xi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new L0(Xi.constants.SIGN_BYTE_LENGTH+e.length),o=new L0(Xi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Xi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Xi.constants.SIGN_BYTE_LENGTH]=e[a];return xdr(o,i,i.length,n)>=0};function eE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof L0)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new WTe(e,r)}else if(!(e instanceof WTe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new L0(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(eE,"messageToNativeBuffer");var jTe=Mn(),Ure=Mn([1]),gdr=Mn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Adr=Mn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Cct=Mn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),vct=Mn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),HTe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),ydr=Mn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function WQ(t,e){var r=nd.md.sha512.create(),n=new WTe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new L0(Xi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(WQ,"sha512");function Cdr(t,e){var r=[Mn(),Mn(),Mn(),Mn()],n,i=WQ(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,YTe(r,i),zTe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(Cdr,"crypto_sign_keypair");function vdr(t,e,r,n){var i,o,a=new Float64Array(64),c=[Mn(),Mn(),Mn(),Mn()],l=WQ(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=WQ(t.subarray(32),r+32);for(GTe(f),YTe(c,f),zTe(t,c),i=32;i<64;++i)t[i]=n[i];var p=WQ(t,r+64);for(GTe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return Ict(t.subarray(32),a),u}s(vdr,"crypto_sign");function xdr(t,e,r,n){var i,o,a=new L0(32),c=[Mn(),Mn(),Mn(),Mn()],l=[Mn(),Mn(),Mn(),Mn()];if(o=-1,r<64||Edr(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=WQ(t,r);if(GTe(u),Sct(c,l,u),YTe(l,e.subarray(32)),VTe(c,l),zTe(a,c),r-=64,Tct(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(xdr,"crypto_sign_open");function Ict(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*HTe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*HTe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*HTe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(Ict,"modL");function GTe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;Ict(t,e)}s(GTe,"reduce");function VTe(t,e){var r=Mn(),n=Mn(),i=Mn(),o=Mn(),a=Mn(),c=Mn(),l=Mn(),u=Mn(),f=Mn();jN(r,t[1],t[0]),jN(f,e[1],e[0]),_s(r,r,f),WN(n,t[0],t[1]),WN(f,e[0],e[1]),_s(n,n,f),_s(i,t[3],e[3]),_s(i,i,Adr),_s(o,t[2],e[2]),WN(o,o,o),jN(a,n,r),jN(c,o,i),WN(l,o,i),WN(u,n,r),_s(t[0],a,c),_s(t[1],u,l),_s(t[2],l,c),_s(t[3],a,u)}s(VTe,"add");function xct(t,e,r){for(var n=0;n<4;++n)_ct(t[n],e[n],r)}s(xct,"cswap");function zTe(t,e){var r=Mn(),n=Mn(),i=Mn();wdr(i,e[2]),_s(r,e[0],i),_s(n,e[1],i),qre(t,n),t[31]^=wct(r)<<7}s(zTe,"pack");function qre(t,e){var r,n,i,o=Mn(),a=Mn();for(r=0;r<16;++r)a[r]=e[r];for($Te(a),$Te(a),$Te(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,_ct(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(qre,"pack25519");function Edr(t,e){var r=Mn(),n=Mn(),i=Mn(),o=Mn(),a=Mn(),c=Mn(),l=Mn();return Sw(t[2],Ure),bdr(t[1],e),Rk(i,t[1]),_s(o,i,gdr),jN(i,i,t[2]),WN(o,t[2],o),Rk(a,o),Rk(c,a),_s(l,c,a),_s(r,l,i),_s(r,r,o),Idr(r,r),_s(r,r,i),_s(r,r,o),_s(r,r,o),_s(t[0],r,o),Rk(n,t[0]),_s(n,n,o),Ect(n,i)&&_s(t[0],t[0],ydr),Rk(n,t[0]),_s(n,n,o),Ect(n,i)?-1:(wct(t[0])===e[31]>>7&&jN(t[0],jTe,t[0]),_s(t[3],t[0],t[1]),0)}s(Edr,"unpackneg");function bdr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(bdr,"unpack25519");function Idr(t,e){var r=Mn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Rk(r,r),n!==1&&_s(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Idr,"pow2523");function Ect(t,e){var r=new L0(32),n=new L0(32);return qre(r,t),qre(n,e),Tct(r,0,n,0)}s(Ect,"neq25519");function Tct(t,e,r,n){return Tdr(t,e,r,n,32)}s(Tct,"crypto_verify_32");function Tdr(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(Tdr,"vn");function wct(t){var e=new L0(32);return qre(e,t),e[0]&1}s(wct,"par25519");function Sct(t,e,r){var n,i;for(Sw(t[0],jTe),Sw(t[1],Ure),Sw(t[2],Ure),Sw(t[3],jTe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,xct(t,e,n),VTe(e,t),VTe(t,t),xct(t,e,n)}s(Sct,"scalarmult");function YTe(t,e){var r=[Mn(),Mn(),Mn(),Mn()];Sw(r[0],Cct),Sw(r[1],vct),Sw(r[2],Ure),_s(r[3],Cct,vct),Sct(t,r,e)}s(YTe,"scalarbase");function Sw(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(Sw,"set25519");function wdr(t,e){var r=Mn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Rk(r,r),n!==2&&n!==4&&_s(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(wdr,"inv25519");function $Te(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s($Te,"car25519");function _ct(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(_ct,"sel25519");function Mn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Mn,"gf");function WN(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(WN,"A");function jN(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(jN,"Z");function Rk(t,e){_s(t,e,e)}s(Rk,"S");function _s(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=0,g=0,A=0,y=0,E=0,b=0,S=0,R=0,B=0,L=0,O=0,K=0,V=0,z=0,Q=0,U=0,Z=0,J=0,j=0,$=0,X=0,ie=0,ae=0,te=r[0],pe=r[1],Ae=r[2],Oe=r[3],Te=r[4],Je=r[5],Fe=r[6],lt=r[7],_t=r[8],xt=r[9],ht=r[10],ue=r[11],Ue=r[12],ye=r[13],$e=r[14],se=r[15];n=e[0],o+=n*te,a+=n*pe,c+=n*Ae,l+=n*Oe,u+=n*Te,f+=n*Je,p+=n*Fe,m+=n*lt,h+=n*_t,g+=n*xt,A+=n*ht,y+=n*ue,E+=n*Ue,b+=n*ye,S+=n*$e,R+=n*se,n=e[1],a+=n*te,c+=n*pe,l+=n*Ae,u+=n*Oe,f+=n*Te,p+=n*Je,m+=n*Fe,h+=n*lt,g+=n*_t,A+=n*xt,y+=n*ht,E+=n*ue,b+=n*Ue,S+=n*ye,R+=n*$e,B+=n*se,n=e[2],c+=n*te,l+=n*pe,u+=n*Ae,f+=n*Oe,p+=n*Te,m+=n*Je,h+=n*Fe,g+=n*lt,A+=n*_t,y+=n*xt,E+=n*ht,b+=n*ue,S+=n*Ue,R+=n*ye,B+=n*$e,L+=n*se,n=e[3],l+=n*te,u+=n*pe,f+=n*Ae,p+=n*Oe,m+=n*Te,h+=n*Je,g+=n*Fe,A+=n*lt,y+=n*_t,E+=n*xt,b+=n*ht,S+=n*ue,R+=n*Ue,B+=n*ye,L+=n*$e,O+=n*se,n=e[4],u+=n*te,f+=n*pe,p+=n*Ae,m+=n*Oe,h+=n*Te,g+=n*Je,A+=n*Fe,y+=n*lt,E+=n*_t,b+=n*xt,S+=n*ht,R+=n*ue,B+=n*Ue,L+=n*ye,O+=n*$e,K+=n*se,n=e[5],f+=n*te,p+=n*pe,m+=n*Ae,h+=n*Oe,g+=n*Te,A+=n*Je,y+=n*Fe,E+=n*lt,b+=n*_t,S+=n*xt,R+=n*ht,B+=n*ue,L+=n*Ue,O+=n*ye,K+=n*$e,V+=n*se,n=e[6],p+=n*te,m+=n*pe,h+=n*Ae,g+=n*Oe,A+=n*Te,y+=n*Je,E+=n*Fe,b+=n*lt,S+=n*_t,R+=n*xt,B+=n*ht,L+=n*ue,O+=n*Ue,K+=n*ye,V+=n*$e,z+=n*se,n=e[7],m+=n*te,h+=n*pe,g+=n*Ae,A+=n*Oe,y+=n*Te,E+=n*Je,b+=n*Fe,S+=n*lt,R+=n*_t,B+=n*xt,L+=n*ht,O+=n*ue,K+=n*Ue,V+=n*ye,z+=n*$e,Q+=n*se,n=e[8],h+=n*te,g+=n*pe,A+=n*Ae,y+=n*Oe,E+=n*Te,b+=n*Je,S+=n*Fe,R+=n*lt,B+=n*_t,L+=n*xt,O+=n*ht,K+=n*ue,V+=n*Ue,z+=n*ye,Q+=n*$e,U+=n*se,n=e[9],g+=n*te,A+=n*pe,y+=n*Ae,E+=n*Oe,b+=n*Te,S+=n*Je,R+=n*Fe,B+=n*lt,L+=n*_t,O+=n*xt,K+=n*ht,V+=n*ue,z+=n*Ue,Q+=n*ye,U+=n*$e,Z+=n*se,n=e[10],A+=n*te,y+=n*pe,E+=n*Ae,b+=n*Oe,S+=n*Te,R+=n*Je,B+=n*Fe,L+=n*lt,O+=n*_t,K+=n*xt,V+=n*ht,z+=n*ue,Q+=n*Ue,U+=n*ye,Z+=n*$e,J+=n*se,n=e[11],y+=n*te,E+=n*pe,b+=n*Ae,S+=n*Oe,R+=n*Te,B+=n*Je,L+=n*Fe,O+=n*lt,K+=n*_t,V+=n*xt,z+=n*ht,Q+=n*ue,U+=n*Ue,Z+=n*ye,J+=n*$e,j+=n*se,n=e[12],E+=n*te,b+=n*pe,S+=n*Ae,R+=n*Oe,B+=n*Te,L+=n*Je,O+=n*Fe,K+=n*lt,V+=n*_t,z+=n*xt,Q+=n*ht,U+=n*ue,Z+=n*Ue,J+=n*ye,j+=n*$e,$+=n*se,n=e[13],b+=n*te,S+=n*pe,R+=n*Ae,B+=n*Oe,L+=n*Te,O+=n*Je,K+=n*Fe,V+=n*lt,z+=n*_t,Q+=n*xt,U+=n*ht,Z+=n*ue,J+=n*Ue,j+=n*ye,$+=n*$e,X+=n*se,n=e[14],S+=n*te,R+=n*pe,B+=n*Ae,L+=n*Oe,O+=n*Te,K+=n*Je,V+=n*Fe,z+=n*lt,Q+=n*_t,U+=n*xt,Z+=n*ht,J+=n*ue,j+=n*Ue,$+=n*ye,X+=n*$e,ie+=n*se,n=e[15],R+=n*te,B+=n*pe,L+=n*Ae,O+=n*Oe,K+=n*Te,V+=n*Je,z+=n*Fe,Q+=n*lt,U+=n*_t,Z+=n*xt,J+=n*ht,j+=n*ue,$+=n*Ue,X+=n*ye,ie+=n*$e,ae+=n*se,o+=38*B,a+=38*L,c+=38*O,l+=38*K,u+=38*V,f+=38*z,p+=38*Q,m+=38*U,h+=38*Z,g+=38*J,A+=38*j,y+=38*$,E+=38*X,b+=38*ie,S+=38*ae,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=A,t[11]=y,t[12]=E,t[13]=b,t[14]=S,t[15]=R}s(_s,"M")});var Nct=H((Jgi,Bct)=>{d();var Zp=_i();qo();$h();QQ();Bct.exports=Zp.kem=Zp.kem||{};var Pct=Zp.jsbn.BigInteger;Zp.kem.rsa={};Zp.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Zp.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new Pct(Zp.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(Pct.ONE)<=0);c=Zp.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=Zp.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};Zp.kem.kdf1=function(t,e){Dct(this,t,0,e||t.digestLength)};Zp.kem.kdf2=function(t,e){Dct(this,t,1,e||t.digestLength)};function Dct(t,e,r,n){t.generate=function(i,o){for(var a=new Zp.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new Zp.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(Dct,"_createKDF")});var Oct=H((eAi,Fct)=>{d();var mo=_i();qo();Fct.exports=mo.log=mo.log||{};mo.log.levels=["none","error","warning","info","debug","verbose","max"];var Hre={},XTe=[],GQ=null;mo.log.LEVEL_LOCKED=2;mo.log.NO_LEVEL_CHECK=4;mo.log.INTERPOLATE=8;for(m1=0;m1<mo.log.levels.length;++m1)KTe=mo.log.levels[m1],Hre[KTe]={index:m1,name:KTe.toUpperCase()};var KTe,m1;mo.log.logMessage=function(t){for(var e=Hre[t.level].index,r=0;r<XTe.length;++r){var n=XTe[r];if(n.flags&mo.log.NO_LEVEL_CHECK)n.f(t);else{var i=Hre[n.level].index;e<=i&&n.f(n,t)}}};mo.log.prepareStandard=function(t){"standard"in t||(t.standard=Hre[t.level].name+" ["+t.category+"] "+t.message)};mo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=mo.util.format.apply(this,e)}};mo.log.prepareStandardFull=function(t){"standardFull"in t||(mo.log.prepareStandard(t),t.standardFull=t.standard)};for(JTe=["error","warning","info","debug","verbose"],m1=0;m1<JTe.length;++m1)(function(e){mo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};mo.log.logMessage(o)}})(JTe[m1]);var JTe,m1;mo.log.makeLogger=function(t){var e={flags:0,f:t};return mo.log.setLevel(e,"none"),e};mo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&mo.log.LEVEL_LOCKED))for(var n=0;n<mo.log.levels.length;++n){var i=mo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};mo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=mo.log.LEVEL_LOCKED:t.flags&=~mo.log.LEVEL_LOCKED};mo.log.addLogger=function(t){XTe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Mct={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},VQ=s(function(t,e){mo.log.prepareStandard(e);var r=Mct[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),GN=mo.log.makeLogger(VQ)):(VQ=s(function(e,r){mo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),GN=mo.log.makeLogger(VQ)),mo.log.setLevel(GN,"debug"),mo.log.addLogger(GN),GQ=GN):console={log:s(function(){},"log")};var GN,Mct,VQ;GQ!==null&&typeof window<"u"&&window.location&&(jQ=new URL(window.location.href).searchParams,jQ.has("console.level")&&mo.log.setLevel(GQ,jQ.get("console.level").slice(-1)[0]),jQ.has("console.lock")&&(Lct=jQ.get("console.lock").slice(-1)[0],Lct=="true"&&mo.log.lock(GQ)));var jQ,Lct;mo.log.consoleLogger=GQ});var Uct=H((nAi,Qct)=>{d();Qct.exports=s1();xre();QN();dTe();UTe()});var $ct=H((oAi,Hct)=>{d();var cr=_i();Cw();VA();FQ();vw();Ek();TTe();$h();qo();Mre();var De=cr.asn1,Lf=Hct.exports=cr.pkcs7=cr.pkcs7||{};Lf.messageFromPem=function(t){var e=cr.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=De.fromDer(e.body);return Lf.messageFromAsn1(n)};Lf.messageToPem=function(t,e){var r={type:"PKCS7",body:De.toDer(t.toAsn1()).getBytes()};return cr.pem.encode(r,{maxline:e})};Lf.messageFromAsn1=function(t){var e={},r=[];if(!De.validate(t,Lf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=De.derToOid(e.contentType),o;switch(i){case cr.pki.oids.envelopedData:o=Lf.createEnvelopedData();break;case cr.pki.oids.encryptedData:o=Lf.createEncryptedData();break;case cr.pki.oids.signedData:o=Lf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Lf.createSignedData=function(){var t=null;return t={type:cr.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(ewe(t,n,Lf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(cr.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(cr.pki.certificateToAsn1(t.certificates[i]));var o=[],a=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.signerInfos)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=cr.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=cr.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||cr.pki.oids.sha1;switch(l){case cr.pki.oids.sha1:case cr.pki.oids.sha256:case cr.pki.oids.sha384:case cr.pki.oids.sha512:case cr.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!f&&h.type===cr.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&h.type===cr.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:cr.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(cr.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof cr.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=cr.util.encodeUtf8(t.content)),n.detached?t.detachedContent=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=cr.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=cr.md[cr.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=cr.md[cr.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(a).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=De.derToOid(t.contentInfo.value[0].value),a=De.toDer(i);a.getByte(),De.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==cr.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[]),m=0;m<f.authenticatedAttributes.length;++m){var h=f.authenticatedAttributes[m];h.type===cr.pki.oids.messageDigest?h.value=n[f.digestAlgorithm].digest():h.type===cr.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(ZTe(h)),f.authenticatedAttributesAsn1.value.push(ZTe(h))}a=De.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Ddr(t.signers)}s(r,"addSignerInfos")};Lf.createEncryptedData=function(){var t=null;return t={type:cr.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:cr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){ewe(t,e,Lf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),qct(t)},"decrypt")},t};Lf.createEnvelopedData=function(){var t=null;return t={type:cr.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:cr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=ewe(t,e,Lf.asn1.envelopedDataValidator);t.recipients=Rdr(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,kdr(t.recipients)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,Bdr(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case cr.pki.oids.rsaEncryption:case cr.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=cr.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}qct(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:cr.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case cr.pki.oids["aes128-CBC"]:n=16,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["aes192-CBC"]:n=24,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["aes256-CBC"]:n=32,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=cr.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=cr.util.createBuffer(cr.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=cr.util.createBuffer(cr.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case cr.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Sdr(t){var e={},r=[];if(!De.validate(t,Lf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:cr.pki.RDNAttributesAsArray(e.issuer),serialNumber:cr.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:De.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Sdr,"_recipientFromAsn1");function _dr(t){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[cr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,cr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.encryptedContent.algorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]),De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(_dr,"_recipientToAsn1");function Rdr(t){for(var e=[],r=0;r<t.length;++r)e.push(Sdr(t[r]));return e}s(Rdr,"_recipientsFromAsn1");function kdr(t){for(var e=[],r=0;r<t.length;++r)e.push(_dr(t[r]));return e}s(kdr,"_recipientsToAsn1");function Pdr(t){var e=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[cr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,cr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.digestAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.signatureAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=De.create(De.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(ZTe(i))}e.value.push(r)}return e}s(Pdr,"_signerToAsn1");function Ddr(t){for(var e=[],r=0;r<t.length;++r)e.push(Pdr(t[r]));return e}s(Ddr,"_signersToAsn1");function ZTe(t){var e;if(t.type===cr.pki.oids.contentType)e=De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.value).getBytes());else if(t.type===cr.pki.oids.messageDigest)e=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===cr.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=De.utcTimeToDate(i):i=De.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=De.create(De.Class.UNIVERSAL,De.Type.UTCTIME,!1,De.dateToUtcTime(i)):e=De.create(De.Class.UNIVERSAL,De.Type.GENERALIZEDTIME,!1,De.dateToGeneralizedTime(i))}return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[e])])}s(ZTe,"_attributeToAsn1");function Bdr(t){return[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(cr.pki.oids.data).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.algorithm).getBytes()),t.parameter?De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(Bdr,"_encryptedContentToAsn1");function ewe(t,e,r){var n={},i=[];if(!De.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=De.derToOid(n.contentType);if(a!==cr.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(cr.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:De.derToOid(n.encAlgorithm),parameter:cr.util.createBuffer(n.encParameter.value),content:cr.util.createBuffer(c)}}if(n.content){var c="";if(cr.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=cr.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(ewe,"_fromAsn1");function qct(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case cr.pki.oids["aes128-CBC"]:case cr.pki.oids["aes192-CBC"]:case cr.pki.oids["aes256-CBC"]:e=cr.aes.createDecryptionCipher(t.encryptedContent.key);break;case cr.pki.oids.desCBC:case cr.pki.oids["des-EDE3-CBC"]:e=cr.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(qct,"_decryptContent")});var jct=H((cAi,Wct)=>{d();var pl=_i();Cw();MN();xre();QN();qo();var Wre=Wct.exports=pl.ssh=pl.ssh||{};Wre.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=pl.util.createBuffer();VN(a,n),h1(a,t.e),h1(a,t.n);var c=pl.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=pl.util.createBuffer();h1(u,t.d),h1(u,t.p),h1(u,t.q),h1(u,t.qInv);var f;if(!e)f=pl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=$re(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=pl.util.createBuffer();h.putBuffer($re("\0\0\0\0",e)),h.putBuffer($re("\0\0\0",e));var g=pl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(pl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),f=pl.util.encode64(A.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var y=$re("putty-private-key-file-mac-key",e),E=pl.util.createBuffer();VN(E,n),VN(E,i),VN(E,r),E.putInt32(a.length()),E.putBuffer(a),E.putInt32(u.length()),E.putBuffer(u);var b=pl.hmac.create();return b.start("sha1",y),b.update(E.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};Wre.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=pl.util.createBuffer();return VN(n,r),h1(n,t.e),h1(n,t.n),r+" "+pl.util.encode64(n.bytes())+" "+e};Wre.privateKeyToOpenSSH=function(t,e){return e?pl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):pl.pki.privateKeyToPem(t)};Wre.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||pl.md.md5.create(),n="ssh-rsa",i=pl.util.createBuffer();VN(i,n),h1(i,t.e),h1(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function h1(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=pl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(h1,"_addBigIntegerToBuffer");function VN(t,e){t.putInt32(e.length),t.putString(e)}s(VN,"_addStringToBuffer");function $re(){for(var t=pl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s($re,"_sha1")});var Vct=H((dAi,Gct)=>{d();Gct.exports=_i();Cw();fct();VA();mre();FQ();kct();MN();Nct();Oct();Uct();wTe();Tre();Ek();vTe();RTe();$ct();PTe();ETe();fTe();Dre();$h();hTe();jct();FTe();qo()});var Kct=H(kk=>{"use strict";d();Object.defineProperty(kk,"__esModule",{value:!0});kk.convert=kk.Format=void 0;var zQ=Vct(),_w;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(_w=kk.Format||(kk.Format={}));function zct(t){var e=zQ.pki.pemToDer(t),r=zQ.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(zct,"myASN");function Ndr(t){var e=zct(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(Ndr,"txtFormat");function Yct(t,e){switch(e){case _w.der:return zQ.pki.pemToDer(t);case _w.pem:return t;case _w.txt:return Ndr(t);case _w.asn1:return zct(t);case _w.fingerprint:var r=zQ.md.sha1.create(),n=Yct(t,_w.der);return r.update(n.getBytes()),r.digest().toHex();case _w.x509:return zQ.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(Yct,"convert");kk.convert=Yct});var rlt=H(F0=>{"use strict";d();var Rw=F0&&F0.__assign||function(){return Rw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Rw.apply(this,arguments)},jre=F0&&F0.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(F0,"__esModule",{value:!0});F0.convert=F0.Format=F0.addToGlobalAgent=F0.get=void 0;var twe=require("https"),Mdr=require("tls"),Jct=require("child_process"),Xct=Pst(),tE=Kct();Object.defineProperty(F0,"Format",{enumerable:!0,get:s(function(){return tE.Format},"get")});Object.defineProperty(F0,"convert",{enumerable:!0,get:s(function(){return tE.convert},"get")});var Zct=process.platform==="darwin",elt=twe.globalAgent,Vre={keychain:"all",unique:!0,excludeBundled:!0,format:tE.Format.pem};function tlt(t){if(t===void 0&&(t=Vre),!Zct)return[];t=Rw(Rw({},Vre),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,Jct.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=jre(jre([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,Jct.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=jre(jre([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,tE.convert)(u,tE.Format.fingerprint)}),l=t.excludeBundled?Mdr.rootCertificates.map(function(u){return(0,tE.convert)(u,tE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,tE.convert)(u,t.format)})}s(tlt,"get");F0.get=tlt;var Gre=elt.options.ca,Ldr=s(function(t){if(t===void 0&&(t=Vre),!!Zct){var e;Array.isArray(Gre)?e=Array.from(Gre):e=typeof Gre<"u"?[Gre]:[],tlt(Rw(Rw(Rw({},Vre),t),{format:tE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),elt.options.ca=e,twe.Agent=function(r){var n=s(function(i){var o=typeof i<"u"?Rw({},i):{};return typeof o.ca>"u"&&(o.ca=e),r.call(this,o)},"newAgent");return n.prototype=r.prototype,n}(twe.Agent),(0,Xct.setGlobalDispatcher)(new Xct.Agent({connect:{ca:e}}))}},"addToGlobalAgent");F0.addToGlobalAgent=Ldr});var nlt=H((CAi,rwe)=>{d();function Fdr(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=process.arch==="arm64"?"crypt32-arm64.node":"crypt32.node",i=r(e(__dirname,n)),o=[],a=new i.Crypt32;try{let c;for(;c=a.next();){let l=new t(c);o.push(l.toString())}}finally{a.done()}return Array.from(new Set(o))}s(Fdr,"all");process.platform!=="win32"?rwe.exports.all=()=>[]:rwe.exports.all=Fdr});var dlt=H((wAi,ult)=>{"use strict";d();function llt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(llt,"validateParameter");function Qdr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(Qdr,"hasOwnProperty");function Udr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];Qdr(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),llt(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(Udr,"defineOperation");ult.exports={defineOperation:Udr,validateParameter:llt}});var dwe=H((RAi,mlt)=>{"use strict";d();var KN=wCe()("kerberos"),YN=KN.KerberosClient,flt=KN.KerberosServer,kw=dlt().defineOperation,qdr=1,Hdr=2,$dr=4,Wdr=8,jdr=16,Gdr=32,Vdr=64,zdr=128,Ydr=256,plt=0,Kdr=9,Jdr=6;YN.prototype.step=kw(YN.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);YN.prototype.wrap=kw(YN.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);YN.prototype.unwrap=kw(YN.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);flt.prototype.step=kw(flt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var Xdr=kw(KN.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),Zdr=kw(KN.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),efr=kw(KN.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:plt}},{name:"callback",type:"function",required:!1}]),tfr=kw(KN.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);mlt.exports={initializeClient:efr,initializeServer:tfr,principalDetails:Zdr,checkPassword:Xdr,GSS_C_DELEG_FLAG:qdr,GSS_C_MUTUAL_FLAG:Hdr,GSS_C_REPLAY_FLAG:$dr,GSS_C_SEQUENCE_FLAG:Wdr,GSS_C_CONF_FLAG:jdr,GSS_C_INTEG_FLAG:Gdr,GSS_C_ANON_FLAG:Vdr,GSS_C_PROT_READY_FLAG:zdr,GSS_C_TRANS_FLAG:Ydr,GSS_C_NO_OID:plt,GSS_MECH_OID_KRB5:Kdr,GSS_MECH_OID_SPNEGO:Jdr}});var hlt=H((PAi,rfr)=>{rfr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Alt=H((DAi,glt)=>{"use strict";d();var nfr=require("dns"),ifr=dwe(),fwe=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=ofr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();nfr.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;ifr.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function ofr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=sfr(t),r(null,i)})}}s(ofr,"firstTransition");function sfr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=afr(t),r(null,i||"")})}}s(sfr,"secondTransition");function afr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=cfr(t),r(null,a)})})}}s(afr,"thirdTransition");function cfr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(cfr,"fourthTransition");glt.exports={MongoAuthProcess:fwe}});var Clt=H((MAi,YQ)=>{"use strict";d();var ylt=dwe();YQ.exports=ylt;YQ.exports.Kerberos=ylt;YQ.exports.version=hlt().version;YQ.exports.processes={MongoAuthProcess:Alt().MongoAuthProcess}});var Dut=H(Gwe=>{"use strict";d();Object.defineProperty(Gwe,"__esModule",{value:!0});Gwe.assertNever=G0r;function G0r(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(G0r,"assertNever")});var vU=H(pE=>{"use strict";d();Object.defineProperty(pE,"__esModule",{value:!0});pE.ChatCompletionContentPartOpaque=pE.ChatCompletionContentPartKind=pE.ChatRole=void 0;var V0r=Dut(),Kne;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(Kne||(pE.ChatRole=Kne={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,V0r.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(Kne||(pE.ChatRole=Kne={}));var But;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(But||(pE.ChatCompletionContentPartKind=But={}));var Nut;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(Nut||(pE.ChatCompletionContentPartOpaque=Nut={}))});var Vwe=H(w1=>{"use strict";d();Object.defineProperty(w1,"__esModule",{value:!0});w1.BaseTokensPerName=w1.BaseTokensPerMessage=w1.BaseTokensPerCompletion=w1.ChatRole=void 0;var Mut;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Mut||(w1.ChatRole=Mut={}));w1.BaseTokensPerCompletion=3;w1.BaseTokensPerMessage=3;w1.BaseTokensPerName=1});var Fut=H(Xne=>{"use strict";d();Object.defineProperty(Xne,"__esModule",{value:!0});Xne.toOpenAiChatMessage=Lut;Xne.toOpenAIChatMessages=K0r;var mE=vU(),Jne=Vwe(),z0r=Hw();function zwe(t){return t.filter(e=>e.type===mE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(zwe,"onlyStringContent");function Y0r(t){let e=t.map(r=>{if(r.type===mE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===mE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===mE.ChatCompletionContentPartKind.Opaque&&mE.ChatCompletionContentPartOpaque.usableIn(r,z0r.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(Y0r,"stringAndImageContent");function Lut(t){switch(t.role){case mE.ChatRole.System:return{role:Jne.ChatRole.System,content:zwe(t.content),name:t.name};case mE.ChatRole.User:return{role:Jne.ChatRole.User,content:Y0r(t.content),name:t.name};case mE.ChatRole.Assistant:return{role:Jne.ChatRole.Assistant,content:zwe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case mE.ChatRole.Tool:return{role:Jne.ChatRole.Tool,content:zwe(t.content),tool_call_id:t.toolCallId};default:return}}s(Lut,"toOpenAiChatMessage");function K0r(t){return t.map(Lut).filter(e=>!!e)}s(K0r,"toOpenAIChatMessages")});var Qut=H(tie=>{"use strict";d();Object.defineProperty(tie,"__esModule",{value:!0});tie.toVsCodeChatMessage=Out;tie.toVsCodeChatMessages=J0r;var eie=vU();function Zne(t){return t.filter(e=>e.type===eie.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Zne,"onlyStringContent");var $w;function Out(t){switch($w??=require("vscode"),t.role){case eie.ChatRole.Assistant:let e=$w.LanguageModelChatMessage.Assistant(Zne(t.content),t.name);return t.toolCalls&&(e.content=[new $w.LanguageModelTextPart(Zne(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new $w.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case eie.ChatRole.User:return $w.LanguageModelChatMessage.User(Zne(t.content),t.name);case eie.ChatRole.Tool:{let r=$w.LanguageModelChatMessage.User("");return r.content=[new $w.LanguageModelToolResultPart(t.toolCallId,[new $w.LanguageModelTextPart(Zne(t.content))])],r}default:return}}s(Out,"toVsCodeChatMessage");function J0r(t){return t.map(Out).filter(e=>!!e)}s(J0r,"toVsCodeChatMessages")});var Hw=H(ey=>{"use strict";d();Object.defineProperty(ey,"__esModule",{value:!0});ey.OutputMode=ey.Raw=ey.OpenAI=void 0;ey.toMode=Ywe;ey.toVSCode=X0r;ey.toOpenAI=Z0r;var Uut=Fut(),qut=Qut();ey.OpenAI=Vwe();ey.Raw=vU();var qk;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(qk||(ey.OutputMode=qk={}));function Ywe(t,e){switch(t){case qk.Raw:return e;case qk.VSCode:return e instanceof Array?(0,qut.toVsCodeChatMessages)(e):(0,qut.toVsCodeChatMessage)(e);case qk.OpenAI:return e instanceof Array?(0,Uut.toOpenAIChatMessages)(e):(0,Uut.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Ywe,"toMode");function X0r(t){return Ywe(qk.VSCode,t)}s(X0r,"toVSCode");function Z0r(t){return Ywe(qk.OpenAI,t)}s(Z0r,"toOpenAI")});var Kwe=H(xU=>{"use strict";d();Object.defineProperty(xU,"__esModule",{value:!0});xU.jsonRetainedProps=void 0;xU.forEachNode=Hut;xU.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Hut(t,e){if(e(t),t.type===1)for(let r of t.children)Hut(r,e)}s(Hut,"forEachNode")});var $ut=H(Jwe=>{"use strict";d();Object.defineProperty(Jwe,"__esModule",{value:!0});Jwe.once=epr;function epr(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(epr,"once")});var tSe=H(jd=>{"use strict";d();Object.defineProperty(jd,"__esModule",{value:!0});jd.BudgetExceededError=jd.MaterializedChatMessageImage=jd.MaterializedChatMessageBreakpoint=jd.MaterializedChatMessageOpaque=jd.MaterializedChatMessage=jd.MaterializedChatMessageTextChunk=jd.GenericMaterializedContainer=void 0;var p8=$ut(),im=Hw(),hE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=jw(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return Xut(e,this.children,r)}allMetadata(){return Jut(this)}findById(e){return eSe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)tpr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof ry&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof ry||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Zwe(this,e),e}};jd.GenericMaterializedContainer=hE;var EU=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,p8.once)(async e=>await e.tokenLength({type:im.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};jd.MaterializedChatMessageTextChunk=EU;var ry=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=Xut(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Zwe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return eSe(e,this)}_tokenCount=(0,p8.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,im.toMode)(e.mode,r))});_upperBound=(0,p8.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,p8.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===im.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===im.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,im.toMode)(e.mode,r))});_text=(0,p8.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of Yut(this)){if(r instanceof Hk||r instanceof Ww){e.push(r);continue}if(r instanceof ty){e.at(-1)instanceof ty?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:im.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof Hk)return{type:im.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Zut(r.src),detail:r.detail}};if(r instanceof Ww)return r.value;if(r instanceof ty)return r.part;throw new Error("Unexpected element type")});if(this.role===im.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===im.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===im.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===im.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};jd.MaterializedChatMessage=ry;var Ww=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&im.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};jd.MaterializedChatMessageOpaque=Ww;var ty=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};jd.MaterializedChatMessageBreakpoint=ty;var Hk=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,p8.once)(async e=>e.tokenLength({type:im.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Zut(this.src),detail:this.detail}}));isEmpty=!1};jd.MaterializedChatMessageImage=Hk;function jw(t){return t instanceof hE||t instanceof ry}s(jw,"isContainerType");function zut(t){return t instanceof EU||t instanceof Hk||t instanceof Ww||t instanceof ty}s(zut,"isContentType");function tpr(t){if(!jw(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(tpr,"assertContainerOrChatMessage");function*Yut(t,e=!1){for(let r of t.children)r instanceof EU?(yield{content:r,isTextSibling:e},e=!0):r instanceof Hk||r instanceof Ww||r instanceof ty?yield{content:r,isTextSibling:!1}:r instanceof Ww?yield{content:r,isTextSibling:!0}:(r&&(yield*Yut(r,e)),e=!1)}s(Yut,"contentChunks");function rpr(t,e){let r;function n(i,o){if(zut(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");bU(r.node,e)}s(rpr,"removeLowestPriorityLegacy");var Wut=new WeakMap;function Kut(t){let e=Wut.get(t);if(e!==void 0)return e;let r=!1;return t instanceof ty?r=!0:t instanceof ry?r=t.children.some(n=>n instanceof ty):t instanceof hE&&(r=t.children.some(Kut)),Wut.set(t,r),r}s(Kut,"hasCachePoint");function npr(t){if(t instanceof ry)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof ry)return!1;return!0}s(npr,"shouldLookForCachePointInNode");function Zwe(t,e){let r;if(t instanceof hE&&t.has(1)){rpr(t,e);return}let n=npr(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&Kut(l)&&(r=void 0,l instanceof ty))){if(l instanceof hE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=jut(r.value);let u=jut(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new rie(t);zut(r.value)||r.value instanceof hE&&r.value.has(2)||jw(r.value)&&!r.value.children.length?bU(r.value,e):Zwe(r.value,e)}s(Zwe,"removeLowestPriorityChild");var rie=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof ry?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};jd.BudgetExceededError=rie;function jut(t){if(!jw(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(jut,"getLowestPriorityAmongChildren");function*Jut(t){yield*t.metadata;for(let e of t.children)jw(e)?yield*Jut(e):yield*e.metadata}s(Jut,"allMetadata");function Xut(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(jw(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(Xut,"replaceNode");function*Gut(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,jw(r)&&e.push(...r.children)}}s(Gut,"forEachNode");function ipr(t){let e=t;for(;e.parent;)e=e.parent;return e}s(ipr,"getRoot");function Vut(t){return t instanceof hE&&t.keepWithId!==void 0}s(Vut,"isKeepWith");var Xwe=new Set;function opr(t,e){let r=new Set;for(let n of Gut(t))Vut(n)&&!Xwe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Xwe.add(n);try{let n=ipr(t);for(let i of Gut(n))Vut(i)&&r.has(i.keepWithId)?bU(i,e):i instanceof ry&&i.toolCalls&&(i.toolCalls=spr(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&bU(i,e))}finally{for(let n of r)Xwe.delete(n)}}s(opr,"removeOtherKeepWiths");function eSe(t,e){if(e.id===t)return e;for(let r of e.children)if(jw(r)){let n=eSe(t,r);if(n)return n}}s(eSe,"findNodeById");function bU(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),opr(t,e),r.isEmpty?bU(r,e):r.onChunksChange())}s(bU,"removeNode");function Zut(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(Zut,"getEncodedBase64");function spr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(spr,"filterIfDifferent")});var tdt=H(()=>{"use strict";d();function apr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(apr,"_vscpp");function edt(){throw new Error("This should not be invoked!")}s(edt,"_vscppf");edt.isFragment=!0;globalThis.vscpp=apr;globalThis.vscppf=edt});var nSe=H(nie=>{"use strict";d();Object.defineProperty(nie,"__esModule",{value:!0});nie.PromptElement=void 0;tdt();var rSe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};nie.PromptElement=rSe});var pSe=H(ho=>{"use strict";d();Object.defineProperty(ho,"__esModule",{value:!0});ho.LogicalWrapper=ho.IfEmpty=ho.AbstractKeepWith=ho.TokenLimit=ho.Expandable=ho.Chunk=ho.LegacyPrioritization=ho.ToolResult=ho.PrioritizedList=ho.Image=ho.TextChunk=ho.ToolMessage=ho.AssistantMessage=ho.UserMessage=ho.SystemMessage=ho.BaseChatMessage=void 0;ho.isChatMessagePromptElement=cpr;ho.useKeepWith=fpr;var TU=Hc(),tg=nSe();function cpr(t){return t instanceof iie||t instanceof oie||t instanceof sie}s(cpr,"isChatMessagePromptElement");var $k=class extends tg.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};ho.BaseChatMessage=$k;var iie=class extends $k{static{s(this,"SystemMessage")}constructor(e){e.role=TU.Raw.ChatRole.System,super(e)}};ho.SystemMessage=iie;var oie=class extends $k{static{s(this,"UserMessage")}constructor(e){e.role=TU.Raw.ChatRole.User,super(e)}};ho.UserMessage=oie;var sie=class extends $k{static{s(this,"AssistantMessage")}constructor(e){e.role=TU.Raw.ChatRole.Assistant,super(e)}};ho.AssistantMessage=sie;var lpr=/\s+/g,iSe=class extends $k{static{s(this,"ToolMessage")}constructor(e){e.role=TU.Raw.ChatRole.Tool,super(e)}};ho.ToolMessage=iSe;var aie=class extends tg.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?lpr:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await upr(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};ho.TextChunk=aie;async function upr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:TU.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(upr,"getTextContentBelowBudget");var oSe=class extends tg.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};ho.Image=oSe;var sSe=class extends tg.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(aie,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};ho.PrioritizedList=sSe;var aSe=class extends tg.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};ho.ToolResult=aSe;var cSe=class extends tg.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};ho.LegacyPrioritization=cSe;var lSe=class extends tg.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};ho.Chunk=lSe;var uSe=class extends tg.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};ho.Expandable=uSe;var dSe=class extends tg.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};ho.TokenLimit=dSe;var cie=class extends tg.PromptElement{static{s(this,"AbstractKeepWith")}};ho.AbstractKeepWith=cie;var dpr=0;function fpr(){let t=dpr++;return class extends cie{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(fpr,"useKeepWith");var fSe=class extends tg.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(IU,null,this.props.alt),vscpp(IU,{flexGrow:1},this.props.children))}};ho.IfEmpty=fSe;var IU=class extends tg.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};ho.LogicalWrapper=IU});var ndt=H(wU=>{"use strict";d();Object.defineProperty(wU,"__esModule",{value:!0});wU.localize=ppr;wU.localize2=mpr;wU.getConfiguredDefaultLocale=hpr;function rdt(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(rdt,"_format");function ppr(t,e,...r){return rdt(e,r)}s(ppr,"localize");function mpr(t,e,...r){let n=rdt(e,r);return{original:n,value:n}}s(mpr,"localize2");function hpr(t){}s(hpr,"getConfiguredDefaultLocale")});var ASe=H(Gt=>{"use strict";d();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isAndroid=Gt.isEdge=Gt.isSafari=Gt.isFirefox=Gt.isChrome=Gt.OS=Gt.setTimeout0=Gt.setTimeout0IsFaster=Gt.translationsConfigFile=Gt.platformLocale=Gt.locale=Gt.Language=Gt.language=Gt.userAgent=Gt.platform=Gt.isCI=Gt.isMobile=Gt.isIOS=Gt.webWorkerOrigin=Gt.isWebWorker=Gt.isWeb=Gt.isElectron=Gt.isNative=Gt.isLinuxSnap=Gt.isLinux=Gt.isMacintosh=Gt.isWindows=Gt.LANGUAGE_DEFAULT=void 0;Gt.PlatformToString=Apr;Gt.isLittleEndian=ypr;Gt.isBigSurOrNewer=Cpr;var idt=ndt();Gt.LANGUAGE_DEFAULT="en";var RU=!1,kU=!1,_U=!1,cdt=!1,ldt=!1,hSe=!1,udt=!1,gSe=!1,ddt=!1,fdt=!1,SU,lie=Gt.LANGUAGE_DEFAULT,mSe=Gt.LANGUAGE_DEFAULT,pdt,gE,AE=globalThis,om;typeof AE.vscode<"u"&&typeof AE.vscode.process<"u"?om=AE.vscode.process:typeof process<"u"&&(om=process);var mdt=typeof om?.versions?.electron=="string",gpr=mdt&&om?.type==="renderer";if(typeof om=="object"){RU=om.platform==="win32",kU=om.platform==="darwin",_U=om.platform==="linux",cdt=_U&&!!om.env.SNAP&&!!om.env.SNAP_REVISION,udt=mdt,ddt=!!om.env.CI||!!om.env.BUILD_ARTIFACTSTAGINGDIRECTORY,SU=Gt.LANGUAGE_DEFAULT,lie=Gt.LANGUAGE_DEFAULT;let t=om.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];SU=e.locale,mSe=e.osLocale,lie=r||Gt.LANGUAGE_DEFAULT,pdt=e._translationsConfigFile}catch{}ldt=!0}else typeof navigator=="object"&&!gpr?(gE=navigator.userAgent,RU=gE.indexOf("Windows")>=0,kU=gE.indexOf("Macintosh")>=0,gSe=(gE.indexOf("Macintosh")>=0||gE.indexOf("iPad")>=0||gE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_U=gE.indexOf("Linux")>=0,fdt=gE?.indexOf("Mobi")>=0,hSe=!0,SU=idt.getConfiguredDefaultLocale(idt.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Gt.LANGUAGE_DEFAULT,lie=SU,mSe=navigator.language):console.error("Unable to resolve platform.");function Apr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Apr,"PlatformToString");var uie=0;kU?uie=1:RU?uie=3:_U&&(uie=2);Gt.isWindows=RU;Gt.isMacintosh=kU;Gt.isLinux=_U;Gt.isLinuxSnap=cdt;Gt.isNative=ldt;Gt.isElectron=udt;Gt.isWeb=hSe;Gt.isWebWorker=hSe&&typeof AE.importScripts=="function";Gt.webWorkerOrigin=Gt.isWebWorker?AE.origin:void 0;Gt.isIOS=gSe;Gt.isMobile=fdt;Gt.isCI=ddt;Gt.platform=uie;Gt.userAgent=gE;Gt.language=lie;var odt;(function(t){function e(){return Gt.language}s(e,"value"),t.value=e;function r(){return Gt.language.length===2?Gt.language==="en":Gt.language.length>=3?Gt.language[0]==="e"&&Gt.language[1]==="n"&&Gt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Gt.language==="en"}s(n,"isDefault"),t.isDefault=n})(odt||(Gt.Language=odt={}));Gt.locale=SU;Gt.platformLocale=mSe;Gt.translationsConfigFile=pdt;Gt.setTimeout0IsFaster=typeof AE.postMessage=="function"&&!AE.importScripts;Gt.setTimeout0=(()=>{if(Gt.setTimeout0IsFaster){let t=[];AE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),AE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Gt.OS=kU||gSe?2:RU?1:3;var sdt=!0,adt=!1;function ypr(){if(!adt){adt=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,sdt=new Uint16Array(t.buffer)[0]===513}return sdt}s(ypr,"isLittleEndian");Gt.isChrome=!!(Gt.userAgent&&Gt.userAgent.indexOf("Chrome")>=0);Gt.isFirefox=!!(Gt.userAgent&&Gt.userAgent.indexOf("Firefox")>=0);Gt.isSafari=!!(!Gt.isChrome&&Gt.userAgent&&Gt.userAgent.indexOf("Safari")>=0);Gt.isEdge=!!(Gt.userAgent&&Gt.userAgent.indexOf("Edg/")>=0);Gt.isAndroid=!!(Gt.userAgent&&Gt.userAgent.indexOf("Android")>=0);function Cpr(t){return parseFloat(t)>=20}s(Cpr,"isBigSurOrNewer")});var gdt=H(S1=>{"use strict";d();Object.defineProperty(S1,"__esModule",{value:!0});S1.arch=S1.platform=S1.env=S1.cwd=void 0;var hdt=ASe(),Wk,ySe=globalThis.vscode;if(typeof ySe<"u"&&typeof ySe.process<"u"){let t=ySe.process;Wk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Wk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Wk={get platform(){return hdt.isWindows?"win32":hdt.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};S1.cwd=Wk.cwd;S1.env=Wk.env;S1.platform=Wk.platform;S1.arch=Wk.arch});var ydt=H(vr=>{"use strict";d();Object.defineProperty(vr,"__esModule",{value:!0});vr.delimiter=vr.sep=vr.toNamespacedPath=vr.parse=vr.format=vr.extname=vr.basename=vr.dirname=vr.relative=vr.resolve=vr.join=vr.isAbsolute=vr.normalize=vr.posix=vr.win32=void 0;var m8=gdt(),vpr=65,xpr=97,Epr=90,bpr=122,zw=46,yu=47,H0=92,Gw=58,Ipr=63,die=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Tpr(t,e){if(t===null||typeof t!="object")throw new die(e,"Object",t)}s(Tpr,"validateObject");function gc(t,e){if(typeof t!="string")throw new die(e,"string",t)}s(gc,"validateString");var $0=m8.platform==="win32";function Ti(t){return t===yu||t===H0}s(Ti,"isPathSeparator");function CSe(t){return t===yu}s(CSe,"isPosixPathSeparator");function Vw(t){return t>=vpr&&t<=Epr||t>=xpr&&t<=bpr}s(Vw,"isWindowsDeviceRoot");function fie(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=yu}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==zw||i.charCodeAt(i.length-2)!==zw){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===zw&&c!==-1?++c:c=-1}return i}s(fie,"normalizeString");function Adt(t,e){Tpr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Adt,"_format");vr.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],gc(o,"path"),o.length===0)continue}else e.length===0?o=m8.cwd():(o=m8.env[`=${e}`]||m8.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===H0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ti(f)&&(c=1,u=!0);else if(Ti(f))if(u=!0,Ti(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ti(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ti(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ti(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else Vw(f)&&o.charCodeAt(1)===Gw&&(l=o.slice(0,2),c=2,a>2&&Ti(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=fie(r,!n,"\\",Ti),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){gc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return CSe(o)?"\\":t;if(Ti(o))if(i=!0,Ti(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ti(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else Vw(o)&&t.charCodeAt(1)===Gw&&(n=t.slice(0,2),r=2,e>2&&Ti(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?fie(t.slice(r),!i,"\\",Ti):"";return a.length===0&&!i&&(a="."),a.length>0&&Ti(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){gc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ti(r)||e>2&&Vw(r)&&t.charCodeAt(1)===Gw&&Ti(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];gc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ti(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ti(r.charCodeAt(1))&&(++i,o>2&&(Ti(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ti(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return vr.win32.normalize(e)},relative(t,e){if(gc(t,"from"),gc(e,"to"),t===e)return"";let r=vr.win32.resolve(t),n=vr.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===H0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===H0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===H0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===H0;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===H0&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===H0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===H0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===H0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===H0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=vr.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===H0){if(e.charCodeAt(1)===H0){let r=e.charCodeAt(2);if(r!==Ipr&&r!==zw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Vw(e.charCodeAt(0))&&e.charCodeAt(1)===Gw&&e.charCodeAt(2)===H0)return`\\\\?\\${e}`;return t},dirname(t){gc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ti(i)?t:".";if(Ti(i)){if(r=n=1,Ti(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ti(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else Vw(i)&&t.charCodeAt(1)===Gw&&(r=e>2&&Ti(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ti(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&gc(e,"ext"),gc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Vw(t.charCodeAt(0))&&t.charCodeAt(1)===Gw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ti(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ti(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){gc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===Gw&&Vw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ti(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===zw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Adt.bind(null,"\\"),parse(t){gc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ti(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ti(i)){if(n=1,Ti(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ti(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ti(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ti(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(Vw(i)&&t.charCodeAt(1)===Gw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ti(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ti(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===zw?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var wpr=(()=>{if($0){let t=/\\/g;return()=>{let e=m8.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>m8.cwd()})();vr.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:wpr();gc(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===yu)}return e=fie(e,!r,"/",CSe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(gc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===yu,r=t.charCodeAt(t.length-1)===yu;return t=fie(t,!e,"/",CSe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return gc(t,"path"),t.length>0&&t.charCodeAt(0)===yu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];gc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":vr.posix.normalize(e)},relative(t,e){if(gc(t,"from"),gc(e,"to"),t===e||(t=vr.posix.resolve(t),e=vr.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===yu&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===yu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===yu?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===yu)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(gc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===yu,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===yu){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&gc(e,"ext"),gc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===yu){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===yu){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){gc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===yu){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===zw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Adt.bind(null,"/"),parse(t){gc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===yu,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===yu){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===zw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};vr.posix.win32=vr.win32.win32=vr.win32;vr.posix.posix=vr.win32.posix=vr.posix;vr.normalize=$0?vr.win32.normalize:vr.posix.normalize;vr.isAbsolute=$0?vr.win32.isAbsolute:vr.posix.isAbsolute;vr.join=$0?vr.win32.join:vr.posix.join;vr.resolve=$0?vr.win32.resolve:vr.posix.resolve;vr.relative=$0?vr.win32.relative:vr.posix.relative;vr.dirname=$0?vr.win32.dirname:vr.posix.dirname;vr.basename=$0?vr.win32.basename:vr.posix.basename;vr.extname=$0?vr.win32.extname:vr.posix.extname;vr.format=$0?vr.win32.format:vr.posix.format;vr.parse=$0?vr.win32.parse:vr.posix.parse;vr.toNamespacedPath=$0?vr.win32.toNamespacedPath:vr.posix.toNamespacedPath;vr.sep=$0?vr.win32.sep:vr.posix.sep;vr.delimiter=$0?vr.win32.delimiter:vr.posix.delimiter});var Tdt=H(h8=>{"use strict";d();Object.defineProperty(h8,"__esModule",{value:!0});h8.URI=void 0;h8.isUriComponents=Npr;h8.uriToFsPath=gie;var Cdt=ydt(),mie=ASe(),Spr=/^\w[\w\d+.-]*$/,_pr=/^\//,Rpr=/^\/\//;function kpr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Spr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!_pr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Rpr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(kpr,"_validateUri");function Ppr(t,e){return!t&&!e?"file":t}s(Ppr,"_schemeFix");function Dpr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==ny&&(e=ny+e):e=ny;break}return e}s(Dpr,"_referenceResolution");var Rs="",ny="/",Bpr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,hie=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Rs,this.authority=e.authority||Rs,this.path=e.path||Rs,this.query=e.query||Rs,this.fragment=e.fragment||Rs):(this.scheme=Ppr(e,a),this.authority=r||Rs,this.path=Dpr(this.scheme,n||Rs),this.query=i||Rs,this.fragment=o||Rs,kpr(this,a))}get fsPath(){return gie(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Rs),n===void 0?n=this.authority:n===null&&(n=Rs),i===void 0?i=this.path:i===null&&(i=Rs),o===void 0?o=this.query:o===null&&(o=Rs),a===void 0?a=this.fragment:a===null&&(a=Rs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Yw(r,n,i,o,a)}static parse(e,r=!1){let n=Bpr.exec(e);return n?new Yw(n[2]||Rs,pie(n[4]||Rs),pie(n[5]||Rs),pie(n[7]||Rs),pie(n[9]||Rs),r):new Yw(Rs,Rs,Rs,Rs,Rs)}static file(e){let r=Rs;if(mie.isWindows&&(e=e.replace(/\\/g,ny)),e[0]===ny&&e[1]===ny){let n=e.indexOf(ny,2);n===-1?(r=e.substring(2),e=ny):(r=e.substring(2,n),e=e.substring(n)||ny)}return new Yw("file",r,e,Rs,Rs)}static from(e,r){return new Yw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return mie.isWindows&&e.scheme==="file"?n=t.file(Cdt.win32.join(gie(e,!0),...r)).path:n=Cdt.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return vSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Yw(e);return r._formatted=e.external??null,r._fsPath=e._sep===Edt?e.fsPath??null:null,r}}else return e}};h8.URI=hie;function Npr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Npr,"isUriComponents");var Edt=mie.isWindows?1:void 0,Yw=class extends hie{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=gie(this,!1)),this._fsPath}toString(e=!1){return e?vSe(this,!0):(this._formatted||(this._formatted=vSe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Edt),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},bdt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function vdt(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=bdt[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(vdt,"encodeURIComponentFast");function Mpr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=bdt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Mpr,"encodeURIComponentMinimal");function gie(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,mie.isWindows&&(r=r.replace(/\//g,"\\")),r}s(gie,"uriToFsPath");function vSe(t,e){let r=e?Mpr:vdt,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=ny,n+=ny),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:vdt(l,!1,!1)),n}s(vSe,"_asFormatted");function Idt(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Idt(t.substr(3)):t}}s(Idt,"decodeURIComponentGraceful");var xdt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function pie(t){return t.match(xdt)?t.replace(xdt,e=>Idt(e)):t}s(pie,"percentDecode")});var bSe=H(Kw=>{"use strict";d();Object.defineProperty(Kw,"__esModule",{value:!0});Kw.PromptReference=Kw.ChatResponseReferencePartStatusKind=Kw.PromptMetadata=void 0;var PU=Tdt(),xSe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Kw.PromptMetadata=xSe;var wdt;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(wdt||(Kw.ChatResponseReferencePartStatusKind=wdt={}));var ESe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?PU.URI.from(n):{uri:PU.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?PU.URI.from(e.iconPath):"light"in e.iconPath?{light:PU.URI.from(e.iconPath.light),dark:PU.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Kw.PromptReference=ESe});var DSe=H(A8=>{"use strict";d();Object.defineProperty(A8,"__esModule",{value:!0});A8.PromptRenderer=A8.MetadataMap=void 0;var Lpr=Kwe(),DU=tSe(),g8=Hw(),$c=pSe(),PSe=bSe(),Sdt;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(Sdt||(A8.MetadataMap=Sdt={}));var TSe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new yie(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Pdt(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof $c.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:y}of u)p+=y.props.flexBasis??1;let m=0,h=u.map(y=>{if(y.tokenLimit===void 0)return!1;let E=y.element.props.flexBasis??1,b=E/p;return Math.floor(e.remainingTokenBudget*b)<y.tokenLimit?!1:(p-=E,m+=y.tokenLimit,!0)}),g=u.map((y,E)=>{let b=(y.element.props.flexBasis??1)/p;return{tokenBudget:h[E]?y.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((S,R)=>this._tokenizer.tokenLength(typeof S=="string"?{type:g8.Raw.ChatCompletionContentPartKind.Text,text:S}:S,R),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((y,E)=>({id:y.element.node.id,tokenBudget:g[E].tokenBudget}))}),await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let S=await Rdt(y,()=>E.prepare?.(g[b],n,i));y.node.setState(S)}));let A=await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let S=g[b];return await Rdt(y,()=>E.render(y.node.getState(),S,n,i))}));for(let[y,{element:E,promptElementInstance:b}]of u.entries()){let S=g[y],R=A[y];if(!R)continue;let B=await this._processPromptRenderPiece(new jk(S.tokenBudget,this._endpoint),E,b,R,n,i);b instanceof $c.Expandable&&this._growables.push({initialConsume:B,elem:E.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=kdt(i),l=new jk(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Fpr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,g8.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(m=>{if(!(m instanceof _1))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Cie),p=i.map(m=>{if(!(m instanceof _1)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Cie);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof $c.Expandable))throw new Error("unreachable: expected growable");let c=new yie(null,0,o.elem.id),l=new jk(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:g8.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===$c.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Aie(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new _1(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new _1(l));else this._handleIntrinsic(e,c.name,c.props,Aie(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};A8.PromptRenderer=TSe;async function Fpr(t,e,r,n){let i=0;if((0,$c.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,g8.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:g8.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Fpr,"computeTokensConsumedByLiterals");function kdt(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new _Se(String(t))):Opr(t)?Aie(t.children,e):Qpr(t)?Aie(t,e):typeof t.ctor=="string"?e.push(new wSe(t.ctor,t.props,t.children)):e.push(new SSe(t.ctor,t.props,t.children)),e)}s(kdt,"flattenAndReduce");function Aie(t,e=[]){for(let r of t)kdt(r,e);return e}s(Aie,"flattenAndReduceArr");var wSe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},SSe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},_Se=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},jk=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},yie=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new _1(PSe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return BU.fromJSON(i,a,o);default:}}).filter(Cie),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new $c.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,$c.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new $c.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new $c.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof $c.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof $c.Chunk&&(this._objFlags|=2),this._obj instanceof $c.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new BU(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new BU(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(Cie),props:{},references:this._metadata.filter(r=>r instanceof _1).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=ISe(this._obj.props,Lpr.jsonRetainedProps)),this._obj instanceof $c.BaseChatMessage)e.ctor=1,Object.assign(e.props,ISe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof $c.Image)return{...e,ctor:3,props:{...e.props,...ISe(this._obj.props,["src","detail"])}};this._obj instanceof $c.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof $c.Image)return new DU.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof $c.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new DU.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof $c.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof $c.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new DU.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof $c.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof $c.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new RSe({type:g8.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},RSe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new DU.MaterializedChatMessageBreakpoint(e,this.part)}},BU=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new _1(PSe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new DU.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof _1).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Opr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Opr,"isFragmentCtor");function Cie(t){return t!==void 0}s(Cie,"isDefined");var kSe=class extends PSe.PromptMetadata{static{s(this,"InternalMetadata")}},_1=class extends kSe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function Qpr(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(Qpr,"isIterable");function ISe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(ISe,"pickProps");function Pdt(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Pdt,"atPath");var _dt=new WeakSet;async function Rdt(t,e){try{return await e()}catch(r){throw r instanceof Error&&!_dt.has(r)&&r.constructor.name!=="CancellationError"&&(_dt.add(r),r.message+=` (at tsx element ${Pdt(t.path)})`),r}}s(Rdt,"annotateError")});var Ddt=H(vie=>{"use strict";d();Object.defineProperty(vie,"__esModule",{value:!0});vie.VSCodeTokenizer=void 0;var BSe=Hw(),NSe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=BSe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==BSe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===BSe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};vie.VSCodeTokenizer=NSe});var Bdt=H(y8=>{"use strict";d();Object.defineProperty(y8,"__esModule",{value:!0});y8.tracerCss=y8.tracerSrc=void 0;y8.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';y8.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Odt=H(Eie=>{"use strict";d();Object.defineProperty(Eie,"__esModule",{value:!0});Eie.HTMLTracer=void 0;var Ndt=Bdt(),Gk=tSe(),Upr=Hw(),MSe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return LSe.create({epochs:this.epochs,traceData:Ldt(this.traceData)})}serveRouter(e){return new xie({baseAddress:e,epochs:this.epochs,traceData:Ldt(this.traceData)})}};Eie.HTMLTracer=MSe;var xie=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Ndt.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Mdt(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Ndt.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Mdt(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},LSe=class t extends xie{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Mdt(t,e){return{container:await Fdt(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Mdt,"serializeRenderData");async function Fdt(t,e,r){let n={metadata:e.metadata.map(Hpr),priority:e.priority};if(e instanceof Gk.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Gk.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Gk.MaterializedChatMessageOpaque||e instanceof Gk.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Fdt(t,o,r||e instanceof Gk.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof Gk.GenericMaterializedContainer)return{...i,type:0};if(e instanceof Gk.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Upr.Raw.ChatRole.display(e.role),text:o}}}qpr(e)}s(Fdt,"serializeMaterialized");function qpr(t){throw new Error("unreachable")}s(qpr,"assertNever");function Hpr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Hpr,"serializeMetadata");var Ldt=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Udt=H(Qdt=>{"use strict";d();Object.defineProperty(Qdt,"__esModule",{value:!0})});var Hdt=H(qdt=>{"use strict";d();Object.defineProperty(qdt,"__esModule",{value:!0})});var Wdt=H($dt=>{"use strict";d();Object.defineProperty($dt,"__esModule",{value:!0})});var Hc=H(fa=>{"use strict";d();var $pr=fa&&fa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vk=fa&&fa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$pr(e,t,r)};Object.defineProperty(fa,"__esModule",{value:!0});fa.contentType=fa.PromptRenderer=fa.MetadataMap=fa.PromptElement=fa.JSONTree=void 0;fa.renderPrompt=Gpr;fa.renderElementJSON=Vpr;var FSe=Hw(),jdt=DSe(),Wpr=Ddt();Vk(Odt(),fa);fa.JSONTree=Kwe();Vk(Hw(),fa);Vk(pSe(),fa);Vk(bSe(),fa);Vk(Udt(),fa);Vk(Hdt(),fa);Vk(Wdt(),fa);var jpr=nSe();Object.defineProperty(fa,"PromptElement",{enumerable:!0,get:s(function(){return jpr.PromptElement},"get")});var Gdt=DSe();Object.defineProperty(fa,"MetadataMap",{enumerable:!0,get:s(function(){return Gdt.MetadataMap},"get")});Object.defineProperty(fa,"PromptRenderer",{enumerable:!0,get:s(function(){return Gdt.PromptRenderer},"get")});async function Gpr(t,e,r,n,i,o,a=FSe.OutputMode.VSCode){let c="countTokens"in n?new Wpr.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new jdt.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(Gpr,"renderPrompt");fa.contentType="application/vnd.codechat.prompt+json.1";function Vpr(t,e,r,n){return new jdt.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:FSe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===FSe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(Vpr,"renderElementJSON")});var um=H(Eq=>{"use strict";d();Object.defineProperty(Eq,"__esModule",{value:!0});Eq.dedent=void 0;function bpt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,m;return(m=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+f+m}).join(`
`)),a+=p+n[l+1]}),a}s(bpt,"dedent");Eq.dedent=bpt;Eq.default=bpt});var Ppt=H(w2e=>{"use strict";d();Object.defineProperty(w2e,"__esModule",{value:!0});w2e.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var Fpt=H(_2e=>{"use strict";d();Object.defineProperty(_2e,"__esModule",{value:!0});var Dpt=require("worker_threads"),Qgr=require("v8"),Ugr=require("os"),Bpt=Ppt(),mse="ready",Npt="spawning",qgr="busy",hse="off",Mpt=Ugr.cpus().length,Lpt=process.version.replace("v","").split("."),Hgr=parseInt(Lpt[0]),$gr=parseInt(Lpt[1]),S2e=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=Mpt,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new Dpt.Worker(Bpt.workerFile,{eval:!0});e.status=Npt,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=mse,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=hse,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===hse).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===mse){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=qgr;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=Qgr.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=hse,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=mse,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:Mpt,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new Dpt.Worker(Bpt.workerFile,{eval:!0});this.workers.push({status:Npt,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=mse,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=hse,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(Hgr>=12&&$gr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};_2e.default=new S2e});var gse=H(hP=>{"use strict";d();var Wgr=hP&&hP.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hP,"__esModule",{value:!0});var bq=Wgr(Fpt()),jgr=`job needs a function.
Try with:
> job(() => {...}, config)`,Ggr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function Vgr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(jgr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(Ggr));bq.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(Vgr,"job");hP.job=Vgr;hP.stop=bq.default.teardown.bind(bq.default);hP.start=bq.default.setup.bind(bq.default)});var emt=H(gP=>{"use strict";d();var $1=gP&&gP.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},O2e=gP&&gP.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},PE,AS;Object.defineProperty(gP,"__esModule",{value:!0});var Q2e=class{static{s(this,"AwaitLock")}constructor(){PE.set(this,!1),AS.set(this,new Set)}get acquired(){return $1(this,PE,"f")}acquireAsync({timeout:e}={}){if(!$1(this,PE,"f"))return O2e(this,PE,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{$1(this,AS,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),$1(this,AS,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{$1(this,AS,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return $1(this,PE,"f")?!1:(O2e(this,PE,!0,"f"),!0)}release(){if(!$1(this,PE,"f"))throw new Error("Cannot release an unacquired lock");if($1(this,AS,"f").size>0){let[e]=$1(this,AS,"f");$1(this,AS,"f").delete(e),e()}else O2e(this,PE,!1,"f")}};gP.default=Q2e;PE=new WeakMap,AS=new WeakMap});var xke=H((L1o,TAt)=>{d();var Kq=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,GEr=typeof AbortController=="function",nce=GEr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new EAt}abort(){this.signal.dispatchEvent("abort")}},VEr=typeof AbortSignal=="function",zEr=typeof nce.AbortSignal=="function",EAt=VEr?AbortSignal:zEr?nce.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},Cke=new Set,gke=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;ice(r)&&vke(r,`${t} option`,`options.${e}`,TM)},"deprecatedOption"),Ake=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(ice(r)){let{prototype:n}=TM,{get:i}=Object.getOwnPropertyDescriptor(n,t);vke(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),YEr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(ice(r)){let{prototype:n}=TM,{get:i}=Object.getOwnPropertyDescriptor(n,t);vke(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),bAt=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),ice=s(t=>!Cke.has(t),"shouldWarn"),vke=s((t,e,r,n)=>{Cke.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;bAt(i,"DeprecationWarning",t,n)},"warn"),_P=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),IAt=s(t=>_P(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?IM:null:null,"getUintArray"),IM=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},yke=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=IAt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},TM=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:A,fetchContext:y,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:b}=e,{length:S,maxAge:R,stale:B}=e instanceof t?{}:e;if(r!==0&&!_P(r))throw new TypeError("max option must be a nonnegative integer");let L=r?IAt(r):Array;if(!L)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||S,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=y,!this.fetchMethod&&y!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new L(r),this.prev=new L(r),this.head=0,this.tail=0,this.free=new yke(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!E,this.maxSize!==0){if(!_P(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!B,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=_P(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||R||0,this.ttl){if(!_P(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";ice(O)&&(Cke.add(O),bAt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}B&&gke("stale","allowStale"),R&&gke("maxAge","ttl"),S&&gke("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new IM(this.max),this.starts=new IM(this.max),this.setItemTTL=(n,i,o=Kq.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?Kq.now():0};let e=0,r=s(()=>{let n=Kq.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new IM(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!_P(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!_P(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return Ake("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=Kq.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Kq.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new nce,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),f=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let A=this.backgroundFetch(e,g,h,p);return A.__returned=A}else{let A=this.valList[g];if(this.isBackgroundFetch(A))return r&&A.__staleWhileFetching!==void 0?A.__staleWhileFetching:A.__returned=A;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),A;let y=this.backgroundFetch(e,g,h,p);return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Ake("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Ake("reset","clear"),this.clear}get length(){return YEr("length","size"),this.size}static get AbortController(){return nce}static get AbortSignal(){return EAt}};TAt.exports=TM});var Ike=H((Q1o,wAt)=>{"use strict";d();var Jq=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},Eke=class extends Jq{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},bke=class extends Jq{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};wAt.exports={FetchBaseError:Jq,FetchError:Eke,AbortError:bke}});var OE=H((H1o,_At)=>{"use strict";d();var{constants:{MAX_LENGTH:KEr}}=require("buffer"),{pipeline:oce,PassThrough:JEr}=require("stream"),{promisify:XEr}=require("util"),{createGunzip:ZEr,createInflate:ebr,createBrotliDecompress:tbr,constants:{Z_SYNC_FLUSH:SAt}}=require("zlib"),rbr=TC()("helix-fetch:utils"),nbr=XEr(oce),ibr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),obr=s((t,e,r,n)=>{if(!ibr(t,e))return r;let i=s(o=>{o&&(rbr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return oce(r,ZEr({flush:SAt,finishFlush:SAt}),i);case"deflate":case"x-deflate":return oce(r,ebr(),i);case"br":return oce(r,tbr(),i);default:return r}},"decodeStream"),sbr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),sce=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?abr(t,e):cbr(t,e);default:return 0}},"calcSize"),abr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:sce(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),cbr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=sce(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=sce(t[i],e)}),r},"calcObjectSize"),lbr=s(t=>sce(t,new WeakSet),"sizeof"),ubr=s(async t=>{let e=new JEr,r=0,n=[];return e.on("data",i=>{if(r+i.length>KEr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await nbr(t,e),Buffer.concat(n,r)},"streamToBuffer");_At.exports={decodeStream:obr,isPlainObject:sbr,sizeof:lbr,streamToBuffer:ubr}});var cce=H((j1o,DAt)=>{"use strict";d();var{PassThrough:RAt,Readable:QE}=require("stream"),{types:{isAnyArrayBuffer:PAt}}=require("util"),{FetchError:dbr,FetchBaseError:fbr}=Ike(),{streamToBuffer:pbr}=OE(),mbr=Buffer.alloc(0),fg=Symbol("Body internals"),hbr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),kAt=s(async t=>{if(t[fg].disturbed)throw new TypeError("Already read");if(t[fg].error)throw new TypeError(`Stream had error: ${t[fg].error.message}`);t[fg].disturbed=!0;let{stream:e}=t[fg];return e===null?mbr:pbr(e)},"consume"),ace=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=QE.from(e.toString()):e instanceof QE?r=e:Buffer.isBuffer(e)?r=QE.from(e):PAt(e)?r=QE.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=QE.from(e):r=QE.from(String(e)),this[fg]={stream:r,disturbed:!1,error:null},e instanceof QE&&r.on("error",n=>{let i=n instanceof fbr?n:new dbr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[fg].error=i})}get body(){return this[fg].stream}get bodyUsed(){return this[fg].disturbed}async buffer(){return kAt(this)}async arrayBuffer(){return hbr(await this.buffer())}async text(){return(await kAt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(ace.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var gbr=s(t=>{if(t[fg].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[fg],r=e;if(e instanceof QE){r=new RAt;let n=new RAt;e.pipe(r),e.pipe(n),t[fg].stream=n}return r},"cloneStream"),Abr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||PAt(t)||t instanceof QE?null:"text/plain; charset=utf-8","guessContentType");DAt.exports={Body:ace,cloneStream:gbr,guessContentType:Abr}});var wM=H((z1o,LAt)=>{"use strict";d();var{validateHeaderName:BAt,validateHeaderValue:NAt}=require("http"),{isPlainObject:ybr}=OE(),UE=Symbol("Headers internals"),Xq=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof BAt=="function")BAt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),MAt=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof NAt=="function")NAt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),lce=class t{static{s(this,"Headers")}constructor(e={}){if(this[UE]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(ybr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[UE].map.set(Xq(e),MAt(r,e))}has(e){return this[UE].map.has(Xq(e))}get(e){let r=this[UE].map.get(Xq(e));return r===void 0?null:r}append(e,r){let n=Xq(e),i=MAt(r,e),o=this[UE].map.get(n);this[UE].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[UE].map.delete(Xq(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[UE].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[UE].map)}};Object.defineProperties(lce.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));LAt.exports={Headers:lce}});var Tke=H((J1o,FAt)=>{"use strict";d();var{EventEmitter:Cbr}=require("events"),yy=Symbol("AbortSignal internals"),SM=class{static{s(this,"AbortSignal")}constructor(){this[yy]={eventEmitter:new Cbr,onabort:null,aborted:!1}}get aborted(){return this[yy].aborted}get onabort(){return this[yy].onabort}set onabort(e){this[yy].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[yy].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[yy].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[yy][n]=="function"&&this[n](r),this[yy].eventEmitter.emit(e,r)}fire(){this[yy].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(SM.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var dce=class extends SM{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[yy].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[yy].timerId)}};Object.defineProperties(dce.prototype,{clear:{enumerable:!0}});var uce=Symbol("AbortController internals"),fce=class{static{s(this,"AbortController")}constructor(){this[uce]={signal:new SM}}get signal(){return this[uce].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[uce].signal.aborted||this[uce].signal.fire()}};Object.defineProperties(fce.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});FAt.exports={AbortController:fce,AbortSignal:SM,TimeoutSignal:dce}});var Zq=H((evo,UAt)=>{"use strict";d();var{randomBytes:vbr}=require("crypto"),{Readable:xbr}=require("stream"),Ske=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),Ebr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),OAt=s(t=>`--${t}--\r
\r
`,"getFooter"),QAt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,Ske(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*bbr(t,e){for(let[r,n]of t)yield QAt(e,r,n),Ske(n)?yield*n.stream():yield n,yield`\r
`;yield OAt(e)}s(bbr,"formDataIterator");var Ibr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(QAt(e,n,i)),r+=Ske(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(OAt(e)),r},"getFormDataLength"),wke=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=vbr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Ibr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return xbr.from(bbr(this.fd,this.boundary))}};UAt.exports={isFormData:Ebr,FormDataSerializer:wke}});var HAt=H((ivo,qAt)=>{"use strict";d();var{AbortSignal:nvo}=Tke(),{Body:Tbr,cloneStream:wbr,guessContentType:Sbr}=cce(),{Headers:_br}=wM(),{isPlainObject:Rbr}=OE(),{isFormData:kbr,FormDataSerializer:Pbr}=Zq(),Dbr=20,_S=Symbol("Request internals"),pce=class t extends Tbr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?wbr(n):null),c=new _br(r.headers||n&&n.headers||{});if(kbr(a)&&!c.has("content-type")){let p=new Pbr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(Rbr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=Sbr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[_S]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=Dbr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[_S].method}get url(){return this[_S].parsedURL.toString()}get headers(){return this[_S].headers}get redirect(){return this[_S].redirect}get cache(){return this[_S].cache}get signal(){return this[_S].signal}clone(){return new t(this)}get init(){return this[_S].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(pce.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});qAt.exports={Request:pce}});var _ke=H((avo,$At)=>{"use strict";d();var{Body:Bbr,cloneStream:Nbr,guessContentType:Mbr}=cce(),{Headers:Lbr}=wM(),{isPlainObject:Fbr}=OE(),{isFormData:Obr,FormDataSerializer:Qbr}=Zq(),Cy=Symbol("Response internals"),mce=class t extends Bbr{static{s(this,"Response")}constructor(e=null,r={}){let n=new Lbr(r.headers),i=e;if(Obr(i)&&!n.has("content-type")){let o=new Qbr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Fbr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Mbr(i);o&&n.set("content-type",o)}super(i),this[Cy]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Cy].url||""}get status(){return this[Cy].status}get statusText(){return this[Cy].statusText}get ok(){return this[Cy].status>=200&&this[Cy].status<300}get redirected(){return this[Cy].counter>0}get headers(){return this[Cy].headers}get httpVersion(){return this[Cy].httpVersion}get decoded(){return this[Cy].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Nbr(this),{...this[Cy]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(mce.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});$At.exports={Response:mce}});var jAt=H((dvo,WAt)=>{"use strict";d();var Ubr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),qbr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Hbr=new Set([500,502,503,504]),$br={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Wbr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function RP(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(RP,"toNumberOrZero");function jbr(t){return t?Hbr.has(t.status):!0}s(jbr,"isErrorResponse");function Rke(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(Rke,"parseCacheControl");function Gbr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(Gbr,"formatCacheControl");WAt.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Rke(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Rke(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Gbr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&qbr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Ubr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Rke(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)$br[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return RP(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return RP(this._rescc["s-maxage"])}if(this._rescc["max-age"])return RP(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+RP(this._rescc["stale-if-error"]),n=e+RP(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+RP(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+RP(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&jbr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Wbr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var YAt=H((mvo,zAt)=>{"use strict";d();var Vbr=jAt(),{Headers:zbr}=wM(),GAt=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),VAt=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),kke=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Vbr(GAt(e),VAt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(GAt(e))}responseHeaders(e){return new zbr(this.policy.responseHeaders(VAt(e)))}timeToLive(){return this.policy.timeToLive()}};zAt.exports=kke});var XAt=H((Avo,JAt)=>{"use strict";d();var{Readable:Ybr}=require("stream"),{Headers:KAt}=wM(),{Response:Kbr}=_ke(),RS=Symbol("CacheableResponse internals"),Jbr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Pke=class t extends Kbr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new KAt(r.headers);this[RS]={headers:n,bufferedBody:e}}get headers(){return this[RS].headers}set headers(e){if(e instanceof KAt)this[RS].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Ybr.from(this[RS].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[RS].bufferedBody}async arrayBuffer(){return Jbr(this[RS].bufferedBody)}async text(){return this[RS].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[RS].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},Xbr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new Pke(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");JAt.exports={cacheableResponse:Xbr}});var hce=H((vvo,ZAt)=>{"use strict";d();var Dke=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};ZAt.exports={RequestAbortedError:Dke}});var iyt=H((bvo,nyt)=>{"use strict";d();var tyt=require("http"),ryt=require("https"),{Readable:Zbr}=require("stream"),qE=TC()("helix-fetch:h1"),{RequestAbortedError:eyt}=hce(),{decodeStream:eIr}=OE(),tIr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new ryt.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new tyt.Agent(n),r.httpAgent):void 0},"getAgent"),rIr=s(t=>{t.h1={}},"setupContext"),nIr=s(async({h1:t})=>{t.httpAgent&&(qE("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(qE("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),iIr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?eIr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),oIr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?ryt:tyt,i=tIr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{qE(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{qE(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{qE(`${o.method} ${e.href}`);let f,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(qE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new eyt),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new eyt);return}p.addEventListener("abort",m)}f=n(e,o),f.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(qE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(iIr(h,o.decode,u))}),f.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(qE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(qE(`${o.method} ${e.href} failed with: ${h.message}`),f.abort(),u(h))}),c instanceof Zbr?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");nyt.exports={request:oIr,setupContext:rIr,resetContext:nIr}});var cyt=H((wvo,ayt)=>{"use strict";d();var{connect:sIr,constants:aIr}=require("http2"),{Readable:cIr}=require("stream"),ma=TC()("helix-fetch:h2"),{RequestAbortedError:oyt}=hce(),{decodeStream:lIr}=OE(),{NGHTTP2_CANCEL:eH}=aIr,uIr=300*1e3,dIr=5e3,fIr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),pIr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),ma(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),syt=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?lIr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),mIr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=dIr}}}=t,u=i[":path"],f=`${e}${u}`;ma(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(eH)},"rejectPush")),n.on("push",(p,m)=>{ma(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{ma(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(eH)}),c&&c(f,i,syt(p,n,r))}),n.on("aborted",()=>{ma(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{ma(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{ma(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),hIr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=uIr,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:A,socket:y,body:E,decode:b}=h;return y&&delete h.socket,A.host&&(A[":authority"]=A.host,delete A.host),new Promise((S,R)=>{let B=u[n];if(!B||B.closed||B.destroyed){let z=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),Q={...l,rejectUnauthorized:z};y&&!y.inUse&&(Q.createConnection=()=>(ma(`reusing socket #${y.id} (${y.servername})`),y.inUse=!0,y)),B=sIr(n,{...Q,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(f,()=>{ma(`closing session ${n} after ${f} ms of inactivity`),B.close()}),B.once("connect",()=>{ma(`session ${n} established`),ma(`caching session ${n}`),u[n]=B}),B.on("localSettings",Z=>{ma(`session ${n} localSettings: ${JSON.stringify(Z)}`)}),B.on("remoteSettings",Z=>{ma(`session ${n} remoteSettings: ${JSON.stringify(Z)}`)}),B.once("close",()=>{ma(`session ${n} closed`),u[n]===B&&(ma(`discarding cached session ${n}`),delete u[n])}),B.once("error",Z=>{ma(`session ${n} encountered error: ${Z}`),u[n]===B&&(ma(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(Z,J,j)=>{ma(`session ${n} encountered frameError: type: ${Z}, code: ${J}, id: ${j}`)}),B.once("goaway",(Z,J,j)=>{ma(`session ${n} received GOAWAY frame: errorCode: ${Z}, lastStreamID: ${J}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(Z,J,j)=>{mIr(t,n,b,Z,J,j)})}else y&&y.id!==B.socket.id&&!y.inUse&&(ma(`discarding redundant socket used for ALPN: #${y.id} ${y.servername}`),y.destroy());ma(`${g} ${e.host}${c}`);let L,{signal:O}=h,K=s(()=>{O.removeEventListener("abort",K),R(new oyt),L&&L.close(eH)},"onAbortSignal");if(O){if(O.aborted){R(new oyt);return}O.addEventListener("abort",K)}let V=s(z=>{ma(`session ${n} encountered error during ${h.method} ${e.href}: ${z}`),R(z)},"onSessionError");B.once("error",V),L=B.request({":method":g,":path":c,...A}),L.once("response",z=>{B.off("error",V),O&&O.removeEventListener("abort",K),S(syt(z,L,h.decode,R))}),L.once("error",z=>{B.off("error",V),O&&O.removeEventListener("abort",K),L.rstCode!==eH&&(ma(`${h.method} ${e.href} failed with: ${z.message}`),L.close(eH),R(z))}),L.once("frameError",(z,Q,U)=>{B.off("error",V),ma(`encountered frameError during ${h.method} ${e.href}: type: ${z}, code: ${Q}, id: ${U}`)}),L.on("push",(z,Q)=>{ma(`received 'push' event: headers: ${JSON.stringify(z)}, flags: ${Q}`)}),E instanceof cIr?E.pipe(L):(E&&L.write(E),L.end())})},"request");ayt.exports={request:hIr,setupContext:fIr,resetContext:pIr}});var uyt=H((Rvo,lyt)=>{"use strict";d();var{EventEmitter:gIr}=require("events"),AIr=s(()=>{let t={},e=new gIr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");lyt.exports=AIr});var dyt=H((Dvo,yIr)=>{yIr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var gyt=H((Bvo,hyt)=>{"use strict";d();var{Readable:CIr}=require("stream"),vIr=require("tls"),{types:{isAnyArrayBuffer:xIr}}=require("util"),EIr=xke(),Bke=TC()("helix-fetch:core"),{RequestAbortedError:gce}=hce(),Nke=iyt(),Ace=cyt(),bIr=uyt(),{isPlainObject:IIr}=OE(),{isFormData:TIr,FormDataSerializer:wIr}=Zq(),{version:SIr}=dyt(),Mke="h2",Lke="h2c",Fke="http/1.0",kP="http/1.1",_Ir=100,RIr=3600*1e3,kIr=[Mke,kP,Fke],PIr=`helix-fetch/${SIr}`,DIr={method:"GET",compress:!0,decode:!0},fyt=0,pyt=bIr(),myt=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new gce;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new gce);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof gce||(Bke(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=vIr.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),fyt+=1,o.id=fyt,o.secureConnecting=!1,Bke(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),BIr=s(async(t,e)=>{let r=await pyt.acquire(t.origin);try{return r||(r=await myt(t,e)),r}finally{pyt.release(t.origin,r)}},"connect"),NIr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=kP,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Lke,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await BIr(e,u);return i=f.alpnProtocol,i||(i=kP),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),MIr=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),LIr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await myt(e,u);return{protocol:f.alpnProtocol||kP,socket:f}}return{protocol:c.alpnProtocol||kP,socket:c}},"getProtocolAndSocketFromFactory"),FIr=s(async(t,e,r)=>{let n=new URL(e),i={...DIr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=MIr(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(TIr(i.body)){let u=new wIr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":IIr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):xIr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof CIr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await LIr(t.socketFactory,n,i,t.alpnProtocols):await NIr(t,n,a);switch(Bke(`${n.host} -> ${c}`),c){case Mke:try{return await Ace.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Lke:return Ace.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case Fke:case kP:return Nke.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),OIr=s(async t=>(t.alpnCache.clear(),Promise.all([Nke.resetContext(t),Ace.resetContext(t)])),"resetContext"),QIr=s(t=>{let{options:{alpnProtocols:e=kIr,alpnCacheTTL:r=RIr,alpnCacheSize:n=_Ir,userAgent:i=PIr,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new EIr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Nke.setupContext(t),Ace.setupContext(t)},"setupContext");hyt.exports={request:FIr,setupContext:QIr,resetContext:OIr,RequestAbortedError:gce,ALPN_HTTP2:Mke,ALPN_HTTP2C:Lke,ALPN_HTTP1_1:kP,ALPN_HTTP1_0:Fke}});var yyt=H((Lvo,Ayt)=>{"use strict";d();var UIr=TC()("helix-fetch:core"),{request:qIr,setupContext:HIr,resetContext:$Ir,RequestAbortedError:WIr,ALPN_HTTP2:jIr,ALPN_HTTP2C:GIr,ALPN_HTTP1_1:VIr,ALPN_HTTP1_0:zIr}=gyt(),Oke=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},HIr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:WIr,ALPN_HTTP2:jIr,ALPN_HTTP2C:GIr,ALPN_HTTP1_1:VIr,ALPN_HTTP1_0:zIr}}async request(e,r){return qIr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return UIr("resetting context"),$Ir(this)}};Ayt.exports=new Oke().api()});var byt=H((Qvo,Eyt)=>{"use strict";d();var{EventEmitter:YIr}=require("events"),{Readable:tH}=require("stream"),Qke=TC()("helix-fetch"),KIr=xke(),{Body:JIr}=cce(),{Headers:$ke}=wM(),{Request:PP}=HAt(),{Response:qke}=_ke(),{FetchBaseError:XIr,FetchError:rH,AbortError:yce}=Ike(),{AbortController:ZIr,AbortSignal:eTr,TimeoutSignal:tTr}=Tke(),rTr=YAt(),{cacheableResponse:nTr}=XAt(),{sizeof:iTr}=OE(),{isFormData:oTr}=Zq(),{context:sTr,RequestAbortedError:aTr}=yyt(),Cyt=["GET","HEAD"],cTr=500,lTr=100*1024*1024,Uke="push",vyt=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof PP&&typeof r>"u"?e:new PP(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let B=new yce("The operation was aborted.");throw i.init.body instanceof tH&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof tH)&&!oTr(m)?m:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(B){throw m instanceof tH&&m.destroy(B),B instanceof TypeError?B:B instanceof aTr?new yce("The operation was aborted."):new rH(B.message,"system",B)}let g=s(()=>{c.removeEventListener("abort",g);let B=new yce("The operation was aborted.");i.init.body instanceof tH&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:A,statusText:y,httpVersion:E,headers:b,readable:S,decoded:R}=h;if([301,302,303,307,308].includes(A)){let{location:B}=b,L=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new rH(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(L===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new rH(`maximum redirect reached at: ${i.url}`,"max-redirect");let O={headers:new $ke(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(A!==303&&i.body&&i.init.body instanceof tH)throw c&&c.removeEventListener("abort",g),new rH("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(A===303||(A===301||A===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),c&&c.removeEventListener("abort",g),vyt(t,new PP(L,O))}default:}}return c&&(S.once("end",()=>{c.removeEventListener("abort",g)}),S.once("error",()=>{c.removeEventListener("abort",g)})),new qke(S,{url:i.url,status:A,statusText:y,headers:b,httpVersion:E,decoded:R,counter:i.counter})},"fetch"),xyt=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!Cyt.includes(e.method))return r;let n=new rTr(e,r,{shared:!1});if(n.storable()){let i=await nTr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),uTr=s(async(t,e,r)=>{let n=new PP(e,r);if(t.options.maxCacheSize!==0&&Cyt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new $ke(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await vyt(t,n);return n.cache!=="no-store"?xyt(t,n,o):o},"cachingFetch"),dTr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),fTr=s(t=>new tTr(t),"timeoutSignal"),Hke=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:lTr,i=cTr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>iTr(c),"sizeCalculation");this.cache=new KIr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new YIr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(E=>E.startsWith(":")).forEach(E=>delete f[E]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:A,decoded:y}=u;this.pushHandler(c,f,new qke(A,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:y}))}),this.context=sTr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:JIr,Headers:$ke,Request:PP,Response:qke,AbortController:ZIr,AbortSignal:eTr,FetchBaseError:XIr,FetchError:rH,AbortError:yce,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:dTr,timeoutSignal:fTr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return uTr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Uke,e)}offPush(e){return this.eventEmitter.off(Uke,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Qke(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new PP(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Qke(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Qke(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await xyt(this,new PP(e,{headers:r}),n);this.eventEmitter.emit(Uke,e,i)}};Eyt.exports=new Hke().api()});var Tyt=H((Hvo,Iyt)=>{"use strict";d();Iyt.exports=byt()});var D1t=H((Cle,P1t)=>{d();(function(t,e){typeof Cle=="object"&&typeof P1t<"u"?e(Cle):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Cle,function(t){"use strict";function e(){for(var F=arguments.length,D=Array(F),ee=0;ee<F;ee++)D[ee]=arguments[ee];if(D.length>1){D[0]=D[0].slice(0,-1);for(var ge=D.length-1,_e=1;_e<ge;++_e)D[_e]=D[_e].slice(1,-1);return D[ge]=D[ge].slice(1),D.join("")}else return D[0]}s(e,"merge");function r(F){return"(?:"+F+")"}s(r,"subexp");function n(F){return F===void 0?"undefined":F===null?"null":Object.prototype.toString.call(F).split(" ").pop().split("]").shift().toLowerCase()}s(n,"typeOf");function i(F){return F.toUpperCase()}s(i,"toUpperCase");function o(F){return F!=null?F instanceof Array?F:typeof F.length!="number"||F.split||F.setInterval||F.call?[F]:Array.prototype.slice.call(F):[]}s(o,"toArray");function a(F,D){var ee=F;if(D)for(var ge in D)ee[ge]=D[ge];return ee}s(a,"assign");function c(F){var D="[A-Za-z]",ee="[\\x0D]",ge="[0-9]",_e="[\\x22]",ut=e(ge,"[A-Fa-f]"),St="[\\x0A]",Yt="[\\x20]",er=r(r("%[EFef]"+ut+"%"+ut+ut+"%"+ut+ut)+"|"+r("%[89A-Fa-f]"+ut+"%"+ut+ut)+"|"+r("%"+ut+ut)),Kt="[\\:\\/\\?\\#\\[\\]\\@]",bt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",yr=e(Kt,bt),li=F?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ro=F?"[\\uE000-\\uF8FF]":"[]",Tn=e(D,ge,"[\\-\\.\\_\\~]",li),Ao=r(D+e(D,ge,"[\\+\\-\\.]")+"*"),vi=r(r(er+"|"+e(Tn,bt,"[\\:]"))+"*"),Xo=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("[1-9]"+ge)+"|"+ge),ha=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),Cc=r(ha+"\\."+ha+"\\."+ha+"\\."+ha),Mo=r(ut+"{1,4}"),Ws=r(r(Mo+"\\:"+Mo)+"|"+Cc),fd=r(r(Mo+"\\:")+"{6}"+Ws),vc=r("\\:\\:"+r(Mo+"\\:")+"{5}"+Ws),Eg=r(r(Mo)+"?\\:\\:"+r(Mo+"\\:")+"{4}"+Ws),bl=r(r(r(Mo+"\\:")+"{0,1}"+Mo)+"?\\:\\:"+r(Mo+"\\:")+"{3}"+Ws),bg=r(r(r(Mo+"\\:")+"{0,2}"+Mo)+"?\\:\\:"+r(Mo+"\\:")+"{2}"+Ws),Ig=r(r(r(Mo+"\\:")+"{0,3}"+Mo)+"?\\:\\:"+Mo+"\\:"+Ws),YE=r(r(r(Mo+"\\:")+"{0,4}"+Mo)+"?\\:\\:"+Ws),Ba=r(r(r(Mo+"\\:")+"{0,5}"+Mo)+"?\\:\\:"+Mo),wu=r(r(r(Mo+"\\:")+"{0,6}"+Mo)+"?\\:\\:"),Su=r([fd,vc,Eg,bl,bg,Ig,YE,Ba,wu].join("|")),pd=r(r(Tn+"|"+er)+"+"),Tg=r(Su+"\\%25"+pd),$l=r(Su+r("\\%25|\\%(?!"+ut+"{2})")+pd),KE=r("[vV]"+ut+"+\\."+e(Tn,bt,"[\\:]")+"+"),iv=r("\\["+r($l+"|"+Su+"|"+KE)+"\\]"),JE=r(r(er+"|"+e(Tn,bt))+"*"),Hf=r(iv+"|"+Cc+"(?!"+JE+")|"+JE),$f=r(ge+"*"),Yr=r(r(vi+"@")+"?"+Hf+r("\\:"+$f)+"?"),xc=r(er+"|"+e(Tn,bt,"[\\:\\@]")),wg=r(xc+"*"),Sg=r(xc+"+"),XM=r(r(er+"|"+e(Tn,bt,"[\\@]"))+"+"),Wc=r(r("\\/"+wg)+"*"),Ey=r("\\/"+r(Sg+Wc)+"?"),ov=r(XM+Wc),ym=r(Sg+Wc),by="(?!"+xc+")",XE=r(Wc+"|"+Ey+"|"+ov+"|"+ym+"|"+by),Es=r(r(xc+"|"+e("[\\/\\?]",ro))+"*"),md=r(r(xc+"|[\\/\\?]")+"*"),Iy=r(r("\\/\\/"+Yr+Wc)+"|"+Ey+"|"+ym+"|"+by),s5=r(Ao+"\\:"+Iy+r("\\?"+Es)+"?"+r("\\#"+md)+"?"),ZM=r(r("\\/\\/"+Yr+Wc)+"|"+Ey+"|"+ov+"|"+by),no=r(ZM+r("\\?"+Es)+"?"+r("\\#"+md)+"?"),Ty=r(s5+"|"+no),_g=r(Ao+"\\:"+Iy+r("\\?"+Es)+"?"),a5="^("+Ao+")\\:"+r(r("\\/\\/("+r("("+vi+")@")+"?("+Hf+")"+r("\\:("+$f+")")+"?)")+"?("+Wc+"|"+Ey+"|"+ym+"|"+by+")")+r("\\?("+Es+")")+"?"+r("\\#("+md+")")+"?$",ZE="^(){0}"+r(r("\\/\\/("+r("("+vi+")@")+"?("+Hf+")"+r("\\:("+$f+")")+"?)")+"?("+Wc+"|"+Ey+"|"+ov+"|"+by+")")+r("\\?("+Es+")")+"?"+r("\\#("+md+")")+"?$",hd="^("+Ao+")\\:"+r(r("\\/\\/("+r("("+vi+")@")+"?("+Hf+")"+r("\\:("+$f+")")+"?)")+"?("+Wc+"|"+Ey+"|"+ym+"|"+by+")")+r("\\?("+Es+")")+"?$",eL="^"+r("\\#("+md+")")+"?$",tL="^"+r("("+vi+")@")+"?("+Hf+")"+r("\\:("+$f+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",D,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Tn,bt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Tn,bt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Tn,bt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Tn,bt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Tn,bt,"[\\:\\@\\/\\?]",ro),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Tn,bt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Tn,bt),"g"),UNRESERVED:new RegExp(Tn,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Tn,yr),"g"),PCT_ENCODED:new RegExp(er,"g"),IPV4ADDRESS:new RegExp("^("+Cc+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Su+")"+r(r("\\%25|\\%(?!"+ut+"{2})")+"("+pd+")")+"?\\]?$")}}s(c,"buildExps");var l=c(!1),u=c(!0),f=function(){function F(D,ee){var ge=[],_e=!0,ut=!1,St=void 0;try{for(var Yt=D[Symbol.iterator](),er;!(_e=(er=Yt.next()).done)&&(ge.push(er.value),!(ee&&ge.length===ee));_e=!0);}catch(Kt){ut=!0,St=Kt}finally{try{!_e&&Yt.return&&Yt.return()}finally{if(ut)throw St}}return ge}return s(F,"sliceIterator"),function(D,ee){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return F(D,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=s(function(F){if(Array.isArray(F)){for(var D=0,ee=Array(F.length);D<F.length;D++)ee[D]=F[D];return ee}else return Array.from(F)},"toConsumableArray"),m=2147483647,h=36,g=1,A=26,y=38,E=700,b=72,S=128,R="-",B=/^xn--/,L=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,K={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=h-g,z=Math.floor,Q=String.fromCharCode;function U(F){throw new RangeError(K[F])}s(U,"error$1");function Z(F,D){for(var ee=[],ge=F.length;ge--;)ee[ge]=D(F[ge]);return ee}s(Z,"map");function J(F,D){var ee=F.split("@"),ge="";ee.length>1&&(ge=ee[0]+"@",F=ee[1]),F=F.replace(O,".");var _e=F.split("."),ut=Z(_e,D).join(".");return ge+ut}s(J,"mapDomain");function j(F){for(var D=[],ee=0,ge=F.length;ee<ge;){var _e=F.charCodeAt(ee++);if(_e>=55296&&_e<=56319&&ee<ge){var ut=F.charCodeAt(ee++);(ut&64512)==56320?D.push(((_e&1023)<<10)+(ut&1023)+65536):(D.push(_e),ee--)}else D.push(_e)}return D}s(j,"ucs2decode");var $=s(function(D){return String.fromCodePoint.apply(String,p(D))},"ucs2encode"),X=s(function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:h},"basicToDigit"),ie=s(function(D,ee){return D+22+75*(D<26)-((ee!=0)<<5)},"digitToBasic"),ae=s(function(D,ee,ge){var _e=0;for(D=ge?z(D/E):D>>1,D+=z(D/ee);D>V*A>>1;_e+=h)D=z(D/V);return z(_e+(V+1)*D/(D+y))},"adapt"),te=s(function(D){var ee=[],ge=D.length,_e=0,ut=S,St=b,Yt=D.lastIndexOf(R);Yt<0&&(Yt=0);for(var er=0;er<Yt;++er)D.charCodeAt(er)>=128&&U("not-basic"),ee.push(D.charCodeAt(er));for(var Kt=Yt>0?Yt+1:0;Kt<ge;){for(var bt=_e,yr=1,li=h;;li+=h){Kt>=ge&&U("invalid-input");var ro=X(D.charCodeAt(Kt++));(ro>=h||ro>z((m-_e)/yr))&&U("overflow"),_e+=ro*yr;var Tn=li<=St?g:li>=St+A?A:li-St;if(ro<Tn)break;var Ao=h-Tn;yr>z(m/Ao)&&U("overflow"),yr*=Ao}var vi=ee.length+1;St=ae(_e-bt,vi,bt==0),z(_e/vi)>m-ut&&U("overflow"),ut+=z(_e/vi),_e%=vi,ee.splice(_e++,0,ut)}return String.fromCodePoint.apply(String,ee)},"decode"),pe=s(function(D){var ee=[];D=j(D);var ge=D.length,_e=S,ut=0,St=b,Yt=!0,er=!1,Kt=void 0;try{for(var bt=D[Symbol.iterator](),yr;!(Yt=(yr=bt.next()).done);Yt=!0){var li=yr.value;li<128&&ee.push(Q(li))}}catch($l){er=!0,Kt=$l}finally{try{!Yt&&bt.return&&bt.return()}finally{if(er)throw Kt}}var ro=ee.length,Tn=ro;for(ro&&ee.push(R);Tn<ge;){var Ao=m,vi=!0,Xo=!1,ha=void 0;try{for(var Cc=D[Symbol.iterator](),Mo;!(vi=(Mo=Cc.next()).done);vi=!0){var Ws=Mo.value;Ws>=_e&&Ws<Ao&&(Ao=Ws)}}catch($l){Xo=!0,ha=$l}finally{try{!vi&&Cc.return&&Cc.return()}finally{if(Xo)throw ha}}var fd=Tn+1;Ao-_e>z((m-ut)/fd)&&U("overflow"),ut+=(Ao-_e)*fd,_e=Ao;var vc=!0,Eg=!1,bl=void 0;try{for(var bg=D[Symbol.iterator](),Ig;!(vc=(Ig=bg.next()).done);vc=!0){var YE=Ig.value;if(YE<_e&&++ut>m&&U("overflow"),YE==_e){for(var Ba=ut,wu=h;;wu+=h){var Su=wu<=St?g:wu>=St+A?A:wu-St;if(Ba<Su)break;var pd=Ba-Su,Tg=h-Su;ee.push(Q(ie(Su+pd%Tg,0))),Ba=z(pd/Tg)}ee.push(Q(ie(Ba,0))),St=ae(ut,fd,Tn==ro),ut=0,++Tn}}}catch($l){Eg=!0,bl=$l}finally{try{!vc&&bg.return&&bg.return()}finally{if(Eg)throw bl}}++ut,++_e}return ee.join("")},"encode"),Ae=s(function(D){return J(D,function(ee){return B.test(ee)?te(ee.slice(4).toLowerCase()):ee})},"toUnicode"),Oe=s(function(D){return J(D,function(ee){return L.test(ee)?"xn--"+pe(ee):ee})},"toASCII"),Te={version:"2.1.0",ucs2:{decode:j,encode:$},decode:te,encode:pe,toASCII:Oe,toUnicode:Ae},Je={};function Fe(F){var D=F.charCodeAt(0),ee=void 0;return D<16?ee="%0"+D.toString(16).toUpperCase():D<128?ee="%"+D.toString(16).toUpperCase():D<2048?ee="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():ee="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),ee}s(Fe,"pctEncChar");function lt(F){for(var D="",ee=0,ge=F.length;ee<ge;){var _e=parseInt(F.substr(ee+1,2),16);if(_e<128)D+=String.fromCharCode(_e),ee+=3;else if(_e>=194&&_e<224){if(ge-ee>=6){var ut=parseInt(F.substr(ee+4,2),16);D+=String.fromCharCode((_e&31)<<6|ut&63)}else D+=F.substr(ee,6);ee+=6}else if(_e>=224){if(ge-ee>=9){var St=parseInt(F.substr(ee+4,2),16),Yt=parseInt(F.substr(ee+7,2),16);D+=String.fromCharCode((_e&15)<<12|(St&63)<<6|Yt&63)}else D+=F.substr(ee,9);ee+=9}else D+=F.substr(ee,3),ee+=3}return D}s(lt,"pctDecChars");function _t(F,D){function ee(ge){var _e=lt(ge);return _e.match(D.UNRESERVED)?_e:ge}return s(ee,"decodeUnreserved"),F.scheme&&(F.scheme=String(F.scheme).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_SCHEME,"")),F.userinfo!==void 0&&(F.userinfo=String(F.userinfo).replace(D.PCT_ENCODED,ee).replace(D.NOT_USERINFO,Fe).replace(D.PCT_ENCODED,i)),F.host!==void 0&&(F.host=String(F.host).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_HOST,Fe).replace(D.PCT_ENCODED,i)),F.path!==void 0&&(F.path=String(F.path).replace(D.PCT_ENCODED,ee).replace(F.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,Fe).replace(D.PCT_ENCODED,i)),F.query!==void 0&&(F.query=String(F.query).replace(D.PCT_ENCODED,ee).replace(D.NOT_QUERY,Fe).replace(D.PCT_ENCODED,i)),F.fragment!==void 0&&(F.fragment=String(F.fragment).replace(D.PCT_ENCODED,ee).replace(D.NOT_FRAGMENT,Fe).replace(D.PCT_ENCODED,i)),F}s(_t,"_normalizeComponentEncoding");function xt(F){return F.replace(/^0*(.*)/,"$1")||"0"}s(xt,"_stripLeadingZeros");function ht(F,D){var ee=F.match(D.IPV4ADDRESS)||[],ge=f(ee,2),_e=ge[1];return _e?_e.split(".").map(xt).join("."):F}s(ht,"_normalizeIPv4");function ue(F,D){var ee=F.match(D.IPV6ADDRESS)||[],ge=f(ee,3),_e=ge[1],ut=ge[2];if(_e){for(var St=_e.toLowerCase().split("::").reverse(),Yt=f(St,2),er=Yt[0],Kt=Yt[1],bt=Kt?Kt.split(":").map(xt):[],yr=er.split(":").map(xt),li=D.IPV4ADDRESS.test(yr[yr.length-1]),ro=li?7:8,Tn=yr.length-ro,Ao=Array(ro),vi=0;vi<ro;++vi)Ao[vi]=bt[vi]||yr[Tn+vi]||"";li&&(Ao[ro-1]=ht(Ao[ro-1],D));var Xo=Ao.reduce(function(fd,vc,Eg){if(!vc||vc==="0"){var bl=fd[fd.length-1];bl&&bl.index+bl.length===Eg?bl.length++:fd.push({index:Eg,length:1})}return fd},[]),ha=Xo.sort(function(fd,vc){return vc.length-fd.length})[0],Cc=void 0;if(ha&&ha.length>1){var Mo=Ao.slice(0,ha.index),Ws=Ao.slice(ha.index+ha.length);Cc=Mo.join(":")+"::"+Ws.join(":")}else Cc=Ao.join(":");return ut&&(Cc+="%"+ut),Cc}else return F}s(ue,"_normalizeIPv6");var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ye="".match(/(){0}/)[1]===void 0;function $e(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee={},ge=D.iri!==!1?u:l;D.reference==="suffix"&&(F=(D.scheme?D.scheme+":":"")+"//"+F);var _e=F.match(Ue);if(_e){ye?(ee.scheme=_e[1],ee.userinfo=_e[3],ee.host=_e[4],ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=_e[7],ee.fragment=_e[8],isNaN(ee.port)&&(ee.port=_e[5])):(ee.scheme=_e[1]||void 0,ee.userinfo=F.indexOf("@")!==-1?_e[3]:void 0,ee.host=F.indexOf("//")!==-1?_e[4]:void 0,ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=F.indexOf("?")!==-1?_e[7]:void 0,ee.fragment=F.indexOf("#")!==-1?_e[8]:void 0,isNaN(ee.port)&&(ee.port=F.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_e[4]:void 0)),ee.host&&(ee.host=ue(ht(ee.host,ge),ge)),ee.scheme===void 0&&ee.userinfo===void 0&&ee.host===void 0&&ee.port===void 0&&!ee.path&&ee.query===void 0?ee.reference="same-document":ee.scheme===void 0?ee.reference="relative":ee.fragment===void 0?ee.reference="absolute":ee.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==ee.reference&&(ee.error=ee.error||"URI is not a "+D.reference+" reference.");var ut=Je[(D.scheme||ee.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!ut||!ut.unicodeSupport)){if(ee.host&&(D.domainHost||ut&&ut.domainHost))try{ee.host=Te.toASCII(ee.host.replace(ge.PCT_ENCODED,lt).toLowerCase())}catch(St){ee.error=ee.error||"Host's domain name can not be converted to ASCII via punycode: "+St}_t(ee,l)}else _t(ee,ge);ut&&ut.parse&&ut.parse(ee,D)}else ee.error=ee.error||"URI can not be parsed.";return ee}s($e,"parse");function se(F,D){var ee=D.iri!==!1?u:l,ge=[];return F.userinfo!==void 0&&(ge.push(F.userinfo),ge.push("@")),F.host!==void 0&&ge.push(ue(ht(String(F.host),ee),ee).replace(ee.IPV6ADDRESS,function(_e,ut,St){return"["+ut+(St?"%25"+St:"")+"]"})),(typeof F.port=="number"||typeof F.port=="string")&&(ge.push(":"),ge.push(String(F.port))),ge.length?ge.join(""):void 0}s(se,"_recomposeAuthority");var le=/^\.\.?\//,qe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,Ee=/^\/?(?:.|\n)*?(?=\/|$)/;function je(F){for(var D=[];F.length;)if(F.match(le))F=F.replace(le,"");else if(F.match(qe))F=F.replace(qe,"/");else if(F.match(Be))F=F.replace(Be,"/"),D.pop();else if(F==="."||F==="..")F="";else{var ee=F.match(Ee);if(ee){var ge=ee[0];F=F.slice(ge.length),D.push(ge)}else throw new Error("Unexpected dot segment condition")}return D.join("")}s(je,"removeDotSegments");function tt(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=D.iri?u:l,ge=[],_e=Je[(D.scheme||F.scheme||"").toLowerCase()];if(_e&&_e.serialize&&_e.serialize(F,D),F.host&&!ee.IPV6ADDRESS.test(F.host)){if(D.domainHost||_e&&_e.domainHost)try{F.host=D.iri?Te.toUnicode(F.host):Te.toASCII(F.host.replace(ee.PCT_ENCODED,lt).toLowerCase())}catch(Yt){F.error=F.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+Yt}}_t(F,ee),D.reference!=="suffix"&&F.scheme&&(ge.push(F.scheme),ge.push(":"));var ut=se(F,D);if(ut!==void 0&&(D.reference!=="suffix"&&ge.push("//"),ge.push(ut),F.path&&F.path.charAt(0)!=="/"&&ge.push("/")),F.path!==void 0){var St=F.path;!D.absolutePath&&(!_e||!_e.absolutePath)&&(St=je(St)),ut===void 0&&(St=St.replace(/^\/\//,"/%2F")),ge.push(St)}return F.query!==void 0&&(ge.push("?"),ge.push(F.query)),F.fragment!==void 0&&(ge.push("#"),ge.push(F.fragment)),ge.join("")}s(tt,"serialize");function pt(F,D){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=arguments[3],_e={};return ge||(F=$e(tt(F,ee),ee),D=$e(tt(D,ee),ee)),ee=ee||{},!ee.tolerant&&D.scheme?(_e.scheme=D.scheme,_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.path?(D.path.charAt(0)==="/"?_e.path=je(D.path):((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path?_e.path="/"+D.path:F.path?_e.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+D.path:_e.path=D.path,_e.path=je(_e.path)),_e.query=D.query):(_e.path=F.path,D.query!==void 0?_e.query=D.query:_e.query=F.query),_e.userinfo=F.userinfo,_e.host=F.host,_e.port=F.port),_e.scheme=F.scheme),_e.fragment=D.fragment,_e}s(pt,"resolveComponents");function Ft(F,D,ee){var ge=a({scheme:"null"},ee);return tt(pt($e(F,ge),$e(D,ge),ge,!0),ge)}s(Ft,"resolve");function Jt(F,D){return typeof F=="string"?F=tt($e(F,D),D):n(F)==="object"&&(F=$e(tt(F,D),D)),F}s(Jt,"normalize");function Qt(F,D,ee){return typeof F=="string"?F=tt($e(F,ee),ee):n(F)==="object"&&(F=tt(F,ee)),typeof D=="string"?D=tt($e(D,ee),ee):n(D)==="object"&&(D=tt(D,ee)),F===D}s(Qt,"equal");function Vr(F,D){return F&&F.toString().replace(!D||!D.iri?l.ESCAPE:u.ESCAPE,Fe)}s(Vr,"escapeComponent");function Pr(F,D){return F&&F.toString().replace(!D||!D.iri?l.PCT_ENCODED:u.PCT_ENCODED,lt)}s(Pr,"unescapeComponent");var ln={scheme:"http",domainHost:!0,parse:s(function(D,ee){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},"parse"),serialize:s(function(D,ee){var ge=String(D.scheme).toLowerCase()==="https";return(D.port===(ge?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D},"serialize")},ve={scheme:"https",domainHost:ln.domainHost,parse:ln.parse,serialize:ln.serialize};function Ge(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}s(Ge,"isSecure");var ft={scheme:"ws",domainHost:!0,parse:s(function(D,ee){var ge=D;return ge.secure=Ge(ge),ge.resourceName=(ge.path||"/")+(ge.query?"?"+ge.query:""),ge.path=void 0,ge.query=void 0,ge},"parse"),serialize:s(function(D,ee){if((D.port===(Ge(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var ge=D.resourceName.split("?"),_e=f(ge,2),ut=_e[0],St=_e[1];D.path=ut&&ut!=="/"?ut:void 0,D.query=St,D.resourceName=void 0}return D.fragment=void 0,D},"serialize")},Tt={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},or={},Zt=!0,Ir="[A-Za-z0-9\\-\\.\\_\\~"+(Zt?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",ur="[0-9A-Fa-f]",rr=r(r("%[EFef]"+ur+"%"+ur+ur+"%"+ur+ur)+"|"+r("%[89A-Fa-f]"+ur+"%"+ur+ur)+"|"+r("%"+ur+ur)),lr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",nr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Nr=e(nr,'[\\"\\\\]'),zr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",sn=new RegExp(Ir,"g"),yn=new RegExp(rr,"g"),ri=new RegExp(e("[^]",lr,"[\\.]",'[\\"]',Nr),"g"),_n=new RegExp(e("[^]",Ir,zr),"g"),Zn=_n;function an(F){var D=lt(F);return D.match(sn)?D:F}s(an,"decodeUnreserved");var Yn={scheme:"mailto",parse:s(function(D,ee){var ge=D,_e=ge.to=ge.path?ge.path.split(","):[];if(ge.path=void 0,ge.query){for(var ut=!1,St={},Yt=ge.query.split("&"),er=0,Kt=Yt.length;er<Kt;++er){var bt=Yt[er].split("=");switch(bt[0]){case"to":for(var yr=bt[1].split(","),li=0,ro=yr.length;li<ro;++li)_e.push(yr[li]);break;case"subject":ge.subject=Pr(bt[1],ee);break;case"body":ge.body=Pr(bt[1],ee);break;default:ut=!0,St[Pr(bt[0],ee)]=Pr(bt[1],ee);break}}ut&&(ge.headers=St)}ge.query=void 0;for(var Tn=0,Ao=_e.length;Tn<Ao;++Tn){var vi=_e[Tn].split("@");if(vi[0]=Pr(vi[0]),ee.unicodeSupport)vi[1]=Pr(vi[1],ee).toLowerCase();else try{vi[1]=Te.toASCII(Pr(vi[1],ee).toLowerCase())}catch(Xo){ge.error=ge.error||"Email address's domain name can not be converted to ASCII via punycode: "+Xo}_e[Tn]=vi.join("@")}return ge},"parse$$1"),serialize:s(function(D,ee){var ge=D,_e=o(D.to);if(_e){for(var ut=0,St=_e.length;ut<St;++ut){var Yt=String(_e[ut]),er=Yt.lastIndexOf("@"),Kt=Yt.slice(0,er).replace(yn,an).replace(yn,i).replace(ri,Fe),bt=Yt.slice(er+1);try{bt=ee.iri?Te.toUnicode(bt):Te.toASCII(Pr(bt,ee).toLowerCase())}catch(Tn){ge.error=ge.error||"Email address's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Tn}_e[ut]=Kt+"@"+bt}ge.path=_e.join(",")}var yr=D.headers=D.headers||{};D.subject&&(yr.subject=D.subject),D.body&&(yr.body=D.body);var li=[];for(var ro in yr)yr[ro]!==or[ro]&&li.push(ro.replace(yn,an).replace(yn,i).replace(_n,Fe)+"="+yr[ro].replace(yn,an).replace(yn,i).replace(Zn,Fe));return li.length&&(ge.query=li.join("&")),ge},"serialize$$1")},Pe=/^([^\:]+)\:(.*)/,Y={scheme:"urn",parse:s(function(D,ee){var ge=D.path&&D.path.match(Pe),_e=D;if(ge){var ut=ee.scheme||_e.scheme||"urn",St=ge[1].toLowerCase(),Yt=ge[2],er=ut+":"+(ee.nid||St),Kt=Je[er];_e.nid=St,_e.nss=Yt,_e.path=void 0,Kt&&(_e=Kt.parse(_e,ee))}else _e.error=_e.error||"URN can not be parsed.";return _e},"parse$$1"),serialize:s(function(D,ee){var ge=ee.scheme||D.scheme||"urn",_e=D.nid,ut=ge+":"+(ee.nid||_e),St=Je[ut];St&&(D=St.serialize(D,ee));var Yt=D,er=D.nss;return Yt.path=(_e||ee.nid)+":"+er,Yt},"serialize$$1")},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:s(function(D,ee){var ge=D;return ge.uuid=ge.nss,ge.nss=void 0,!ee.tolerant&&(!ge.uuid||!ge.uuid.match(Ce))&&(ge.error=ge.error||"UUID is not valid."),ge},"parse"),serialize:s(function(D,ee){var ge=D;return ge.nss=(D.uuid||"").toLowerCase(),ge},"serialize")};Je[ln.scheme]=ln,Je[ve.scheme]=ve,Je[ft.scheme]=ft,Je[Tt.scheme]=Tt,Je[Yn.scheme]=Yn,Je[Y.scheme]=Y,Je[Ie.scheme]=Ie,t.SCHEMES=Je,t.pctEncChar=Fe,t.pctDecChars=lt,t.parse=$e,t.removeDotSegments=je,t.serialize=tt,t.resolveComponents=pt,t.resolve=Ft,t.normalize=Jt,t.equal=Qt,t.escapeComponent=Vr,t.unescapeComponent=Pr,Object.defineProperty(t,"__esModule",{value:!0})})});var vle=H((xDo,B1t)=>{"use strict";d();B1t.exports=s(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},"equal")});var M1t=H((IDo,N1t)=>{"use strict";d();N1t.exports=s(function(e){for(var r=0,n=e.length,i=0,o;i<n;)r++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return r},"ucs2length")});var ZP=H((SDo,O1t)=>{"use strict";d();O1t.exports={copy:E2r,checkDataType:HPe,checkDataTypes:b2r,coerceToTypes:I2r,toHash:WPe,getProperty:jPe,escapeQuotes:GPe,equal:vle(),ucs2length:M1t(),varOccurences:S2r,varReplace:_2r,schemaHasRules:R2r,schemaHasRulesExcept:k2r,schemaUnknownRules:P2r,toQuotedString:$Pe,getPathExpr:D2r,getPath:B2r,getData:L2r,unescapeFragment:F2r,unescapeJsonPointer:zPe,escapeFragment:O2r,escapeJsonPointer:VPe};function E2r(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}s(E2r,"copy");function HPe(t,e,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",a=n?"!":"",c=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+o+"typeof "+e+i+'"object"'+o+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+c+"("+e+" % 1)"+o+e+i+e+(r?o+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+t+'"'+(r?o+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+t+'"'}}s(HPe,"checkDataType");function b2r(t,e,r){switch(t.length){case 1:return HPe(t[0],e,r,!0);default:var n="",i=WPe(t);i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)n+=(n?" && ":"")+HPe(o,e,r,!0);return n}}s(b2r,"checkDataTypes");var L1t=WPe(["string","number","integer","boolean","null"]);function I2r(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];(L1t[i]||t==="array"&&i==="array")&&(r[r.length]=i)}if(r.length)return r}else{if(L1t[e])return[e];if(t==="array"&&e==="array")return["array"]}}s(I2r,"coerceToTypes");function WPe(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}s(WPe,"toHash");var T2r=/^[a-z$_][a-z$_0-9]*$/i,w2r=/'|\\/g;function jPe(t){return typeof t=="number"?"["+t+"]":T2r.test(t)?"."+t:"['"+GPe(t)+"']"}s(jPe,"getProperty");function GPe(t){return t.replace(w2r,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}s(GPe,"escapeQuotes");function S2r(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}s(S2r,"varOccurences");function _2r(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}s(_2r,"varReplace");function R2r(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}s(R2r,"schemaHasRules");function k2r(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}s(k2r,"schemaHasRulesExcept");function P2r(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}s(P2r,"schemaUnknownRules");function $Pe(t){return"'"+GPe(t)+"'"}s($Pe,"toQuotedString");function D2r(t,e,r,n){var i=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return F1t(t,i)}s(D2r,"getPathExpr");function B2r(t,e,r){var n=$Pe(r?"/"+VPe(e):jPe(e));return F1t(t,n)}s(B2r,"getPath");var N2r=/^\/(?:[^~]|~0|~1)*$/,M2r=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function L2r(t,e,r){var n,i,o,a;if(t==="")return"rootData";if(t[0]=="/"){if(!N2r.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,o="rootData"}else{if(a=t.match(M2r),!a)throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],i=a[2],i=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!i)return o}for(var c=o,l=i.split("/"),u=0;u<l.length;u++){var f=l[u];f&&(o+=jPe(zPe(f)),c+=" && "+o)}return c}s(L2r,"getData");function F1t(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}s(F1t,"joinPaths");function F2r(t){return zPe(decodeURIComponent(t))}s(F2r,"unescapeFragment");function O2r(t){return encodeURIComponent(VPe(t))}s(O2r,"escapeFragment");function VPe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(VPe,"escapeJsonPointer");function zPe(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}s(zPe,"unescapeJsonPointer")});var YPe=H((kDo,Q1t)=>{"use strict";d();var Q2r=ZP();Q1t.exports=U2r;function U2r(t){Q2r.copy(t,this)}s(U2r,"SchemaObject")});var q1t=H((BDo,U1t)=>{"use strict";d();var LS=U1t.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};xle(e,n,i,t,"",t)};LS.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};LS.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};LS.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};LS.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function xle(t,e,r,n,i,o,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,a,c,l,u);for(var f in n){var p=n[f];if(Array.isArray(p)){if(f in LS.arrayKeywords)for(var m=0;m<p.length;m++)xle(t,e,r,p[m],i+"/"+f+"/"+m,o,i,f,n,m)}else if(f in LS.propsKeywords){if(p&&typeof p=="object")for(var h in p)xle(t,e,r,p[h],i+"/"+f+"/"+q2r(h),o,i,f,n,h)}else(f in LS.keywords||t.allKeys&&!(f in LS.skipKeywords))&&xle(t,e,r,p,i+"/"+f,o,i,f,n)}r(n,i,o,a,c,l,u)}}s(xle,"_traverse");function q2r(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(q2r,"escapeJsonPtr")});var Sle=H((LDo,j1t)=>{"use strict";d();var xH=D1t(),H1t=vle(),Tle=ZP(),Ele=YPe(),H2r=q1t();j1t.exports=QS;QS.normalizeId=OS;QS.fullPath=ble;QS.url=Ile;QS.ids=V2r;QS.inlineRef=KPe;QS.schema=wle;function QS(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return QS.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof Ele)return KPe(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i=wle.call(this,e,r),o,a,c;return i&&(o=i.schema,e=i.root,c=i.baseId),o instanceof Ele?a=o.validate||t.call(this,o.schema,e,void 0,c):o!==void 0&&(a=KPe(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,c)),a}s(QS,"resolve");function wle(t,e){var r=xH.parse(e),n=W1t(r),i=ble(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==i){var o=OS(n),a=this._refs[o];if(typeof a=="string")return $2r.call(this,t,a,r);if(a instanceof Ele)a.validate||this._compile(a),t=a;else if(a=this._schemas[o],a instanceof Ele){if(a.validate||this._compile(a),o==OS(e))return{schema:a,root:t,baseId:i};t=a}else return;if(!t.schema)return;i=ble(this._getId(t.schema))}return $1t.call(this,r,i,t.schema,t)}s(wle,"resolveSchema");function $2r(t,e,r){var n=wle.call(this,t,e);if(n){var i=n.schema,o=n.baseId;t=n.root;var a=this._getId(i);return a&&(o=Ile(o,a)),$1t.call(this,r,o,i,t)}}s($2r,"resolveRecursive");var W2r=Tle.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function $1t(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=Tle.unescapeFragment(a),r=r[a],r===void 0)break;var c;if(!W2r[a]&&(c=this._getId(r),c&&(e=Ile(e,c)),r.$ref)){var l=Ile(e,r.$ref),u=wle.call(this,n,l);u&&(r=u.schema,n=u.root,e=u.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}s($1t,"getJsonPointer");var j2r=Tle.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function KPe(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return JPe(t);if(e)return XPe(t)<=e}s(KPe,"inlineRef");function JPe(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!JPe(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!JPe(e)))return!1;return!0}s(JPe,"checkNoRef");function XPe(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=XPe(r)),e==1/0)return 1/0}else for(var i in t){if(i=="$ref")return 1/0;if(j2r[i])e++;else if(r=t[i],typeof r=="object"&&(e+=XPe(r)+1),e==1/0)return 1/0}return e}s(XPe,"countKeys");function ble(t,e){e!==!1&&(t=OS(t));var r=xH.parse(t);return W1t(r)}s(ble,"getFullPath");function W1t(t){return xH.serialize(t).split("#")[0]+"#"}s(W1t,"_getFullPath");var G2r=/#\/?$/;function OS(t){return t?t.replace(G2r,""):""}s(OS,"normalizeId");function Ile(t,e){return e=OS(e),xH.resolve(t,e)}s(Ile,"resolveUrl");function V2r(t){var e=OS(this._getId(t)),r={"":e},n={"":ble(e,!1)},i={},o=this;return H2r(t,{allKeys:!0},function(a,c,l,u,f,p,m){if(c!==""){var h=o._getId(a),g=r[u],A=n[u]+"/"+f;if(m!==void 0&&(A+="/"+(typeof m=="number"?m:Tle.escapeFragment(m))),typeof h=="string"){h=g=OS(g?xH.resolve(g,h):h);var y=o._refs[h];if(typeof y=="string"&&(y=o._refs[y]),y&&y.schema){if(!H1t(a,y.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=OS(A))if(h[0]=="#"){if(i[h]&&!H1t(a,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=a}else o._refs[h]=A}r[c]=g,n[c]=A}}),i}s(V2r,"resolveIds")});var _le=H((QDo,V1t)=>{"use strict";d();var ZPe=Sle();V1t.exports={Validation:G1t(z2r),MissingRef:G1t(e5e)};function z2r(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}s(z2r,"ValidationError");e5e.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function e5e(t,e,r){this.message=r||e5e.message(t,e),this.missingRef=ZPe.url(t,e),this.missingSchema=ZPe.normalizeId(ZPe.fullPath(this.missingRef))}s(e5e,"MissingRefError");function G1t(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}s(G1t,"errorSubclass")});var t5e=H((HDo,z1t)=>{"use strict";d();z1t.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(o){return function(a){return function(c,l){var u={key:c,value:a[c]},f={key:l,value:a[l]};return o(u,f)}}}(e.cmp),i=[];return s(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=o(a[c])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,f=Object.keys(a).sort(n&&n(a));for(l="",c=0;c<f.length;c++){var p=f[c],m=o(a[p]);m&&(l&&(l+=","),l+=JSON.stringify(p)+":"+m)}return i.splice(u,1),"{"+l+"}"}},"stringify")(t)}});var r5e=H((jDo,Y1t)=>{"use strict";d();Y1t.exports=s(function(e,r,n){var i="",o=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var r="false schema",f=e.level,p=e.dataLevel,m=e.schema[r],h=e.schemaPath+e.util.getProperty(r),g=e.errSchemaPath+"/"+r,B=!e.opts.allErrors,K,A="data"+(p||""),R="valid"+f;if(e.schema===!1){e.isTop?B=!0:i+=" var "+R+" = false; ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+R+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var b=e.isTop,f=e.level=0,p=e.dataLevel=0,A="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,p=e.dataLevel,A="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+f+" = errors;"}var R="valid"+f,B=!e.opts.allErrors,L="",O="",K,V=e.schema.type,z=Array.isArray(V);if(V&&e.opts.nullable&&e.schema.nullable===!0&&(z?V.indexOf("null")==-1&&(V=V.concat("null")):V!="null"&&(V=[V,"null"],z=!0)),z&&V.length==1&&(V=V[0],z=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),V){if(e.opts.coerceTypes)var Q=e.util.coerceToTypes(e.opts.coerceTypes,V);var U=e.RULES.types[V];if(Q||z||U===!0||U&&!Ee(U)){var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",h=e.schemaPath+".type",g=e.errSchemaPath+"/type",Z=z?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[Z](V,A,e.opts.strictNumbers,!0)+") { ",Q){var J="dataType"+f,j="coerced"+f;i+=" var "+J+" = typeof "+A+"; var "+j+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+J+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+J+" = typeof "+A+"; if ("+e.util.checkDataType(e.schema.type,A,e.opts.strictNumbers)+") "+j+" = "+A+"; } "),i+=" if ("+j+" !== undefined) ; ";var $=Q;if($)for(var X,ie=-1,ae=$.length-1;ie<ae;)X=$[ie+=1],X=="string"?i+=" else if ("+J+" == 'number' || "+J+" == 'boolean') "+j+" = '' + "+A+"; else if ("+A+" === null) "+j+" = ''; ":X=="number"||X=="integer"?(i+=" else if ("+J+" == 'boolean' || "+A+" === null || ("+J+" == 'string' && "+A+" && "+A+" == +"+A+" ",X=="integer"&&(i+=" && !("+A+" % 1)"),i+=")) "+j+" = +"+A+"; "):X=="boolean"?i+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+j+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+j+" = true; ":X=="null"?i+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+j+" = null; ":e.opts.coerceTypes=="array"&&X=="array"&&(i+=" else if ("+J+" == 'string' || "+J+" == 'number' || "+J+" == 'boolean' || "+A+" == null) "+j+" = ["+A+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+j+" !== undefined) {  ";var te=p?"data"+(p-1||""):"parentData",pe=p?e.dataPathArr[p]:"parentDataProperty";i+=" "+A+" = "+j+"; ",p||(i+="if ("+te+" !== undefined)"),i+=" "+te+"["+pe+"] = "+j+"; } "}else{var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",B&&(i+=" } if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",O+="}");else{var Ae=e.RULES;if(Ae){for(var U,Oe=-1,Te=Ae.length-1;Oe<Te;)if(U=Ae[Oe+=1],Ee(U)){if(U.type&&(i+=" if ("+e.util.checkDataType(U.type,A,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(U.type=="object"&&e.schema.properties){var m=e.schema.properties,Je=Object.keys(m),Fe=Je;if(Fe)for(var lt,_t=-1,xt=Fe.length-1;_t<xt;){lt=Fe[_t+=1];var ht=m[lt];if(ht.default!==void 0){var ue=A+e.util.getProperty(lt);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}else if(U.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var ht,ie=-1,ye=Ue.length-1;ie<ye;)if(ht=Ue[ie+=1],ht.default!==void 0){var ue=A+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}}var $e=U.rules;if($e){for(var se,le=-1,qe=$e.length-1;le<qe;)if(se=$e[le+=1],je(se)){var Be=se.code(e,se.keyword,U.type);Be&&(i+=" "+Be+" ",B&&(L+="}"))}}if(B&&(i+=" "+L+" ",L=""),U.type&&(i+=" } ",V&&V===U.type&&!Q)){i+=" else { ";var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}B&&(i+=" if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",O+="}")}}}B&&(i+=" "+O+" "),b?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+R+" = errors === errs_"+f+";";function Ee(pt){for(var Ft=pt.rules,Jt=0;Jt<Ft.length;Jt++)if(je(Ft[Jt]))return!0}s(Ee,"$shouldUseGroup");function je(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&tt(pt)}s(je,"$shouldUseRule");function tt(pt){for(var Ft=pt.implements,Jt=0;Jt<Ft.length;Jt++)if(e.schema[Ft[Jt]]!==void 0)return!0}return s(tt,"$ruleImplementsSomeKeyword"),i},"generate_validate")});var evt=H((zDo,Z1t)=>{"use strict";d();var Rle=Sle(),Ple=ZP(),J1t=_le(),Y2r=t5e(),K1t=r5e(),K2r=Ple.ucs2length,J2r=vle(),X2r=J1t.Validation;Z1t.exports=n5e;function n5e(t,e,r,n){var i=this,o=this._opts,a=[void 0],c={},l=[],u={},f=[],p={},m=[];e=e||{schema:t,refVal:a,refs:c};var h=Z2r.call(this,t,e,n),g=this._compilations[h.index];if(h.compiling)return g.callValidate=S;var A=this._formats,y=this.RULES;try{var E=R(t,e,r,n);g.validate=E;var b=g.callValidate;return b&&(b.schema=E.schema,b.errors=null,b.refs=E.refs,b.refVal=E.refVal,b.root=E.root,b.$async=E.$async,o.sourceCode&&(b.source=E.source)),E}finally{eRr.call(this,t,e,n)}function S(){var Z=g.validate,J=Z.apply(this,arguments);return S.errors=Z.errors,J}s(S,"callValidate");function R(Z,J,j,$){var X=!J||J&&J.schema==Z;if(J.schema!=e.schema)return n5e.call(i,Z,J,j,$);var ie=Z.$async===!0,ae=K1t({isTop:!0,schema:Z,isRoot:X,baseId:$,root:J,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:J1t.MissingRef,RULES:y,validate:K1t,util:Ple,resolve:Rle,resolveRef:B,usePattern:z,useDefault:Q,useCustomRule:U,opts:o,formats:A,logger:i.logger,self:i});ae=kle(a,nRr)+kle(l,tRr)+kle(f,rRr)+kle(m,iRr)+ae,o.processCode&&(ae=o.processCode(ae,Z));var te;try{var pe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ae);te=pe(i,y,A,e,a,f,m,J2r,K2r,X2r),a[0]=te}catch(Ae){throw i.logger.error("Error compiling schema, function code:",ae),Ae}return te.schema=Z,te.errors=null,te.refs=c,te.refVal=a,te.root=X?te:J,ie&&(te.$async=!0),o.sourceCode===!0&&(te.source={code:ae,patterns:l,defaults:f}),te}s(R,"localCompile");function B(Z,J,j){J=Rle.url(Z,J);var $=c[J],X,ie;if($!==void 0)return X=a[$],ie="refVal["+$+"]",V(X,ie);if(!j&&e.refs){var ae=e.refs[J];if(ae!==void 0)return X=e.refVal[ae],ie=L(J,X),V(X,ie)}ie=L(J);var te=Rle.call(i,R,e,J);if(te===void 0){var pe=r&&r[J];pe&&(te=Rle.inlineRef(pe,o.inlineRefs)?pe:n5e.call(i,pe,e,r,Z))}if(te===void 0)O(J);else return K(J,te),V(te,ie)}s(B,"resolveRef");function L(Z,J){var j=a.length;return a[j]=J,c[Z]=j,"refVal"+j}s(L,"addLocalRef");function O(Z){delete c[Z]}s(O,"removeLocalRef");function K(Z,J){var j=c[Z];a[j]=J}s(K,"replaceLocalRef");function V(Z,J){return typeof Z=="object"||typeof Z=="boolean"?{code:J,schema:Z,inline:!0}:{code:J,$async:Z&&!!Z.$async}}s(V,"resolvedRef");function z(Z){var J=u[Z];return J===void 0&&(J=u[Z]=l.length,l[J]=Z),"pattern"+J}s(z,"usePattern");function Q(Z){switch(typeof Z){case"boolean":case"number":return""+Z;case"string":return Ple.toQuotedString(Z);case"object":if(Z===null)return"null";var J=Y2r(Z),j=p[J];return j===void 0&&(j=p[J]=f.length,f[j]=Z),"default"+j}}s(Q,"useDefault");function U(Z,J,j,$){if(i._opts.validateSchema!==!1){var X=Z.definition.dependencies;if(X&&!X.every(function(Fe){return Object.prototype.hasOwnProperty.call(j,Fe)}))throw new Error("parent schema must have all required keywords: "+X.join(","));var ie=Z.definition.validateSchema;if(ie){var ae=ie(J);if(!ae){var te="keyword schema is invalid: "+i.errorsText(ie.errors);if(i._opts.validateSchema=="log")i.logger.error(te);else throw new Error(te)}}}var pe=Z.definition.compile,Ae=Z.definition.inline,Oe=Z.definition.macro,Te;if(pe)Te=pe.call(i,J,j,$);else if(Oe)Te=Oe.call(i,J,j,$),o.validateSchema!==!1&&i.validateSchema(Te,!0);else if(Ae)Te=Ae.call(i,$,Z.keyword,J,j);else if(Te=Z.definition.validate,!Te)return;if(Te===void 0)throw new Error('custom keyword "'+Z.keyword+'"failed to compile');var Je=m.length;return m[Je]=Te,{code:"customRule"+Je,validate:Te}}s(U,"useCustomRule")}s(n5e,"compile");function Z2r(t,e,r){var n=X1t.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}s(Z2r,"checkCompiling");function eRr(t,e,r){var n=X1t.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}s(eRr,"endCompiling");function X1t(t,e,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==t&&i.root==e&&i.baseId==r)return n}return-1}s(X1t,"compIndex");function tRr(t,e){return"var pattern"+t+" = new RegExp("+Ple.toQuotedString(e[t])+");"}s(tRr,"patternCode");function rRr(t){return"var default"+t+" = defaults["+t+"];"}s(rRr,"defaultCode");function nRr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}s(nRr,"refValCode");function iRr(t){return"var customRule"+t+" = customRules["+t+"];"}s(iRr,"customRuleCode");function kle(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}s(kle,"vars")});var rvt=H((JDo,tvt)=>{"use strict";d();var Dle=tvt.exports=s(function(){this._cache={}},"Cache");Dle.prototype.put=s(function(e,r){this._cache[e]=r},"Cache_put");Dle.prototype.get=s(function(e){return this._cache[e]},"Cache_get");Dle.prototype.del=s(function(e){delete this._cache[e]},"Cache_del");Dle.prototype.clear=s(function(){this._cache={}},"Cache_clear")});var mvt=H((eBo,pvt)=>{"use strict";d();var oRr=ZP(),sRr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,aRr=[0,31,28,31,30,31,30,31,31,30,31,30,31],cRr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,nvt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,lRr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,uRr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ivt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ovt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,svt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,avt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,cvt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,lvt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;pvt.exports=Ble;function Ble(t){return t=t=="full"?"full":"fast",oRr.copy(Ble[t])}s(Ble,"formats");Ble.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":ivt,url:ovt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:nvt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:fvt,uuid:svt,"json-pointer":avt,"json-pointer-uri-fragment":cvt,"relative-json-pointer":lvt};Ble.full={date:uvt,time:dvt,"date-time":pRr,uri:hRr,"uri-reference":uRr,"uri-template":ivt,url:ovt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:nvt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:fvt,uuid:svt,"json-pointer":avt,"json-pointer-uri-fragment":cvt,"relative-json-pointer":lvt};function dRr(t){return t%4===0&&(t%100!==0||t%400===0)}s(dRr,"isLeapYear");function uvt(t){var e=t.match(sRr);if(!e)return!1;var r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&dRr(r)?29:aRr[n])}s(uvt,"date");function dvt(t,e){var r=t.match(cRr);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!e||a)}s(dvt,"time");var fRr=/t|\s/i;function pRr(t){var e=t.split(fRr);return e.length==2&&uvt(e[0])&&dvt(e[1],!0)}s(pRr,"date_time");var mRr=/\/|:/;function hRr(t){return mRr.test(t)&&lRr.test(t)}s(hRr,"uri");var gRr=/[^\\]\\Z/;function fvt(t){if(gRr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}s(fvt,"regex")});var gvt=H((nBo,hvt)=>{"use strict";d();hvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,f="data"+(a||""),p="valid"+o,m,h;if(c=="#"||c=="#/")e.isRoot?(m=e.async,h="validate"):(m=e.root.schema.$async===!0,h="root.refVal[0]");else{var g=e.resolveRef(e.baseId,c,e.isRoot);if(g===void 0){var A=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(A);var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(A),u&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,A)}else if(g.inline){var b=e.util.copy(e);b.level++;var S="valid"+b.level;b.schema=g.schema,b.schemaPath="",b.errSchemaPath=c;var R=e.validate(b).replace(/validate\.schema/g,g.code);i+=" "+R+" ",u&&(i+=" if ("+S+") { ")}else m=g.$async===!0||e.async&&g.$async!==!1,h=g.code}if(h){var y=y||[];y.push(i),i="",e.opts.passContext?i+=" "+h+".call(this, ":i+=" "+h+"( ",i+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var B=a?"data"+(a-1||""):"parentData",L=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+B+" , "+L+", rootData)  ";var O=i;if(i=y.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+O+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+O+") { if (vErrors === null) vErrors = "+h+".errors; else vErrors = vErrors.concat("+h+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},"generate_ref")});var yvt=H((sBo,Avt)=>{"use strict";d();Avt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var p="valid"+u.level,m=u.baseId,h=!0,g=o;if(g)for(var A,y=-1,E=g.length-1;y<E;)A=g[y+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))&&(h=!1,u.schema=A,u.schemaPath=a+"["+y+"]",u.errSchemaPath=c+"/"+y,i+="  "+e.validate(u)+" ",u.baseId=m,l&&(i+=" if ("+p+") { ",f+="}"));return l&&(h?i+=" if (true) { ":i+=" "+f.slice(0,-1)+" "),i},"generate_allOf")});var vvt=H((lBo,Cvt)=>{"use strict";d();Cvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=c.every(function(K){return e.opts.strictKeywords?typeof K=="object"&&Object.keys(K).length>0||K===!1:e.util.schemaHasRules(K,e.RULES.all)});if(E){var b=g.baseId;i+=" var "+h+" = errors; var "+m+" = false;  ";var S=e.compositeRule;e.compositeRule=g.compositeRule=!0;var R=c;if(R)for(var B,L=-1,O=R.length-1;L<O;)B=R[L+=1],g.schema=B,g.schemaPath=l+"["+L+"]",g.errSchemaPath=u+"/"+L,i+="  "+e.validate(g)+" ",g.baseId=b,i+=" "+m+" = "+m+" || "+y+"; if (!"+m+") { ",A+="}";e.compositeRule=g.compositeRule=S,i+=" "+A+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else f&&(i+=" if (true) { ");return i},"generate_anyOf")});var Evt=H((fBo,xvt)=>{"use strict";d();xvt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},"generate_comment")});var Ivt=H((hBo,bvt)=>{"use strict";d();bvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,h||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+m+" = equal("+p+", schema"+o+"); if (!"+m+") {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_const")});var wvt=H((yBo,Tvt)=>{"use strict";d();Tvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,S="data"+b,R=e.baseId,B=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(i+="var "+h+" = errors;var "+m+";",B){var L=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+y+" = false; for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var O=p+"["+E+"]";g.dataPathArr[b]=E;var K=e.validate(g);g.baseId=R,e.util.varOccurences(K,S)<2?i+=" "+e.util.varReplace(K,S,O)+" ":i+=" var "+S+" = "+O+"; "+K+" ",i+=" if ("+y+") break; }  ",e.compositeRule=g.compositeRule=L,i+=" "+A+" if (!"+y+") {"}else i+=" if ("+p+".length == 0) {";var V=V||[];V.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var z=i;return i=V.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+z+"]); ":i+=" validate.errors = ["+z+"]; return false; ":i+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",B&&(i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},"generate_contains")});var _vt=H((xBo,Svt)=>{"use strict";d();Svt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y={},E={},b=e.opts.ownProperties;for(L in c)if(L!="__proto__"){var S=c[L],R=Array.isArray(S)?E:y;R[L]=S}i+="var "+m+" = errors;";var B=e.errorPath;i+="var missing"+o+";";for(var L in E)if(R=E[L],R.length){if(i+=" if ( "+p+e.util.getProperty(L)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),f){i+=" && ( ";var O=R;if(O)for(var K,V=-1,z=O.length-1;V<z;){K=O[V+=1],V&&(i+=" || ");var Q=e.util.getProperty(K),U=p+Q;i+=" ( ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(K)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?K:Q)+") ) "}i+=")) {  ";var Z="missing"+o,J="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(B,Z,!0):B+" + "+Z);var j=j||[];j.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var $=i;i=j.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+$+"]); ":i+=" validate.errors = ["+$+"]; return false; ":i+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var X=R;if(X)for(var K,ie=-1,ae=X.length-1;ie<ae;){K=X[ie+=1];var Q=e.util.getProperty(K),J=e.util.escapeQuotes(K),U=p+Q;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,K,e.opts.jsonPointers)),i+=" if ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(K)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",f&&(g+="}",i+=" else { ")}e.errorPath=B;var te=h.baseId;for(var L in y){var S=y[L];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(i+=" "+A+" = true; if ( "+p+e.util.getProperty(L)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),i+=") { ",h.schema=S,h.schemaPath=l+e.util.getProperty(L),h.errSchemaPath=u+"/"+e.util.escapeFragment(L),i+="  "+e.validate(h)+" ",h.baseId=te,i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}"))}return f&&(i+="   "+g+" if ("+m+" == errors) {"),i},"generate_dependencies")});var kvt=H((IBo,Rvt)=>{"use strict";d();Rvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="i"+o,y="schema"+o;h||(i+=" var "+y+" = validate.schema"+l+";"),i+="var "+m+";",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=""+m+" = false;for (var "+A+"=0; "+A+"<"+y+".length; "+A+"++) if (equal("+p+", "+y+"["+A+"])) { "+m+" = true; break; }",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;return i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_enum")});var Dvt=H((SBo,Pvt)=>{"use strict";d();Pvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return f&&(i+=" if (true) { "),i;var m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=e.opts.unknownFormats,A=Array.isArray(g);if(m){var y="format"+o,E="isObject"+o,b="formatType"+o;i+=" var "+y+" = formats["+h+"]; var "+E+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+b+" = "+E+" && "+y+".type || 'string'; if ("+E+") { ",e.async&&(i+=" var async"+o+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (",g!="ignore"&&(i+=" ("+h+" && !"+y+" ",A&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+y+" && "+b+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+y+"("+p+") : "+y+"("+p+")) ":i+=" "+y+"("+p+") ",i+=" : "+y+".test("+p+"))))) {"}else{var y=e.formats[c];if(!y){if(g=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(i+=" if (true) { "),i;if(A&&g.indexOf(c)>=0)return f&&(i+=" if (true) { "),i;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var E=typeof y=="object"&&!(y instanceof RegExp)&&y.validate,b=E&&y.type||"string";if(E){var S=y.async===!0;y=y.validate}if(b!=n)return f&&(i+=" if (true) { "),i;if(S){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(c)+".validate";i+=" if (!(await "+R+"("+p+"))) { "}else{i+=" if (! ";var R="formats"+e.util.getProperty(c);E&&(R+=".validate"),typeof y=="function"?i+=" "+R+"("+p+") ":i+=" "+R+".test("+p+") ",i+=") { "}}var B=B||[];B.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var L=i;return i=B.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+L+"]); ":i+=" validate.errors = ["+L+"]; return false; ":i+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate_format")});var Nvt=H((kBo,Bvt)=>{"use strict";d();Bvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e);g.level++;var A="valid"+g.level,y=e.schema.then,E=e.schema.else,b=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),S=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),R=g.baseId;if(b||S){var B;g.createErrors=!1,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+h+" = errors; var "+m+" = true;  ";var L=e.compositeRule;e.compositeRule=g.compositeRule=!0,i+="  "+e.validate(g)+" ",g.baseId=R,g.createErrors=!0,i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=g.compositeRule=L,b?(i+=" if ("+A+") {  ",g.schema=e.schema.then,g.schemaPath=e.schemaPath+".then",g.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&S?(B="ifClause"+o,i+=" var "+B+" = 'then'; "):B="'then'",i+=" } ",S&&(i+=" else { ")):i+=" if (!"+A+") { ",S&&(g.schema=e.schema.else,g.schemaPath=e.schemaPath+".else",g.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&S?(B="ifClause"+o,i+=" var "+B+" = 'else'; "):B="'else'",i+=" } "),i+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+B+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+B+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_if")});var Lvt=H((BBo,Mvt)=>{"use strict";d();Mvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,S="data"+b,R=e.baseId;if(i+="var "+h+" = errors;var "+m+";",Array.isArray(c)){var B=e.schema.additionalItems;if(B===!1){i+=" "+m+" = "+p+".length <= "+c.length+"; ";var L=u;u=e.errSchemaPath+"/additionalItems",i+="  if (!"+m+") {   ";var O=O||[];O.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var K=i;i=O.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+K+"]); ":i+=" validate.errors = ["+K+"]; return false; ":i+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u=L,f&&(A+="}",i+=" else { ")}var V=c;if(V){for(var z,Q=-1,U=V.length-1;Q<U;)if(z=V[Q+=1],e.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:e.util.schemaHasRules(z,e.RULES.all)){i+=" "+y+" = true; if ("+p+".length > "+Q+") { ";var Z=p+"["+Q+"]";g.schema=z,g.schemaPath=l+"["+Q+"]",g.errSchemaPath=u+"/"+Q,g.errorPath=e.util.getPathExpr(e.errorPath,Q,e.opts.jsonPointers,!0),g.dataPathArr[b]=Q;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",i+=" }  ",f&&(i+=" if ("+y+") { ",A+="}")}}if(typeof B=="object"&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))){g.schema=B,g.schemaPath=e.schemaPath+".additionalItems",g.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+p+".length > "+c.length+") {  for (var "+E+" = "+c.length+"; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var Z=p+"["+E+"]";g.dataPathArr[b]=E;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",f&&(i+=" if (!"+y+") break; "),i+=" } }  ",f&&(i+=" if ("+y+") { ",A+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+="  for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var Z=p+"["+E+"]";g.dataPathArr[b]=E;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",f&&(i+=" if (!"+y+") break; "),i+=" }"}return f&&(i+=" "+A+" if ("+h+" == errors) {"),i},"generate_items")});var i5e=H((LBo,Fvt)=>{"use strict";d();Fvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,R,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=r=="maximum",A=g?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[A],E=e.opts.$data&&y&&y.$data,b=g?"<":">",S=g?">":"<",R=void 0;if(!(m||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(E||y===void 0||typeof y=="number"||typeof y=="boolean"))throw new Error(A+" must be number or boolean");if(E){var B=e.util.getData(y.$data,a,e.dataPathArr),L="exclusive"+o,O="exclType"+o,K="exclIsNumber"+o,V="op"+o,z="' + "+V+" + '";i+=" var schemaExcl"+o+" = "+B+"; ",B="schemaExcl"+o,i+=" var "+L+"; var "+O+" = typeof "+B+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var R=A,Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;i=Q.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+O+" == 'number' ? ( ("+L+" = "+h+" === undefined || "+B+" "+b+"= "+h+") ? "+p+" "+S+"= "+B+" : "+p+" "+S+" "+h+" ) : ( ("+L+" = "+B+" === true) ? "+p+" "+S+"= "+h+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { var op"+o+" = "+L+" ? '"+b+"' : '"+b+"='; ",c===void 0&&(R=A,u=e.errSchemaPath+"/"+A,h=B,m=E)}else{var K=typeof y=="number",z=b;if(K&&m){var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" ( "+h+" === undefined || "+y+" "+b+"= "+h+" ? "+p+" "+S+"= "+y+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { "}else{K&&c===void 0?(L=!0,R=A,u=e.errSchemaPath+"/"+A,h=y,S+="="):(K&&(h=Math[g?"min":"max"](y,c)),y===(K?h:!0)?(L=!0,R=A,u=e.errSchemaPath+"/"+A,S+="="):(L=!1,z+="="));var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+" "+S+" "+h+" || "+p+" !== "+p+") { "}}R=R||r;var Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+V+", limit: "+h+", exclusive: "+L+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+z+" ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;return i=Q.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate__limit")});var o5e=H((QBo,Ovt)=>{"use strict";d();Ovt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxItems"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+".length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxItems"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitItems")});var s5e=H((HBo,Qvt)=>{"use strict";d();Qvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxLength"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),e.opts.unicode===!1?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",r=="maxLength"?i+="longer":i+="shorter",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitLength")});var a5e=H((jBo,Uvt)=>{"use strict";d();Uvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxProperties"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" Object.keys("+p+").length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxProperties"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitProperties")});var Hvt=H((zBo,qvt)=>{"use strict";d();qvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");i+="var division"+o+";if (",m&&(i+=" "+h+" !== undefined && ( typeof "+h+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+h+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",m&&(i+="  )  "),i+=" ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var A=i;return i=g.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_multipleOf")});var Wvt=H((JBo,$vt)=>{"use strict";d();$vt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e);h.level++;var g="valid"+h.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u,i+=" var "+m+" = errors;  ";var A=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var y;h.opts.allErrors&&(y=h.opts.allErrors,h.opts.allErrors=!1),i+=" "+e.validate(h)+" ",h.createErrors=!0,y&&(h.opts.allErrors=y),e.compositeRule=h.compositeRule=A,i+=" if ("+g+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(i+=" if (false) { ");return i},"generate_not")});var Gvt=H((e3o,jvt)=>{"use strict";d();jvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=g.baseId,b="prevValid"+o,S="passingSchemas"+o;i+="var "+h+" = errors , "+b+" = false , "+m+" = false , "+S+" = null; ";var R=e.compositeRule;e.compositeRule=g.compositeRule=!0;var B=c;if(B)for(var L,O=-1,K=B.length-1;O<K;)L=B[O+=1],(e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all))?(g.schema=L,g.schemaPath=l+"["+O+"]",g.errSchemaPath=u+"/"+O,i+="  "+e.validate(g)+" ",g.baseId=E):i+=" var "+y+" = true; ",O&&(i+=" if ("+y+" && "+b+") { "+m+" = false; "+S+" = ["+S+", "+O+"]; } else { ",A+="}"),i+=" if ("+y+") { "+m+" = "+b+" = true; "+S+" = "+O+"; }";return e.compositeRule=g.compositeRule=R,i+=""+A+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},"generate_oneOf")});var zvt=H((n3o,Vvt)=>{"use strict";d();Vvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=m?"(new RegExp("+h+"))":e.usePattern(c);i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" !"+g+".test("+p+") ) {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_pattern")});var Kvt=H((s3o,Yvt)=>{"use strict";d();Yvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y="key"+o,E="idx"+o,b=h.dataLevel=e.dataLevel+1,S="data"+b,R="dataProperties"+o,B=Object.keys(c||{}).filter(ie),L=e.schema.patternProperties||{},O=Object.keys(L).filter(ie),K=e.schema.additionalProperties,V=B.length||O.length,z=K===!1,Q=typeof K=="object"&&Object.keys(K).length,U=e.opts.removeAdditional,Z=z||Q||U,J=e.opts.ownProperties,j=e.baseId,$=e.schema.required;if($&&!(e.opts.$data&&$.$data)&&$.length<e.opts.loopRequired)var X=e.util.toHash($);function ie(Pr){return Pr!=="__proto__"}if(s(ie,"notProto"),i+="var "+m+" = errors;var "+A+" = true;",J&&(i+=" var "+R+" = undefined;"),Z){if(J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",V){if(i+=" var isAdditional"+o+" = !(false ",B.length)if(B.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+y+") ";else{var ae=B;if(ae)for(var te,pe=-1,Ae=ae.length-1;pe<Ae;)te=ae[pe+=1],i+=" || "+y+" == "+e.util.toQuotedString(te)+" "}if(O.length){var Oe=O;if(Oe)for(var Te,Je=-1,Fe=Oe.length-1;Je<Fe;)Te=Oe[Je+=1],i+=" || "+e.usePattern(Te)+".test("+y+") "}i+=" ); if (isAdditional"+o+") { "}if(U=="all")i+=" delete "+p+"["+y+"]; ";else{var lt=e.errorPath,_t="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),z)if(U)i+=" delete "+p+"["+y+"]; ";else{i+=" "+A+" = false; ";var xt=u;u=e.errSchemaPath+"/additionalProperties";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+_t+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=xt,f&&(i+=" break; ")}else if(Q)if(U=="failing"){i+=" var "+m+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=K,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",i+=" if (!"+A+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+y+"]; }  ",e.compositeRule=h.compositeRule=Ue}else{h.schema=K,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",f&&(i+=" if (!"+A+") break; ")}e.errorPath=lt}V&&(i+=" } "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(B.length){var le=B;if(le)for(var te,qe=-1,Be=le.length-1;qe<Be;){te=le[qe+=1];var Ee=c[te];if(e.opts.strictKeywords?typeof Ee=="object"&&Object.keys(Ee).length>0||Ee===!1:e.util.schemaHasRules(Ee,e.RULES.all)){var je=e.util.getProperty(te),ye=p+je,tt=se&&Ee.default!==void 0;h.schema=Ee,h.schemaPath=l+je,h.errSchemaPath=u+"/"+e.util.escapeFragment(te),h.errorPath=e.util.getPath(e.errorPath,te,e.opts.jsonPointers),h.dataPathArr[b]=e.util.toQuotedString(te);var $e=e.validate(h);if(h.baseId=j,e.util.varOccurences($e,S)<2){$e=e.util.varReplace($e,S,ye);var pt=ye}else{var pt=S;i+=" var "+S+" = "+ye+"; "}if(tt)i+=" "+$e+" ";else{if(X&&X[te]){i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = false; ";var lt=e.errorPath,xt=u,Ft=e.util.escapeQuotes(te);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(lt,te,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Ft+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Ft+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=xt,e.errorPath=lt,i+=" } else { "}else f?(i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = true; } else { "):(i+=" if ("+pt+" !== undefined ",J&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+$e+" } "}}f&&(i+=" if ("+A+") { ",g+="}")}}if(O.length){var Jt=O;if(Jt)for(var Te,Qt=-1,Vr=Jt.length-1;Qt<Vr;){Te=Jt[Qt+=1];var Ee=L[Te];if(e.opts.strictKeywords?typeof Ee=="object"&&Object.keys(Ee).length>0||Ee===!1:e.util.schemaHasRules(Ee,e.RULES.all)){h.schema=Ee,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Te),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Te),J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" if ("+e.usePattern(Te)+".test("+y+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",f&&(i+=" if (!"+A+") break; "),i+=" } ",f&&(i+=" else "+A+" = true; "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}}}return f&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_properties")});var Xvt=H((l3o,Jvt)=>{"use strict";d();Jvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level;if(i+="var "+m+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u;var y="key"+o,E="idx"+o,b="i"+o,S="' + "+y+" + '",R=h.dataLevel=e.dataLevel+1,B="data"+R,L="dataProperties"+o,O=e.opts.ownProperties,K=e.baseId;O&&(i+=" var "+L+" = undefined; "),O?i+=" "+L+" = "+L+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+L+".length; "+E+"++) { var "+y+" = "+L+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" var startErrs"+o+" = errors; ";var V=y,z=e.compositeRule;e.compositeRule=h.compositeRule=!0;var Q=e.validate(h);h.baseId=K,e.util.varOccurences(Q,B)<2?i+=" "+e.util.varReplace(Q,B,V)+" ":i+=" var "+B+" = "+V+"; "+Q+" ",e.compositeRule=h.compositeRule=z,i+=" if (!"+A+") { for (var "+b+"=startErrs"+o+"; "+b+"<errors; "+b+"++) { vErrors["+b+"].propertyName = "+y+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),f&&(i+=" break; "),i+=" } }"}return f&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_propertyNames")});var ext=H((f3o,Zvt)=>{"use strict";d();Zvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="schema"+o;if(!h)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],E=c;if(E)for(var b,S=-1,R=E.length-1;S<R;){b=E[S+=1];var B=e.schema.properties[b];B&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))||(y[y.length]=b)}}else var y=c;if(h||y.length){var L=e.errorPath,O=h||y.length>=e.opts.loopRequired,K=e.opts.ownProperties;if(f)if(i+=" var missing"+o+"; ",O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,z,e.opts.jsonPointers)),i+=" var "+m+" = true; ",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { "+m+" = "+p+"["+A+"["+V+"]] !== undefined ",K&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+="; if (!"+m+") break; } ",h&&(i+="  }  "),i+="  if (!"+m+") {   ";var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var J=y;if(J)for(var j,V=-1,$=J.length-1;V<$;){j=J[V+=1],V&&(i+=" || ");var X=e.util.getProperty(j),ie=p+X;i+=" ( ( "+ie+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:X)+") ) "}i+=") {  ";var z="missing"+o,Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(L,z,!0):L+" + "+z);var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,z,e.opts.jsonPointers)),h&&(i+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { if ("+p+"["+A+"["+V+"]] === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(i+="  }  ")}else{var ae=y;if(ae)for(var j,te=-1,pe=ae.length-1;te<pe;){j=ae[te+=1];var X=e.util.getProperty(j),Q=e.util.escapeQuotes(j),ie=p+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,j,e.opts.jsonPointers)),i+=" if ( "+ie+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=L}else f&&(i+=" if (true) {");return i},"generate_required")});var rxt=H((h3o,txt)=>{"use strict";d();txt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,(c||h)&&e.opts.uniqueItems!==!1){h&&(i+=" var "+m+"; if ("+g+" === false || "+g+" === undefined) "+m+" = true; else if (typeof "+g+" != 'boolean') "+m+" = false; else { "),i+=" var i = "+p+".length , "+m+" = true , j; if (i > 1) { ";var A=e.schema.items&&e.schema.items.type,y=Array.isArray(A);if(!A||A=="object"||A=="array"||y&&(A.indexOf("object")>=0||A.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+m+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var E="checkDataType"+(y?"s":"");i+=" if ("+e.util[E](A,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var b=b||[];b.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var S=i;i=b.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_uniqueItems")});var ixt=H((y3o,nxt)=>{"use strict";d();nxt.exports={$ref:gvt(),allOf:yvt(),anyOf:vvt(),$comment:Evt(),const:Ivt(),contains:wvt(),dependencies:_vt(),enum:kvt(),format:Dvt(),if:Nvt(),items:Lvt(),maximum:i5e(),minimum:i5e(),maxItems:o5e(),minItems:o5e(),maxLength:s5e(),minLength:s5e(),maxProperties:a5e(),minProperties:a5e(),multipleOf:Hvt(),not:Wvt(),oneOf:Gvt(),pattern:zvt(),properties:Kvt(),propertyNames:Xvt(),required:ext(),uniqueItems:rxt(),validate:r5e()}});var axt=H((v3o,sxt)=>{"use strict";d();var oxt=ixt(),c5e=ZP().toHash;sxt.exports=s(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=c5e(r),e.types=c5e(i),e.forEach(function(o){o.rules=o.rules.map(function(a){var c;if(typeof a=="object"){var l=Object.keys(a)[0];c=a[l],a=l,c.forEach(function(f){r.push(f),e.all[f]=!0})}r.push(a);var u=e.all[a]={keyword:a,code:oxt[a],implements:c};return u}),e.all.$comment={keyword:"$comment",code:oxt.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=c5e(r.concat(n)),e.custom={},e},"rules")});var uxt=H((b3o,lxt)=>{"use strict";d();var cxt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];lxt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),i=t,o;for(o=1;o<n.length;o++)i=i[n[o]];for(o=0;o<cxt.length;o++){var a=cxt[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var pxt=H((T3o,fxt)=>{"use strict";d();var ARr=_le().MissingRef;fxt.exports=dxt;function dxt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var i=o(t).then(function(){var c=n._addSchema(t,void 0,e);return c.validate||a(c)});return r&&i.then(function(c){r(null,c)},r),i;function o(c){var l=c.$schema;return l&&!n.getSchema(l)?dxt.call(n,{$ref:l},!0):Promise.resolve()}s(o,"loadMetaSchemaOf");function a(c){try{return n._compile(c)}catch(u){if(u instanceof ARr)return l(u);throw u}function l(u){var f=u.missingSchema;if(h(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var p=n._loadingSchemas[f];return p||(p=n._loadingSchemas[f]=n._opts.loadSchema(f),p.then(m,m)),p.then(function(g){if(!h(f))return o(g).then(function(){h(f)||n.addSchema(g,f,void 0,e)})}).then(function(){return a(c)});function m(){delete n._loadingSchemas[f]}s(m,"removePromise");function h(g){return n._refs[g]||n._schemas[g]}s(h,"added")}s(l,"loadMissingSchema")}s(a,"_compileAsync")}s(dxt,"compileAsync")});var hxt=H((_3o,mxt)=>{"use strict";d();mxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p,m="data"+(a||""),h="valid"+o,g="errs__"+o,A=e.opts.$data&&c&&c.$data,y;A?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",y="schema"+o):y=c;var E=this,b="definition"+o,S=E.definition,R="",B,L,O,K,V;if(A&&S.$data){V="keywordValidate"+o;var z=S.validateSchema;i+=" var "+b+" = RULES.custom['"+r+"'].definition; var "+V+" = "+b+".validate;"}else{if(K=e.useCustomRule(E,c,e.schema,e),!K)return;y="validate.schema"+l,V=K.code,B=S.compile,L=S.inline,O=S.macro}var Q=V+".errors",U="i"+o,Z="ruleErr"+o,J=S.async;if(J&&!e.async)throw new Error("async keyword in sync schema");if(L||O||(i+=""+Q+" = null;"),i+="var "+g+" = errors;var "+h+";",A&&S.$data&&(R+="}",i+=" if ("+y+" === undefined) { "+h+" = true; } else { ",z&&(R+="}",i+=" "+h+" = "+b+".validateSchema("+y+"); if ("+h+") { ")),L)S.statements?i+=" "+K.validate+" ":i+=" "+h+" = "+K.validate+"; ";else if(O){var j=e.util.copy(e),R="";j.level++;var $="valid"+j.level;j.schema=K.validate,j.schemaPath="";var X=e.compositeRule;e.compositeRule=j.compositeRule=!0;var ie=e.validate(j).replace(/validate\.schema/g,V);e.compositeRule=j.compositeRule=X,i+=" "+ie}else{var ae=ae||[];ae.push(i),i="",i+="  "+V+".call( ",e.opts.passContext?i+="this":i+="self",B||S.schema===!1?i+=" , "+m+" ":i+=" , "+y+" , "+m+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var te=a?"data"+(a-1||""):"parentData",pe=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+te+" , "+pe+" , rootData )  ";var Ae=i;i=ae.pop(),S.errors===!1?(i+=" "+h+" = ",J&&(i+="await "),i+=""+Ae+"; "):J?(Q="customErrors"+o,i+=" var "+Q+" = null; try { "+h+" = await "+Ae+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+Q+" = e.errors; else throw e; } "):i+=" "+Q+" = null; "+h+" = "+Ae+"; "}if(S.modifying&&(i+=" if ("+te+") "+m+" = "+te+"["+pe+"];"),i+=""+R,S.valid)f&&(i+=" if (true) { ");else{i+=" if ( ",S.valid===void 0?(i+=" !",O?i+=""+$:i+=""+h):i+=" "+!S.valid+" ",i+=") { ",p=E.keyword;var ae=ae||[];ae.push(i),i="";var ae=ae||[];ae.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";var Oe=i;i=ae.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Oe+"]); ":i+=" validate.errors = ["+Oe+"]; return false; ":i+=" var err = "+Oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Te=i;i=ae.pop(),L?S.errors?S.errors!="full"&&(i+="  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } "):S.errors===!1?i+=" "+Te+" ":(i+=" if ("+g+" == errors) { "+Te+" } else {  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } "):O?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):S.errors===!1?i+=" "+Te+" ":(i+=" if (Array.isArray("+Q+")) { if (vErrors === null) vErrors = "+Q+"; else vErrors = vErrors.concat("+Q+"); errors = vErrors.length;  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+";  "+Z+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } else { "+Te+" } "),i+=" } ",f&&(i+=" else { ")}return i},"generate_custom")});var l5e=H((P3o,yRr)=>{yRr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var yxt=H((D3o,Axt)=>{"use strict";d();var gxt=l5e();Axt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:gxt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:gxt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var vxt=H((N3o,Cxt)=>{"use strict";d();var CRr=/^[a-z_$][a-z0-9_$-]*$/i,vRr=hxt(),xRr=yxt();Cxt.exports={add:ERr,get:bRr,remove:IRr,validate:u5e};function ERr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!CRr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)a(t,n[i],e);else a(t,n,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}r.keywords[t]=r.all[t]=!0;function a(c,l,u){for(var f,p=0;p<r.length;p++){var m=r[p];if(m.type==l){f=m;break}}f||(f={type:l,rules:[]},r.push(f));var h={keyword:c,definition:u,custom:!0,code:vRr,implements:u.implements};f.rules.push(h),r.custom[c]=h}return s(a,"_addRule"),this}s(ERr,"addKeyword");function bRr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}s(bRr,"getKeyword");function IRr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,i=0;i<n.length;i++)if(n[i].keyword==t){n.splice(i,1);break}return this}s(IRr,"removeKeyword");function u5e(t,e){u5e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(xRr,!0);if(r(t))return!0;if(u5e.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}s(u5e,"validateKeyword")});var xxt=H((F3o,TRr)=>{TRr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Pxt=H((O3o,kxt)=>{"use strict";d();var bxt=evt(),e5=Sle(),wRr=rvt(),Ixt=YPe(),SRr=t5e(),_Rr=mvt(),RRr=axt(),Txt=uxt(),wxt=ZP();kxt.exports=yc;yc.prototype.validate=PRr;yc.prototype.compile=DRr;yc.prototype.addSchema=BRr;yc.prototype.addMetaSchema=NRr;yc.prototype.validateSchema=MRr;yc.prototype.getSchema=FRr;yc.prototype.removeSchema=QRr;yc.prototype.addFormat=VRr;yc.prototype.errorsText=GRr;yc.prototype._addSchema=URr;yc.prototype._compile=qRr;yc.prototype.compileAsync=pxt();var Lle=vxt();yc.prototype.addKeyword=Lle.add;yc.prototype.getKeyword=Lle.get;yc.prototype.removeKeyword=Lle.remove;yc.prototype.validateKeyword=Lle.validate;var Sxt=_le();yc.ValidationError=Sxt.Validation;yc.MissingRefError=Sxt.MissingRef;yc.$dataMetaSchema=Txt;var Mle="http://json-schema.org/draft-07/schema",Ext=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],kRr=["/properties"];function yc(t){if(!(this instanceof yc))return new yc(t);t=this._opts=wxt.copy(t)||{},ZRr(this),this._schemas={},this._refs={},this._fragments={},this._formats=_Rr(t.format),this._cache=t.cache||new wRr,this._loadingSchemas={},this._compilations=[],this.RULES=RRr(),this._getId=HRr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=SRr),this._metaOpts=XRr(this),t.formats&&KRr(this),t.keywords&&JRr(this),zRr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),YRr(this)}s(yc,"Ajv");function PRr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var i=r(e);return r.$async!==!0&&(this.errors=r.errors),i}s(PRr,"validate");function DRr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}s(DRr,"compile");function BRr(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.addSchema(t[i],void 0,r,n);return this}var o=this._getId(t);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=e5.normalizeId(e||o),Rxt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}s(BRr,"addSchema");function NRr(t,e,r){return this.addSchema(t,e,r,!0),this}s(NRr,"addMetaSchema");function MRr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||LRr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return n}s(MRr,"validateSchema");function LRr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(Mle)?Mle:void 0,t._opts.defaultMeta}s(LRr,"defaultMeta");function FRr(t){var e=_xt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return ORr(this,t)}}s(FRr,"getSchema");function ORr(t,e){var r=e5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,i=r.root,o=r.baseId,a=bxt.call(t,n,i,void 0,o);return t._fragments[e]=new Ixt({ref:e,fragment:!0,schema:n,root:i,baseId:o,validate:a}),a}}s(ORr,"_getSchemaFragment");function _xt(t,e){return e=e5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}s(_xt,"_getSchemaObj");function QRr(t){if(t instanceof RegExp)return Nle(this,this._schemas,t),Nle(this,this._refs,t),this;switch(typeof t){case"undefined":return Nle(this,this._schemas),Nle(this,this._refs),this._cache.clear(),this;case"string":var e=_xt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var i=this._getId(t);i&&(i=e5.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}s(QRr,"removeSchema");function Nle(t,e,r){for(var n in e){var i=e[n];!i.meta&&(!r||r.test(n))&&(t._cache.del(i.cacheKey),delete e[n])}}s(Nle,"_removeAllSchemas");function URr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(t):t,a=this._cache.get(o);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var c=e5.normalizeId(this._getId(t));c&&n&&Rxt(this,c);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=c&&c==e5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var f=e5.ids.call(this,t),p=new Ixt({id:c,schema:t,localRefs:f,cacheKey:o,meta:r});return c[0]!="#"&&n&&(this._refs[c]=p),this._cache.put(o,p),l&&u&&this.validateSchema(t,!0),p}s(URr,"_addSchema");function qRr(t,e){if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e||i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=bxt.call(this,t.schema,e,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function i(){var o=t.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}s(i,"callValidate")}s(qRr,"_compile");function HRr(t){switch(t.schemaId){case"auto":return jRr;case"id":return $Rr;default:return WRr}}s(HRr,"chooseGetId");function $Rr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}s($Rr,"_getId");function WRr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}s(WRr,"_get$Id");function jRr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}s(jRr,"_get$IdOrId");function GRr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<t.length;o++){var a=t[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)}s(GRr,"errorsText");function VRr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}s(VRr,"addFormat");function zRr(t){var e;if(t._opts.$data&&(e=xxt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=l5e();t._opts.$data&&(r=Txt(r,kRr)),t.addMetaSchema(r,Mle,!0),t._refs["http://json-schema.org/schema"]=Mle}}s(zRr,"addDefaultMetaSchema");function YRr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}s(YRr,"addInitialSchemas");function KRr(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}s(KRr,"addInitialFormats");function JRr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}s(JRr,"addInitialKeywords");function Rxt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}s(Rxt,"checkUnique");function XRr(t){for(var e=wxt.copy(t._opts),r=0;r<Ext.length;r++)delete e[Ext[r]];return e}s(XRr,"getMetaSchemaOptions");function ZRr(t){var e=t._opts.logger;if(e===!1)t.logger={log:d5e,warn:d5e,error:d5e};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}s(ZRr,"setLogger");function d5e(){}s(d5e,"noop")});var Jxt=H((t8o,Kxt)=>{d();Kxt.exports=Yxt;Yxt.sync=wkr;var Vxt=require("fs");function Tkr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(Tkr,"checkPathExt");function zxt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Tkr(e,r)}s(zxt,"checkStat");function Yxt(t,e,r){Vxt.stat(t,function(n,i){r(n,n?!1:zxt(i,t,e))})}s(Yxt,"isexe");function wkr(t,e){return zxt(Vxt.statSync(t),t,e)}s(wkr,"sync")});var rEt=H((i8o,tEt)=>{d();tEt.exports=Zxt;Zxt.sync=Skr;var Xxt=require("fs");function Zxt(t,e,r){Xxt.stat(t,function(n,i){r(n,n?!1:eEt(i,e))})}s(Zxt,"isexe");function Skr(t,e){return eEt(Xxt.statSync(t),e)}s(Skr,"sync");function eEt(t,e){return t.isFile()&&_kr(t,e)}s(eEt,"checkStat");function _kr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(_kr,"checkMode")});var iEt=H((c8o,nEt)=>{d();var a8o=require("fs"),Gle;process.platform==="win32"||global.TESTING_WINDOWS?Gle=Jxt():Gle=rEt();nEt.exports=k5e;k5e.sync=Rkr;function k5e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){k5e(t,e||{},function(o,a){o?i(o):n(a)})})}Gle(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(k5e,"isexe");function Rkr(t,e){try{return Gle.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(Rkr,"sync")});var dEt=H((d8o,uEt)=>{d();var zM=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",oEt=require("path"),kkr=zM?";":":",sEt=iEt(),aEt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),cEt=s((t,e)=>{let r=e.colon||kkr,n=t.match(/\//)||zM&&t.match(/\\/)?[""]:[...zM?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=zM?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=zM?i.split(r):[""];return zM&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),lEt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=cEt(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p(aEt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=oEt.join(h,t),A=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(A,u,0))}),"step"),l=s((u,f,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(f+1));let g=i[p];sEt(u+g,{pathExt:o},(A,y)=>{if(!A&&y)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),Pkr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=cEt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=oEt.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=f+n[p];try{if(sEt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw aEt(t)},"whichSync");uEt.exports=lEt;lEt.sync=Pkr});var pEt=H((m8o,P5e)=>{"use strict";d();var fEt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");P5e.exports=fEt;P5e.exports.default=fEt});var AEt=H((A8o,gEt)=>{"use strict";d();var mEt=require("path"),Dkr=dEt(),Bkr=pEt();function hEt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=Dkr.sync(t.command,{path:r[Bkr({env:r})],pathExt:e?mEt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=mEt.resolve(i?t.options.cwd:"",a)),a}s(hEt,"resolveCommandAttempt");function Nkr(t){return hEt(t)||hEt(t,!0)}s(Nkr,"resolveCommand");gEt.exports=Nkr});var yEt=H((v8o,B5e)=>{"use strict";d();var D5e=/([()\][%!^"`<>&|;, *?])/g;function Mkr(t){return t=t.replace(D5e,"^$1"),t}s(Mkr,"escapeCommand");function Lkr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(D5e,"^$1"),e&&(t=t.replace(D5e,"^$1")),t}s(Lkr,"escapeArgument");B5e.exports.command=Mkr;B5e.exports.argument=Lkr});var vEt=H((b8o,CEt)=>{"use strict";d();CEt.exports=/^#!(.*)/});var EEt=H((T8o,xEt)=>{"use strict";d();var Fkr=vEt();xEt.exports=(t="")=>{let e=t.match(Fkr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var IEt=H((S8o,bEt)=>{"use strict";d();var N5e=require("fs"),Okr=EEt();function Qkr(t){let r=Buffer.alloc(150),n;try{n=N5e.openSync(t,"r"),N5e.readSync(n,r,0,150,0),N5e.closeSync(n)}catch{}return Okr(r.toString())}s(Qkr,"readShebang");bEt.exports=Qkr});var _Et=H((k8o,SEt)=>{"use strict";d();var Ukr=require("path"),TEt=AEt(),wEt=yEt(),qkr=IEt(),Hkr=process.platform==="win32",$kr=/\.(?:com|exe)$/i,Wkr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function jkr(t){t.file=TEt(t);let e=t.file&&qkr(t.file);return e?(t.args.unshift(t.file),t.command=e,TEt(t)):t.file}s(jkr,"detectShebang");function Gkr(t){if(!Hkr)return t;let e=jkr(t),r=!$kr.test(e);if(t.options.forceShell||r){let n=Wkr.test(e);t.command=Ukr.normalize(t.command),t.command=wEt.command(t.command),t.args=t.args.map(o=>wEt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(Gkr,"parseNonShell");function Vkr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Gkr(n)}s(Vkr,"parse");SEt.exports=Vkr});var PEt=H((B8o,kEt)=>{"use strict";d();var M5e=process.platform==="win32";function L5e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(L5e,"notFoundError");function zkr(t,e){if(!M5e)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=REt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(zkr,"hookChildProcess");function REt(t,e){return M5e&&t===1&&!e.file?L5e(e.original,"spawn"):null}s(REt,"verifyENOENT");function Ykr(t,e){return M5e&&t===1&&!e.file?L5e(e.original,"spawnSync"):null}s(Ykr,"verifyENOENTSync");kEt.exports={hookChildProcess:zkr,verifyENOENT:REt,verifyENOENTSync:Ykr,notFoundError:L5e}});var NEt=H((L8o,YM)=>{"use strict";d();var DEt=require("child_process"),F5e=_Et(),O5e=PEt();function BEt(t,e,r){let n=F5e(t,e,r),i=DEt.spawn(n.command,n.args,n.options);return O5e.hookChildProcess(i,n),i}s(BEt,"spawn");function Kkr(t,e,r){let n=F5e(t,e,r),i=DEt.spawnSync(n.command,n.args,n.options);return i.error=i.error||O5e.verifyENOENTSync(i.status,n),i}s(Kkr,"spawnSync");YM.exports=BEt;YM.exports.spawn=BEt;YM.exports.sync=Kkr;YM.exports._parse=F5e;YM.exports._enoent=O5e});var fPr={};Ca(fPr,{getTokenizer:()=>Ni,getTokenizerAsync:()=>rWe,main:()=>ZEt});module.exports=bIt(fPr);d();d();RDe().install();d();d();d();var O_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(O_||{}),Kc=class{static{s(this,"LogTarget")}},Xy=class{static{s(this,"TelemetryLogSender")}},Ct=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Kc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(Xy).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(Xy).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},un=new Ct("default");d();d();d();var T9="github.copilot",kDe="github-enterprise";d();d();d();d();d();d();var xa=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var Mm=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return wW(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var Lm="X-Copilot-RelatedPluginVersion-",w9=($=>($.Market="X-MSEdge-Market",$.CorpNet="X-FD-Corpnet",$.Build="X-VSCode-Build",$.ApplicationVersion="X-VSCode-AppVersion",$.TargetPopulation="X-VSCode-TargetPopulation",$.ClientId="X-MSEdge-ClientId",$.ExtensionName="X-VSCode-ExtensionName",$.ExtensionVersion="X-VSCode-ExtensionVersion",$.ExtensionRelease="X-VSCode-ExtensionRelease",$.Language="X-VSCode-Language",$.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",$.CopilotEngine="X-Copilot-Engine",$.CopilotOverrideEngine="X-Copilot-OverrideEngine",$.CopilotRepository="X-Copilot-Repository",$.CopilotFileType="X-Copilot-FileType",$.CopilotUserKind="X-Copilot-UserKind",$.CopilotDogfood="X-Copilot-Dogfood",$.CopilotCustomModel="X-Copilot-CustomModel",$.CopilotOrgs="X-Copilot-Orgs",$.CopilotCustomModelNames="X-Copilot-CustomModelNames",$.CopilotTrackingId="X-Copilot-CopilotTrackingId",$.CopilotClientVersion="X-Copilot-ClientVersion",$.CopilotRelatedPluginVersionCppTools=Lm+"msvscodecpptools",$.CopilotRelatedPluginVersionCMakeTools=Lm+"msvscodecmaketools",$.CopilotRelatedPluginVersionMakefileTools=Lm+"msvscodemakefiletools",$.CopilotRelatedPluginVersionCSharpDevKit=Lm+"msdotnettoolscsdevkit",$.CopilotRelatedPluginVersionPython=Lm+"mspythonpython",$.CopilotRelatedPluginVersionPylance=Lm+"mspythonvscodepylance",$.CopilotRelatedPluginVersionJavaPack=Lm+"vscjavavscodejavapack",$.CopilotRelatedPluginVersionTypescript=Lm+"vscodetypescriptlanguagefeatures",$.CopilotRelatedPluginVersionTypescriptNext=Lm+"msvscodevscodetypescriptnext",$.CopilotRelatedPluginVersionCSharp=Lm+"msdotnettoolscsharp",$))(w9||{});var cTt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},Q_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=cTt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();d();var Nu=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){Ps(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var dj=Ne(gI()),fj=Ne(require("os"));var lTt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function uTt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(lTt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(uTt,"buildExceptionDetail");function mfe(t,e){let r=t.get(mn),n=r.getEditorInfo(),i=t.get(Nu),o={"#editor":n.devName??n.name,"#editor_version":Zy({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":Zy(r.getEditorPluginInfo()),"#session_id":t.get(Ds).sessionId,"#machine_id":t.get(Ds).machineId,"#architecture":fj.arch(),"#os_platform":fj.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(mfe,"buildContext");function QBe(t,e){let r=t.get(Io),n=t.get(mn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:mfe(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=uTt(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,dj.SHA256)(dj.enc.Utf16.parse(u.join(`
`))).toString()),o}s(QBe,"buildPayload");d();var _9=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var qBe=Ne(gI());var wr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},U_=class extends wr{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},mj=class extends wr{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var eC=class{constructor(e=5){this.perTenMinutes=e;this.cache=new wr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var Fm=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:$Be(r,n),verboseLogging:fTt(r,n),testMode:e,simulation:dTt(n)})}};function Gg(t){return t.get(Fm).flags.testMode}s(Gg,"isRunningInTest");function _4(t){return Gg(t)}s(_4,"shouldFailForDebugPurposes");function R9(t){return t.get(Fm).flags.debug}s(R9,"isDebugEnabled");function HBe(t){return t.get(Fm).flags.verboseLogging}s(HBe,"isVerboseLoggingEnabled");function $Be(t,e){return t.includes("--debug")||hfe(e,"DEBUG")}s($Be,"determineDebugFlag");function dTt(t){return hfe(t,"SIMULATION")}s(dTt,"determineSimulationFlag");function hj(t){return t.get(Fm).flags.simulation}s(hj,"isRunningInSimulation");function fTt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||hfe(e,"VERBOSE")||$Be(t,e)}s(fTt,"determineVerboseLoggingEnabled");function hfe(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(hfe,"determineEnvFlagEnabled");d();var Jc=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var GBe=require("os"),VBe=Ne(require("path"));function k9(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(k9,"redactPaths");var pTt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),mTt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function Afe(t){if(pTt.has(t))return t;for(let e of mTt)if(e.test(t))return t;return k9(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(Afe,"redactMessage");function gj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(gj,"escapeForRegExp");var hTt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+gj((0,GBe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function gfe(t){return t.replace(hTt,"~")}s(gfe,"redactHomeDir");var zBe="[\\\\/]?([^:)]*)(?=:\\d)",WBe=new RegExp(gj(VBe.sep),"g"),jBe=new RegExp(gj(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+zBe,"gi");function yfe(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(jBe.test(c))i.stack+=`
${k9(c.replace(jBe,(l,u)=>"./"+u.replace(WBe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${k9(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(gj(f.replace(/[\\/]$/,""))+zBe,"gi");if(p.test(c)){i.stack+=`
${k9(c.replace(p,(m,h)=>u+h.replace(WBe,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${gfe(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=gfe(o));return t.cause instanceof Error&&(i.cause=yfe(t.cause,e,r,n)),i}s(yfe,"cloneError");function YBe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(YBe,"errorMessageWithoutPath");function KBe(t,e){return yfe(t,s(function(n){return gfe(YBe(n))},"prepareMessage"),!0,e)}s(KBe,"prepareErrorForRestrictedTelemetry");function JBe(t,e,r=!1){return yfe(t,s(function(i){if(r)return Afe(YBe(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=k9(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(JBe,"redactError");d();d();var xd={};Ca(xd,{HasPropertyKey:()=>Aj,IsArray:()=>Sc,IsAsyncIterator:()=>Cfe,IsBigInt:()=>P9,IsBoolean:()=>Pv,IsDate:()=>q_,IsFunction:()=>vfe,IsIterator:()=>xfe,IsNull:()=>Efe,IsNumber:()=>ap,IsObject:()=>ss,IsRegExp:()=>D9,IsString:()=>Is,IsSymbol:()=>bfe,IsUint8Array:()=>Dv,IsUndefined:()=>_c});d();function Aj(t,e){return e in t}s(Aj,"HasPropertyKey");function Cfe(t){return ss(t)&&!Sc(t)&&!Dv(t)&&Symbol.asyncIterator in t}s(Cfe,"IsAsyncIterator");function Sc(t){return Array.isArray(t)}s(Sc,"IsArray");function P9(t){return typeof t=="bigint"}s(P9,"IsBigInt");function Pv(t){return typeof t=="boolean"}s(Pv,"IsBoolean");function q_(t){return t instanceof globalThis.Date}s(q_,"IsDate");function vfe(t){return typeof t=="function"}s(vfe,"IsFunction");function xfe(t){return ss(t)&&!Sc(t)&&!Dv(t)&&Symbol.iterator in t}s(xfe,"IsIterator");function Efe(t){return t===null}s(Efe,"IsNull");function ap(t){return typeof t=="number"}s(ap,"IsNumber");function ss(t){return typeof t=="object"&&t!==null}s(ss,"IsObject");function D9(t){return t instanceof globalThis.RegExp}s(D9,"IsRegExp");function Is(t){return typeof t=="string"}s(Is,"IsString");function bfe(t){return typeof t=="symbol"}s(bfe,"IsSymbol");function Dv(t){return t instanceof globalThis.Uint8Array}s(Dv,"IsUint8Array");function _c(t){return t===void 0}s(_c,"IsUndefined");function gTt(t){return t.map(e=>yj(e))}s(gTt,"ArrayType");function ATt(t){return new Date(t.getTime())}s(ATt,"DateType");function yTt(t){return new Uint8Array(t)}s(yTt,"Uint8ArrayType");function CTt(t){return new RegExp(t.source,t.flags)}s(CTt,"RegExpType");function vTt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=yj(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=yj(t[r]);return e}s(vTt,"ObjectType");function yj(t){return Sc(t)?gTt(t):q_(t)?ATt(t):Dv(t)?yTt(t):D9(t)?CTt(t):ss(t)?vTt(t):t}s(yj,"Visit");function zs(t){return yj(t)}s(zs,"Clone");function R4(t,e){return e===void 0?zs(t):zs({...e,...t})}s(R4,"CloneType");d();d();d();function Cj(t){return Si(t)&&globalThis.Symbol.asyncIterator in t}s(Cj,"IsAsyncIterator");function vj(t){return Si(t)&&globalThis.Symbol.iterator in t}s(vj,"IsIterator");function Ife(t){return Si(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(Ife,"IsStandardObject");function xj(t){return t instanceof globalThis.Promise}s(xj,"IsPromise");function sf(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(sf,"IsDate");function XBe(t){return t instanceof globalThis.Map}s(XBe,"IsMap");function ZBe(t){return t instanceof globalThis.Set}s(ZBe,"IsSet");function Om(t){return globalThis.ArrayBuffer.isView(t)}s(Om,"IsTypedArray");function k4(t){return t instanceof globalThis.Uint8Array}s(k4,"IsUint8Array");function kn(t,e){return e in t}s(kn,"HasPropertyKey");function Si(t){return t!==null&&typeof t=="object"}s(Si,"IsObject");function Pn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Pn,"IsArray");function Ys(t){return t===void 0}s(Ys,"IsUndefined");function Bv(t){return t===null}s(Bv,"IsNull");function tC(t){return typeof t=="boolean"}s(tC,"IsBoolean");function cn(t){return typeof t=="number"}s(cn,"IsNumber");function Ej(t){return globalThis.Number.isInteger(t)}s(Ej,"IsInteger");function Mu(t){return typeof t=="bigint"}s(Mu,"IsBigInt");function yo(t){return typeof t=="string"}s(yo,"IsString");function AI(t){return typeof t=="function"}s(AI,"IsFunction");function Nv(t){return typeof t=="symbol"}s(Nv,"IsSymbol");function cp(t){return Mu(t)||tC(t)||Bv(t)||cn(t)||yo(t)||Nv(t)||Ys(t)}s(cp,"IsValueType");var Bs;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=Si(a);return t.AllowArrayObject?c:c&&!Pn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?cn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ys(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(Bs||(Bs={}));d();function xTt(t){return globalThis.Object.freeze(t).map(e=>B9(e))}s(xTt,"ImmutableArray");function ETt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=B9(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=B9(t[r]);return globalThis.Object.freeze(e)}s(ETt,"ImmutableObject");function B9(t){return Sc(t)?xTt(t):q_(t)?t:Dv(t)?t:D9(t)?t:ss(t)?ETt(t):t}s(B9,"Immutable");function at(t,e){let r=e!==void 0?{...e,...t}:t;switch(Bs.InstanceMode){case"freeze":return B9(r);case"clone":return zs(r);default:return r}}s(at,"CreateType");d();var Dn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var Ea=Symbol.for("TypeBox.Transform"),Vg=Symbol.for("TypeBox.Readonly"),Lu=Symbol.for("TypeBox.Optional"),Qm=Symbol.for("TypeBox.Hint"),ot=Symbol.for("TypeBox.Kind");function P4(t){return ss(t)&&t[Vg]==="Readonly"}s(P4,"IsReadonly");function Zf(t){return ss(t)&&t[Lu]==="Optional"}s(Zf,"IsOptional");function Tfe(t){return so(t,"Any")}s(Tfe,"IsAny");function wfe(t){return so(t,"Argument")}s(wfe,"IsArgument");function zg(t){return so(t,"Array")}s(zg,"IsArray");function H_(t){return so(t,"AsyncIterator")}s(H_,"IsAsyncIterator");function $_(t){return so(t,"BigInt")}s($_,"IsBigInt");function Mv(t){return so(t,"Boolean")}s(Mv,"IsBoolean");function Yg(t){return so(t,"Computed")}s(Yg,"IsComputed");function Kg(t){return so(t,"Constructor")}s(Kg,"IsConstructor");function bTt(t){return so(t,"Date")}s(bTt,"IsDate");function Jg(t){return so(t,"Function")}s(Jg,"IsFunction");function Xg(t){return so(t,"Integer")}s(Xg,"IsInteger");function Oa(t){return so(t,"Intersect")}s(Oa,"IsIntersect");function W_(t){return so(t,"Iterator")}s(W_,"IsIterator");function so(t,e){return ss(t)&&ot in t&&t[ot]===e}s(so,"IsKindOf");function bj(t){return Pv(t)||ap(t)||Is(t)}s(bj,"IsLiteralValue");function lp(t){return so(t,"Literal")}s(lp,"IsLiteral");function up(t){return so(t,"MappedKey")}s(up,"IsMappedKey");function Ks(t){return so(t,"MappedResult")}s(Ks,"IsMappedResult");function yI(t){return so(t,"Never")}s(yI,"IsNever");function ITt(t){return so(t,"Not")}s(ITt,"IsNot");function N9(t){return so(t,"Null")}s(N9,"IsNull");function Zg(t){return so(t,"Number")}s(Zg,"IsNumber");function Rc(t){return so(t,"Object")}s(Rc,"IsObject");function j_(t){return so(t,"Promise")}s(j_,"IsPromise");function G_(t){return so(t,"Record")}s(G_,"IsRecord");function ec(t){return so(t,"Ref")}s(ec,"IsRef");function Sfe(t){return so(t,"RegExp")}s(Sfe,"IsRegExp");function Lv(t){return so(t,"String")}s(Lv,"IsString");function M9(t){return so(t,"Symbol")}s(M9,"IsSymbol");function dp(t){return so(t,"TemplateLiteral")}s(dp,"IsTemplateLiteral");function TTt(t){return so(t,"This")}s(TTt,"IsThis");function Oo(t){return ss(t)&&Ea in t}s(Oo,"IsTransform");function fp(t){return so(t,"Tuple")}s(fp,"IsTuple");function Fv(t){return so(t,"Undefined")}s(Fv,"IsUndefined");function Co(t){return so(t,"Union")}s(Co,"IsUnion");function wTt(t){return so(t,"Uint8Array")}s(wTt,"IsUint8Array");function STt(t){return so(t,"Unknown")}s(STt,"IsUnknown");function _Tt(t){return so(t,"Unsafe")}s(_Tt,"IsUnsafe");function RTt(t){return so(t,"Void")}s(RTt,"IsVoid");function CI(t){return ss(t)&&ot in t&&Is(t[ot])}s(CI,"IsKind");function ba(t){return Tfe(t)||wfe(t)||zg(t)||Mv(t)||$_(t)||H_(t)||Yg(t)||Kg(t)||bTt(t)||Jg(t)||Xg(t)||Oa(t)||W_(t)||lp(t)||up(t)||Ks(t)||yI(t)||ITt(t)||N9(t)||Zg(t)||Rc(t)||j_(t)||G_(t)||ec(t)||Sfe(t)||Lv(t)||M9(t)||dp(t)||TTt(t)||fp(t)||Fv(t)||Co(t)||wTt(t)||STt(t)||_Tt(t)||RTt(t)||CI(t)}s(ba,"IsSchema");var Le={};Ca(Le,{IsAny:()=>n3e,IsArgument:()=>i3e,IsArray:()=>o3e,IsAsyncIterator:()=>s3e,IsBigInt:()=>a3e,IsBoolean:()=>c3e,IsComputed:()=>l3e,IsConstructor:()=>u3e,IsDate:()=>d3e,IsFunction:()=>f3e,IsImport:()=>MTt,IsInteger:()=>p3e,IsIntersect:()=>m3e,IsIterator:()=>h3e,IsKind:()=>q3e,IsKindOf:()=>Ui,IsLiteral:()=>F9,IsLiteralBoolean:()=>LTt,IsLiteralNumber:()=>A3e,IsLiteralString:()=>g3e,IsLiteralValue:()=>y3e,IsMappedKey:()=>C3e,IsMappedResult:()=>v3e,IsNever:()=>x3e,IsNot:()=>E3e,IsNull:()=>b3e,IsNumber:()=>I3e,IsObject:()=>T3e,IsOptional:()=>NTt,IsPromise:()=>w3e,IsProperties:()=>Ij,IsReadonly:()=>BTt,IsRecord:()=>S3e,IsRecursive:()=>FTt,IsRef:()=>_3e,IsRegExp:()=>R3e,IsSchema:()=>Js,IsString:()=>k3e,IsSymbol:()=>P3e,IsTemplateLiteral:()=>D3e,IsThis:()=>B3e,IsTransform:()=>N3e,IsTuple:()=>M3e,IsUint8Array:()=>F3e,IsUndefined:()=>L3e,IsUnion:()=>Pfe,IsUnionLiteral:()=>OTt,IsUnknown:()=>O3e,IsUnsafe:()=>Q3e,IsVoid:()=>U3e,TypeGuardUnknownTypeError:()=>_fe});d();var _fe=class extends Dn{static{s(this,"TypeGuardUnknownTypeError")}},kTt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function e3e(t){try{return new RegExp(t),!0}catch{return!1}}s(e3e,"IsPattern");function Rfe(t){if(!Is(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(Rfe,"IsControlCharacterFree");function t3e(t){return kfe(t)||Js(t)}s(t3e,"IsAdditionalProperties");function L9(t){return _c(t)||P9(t)}s(L9,"IsOptionalBigInt");function Ts(t){return _c(t)||ap(t)}s(Ts,"IsOptionalNumber");function kfe(t){return _c(t)||Pv(t)}s(kfe,"IsOptionalBoolean");function as(t){return _c(t)||Is(t)}s(as,"IsOptionalString");function PTt(t){return _c(t)||Is(t)&&Rfe(t)&&e3e(t)}s(PTt,"IsOptionalPattern");function DTt(t){return _c(t)||Is(t)&&Rfe(t)}s(DTt,"IsOptionalFormat");function r3e(t){return _c(t)||Js(t)}s(r3e,"IsOptionalSchema");function BTt(t){return ss(t)&&t[Vg]==="Readonly"}s(BTt,"IsReadonly");function NTt(t){return ss(t)&&t[Lu]==="Optional"}s(NTt,"IsOptional");function n3e(t){return Ui(t,"Any")&&as(t.$id)}s(n3e,"IsAny");function i3e(t){return Ui(t,"Argument")&&ap(t.index)}s(i3e,"IsArgument");function o3e(t){return Ui(t,"Array")&&t.type==="array"&&as(t.$id)&&Js(t.items)&&Ts(t.minItems)&&Ts(t.maxItems)&&kfe(t.uniqueItems)&&r3e(t.contains)&&Ts(t.minContains)&&Ts(t.maxContains)}s(o3e,"IsArray");function s3e(t){return Ui(t,"AsyncIterator")&&t.type==="AsyncIterator"&&as(t.$id)&&Js(t.items)}s(s3e,"IsAsyncIterator");function a3e(t){return Ui(t,"BigInt")&&t.type==="bigint"&&as(t.$id)&&L9(t.exclusiveMaximum)&&L9(t.exclusiveMinimum)&&L9(t.maximum)&&L9(t.minimum)&&L9(t.multipleOf)}s(a3e,"IsBigInt");function c3e(t){return Ui(t,"Boolean")&&t.type==="boolean"&&as(t.$id)}s(c3e,"IsBoolean");function l3e(t){return Ui(t,"Computed")&&Is(t.target)&&Sc(t.parameters)&&t.parameters.every(e=>Js(e))}s(l3e,"IsComputed");function u3e(t){return Ui(t,"Constructor")&&t.type==="Constructor"&&as(t.$id)&&Sc(t.parameters)&&t.parameters.every(e=>Js(e))&&Js(t.returns)}s(u3e,"IsConstructor");function d3e(t){return Ui(t,"Date")&&t.type==="Date"&&as(t.$id)&&Ts(t.exclusiveMaximumTimestamp)&&Ts(t.exclusiveMinimumTimestamp)&&Ts(t.maximumTimestamp)&&Ts(t.minimumTimestamp)&&Ts(t.multipleOfTimestamp)}s(d3e,"IsDate");function f3e(t){return Ui(t,"Function")&&t.type==="Function"&&as(t.$id)&&Sc(t.parameters)&&t.parameters.every(e=>Js(e))&&Js(t.returns)}s(f3e,"IsFunction");function MTt(t){return Ui(t,"Import")&&Aj(t,"$defs")&&ss(t.$defs)&&Ij(t.$defs)&&Aj(t,"$ref")&&Is(t.$ref)&&t.$ref in t.$defs}s(MTt,"IsImport");function p3e(t){return Ui(t,"Integer")&&t.type==="integer"&&as(t.$id)&&Ts(t.exclusiveMaximum)&&Ts(t.exclusiveMinimum)&&Ts(t.maximum)&&Ts(t.minimum)&&Ts(t.multipleOf)}s(p3e,"IsInteger");function Ij(t){return ss(t)&&Object.entries(t).every(([e,r])=>Rfe(e)&&Js(r))}s(Ij,"IsProperties");function m3e(t){return Ui(t,"Intersect")&&!(Is(t.type)&&t.type!=="object")&&Sc(t.allOf)&&t.allOf.every(e=>Js(e)&&!N3e(e))&&as(t.type)&&(kfe(t.unevaluatedProperties)||r3e(t.unevaluatedProperties))&&as(t.$id)}s(m3e,"IsIntersect");function h3e(t){return Ui(t,"Iterator")&&t.type==="Iterator"&&as(t.$id)&&Js(t.items)}s(h3e,"IsIterator");function Ui(t,e){return ss(t)&&ot in t&&t[ot]===e}s(Ui,"IsKindOf");function g3e(t){return F9(t)&&Is(t.const)}s(g3e,"IsLiteralString");function A3e(t){return F9(t)&&ap(t.const)}s(A3e,"IsLiteralNumber");function LTt(t){return F9(t)&&Pv(t.const)}s(LTt,"IsLiteralBoolean");function F9(t){return Ui(t,"Literal")&&as(t.$id)&&y3e(t.const)}s(F9,"IsLiteral");function y3e(t){return Pv(t)||ap(t)||Is(t)}s(y3e,"IsLiteralValue");function C3e(t){return Ui(t,"MappedKey")&&Sc(t.keys)&&t.keys.every(e=>ap(e)||Is(e))}s(C3e,"IsMappedKey");function v3e(t){return Ui(t,"MappedResult")&&Ij(t.properties)}s(v3e,"IsMappedResult");function x3e(t){return Ui(t,"Never")&&ss(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(x3e,"IsNever");function E3e(t){return Ui(t,"Not")&&Js(t.not)}s(E3e,"IsNot");function b3e(t){return Ui(t,"Null")&&t.type==="null"&&as(t.$id)}s(b3e,"IsNull");function I3e(t){return Ui(t,"Number")&&t.type==="number"&&as(t.$id)&&Ts(t.exclusiveMaximum)&&Ts(t.exclusiveMinimum)&&Ts(t.maximum)&&Ts(t.minimum)&&Ts(t.multipleOf)}s(I3e,"IsNumber");function T3e(t){return Ui(t,"Object")&&t.type==="object"&&as(t.$id)&&Ij(t.properties)&&t3e(t.additionalProperties)&&Ts(t.minProperties)&&Ts(t.maxProperties)}s(T3e,"IsObject");function w3e(t){return Ui(t,"Promise")&&t.type==="Promise"&&as(t.$id)&&Js(t.item)}s(w3e,"IsPromise");function S3e(t){return Ui(t,"Record")&&t.type==="object"&&as(t.$id)&&t3e(t.additionalProperties)&&ss(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&e3e(r[0])&&ss(e.patternProperties)&&Js(e.patternProperties[r[0]])})(t)}s(S3e,"IsRecord");function FTt(t){return ss(t)&&Qm in t&&t[Qm]==="Recursive"}s(FTt,"IsRecursive");function _3e(t){return Ui(t,"Ref")&&as(t.$id)&&Is(t.$ref)}s(_3e,"IsRef");function R3e(t){return Ui(t,"RegExp")&&as(t.$id)&&Is(t.source)&&Is(t.flags)&&Ts(t.maxLength)&&Ts(t.minLength)}s(R3e,"IsRegExp");function k3e(t){return Ui(t,"String")&&t.type==="string"&&as(t.$id)&&Ts(t.minLength)&&Ts(t.maxLength)&&PTt(t.pattern)&&DTt(t.format)}s(k3e,"IsString");function P3e(t){return Ui(t,"Symbol")&&t.type==="symbol"&&as(t.$id)}s(P3e,"IsSymbol");function D3e(t){return Ui(t,"TemplateLiteral")&&t.type==="string"&&Is(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(D3e,"IsTemplateLiteral");function B3e(t){return Ui(t,"This")&&as(t.$id)&&Is(t.$ref)}s(B3e,"IsThis");function N3e(t){return ss(t)&&Ea in t}s(N3e,"IsTransform");function M3e(t){return Ui(t,"Tuple")&&t.type==="array"&&as(t.$id)&&ap(t.minItems)&&ap(t.maxItems)&&t.minItems===t.maxItems&&(_c(t.items)&&_c(t.additionalItems)&&t.minItems===0||Sc(t.items)&&t.items.every(e=>Js(e)))}s(M3e,"IsTuple");function L3e(t){return Ui(t,"Undefined")&&t.type==="undefined"&&as(t.$id)}s(L3e,"IsUndefined");function OTt(t){return Pfe(t)&&t.anyOf.every(e=>g3e(e)||A3e(e))}s(OTt,"IsUnionLiteral");function Pfe(t){return Ui(t,"Union")&&as(t.$id)&&ss(t)&&Sc(t.anyOf)&&t.anyOf.every(e=>Js(e))}s(Pfe,"IsUnion");function F3e(t){return Ui(t,"Uint8Array")&&t.type==="Uint8Array"&&as(t.$id)&&Ts(t.minByteLength)&&Ts(t.maxByteLength)}s(F3e,"IsUint8Array");function O3e(t){return Ui(t,"Unknown")&&as(t.$id)}s(O3e,"IsUnknown");function Q3e(t){return Ui(t,"Unsafe")}s(Q3e,"IsUnsafe");function U3e(t){return Ui(t,"Void")&&t.type==="void"&&as(t.$id)}s(U3e,"IsVoid");function q3e(t){return ss(t)&&ot in t&&Is(t[ot])&&!kTt.includes(t[ot])}s(q3e,"IsKind");function Js(t){return ss(t)&&(n3e(t)||i3e(t)||o3e(t)||c3e(t)||a3e(t)||s3e(t)||l3e(t)||u3e(t)||d3e(t)||f3e(t)||p3e(t)||m3e(t)||h3e(t)||F9(t)||C3e(t)||v3e(t)||x3e(t)||E3e(t)||b3e(t)||I3e(t)||T3e(t)||w3e(t)||S3e(t)||_3e(t)||R3e(t)||k3e(t)||P3e(t)||D3e(t)||B3e(t)||M3e(t)||L3e(t)||Pfe(t)||F3e(t)||O3e(t)||Q3e(t)||U3e(t)||q3e(t))}s(Js,"IsSchema");d();var Dfe="(true|false)",O9="(0|[1-9][0-9]*)",Bfe="(.*)",QTt="(?!.*)",jDr=`^${Dfe}$`,rC=`^${O9}$`,nC=`^${Bfe}$`,H3e=`^${QTt}$`;d();var eA={};Ca(eA,{Clear:()=>qTt,Delete:()=>HTt,Entries:()=>UTt,Get:()=>jTt,Has:()=>$Tt,Set:()=>WTt});d();var D4=new Map;function UTt(){return new Map(D4)}s(UTt,"Entries");function qTt(){return D4.clear()}s(qTt,"Clear");function HTt(t){return D4.delete(t)}s(HTt,"Delete");function $Tt(t){return D4.has(t)}s($Tt,"Has");function WTt(t,e){D4.set(t,e)}s(WTt,"Set");function jTt(t){return D4.get(t)}s(jTt,"Get");var af={};Ca(af,{Clear:()=>VTt,Delete:()=>zTt,Entries:()=>GTt,Get:()=>JTt,Has:()=>YTt,Set:()=>KTt});d();var B4=new Map;function GTt(){return new Map(B4)}s(GTt,"Entries");function VTt(){return B4.clear()}s(VTt,"Clear");function zTt(t){return B4.delete(t)}s(zTt,"Delete");function YTt(t){return B4.has(t)}s(YTt,"Has");function KTt(t,e){B4.set(t,e)}s(KTt,"Set");function JTt(t){return B4.get(t)}s(JTt,"Get");d();function $3e(t,e){return t.includes(e)}s($3e,"SetIncludes");function W3e(t){return[...new Set(t)]}s(W3e,"SetDistinct");function XTt(t,e){return t.filter(r=>e.includes(r))}s(XTt,"SetIntersect");function ZTt(t,e){return t.reduce((r,n)=>XTt(r,n),e)}s(ZTt,"SetIntersectManyResolve");function j3e(t){return t.length===1?t[0]:t.length>1?ZTt(t.slice(1),t[0]):[]}s(j3e,"SetIntersectMany");function G3e(t){let e=[];for(let r of t)e.push(...r);return e}s(G3e,"SetUnionMany");d();function vI(t){return at({[ot]:"Any"},t)}s(vI,"Any");d();function N4(t,e){return at({[ot]:"Array",type:"array",items:t},e)}s(N4,"Array");d();function V3e(t){return at({[ot]:"Argument",index:t})}s(V3e,"Argument");d();function M4(t,e){return at({[ot]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(M4,"AsyncIterator");d();d();function Ns(t,e,r){return at({[ot]:"Computed",target:t,parameters:e},r)}s(Ns,"Computed");d();d();function ewt(t,e){let{[e]:r,...n}=t;return n}s(ewt,"DiscardKey");function Qa(t,e){return e.reduce((r,n)=>ewt(r,n),t)}s(Qa,"Discard");d();function xi(t){return at({[ot]:"Never",not:{}},t)}s(xi,"Never");d();d();function To(t){return at({[ot]:"MappedResult",properties:t})}s(To,"MappedResult");d();d();function L4(t,e,r){return at({[ot]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(L4,"Constructor");d();function iC(t,e,r){return at({[ot]:"Function",type:"Function",parameters:t,returns:e},r)}s(iC,"Function");d();d();d();d();function Q9(t,e){return at({[ot]:"Union",anyOf:t},e)}s(Q9,"UnionCreate");function twt(t){return t.some(e=>Zf(e))}s(twt,"IsUnionOptional");function z3e(t){return t.map(e=>Zf(e)?rwt(e):e)}s(z3e,"RemoveOptionalFromRest");function rwt(t){return Qa(t,[Lu])}s(rwt,"RemoveOptionalFromType");function nwt(t,e){return twt(t)?Ed(Q9(z3e(t),e)):Q9(z3e(t),e)}s(nwt,"ResolveUnion");function oC(t,e){return t.length===1?at(t[0],e):t.length===0?xi(e):nwt(t,e)}s(oC,"UnionEvaluated");d();function Qo(t,e){return t.length===0?xi(e):t.length===1?at(t[0],e):Q9(t,e)}s(Qo,"Union");d();d();d();var Tj=class extends Dn{static{s(this,"TemplateLiteralParserError")}};function iwt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(iwt,"Unescape");function Nfe(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(Nfe,"IsNonEscaped");function Qv(t,e){return Nfe(t,e,"(")}s(Qv,"IsOpenParen");function U9(t,e){return Nfe(t,e,")")}s(U9,"IsCloseParen");function Y3e(t,e){return Nfe(t,e,"|")}s(Y3e,"IsSeparator");function owt(t){if(!(Qv(t,0)&&U9(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(Qv(t,r)&&(e+=1),U9(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(owt,"IsGroup");function swt(t){return t.slice(1,t.length-1)}s(swt,"InGroup");function awt(t){let e=0;for(let r=0;r<t.length;r++)if(Qv(t,r)&&(e+=1),U9(t,r)&&(e-=1),Y3e(t,r)&&e===0)return!0;return!1}s(awt,"IsPrecedenceOr");function cwt(t){for(let e=0;e<t.length;e++)if(Qv(t,e))return!0;return!1}s(cwt,"IsPrecedenceAnd");function lwt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(Qv(t,o)&&(e+=1),U9(t,o)&&(e-=1),Y3e(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(F4(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(F4(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(lwt,"Or");function uwt(t){function e(i,o){if(!Qv(i,o))throw new Tj("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(Qv(i,c)&&(a+=1),U9(i,c)&&(a-=1),a===0)return[o,c];throw new Tj("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(Qv(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(Qv(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(F4(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(F4(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(uwt,"And");function F4(t){return owt(t)?F4(swt(t)):awt(t)?lwt(t):cwt(t)?uwt(t):{type:"const",const:iwt(t)}}s(F4,"TemplateLiteralParse");function O4(t){return F4(t.slice(1,t.length-1))}s(O4,"TemplateLiteralParseExact");var Mfe=class extends Dn{static{s(this,"TemplateLiteralFiniteError")}};function dwt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(dwt,"IsNumberExpression");function fwt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(fwt,"IsBooleanExpression");function pwt(t){return t.type==="const"&&t.const===".*"}s(pwt,"IsStringExpression");function V_(t){return dwt(t)||pwt(t)?!1:fwt(t)?!0:t.type==="and"?t.expr.every(e=>V_(e)):t.type==="or"?t.expr.every(e=>V_(e)):t.type==="const"?!0:(()=>{throw new Mfe("Unknown expression type")})()}s(V_,"IsTemplateLiteralExpressionFinite");function wj(t){let e=O4(t.pattern);return V_(e)}s(wj,"IsTemplateLiteralFinite");d();var Lfe=class extends Dn{static{s(this,"TemplateLiteralGenerateError")}};function*K3e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of K3e(t.slice(1)))yield`${e}${r}`}s(K3e,"GenerateReduce");function*mwt(t){return yield*K3e(t.expr.map(e=>[...q9(e)]))}s(mwt,"GenerateAnd");function*hwt(t){for(let e of t.expr)yield*q9(e)}s(hwt,"GenerateOr");function*gwt(t){return yield t.const}s(gwt,"GenerateConst");function*q9(t){return t.type==="and"?yield*mwt(t):t.type==="or"?yield*hwt(t):t.type==="const"?yield*gwt(t):(()=>{throw new Lfe("Unknown expression")})()}s(q9,"TemplateLiteralExpressionGenerate");function Q4(t){let e=O4(t.pattern);return V_(e)?[...q9(e)]:[]}s(Q4,"TemplateLiteralGenerate");d();d();function ao(t,e){return at({[ot]:"Literal",const:t,type:typeof t},e)}s(ao,"Literal");d();function Sj(t){return at({[ot]:"Boolean",type:"boolean"},t)}s(Sj,"Boolean");d();function U4(t){return at({[ot]:"BigInt",type:"bigint"},t)}s(U4,"BigInt");d();function Um(t){return at({[ot]:"Number",type:"number"},t)}s(Um,"Number");d();function cf(t){return at({[ot]:"String",type:"string"},t)}s(cf,"String");function*Awt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield Sj():e==="number"?yield Um():e==="bigint"?yield U4():e==="string"?yield cf():yield(()=>{let r=e.split("|").map(n=>ao(n.trim()));return r.length===0?xi():r.length===1?r[0]:oC(r)})()}s(Awt,"FromUnion");function*ywt(t){if(t[1]!=="{"){let e=ao("$"),r=Ffe(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=Awt(t.slice(2,e)),n=Ffe(t.slice(e+1));return yield*[...r,...n]}yield ao(t)}s(ywt,"FromTerminal");function*Ffe(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=ao(t.slice(0,e)),n=ywt(t.slice(e));return yield*[r,...n]}yield ao(t)}s(Ffe,"FromSyntax");function J3e(t){return[...Ffe(t)]}s(J3e,"TemplateLiteralSyntax");d();var Ofe=class extends Dn{static{s(this,"TemplateLiteralPatternError")}};function Cwt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Cwt,"Escape");function X3e(t,e){return dp(t)?t.pattern.slice(1,t.pattern.length-1):Co(t)?`(${t.anyOf.map(r=>X3e(r,e)).join("|")})`:Zg(t)?`${e}${O9}`:Xg(t)?`${e}${O9}`:$_(t)?`${e}${O9}`:Lv(t)?`${e}${Bfe}`:lp(t)?`${e}${Cwt(t.const.toString())}`:Mv(t)?`${e}${Dfe}`:(()=>{throw new Ofe(`Unexpected Kind '${t[ot]}'`)})()}s(X3e,"Visit");function Qfe(t){return`^${t.map(e=>X3e(e,"")).join("")}$`}s(Qfe,"TemplateLiteralPattern");d();function z_(t){let r=Q4(t).map(n=>ao(n));return oC(r)}s(z_,"TemplateLiteralToUnion");d();function _j(t,e){let r=Is(t)?Qfe(J3e(t)):Qfe(t);return at({[ot]:"TemplateLiteral",type:"string",pattern:r},e)}s(_j,"TemplateLiteral");function vwt(t){return Q4(t).map(r=>r.toString())}s(vwt,"FromTemplateLiteral");function xwt(t){let e=[];for(let r of t)e.push(...e0(r));return e}s(xwt,"FromUnion");function Ewt(t){return[t.toString()]}s(Ewt,"FromLiteral");function e0(t){return[...new Set(dp(t)?vwt(t):Co(t)?xwt(t.anyOf):lp(t)?Ewt(t.const):Zg(t)?["[number]"]:Xg(t)?["[number]"]:[])]}s(e0,"IndexPropertyKeys");d();function bwt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=xI(t,e0(e[i]),r);return n}s(bwt,"FromProperties");function Iwt(t,e,r){return bwt(t,e.properties,r)}s(Iwt,"FromMappedResult");function Z3e(t,e,r){let n=Iwt(t,e,r);return To(n)}s(Z3e,"IndexFromMappedResult");function tNe(t,e){return t.map(r=>rNe(r,e))}s(tNe,"FromRest");function Twt(t){return t.filter(e=>!yI(e))}s(Twt,"FromIntersectRest");function wwt(t,e){return Rj(Twt(tNe(t,e)))}s(wwt,"FromIntersect");function Swt(t){return t.some(e=>yI(e))?[]:t}s(Swt,"FromUnionRest");function _wt(t,e){return oC(Swt(tNe(t,e)))}s(_wt,"FromUnion");function Rwt(t,e){return e in t?t[e]:e==="[number]"?oC(t):xi()}s(Rwt,"FromTuple");function kwt(t,e){return e==="[number]"?t:xi()}s(kwt,"FromArray");function Pwt(t,e){return e in t?t[e]:xi()}s(Pwt,"FromProperty");function rNe(t,e){return Oa(t)?wwt(t.allOf,e):Co(t)?_wt(t.anyOf,e):fp(t)?Rwt(t.items??[],e):zg(t)?kwt(t.items,e):Rc(t)?Pwt(t.properties,e):xi()}s(rNe,"IndexFromPropertyKey");function H9(t,e){return e.map(r=>rNe(t,r))}s(H9,"IndexFromPropertyKeys");function eNe(t,e){return oC(H9(t,e))}s(eNe,"FromSchema");function xI(t,e,r){if(ec(t)||ec(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!ba(t)||!ba(e))throw new Dn(n);return Ns("Index",[t,e])}return Ks(e)?Z3e(t,e,r):up(e)?nNe(t,e,r):at(ba(e)?eNe(t,e0(e)):eNe(t,e),r)}s(xI,"Index");function Dwt(t,e,r){return{[e]:xI(t,[e],zs(r))}}s(Dwt,"MappedIndexPropertyKey");function Bwt(t,e,r){return e.reduce((n,i)=>({...n,...Dwt(t,i,r)}),{})}s(Bwt,"MappedIndexPropertyKeys");function Nwt(t,e,r){return Bwt(t,e.keys,r)}s(Nwt,"MappedIndexProperties");function nNe(t,e,r){let n=Nwt(t,e,r);return To(n)}s(nNe,"IndexFromMappedKey");d();function q4(t,e){return at({[ot]:"Iterator",type:"Iterator",items:t},e)}s(q4,"Iterator");d();function Mwt(t){let e=[];for(let r in t)Zf(t[r])||e.push(r);return e}s(Mwt,"RequiredKeys");function Lwt(t,e){let r=Mwt(t),n=r.length>0?{[ot]:"Object",type:"object",properties:t,required:r}:{[ot]:"Object",type:"object",properties:t};return at(n,e)}s(Lwt,"_Object");var Uo=Lwt;d();function kj(t,e){return at({[ot]:"Promise",type:"Promise",item:t},e)}s(kj,"Promise");d();d();function Fwt(t){return at(Qa(t,[Vg]))}s(Fwt,"RemoveReadonly");function Owt(t){return at({...t,[Vg]:"Readonly"})}s(Owt,"AddReadonly");function Qwt(t,e){return e===!1?Fwt(t):Owt(t)}s(Qwt,"ReadonlyWithFlag");function t0(t,e){let r=e??!0;return Ks(t)?iNe(t,r):Qwt(t,r)}s(t0,"Readonly");function Uwt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=t0(t[n],e);return r}s(Uwt,"FromProperties");function qwt(t,e){return Uwt(t.properties,e)}s(qwt,"FromMappedResult");function iNe(t,e){let r=qwt(t,e);return To(r)}s(iNe,"ReadonlyFromMappedResult");d();function qm(t,e){return at(t.length>0?{[ot]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[ot]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(qm,"Tuple");function oNe(t,e){return t in e?Hm(t,e[t]):To(e)}s(oNe,"FromMappedResult");function Hwt(t){return{[t]:ao(t)}}s(Hwt,"MappedKeyToKnownMappedResultProperties");function $wt(t){let e={};for(let r of t)e[r]=ao(r);return e}s($wt,"MappedKeyToUnknownMappedResultProperties");function Wwt(t,e){return $3e(e,t)?Hwt(t):$wt(e)}s(Wwt,"MappedKeyToMappedResultProperties");function jwt(t,e){let r=Wwt(t,e);return oNe(t,r)}s(jwt,"FromMappedKey");function $9(t,e){return e.map(r=>Hm(t,r))}s($9,"FromRest");function Gwt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Hm(t,e[n]);return r}s(Gwt,"FromProperties");function Hm(t,e){let r={...e};return Zf(e)?Ed(Hm(t,Qa(e,[Lu]))):P4(e)?t0(Hm(t,Qa(e,[Vg]))):Ks(e)?oNe(t,e.properties):up(e)?jwt(t,e.keys):Kg(e)?L4($9(t,e.parameters),Hm(t,e.returns),r):Jg(e)?iC($9(t,e.parameters),Hm(t,e.returns),r):H_(e)?M4(Hm(t,e.items),r):W_(e)?q4(Hm(t,e.items),r):Oa(e)?bd($9(t,e.allOf),r):Co(e)?Qo($9(t,e.anyOf),r):fp(e)?qm($9(t,e.items??[]),r):Rc(e)?Uo(Gwt(t,e.properties),r):zg(e)?N4(Hm(t,e.items),r):j_(e)?kj(Hm(t,e.item),r):e}s(Hm,"FromSchemaType");function Vwt(t,e){let r={};for(let n of t)r[n]=Hm(n,e);return r}s(Vwt,"MappedFunctionReturnType");function sNe(t,e,r){let n=ba(t)?e0(t):t,i=e({[ot]:"MappedKey",keys:n}),o=Vwt(n,i);return Uo(o,r)}s(sNe,"Mapped");d();function zwt(t){return at(Qa(t,[Lu]))}s(zwt,"RemoveOptional");function Ywt(t){return at({...t,[Lu]:"Optional"})}s(Ywt,"AddOptional");function Kwt(t,e){return e===!1?zwt(t):Ywt(t)}s(Kwt,"OptionalWithFlag");function Ed(t,e){let r=e??!0;return Ks(t)?aNe(t,r):Kwt(t,r)}s(Ed,"Optional");function Jwt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Ed(t[n],e);return r}s(Jwt,"FromProperties");function Xwt(t,e){return Jwt(t.properties,e)}s(Xwt,"FromMappedResult");function aNe(t,e){let r=Xwt(t,e);return To(r)}s(aNe,"OptionalFromMappedResult");d();function W9(t,e={}){let r=t.every(i=>Rc(i)),n=ba(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return at(e.unevaluatedProperties===!1||ba(e.unevaluatedProperties)||r?{...n,[ot]:"Intersect",type:"object",allOf:t}:{...n,[ot]:"Intersect",allOf:t},e)}s(W9,"IntersectCreate");function Zwt(t){return t.every(e=>Zf(e))}s(Zwt,"IsIntersectOptional");function eSt(t){return Qa(t,[Lu])}s(eSt,"RemoveOptionalFromType");function cNe(t){return t.map(e=>Zf(e)?eSt(e):e)}s(cNe,"RemoveOptionalFromRest");function tSt(t,e){return Zwt(t)?Ed(W9(cNe(t),e)):W9(cNe(t),e)}s(tSt,"ResolveIntersect");function Rj(t,e={}){if(t.length===1)return at(t[0],e);if(t.length===0)return xi(e);if(t.some(r=>Oo(r)))throw new Error("Cannot intersect transform types");return tSt(t,e)}s(Rj,"IntersectEvaluated");d();function bd(t,e){if(t.length===1)return at(t[0],e);if(t.length===0)return xi(e);if(t.some(r=>Oo(r)))throw new Error("Cannot intersect transform types");return W9(t,e)}s(bd,"Intersect");d();function $m(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Dn("Ref: $ref must be a string");return at({[ot]:"Ref",$ref:e},r)}s($m,"Ref");function rSt(t,e){return Ns("Awaited",[Ns(t,e)])}s(rSt,"FromComputed");function nSt(t){return Ns("Awaited",[$m(t)])}s(nSt,"FromRef");function iSt(t){return bd(lNe(t))}s(iSt,"FromIntersect");function oSt(t){return Qo(lNe(t))}s(oSt,"FromUnion");function sSt(t){return H4(t)}s(sSt,"FromPromise");function lNe(t){return t.map(e=>H4(e))}s(lNe,"FromRest");function H4(t,e){return at(Yg(t)?rSt(t.target,t.parameters):Oa(t)?iSt(t.allOf):Co(t)?oSt(t.anyOf):j_(t)?sSt(t.item):ec(t)?nSt(t.$ref):t,e)}s(H4,"Awaited");d();d();d();d();function uNe(t){let e=[];for(let r of t)e.push(r0(r));return e}s(uNe,"FromRest");function aSt(t){let e=uNe(t);return G3e(e)}s(aSt,"FromIntersect");function cSt(t){let e=uNe(t);return j3e(e)}s(cSt,"FromUnion");function lSt(t){return t.map((e,r)=>r.toString())}s(lSt,"FromTuple");function uSt(t){return["[number]"]}s(uSt,"FromArray");function dSt(t){return globalThis.Object.getOwnPropertyNames(t)}s(dSt,"FromProperties");function fSt(t){return Ufe?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(fSt,"FromPatternProperties");function r0(t){return Oa(t)?aSt(t.allOf):Co(t)?cSt(t.anyOf):fp(t)?lSt(t.items??[]):zg(t)?uSt(t.items):Rc(t)?dSt(t.properties):G_(t)?fSt(t.patternProperties):[]}s(r0,"KeyOfPropertyKeys");var Ufe=!1;function Uv(t){Ufe=!0;let e=r0(t);return Ufe=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(Uv,"KeyOfPattern");function pSt(t,e){return Ns("KeyOf",[Ns(t,e)])}s(pSt,"FromComputed");function mSt(t){return Ns("KeyOf",[$m(t)])}s(mSt,"FromRef");function hSt(t,e){let r=r0(t),n=gSt(r),i=oC(n);return at(i,e)}s(hSt,"KeyOfFromType");function gSt(t){return t.map(e=>e==="[number]"?Um():ao(e))}s(gSt,"KeyOfPropertyKeysToRest");function $4(t,e){return Yg(t)?pSt(t.target,t.parameters):ec(t)?mSt(t.$ref):Ks(t)?dNe(t,e):hSt(t,e)}s($4,"KeyOf");function ASt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=$4(t[n],zs(e));return r}s(ASt,"FromProperties");function ySt(t,e){return ASt(t.properties,e)}s(ySt,"FromMappedResult");function dNe(t,e){let r=ySt(t,e);return To(r)}s(dNe,"KeyOfFromMappedResult");d();function Pj(t){let e=r0(t),r=H9(t,e);return e.map((n,i)=>[e[i],r[i]])}s(Pj,"KeyOfPropertyEntries");function CSt(t){let e=[];for(let r of t)e.push(...r0(r));return W3e(e)}s(CSt,"CompositeKeys");function vSt(t){return t.filter(e=>!yI(e))}s(vSt,"FilterNever");function xSt(t,e){let r=[];for(let n of t)r.push(...H9(n,[e]));return vSt(r)}s(xSt,"CompositeProperty");function ESt(t,e){let r={};for(let n of e)r[n]=Rj(xSt(t,n));return r}s(ESt,"CompositeProperties");function fNe(t,e){let r=CSt(t),n=ESt(t,r);return Uo(n,e)}s(fNe,"Composite");d();d();function Dj(t){return at({[ot]:"Date",type:"Date"},t)}s(Dj,"Date");d();function Bj(t){return at({[ot]:"Null",type:"null"},t)}s(Bj,"Null");d();function Nj(t){return at({[ot]:"Symbol",type:"symbol"},t)}s(Nj,"Symbol");d();function Mj(t){return at({[ot]:"Undefined",type:"undefined"},t)}s(Mj,"Undefined");d();function Lj(t){return at({[ot]:"Uint8Array",type:"Uint8Array"},t)}s(Lj,"Uint8Array");d();function tA(t){return at({[ot]:"Unknown"},t)}s(tA,"Unknown");function bSt(t){return t.map(e=>qfe(e,!1))}s(bSt,"FromArray");function ISt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=t0(qfe(t[r],!1));return e}s(ISt,"FromProperties");function Fj(t,e){return e===!0?t:t0(t)}s(Fj,"ConditionalReadonly");function qfe(t,e){return Cfe(t)?Fj(vI(),e):xfe(t)?Fj(vI(),e):Sc(t)?t0(qm(bSt(t))):Dv(t)?Lj():q_(t)?Dj():ss(t)?Fj(Uo(ISt(t)),e):vfe(t)?Fj(iC([],tA()),e):_c(t)?Mj():Efe(t)?Bj():bfe(t)?Nj():P9(t)?U4():ap(t)?ao(t):Pv(t)?ao(t):Is(t)?ao(t):Uo({})}s(qfe,"FromValue");function pNe(t,e){return at(qfe(t,!0),e)}s(pNe,"Const");d();function mNe(t,e){return Kg(t)?qm(t.parameters,e):xi(e)}s(mNe,"ConstructorParameters");d();function hNe(t,e){if(_c(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>ao(o));return Qo(i,{...e,[Qm]:"Enum"})}s(hNe,"Enum");d();d();d();var $fe=class extends Dn{static{s(this,"ExtendsResolverError")}},ct;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ct||(ct={}));function Wm(t){return t===ct.False?t:ct.True}s(Wm,"IntoBooleanResult");function W4(t){throw new $fe(t)}s(W4,"Throw");function Xc(t){return Le.IsNever(t)||Le.IsIntersect(t)||Le.IsUnion(t)||Le.IsUnknown(t)||Le.IsAny(t)}s(Xc,"IsStructuralRight");function Zc(t,e){return Le.IsNever(e)?ENe(t,e):Le.IsIntersect(e)?Oj(t,e):Le.IsUnion(e)?Vfe(t,e):Le.IsUnknown(e)?wNe(t,e):Le.IsAny(e)?Gfe(t,e):W4("StructuralRight")}s(Zc,"StructuralRight");function Gfe(t,e){return ct.True}s(Gfe,"FromAnyRight");function TSt(t,e){return Le.IsIntersect(e)?Oj(t,e):Le.IsUnion(e)&&e.anyOf.some(r=>Le.IsAny(r)||Le.IsUnknown(r))?ct.True:Le.IsUnion(e)?ct.Union:Le.IsUnknown(e)||Le.IsAny(e)?ct.True:ct.Union}s(TSt,"FromAny");function wSt(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)?ct.True:ct.False}s(wSt,"FromArrayRight");function SSt(t,e){return Le.IsObject(e)&&Qj(e)?ct.True:Xc(e)?Zc(t,e):Le.IsArray(e)?Wm(cs(t.items,e.items)):ct.False}s(SSt,"FromArray");function _St(t,e){return Xc(e)?Zc(t,e):Le.IsAsyncIterator(e)?Wm(cs(t.items,e.items)):ct.False}s(_St,"FromAsyncIterator");function RSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsBigInt(e)?ct.True:ct.False}s(RSt,"FromBigInt");function vNe(t,e){return Le.IsLiteralBoolean(t)||Le.IsBoolean(t)?ct.True:ct.False}s(vNe,"FromBooleanRight");function kSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsBoolean(e)?ct.True:ct.False}s(kSt,"FromBoolean");function PSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsConstructor(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Wm(cs(e.parameters[n],r))===ct.True)?Wm(cs(t.returns,e.returns)):ct.False:ct.False}s(PSt,"FromConstructor");function DSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsDate(e)?ct.True:ct.False}s(DSt,"FromDate");function BSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsFunction(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Wm(cs(e.parameters[n],r))===ct.True)?Wm(cs(t.returns,e.returns)):ct.False:ct.False}s(BSt,"FromFunction");function xNe(t,e){return Le.IsLiteral(t)&&xd.IsNumber(t.const)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(xNe,"FromIntegerRight");function NSt(t,e){return Le.IsInteger(e)||Le.IsNumber(e)?ct.True:Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):ct.False}s(NSt,"FromInteger");function Oj(t,e){return e.allOf.every(r=>cs(t,r)===ct.True)?ct.True:ct.False}s(Oj,"FromIntersectRight");function MSt(t,e){return t.allOf.some(r=>cs(r,e)===ct.True)?ct.True:ct.False}s(MSt,"FromIntersect");function LSt(t,e){return Xc(e)?Zc(t,e):Le.IsIterator(e)?Wm(cs(t.items,e.items)):ct.False}s(LSt,"FromIterator");function FSt(t,e){return Le.IsLiteral(e)&&e.const===t.const?ct.True:Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsString(e)?TNe(t,e):Le.IsNumber(e)?bNe(t,e):Le.IsInteger(e)?xNe(t,e):Le.IsBoolean(e)?vNe(t,e):ct.False}s(FSt,"FromLiteral");function ENe(t,e){return ct.False}s(ENe,"FromNeverRight");function OSt(t,e){return ct.True}s(OSt,"FromNever");function gNe(t){let[e,r]=[t,0];for(;Le.IsNot(e);)e=e.not,r+=1;return r%2===0?e:tA()}s(gNe,"UnwrapTNot");function QSt(t,e){return Le.IsNot(t)?cs(gNe(t),e):Le.IsNot(e)?cs(t,gNe(e)):W4("Invalid fallthrough for Not")}s(QSt,"FromNot");function USt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsNull(e)?ct.True:ct.False}s(USt,"FromNull");function bNe(t,e){return Le.IsLiteralNumber(t)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(bNe,"FromNumberRight");function qSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsInteger(e)||Le.IsNumber(e)?ct.True:ct.False}s(qSt,"FromNumber");function n0(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(n0,"IsObjectPropertyCount");function ANe(t){return Qj(t)}s(ANe,"IsObjectStringLike");function yNe(t){return n0(t,0)||n0(t,1)&&"description"in t.properties&&Le.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Le.IsString(t.properties.description.anyOf[0])&&Le.IsUndefined(t.properties.description.anyOf[1])||Le.IsString(t.properties.description.anyOf[1])&&Le.IsUndefined(t.properties.description.anyOf[0]))}s(yNe,"IsObjectSymbolLike");function Hfe(t){return n0(t,0)}s(Hfe,"IsObjectNumberLike");function CNe(t){return n0(t,0)}s(CNe,"IsObjectBooleanLike");function HSt(t){return n0(t,0)}s(HSt,"IsObjectBigIntLike");function $St(t){return n0(t,0)}s($St,"IsObjectDateLike");function WSt(t){return Qj(t)}s(WSt,"IsObjectUint8ArrayLike");function jSt(t){let e=Um();return n0(t,0)||n0(t,1)&&"length"in t.properties&&Wm(cs(t.properties.length,e))===ct.True}s(jSt,"IsObjectFunctionLike");function GSt(t){return n0(t,0)}s(GSt,"IsObjectConstructorLike");function Qj(t){let e=Um();return n0(t,0)||n0(t,1)&&"length"in t.properties&&Wm(cs(t.properties.length,e))===ct.True}s(Qj,"IsObjectArrayLike");function VSt(t){let e=iC([vI()],vI());return n0(t,0)||n0(t,1)&&"then"in t.properties&&Wm(cs(t.properties.then,e))===ct.True}s(VSt,"IsObjectPromiseLike");function INe(t,e){return cs(t,e)===ct.False||Le.IsOptional(t)&&!Le.IsOptional(e)?ct.False:ct.True}s(INe,"Property");function Id(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)||Le.IsLiteralString(t)&&ANe(e)||Le.IsLiteralNumber(t)&&Hfe(e)||Le.IsLiteralBoolean(t)&&CNe(e)||Le.IsSymbol(t)&&yNe(e)||Le.IsBigInt(t)&&HSt(e)||Le.IsString(t)&&ANe(e)||Le.IsSymbol(t)&&yNe(e)||Le.IsNumber(t)&&Hfe(e)||Le.IsInteger(t)&&Hfe(e)||Le.IsBoolean(t)&&CNe(e)||Le.IsUint8Array(t)&&WSt(e)||Le.IsDate(t)&&$St(e)||Le.IsConstructor(t)&&GSt(e)||Le.IsFunction(t)&&jSt(e)?ct.True:Le.IsRecord(t)&&Le.IsString(Wfe(t))?e[Qm]==="Record"?ct.True:ct.False:Le.IsRecord(t)&&Le.IsNumber(Wfe(t))?n0(e,0)?ct.True:ct.False:ct.False}s(Id,"FromObjectRight");function zSt(t,e){return Xc(e)?Zc(t,e):Le.IsRecord(e)?jm(t,e):Le.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Le.IsOptional(e.properties[r]))return ct.False;if(Le.IsOptional(e.properties[r]))return ct.True;if(INe(t.properties[r],e.properties[r])===ct.False)return ct.False}return ct.True})():ct.False}s(zSt,"FromObject");function YSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)&&VSt(e)?ct.True:Le.IsPromise(e)?Wm(cs(t.item,e.item)):ct.False}s(YSt,"FromPromise");function Wfe(t){return rC in t.patternProperties?Um():nC in t.patternProperties?cf():W4("Unknown record key pattern")}s(Wfe,"RecordKey");function jfe(t){return rC in t.patternProperties?t.patternProperties[rC]:nC in t.patternProperties?t.patternProperties[nC]:W4("Unable to get record value schema")}s(jfe,"RecordValue");function jm(t,e){let[r,n]=[Wfe(e),jfe(e)];return Le.IsLiteralString(t)&&Le.IsNumber(r)&&Wm(cs(t,n))===ct.True?ct.True:Le.IsUint8Array(t)&&Le.IsNumber(r)||Le.IsString(t)&&Le.IsNumber(r)||Le.IsArray(t)&&Le.IsNumber(r)?cs(t,n):Le.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(INe(n,t.properties[i])===ct.False)return ct.False;return ct.True})():ct.False}s(jm,"FromRecordRight");function KSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?cs(jfe(t),jfe(e)):ct.False}s(KSt,"FromRecord");function JSt(t,e){let r=Le.IsRegExp(t)?cf():t,n=Le.IsRegExp(e)?cf():e;return cs(r,n)}s(JSt,"FromRegExp");function TNe(t,e){return Le.IsLiteral(t)&&xd.IsString(t.const)||Le.IsString(t)?ct.True:ct.False}s(TNe,"FromStringRight");function XSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsString(e)?ct.True:ct.False}s(XSt,"FromString");function ZSt(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsSymbol(e)?ct.True:ct.False}s(ZSt,"FromSymbol");function e_t(t,e){return Le.IsTemplateLiteral(t)?cs(z_(t),e):Le.IsTemplateLiteral(e)?cs(t,z_(e)):W4("Invalid fallthrough for TemplateLiteral")}s(e_t,"FromTemplateLiteral");function t_t(t,e){return Le.IsArray(e)&&t.items!==void 0&&t.items.every(r=>cs(r,e.items)===ct.True)}s(t_t,"IsArrayOfTuple");function r_t(t,e){return Le.IsNever(t)?ct.True:Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:ct.False}s(r_t,"FromTupleRight");function n_t(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)&&Qj(e)||Le.IsArray(e)&&t_t(t,e)?ct.True:Le.IsTuple(e)?xd.IsUndefined(t.items)&&!xd.IsUndefined(e.items)||!xd.IsUndefined(t.items)&&xd.IsUndefined(e.items)?ct.False:xd.IsUndefined(t.items)&&!xd.IsUndefined(e.items)||t.items.every((r,n)=>cs(r,e.items[n])===ct.True)?ct.True:ct.False:ct.False}s(n_t,"FromTuple");function i_t(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsUint8Array(e)?ct.True:ct.False}s(i_t,"FromUint8Array");function o_t(t,e){return Xc(e)?Zc(t,e):Le.IsObject(e)?Id(t,e):Le.IsRecord(e)?jm(t,e):Le.IsVoid(e)?c_t(t,e):Le.IsUndefined(e)?ct.True:ct.False}s(o_t,"FromUndefined");function Vfe(t,e){return e.anyOf.some(r=>cs(t,r)===ct.True)?ct.True:ct.False}s(Vfe,"FromUnionRight");function s_t(t,e){return t.anyOf.every(r=>cs(r,e)===ct.True)?ct.True:ct.False}s(s_t,"FromUnion");function wNe(t,e){return ct.True}s(wNe,"FromUnknownRight");function a_t(t,e){return Le.IsNever(e)?ENe(t,e):Le.IsIntersect(e)?Oj(t,e):Le.IsUnion(e)?Vfe(t,e):Le.IsAny(e)?Gfe(t,e):Le.IsString(e)?TNe(t,e):Le.IsNumber(e)?bNe(t,e):Le.IsInteger(e)?xNe(t,e):Le.IsBoolean(e)?vNe(t,e):Le.IsArray(e)?wSt(t,e):Le.IsTuple(e)?r_t(t,e):Le.IsObject(e)?Id(t,e):Le.IsUnknown(e)?ct.True:ct.False}s(a_t,"FromUnknown");function c_t(t,e){return Le.IsUndefined(t)||Le.IsUndefined(t)?ct.True:ct.False}s(c_t,"FromVoidRight");function l_t(t,e){return Le.IsIntersect(e)?Oj(t,e):Le.IsUnion(e)?Vfe(t,e):Le.IsUnknown(e)?wNe(t,e):Le.IsAny(e)?Gfe(t,e):Le.IsObject(e)?Id(t,e):Le.IsVoid(e)?ct.True:ct.False}s(l_t,"FromVoid");function cs(t,e){return Le.IsTemplateLiteral(t)||Le.IsTemplateLiteral(e)?e_t(t,e):Le.IsRegExp(t)||Le.IsRegExp(e)?JSt(t,e):Le.IsNot(t)||Le.IsNot(e)?QSt(t,e):Le.IsAny(t)?TSt(t,e):Le.IsArray(t)?SSt(t,e):Le.IsBigInt(t)?RSt(t,e):Le.IsBoolean(t)?kSt(t,e):Le.IsAsyncIterator(t)?_St(t,e):Le.IsConstructor(t)?PSt(t,e):Le.IsDate(t)?DSt(t,e):Le.IsFunction(t)?BSt(t,e):Le.IsInteger(t)?NSt(t,e):Le.IsIntersect(t)?MSt(t,e):Le.IsIterator(t)?LSt(t,e):Le.IsLiteral(t)?FSt(t,e):Le.IsNever(t)?OSt(t,e):Le.IsNull(t)?USt(t,e):Le.IsNumber(t)?qSt(t,e):Le.IsObject(t)?zSt(t,e):Le.IsRecord(t)?KSt(t,e):Le.IsString(t)?XSt(t,e):Le.IsSymbol(t)?ZSt(t,e):Le.IsTuple(t)?n_t(t,e):Le.IsPromise(t)?YSt(t,e):Le.IsUint8Array(t)?i_t(t,e):Le.IsUndefined(t)?o_t(t,e):Le.IsUnion(t)?s_t(t,e):Le.IsUnknown(t)?a_t(t,e):Le.IsVoid(t)?l_t(t,e):W4(`Unknown left type operand '${t[ot]}'`)}s(cs,"Visit");function EI(t,e){return cs(t,e)}s(EI,"ExtendsCheck");d();d();d();function u_t(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=j4(t[a],e,r,n,zs(i));return o}s(u_t,"FromProperties");function d_t(t,e,r,n,i){return u_t(t.properties,e,r,n,i)}s(d_t,"FromMappedResult");function SNe(t,e,r,n,i){let o=d_t(t,e,r,n,i);return To(o)}s(SNe,"ExtendsFromMappedResult");function f_t(t,e,r,n){let i=EI(t,e);return i===ct.Union?Qo([r,n]):i===ct.True?r:n}s(f_t,"ExtendsResolve");function j4(t,e,r,n,i){return Ks(t)?SNe(t,e,r,n,i):up(t)?at(_Ne(t,e,r,n,i)):at(f_t(t,e,r,n),i)}s(j4,"Extends");function p_t(t,e,r,n,i){return{[t]:j4(ao(t),e,r,n,zs(i))}}s(p_t,"FromPropertyKey");function m_t(t,e,r,n,i){return t.reduce((o,a)=>({...o,...p_t(a,e,r,n,i)}),{})}s(m_t,"FromPropertyKeys");function h_t(t,e,r,n,i){return m_t(t.keys,e,r,n,i)}s(h_t,"FromMappedKey");function _Ne(t,e,r,n,i){let o=h_t(t,e,r,n,i);return To(o)}s(_Ne,"ExtendsFromMappedKey");d();function g_t(t){return t.allOf.every(e=>qv(e))}s(g_t,"Intersect");function A_t(t){return t.anyOf.some(e=>qv(e))}s(A_t,"Union");function y_t(t){return!qv(t.not)}s(y_t,"Not");function qv(t){return t[ot]==="Intersect"?g_t(t):t[ot]==="Union"?A_t(t):t[ot]==="Not"?y_t(t):t[ot]==="Undefined"}s(qv,"ExtendsUndefinedCheck");d();function RNe(t,e){return G4(z_(t),e)}s(RNe,"ExcludeFromTemplateLiteral");function C_t(t,e){let r=t.filter(n=>EI(n,e)===ct.False);return r.length===1?r[0]:Qo(r)}s(C_t,"ExcludeRest");function G4(t,e,r={}){return dp(t)?at(RNe(t,e),r):Ks(t)?at(kNe(t,e),r):at(Co(t)?C_t(t.anyOf,e):EI(t,e)!==ct.False?xi():t,r)}s(G4,"Exclude");function v_t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=G4(t[n],e);return r}s(v_t,"FromProperties");function x_t(t,e){return v_t(t.properties,e)}s(x_t,"FromMappedResult");function kNe(t,e){let r=x_t(t,e);return To(r)}s(kNe,"ExcludeFromMappedResult");d();d();d();function PNe(t,e){return V4(z_(t),e)}s(PNe,"ExtractFromTemplateLiteral");function E_t(t,e){let r=t.filter(n=>EI(n,e)!==ct.False);return r.length===1?r[0]:Qo(r)}s(E_t,"ExtractRest");function V4(t,e,r){return dp(t)?at(PNe(t,e),r):Ks(t)?at(DNe(t,e),r):at(Co(t)?E_t(t.anyOf,e):EI(t,e)!==ct.False?t:xi(),r)}s(V4,"Extract");function b_t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=V4(t[n],e);return r}s(b_t,"FromProperties");function I_t(t,e){return b_t(t.properties,e)}s(I_t,"FromMappedResult");function DNe(t,e){let r=I_t(t,e);return To(r)}s(DNe,"ExtractFromMappedResult");d();function BNe(t,e){return Kg(t)?at(t.returns,e):xi(e)}s(BNe,"InstanceType");d();d();function Uj(t){return t0(Ed(t))}s(Uj,"ReadonlyOptional");d();function Y_(t,e,r){return at({[ot]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(Y_,"RecordCreateFromPattern");function zfe(t,e,r){let n={};for(let i of t)n[i]=e;return Uo(n,{...r,[Qm]:"Record"})}s(zfe,"RecordCreateFromKeys");function T_t(t,e,r){return wj(t)?zfe(e0(t),e,r):Y_(t.pattern,e,r)}s(T_t,"FromTemplateLiteralKey");function w_t(t,e,r){return zfe(e0(Qo(t)),e,r)}s(w_t,"FromUnionKey");function S_t(t,e,r){return zfe([t.toString()],e,r)}s(S_t,"FromLiteralKey");function __t(t,e,r){return Y_(t.source,e,r)}s(__t,"FromRegExpKey");function R_t(t,e,r){let n=_c(t.pattern)?nC:t.pattern;return Y_(n,e,r)}s(R_t,"FromStringKey");function k_t(t,e,r){return Y_(nC,e,r)}s(k_t,"FromAnyKey");function P_t(t,e,r){return Y_(H3e,e,r)}s(P_t,"FromNeverKey");function D_t(t,e,r){return Uo({true:e,false:e},r)}s(D_t,"FromBooleanKey");function B_t(t,e,r){return Y_(rC,e,r)}s(B_t,"FromIntegerKey");function N_t(t,e,r){return Y_(rC,e,r)}s(N_t,"FromNumberKey");function qj(t,e,r={}){return Co(t)?w_t(t.anyOf,e,r):dp(t)?T_t(t,e,r):lp(t)?S_t(t.const,e,r):Mv(t)?D_t(t,e,r):Xg(t)?B_t(t,e,r):Zg(t)?N_t(t,e,r):Sfe(t)?__t(t,e,r):Lv(t)?R_t(t,e,r):Tfe(t)?k_t(t,e,r):yI(t)?P_t(t,e,r):xi(r)}s(qj,"Record");function Hj(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(Hj,"RecordPattern");function NNe(t){let e=Hj(t);return e===nC?cf():e===rC?Um():cf({pattern:e})}s(NNe,"RecordKey");function $j(t){return t.patternProperties[Hj(t)]}s($j,"RecordValue");function M_t(t,e){return e.parameters=j9(t,e.parameters),e.returns=rA(t,e.returns),e}s(M_t,"FromConstructor");function L_t(t,e){return e.parameters=j9(t,e.parameters),e.returns=rA(t,e.returns),e}s(L_t,"FromFunction");function F_t(t,e){return e.allOf=j9(t,e.allOf),e}s(F_t,"FromIntersect");function O_t(t,e){return e.anyOf=j9(t,e.anyOf),e}s(O_t,"FromUnion");function Q_t(t,e){return _c(e.items)||(e.items=j9(t,e.items)),e}s(Q_t,"FromTuple");function U_t(t,e){return e.items=rA(t,e.items),e}s(U_t,"FromArray");function q_t(t,e){return e.items=rA(t,e.items),e}s(q_t,"FromAsyncIterator");function H_t(t,e){return e.items=rA(t,e.items),e}s(H_t,"FromIterator");function $_t(t,e){return e.item=rA(t,e.item),e}s($_t,"FromPromise");function W_t(t,e){let r=z_t(t,e.properties);return{...e,...Uo(r)}}s(W_t,"FromObject");function j_t(t,e){let r=rA(t,NNe(e)),n=rA(t,$j(e)),i=qj(r,n);return{...e,...i}}s(j_t,"FromRecord");function G_t(t,e){return e.index in t?t[e.index]:tA()}s(G_t,"FromArgument");function V_t(t,e){let r=P4(e),n=Zf(e),i=rA(t,e);return r&&n?Uj(i):r&&!n?t0(i):!r&&n?Ed(i):i}s(V_t,"FromProperty");function z_t(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:V_t(t,e[n])}),{})}s(z_t,"FromProperties");function j9(t,e){return e.map(r=>rA(t,r))}s(j9,"FromTypes");function rA(t,e){return Kg(e)?M_t(t,e):Jg(e)?L_t(t,e):Oa(e)?F_t(t,e):Co(e)?O_t(t,e):fp(e)?Q_t(t,e):zg(e)?U_t(t,e):H_(e)?q_t(t,e):W_(e)?H_t(t,e):j_(e)?$_t(t,e):Rc(e)?W_t(t,e):G_(e)?j_t(t,e):wfe(e)?G_t(t,e):e}s(rA,"FromType");function MNe(t,e){return rA(e,R4(t))}s(MNe,"Instantiate");d();function LNe(t){return at({[ot]:"Integer",type:"integer"},t)}s(LNe,"Integer");d();d();d();function Y_t(t,e,r){return{[t]:nA(ao(t),e,zs(r))}}s(Y_t,"MappedIntrinsicPropertyKey");function K_t(t,e,r){return t.reduce((i,o)=>({...i,...Y_t(o,e,r)}),{})}s(K_t,"MappedIntrinsicPropertyKeys");function J_t(t,e,r){return K_t(t.keys,e,r)}s(J_t,"MappedIntrinsicProperties");function FNe(t,e,r){let n=J_t(t,e,r);return To(n)}s(FNe,"IntrinsicFromMappedKey");function X_t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(X_t,"ApplyUncapitalize");function Z_t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(Z_t,"ApplyCapitalize");function e2t(t){return t.toUpperCase()}s(e2t,"ApplyUppercase");function t2t(t){return t.toLowerCase()}s(t2t,"ApplyLowercase");function r2t(t,e,r){let n=O4(t.pattern);if(!V_(n))return{...t,pattern:ONe(t.pattern,e)};let a=[...q9(n)].map(u=>ao(u)),c=QNe(a,e),l=Qo(c);return _j([l],r)}s(r2t,"FromTemplateLiteral");function ONe(t,e){return typeof t=="string"?e==="Uncapitalize"?X_t(t):e==="Capitalize"?Z_t(t):e==="Uppercase"?e2t(t):e==="Lowercase"?t2t(t):t:t.toString()}s(ONe,"FromLiteralValue");function QNe(t,e){return t.map(r=>nA(r,e))}s(QNe,"FromRest");function nA(t,e,r={}){return up(t)?FNe(t,e,r):dp(t)?r2t(t,e,r):Co(t)?Qo(QNe(t.anyOf,e),r):lp(t)?ao(ONe(t.const,e),r):at(t,r)}s(nA,"Intrinsic");function UNe(t,e={}){return nA(t,"Capitalize",e)}s(UNe,"Capitalize");d();function qNe(t,e={}){return nA(t,"Lowercase",e)}s(qNe,"Lowercase");d();function HNe(t,e={}){return nA(t,"Uncapitalize",e)}s(HNe,"Uncapitalize");d();function $Ne(t,e={}){return nA(t,"Uppercase",e)}s($Ne,"Uppercase");d();d();d();d();d();function n2t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=bI(t[i],e,zs(r));return n}s(n2t,"FromProperties");function i2t(t,e,r){return n2t(t.properties,e,r)}s(i2t,"FromMappedResult");function WNe(t,e,r){let n=i2t(t,e,r);return To(n)}s(WNe,"OmitFromMappedResult");function o2t(t,e){return t.map(r=>Yfe(r,e))}s(o2t,"FromIntersect");function s2t(t,e){return t.map(r=>Yfe(r,e))}s(s2t,"FromUnion");function a2t(t,e){let{[e]:r,...n}=t;return n}s(a2t,"FromProperty");function c2t(t,e){return e.reduce((r,n)=>a2t(r,n),t)}s(c2t,"FromProperties");function l2t(t,e){let r=Qa(t,[Ea,"$id","required","properties"]),n=c2t(t.properties,e);return Uo(n,r)}s(l2t,"FromObject");function u2t(t){let e=t.reduce((r,n)=>bj(n)?[...r,ao(n)]:r,[]);return Qo(e)}s(u2t,"UnionFromPropertyKeys");function Yfe(t,e){return Oa(t)?bd(o2t(t.allOf,e)):Co(t)?Qo(s2t(t.anyOf,e)):Rc(t)?l2t(t,e):Uo({})}s(Yfe,"OmitResolve");function bI(t,e,r){let n=Sc(e)?u2t(e):e,i=ba(e)?e0(e):e,o=ec(t),a=ec(e);return Ks(t)?WNe(t,i,r):up(e)?jNe(t,e,r):o&&a?Ns("Omit",[t,n],r):!o&&a?Ns("Omit",[t,n],r):o&&!a?Ns("Omit",[t,n],r):at({...Yfe(t,i),...r})}s(bI,"Omit");function d2t(t,e,r){return{[e]:bI(t,[e],zs(r))}}s(d2t,"FromPropertyKey");function f2t(t,e,r){return e.reduce((n,i)=>({...n,...d2t(t,i,r)}),{})}s(f2t,"FromPropertyKeys");function p2t(t,e,r){return f2t(t,e.keys,r)}s(p2t,"FromMappedKey");function jNe(t,e,r){let n=p2t(t,e,r);return To(n)}s(jNe,"OmitFromMappedKey");d();d();d();function m2t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=II(t[i],e,zs(r));return n}s(m2t,"FromProperties");function h2t(t,e,r){return m2t(t.properties,e,r)}s(h2t,"FromMappedResult");function GNe(t,e,r){let n=h2t(t,e,r);return To(n)}s(GNe,"PickFromMappedResult");function g2t(t,e){return t.map(r=>Kfe(r,e))}s(g2t,"FromIntersect");function A2t(t,e){return t.map(r=>Kfe(r,e))}s(A2t,"FromUnion");function y2t(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(y2t,"FromProperties");function C2t(t,e){let r=Qa(t,[Ea,"$id","required","properties"]),n=y2t(t.properties,e);return Uo(n,r)}s(C2t,"FromObject");function v2t(t){let e=t.reduce((r,n)=>bj(n)?[...r,ao(n)]:r,[]);return Qo(e)}s(v2t,"UnionFromPropertyKeys");function Kfe(t,e){return Oa(t)?bd(g2t(t.allOf,e)):Co(t)?Qo(A2t(t.anyOf,e)):Rc(t)?C2t(t,e):Uo({})}s(Kfe,"PickResolve");function II(t,e,r){let n=Sc(e)?v2t(e):e,i=ba(e)?e0(e):e,o=ec(t),a=ec(e);return Ks(t)?GNe(t,i,r):up(e)?VNe(t,e,r):o&&a?Ns("Pick",[t,n],r):!o&&a?Ns("Pick",[t,n],r):o&&!a?Ns("Pick",[t,n],r):at({...Kfe(t,i),...r})}s(II,"Pick");function x2t(t,e,r){return{[e]:II(t,[e],zs(r))}}s(x2t,"FromPropertyKey");function E2t(t,e,r){return e.reduce((n,i)=>({...n,...x2t(t,i,r)}),{})}s(E2t,"FromPropertyKeys");function b2t(t,e,r){return E2t(t,e.keys,r)}s(b2t,"FromMappedKey");function VNe(t,e,r){let n=b2t(t,e,r);return To(n)}s(VNe,"PickFromMappedKey");d();d();function I2t(t,e){return Ns("Partial",[Ns(t,e)])}s(I2t,"FromComputed");function T2t(t){return Ns("Partial",[$m(t)])}s(T2t,"FromRef");function w2t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ed(t[r]);return e}s(w2t,"FromProperties");function S2t(t){let e=Qa(t,[Ea,"$id","required","properties"]),r=w2t(t.properties);return Uo(r,e)}s(S2t,"FromObject");function zNe(t){return t.map(e=>YNe(e))}s(zNe,"FromRest");function YNe(t){return Yg(t)?I2t(t.target,t.parameters):ec(t)?T2t(t.$ref):Oa(t)?bd(zNe(t.allOf)):Co(t)?Qo(zNe(t.anyOf)):Rc(t)?S2t(t):$_(t)||Mv(t)||Xg(t)||lp(t)||N9(t)||Zg(t)||Lv(t)||M9(t)||Fv(t)?t:Uo({})}s(YNe,"PartialResolve");function z4(t,e){return Ks(t)?KNe(t,e):at({...YNe(t),...e})}s(z4,"Partial");function _2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=z4(t[n],zs(e));return r}s(_2t,"FromProperties");function R2t(t,e){return _2t(t.properties,e)}s(R2t,"FromMappedResult");function KNe(t,e){let r=R2t(t,e);return To(r)}s(KNe,"PartialFromMappedResult");d();d();function k2t(t,e){return Ns("Required",[Ns(t,e)])}s(k2t,"FromComputed");function P2t(t){return Ns("Required",[$m(t)])}s(P2t,"FromRef");function D2t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Qa(t[r],[Lu]);return e}s(D2t,"FromProperties");function B2t(t){let e=Qa(t,[Ea,"$id","required","properties"]),r=D2t(t.properties);return Uo(r,e)}s(B2t,"FromObject");function JNe(t){return t.map(e=>XNe(e))}s(JNe,"FromRest");function XNe(t){return Yg(t)?k2t(t.target,t.parameters):ec(t)?P2t(t.$ref):Oa(t)?bd(JNe(t.allOf)):Co(t)?Qo(JNe(t.anyOf)):Rc(t)?B2t(t):$_(t)||Mv(t)||Xg(t)||lp(t)||N9(t)||Zg(t)||Lv(t)||M9(t)||Fv(t)?t:Uo({})}s(XNe,"RequiredResolve");function Y4(t,e){return Ks(t)?ZNe(t,e):at({...XNe(t),...e})}s(Y4,"Required");function N2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Y4(t[n],e);return r}s(N2t,"FromProperties");function M2t(t,e){return N2t(t.properties,e)}s(M2t,"FromMappedResult");function ZNe(t,e){let r=M2t(t,e);return To(r)}s(ZNe,"RequiredFromMappedResult");function L2t(t,e){return e.map(r=>ec(r)?Jfe(t,r.$ref):pp(t,r))}s(L2t,"DereferenceParameters");function Jfe(t,e){return e in t?ec(t[e])?Jfe(t,t[e].$ref):pp(t,t[e]):xi()}s(Jfe,"Dereference");function F2t(t){return H4(t[0])}s(F2t,"FromAwaited");function O2t(t){return xI(t[0],t[1])}s(O2t,"FromIndex");function Q2t(t){return $4(t[0])}s(Q2t,"FromKeyOf");function U2t(t){return z4(t[0])}s(U2t,"FromPartial");function q2t(t){return bI(t[0],t[1])}s(q2t,"FromOmit");function H2t(t){return II(t[0],t[1])}s(H2t,"FromPick");function $2t(t){return Y4(t[0])}s($2t,"FromRequired");function W2t(t,e,r){let n=L2t(t,r);return e==="Awaited"?F2t(n):e==="Index"?O2t(n):e==="KeyOf"?Q2t(n):e==="Partial"?U2t(n):e==="Omit"?q2t(n):e==="Pick"?H2t(n):e==="Required"?$2t(n):xi()}s(W2t,"FromComputed");function j2t(t,e){return N4(pp(t,e))}s(j2t,"FromArray");function G2t(t,e){return M4(pp(t,e))}s(G2t,"FromAsyncIterator");function V2t(t,e,r){return L4(G9(t,e),pp(t,r))}s(V2t,"FromConstructor");function z2t(t,e,r){return iC(G9(t,e),pp(t,r))}s(z2t,"FromFunction");function Y2t(t,e){return bd(G9(t,e))}s(Y2t,"FromIntersect");function K2t(t,e){return q4(pp(t,e))}s(K2t,"FromIterator");function J2t(t,e){return Uo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:pp(t,e[n])}),{}))}s(J2t,"FromObject");function X2t(t,e){let[r,n]=[pp(t,$j(e)),Hj(e)],i=R4(e);return i.patternProperties[n]=r,i}s(X2t,"FromRecord");function Z2t(t,e){return ec(e)?{...Jfe(t,e.$ref),[Ea]:e[Ea]}:e}s(Z2t,"FromTransform");function eRt(t,e){return qm(G9(t,e))}s(eRt,"FromTuple");function tRt(t,e){return Qo(G9(t,e))}s(tRt,"FromUnion");function G9(t,e){return e.map(r=>pp(t,r))}s(G9,"FromTypes");function pp(t,e){return Zf(e)?at(pp(t,Qa(e,[Lu])),e):P4(e)?at(pp(t,Qa(e,[Vg])),e):Oo(e)?at(Z2t(t,e),e):zg(e)?at(j2t(t,e.items),e):H_(e)?at(G2t(t,e.items),e):Yg(e)?at(W2t(t,e.target,e.parameters)):Kg(e)?at(V2t(t,e.parameters,e.returns),e):Jg(e)?at(z2t(t,e.parameters,e.returns),e):Oa(e)?at(Y2t(t,e.allOf),e):W_(e)?at(K2t(t,e.items),e):Rc(e)?at(J2t(t,e.properties),e):G_(e)?at(X2t(t,e)):fp(e)?at(eRt(t,e.items||[]),e):Co(e)?at(tRt(t,e.anyOf),e):e}s(pp,"FromType");function rRt(t,e){return e in t?pp(t,t[e]):xi()}s(rRt,"ComputeType");function e8e(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:rRt(t,r)}),{})}s(e8e,"ComputeModuleProperties");var Xfe=class{static{s(this,"TModule")}constructor(e){let r=e8e(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:at(this.$defs[e],r)};return at({[ot]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function t8e(t){return new Xfe(t)}s(t8e,"Module");d();function r8e(t,e){return at({[ot]:"Not",not:t},e)}s(r8e,"Not");d();function n8e(t,e){return Jg(t)?qm(t.parameters,e):xi()}s(n8e,"Parameters");d();var nRt=0;function i8e(t,e={}){_c(e.$id)&&(e.$id=`T${nRt++}`);let r=R4(t({[ot]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,at({[Qm]:"Recursive",...r},e)}s(i8e,"Recursive");d();function o8e(t,e){let r=Is(t)?new globalThis.RegExp(t):t;return at({[ot]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(o8e,"RegExp");d();function iRt(t){return Oa(t)?t.allOf:Co(t)?t.anyOf:fp(t)?t.items??[]:[]}s(iRt,"RestResolve");function s8e(t){return iRt(t)}s(s8e,"Rest");d();function a8e(t,e){return Jg(t)?at(t.returns,e):xi(e)}s(a8e,"ReturnType");d();var Zfe=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new e0e(this.schema,e)}},e0e=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Ea].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Ea].Decode(a)),"Decode")};return{...r,[Ea]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ea]:n}}Encode(e){return Oo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function c8e(t){return new Zfe(t)}s(c8e,"Transform");d();function l8e(t={}){return at({[ot]:t[ot]??"Unsafe"},t)}s(l8e,"Unsafe");d();function u8e(t){return at({[ot]:"Void",type:"void"},t)}s(u8e,"Void");d();var t0e={};Ca(t0e,{Any:()=>vI,Argument:()=>V3e,Array:()=>N4,AsyncIterator:()=>M4,Awaited:()=>H4,BigInt:()=>U4,Boolean:()=>Sj,Capitalize:()=>UNe,Composite:()=>fNe,Const:()=>pNe,Constructor:()=>L4,ConstructorParameters:()=>mNe,Date:()=>Dj,Enum:()=>hNe,Exclude:()=>G4,Extends:()=>j4,Extract:()=>V4,Function:()=>iC,Index:()=>xI,InstanceType:()=>BNe,Instantiate:()=>MNe,Integer:()=>LNe,Intersect:()=>bd,Iterator:()=>q4,KeyOf:()=>$4,Literal:()=>ao,Lowercase:()=>qNe,Mapped:()=>sNe,Module:()=>t8e,Never:()=>xi,Not:()=>r8e,Null:()=>Bj,Number:()=>Um,Object:()=>Uo,Omit:()=>bI,Optional:()=>Ed,Parameters:()=>n8e,Partial:()=>z4,Pick:()=>II,Promise:()=>kj,Readonly:()=>t0,ReadonlyOptional:()=>Uj,Record:()=>qj,Recursive:()=>i8e,Ref:()=>$m,RegExp:()=>o8e,Required:()=>Y4,Rest:()=>s8e,ReturnType:()=>a8e,String:()=>cf,Symbol:()=>Nj,TemplateLiteral:()=>_j,Transform:()=>c8e,Tuple:()=>qm,Uint8Array:()=>Lj,Uncapitalize:()=>HNe,Undefined:()=>Mj,Union:()=>Qo,Unknown:()=>tA,Unsafe:()=>l8e,Uppercase:()=>$Ne,Void:()=>u8e});d();var x=t0e;d();d();function oRt(t){switch(t.errorType){case nt.ArrayContains:return"Expected array to contain at least one matching value";case nt.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case nt.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case nt.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case nt.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case nt.ArrayUniqueItems:return"Expected array elements to be unique";case nt.Array:return"Expected array";case nt.AsyncIterator:return"Expected AsyncIterator";case nt.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case nt.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case nt.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case nt.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case nt.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case nt.BigInt:return"Expected bigint";case nt.Boolean:return"Expected boolean";case nt.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case nt.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case nt.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case nt.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case nt.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case nt.Date:return"Expected Date";case nt.Function:return"Expected function";case nt.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case nt.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case nt.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case nt.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case nt.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case nt.Integer:return"Expected integer";case nt.IntersectUnevaluatedProperties:return"Unexpected property";case nt.Intersect:return"Expected all values to match";case nt.Iterator:return"Expected Iterator";case nt.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case nt.Never:return"Never";case nt.Not:return"Value should not match";case nt.Null:return"Expected null";case nt.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case nt.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case nt.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case nt.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case nt.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case nt.Number:return"Expected number";case nt.Object:return"Expected object";case nt.ObjectAdditionalProperties:return"Unexpected property";case nt.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case nt.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case nt.ObjectRequiredProperty:return"Expected required property";case nt.Promise:return"Expected Promise";case nt.RegExp:return"Expected string to match regular expression";case nt.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case nt.StringFormat:return`Expected string to match '${t.schema.format}' format`;case nt.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case nt.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case nt.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case nt.String:return"Expected string";case nt.Symbol:return"Expected symbol";case nt.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case nt.Tuple:return"Expected tuple";case nt.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case nt.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case nt.Uint8Array:return"Expected Uint8Array";case nt.Undefined:return"Expected undefined";case nt.Union:return"Expected union value";case nt.Void:return"Expected void";case nt.Kind:return`Expected kind '${t.schema[ot]}'`;default:return"Unknown error type"}}s(oRt,"DefaultErrorFunction");var sRt=oRt;function d8e(){return sRt}s(d8e,"GetErrorFunction");d();var r0e=class extends Dn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function aRt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new r0e(t);return wo(r,e)}s(aRt,"Resolve");function Kl(t,e){return!yo(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Kl,"Pushref");function wo(t,e){return t[ot]==="This"||t[ot]==="Ref"?aRt(t,e):t}s(wo,"Deref");d();var n0e=class extends Dn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},mp;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(mp||(mp={}));var K4=BigInt("14695981039346656037"),[cRt,lRt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],uRt=Array.from({length:256}).map((t,e)=>BigInt(e)),f8e=new Float64Array(1),p8e=new DataView(f8e.buffer),m8e=new Uint8Array(f8e.buffer);function*dRt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(dRt,"NumberToBytes");function fRt(t){Td(mp.Array);for(let e of t)J4(e)}s(fRt,"ArrayType");function pRt(t){Td(mp.Boolean),Td(t?1:0)}s(pRt,"BooleanType");function mRt(t){Td(mp.BigInt),p8e.setBigInt64(0,t);for(let e of m8e)Td(e)}s(mRt,"BigIntType");function hRt(t){Td(mp.Date),J4(t.getTime())}s(hRt,"DateType");function gRt(t){Td(mp.Null)}s(gRt,"NullType");function ARt(t){Td(mp.Number),p8e.setFloat64(0,t);for(let e of m8e)Td(e)}s(ARt,"NumberType");function yRt(t){Td(mp.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())J4(e),J4(t[e])}s(yRt,"ObjectType");function CRt(t){Td(mp.String);for(let e=0;e<t.length;e++)for(let r of dRt(t.charCodeAt(e)))Td(r)}s(CRt,"StringType");function vRt(t){Td(mp.Symbol),J4(t.description)}s(vRt,"SymbolType");function xRt(t){Td(mp.Uint8Array);for(let e=0;e<t.length;e++)Td(t[e])}s(xRt,"Uint8ArrayType");function ERt(t){return Td(mp.Undefined)}s(ERt,"UndefinedType");function J4(t){if(Pn(t))return fRt(t);if(tC(t))return pRt(t);if(Mu(t))return mRt(t);if(sf(t))return hRt(t);if(Bv(t))return gRt(t);if(cn(t))return ARt(t);if(Si(t))return yRt(t);if(yo(t))return CRt(t);if(Nv(t))return vRt(t);if(k4(t))return xRt(t);if(Ys(t))return ERt(t);throw new n0e(t)}s(J4,"Visit");function Td(t){K4=K4^uRt[t],K4=K4*cRt%lRt}s(Td,"FNV1A64");function TI(t){return K4=BigInt("14695981039346656037"),J4(t),K4}s(TI,"Hash");d();var i0e=class extends Dn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function bRt(t){return t[ot]==="Any"||t[ot]==="Unknown"}s(bRt,"IsAnyOrUnknown");function ji(t){return t!==void 0}s(ji,"IsDefined");function IRt(t,e,r){return!0}s(IRt,"FromAny");function TRt(t,e,r){return!0}s(TRt,"FromArgument");function wRt(t,e,r){if(!Pn(r)||ji(t.minItems)&&!(r.length>=t.minItems)||ji(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Jl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=TI(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(ji(t.contains)||cn(t.minContains)||cn(t.maxContains)))return!0;let n=ji(t.contains)?t.contains:xi(),i=r.reduce((o,a)=>Jl(n,e,a)?o+1:o,0);return!(i===0||cn(t.minContains)&&i<t.minContains||cn(t.maxContains)&&i>t.maxContains)}s(wRt,"FromArray");function SRt(t,e,r){return Cj(r)}s(SRt,"FromAsyncIterator");function _Rt(t,e,r){return!(!Mu(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(_Rt,"FromBigInt");function RRt(t,e,r){return tC(r)}s(RRt,"FromBoolean");function kRt(t,e,r){return Jl(t.returns,e,r.prototype)}s(kRt,"FromConstructor");function PRt(t,e,r){return!(!sf(r)||ji(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||ji(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||ji(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||ji(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||ji(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(PRt,"FromDate");function DRt(t,e,r){return AI(r)}s(DRt,"FromFunction");function BRt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Jl(i,[...e,...n],r)}s(BRt,"FromImport");function NRt(t,e,r){return!(!Ej(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.multipleOf)&&r%t.multipleOf!==0)}s(NRt,"FromInteger");function MRt(t,e,r){let n=t.allOf.every(i=>Jl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(Uv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(ba(t.unevaluatedProperties)){let i=new RegExp(Uv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Jl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(MRt,"FromIntersect");function LRt(t,e,r){return vj(r)}s(LRt,"FromIterator");function FRt(t,e,r){return r===t.const}s(FRt,"FromLiteral");function ORt(t,e,r){return!1}s(ORt,"FromNever");function QRt(t,e,r){return!Jl(t.not,e,r)}s(QRt,"FromNot");function URt(t,e,r){return Bv(r)}s(URt,"FromNull");function qRt(t,e,r){return!(!Bs.IsNumberLike(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.multipleOf)&&r%t.multipleOf!==0)}s(qRt,"FromNumber");function HRt(t,e,r){if(!Bs.IsObjectLike(r)||ji(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||ji(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Jl(o,e,r[i])||(qv(o)||bRt(o))&&!(i in r))return!1}else if(Bs.IsExactOptionalProperty(r,i)&&!Jl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Jl(t.additionalProperties,e,r[o])):!0}s(HRt,"FromObject");function $Rt(t,e,r){return xj(r)}s($Rt,"FromPromise");function WRt(t,e,r){if(!Bs.IsRecordLike(r)||ji(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||ji(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?Jl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:Jl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(WRt,"FromRecord");function jRt(t,e,r){return Jl(wo(t,e),e,r)}s(jRt,"FromRef");function GRt(t,e,r){let n=new RegExp(t.source,t.flags);return ji(t.minLength)&&!(r.length>=t.minLength)||ji(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(GRt,"FromRegExp");function VRt(t,e,r){return!yo(r)||ji(t.minLength)&&!(r.length>=t.minLength)||ji(t.maxLength)&&!(r.length<=t.maxLength)||ji(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:ji(t.format)?eA.Has(t.format)?eA.Get(t.format)(r):!1:!0}s(VRt,"FromString");function zRt(t,e,r){return Nv(r)}s(zRt,"FromSymbol");function YRt(t,e,r){return yo(r)&&new RegExp(t.pattern).test(r)}s(YRt,"FromTemplateLiteral");function KRt(t,e,r){return Jl(wo(t,e),e,r)}s(KRt,"FromThis");function JRt(t,e,r){if(!Pn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Jl(t.items[n],e,r[n]))return!1;return!0}s(JRt,"FromTuple");function XRt(t,e,r){return Ys(r)}s(XRt,"FromUndefined");function ZRt(t,e,r){return t.anyOf.some(n=>Jl(n,e,r))}s(ZRt,"FromUnion");function ekt(t,e,r){return!(!k4(r)||ji(t.maxByteLength)&&!(r.length<=t.maxByteLength)||ji(t.minByteLength)&&!(r.length>=t.minByteLength))}s(ekt,"FromUint8Array");function tkt(t,e,r){return!0}s(tkt,"FromUnknown");function rkt(t,e,r){return Bs.IsVoidLike(r)}s(rkt,"FromVoid");function nkt(t,e,r){return af.Has(t[ot])?af.Get(t[ot])(t,r):!1}s(nkt,"FromKind");function Jl(t,e,r){let n=ji(t.$id)?Kl(t,e):e,i=t;switch(i[ot]){case"Any":return IRt(i,n,r);case"Argument":return TRt(i,n,r);case"Array":return wRt(i,n,r);case"AsyncIterator":return SRt(i,n,r);case"BigInt":return _Rt(i,n,r);case"Boolean":return RRt(i,n,r);case"Constructor":return kRt(i,n,r);case"Date":return PRt(i,n,r);case"Function":return DRt(i,n,r);case"Import":return BRt(i,n,r);case"Integer":return NRt(i,n,r);case"Intersect":return MRt(i,n,r);case"Iterator":return LRt(i,n,r);case"Literal":return FRt(i,n,r);case"Never":return ORt(i,n,r);case"Not":return QRt(i,n,r);case"Null":return URt(i,n,r);case"Number":return qRt(i,n,r);case"Object":return HRt(i,n,r);case"Promise":return $Rt(i,n,r);case"Record":return WRt(i,n,r);case"Ref":return jRt(i,n,r);case"RegExp":return GRt(i,n,r);case"String":return VRt(i,n,r);case"Symbol":return zRt(i,n,r);case"TemplateLiteral":return YRt(i,n,r);case"This":return KRt(i,n,r);case"Tuple":return JRt(i,n,r);case"Undefined":return XRt(i,n,r);case"Union":return ZRt(i,n,r);case"Uint8Array":return ekt(i,n,r);case"Unknown":return tkt(i,n,r);case"Void":return rkt(i,n,r);default:if(!af.Has(i[ot]))throw new i0e(i);return nkt(i,n,r)}}s(Jl,"Visit");function ki(...t){return t.length===3?Jl(t[0],t[1],t[2]):Jl(t[0],[],t[1])}s(ki,"Check");var nt;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(nt||(nt={}));var o0e=class extends Dn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function Hv(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(Hv,"EscapeKey");function Gi(t){return t!==void 0}s(Gi,"IsDefined");var wI=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function fr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:d8e()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(fr,"Create");function*ikt(t,e,r,n){}s(ikt,"FromAny");function*okt(t,e,r,n){}s(okt,"FromArgument");function*skt(t,e,r,n){if(!Pn(n))return yield fr(nt.Array,t,r,n);Gi(t.minItems)&&!(n.length>=t.minItems)&&(yield fr(nt.ArrayMinItems,t,r,n)),Gi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield fr(nt.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Xl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=TI(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield fr(nt.ArrayUniqueItems,t,r,n)),!(Gi(t.contains)||Gi(t.minContains)||Gi(t.maxContains)))return;let i=Gi(t.contains)?t.contains:xi(),o=n.reduce((a,c,l)=>Xl(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield fr(nt.ArrayContains,t,r,n)),cn(t.minContains)&&o<t.minContains&&(yield fr(nt.ArrayMinContains,t,r,n)),cn(t.maxContains)&&o>t.maxContains&&(yield fr(nt.ArrayMaxContains,t,r,n))}s(skt,"FromArray");function*akt(t,e,r,n){Cj(n)||(yield fr(nt.AsyncIterator,t,r,n))}s(akt,"FromAsyncIterator");function*ckt(t,e,r,n){if(!Mu(n))return yield fr(nt.BigInt,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.BigIntExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.BigIntExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.BigIntMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.BigIntMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield fr(nt.BigIntMultipleOf,t,r,n))}s(ckt,"FromBigInt");function*lkt(t,e,r,n){tC(n)||(yield fr(nt.Boolean,t,r,n))}s(lkt,"FromBoolean");function*ukt(t,e,r,n){yield*Xl(t.returns,e,r,n.prototype)}s(ukt,"FromConstructor");function*dkt(t,e,r,n){if(!sf(n))return yield fr(nt.Date,t,r,n);Gi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield fr(nt.DateExclusiveMaximumTimestamp,t,r,n)),Gi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield fr(nt.DateExclusiveMinimumTimestamp,t,r,n)),Gi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield fr(nt.DateMaximumTimestamp,t,r,n)),Gi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield fr(nt.DateMinimumTimestamp,t,r,n)),Gi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield fr(nt.DateMultipleOfTimestamp,t,r,n))}s(dkt,"FromDate");function*fkt(t,e,r,n){AI(n)||(yield fr(nt.Function,t,r,n))}s(fkt,"FromFunction");function*pkt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Xl(o,[...e,...i],r,n)}s(pkt,"FromImport");function*mkt(t,e,r,n){if(!Ej(n))return yield fr(nt.Integer,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.IntegerExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.IntegerExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.IntegerMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.IntegerMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==0&&(yield fr(nt.IntegerMultipleOf,t,r,n))}s(mkt,"FromInteger");function*hkt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Xl(o,e,r,n))i=!0,yield a;if(i)return yield fr(nt.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(Uv(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield fr(nt.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(Uv(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Xl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(hkt,"FromIntersect");function*gkt(t,e,r,n){vj(n)||(yield fr(nt.Iterator,t,r,n))}s(gkt,"FromIterator");function*Akt(t,e,r,n){n!==t.const&&(yield fr(nt.Literal,t,r,n))}s(Akt,"FromLiteral");function*ykt(t,e,r,n){yield fr(nt.Never,t,r,n)}s(ykt,"FromNever");function*Ckt(t,e,r,n){Xl(t.not,e,r,n).next().done===!0&&(yield fr(nt.Not,t,r,n))}s(Ckt,"FromNot");function*vkt(t,e,r,n){Bv(n)||(yield fr(nt.Null,t,r,n))}s(vkt,"FromNull");function*xkt(t,e,r,n){if(!Bs.IsNumberLike(n))return yield fr(nt.Number,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.NumberExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.NumberExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.NumberMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.NumberMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==0&&(yield fr(nt.NumberMultipleOf,t,r,n))}s(xkt,"FromNumber");function*Ekt(t,e,r,n){if(!Bs.IsObjectLike(n))return yield fr(nt.Object,t,r,n);Gi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield fr(nt.ObjectMinProperties,t,r,n)),Gi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield fr(nt.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield fr(nt.ObjectRequiredProperty,t.properties[c],`${r}/${Hv(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield fr(nt.ObjectAdditionalProperties,t,`${r}/${Hv(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Xl(t.additionalProperties,e,`${r}/${Hv(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Xl(l,e,`${r}/${Hv(c)}`,n[c]),qv(t)&&!(c in n)&&(yield fr(nt.ObjectRequiredProperty,l,`${r}/${Hv(c)}`,void 0))):Bs.IsExactOptionalProperty(n,c)&&(yield*Xl(l,e,`${r}/${Hv(c)}`,n[c]))}}s(Ekt,"FromObject");function*bkt(t,e,r,n){xj(n)||(yield fr(nt.Promise,t,r,n))}s(bkt,"FromPromise");function*Ikt(t,e,r,n){if(!Bs.IsRecordLike(n))return yield fr(nt.Object,t,r,n);Gi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield fr(nt.ObjectMinProperties,t,r,n)),Gi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield fr(nt.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Xl(o,e,`${r}/${Hv(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Xl(t.additionalProperties,e,`${r}/${Hv(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield fr(nt.ObjectAdditionalProperties,t,`${r}/${Hv(c)}`,l)}}s(Ikt,"FromRecord");function*Tkt(t,e,r,n){yield*Xl(wo(t,e),e,r,n)}s(Tkt,"FromRef");function*wkt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);if(Gi(t.minLength)&&!(n.length>=t.minLength)&&(yield fr(nt.StringMinLength,t,r,n)),Gi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield fr(nt.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield fr(nt.RegExp,t,r,n)}s(wkt,"FromRegExp");function*Skt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);Gi(t.minLength)&&!(n.length>=t.minLength)&&(yield fr(nt.StringMinLength,t,r,n)),Gi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield fr(nt.StringMaxLength,t,r,n)),yo(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield fr(nt.StringPattern,t,r,n))),yo(t.format)&&(eA.Has(t.format)?eA.Get(t.format)(n)||(yield fr(nt.StringFormat,t,r,n)):yield fr(nt.StringFormatUnknown,t,r,n))}s(Skt,"FromString");function*_kt(t,e,r,n){Nv(n)||(yield fr(nt.Symbol,t,r,n))}s(_kt,"FromSymbol");function*Rkt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);new RegExp(t.pattern).test(n)||(yield fr(nt.StringPattern,t,r,n))}s(Rkt,"FromTemplateLiteral");function*kkt(t,e,r,n){yield*Xl(wo(t,e),e,r,n)}s(kkt,"FromThis");function*Pkt(t,e,r,n){if(!Pn(n))return yield fr(nt.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield fr(nt.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield fr(nt.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Xl(t.items[i],e,`${r}/${i}`,n[i])}s(Pkt,"FromTuple");function*Dkt(t,e,r,n){Ys(n)||(yield fr(nt.Undefined,t,r,n))}s(Dkt,"FromUndefined");function*Bkt(t,e,r,n){if(ki(t,e,n))return;let i=t.anyOf.map(o=>new wI(Xl(o,e,r,n)));yield fr(nt.Union,t,r,n,i)}s(Bkt,"FromUnion");function*Nkt(t,e,r,n){if(!k4(n))return yield fr(nt.Uint8Array,t,r,n);Gi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield fr(nt.Uint8ArrayMaxByteLength,t,r,n)),Gi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield fr(nt.Uint8ArrayMinByteLength,t,r,n))}s(Nkt,"FromUint8Array");function*Mkt(t,e,r,n){}s(Mkt,"FromUnknown");function*Lkt(t,e,r,n){Bs.IsVoidLike(n)||(yield fr(nt.Void,t,r,n))}s(Lkt,"FromVoid");function*Fkt(t,e,r,n){af.Get(t[ot])(t,n)||(yield fr(nt.Kind,t,r,n))}s(Fkt,"FromKind");function*Xl(t,e,r,n){let i=Gi(t.$id)?[...e,t]:e,o=t;switch(o[ot]){case"Any":return yield*ikt(o,i,r,n);case"Argument":return yield*okt(o,i,r,n);case"Array":return yield*skt(o,i,r,n);case"AsyncIterator":return yield*akt(o,i,r,n);case"BigInt":return yield*ckt(o,i,r,n);case"Boolean":return yield*lkt(o,i,r,n);case"Constructor":return yield*ukt(o,i,r,n);case"Date":return yield*dkt(o,i,r,n);case"Function":return yield*fkt(o,i,r,n);case"Import":return yield*pkt(o,i,r,n);case"Integer":return yield*mkt(o,i,r,n);case"Intersect":return yield*hkt(o,i,r,n);case"Iterator":return yield*gkt(o,i,r,n);case"Literal":return yield*Akt(o,i,r,n);case"Never":return yield*ykt(o,i,r,n);case"Not":return yield*Ckt(o,i,r,n);case"Null":return yield*vkt(o,i,r,n);case"Number":return yield*xkt(o,i,r,n);case"Object":return yield*Ekt(o,i,r,n);case"Promise":return yield*bkt(o,i,r,n);case"Record":return yield*Ikt(o,i,r,n);case"Ref":return yield*Tkt(o,i,r,n);case"RegExp":return yield*wkt(o,i,r,n);case"String":return yield*Skt(o,i,r,n);case"Symbol":return yield*_kt(o,i,r,n);case"TemplateLiteral":return yield*Rkt(o,i,r,n);case"This":return yield*kkt(o,i,r,n);case"Tuple":return yield*Pkt(o,i,r,n);case"Undefined":return yield*Dkt(o,i,r,n);case"Union":return yield*Bkt(o,i,r,n);case"Uint8Array":return yield*Nkt(o,i,r,n);case"Unknown":return yield*Mkt(o,i,r,n);case"Void":return yield*Lkt(o,i,r,n);default:if(!af.Has(o[ot]))throw new o0e(t);return yield*Fkt(o,i,r,n)}}s(Xl,"Visit");function sC(...t){let e=t.length===3?Xl(t[0],t[1],"",t[2]):Xl(t[0],[],"",t[1]);return new wI(e)}s(sC,"Errors");d();d();var X4=class extends Dn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},s0e=class extends Dn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Ia(t,e,r){try{return Oo(t)?t[Ea].Decode(r):r}catch(n){throw new s0e(t,e,r,n)}}s(Ia,"Default");function Okt(t,e,r,n){return Pn(n)?Ia(t,r,n.map((i,o)=>iA(t.items,e,`${r}/${o}`,i))):Ia(t,r,n)}s(Okt,"FromArray");function Qkt(t,e,r,n){if(!Si(n)||cp(n))return Ia(t,r,n);let i=Pj(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=iA(p,e,`${r}/${f}`,a[f]));if(!Oo(t.unevaluatedProperties))return Ia(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Ia(l,`${r}/${f}`,u[f]));return Ia(t,r,u)}s(Qkt,"FromIntersect");function Ukt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=iA(o,[...e,...i],r,n);return Ia(t,r,a)}s(Ukt,"FromImport");function qkt(t,e,r,n){return Ia(t,r,iA(t.not,e,r,n))}s(qkt,"FromNot");function Hkt(t,e,r,n){if(!Si(n))return Ia(t,r,n);let i=r0(t),o={...n};for(let u of i)kn(o,u)&&(Ys(o[u])&&(!Fv(t.properties[u])||Bs.IsExactOptionalProperty(o,u))||(o[u]=iA(t.properties[u],e,`${r}/${u}`,o[u])));if(!ba(t.additionalProperties))return Ia(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=Ia(c,`${r}/${u}`,l[u]));return Ia(t,r,l)}s(Hkt,"FromObject");function $kt(t,e,r,n){if(!Si(n))return Ia(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=iA(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!ba(t.additionalProperties))return Ia(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=Ia(l,`${r}/${f}`,u[f]));return Ia(t,r,u)}s($kt,"FromRecord");function Wkt(t,e,r,n){let i=wo(t,e);return Ia(t,r,iA(i,e,r,n))}s(Wkt,"FromRef");function jkt(t,e,r,n){let i=wo(t,e);return Ia(t,r,iA(i,e,r,n))}s(jkt,"FromThis");function Gkt(t,e,r,n){return Pn(n)&&Pn(t.items)?Ia(t,r,t.items.map((i,o)=>iA(i,e,`${r}/${o}`,n[o]))):Ia(t,r,n)}s(Gkt,"FromTuple");function Vkt(t,e,r,n){for(let i of t.anyOf){if(!ki(i,e,n))continue;let o=iA(i,e,r,n);return Ia(t,r,o)}return Ia(t,r,n)}s(Vkt,"FromUnion");function iA(t,e,r,n){let i=Kl(t,e),o=t;switch(t[ot]){case"Array":return Okt(o,i,r,n);case"Import":return Ukt(o,i,r,n);case"Intersect":return Qkt(o,i,r,n);case"Not":return qkt(o,i,r,n);case"Object":return Hkt(o,i,r,n);case"Record":return $kt(o,i,r,n);case"Ref":return Wkt(o,i,r,n);case"Symbol":return Ia(o,r,n);case"This":return jkt(o,i,r,n);case"Tuple":return Gkt(o,i,r,n);case"Union":return Vkt(o,i,r,n);default:return Ia(o,r,n)}}s(iA,"Visit");function Z4(t,e,r){return iA(t,e,"",r)}s(Z4,"TransformDecode");d();var eD=class extends Dn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},a0e=class extends Dn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function Fu(t,e,r){try{return Oo(t)?t[Ea].Encode(r):r}catch(n){throw new a0e(t,e,r,n)}}s(Fu,"Default");function zkt(t,e,r,n){let i=Fu(t,r,n);return Pn(i)?i.map((o,a)=>oA(t.items,e,`${r}/${a}`,o)):i}s(zkt,"FromArray");function Ykt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Fu(t,r,n);return oA(o,[...e,...i],r,a)}s(Ykt,"FromImport");function Kkt(t,e,r,n){let i=Fu(t,r,n);if(!Si(n)||cp(n))return i;let o=Pj(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=oA(m,e,`${r}/${p}`,c[p]));if(!Oo(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=Fu(u,`${r}/${p}`,f[p]));return f}s(Kkt,"FromIntersect");function Jkt(t,e,r,n){return Fu(t.not,r,Fu(t,r,n))}s(Jkt,"FromNot");function Xkt(t,e,r,n){let i=Fu(t,r,n);if(!Si(i))return i;let o=r0(t),a={...i};for(let f of o)kn(a,f)&&(Ys(a[f])&&(!Fv(t.properties[f])||Bs.IsExactOptionalProperty(a,f))||(a[f]=oA(t.properties[f],e,`${r}/${f}`,a[f])));if(!ba(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Fu(l,`${r}/${f}`,u[f]));return u}s(Xkt,"FromObject");function Zkt(t,e,r,n){let i=Fu(t,r,n);if(!Si(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=oA(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!ba(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=Fu(u,`${r}/${p}`,f[p]));return f}s(Zkt,"FromRecord");function ePt(t,e,r,n){let i=wo(t,e),o=oA(i,e,r,n);return Fu(t,r,o)}s(ePt,"FromRef");function tPt(t,e,r,n){let i=wo(t,e),o=oA(i,e,r,n);return Fu(t,r,o)}s(tPt,"FromThis");function rPt(t,e,r,n){let i=Fu(t,r,n);return Pn(t.items)?t.items.map((o,a)=>oA(o,e,`${r}/${a}`,i[a])):[]}s(rPt,"FromTuple");function nPt(t,e,r,n){for(let i of t.anyOf){if(!ki(i,e,n))continue;let o=oA(i,e,r,n);return Fu(t,r,o)}for(let i of t.anyOf){let o=oA(i,e,r,n);if(ki(t,e,o))return Fu(t,r,o)}return Fu(t,r,n)}s(nPt,"FromUnion");function oA(t,e,r,n){let i=Kl(t,e),o=t;switch(t[ot]){case"Array":return zkt(o,i,r,n);case"Import":return Ykt(o,i,r,n);case"Intersect":return Kkt(o,i,r,n);case"Not":return Jkt(o,i,r,n);case"Object":return Xkt(o,i,r,n);case"Record":return Zkt(o,i,r,n);case"Ref":return ePt(o,i,r,n);case"This":return tPt(o,i,r,n);case"Tuple":return rPt(o,i,r,n);case"Union":return nPt(o,i,r,n);default:return Fu(o,r,n)}}s(oA,"Visit");function tD(t,e,r){return oA(t,e,"",r)}s(tD,"TransformEncode");d();function iPt(t,e){return Oo(t)||_l(t.items,e)}s(iPt,"FromArray");function oPt(t,e){return Oo(t)||_l(t.items,e)}s(oPt,"FromAsyncIterator");function sPt(t,e){return Oo(t)||_l(t.returns,e)||t.parameters.some(r=>_l(r,e))}s(sPt,"FromConstructor");function aPt(t,e){return Oo(t)||_l(t.returns,e)||t.parameters.some(r=>_l(r,e))}s(aPt,"FromFunction");function cPt(t,e){return Oo(t)||Oo(t.unevaluatedProperties)||t.allOf.some(r=>_l(r,e))}s(cPt,"FromIntersect");function lPt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Oo(t)||_l(n,[...r,...e])}s(lPt,"FromImport");function uPt(t,e){return Oo(t)||_l(t.items,e)}s(uPt,"FromIterator");function dPt(t,e){return Oo(t)||_l(t.not,e)}s(dPt,"FromNot");function fPt(t,e){return Oo(t)||Object.values(t.properties).some(r=>_l(r,e))||ba(t.additionalProperties)&&_l(t.additionalProperties,e)}s(fPt,"FromObject");function pPt(t,e){return Oo(t)||_l(t.item,e)}s(pPt,"FromPromise");function mPt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Oo(t)||_l(n,e)||ba(t.additionalProperties)&&Oo(t.additionalProperties)}s(mPt,"FromRecord");function hPt(t,e){return Oo(t)?!0:_l(wo(t,e),e)}s(hPt,"FromRef");function gPt(t,e){return Oo(t)?!0:_l(wo(t,e),e)}s(gPt,"FromThis");function APt(t,e){return Oo(t)||!Ys(t.items)&&t.items.some(r=>_l(r,e))}s(APt,"FromTuple");function yPt(t,e){return Oo(t)||t.anyOf.some(r=>_l(r,e))}s(yPt,"FromUnion");function _l(t,e){let r=Kl(t,e),n=t;if(t.$id&&c0e.has(t.$id))return!1;switch(t.$id&&c0e.add(t.$id),t[ot]){case"Array":return iPt(n,r);case"AsyncIterator":return oPt(n,r);case"Constructor":return sPt(n,r);case"Function":return aPt(n,r);case"Import":return lPt(n,r);case"Intersect":return cPt(n,r);case"Iterator":return uPt(n,r);case"Not":return dPt(n,r);case"Object":return fPt(n,r);case"Promise":return pPt(n,r);case"Record":return mPt(n,r);case"Ref":return hPt(n,r);case"This":return gPt(n,r);case"Tuple":return APt(n,r);case"Union":return yPt(n,r);default:return Oo(t)}}s(_l,"Visit");var c0e=new Set;function $v(t,e){return c0e.clear(),_l(t,e)}s($v,"HasTransform");var l0e=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=$v(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return sC(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new X4(this.schema,e,this.Errors(e).First());return this.hasTransform?Z4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?tD(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new eD(this.schema,e,this.Errors(e).First());return r}},Wv;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(Wv||(Wv={}));var Wj;(function(t){function e(o){return o.length===0?!1:Wv.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(Wv.IsAlpha(c)||Wv.IsNumeric(c)||Wv.DollarSign(c)||Wv.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(Wj||(Wj={}));var u0e;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);Wv.IsNumeric(o)||Wv.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(u0e||(u0e={}));var d0e;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(d0e||(d0e={}));var f0e=class extends Dn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},jj=class extends Dn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},K_;(function(t){function e(a,c,l){return Bs.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${Wj.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return Bs.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return Bs.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return Bs.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Bs.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(K_||(K_={}));var Xs;(function(t){function e(ue){return ue[ot]==="Any"||ue[ot]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ue,Ue,ye){yield"true"}s(r,"FromAny");function*n(ue,Ue,ye){yield"true"}s(n,"FromArgument");function*i(ue,Ue,ye){yield`Array.isArray(${ye})`;let[$e,se]=[Fe("value","any"),Fe("acc","number")];cn(ue.maxItems)&&(yield`${ye}.length <= ${ue.maxItems}`),cn(ue.minItems)&&(yield`${ye}.length >= ${ue.minItems}`);let le=Ae(ue.items,Ue,"value");if(yield`${ye}.every((${$e}) => ${le})`,Js(ue.contains)||cn(ue.minContains)||cn(ue.maxContains)){let qe=Js(ue.contains)?ue.contains:xi(),Be=Ae(qe,Ue,"value"),Ee=cn(ue.minContains)?[`(count >= ${ue.minContains})`]:[],je=cn(ue.maxContains)?[`(count <= ${ue.maxContains})`]:[],tt=`const count = value.reduce((${se}, ${$e}) => ${Be} ? acc + 1 : acc, 0)`,pt=["(count > 0)",...Ee,...je].join(" && ");yield`((${$e}) => { ${tt}; return ${pt}})(${ye})`}ue.uniqueItems===!0&&(yield`((${$e}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ue,Ue,ye){yield`(typeof ${ye} === 'bigint')`,Mu(ue.exclusiveMaximum)&&(yield`${ye} < BigInt(${ue.exclusiveMaximum})`),Mu(ue.exclusiveMinimum)&&(yield`${ye} > BigInt(${ue.exclusiveMinimum})`),Mu(ue.maximum)&&(yield`${ye} <= BigInt(${ue.maximum})`),Mu(ue.minimum)&&(yield`${ye} >= BigInt(${ue.minimum})`),Mu(ue.multipleOf)&&(yield`(${ye} % BigInt(${ue.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(ue,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(ue,Ue,ye){yield*te(ue.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(ue,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,cn(ue.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ue.exclusiveMaximumTimestamp}`),cn(ue.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ue.exclusiveMinimumTimestamp}`),cn(ue.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ue.maximumTimestamp}`),cn(ue.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ue.minimumTimestamp}`),cn(ue.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ue.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(ue,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(ue,Ue,ye){let $e=globalThis.Object.getOwnPropertyNames(ue.$defs).reduce((se,le)=>[...se,ue.$defs[le]],[]);yield*te($m(ue.$ref),[...Ue,...$e],ye)}s(p,"FromImport");function*m(ue,Ue,ye){yield`Number.isInteger(${ye})`,cn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),cn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),cn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),cn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),cn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ue,Ue,ye){let $e=ue.allOf.map(se=>Ae(se,Ue,ye)).join(" && ");if(ue.unevaluatedProperties===!1){let se=Te(`${new RegExp(Uv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key))`;yield`(${$e} && ${le})`}else if(Js(ue.unevaluatedProperties)){let se=Te(`${new RegExp(Uv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key) || ${Ae(ue.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${$e} && ${le})`}else yield`(${$e})`}s(h,"FromIntersect");function*g(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*A(ue,Ue,ye){typeof ue.const=="number"||typeof ue.const=="boolean"?yield`(${ye} === ${ue.const})`:yield`(${ye} === '${d0e.Escape(ue.const)}')`}s(A,"FromLiteral");function*y(ue,Ue,ye){yield"false"}s(y,"FromNever");function*E(ue,Ue,ye){yield`(!${Ae(ue.not,Ue,ye)})`}s(E,"FromNot");function*b(ue,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*S(ue,Ue,ye){yield K_.IsNumberLike(ye),cn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),cn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),cn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),cn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),cn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(S,"FromNumber");function*R(ue,Ue,ye){yield K_.IsObjectLike(ye),cn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),cn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let $e=Object.getOwnPropertyNames(ue.properties);for(let se of $e){let le=Wj.Encode(ye,se),qe=ue.properties[se];if(ue.required&&ue.required.includes(se))yield*te(qe,Ue,le),(qv(qe)||e(qe))&&(yield`('${se}' in ${ye})`);else{let Be=Ae(qe,Ue,le);yield K_.IsExactOptionalProperty(ye,se,Be)}}if(ue.additionalProperties===!1)if(ue.required&&ue.required.length===$e.length)yield`Object.getOwnPropertyNames(${ye}).length === ${$e.length}`;else{let se=`[${$e.map(le=>`'${le}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${se}.includes(key))`}if(typeof ue.additionalProperties=="object"){let se=Ae(ue.additionalProperties,Ue,`${ye}[key]`),le=`[${$e.map(qe=>`'${qe}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${le}.includes(key) || ${se}))`}}s(R,"FromObject");function*B(ue,Ue,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*L(ue,Ue,ye){yield K_.IsRecordLike(ye),cn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),cn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let[$e,se]=Object.entries(ue.patternProperties)[0],le=Te(`${new RegExp($e)}`),qe=Ae(se,Ue,"value"),Be=Js(ue.additionalProperties)?Ae(ue.additionalProperties,Ue,ye):ue.additionalProperties===!1?"false":"true",Ee=`(${le}.test(key) ? ${qe} : ${Be})`;yield`(Object.entries(${ye}).every(([key, value]) => ${Ee}))`}s(L,"FromRecord");function*O(ue,Ue,ye){let $e=wo(ue,Ue);if(pe.functions.has(ue.$ref))return yield`${Oe(ue.$ref)}(${ye})`;yield*te($e,Ue,ye)}s(O,"FromRef");function*K(ue,Ue,ye){let $e=Te(`${new RegExp(ue.source,ue.flags)};`);yield`(typeof ${ye} === 'string')`,cn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),cn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),yield`${$e}.test(${ye})`}s(K,"FromRegExp");function*V(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,cn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),cn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),ue.pattern!==void 0&&(yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`),ue.format!==void 0&&(yield`format('${ue.format}', ${ye})`)}s(V,"FromString");function*z(ue,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(z,"FromSymbol");function*Q(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`}s(Q,"FromTemplateLiteral");function*U(ue,Ue,ye){yield`${Oe(ue.$ref)}(${ye})`}s(U,"FromThis");function*Z(ue,Ue,ye){if(yield`Array.isArray(${ye})`,ue.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ue.maxItems})`;for(let $e=0;$e<ue.items.length;$e++)yield`${Ae(ue.items[$e],Ue,`${ye}[${$e}]`)}`}s(Z,"FromTuple");function*J(ue,Ue,ye){yield`${ye} === undefined`}s(J,"FromUndefined");function*j(ue,Ue,ye){yield`(${ue.anyOf.map(se=>Ae(se,Ue,ye)).join(" || ")})`}s(j,"FromUnion");function*$(ue,Ue,ye){yield`${ye} instanceof Uint8Array`,cn(ue.maxByteLength)&&(yield`(${ye}.length <= ${ue.maxByteLength})`),cn(ue.minByteLength)&&(yield`(${ye}.length >= ${ue.minByteLength})`)}s($,"FromUint8Array");function*X(ue,Ue,ye){yield"true"}s(X,"FromUnknown");function*ie(ue,Ue,ye){yield K_.IsVoidLike(ye)}s(ie,"FromVoid");function*ae(ue,Ue,ye){let $e=pe.instances.size;pe.instances.set($e,ue),yield`kind('${ue[ot]}', ${$e}, ${ye})`}s(ae,"FromKind");function*te(ue,Ue,ye,$e=!0){let se=yo(ue.$id)?[...Ue,ue]:Ue,le=ue;if($e&&yo(ue.$id)){let qe=Oe(ue.$id);if(pe.functions.has(qe))return yield`${qe}(${ye})`;{pe.functions.set(qe,"<deferred>");let Be=Je(qe,ue,Ue,"value",!1);return pe.functions.set(qe,Be),yield`${qe}(${ye})`}}switch(le[ot]){case"Any":return yield*r(le,se,ye);case"Argument":return yield*n(le,se,ye);case"Array":return yield*i(le,se,ye);case"AsyncIterator":return yield*o(le,se,ye);case"BigInt":return yield*a(le,se,ye);case"Boolean":return yield*c(le,se,ye);case"Constructor":return yield*l(le,se,ye);case"Date":return yield*u(le,se,ye);case"Function":return yield*f(le,se,ye);case"Import":return yield*p(le,se,ye);case"Integer":return yield*m(le,se,ye);case"Intersect":return yield*h(le,se,ye);case"Iterator":return yield*g(le,se,ye);case"Literal":return yield*A(le,se,ye);case"Never":return yield*y(le,se,ye);case"Not":return yield*E(le,se,ye);case"Null":return yield*b(le,se,ye);case"Number":return yield*S(le,se,ye);case"Object":return yield*R(le,se,ye);case"Promise":return yield*B(le,se,ye);case"Record":return yield*L(le,se,ye);case"Ref":return yield*O(le,se,ye);case"RegExp":return yield*K(le,se,ye);case"String":return yield*V(le,se,ye);case"Symbol":return yield*z(le,se,ye);case"TemplateLiteral":return yield*Q(le,se,ye);case"This":return yield*U(le,se,ye);case"Tuple":return yield*Z(le,se,ye);case"Undefined":return yield*J(le,se,ye);case"Union":return yield*j(le,se,ye);case"Uint8Array":return yield*$(le,se,ye);case"Unknown":return yield*X(le,se,ye);case"Void":return yield*ie(le,se,ye);default:if(!af.Has(le[ot]))throw new f0e(ue);return yield*ae(le,se,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ae(ue,Ue,ye,$e=!0){return`(${[...te(ue,Ue,ye,$e)].join(" && ")})`}s(Ae,"CreateExpression");function Oe(ue){return`check_${u0e.Encode(ue)}`}s(Oe,"CreateFunctionName");function Te(ue){let Ue=`local_${pe.variables.size}`;return pe.variables.set(Ue,`const ${Ue} = ${ue}`),Ue}s(Te,"CreateVariable");function Je(ue,Ue,ye,$e,se=!0){let[le,qe]=[`
`,tt=>"".padStart(tt," ")],Be=Fe("value","any"),Ee=lt("boolean"),je=[...te(Ue,ye,$e,se)].map(tt=>`${qe(4)}${tt}`).join(` &&${le}`);return`function ${ue}(${Be})${Ee} {${le}${qe(2)}return (${le}${je}${le}${qe(2)})
}`}s(Je,"CreateFunction");function Fe(ue,Ue){let ye=pe.language==="typescript"?`: ${Ue}`:"";return`${ue}${ye}`}s(Fe,"CreateParameter");function lt(ue){return pe.language==="typescript"?`: ${ue}`:""}s(lt,"CreateReturns");function _t(ue,Ue,ye){let $e=Je("check",ue,Ue,"value"),se=Fe("value","any"),le=lt("boolean"),qe=[...pe.functions.values()],Be=[...pe.variables.values()],Ee=yo(ue.$id)?`return function check(${se})${le} {
  return ${Oe(ue.$id)}(value)
}`:`return ${$e}`;return[...Be,...qe,Ee].join(`
`)}s(_t,"Build");function xt(...ue){let Ue={language:"javascript"},[ye,$e,se]=ue.length===2&&Pn(ue[1])?[ue[0],ue[1],Ue]:ue.length===2&&!Pn(ue[1])?[ue[0],[],ue[1]]:ue.length===3?[ue[0],ue[1],ue[2]]:ue.length===1?[ue[0],[],Ue]:[null,[],Ue];if(pe.language=se.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!Js(ye))throw new jj(ye);for(let le of $e)if(!Js(le))throw new jj(le);return _t(ye,$e,se)}s(xt,"Code"),t.Code=xt;function ht(ue,Ue=[]){let ye=xt(ue,Ue,{language:"javascript"}),$e=globalThis.Function("kind","format","hash",ye),se=new Map(pe.instances);function le(je,tt,pt){if(!af.Has(je)||!se.has(tt))return!1;let Ft=af.Get(je),Jt=se.get(tt);return Ft(Jt,pt)}s(le,"typeRegistryFunction");function qe(je,tt){return eA.Has(je)?eA.Get(je)(tt):!1}s(qe,"formatRegistryFunction");function Be(je){return TI(je)}s(Be,"hashFunction");let Ee=$e(le,qe,Be);return new l0e(ue,Ue,Ee,ye)}s(ht,"Compile"),t.Compile=ht})(Xs||(Xs={}));var NG=Ne(gI());d();d();var Ou=[];for(let t=0;t<256;++t)Ou.push((t+256).toString(16).slice(1));function h8e(t,e=0){return(Ou[t[e+0]]+Ou[t[e+1]]+Ou[t[e+2]]+Ou[t[e+3]]+"-"+Ou[t[e+4]]+Ou[t[e+5]]+"-"+Ou[t[e+6]]+Ou[t[e+7]]+"-"+Ou[t[e+8]]+Ou[t[e+9]]+"-"+Ou[t[e+10]]+Ou[t[e+11]]+Ou[t[e+12]]+Ou[t[e+13]]+Ou[t[e+14]]+Ou[t[e+15]]).toLowerCase()}s(h8e,"unsafeStringify");d();var g8e=require("crypto");var Vj=new Uint8Array(256),Gj=Vj.length;function p0e(){return Gj>Vj.length-16&&((0,g8e.randomFillSync)(Vj),Gj=0),Vj.slice(Gj,Gj+=16)}s(p0e,"rng");d();d();var A8e=require("crypto"),m0e={randomUUID:A8e.randomUUID};function CPt(t,e,r){if(m0e.randomUUID&&!e&&!t)return m0e.randomUUID();t=t||{};let n=t.random??t.rng?.()??p0e();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return h8e(n)}s(CPt,"v4");var Er=CPt;var MG=Ne(pi());function xD(t){return t===1}s(xD,"isRestricted");var b5t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],r6=8192,I5t=21;var Uu=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return xD(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(bD(e))return this.reporterRestricted;if(_4(e))return new _9}getFTReporter(e){if(V9e(e))return this.reporterFT;if(_4(e))return new _9}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},T5t=x.Object({},{additionalProperties:x.String()}),w5t=x.Object({meanLogProb:x.Optional(x.Number()),meanAlternativeLogProb:x.Optional(x.Number())},{additionalProperties:x.Number()}),S5t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function _5t(t){return S5t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(_5t,"isOomError");function R5t(t){return i6(t)?"network":_5t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(R5t,"getErrorType");var Gr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Xs.Compile(T5t)}static{this.validateTelemetryMeasurements=Xs.Compile(w5t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},wa())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=wa())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Mt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=Zy(e.get(mn).getEditorInfo()),this.properties.editor_plugin_version=Zy(e.get(mn).getEditorPluginInfo());let r=e.get(Ds);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r2(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(mn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=Zy(n.getEditorInfo());let i=e.get($r);this.properties.fetcher=i.name;let o=e.get(kc).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=X9e(e);r["copilot.build"]=Z9e(e),r["copilot.buildType"]=dC(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(xD(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>r6){let a=0,c=0;for(;o>0&&c<I5t;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+r6;o<r6&&(u=a+o),r[l]=i.slice(a,u),o-=r6,a+=r6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=D5t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(_4(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return cA(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),xD(r)&&cA(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,z9e(e))}},uC=class t extends Gr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}extendWithExpTelemetry(){return this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new Q_({}),exp:Mm.createEmptyConfig()})}};function n6(t,e,r,n){t.get(Uu).getReporter(t,e)?.sendTelemetryEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(n6,"sendTelemetryEvent");function k5t(t,e,r,n){t.get(Uu).getReporter(t,e)?.sendTelemetryErrorEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(k5t,"sendTelemetryErrorEvent");function P5t(t,e,r,n){t.get(Uu).getFTReporter(t)?.sendTelemetryEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(P5t,"sendFTTelemetryEvent");function ED(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(ED,"telemetrizePromptLength");function wa(){return performance.now()}s(wa,"now");function D5t(t){return Math.floor(t/1e3)}s(D5t,"nowSeconds");function bD(t){return t.get(Nu).optedIn}s(bD,"shouldSendRestricted");function V9e(t){return t.get(Nu).ftFlag!==""}s(V9e,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(Jc).register(B5t(t,e,wa(),r?.extendedBy(),n))}s(Bt,"telemetry");async function B5t(t,e,r,n,i=0){let o=n||Gr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!xD(i)||bD(t))&&n6(t,i,e,o),xD(i)&&b5t.includes(e)&&V9e(t)&&P5t(t,i,e,o)}s(B5t,"_telemetry");function wW(t,e){return t.get(Jc).register(N5t(t,e,wa()))}s(wW,"telemetryExpProblem");async function N5t(t,e,r){let n="expProblem",i=Gr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),n6(t,0,n,i)}s(N5t,"_telemetryExpProblem");function $pe(t,e,r,n){let i={...r,...z9e(t)};n6(t,0,e,{properties:i,measurements:n})}s($pe,"telemetryRaw");function z9e(t){let e=t.get(mn),r={unique_id:Er(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:Zy(e.getEditorInfo())},n=t.get(Nu);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(z9e,"createRequiredProperties");var Hpe=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,NG.SHA256)(NG.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function qa(t,e,r,n,i){return t.get(Jc).register(Y9e(t,e,wa(),r,{...n},i))}s(qa,"telemetryException");async function Y9e(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Rd(a)||a instanceof xa||a instanceof MG.ConnectionError||a instanceof MG.ResponseError)return}else{if(a=new Hpe(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let A=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(A[0]??"")&&A.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(A[0]??"")&&A.shift(),a.stack=`${a}
${A.join(`
`)}`}}let c=t.get(mn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=bD(t),f=JBe(a,l,u),p=R5t(a),m=p==="exception",h=Gr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let A of o.exception_detail)A.value&&(u?A.value=Afe(A.value):A.value="[redacted]");if(o??=QBe(t,f),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let A=KBe(a,l),y=Gr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:A.stack||A.toString(),message:A.message,...i});o.rollup_id!=="auto"&&(y.properties.errno=o.rollup_id),await y.makeReadyForSending(t,1,"IncludeExp",r),y.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=y.properties.unique_id,n6(t,1,`error.${p}`,y)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(eC).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),n6(t,0,`error.${p}`,h)}s(Y9e,"_telemetryException");function eu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await Y9e(t,a,wa(),r,n)}},"wrapped");return(...o)=>t.get(Jc).register(i(...o))}s(eu,"telemetryCatch");function cA(t,e,r,n){return t.get(Jc).register(M5t(t,e,wa(),r?.extendedBy(),n))}s(cA,"telemetryError");async function M5t(t,e,r,n,i=0){if(xD(i)&&!bD(t))return;let o=n||Gr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),k5t(t,i,e,o)}s(M5t,"_telemetryError");function K9e(t,e,r,n,i){let o=Gr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(K9e,"logEngineCompletion");function J9e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(J9e,"logEnginePrompt");d();d();var e6e=Ne(pi()),t6e=x.Object({accessToken:x.Optional(x.String({minLength:1})),handle:x.Optional(x.String({minLength:1})),login:x.Optional(x.String({minLength:1})),githubAppId:x.Optional(x.String({minLength:1})),apiUrl:x.Optional(x.String({})),serverUrl:x.Optional(x.String({})),tokenEndpoint:x.Optional(x.String({}))}),Wpe;(r=>(r.method="github/didChangeAuth",r.type=new e6e.ProtocolNotificationType(r.method)))(Wpe||={});d();var r6e=Ne(pi()),jpe;(r=>(r.method="copilot/ipCodeCitation",r.type=new r6e.NotificationType(r.method)))(jpe||={});d();var n6e=Ne(pi()),LG;(r=>(r.method="context/update",r.type=new n6e.ProtocolRequestType(r.method)))(LG||={});d();d();var LI="Cancelled";d();var vn=Ne(pi()),o6=x.String(),c0=x.Object({uri:o6}),n2=x.Intersect([c0,x.Object({version:x.Optional(x.Integer())})]),WGr=x.Required(n2),tu=x.Object({line:x.Integer({minimum:0}),character:x.Integer({minimum:0})}),Pc=x.Object({start:tu,end:tu}),Gpe=x.Union([x.Integer(),x.String()]),jGr=x.Object({isCancellationRequested:x.Boolean(),onCancellationRequested:x.Any()});d();var i6e=Ne(pi()),Vpe;(r=>(r.method="textDocument/didFocus",r.type=new i6e.ProtocolNotificationType(r.method)))(Vpe||={});d();var L5t=x.Object({didChangeFeatureFlags:x.Boolean(),fetch:x.Boolean(),ipCodeCitation:x.Boolean(),redirectedTelemetry:x.Boolean(),related:x.Boolean(),token:x.Boolean(),watchedFiles:x.Boolean(),showPanelMessage:x.Boolean()}),F5t=x.Object({name:x.String(),version:x.String(),readableName:x.Optional(x.String())}),o6e=x.Object({name:x.String(),version:x.Optional(x.String()),readableName:x.Optional(x.String())}),s6e=x.Object({editorInfo:x.Optional(o6e),editorPluginInfo:x.Optional(o6e),relatedPluginInfo:x.Optional(x.Array(F5t)),copilotIntegrationId:x.Optional(x.String()),copilotCapabilities:x.Optional(x.Partial(L5t)),githubAppId:x.Optional(x.String())});d();var s6=Ne(pi());var FG=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(FG||{}),O5t=x.Enum(FG),Q5t=x.Object({triggerKind:O5t,selectedCompletionInfo:x.Optional(x.Object({text:x.String(),range:Pc,tooltipSignature:x.Optional(x.String())}))}),a6e=x.Object({textDocument:n2,position:tu,formattingOptions:x.Optional(x.Object({tabSize:x.Optional(x.Union([x.Integer({minimum:1}),x.String()])),insertSpaces:x.Optional(x.Union([x.Boolean(),x.String()]))})),context:Q5t,data:x.Optional(x.Unknown())}),zpe;(r=>(r.method="textDocument/inlineCompletion",r.type=new s6.ProtocolRequestType(r.method)))(zpe||={});var c6e=x.Object({command:x.Object({arguments:x.Tuple([x.String({minLength:1})])})}),l6e=x.Object({item:c6e}),Ype;(r=>(r.method="textDocument/didShowCompletion",r.type=new s6.ProtocolNotificationType(r.method)))(Ype||={});var u6e=x.Object({item:c6e,acceptedLength:x.Integer({minimum:1})}),Kpe;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new s6.ProtocolNotificationType(r.method)))(Kpe||={});d();var d6e=Ne(pi()),Jpe;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new d6e.ProtocolRequestType(r.method)))(Jpe||={});d();var f6e=Ne(pi()),p6e=x.Object({textDocument:n2,position:tu}),U5t=x.Object({command:x.Object({arguments:x.Tuple([x.String({minLength:1})])})}),m6e=x.Object({item:U5t}),Xpe;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new f6e.ProtocolNotificationType(r.method)))(Xpe||={});d();var OG=Ne(pi());var h6e=x.Object({textDocument:n2,position:tu,partialResultToken:x.Optional(Gpe),workDoneToken:x.Optional(Gpe)}),QG;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new OG.ProtocolRequestType(n.method),n.partialResult=new OG.ProgressType))(QG||={});d();var g6e=Ne(pi()),Zpe;(r=>(r.method="copilot/related",r.type=new g6e.ProtocolRequestType(r.method)))(Zpe||={});d();var A6e=Ne(pi()),eme;(r=>(r.method="statusNotification",r.type=new A6e.ProtocolNotificationType(r.method)))(eme||={});var y6e=Ne(require("events"));var lA=class{static{s(this,"CopilotTokenNotifier")}#e=new y6e.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=eu(e,n,`event.${r}`);return this.#e.on(r,i),vn.Disposable.create(()=>this.#e.off(r,i))}};function Ps(t,e){return t.get(lA).on(t,"CopilotToken",e)}s(Ps,"onCopilotToken");function a6(t,e){return t.get(lA).emitToken(e)}s(a6,"emitCopilotToken");function ID(t){return t.get(lA).lastToken}s(ID,"getLastCopilotToken");d();var UG=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function tme(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(tme,"findKnownOrg");function C6e(t){let e=t.organization_list??[];return tme(e)??""}s(C6e,"getUserKind");d();d();var rc=class{constructor(){this.recentNotifications=new wr(100)}static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}async showInformationMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showInformationMessage(r,...n)}};d();var qu=class{static{s(this,"UrlOpener")}};var q5t=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],v6e="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",x6e="https://gh.io/copilot-network-errors",lf=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&q5t.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new Ct("certificates").error(e,`${v6e} Please visit ${x6e} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(rc).showWarningMessage(v6e,n).then(i=>{if(i?.title===n.title)return e.get(qu).open(x6e)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();d();var c6=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Rd(t){return!t||typeof t!="object"?!1:t instanceof c6||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Rd,"isAbortError");var TD=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},fC=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},H5t=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function i6(t,e=!0){return t instanceof Error?e&&"cause"in t&&i6(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof TD||t instanceof fC||t?.message?.startsWith("net::")||H5t.has(t.code??""):!1}s(i6,"isNetworkError");var FI=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new TD(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new TD(`Response body truncated: actualLength=${o}`,"Truncated"):new TD(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};d();function qG(){return typeof process>"u"}s(qG,"isWeb");function l6(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(l6,"isMsBenchModeEnabled");function E6e(){return typeof process<"u"&&process.env.SIMULATOR_MODE==="true"}s(E6e,"isSimulatorModeEnabled");var rme=class extends fC{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function zm(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...qG()?{}:Ap(t),...n.headers}};let i=await t.get($r).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new fC(i);if(!i.headers.get("x-github-request-id"))throw new rme(i);return i}s(zm,"apiFetch");d();d();var T6e=require("os"),HG=require("path");d();var b6e;(()=>{"use strict";var t={975:Q=>{function U(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(U,"e");function Z(j,$){for(var X,ie="",ae=0,te=-1,pe=0,Ae=0;Ae<=j.length;++Ae){if(Ae<j.length)X=j.charCodeAt(Ae);else{if(X===47)break;X=47}if(X===47){if(!(te===Ae-1||pe===1))if(te!==Ae-1&&pe===2){if(ie.length<2||ae!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Oe=ie.lastIndexOf("/");if(Oe!==ie.length-1){Oe===-1?(ie="",ae=0):ae=(ie=ie.slice(0,Oe)).length-1-ie.lastIndexOf("/"),te=Ae,pe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ae=0,te=Ae,pe=0;continue}}$&&(ie.length>0?ie+="/..":ie="..",ae=2)}else ie.length>0?ie+="/"+j.slice(te+1,Ae):ie=j.slice(te+1,Ae),ae=Ae-te-1;te=Ae,pe=0}else X===46&&pe!==-1?++pe:pe=-1}return ie}s(Z,"r");var J={resolve:s(function(){for(var j,$="",X=!1,ie=arguments.length-1;ie>=-1&&!X;ie--){var ae;ie>=0?ae=arguments[ie]:(j===void 0&&(j=process.cwd()),ae=j),U(ae),ae.length!==0&&($=ae+"/"+$,X=ae.charCodeAt(0)===47)}return $=Z($,!X),X?$.length>0?"/"+$:"/":$.length>0?$:"."},"resolve"),normalize:s(function(j){if(U(j),j.length===0)return".";var $=j.charCodeAt(0)===47,X=j.charCodeAt(j.length-1)===47;return(j=Z(j,!$)).length!==0||$||(j="."),j.length>0&&X&&(j+="/"),$?"/"+j:j},"normalize"),isAbsolute:s(function(j){return U(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,$=0;$<arguments.length;++$){var X=arguments[$];U(X),X.length>0&&(j===void 0?j=X:j+="/"+X)}return j===void 0?".":J.normalize(j)},"join"),relative:s(function(j,$){if(U(j),U($),j===$||(j=J.resolve(j))===($=J.resolve($)))return"";for(var X=1;X<j.length&&j.charCodeAt(X)===47;++X);for(var ie=j.length,ae=ie-X,te=1;te<$.length&&$.charCodeAt(te)===47;++te);for(var pe=$.length-te,Ae=ae<pe?ae:pe,Oe=-1,Te=0;Te<=Ae;++Te){if(Te===Ae){if(pe>Ae){if($.charCodeAt(te+Te)===47)return $.slice(te+Te+1);if(Te===0)return $.slice(te+Te)}else ae>Ae&&(j.charCodeAt(X+Te)===47?Oe=Te:Te===0&&(Oe=0));break}var Je=j.charCodeAt(X+Te);if(Je!==$.charCodeAt(te+Te))break;Je===47&&(Oe=Te)}var Fe="";for(Te=X+Oe+1;Te<=ie;++Te)Te!==ie&&j.charCodeAt(Te)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+$.slice(te+Oe):(te+=Oe,$.charCodeAt(te)===47&&++te,$.slice(te))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(U(j),j.length===0)return".";for(var $=j.charCodeAt(0),X=$===47,ie=-1,ae=!0,te=j.length-1;te>=1;--te)if(($=j.charCodeAt(te))===47){if(!ae){ie=te;break}}else ae=!1;return ie===-1?X?"/":".":X&&ie===1?"//":j.slice(0,ie)},"dirname"),basename:s(function(j,$){if($!==void 0&&typeof $!="string")throw new TypeError('"ext" argument must be a string');U(j);var X,ie=0,ae=-1,te=!0;if($!==void 0&&$.length>0&&$.length<=j.length){if($.length===j.length&&$===j)return"";var pe=$.length-1,Ae=-1;for(X=j.length-1;X>=0;--X){var Oe=j.charCodeAt(X);if(Oe===47){if(!te){ie=X+1;break}}else Ae===-1&&(te=!1,Ae=X+1),pe>=0&&(Oe===$.charCodeAt(pe)?--pe==-1&&(ae=X):(pe=-1,ae=Ae))}return ie===ae?ae=Ae:ae===-1&&(ae=j.length),j.slice(ie,ae)}for(X=j.length-1;X>=0;--X)if(j.charCodeAt(X)===47){if(!te){ie=X+1;break}}else ae===-1&&(te=!1,ae=X+1);return ae===-1?"":j.slice(ie,ae)},"basename"),extname:s(function(j){U(j);for(var $=-1,X=0,ie=-1,ae=!0,te=0,pe=j.length-1;pe>=0;--pe){var Ae=j.charCodeAt(pe);if(Ae!==47)ie===-1&&(ae=!1,ie=pe+1),Ae===46?$===-1?$=pe:te!==1&&(te=1):$!==-1&&(te=-1);else if(!ae){X=pe+1;break}}return $===-1||ie===-1||te===0||te===1&&$===ie-1&&$===X+1?"":j.slice($,ie)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function($,X){var ie=X.dir||X.root,ae=X.base||(X.name||"")+(X.ext||"");return ie?ie===X.root?ie+ae:ie+"/"+ae:ae}(0,j)},"format"),parse:s(function(j){U(j);var $={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return $;var X,ie=j.charCodeAt(0),ae=ie===47;ae?($.root="/",X=1):X=0;for(var te=-1,pe=0,Ae=-1,Oe=!0,Te=j.length-1,Je=0;Te>=X;--Te)if((ie=j.charCodeAt(Te))!==47)Ae===-1&&(Oe=!1,Ae=Te+1),ie===46?te===-1?te=Te:Je!==1&&(Je=1):te!==-1&&(Je=-1);else if(!Oe){pe=Te+1;break}return te===-1||Ae===-1||Je===0||Je===1&&te===Ae-1&&te===pe+1?Ae!==-1&&($.base=$.name=pe===0&&ae?j.slice(1,Ae):j.slice(pe,Ae)):(pe===0&&ae?($.name=j.slice(1,te),$.base=j.slice(1,Ae)):($.name=j.slice(pe,te),$.base=j.slice(pe,Ae)),$.ext=j.slice(te,Ae)),pe>0?$.dir=j.slice(0,pe-1):ae&&($.dir="/"),$},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,Q.exports=J}},e={};function r(Q){var U=e[Q];if(U!==void 0)return U.exports;var Z=e[Q]={exports:{}};return t[Q](Z,Z.exports,r),Z.exports}s(r,"r"),r.d=(Q,U)=>{for(var Z in U)r.o(U,Z)&&!r.o(Q,Z)&&Object.defineProperty(Q,Z,{enumerable:!0,get:U[Z]})},r.o=(Q,U)=>Object.prototype.hasOwnProperty.call(Q,U),r.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>z,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(Q,U){if(!Q.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${Q.authority}", path: "${Q.path}", query: "${Q.query}", fragment: "${Q.fragment}"}`);if(Q.scheme&&!o.test(Q.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(Q.path){if(Q.authority){if(!a.test(Q.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(Q.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(U){return U instanceof m||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,Z,J,j,$,X=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(ie,ae){return ie||ae?ie:"file"}(U,X),this.authority=Z||u,this.path=function(ie,ae){switch(ie){case"https":case"http":case"file":ae?ae[0]!==f&&(ae=f+ae):ae=f}return ae}(this.scheme,J||u),this.query=j||u,this.fragment=$||u,l(this,X))}get fsPath(){return b(this,!1)}with(U){if(!U)return this;let{scheme:Z,authority:J,path:j,query:$,fragment:X}=U;return Z===void 0?Z=this.scheme:Z===null&&(Z=u),J===void 0?J=this.authority:J===null&&(J=u),j===void 0?j=this.path:j===null&&(j=u),$===void 0?$=this.query:$===null&&($=u),X===void 0?X=this.fragment:X===null&&(X=u),Z===this.scheme&&J===this.authority&&j===this.path&&$===this.query&&X===this.fragment?this:new g(Z,J,j,$,X)}static parse(U,Z=!1){let J=p.exec(U);return J?new g(J[2]||u,L(J[4]||u),L(J[5]||u),L(J[7]||u),L(J[9]||u),Z):new g(u,u,u,u,u)}static file(U){let Z=u;if(i&&(U=U.replace(/\\/g,f)),U[0]===f&&U[1]===f){let J=U.indexOf(f,2);J===-1?(Z=U.substring(2),U=f):(Z=U.substring(2,J),U=U.substring(J)||f)}return new g("file",Z,U,u,u)}static from(U){let Z=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return l(Z,!0),Z}toString(U=!1){return S(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof m)return U;{let Z=new g(U);return Z._formatted=U.external,Z._fsPath=U._sep===h?U.fsPath:null,Z}}return U}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(U=!1){return U?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=h),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(Q,U,Z){let J,j=-1;for(let $=0;$<Q.length;$++){let X=Q.charCodeAt($);if(X>=97&&X<=122||X>=65&&X<=90||X>=48&&X<=57||X===45||X===46||X===95||X===126||U&&X===47||Z&&X===91||Z&&X===93||Z&&X===58)j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J!==void 0&&(J+=Q.charAt($));else{J===void 0&&(J=Q.substr(0,$));let ie=A[X];ie!==void 0?(j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J+=ie):j===-1&&(j=$)}}return j!==-1&&(J+=encodeURIComponent(Q.substring(j))),J!==void 0?J:Q}s(y,"m");function E(Q){let U;for(let Z=0;Z<Q.length;Z++){let J=Q.charCodeAt(Z);J===35||J===63?(U===void 0&&(U=Q.substr(0,Z)),U+=A[J]):U!==void 0&&(U+=Q[Z])}return U!==void 0?U:Q}s(E,"y");function b(Q,U){let Z;return Z=Q.authority&&Q.path.length>1&&Q.scheme==="file"?`//${Q.authority}${Q.path}`:Q.path.charCodeAt(0)===47&&(Q.path.charCodeAt(1)>=65&&Q.path.charCodeAt(1)<=90||Q.path.charCodeAt(1)>=97&&Q.path.charCodeAt(1)<=122)&&Q.path.charCodeAt(2)===58?U?Q.path.substr(1):Q.path[1].toLowerCase()+Q.path.substr(2):Q.path,i&&(Z=Z.replace(/\//g,"\\")),Z}s(b,"v");function S(Q,U){let Z=U?E:y,J="",{scheme:j,authority:$,path:X,query:ie,fragment:ae}=Q;if(j&&(J+=j,J+=":"),($||j==="file")&&(J+=f,J+=f),$){let te=$.indexOf("@");if(te!==-1){let pe=$.substr(0,te);$=$.substr(te+1),te=pe.lastIndexOf(":"),te===-1?J+=Z(pe,!1,!1):(J+=Z(pe.substr(0,te),!1,!1),J+=":",J+=Z(pe.substr(te+1),!1,!0)),J+="@"}$=$.toLowerCase(),te=$.lastIndexOf(":"),te===-1?J+=Z($,!1,!0):(J+=Z($.substr(0,te),!1,!0),J+=$.substr(te))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58){let te=X.charCodeAt(1);te>=65&&te<=90&&(X=`/${String.fromCharCode(te+32)}:${X.substr(3)}`)}else if(X.length>=2&&X.charCodeAt(1)===58){let te=X.charCodeAt(0);te>=65&&te<=90&&(X=`${String.fromCharCode(te+32)}:${X.substr(2)}`)}J+=Z(X,!0,!1)}return ie&&(J+="?",J+=Z(ie,!1,!1)),ae&&(J+="#",J+=U?ae:y(ae,!1,!1)),J}s(S,"b");function R(Q){try{return decodeURIComponent(Q)}catch{return Q.length>3?Q.substr(0,3)+R(Q.substr(3)):Q}}s(R,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function L(Q){return Q.match(B)?Q.replace(B,U=>R(U)):Q}s(L,"w");var O=r(975);let K=O.posix||O,V="/";var z;(function(Q){Q.joinPath=function(U,...Z){return U.with({path:K.join(U.path,...Z)})},Q.resolvePath=function(U,...Z){let J=U.path,j=!1;J[0]!==V&&(J=V+J,j=!0);let $=K.resolve(J,...Z);return j&&$[0]===V&&!U.authority&&($=$.substring(1)),U.with({path:$})},Q.dirname=function(U){if(U.path.length===0||U.path===V)return U;let Z=K.dirname(U.path);return Z.length===1&&Z.charCodeAt(0)===46&&(Z=""),U.with({path:Z})},Q.basename=function(U){return K.basename(U.path)},Q.extname=function(U){return K.extname(U.path)}})(z||(z={})),b6e=n})();var{URI:OI,Utils:u6}=b6e;function w6e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+w6e(t.substring(3)):t}}s(w6e,"decodeURIComponentGraceful");var I6e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function nme(t){return t.match(I6e)?t.replace(I6e,e=>w6e(e)):t}s(nme,"percentDecode");function Rl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return OI.file(t).toString()}s(Rl,"makeFsUri");function i2(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?OI.parse(e[1]+e[2],!0):OI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(i2,"parseUri");function $G(t){return i2(t),t}s($G,"validateUri");function kl(t){try{return i2(t).toString()}catch{return t}}s(kl,"normalizeUri");var S6e=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function nc(t){let e=i2(t);if(!S6e.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,T6e.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,HG.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(nc,"fsPath");function es(t){try{return nc(t)}catch{return}}s(es,"getFsPath");function _6e(t){let e=es(t);if(e)return OI.file(e).toString()}s(_6e,"getFsUri");function o2(t,...e){let r,n=es(t);return n?r=Rl((0,HG.resolve)(n,...e)):r=u6.resolvePath(i2(t),...e.map(i=>R6e(i))).toString(),typeof t=="string"?r:{uri:r}}s(o2,"resolveFilePath");function Vi(t,...e){let r=u6.joinPath(i2(t),...e.map(R6e)).toString();return typeof t=="string"?r:{uri:r}}s(Vi,"joinPath");function R6e(t){return $5t(t)?t.replaceAll("\\","/"):t}s(R6e,"pathToURIPath");function $5t(t){return/^[^/\\]*\\/.test(t)}s($5t,"isWinPath");function Pi(t){return nme((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Pi,"basename");function kd(t){let e=u6.dirname(i2(t)),r;return S6e.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(kd,"dirname");function k6e(t){return u6.extname(i2(t))}s(k6e,"extname");var uf=class{static{s(this,"NetworkConfiguration")}};function WG(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!ome(t)&&r.protocol==="http:")return r.href}catch{}}s(WG,"ensurePermittedUrl");var s2={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function ime(t,e,r){if(r&&Gg(t)){for(let n of r){let i=zi(t,n);if(i)return i}return}for(let n of e){let i=zi(t,n);if(i)return i}}s(ime,"urlConfigOverride");function W5t(t,e){switch(e){case"api":return ime(t,[Ht.DebugOverrideCapiUrl,Ht.DebugOverrideCapiUrlLegacy],[Ht.DebugTestOverrideCapiUrl,Ht.DebugTestOverrideCapiUrlLegacy]);case"proxy":return ime(t,[Ht.DebugOverrideProxyUrl,Ht.DebugOverrideProxyUrlLegacy],[Ht.DebugTestOverrideProxyUrl,Ht.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!ome(t))return ime(t,[Ht.DebugSnippyOverrideUrl])}}s(W5t,"getEndpointOverrideUrl");function Ym(t,e,r,...n){let i=W5t(t,r)??e.endpoints[r];return Vi(i,...n)}s(Ym,"getEndpointUrl");function wD(t){return ID(t)?.endpoints??s2}s(wD,"getLastKnownEndpoints");function P6e(t,e){if(e&&!WG(t,e)){t.get(rc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(uf).setConfiguredUrls(t,{serverUrl:e})}s(P6e,"updateServerUrl");var yp=new Ct("auth"),jG=60;function Cp(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Cp,"fillGitHubUrls");function D6e(){return Math.floor(Date.now()/1e3)}s(D6e,"nowSeconds");async function GG(t,e){let r=Gr.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let n=await j5t(t,e),i=await n.json(),o=i.user_notification;if(B6e(t,o,e),n.status===401){let f="Failed to get copilot token due to 401 status. Please sign out and try again.";return yp.info(t,f),cA(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:f,envelope:i}}if(!n.ok||!i.token){yp.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),cA(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let f=i.error_details;return f?.notification_id!=="not_signed_up"&&B6e(t,f,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...f}}let a=i.expires_at;i.expires_at=D6e()+i.refresh_in+jG;let c=await sme(t,e),l;c.ok&&(l=await c.json());let u=new a2(i,l);return a6(t,u),Bt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:D6e()})),{kind:"success",copilotToken:u}}s(GG,"authFromGitHubSession");async function j5t(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"};ID(t)?.hasKnownOrg&&(r["X-GitHub-Staff-Request"]="1");let n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await zm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(lf).notifyUser(t,i),i}}s(j5t,"fetchCopilotToken");async function sme(t,e){let r={"X-GitHub-Api-Version":QI},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await zm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(lf).notifyUser(t,i),i}}s(sme,"fetchCopilotUserInfo");function B6e(t,e,r){e&&t.get(rc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(mn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(qu).open(c)}e.notification_id&&o&&await G5t(t,e.notification_id,r)}).catch(n=>{yp.exception(t,n,"copilotToken.notification")})}s(B6e,"notifyUser");async function G5t(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await zm(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&yp.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(G5t,"sendNotificationResultToGitHub");var a2=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new UG(r)}static{s(this,"CopilotToken")}get endpoints(){return{...s2,...this.envelope.endpoints??{}}}needsRefresh(){return(this.envelope.expires_at-jG)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return tme(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}};d();d();var d6="apps",ame="hosts",uA=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=vp,i=await this.persistenceManager.read(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(ru).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(ame,e);if(r)return{...r,githubAppId:vp}}async saveAuthRecord(e){await this.persistenceManager.update(d6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===vp&&await this.persistenceManager.delete(ame,r),await this.persistenceManager.delete(d6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:vp})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(ame)}authRecordKey(e,r){let n=r.githubAppId??e.get(ru).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();d();var O6e=Ne(M6e()),Q6e=Ne(F6e()),xp=Ne(require("os"));var SD=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get($r).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{un.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new Q6e.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[O6e.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=V5t(e),this.commonProperties=z5t(e),this.#e=Ps(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function V5t(t){let e={},r=t.get(Ds);e["ai.session.id"]=r.sessionId;let n=t.get(Nu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${xp.type()} ${xp.release()}`,e["ai.device.osArchitecture"]=xp.arch(),e["ai.device.osPlatform"]=xp.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(Io).getVersion(),e}s(V5t,"getTags");function z5t(t){let e={};e.common_os=xp.platform(),e.common_platformversion=xp.release(),e.common_arch=xp.arch(),e.common_cpu=Array.from(new Set(xp.cpus().map(n=>n.model))).join();let r=t.get(Ds);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(z5t,"getCommonProperties");var Y5t="7d7048df-6dd0-4048-bb23-b716c1461f8f",K5t="3fdd7f28-937a-48c8-9a21-ba337db23bd1",J5t="f0000000-0000-0000-0000-000000000000";function U6e(t){return new URL(t).hostname==="github.com"?s2.telemetry:t.replace("://","://copilot-telemetry-service.")}s(U6e,"getEndpointForServerUrl");var Pd=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=U6e(this.serverUrl);this.shuttingDown=new Set;Ps(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(Uu);i.setReporter(new SD(r,this.namespace,n,Y5t)),i.setRestrictedReporter(new SD(r,this.namespace,n,K5t)),i.setFTReporter(new SD(r,this.namespace,n,J5t,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Uu);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Uu).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=U6e(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};async function X5t(t,e){let r="copilot_internal/subscribe_limited_user";try{return(await(await zm(t,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":"2025-05-01"},body:JSON.stringify({restricted_telemetry:t.get(Pd).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json()).subscribed}catch(n){return yp.exception(t,n,"signUpLimited failed"),!1}}s(X5t,"apiFetchSignUpLimited");async function cme(t,e,r){try{await t.get(Br).getToken()}catch(n){if(n instanceof df)return r&&n.result.envelope?.can_signup_for_limited&&await X5t(t,e)?cme(t,e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}s(cme,"getTokenWithSignUpLimited");var Yi=class{constructor(e,r){this.ctx=e;this.env=r}static{s(this,"AuthManager")}hasTransientSession(){return this.transientSession!==void 0}get _copilotTokenManager(){return this.ctx.get(Br)}getConfiguredUrls(){return this.ctx.get(uf).getConfiguredUrls()}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await cme(this.ctx,n,e?.freshSignIn??!1),user:n.login})}async getSession(){await this.ctx.get(kc).requireReady();let e=lme(this.env)??await this.transientSession;if(!(e&&e.accessToken===void 0))return e?{...e,...Cp(e)}:await this.getPersistedSession()}setTransientSession(e){this.transientSession=e&&Promise.resolve(e),this._copilotTokenManager.resetToken()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}},YG=class extends Yi{static{s(this,"PersistentAuthManager")}get authPersistence(){return this.ctx.get(uA)}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&dC(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}};function lme(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{...Cp({apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL}),login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{...Cp({apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL}),login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{...Cp({apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL}),login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(lme,"getSessionFromEnv");d();var So=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},KG=class extends So{static{s(this,"NoOpStatusReporter")}didChange(){}};var df=class extends xa{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},Br=class{constructor(e,r=!1){this.ctx=e;this.primed=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManager")}async getGitHubSession(){return await this.ctx.get(Yi).getSession()}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async fetchCopilotToken(e){if(!e.accessToken)throw new df({reason:"HTTP401"});let r=await GG(this.ctx,e);if(r.kind==="failure"){if(r.message)throw new df(r);let n=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw n.code=`CopilotToken.${r.reason}`,n}return r.copilotToken}async getToken(){if(!this.primed){let e=new Error("Token requested before initialization");if(q6e(this.ctx))throw e;yp.exception(this.ctx,e,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.getGitHubSession().then(async n=>{if(!n)throw new df({reason:"NotSignedIn"});return await this.fetchCopilotToken(n)}).then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(So).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(So);if(n instanceof df)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(e){e!==void 0?(Bt(this.ctx,"auth.reset_token_"+e),yp.debug(this.ctx,`Resetting copilot token on HTTP error ${e}`)):yp.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}};d();var pC=class{static{s(this,"Clock")}now(){return new Date}};d();var dA=class{static{s(this,"ExpConfigMaker")}},f6=class extends dA{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get($r),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return Mm.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return Mm.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return qa(r,m,"fetchExperiments"),Mm.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let f=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Mm(f.Parameters,u.AssignmentContext,p.join(";"))}},JG=class extends dA{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Mm.createEmptyConfig())}};d();d();var XG=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},ume=class extends XG{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},H6e=s(t=>new ume(t),"DEFAULT_GRANULARITY"),ZG=class extends XG{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var $6e="X-Copilot-ClientTimeBucket",eV=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=H6e(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new ZG(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange($6e,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange($6e,o))}}};d();d();d();d();d();d();d();var rV="4.11.0",c2="04b07795-8ddb-461a-bbee-02f9e1bf7b46",W6e="common",tV;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(tV||(tV={}));var p6=tV.AzurePublicCloud,j6e="login.microsoftonline.com",G6e=["*"],V6e="cae",z6e="nocae",Y6e="msal.cache";var dme;var K6e,nV,fme;function J6e(){return nV!==void 0&&fme!==void 0}s(J6e,"hasVSCodePlugin");function Z5t(t){let e={cache:{},broker:{...t.brokerOptions,isEnabled:t.brokerOptions?.enabled??!1,enableMsaPassthrough:t.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(t.tokenCachePersistenceOptions?.enabled){if(dme===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let r=t.tokenCachePersistenceOptions.name||Y6e;e.cache.cachePlugin=dme({name:`${r}.${z6e}`,...t.tokenCachePersistenceOptions}),e.cache.cachePluginCae=dme({name:`${r}.${V6e}`,...t.tokenCachePersistenceOptions})}if(t.brokerOptions?.enabled)if(t.isVSCodeCredential){if(fme===void 0)throw new Error(["Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found.","You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=fme.broker}else{if(K6e===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(brokerPlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=K6e.broker}return e}s(Z5t,"generatePluginConfiguration");var X6e={generatePluginConfiguration:Z5t};d();d();d();function e4t(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(e4t,"isErrorResponse");var eFe="CredentialUnavailableError",Ur=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=eFe}},iV="AuthenticationError",UI=class extends Error{static{s(this,"AuthenticationError")}statusCode;errorResponse;constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(e4t(r))i=Z6e(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=Z6e(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=iV}},tFe="AggregateAuthenticationError",m6=class extends Error{static{s(this,"AggregateAuthenticationError")}errors;constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=tFe}};function Z6e(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(Z6e,"convertOAuthErrorResponseToErrorResponse");var Km=class extends Error{static{s(this,"AuthenticationRequiredError")}scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};d();d();d();d();var rFe=require("node:os"),nFe=Ne(require("node:util"),1),iFe=Ne(require("node:process"),1);function oFe(t,...e){iFe.stderr.write(`${nFe.default.format(t,...e)}${rFe.EOL}`)}s(oFe,"log");var sFe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,aFe,pme=[],mme=[],oV=[];sFe&&hme(sFe);var cFe=Object.assign(t=>lFe(t),{enable:hme,enabled:gme,disable:t4t,log:oFe});function hme(t){aFe=t,pme=[],mme=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?mme.push(new RegExp(`^${n.substr(1)}$`)):pme.push(new RegExp(`^${n}$`));for(let n of oV)n.enabled=gme(n.namespace)}s(hme,"enable");function gme(t){if(t.endsWith("*"))return!0;for(let e of mme)if(e.test(t))return!1;for(let e of pme)if(e.test(t))return!0;return!1}s(gme,"enabled");function t4t(){let t=aFe||"";return hme(""),t}s(t4t,"disable");function lFe(t){let e=Object.assign(r,{enabled:gme(t),destroy:r4t,log:cFe.log,namespace:t,extend:n4t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),oV.push(e),e}s(lFe,"createDebugger");function r4t(){let t=oV.indexOf(this);return t>=0?(oV.splice(t,1),!0):!1}s(r4t,"destroy");function n4t(t){let e=lFe(`${this.namespace}:${t}`);return e.log=this.log,e}s(n4t,"extend");var _D=cFe;var dFe=new Set,sV=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,cV,Ame=_D("azure");Ame.log=(...t)=>{_D.log(...t)};var yme=["verbose","info","warning","error"];sV&&(mFe(sV)?i4t(sV):console.error(`AZURE_LOG_LEVEL set to unknown log level '${sV}'; logging is not enabled. Acceptable values: ${yme.join(", ")}.`));function i4t(t){if(t&&!mFe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${yme.join(",")}`);cV=t;let e=[];for(let r of dFe)pFe(r)&&e.push(r.namespace);_D.enable(e.join(","))}s(i4t,"setLogLevel");function lV(){return cV}s(lV,"getLogLevel");var uFe={verbose:400,info:300,warning:200,error:100};function qI(t){let e=Ame.extend(t);return fFe(Ame,e),{error:aV(e,"error"),warning:aV(e,"warning"),info:aV(e,"info"),verbose:aV(e,"verbose")}}s(qI,"createClientLogger");function fFe(t,e){e.log=(...r)=>{t.log(...r)}}s(fFe,"patchLogMethod");function aV(t,e){let r=Object.assign(t.extend(e),{level:e});if(fFe(t,r),pFe(r)){let n=_D.disable();_D.enable(n+","+r.namespace)}return dFe.add(r),r}s(aV,"createLogger");function pFe(t){return!!(cV&&uFe[t.level]<=uFe[cV])}s(pFe,"shouldEnable");function mFe(t){return yme.includes(t)}s(mFe,"isAzureLogLevel");var Ep=qI("identity");function uV(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(uV,"processEnvVars");function Pl(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Pl,"formatSuccess");function xo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(xo,"formatError");function hFe(t,e,r=Ep){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(hFe,"credentialLoggerInstance");function ti(t,e=Ep){let r=hFe(t,void 0,e);return{...r,parent:e,getToken:hFe("=> getToken()",r,e)}}s(ti,"credentialLogger");d();d();d();d();var RD={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function gFe(t={}){let e=new Cme(t.parentContext);return t.span&&(e=e.setValue(RD.span,t.span)),t.namespace&&(e=e.setValue(RD.namespace,t.namespace)),e}s(gFe,"createTracingContext");var Cme=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var yFe=Ne(AFe(),1),fV=yFe.state;function o4t(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(o4t,"createDefaultTracingSpan");function s4t(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:o4t(),tracingContext:gFe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(s4t,"createDefaultInstrumenter");function h6(){return fV.instrumenterImplementation||(fV.instrumenterImplementation=s4t()),fV.instrumenterImplementation}s(h6,"getInstrumenter");d();function g6(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var m;let h=h6().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=f?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,A=h.span;g.getValue(RD.namespace)||(g=g.setValue(RD.namespace,e)),A.setAttribute("az.namespace",g.getValue(RD.namespace));let y=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:A,updatedOptions:y}}s(i,"startSpan");async function o(u,f,p,m){let{span:h,updatedOptions:g}=i(u,f,m);try{let A=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),A}catch(A){throw h.setStatus({status:"error",error:A}),A}finally{h.end()}}s(o,"withSpan");function a(u,f,...p){return h6().withContext(u,f,...p)}s(a,"withContext");function c(u){return h6().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return h6().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(g6,"createTracingClient");var ts=g6({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:rV});var vme=ti("ChainedTokenCredential"),A6=class{static{s(this,"ChainedTokenCredential")}_sources=[];constructor(...e){this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return ts.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw vme.getToken.info(xo(e,l)),l}if(!n&&o.length>0){let c=new m6(o,"ChainedTokenCredential authentication failed.");throw vme.getToken.info(xo(e,c)),c}if(vme.getToken.info(`Result for ${i.constructor.name}: ${Pl(e)}`),n===null)throw new Ur("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();d();d();var _p={};Ca(_p,{AuthError:()=>oi,AuthErrorCodes:()=>BD,AuthErrorMessage:()=>Eme,AzureCloudInstance:()=>Xv,ClientApplication:()=>cT,ClientAssertion:()=>sx,ClientAuthError:()=>YI,ClientAuthErrorCodes:()=>As,ClientAuthErrorMessage:()=>Ime,ClientConfigurationError:()=>QD,ClientConfigurationErrorCodes:()=>OD,ClientConfigurationErrorMessage:()=>Rme,ClientCredentialClient:()=>lT,ConfidentialClientApplication:()=>cB,CryptoProvider:()=>vC,DeviceCodeClient:()=>oB,DistributedCachePlugin:()=>qz,InteractionRequiredAuthError:()=>Tp,InteractionRequiredAuthErrorCodes:()=>LV,InteractionRequiredAuthErrorMessage:()=>Mhe,LogLevel:()=>Ha,Logger:()=>bp,ManagedIdentityApplication:()=>lB,ManagedIdentitySourceNames:()=>Jn,OnBehalfOfClient:()=>aB,PromptValue:()=>$I,ProtocolMode:()=>Dd,PublicClientApplication:()=>sB,ResponseMode:()=>mC,ServerError:()=>hf,TokenCache:()=>VD,TokenCacheContext:()=>wp,UsernamePasswordClient:()=>iB,internals:()=>Lhe,version:()=>hA});d();var Lhe={};Ca(Lhe,{Deserializer:()=>ix,Serializer:()=>HI});d();d();var HI=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var rt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ii={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},l0=[rt.OPENID_SCOPE,rt.PROFILE_SCOPE,rt.OFFLINE_ACCESS_SCOPE],xme=[...l0,rt.EMAIL_SCOPE],Ls={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var u0={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},l2={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},$I={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},pV={PLAIN:"plain",S256:"S256"},kD={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var mC={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},d0={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},u2={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ic={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},_o={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var y6="appmetadata",CFe="client_info",Vv="1",PD={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ff={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Dl={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},co={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},hC={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},C6={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},v6={username:"username",password:"password"},d2={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},mV={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ws={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var DD=300,Hu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var BD={};Ca(BD,{postRequestFailed:()=>E6,unexpectedError:()=>x6});d();var x6="unexpected_error",E6="post_request_failed";var hV={[x6]:"Unexpected error in authentication.",[E6]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Eme={unexpectedError:{code:x6,desc:hV[x6]},postRequestFailed:{code:E6,desc:hV[E6]}},oi=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||rt.EMPTY_STRING,this.errorMessage=r||rt.EMPTY_STRING,this.subError=n||rt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function bme(t,e){return new oi(t,e?`${hV[t]} ${e}`:hV[t])}s(bme,"createAuthError");var As={};Ca(As,{authTimeNotFound:()=>zv,authorizationCodeMissingFromServerResponse:()=>w2,bindingKeyNotRemoved:()=>B6,cannotAppendScopeSet:()=>b2,cannotRemoveEmptyScope:()=>E2,clientInfoDecodingError:()=>WI,clientInfoEmptyError:()=>f2,deviceCodeExpired:()=>w6,deviceCodePollingCancelled:()=>T6,deviceCodeUnknownError:()=>S6,emptyInputScopeSet:()=>VI,endSessionEndpointNotSupported:()=>S2,endpointResolutionError:()=>pf,hashNotDeserialized:()=>g2,invalidAssertion:()=>k6,invalidCacheEnvironment:()=>Kv,invalidCacheRecord:()=>I2,invalidClientCredential:()=>P6,invalidState:()=>fA,keyIdMissing:()=>_2,maxAgeTranspired:()=>C2,methodNotImplemented:()=>Di,missingTenantIdError:()=>L6,multipleMatchingAccounts:()=>I6,multipleMatchingAppMetadata:()=>v2,multipleMatchingTokens:()=>b6,nestedAppAuthBridgeDisabled:()=>F6,networkError:()=>m2,noAccountFound:()=>_6,noAccountInSilentRequest:()=>Yv,noCryptoObject:()=>zI,noNetworkConnectivity:()=>N6,nonceMismatch:()=>y2,nullOrEmptyToken:()=>p2,openIdConfigError:()=>h2,requestCannotBeMade:()=>x2,stateMismatch:()=>A2,stateNotFound:()=>GI,tokenClaimsCnfRequiredForSignedJwt:()=>T2,tokenParsingError:()=>jI,tokenRefreshRequired:()=>Jv,unexpectedCredentialType:()=>R6,userCanceled:()=>M6,userTimeoutReached:()=>D6});d();var WI="client_info_decoding_error",f2="client_info_empty_error",jI="token_parsing_error",p2="null_or_empty_token",pf="endpoints_resolution_error",m2="network_error",h2="openid_config_error",g2="hash_not_deserialized",fA="invalid_state",A2="state_mismatch",GI="state_not_found",y2="nonce_mismatch",zv="auth_time_not_found",C2="max_age_transpired",b6="multiple_matching_tokens",I6="multiple_matching_accounts",v2="multiple_matching_appMetadata",x2="request_cannot_be_made",E2="cannot_remove_empty_scope",b2="cannot_append_scopeset",VI="empty_input_scopeset",T6="device_code_polling_cancelled",w6="device_code_expired",S6="device_code_unknown_error",Yv="no_account_in_silent_request",I2="invalid_cache_record",Kv="invalid_cache_environment",_6="no_account_found",zI="no_crypto_object",R6="unexpected_credential_type",k6="invalid_assertion",P6="invalid_client_credential",Jv="token_refresh_required",D6="user_timeout_reached",T2="token_claims_cnf_required_for_signedjwt",w2="authorization_code_missing_from_server_response",B6="binding_key_not_removed",S2="end_session_endpoint_not_supported",_2="key_id_missing",N6="no_network_connectivity",M6="user_canceled",L6="missing_tenant_id_error",Di="method_not_implemented",F6="nested_app_auth_bridge_disabled";var si={[WI]:"The client info could not be parsed/decoded correctly",[f2]:"The client info was empty",[jI]:"Token cannot be parsed",[p2]:"The token is null or empty",[pf]:"Endpoints cannot be resolved",[m2]:"Network request failed",[h2]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[g2]:"The hash parameters could not be deserialized",[fA]:"State was not the expected format",[A2]:"State mismatch error",[GI]:"State not found",[y2]:"Nonce mismatch error",[zv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[C2]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[b6]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[I6]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[v2]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[x2]:"Token request cannot be made without authorization code or refresh token.",[E2]:"Cannot remove null or empty scope from ScopeSet",[b2]:"Cannot append ScopeSet",[VI]:"Empty input ScopeSet cannot be processed",[T6]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[w6]:"Device code is expired.",[S6]:"Device code stopped polling for unknown reasons.",[Yv]:"Please pass an account object, silent flow is not supported without account information",[I2]:"Cache record object was null or undefined.",[Kv]:"Invalid environment when attempting to create cache entry",[_6]:"No account found in cache for given key.",[zI]:"No crypto object detected.",[R6]:"Unexpected credential type.",[k6]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[P6]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Jv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[D6]:"User defined timeout for device code polling reached",[T2]:"Cannot generate a POP jwt if the token_claims are not populated",[w2]:"Server response does not contain an authorization code to proceed",[B6]:"Could not remove the credential's binding key from storage.",[S2]:"The provided authority does not support logout",[_2]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[N6]:"No network connectivity. Check your internet connection.",[M6]:"User cancelled the flow.",[L6]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Di]:"This method has not been implemented",[F6]:"The nested app auth bridge is disabled"},Ime={clientInfoDecodingError:{code:WI,desc:si[WI]},clientInfoEmptyError:{code:f2,desc:si[f2]},tokenParsingError:{code:jI,desc:si[jI]},nullOrEmptyToken:{code:p2,desc:si[p2]},endpointResolutionError:{code:pf,desc:si[pf]},networkError:{code:m2,desc:si[m2]},unableToGetOpenidConfigError:{code:h2,desc:si[h2]},hashNotDeserialized:{code:g2,desc:si[g2]},invalidStateError:{code:fA,desc:si[fA]},stateMismatchError:{code:A2,desc:si[A2]},stateNotFoundError:{code:GI,desc:si[GI]},nonceMismatchError:{code:y2,desc:si[y2]},authTimeNotFoundError:{code:zv,desc:si[zv]},maxAgeTranspired:{code:C2,desc:si[C2]},multipleMatchingTokens:{code:b6,desc:si[b6]},multipleMatchingAccounts:{code:I6,desc:si[I6]},multipleMatchingAppMetadata:{code:v2,desc:si[v2]},tokenRequestCannotBeMade:{code:x2,desc:si[x2]},removeEmptyScopeError:{code:E2,desc:si[E2]},appendScopeSetError:{code:b2,desc:si[b2]},emptyInputScopeSetError:{code:VI,desc:si[VI]},DeviceCodePollingCancelled:{code:T6,desc:si[T6]},DeviceCodeExpired:{code:w6,desc:si[w6]},DeviceCodeUnknownError:{code:S6,desc:si[S6]},NoAccountInSilentRequest:{code:Yv,desc:si[Yv]},invalidCacheRecord:{code:I2,desc:si[I2]},invalidCacheEnvironment:{code:Kv,desc:si[Kv]},noAccountFound:{code:_6,desc:si[_6]},noCryptoObj:{code:zI,desc:si[zI]},unexpectedCredentialType:{code:R6,desc:si[R6]},invalidAssertion:{code:k6,desc:si[k6]},invalidClientCredential:{code:P6,desc:si[P6]},tokenRefreshRequired:{code:Jv,desc:si[Jv]},userTimeoutReached:{code:D6,desc:si[D6]},tokenClaimsRequired:{code:T2,desc:si[T2]},noAuthorizationCodeFromServer:{code:w2,desc:si[w2]},bindingKeyNotRemovedError:{code:B6,desc:si[B6]},logoutNotSupported:{code:S2,desc:si[S2]},keyIdMissing:{code:_2,desc:si[_2]},noNetworkConnectivity:{code:N6,desc:si[N6]},userCanceledError:{code:M6,desc:si[M6]},missingTenantIdError:{code:L6,desc:si[L6]},nestedAppAuthBridgeDisabled:{code:F6,desc:si[F6]}},YI=class t extends oi{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${si[e]}: ${r}`:si[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function vt(t,e){return new YI(t,e)}s(vt,"createClientAuthError");var ND={createNewGuid:s(()=>{throw vt(Di)},"createNewGuid"),base64Decode:s(()=>{throw vt(Di)},"base64Decode"),base64Encode:s(()=>{throw vt(Di)},"base64Encode"),base64UrlEncode:s(()=>{throw vt(Di)},"base64UrlEncode"),encodeKid:s(()=>{throw vt(Di)},"encodeKid"),async getPublicKeyThumbprint(){throw vt(Di)},async removeTokenBindingKey(){throw vt(Di)},async clearKeystore(){throw vt(Di)},async signJwt(){throw vt(Di)},async hashString(){throw vt(Di)}};d();var Ha;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ha||(Ha={}));var bp=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ha.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ha.Info,this.correlationId=o.correlationId||rt.EMPTY_STRING,this.packageName=r||rt.EMPTY_STRING,this.packageVersion=n||rt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ha.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ha[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ha.Error,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ha.Error,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ha.Warning,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ha.Warning,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ha.Info,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ha.Info,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ha.Verbose,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ha.Verbose,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ha.Trace,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ha.Trace,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var gV="@azure/msal-common",MD="15.8.1";d();var Xv={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var Bl={};Ca(Bl,{createAccessTokenEntity:()=>Sme,createIdTokenEntity:()=>wme,createRefreshTokenEntity:()=>_me,generateAppMetadataKey:()=>C4t,generateAuthorityMetadataExpiresAt:()=>CV,generateCredentialKey:()=>U6,isAccessTokenEntity:()=>l4t,isAppMetadataEntity:()=>v4t,isAuthorityMetadataEntity:()=>x4t,isAuthorityMetadataExpired:()=>vV,isCredentialEntity:()=>yV,isIdTokenEntity:()=>u4t,isRefreshTokenEntity:()=>d4t,isServerTelemetryEntity:()=>A4t,isThrottlingEntity:()=>y4t,updateAuthorityEndpointMetadata:()=>FD,updateCloudDiscoveryMetadata:()=>q6});d();var AV={};Ca(AV,{checkMaxAge:()=>O6,extractTokenClaims:()=>Zv,getJWSPayload:()=>vFe});d();function Zv(t,e){let r=vFe(t);try{let n=e(r);return JSON.parse(n)}catch{throw vt(jI)}}s(Zv,"extractTokenClaims");function vFe(t){if(!t)throw vt(p2);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw vt(jI);return r[2]}s(vFe,"getJWSPayload");function O6(t,e){if(e===0||Date.now()-3e5>t+e)throw vt(C2)}s(O6,"checkMaxAge");var ea={};Ca(ea,{delay:()=>c4t,isTokenExpired:()=>LD,nowSeconds:()=>Ip,toDateFromSeconds:()=>Q6,toSecondsFromDate:()=>a4t,wasClockTurnedBack:()=>Tme});d();function Ip(){return Math.round(new Date().getTime()/1e3)}s(Ip,"nowSeconds");function a4t(t){return t.getTime()/1e3}s(a4t,"toSecondsFromDate");function Q6(t){return t?new Date(Number(t)*1e3):new Date}s(Q6,"toDateFromSeconds");function LD(t,e){let r=Number(t)||0;return Ip()+e>r}s(LD,"isTokenExpired");function Tme(t){return Number(t)>Ip()}s(Tme,"wasClockTurnedBack");function c4t(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(c4t,"delay");function U6(t){return[f4t(t),p4t(t),m4t(t),h4t(t),g4t(t)].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(U6,"generateCredentialKey");function wme(t,e,r,n,i){return{credentialType:_o.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(wme,"createIdTokenEntity");function Sme(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let A={homeAccountId:t,credentialType:_o.ACCESS_TOKEN,secret:r,cachedAt:Ip().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||co.BEARER};if(p&&(A.userAssertionHash=p),u&&(A.refreshOn=u.toString()),h&&(A.requestedClaims=h,A.requestedClaimsHash=g),A.tokenType?.toLowerCase()!==co.BEARER.toLowerCase())switch(A.credentialType=_o.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case co.POP:let y=Zv(r,l);if(!y?.cnf?.kid)throw vt(T2);A.keyId=y.cnf.kid;break;case co.SSH:A.keyId=m}return A}s(Sme,"createAccessTokenEntity");function _me(t,e,r,n,i,o,a){let c={credentialType:_o.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(_me,"createRefreshTokenEntity");function yV(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s(yV,"isCredentialEntity");function l4t(t){return t?yV(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===_o.ACCESS_TOKEN||t.credentialType===_o.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(l4t,"isAccessTokenEntity");function u4t(t){return t?yV(t)&&t.hasOwnProperty("realm")&&t.credentialType===_o.ID_TOKEN:!1}s(u4t,"isIdTokenEntity");function d4t(t){return t?yV(t)&&t.credentialType===_o.REFRESH_TOKEN:!1}s(d4t,"isRefreshTokenEntity");function f4t(t){return[t.homeAccountId,t.environment].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(f4t,"generateAccountId");function p4t(t){let e=t.credentialType===_o.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(p4t,"generateCredentialId");function m4t(t){return(t.target||"").toLowerCase()}s(m4t,"generateTarget");function h4t(t){return(t.requestedClaimsHash||"").toLowerCase()}s(h4t,"generateClaimsHash");function g4t(t){return t.tokenType&&t.tokenType.toLowerCase()!==co.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(g4t,"generateScheme");function A4t(t,e){let r=t.indexOf(Dl.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(A4t,"isServerTelemetryEntity");function y4t(t,e){let r=!1;t&&(r=t.indexOf(hC.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(y4t,"isThrottlingEntity");function C4t({environment:t,clientId:e}){return[y6,t,e].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(C4t,"generateAppMetadataKey");function v4t(t,e){return e?t.indexOf(y6)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(v4t,"isAppMetadataEntity");function x4t(t,e){return e?t.indexOf(PD.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(x4t,"isAuthorityMetadataEntity");function CV(){return Ip()+PD.REFRESH_TIME_SECONDS}s(CV,"generateAuthorityMetadataExpiresAt");function FD(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(FD,"updateAuthorityEndpointMetadata");function q6(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(q6,"updateCloudDiscoveryMetadata");function vV(t){return t.expiresAt<=Ip()}s(vV,"isAuthorityMetadataExpired");d();d();var OD={};Ca(OD,{authorityMismatch:()=>Y6,authorityUriInsecure:()=>k2,cannotAllowPlatformBroker:()=>z6,cannotSetOIDCOptions:()=>V6,claimsRequestParsingError:()=>H6,emptyInputScopesError:()=>D2,invalidAuthenticationHeader:()=>G6,invalidAuthorityMetadata:()=>L2,invalidClaims:()=>KI,invalidCloudDiscoveryMetadata:()=>JI,invalidCodeChallengeMethod:()=>$6,logoutRequestEmpty:()=>N2,missingNonceAuthenticationHeader:()=>j6,missingSshJwk:()=>ex,missingSshKid:()=>W6,pkceParamsMissing:()=>M2,redirectUriEmpty:()=>R2,tokenRequestEmpty:()=>B2,untrustedAuthority:()=>F2,urlEmptyError:()=>P2,urlParseError:()=>gC});d();var R2="redirect_uri_empty",H6="claims_request_parsing_error",k2="authority_uri_insecure",gC="url_parse_error",P2="empty_url_error",D2="empty_input_scopes_error",KI="invalid_claims",B2="token_request_empty",N2="logout_request_empty",$6="invalid_code_challenge_method",M2="pkce_params_missing",JI="invalid_cloud_discovery_metadata",L2="invalid_authority_metadata",F2="untrusted_authority",ex="missing_ssh_jwk",W6="missing_ssh_kid",j6="missing_nonce_authentication_header",G6="invalid_authentication_header",V6="cannot_set_OIDCOptions",z6="cannot_allow_platform_broker",Y6="authority_mismatch";var oc={[R2]:"A redirect URI is required for all calls, and none has been set.",[H6]:"Could not parse the given claims request object.",[k2]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[gC]:"URL could not be parsed into appropriate segments.",[P2]:"URL was empty or null.",[D2]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[KI]:"Given claims parameter must be a stringified JSON object.",[B2]:"Token request was empty and not found in cache.",[N2]:"The logout request was null or undefined.",[$6]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[M2]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[JI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[L2]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[F2]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ex]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[W6]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[j6]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[G6]:"Invalid authentication header provided",[V6]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[z6]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Y6]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Rme={redirectUriNotSet:{code:R2,desc:oc[R2]},claimsRequestParsingError:{code:H6,desc:oc[H6]},authorityUriInsecure:{code:k2,desc:oc[k2]},urlParseError:{code:gC,desc:oc[gC]},urlEmptyError:{code:P2,desc:oc[P2]},emptyScopesError:{code:D2,desc:oc[D2]},invalidClaimsRequest:{code:KI,desc:oc[KI]},tokenRequestEmptyError:{code:B2,desc:oc[B2]},logoutRequestEmptyError:{code:N2,desc:oc[N2]},invalidCodeChallengeMethod:{code:$6,desc:oc[$6]},invalidCodeChallengeParams:{code:M2,desc:oc[M2]},invalidCloudDiscoveryMetadata:{code:JI,desc:oc[JI]},invalidAuthorityMetadata:{code:L2,desc:oc[L2]},untrustedAuthority:{code:F2,desc:oc[F2]},missingSshJwk:{code:ex,desc:oc[ex]},missingSshKid:{code:W6,desc:oc[W6]},missingNonceAuthenticationHeader:{code:j6,desc:oc[j6]},invalidAuthenticationHeader:{code:G6,desc:oc[G6]},cannotSetOIDCOptions:{code:V6,desc:oc[V6]},cannotAllowPlatformBroker:{code:z6,desc:oc[z6]},authorityMismatch:{code:Y6,desc:oc[Y6]}},QD=class t extends oi{static{s(this,"ClientConfigurationError")}constructor(e){super(e,oc[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function ys(t){return new QD(t)}s(ys,"createClientConfigurationError");d();var Sa=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var tl=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?Sa.trimArrayEntries([...e]):[],n=r?Sa.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ys(D2);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||rt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(rt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return xme.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw vt(b2)}}removeScope(e){if(!e)throw vt(E2);this.scopes.delete(e.trim())}removeOIDCScopes(){xme.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw vt(VI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw vt(VI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):rt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function UD(t,e){if(!t)throw vt(f2);try{let r=e(t);return JSON.parse(r)}catch{throw vt(WI)}}s(UD,"buildClientInfo");function AC(t){if(!t)throw vt(WI);let e=t.split(ic.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?rt.EMPTY_STRING:e[1]}}s(AC,"buildClientInfoFromHomeAccountId");d();function xFe(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(xFe,"tenantIdMatchesHomeTenant");function K6(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:xFe(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:xFe(r,t)}}s(K6,"buildTenantProfile");function xV(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=K6(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(xV,"updateAccountTenantProfileData");d();var Jm={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function EV(t){return t&&(t.tid||t.tfp||t.acr)||null}s(EV,"getTenantIdFromIdTokenClaims");d();var Dd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var $u=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===Jm.Adfs?i.authorityType=u2.ADFS_ACCOUNT_TYPE:r.protocolMode===Dd.OIDC?i.authorityType=u2.GENERIC_ACCOUNT_TYPE:i.authorityType=u2.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=UD(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw vt(Kv);i.environment=a,i.realm=o?.utid||EV(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=K6(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||u2.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===Jm.Adfs||r===Jm.Dsts)){if(e)try{let a=UD(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var Wu={};Ca(Wu,{getDeserializedResponse:()=>kme,mapToQueryString:()=>yC,stripLeadingHashOrQuery:()=>EFe});d();function EFe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(EFe,"stripLeadingHashOrQuery");function kme(t){if(!t||t.indexOf("=")<0)return null;try{let e=EFe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw vt(g2)}return null}s(kme,"getDeserializedResponse");function yC(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(yC,"mapToQueryString");var Bi=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ys(P2);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return Sa.endsWith(r,"?")?r=r.slice(0,-1):Sa.endsWith(r,"?/")&&(r=r.slice(0,-2)),Sa.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ys(gC)}if(!e.HostNameAndPort||!e.PathSegments)throw ys(gC);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ys(k2)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===u0.COMMON||n[0]===u0.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ys(gC);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ys(gC);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===rt.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!kme(e)}};var IFe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Pme=IFe.endpointMetadata,Dme=IFe.instanceDiscoveryMetadata,Bme=new Set;Dme.metadata.forEach(t=>{t.aliases.forEach(e=>{Bme.add(e)})});function TFe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new Bi(n).getUrlComponents().HostNameAndPort;r=bFe(i,t.cloudDiscoveryMetadata?.metadata,ff.CONFIG,e)||bFe(i,Dme.metadata,ff.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(TFe,"getAliasesFromStaticSources");function bFe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=J6(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(bFe,"getAliasesFromMetadata");function wFe(t){return J6(Dme.metadata,t)}s(wFe,"getCloudDiscoveryMetadataFromHardcodedValues");function J6(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(J6,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var Nme="cache_quota_exceeded",bV="cache_error_unknown";var Mme={[Nme]:"Exceeded cache storage capacity.",[bV]:"Unexpected error occurred when using cache storage."},X6=class t extends oi{static{s(this,"CacheError")}constructor(e,r){let n=r||(Mme[e]?Mme[e]:Mme[bV]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function SFe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new X6(Nme):new X6(t.name,t.message):new X6(bV)}s(SFe,"createCacheError");var XI=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(gV,MD),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=Zv(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=xV(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw vt(I2);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof oi?i:SFe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=tl.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&tl.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(ic.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(ic.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(_o.ID_TOKEN.toLowerCase())===-1&&r.indexOf(_o.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(_o.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(_o.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(_o.REFRESH_TOKEN.toLowerCase())>-1){let n=`${_o.REFRESH_TOKEN}${ic.CACHE_KEY_SEPARATOR}${this.clientId}${ic.CACHE_KEY_SEPARATOR}`,i=`${_o.REFRESH_TOKEN}${ic.CACHE_KEY_SEPARATOR}${Vv}${ic.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===_o.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===co.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==_o.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==co.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=$u.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:_o.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&f.set(h,m)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=tl.createSearchScopes(r.scopes),c=r.authenticationScheme||co.BEARER,l=c&&c.toLowerCase()!==co.BEARER.toLowerCase()?_o.ACCESS_TOKEN_WITH_AUTH_SCHEME:_o.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(U6(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?Vv:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:_o.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw vt(v2);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Vv)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=TFe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==_o.ACCESS_TOKEN&&e.credentialType!==_o.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:tl.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(y6)!==-1}isAuthorityMetadata(e){return e.indexOf(PD.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${PD.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},Z6=class extends XI{static{s(this,"DefaultStorageClass")}async setAccount(){throw vt(Di)}getAccount(){throw vt(Di)}async setIdTokenCredential(){throw vt(Di)}getIdTokenCredential(){throw vt(Di)}async setAccessTokenCredential(){throw vt(Di)}getAccessTokenCredential(){throw vt(Di)}async setRefreshTokenCredential(){throw vt(Di)}getRefreshTokenCredential(){throw vt(Di)}setAppMetadata(){throw vt(Di)}getAppMetadata(){throw vt(Di)}setServerTelemetry(){throw vt(Di)}getServerTelemetry(){throw vt(Di)}setAuthorityMetadata(){throw vt(Di)}getAuthorityMetadata(){throw vt(Di)}getAuthorityMetadataKeys(){throw vt(Di)}setThrottlingCache(){throw vt(Di)}getThrottlingCache(){throw vt(Di)}removeItem(){throw vt(Di)}getKeys(){throw vt(Di)}getAccountKeys(){throw vt(Di)}getTokenKeys(){throw vt(Di)}};d();d();var Ke={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},ten=new Map([[Ke.AcquireTokenByCode,"ATByCode"],[Ke.AcquireTokenByRefreshToken,"ATByRT"],[Ke.AcquireTokenSilent,"ATS"],[Ke.AcquireTokenSilentAsync,"ATSAsync"],[Ke.AcquireTokenPopup,"ATPopup"],[Ke.AcquireTokenRedirect,"ATRedirect"],[Ke.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ke.CryptoOptsSignJwt,"CryptoSignJwt"],[Ke.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ke.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ke.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ke.SsoSilent,"SsoSlt"],[Ke.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ke.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ke.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ke.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ke.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ke.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ke.BrokerHandhshake,"BrokerHandshake"],[Ke.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ke.AcquireTokenByBroker,"ATByBroker"],[Ke.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ke.RefreshTokenClientAcquireToken,"RTClientAT"],[Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ke.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ke.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ke.AcquireTokenFromCache,"ATFromCache"],[Ke.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ke.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ke.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ke.InitializeBaseRequest,"InitBaseReq"],[Ke.InitializeSilentRequest,"InitSltReq"],[Ke.InitializeClientApplication,"InitClientApplication"],[Ke.InitializeCache,"InitCache"],[Ke.ImportExistingCache,"importCache"],[Ke.SetUserData,"setUserData"],[Ke.LocalStorageUpdated,"localStorageUpdated"],[Ke.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ke.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ke.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ke.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ke.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ke.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ke.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ke.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ke.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ke.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ke.HandleCodeResponse,"HandleCodeResp"],[Ke.HandleResponseEar,"HandleRespEar"],[Ke.HandleResponseCode,"HandleRespCode"],[Ke.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ke.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ke.AuthClientAcquireToken,"AuthClientAT"],[Ke.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ke.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ke.PopTokenGenerateCnf,"PopTGenCnf"],[Ke.PopTokenGenerateKid,"PopTGenKid"],[Ke.HandleServerTokenResponse,"HandleServerTRes"],[Ke.DeserializeResponse,"DeserializeRes"],[Ke.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ke.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ke.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ke.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ke.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ke.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ke.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ke.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ke.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ke.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ke.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ke.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ke.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ke.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ke.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ke.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ke.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ke.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ke.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ke.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ke.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ke.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ke.GeneratePkceCodes,"GenPkceCodes"],[Ke.GenerateCodeVerifier,"GenCodeVerifier"],[Ke.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ke.Sha256Digest,"Sha256Digest"],[Ke.GetRandomValues,"GetRandomValues"],[Ke.GenerateHKDF,"genHKDF"],[Ke.GenerateBaseKey,"genBaseKey"],[Ke.Base64Decode,"b64Decode"],[Ke.UrlEncodeArr,"urlEncArr"],[Ke.Encrypt,"encrypt"],[Ke.Decrypt,"decrypt"],[Ke.GenerateEarKey,"genEarKey"],[Ke.DecryptEarResponse,"decryptEarResp"]]),_Fe={NotStarted:0,InProgress:1,Completed:2};var IV=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},O2=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:_Fe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new IV}}startPerformanceMeasurement(){return new IV}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var E4t={tokenRenewalOffsetSeconds:DD,preventCorsPreflight:!1},b4t={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ha.Info,correlationId:rt.EMPTY_STRING},I4t={claimsBasedCachingEnabled:!1},T4t={async sendGetRequestAsync(){throw vt(Di)},async sendPostRequestAsync(){throw vt(Di)}},w4t={sku:rt.SKU,version:MD,cpu:rt.EMPTY_STRING,os:rt.EMPTY_STRING},S4t={clientSecret:rt.EMPTY_STRING,clientAssertion:void 0},_4t={azureCloudInstance:Xv.None,tenant:`${rt.DEFAULT_COMMON_TENANT}`},R4t={application:{appName:"",appVersion:""}};function RFe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:m}){let h={...b4t,...r};return{authOptions:k4t(t),systemOptions:{...E4t,...e},loggerOptions:h,cacheOptions:{...I4t,...n},storageInterface:i||new Z6(t.clientId,ND,new bp(h),new O2),networkInterface:o||T4t,cryptoInterface:a||ND,clientCredentials:c||S4t,libraryInfo:{...w4t,...l},telemetry:{...R4t,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}s(RFe,"buildClientConfiguration");function k4t(t){return{clientCapabilities:[],azureCloudOptions:_4t,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(k4t,"buildAuthOptions");function TV(t){return t.authOptions.authority.options.protocolMode===Dd.OIDC}s(TV,"isOidcProtocolMode");d();var mf={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var pr={};Ca(pr,{addApplicationTelemetry:()=>rF,addAuthorizationCode:()=>whe,addBrokerParameters:()=>nx,addCcsOid:()=>tx,addCcsUpn:()=>ZI,addClaims:()=>W2,addClientAssertion:()=>oF,addClientAssertionType:()=>sF,addClientCapabilitiesToClaims:()=>kFe,addClientId:()=>H2,addClientInfo:()=>G2,addClientSecret:()=>iF,addCodeChallengeParams:()=>j4t,addCodeVerifier:()=>_he,addCorrelationId:()=>j2,addDeviceCode:()=>G4t,addDomainHint:()=>bhe,addEARParameters:()=>J4t,addExtraQueryParameters:()=>rx,addGrantType:()=>aF,addIdTokenHint:()=>Ehe,addInstanceAware:()=>cF,addLibraryInfo:()=>tF,addLoginHint:()=>HD,addLogoutHint:()=>Rhe,addNativeBroker:()=>W4t,addNonce:()=>The,addOboAssertion:()=>V4t,addPassword:()=>K4t,addPopToken:()=>lF,addPostLogoutRedirectUri:()=>xhe,addPrompt:()=>Ihe,addRedirectUri:()=>$2,addRefreshToken:()=>She,addRequestTokenUse:()=>z4t,addResponseMode:()=>vhe,addResponseType:()=>$4t,addScopes:()=>q2,addServerTelemetry:()=>dF,addSid:()=>PV,addSshJwk:()=>uF,addState:()=>nF,addThrottling:()=>fF,addUsername:()=>Y4t,instrumentBrokerParams:()=>U2});d();var Q2={};Ca(Q2,{ACCESS_TOKEN:()=>B4t,BROKER_CLIENT_ID:()=>eF,BROKER_REDIRECT_URI:()=>kV,CCS_HEADER:()=>q4t,CLAIMS:()=>Qme,CLIENT_ASSERTION:()=>lhe,CLIENT_ASSERTION_TYPE:()=>uhe,CLIENT_ID:()=>CC,CLIENT_INFO:()=>O4t,CLIENT_REQUEST_ID:()=>Yme,CLIENT_SECRET:()=>che,CODE:()=>jme,CODE_CHALLENGE:()=>Gme,CODE_CHALLENGE_METHOD:()=>Vme,CODE_VERIFIER:()=>zme,DEVICE_CODE:()=>ahe,DOMAIN_HINT:()=>Ahe,EAR_JWE_CRYPTO:()=>Che,EAR_JWK:()=>yhe,ERROR:()=>P4t,ERROR_DESCRIPTION:()=>D4t,EXPIRES_IN:()=>M4t,FOCI:()=>U4t,GRANT_TYPE:()=>Ome,ID_TOKEN:()=>N4t,ID_TOKEN_HINT:()=>she,INSTANCE_AWARE:()=>qD,LOGIN_HINT:()=>ghe,LOGOUT_HINT:()=>mhe,NATIVE_BROKER:()=>phe,NONCE:()=>$me,OBO_ASSERTION:()=>dhe,ON_BEHALF_OF:()=>Q4t,POST_LOGOUT_URI:()=>ohe,PROMPT:()=>Wme,REDIRECT_URI:()=>wV,REFRESH_TOKEN:()=>qme,REFRESH_TOKEN_EXPIRES_IN:()=>L4t,REQUESTED_TOKEN_USE:()=>fhe,REQ_CNF:()=>_V,RESPONSE_MODE:()=>Fme,RESPONSE_TYPE:()=>Lme,RETURN_SPA_CODE:()=>RV,SCOPE:()=>Ume,SESSION_STATE:()=>F4t,SID:()=>hhe,STATE:()=>Hme,TOKEN_TYPE:()=>SV,X_APP_NAME:()=>nhe,X_APP_VER:()=>ihe,X_CLIENT_CPU:()=>Zme,X_CLIENT_CURR_TELEM:()=>ehe,X_CLIENT_EXTRA_SKU:()=>H4t,X_CLIENT_LAST_TELEM:()=>the,X_CLIENT_OS:()=>Xme,X_CLIENT_SKU:()=>Kme,X_CLIENT_VER:()=>Jme,X_MS_LIB_CAPABILITY:()=>rhe});d();var CC="client_id",wV="redirect_uri",Lme="response_type",Fme="response_mode",Ome="grant_type",Qme="claims",Ume="scope",P4t="error",D4t="error_description",B4t="access_token",N4t="id_token",qme="refresh_token",M4t="expires_in",L4t="refresh_token_expires_in",Hme="state",$me="nonce",Wme="prompt",F4t="session_state",O4t="client_info",jme="code",Gme="code_challenge",Vme="code_challenge_method",zme="code_verifier",Yme="client-request-id",Kme="x-client-SKU",Jme="x-client-VER",Xme="x-client-OS",Zme="x-client-CPU",ehe="x-client-current-telemetry",the="x-client-last-telemetry",rhe="x-ms-lib-capability",nhe="x-app-name",ihe="x-app-ver",ohe="post_logout_redirect_uri",she="id_token_hint",ahe="device_code",che="client_secret",lhe="client_assertion",uhe="client_assertion_type",SV="token_type",_V="req_cnf",dhe="assertion",fhe="requested_token_use",Q4t="on_behalf_of",U4t="foci",q4t="X-AnchorMailbox",RV="return_spa_code",phe="nativebroker",mhe="logout_hint",hhe="sid",ghe="login_hint",Ahe="domain_hint",H4t="x-client-xtra-sku",eF="brk_client_id",kV="brk_redirect_uri",qD="instance_aware",yhe="ear_jwk",Che="ear_jwe_crypto";function U2(t,e,r){if(!e)return;let n=t.get(CC);n&&t.has(eF)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(wV)},e)}s(U2,"instrumentBrokerParams");function $4t(t,e){t.set(Lme,e)}s($4t,"addResponseType");function vhe(t,e){t.set(Fme,e||mC.QUERY)}s(vhe,"addResponseMode");function W4t(t){t.set(phe,"1")}s(W4t,"addNativeBroker");function q2(t,e,r=!0,n=l0){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new tl(i);t.set(Ume,o.printScopes())}s(q2,"addScopes");function H2(t,e){t.set(CC,e)}s(H2,"addClientId");function $2(t,e){t.set(wV,e)}s($2,"addRedirectUri");function xhe(t,e){t.set(ohe,e)}s(xhe,"addPostLogoutRedirectUri");function Ehe(t,e){t.set(she,e)}s(Ehe,"addIdTokenHint");function bhe(t,e){t.set(Ahe,e)}s(bhe,"addDomainHint");function HD(t,e){t.set(ghe,e)}s(HD,"addLoginHint");function ZI(t,e){t.set(Ls.CCS_HEADER,`UPN:${e}`)}s(ZI,"addCcsUpn");function tx(t,e){t.set(Ls.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(tx,"addCcsOid");function PV(t,e){t.set("sid",e)}s(PV,"addSid");function W2(t,e,r){let n=kFe(e,r);try{JSON.parse(n)}catch{throw ys(KI)}t.set(Qme,n)}s(W2,"addClaims");function j2(t,e){t.set(Yme,e)}s(j2,"addCorrelationId");function tF(t,e){t.set(Kme,e.sku),t.set(Jme,e.version),e.os&&t.set(Xme,e.os),e.cpu&&t.set(Zme,e.cpu)}s(tF,"addLibraryInfo");function rF(t,e){e?.appName&&t.set(nhe,e.appName),e?.appVersion&&t.set(ihe,e.appVersion)}s(rF,"addApplicationTelemetry");function Ihe(t,e){t.set(Wme,e)}s(Ihe,"addPrompt");function nF(t,e){e&&t.set(Hme,e)}s(nF,"addState");function The(t,e){t.set($me,e)}s(The,"addNonce");function j4t(t,e,r){if(e&&r)t.set(Gme,e),t.set(Vme,r);else throw ys(M2)}s(j4t,"addCodeChallengeParams");function whe(t,e){t.set(jme,e)}s(whe,"addAuthorizationCode");function G4t(t,e){t.set(ahe,e)}s(G4t,"addDeviceCode");function She(t,e){t.set(qme,e)}s(She,"addRefreshToken");function _he(t,e){t.set(zme,e)}s(_he,"addCodeVerifier");function iF(t,e){t.set(che,e)}s(iF,"addClientSecret");function oF(t,e){e&&t.set(lhe,e)}s(oF,"addClientAssertion");function sF(t,e){e&&t.set(uhe,e)}s(sF,"addClientAssertionType");function V4t(t,e){t.set(dhe,e)}s(V4t,"addOboAssertion");function z4t(t,e){t.set(fhe,e)}s(z4t,"addRequestTokenUse");function aF(t,e){t.set(Ome,e)}s(aF,"addGrantType");function G2(t){t.set(CFe,"1")}s(G2,"addClientInfo");function cF(t){t.has(qD)||t.set(qD,"true")}s(cF,"addInstanceAware");function rx(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(rx,"addExtraQueryParameters");function kFe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw ys(KI)}return e&&e.length>0&&(r.hasOwnProperty(l2.ACCESS_TOKEN)||(r[l2.ACCESS_TOKEN]={}),r[l2.ACCESS_TOKEN][l2.XMS_CC]={values:e}),JSON.stringify(r)}s(kFe,"addClientCapabilitiesToClaims");function Y4t(t,e){t.set(v6.username,e)}s(Y4t,"addUsername");function K4t(t,e){t.set(v6.password,e)}s(K4t,"addPassword");function lF(t,e){e&&(t.set(SV,co.POP),t.set(_V,e))}s(lF,"addPopToken");function uF(t,e){e&&(t.set(SV,co.SSH),t.set(_V,e))}s(uF,"addSshJwk");function dF(t,e){t.set(ehe,e.generateCurrentRequestHeaderValue()),t.set(the,e.generateLastRequestHeaderValue())}s(dF,"addServerTelemetry");function fF(t){t.set(rhe,hC.X_MS_LIB_CAPABILITY_VALUE)}s(fF,"addThrottling");function Rhe(t,e){t.set(mhe,e)}s(Rhe,"addLogoutHint");function nx(t,e,r){t.has(eF)||t.set(eF,e),t.has(kV)||t.set(kV,r)}s(nx,"addBrokerParameters");function J4t(t,e){t.set(yhe,encodeURIComponent(e)),t.set(Che,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(J4t,"addEARParameters");var BV={};Ca(BV,{createDiscoveredInstance:()=>Phe});d();d();d();function PFe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(PFe,"isOpenIdConfigResponse");d();function DFe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(DFe,"isCloudInstanceDiscoveryResponse");d();function BFe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(BFe,"isCloudInstanceDiscoveryErrorResponse");d();d();var NFe=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),lo=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var pF=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=d2.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await lo(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(rt.IMDS_VERSION,i);if(o.status===ii.SUCCESS&&(n=o.body,r.region_source=d2.IMDS),o.status===ii.BAD_REQUEST){let a=await lo(this.getCurrentVersion.bind(this),Ke.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=d2.FAILED_AUTO_DETECTION,null;let c=await lo(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===ii.SUCCESS&&(n=c.body,r.region_source=d2.IMDS)}}catch{return r.region_source=d2.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=d2.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,rt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?format=json`,e);return r.status===ii.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};pF.IMDS_OPTIONS={headers:{Metadata:"true"}};var pA=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new pF(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL))return Jm.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case rt.ADFS:return Jm.Adfs;case rt.DSTS:return Jm.Dsts}return Jm.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Bi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw vt(pf)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw vt(pf)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw vt(pf)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw vt(S2);return this.replacePath(this.metadata.end_session_endpoint)}else throw vt(pf)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw vt(pf)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw vt(pf)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Jm.Default&&this.protocolMode!==Dd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new Bi(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new Bi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Jm.Adfs||this.protocolMode===Dd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await lo(this.updateCloudDiscoveryMetadata.bind(this),Ke.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await lo(this.updateEndpointMetadata.bind(this),Ke.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:CV(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==ff.CACHE&&n?.source!==ff.CACHE&&(e.expiresAt=CV(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===ff.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await lo(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);FD(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await lo(this.getEndpointMetadataFromNetwork.bind(this),Ke.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await lo(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),FD(e,n,!0),ff.NETWORK;throw vt(h2,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),FD(e,r,!1),{source:ff.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return FD(e,i,!1),{source:ff.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=vV(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ff.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Bi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ys(L2)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return PFe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Pme?Pme[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==rt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=mV.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await lo(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ke.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=mV.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=mV.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await lo(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return q6(e,n,!0),ff.NETWORK;throw ys(F2)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||rt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),q6(e,r,!1),ff.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=wFe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),q6(e,i,!1),ff.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=vV(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),ff.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Jm.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=J6(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ys(JI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${rt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(DFe(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(BFe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===rt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=J6(a,this.hostnameAndPort)}catch(i){if(i instanceof oi)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Bi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Xv.None){let i=r.tenant?r.tenant:rt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return rt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw vt(pf)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Bme.has(e)}static isPublicCloudAuthority(e){return rt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new Bi(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${rt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=Bi.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new Bi(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${rt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};pA.reservedTenantDomains=new Set(["{tenant}","{tenantid}",u0.COMMON,u0.CONSUMERS,u0.ORGANIZATIONS]);function MFe(t){let n=new Bi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case u0.COMMON:case u0.ORGANIZATIONS:case u0.CONSUMERS:return;default:return n}}s(MFe,"getTenantFromAuthorityString");function DV(t){return t.endsWith(rt.FORWARD_SLASH)?t:`${t}${rt.FORWARD_SLASH}`}s(DV,"formatAuthorityUri");function khe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ys(JI)}return{canonicalAuthority:t.authority?DV(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(khe,"buildStaticAuthorityOptions");async function Phe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ke.AuthorityFactoryCreateDiscoveredInstance,o);let c=pA.transformCIAMAuthority(DV(t)),l=new pA(c,e,r,n,i,o,a);try{return await lo(l.resolveEndpointsAsync.bind(l),Ke.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw vt(pf)}}s(Phe,"createDiscoveredInstance");d();d();var hf=class t extends oi{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function $D(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s($D,"getRequestThumbprint");var mF=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${hC.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new hf(o.errorCodes?.join(" ")||rt.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Ls.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ls.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||hC.DEFAULT_THROTTLE_TIME_SECONDS),n+hC.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=$D(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var NV=class t extends oi{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var ju=class{static{s(this,"BaseClient")}constructor(e,r){this.config=RFe(e),this.logger=new bp(this.config.loggerOptions,gV,MD),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Ls.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case mf.HOME_ACCOUNT_ID:try{let n=AC(e.credential);r[Ls.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case mf.UPN:r[Ls.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){mF.preProcess(this.cacheManager,e,i);let o;try{o=await lo(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ke.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Ls.X_MS_HTTP_VERSION]||"",requestId:a[Ls.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof NV){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Ls.X_MS_HTTP_VERSION]||"",requestId:c[Ls.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Ls.CONTENT_TYPE]||void 0,contentLengthHeader:c[Ls.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof oi?a:vt(m2)}return mF.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ke.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Phe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&nx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&rx(r,e.tokenQueryParameters),j2(r,e.correlationId),U2(r,e.correlationId,this.performanceClient),yC(r)}};d();d();var LV={};Ca(LV,{badToken:()=>tT,consentRequired:()=>Bhe,interactionRequired:()=>Dhe,loginRequired:()=>Nhe,nativeAccountUnavailable:()=>hF,noTokensFound:()=>eT,refreshTokenExpired:()=>gF,uxNotAllowed:()=>MV});d();var eT="no_tokens_found",hF="native_account_unavailable",gF="refresh_token_expired",MV="ux_not_allowed",Dhe="interaction_required",Bhe="consent_required",Nhe="login_required",tT="bad_token";var LFe=[Dhe,Bhe,Nhe,tT,MV],X4t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],FV={[eT]:"No refresh token found in the cache. Please sign-in.",[hF]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[gF]:"Refresh token has expired.",[tT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[MV]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Mhe={noTokensFoundError:{code:eT,desc:FV[eT]},native_account_unavailable:{code:hF,desc:FV[hF]},bad_token:{code:tT,desc:FV[tT]}},Tp=class t extends oi{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||rt.EMPTY_STRING,this.traceId=o||rt.EMPTY_STRING,this.correlationId=a||rt.EMPTY_STRING,this.claims=c||rt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function OV(t,e,r){let n=!!t&&LFe.indexOf(t)>-1,i=!!r&&X4t.indexOf(r)>-1,o=!!e&&LFe.some(a=>e.indexOf(a)>-1);return n||o||i}s(OV,"isInteractionRequiredError");function QV(t){return new Tp(t,FV[t])}s(QV,"createInteractionRequiredAuthError");d();var UV=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${rt.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw vt(zI);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw vt(zI);if(!r)throw vt(fA);try{let n=r.split(rt.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(rt.RESOURCE_DELIM):rt.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||rt.EMPTY_STRING,libraryState:c}}catch{throw vt(fA)}}};d();var Z4t={SW:"sw"},rT=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateCnf,e.correlationId);let n=await lo(this.generateKid.bind(this),Ke.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Z4t.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new Bi(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Ip(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var wp=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Dc=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||rt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||rt.NOT_AVAILABLE} - Description: ${e.error_description||rt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||rt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||rt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new hf(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=ii.SERVER_ERROR_RANGE_START&&e.status<=ii.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=ii.CLIENT_ERROR_RANGE_START&&e.status<=ii.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw OV(e.error,e.error_description,e.suberror)?new Tp(e.error,e.error_description,e.suberror,e.timestamp||rt.EMPTY_STRING,e.trace_id||rt.EMPTY_STRING,e.correlation_id||rt.EMPTY_STRING,e.claims||rt.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ke.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=Zv(e.id_token||rt.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw vt(y2);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw vt(zv);O6(g,i.maxAge)}}this.homeAccountIdentifier=$u.generateHomeAccountId(e.client_info||rt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=UV.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,f,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new wp(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw vt(Kv);let u=EV(o),f,p;e.id_token&&o&&(f=wme(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=FFe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let A=e.scope?tl.fromString(e.scope):new tl(i.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,S=n+y,R=S+E,B=b&&b>0?n+b:void 0;m=Sme(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",A.printScopes(),S,R,this.cryptoObj.base64Decode,B,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=n+y}h=_me(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,A)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=rt.EMPTY_STRING,p=[],m=null,h,g,A=rt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===co.POP&&!o.popKid){let S=new rT(e),{secret:R,keyId:B}=n.accessToken;if(!B)throw vt(_2);f=await S.signPopToken(R,B,o)}else f=n.accessToken.secret;p=tl.fromString(n.accessToken.target).asArray(),m=Q6(n.accessToken.expiresOn),h=Q6(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=Q6(n.accessToken.refreshOn))}n.appMetadata&&(A=n.appMetadata.familyId===Vv?Vv:"");let y=a?.oid||a?.sub||"",E=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?xV(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:y,tenantId:E,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||rt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||rt.EMPTY_STRING,state:c?c.userRequestState:rt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||rt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||rt.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function FFe(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let A=g||$u.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),y=A.tenantProfiles||[],E=l||A.realm;if(E&&!y.find(b=>b.tenantId===E)){let b=K6(r,A.localAccountId,E,o);y.push(b)}return A.tenantProfiles=y,A}s(FFe,"buildAccountToCache");d();async function gf(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(gf,"getClientAssertion");var AF=class extends ju{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ke.AuthClientAcquireToken,e.correlationId),!e.code)throw vt(x2);let n=Ip(),i=await lo(this.executeTokenRequest.bind(this),Ke.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Ls.X_MS_REQUEST_ID],a=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),lo(a.handleServerTokenResponse.bind(a),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw ys(N2);let r=this.createLogoutUrlQueryString(e);return Bi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=Bi.appendQueryString(e.tokenEndpoint,n),o=await lo(this.createTokenRequestBody.bind(this),Ke.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=UD(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${ic.CLIENT_INFO_SEPARATOR}${u.utid}`,type:mf.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=$D(this.config.authOptions.clientId,r);return lo(this.executePostToTokenEndpoint.bind(this),Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ke.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(H2(r,e.embeddedClientId||e.tokenBodyParameters?.[CC]||this.config.authOptions.clientId),this.includeRedirectUri)$2(r,e.redirectUri);else if(!e.redirectUri)throw ys(R2);if(q2(r,e.scopes,!0,this.oidcDefaultScopes),whe(r,e.code),tF(r,this.config.libraryInfo),rF(r,this.config.telemetry.application),fF(r),this.serverTelemetryManager&&!TV(this.config)&&dF(r,this.serverTelemetryManager),e.codeVerifier&&_he(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&iF(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;oF(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),sF(r,i.assertionType)}if(aF(r,d0.AUTHORIZATION_CODE_GRANT),G2(r),e.authenticationScheme===co.POP){let i=new rT(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await lo(i.generateCnf.bind(i),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,lF(r,o)}else if(e.authenticationScheme===co.SSH)if(e.sshJwk)uF(r,e.sshJwk);else throw ys(ex);(!Sa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&W2(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=UD(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${ic.CLIENT_INFO_SEPARATOR}${i.utid}`,type:mf.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case mf.HOME_ACCOUNT_ID:try{let i=AC(n.credential);tx(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case mf.UPN:ZI(r,n.credential);break}return e.embeddedClientId&&nx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&rx(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RV])&&rx(r,{[RV]:"1"}),U2(r,e.correlationId,this.performanceClient),yC(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&xhe(r,e.postLogoutRedirectUri),e.correlationId&&j2(r,e.correlationId),e.idTokenHint&&Ehe(r,e.idTokenHint),e.state&&nF(r,e.state),e.logoutHint&&Rhe(r,e.logoutHint),e.extraQueryParameters&&rx(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&cF(r),yC(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var eDt=300,V2=class extends ju{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireToken,e.correlationId);let r=Ip(),n=await lo(this.executeTokenRequest.bind(this),Ke.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Ls.X_MS_REQUEST_ID],o=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),lo(o.handleServerTokenResponse.bind(o),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ys(B2);if(this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw vt(Yv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof Tp&&n.errorCode===eT,o=n instanceof hf&&n.errorCode===C6.INVALID_GRANT_ERROR&&n.subError===C6.CLIENT_MISMATCH_ERROR;if(i||o)return lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=NFe(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ke.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw QV(eT);if(n.expiresOn&&LD(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||eDt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),QV(gF);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||co.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:mf.HOME_ACCOUNT_ID}};try{return await lo(this.acquireToken.bind(this),Ke.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof Tp&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===tT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=U6(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=Bi.appendQueryString(r.tokenEndpoint,n),o=await lo(this.createTokenRequestBody.bind(this),Ke.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=$D(this.config.authOptions.clientId,e);return lo(this.executePostToTokenEndpoint.bind(this),Ke.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ke.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(H2(r,e.embeddedClientId||e.tokenBodyParameters?.[CC]||this.config.authOptions.clientId),e.redirectUri&&$2(r,e.redirectUri),q2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),aF(r,d0.REFRESH_TOKEN_GRANT),G2(r),tF(r,this.config.libraryInfo),rF(r,this.config.telemetry.application),fF(r),this.serverTelemetryManager&&!TV(this.config)&&dF(r,this.serverTelemetryManager),She(r,e.refreshToken),this.config.clientCredentials.clientSecret&&iF(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;oF(r,await gf(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),sF(r,n.assertionType)}if(e.authenticationScheme===co.POP){let n=new rT(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await lo(n.generateCnf.bind(n),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,lF(r,i)}else if(e.authenticationScheme===co.SSH)if(e.sshJwk)uF(r,e.sshJwk);else throw ys(ex);if((!Sa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&W2(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case mf.HOME_ACCOUNT_ID:try{let n=AC(e.ccsCredential.credential);tx(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case mf.UPN:ZI(r,e.ccsCredential.credential);break}return e.embeddedClientId&&nx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&rx(r,e.tokenBodyParameters),U2(r,e.correlationId,this.performanceClient),yC(r)}};d();var yF=class extends ju{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ws.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Sa.isEmptyObj(e.claims))throw this.setCacheOutcome(ws.FORCE_REFRESH_OR_CLAIMS,e.correlationId),vt(Jv);if(!e.account)throw vt(Yv);let n=e.account.tenantId||MFe(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(Tme(o.cachedAt)||LD(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),vt(Jv);o.refreshOn&&LD(o.refreshOn,0)&&(r=ws.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN,e.correlationId),vt(Jv);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await lo(this.generateResultFromCacheRecord.bind(this),Ke.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==ws.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=Zv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw vt(zv);O6(i,r.maxAge)}return Dc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var CF={};Ca(CF,{getAuthorizationCodePayload:()=>nDt,getAuthorizeUrl:()=>rDt,getStandardAuthorizeRequestParameters:()=>tDt,validateAuthorizationResponse:()=>OFe});d();function tDt(t,e,r,n){let i=e.correlationId,o=new Map;H2(o,e.embeddedClientId||e.extraQueryParameters?.[CC]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(q2(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),$2(o,e.redirectUri),j2(o,i),vhe(o,e.responseMode),G2(o),e.prompt&&(Ihe(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(bhe(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==$I.SELECT_ACCOUNT)if(e.sid&&e.prompt===$I.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),PV(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=oDt(e.account),l=sDt(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),HD(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=AC(e.account.homeAccountId);tx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===$I.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),PV(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=AC(e.account.homeAccountId);tx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),HD(o,e.loginHint),ZI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),HD(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=AC(e.account.homeAccountId);tx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),HD(o,e.loginHint),ZI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&The(o,e.nonce),e.state&&nF(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&W2(o,e.claims,t.clientCapabilities),e.embeddedClientId&&nx(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(qD))&&cF(o),o}s(tDt,"getStandardAuthorizeRequestParameters");function rDt(t,e,r,n){let i=yC(e,r,n);return Bi.appendQueryString(t.authorizationEndpoint,i)}s(rDt,"getAuthorizeUrl");function nDt(t,e){if(OFe(t,e),!t.code)throw vt(w2);return t}s(nDt,"getAuthorizationCodePayload");function OFe(t,e){if(!t.state||!e)throw t.state?vt(GI,"Cached State"):vt(GI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw vt(fA,t.state)}try{n=decodeURIComponent(e)}catch{throw vt(fA,t.state)}if(r!==n)throw vt(A2);if(t.error||t.error_description||t.suberror){let i=iDt(t);throw OV(t.error,t.error_description,t.suberror)?new Tp(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new hf(t.error||"",t.error_description,t.suberror,i)}}s(OFe,"validateAuthorizationResponse");function iDt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(iDt,"parseServerErrorNo");function oDt(t){return t.idTokenClaims?.sid||null}s(oDt,"extractAccountSid");function sDt(t){return t.idTokenClaims?.login_hint||null}s(sDt,"extractLoginHint");d();var QFe=",",UFe="|";function aDt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(QFe),c.length<4)return e}else c=Array.from({length:4},()=>UFe);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&cDt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(QFe)}s(aDt,"makeExtraSkuString");function cDt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(UFe))}s(cDt,"setSku");var z2=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=ws.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||rt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||rt.EMPTY_STRING,this.telemetryCacheKey=Dl.CACHE_KEY+ic.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Dl.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(Dl.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(Dl.VALUE_SEPARATOR);return[Dl.SCHEMA_VERSION,a,i].join(Dl.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Dl.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(Dl.VALUE_SEPARATOR),o=e.errors.length,a=r<o?Dl.OVERFLOW_TRUE:Dl.OVERFLOW_FALSE,c=[o,a].join(Dl.VALUE_SEPARATOR);return[Dl.SCHEMA_VERSION,e.cacheHits,n,i,c].join(Dl.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Dl.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof oi?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Dl.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||rt.EMPTY_STRING,c=e.failedRequests[2*r+1]||rt.EMPTY_STRING,l=e.errors[r]||rt.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<Dl.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||rt.EMPTY_STRING),e.push(this.regionSource||rt.EMPTY_STRING),e.push(this.regionOutcome||rt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return aDt(e)}};var ix=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new $u;XI.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var qFe="system_assigned_managed_identity",mDt="managed_identity",Fhe=`https://login.microsoftonline.com/${mDt}/`,f0={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},rl={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},qn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Jn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},$a={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},ta={GET:"get",POST:"post"},qV={SUCCESS_RANGE_START:ii.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ii.SUCCESS_RANGE_END,SERVER_ERROR:ii.SERVER_ERROR},HFe="REGION_NAME",$Fe="MSAL_FORCE_REGION",WFe=32,jFe={SHA256:"sha256"},HV={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Nl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},ox={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Xm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},$V={INTERVAL_MS:100,TIMEOUT_MS:5e3},GFe=4096;d();d();d();d();var WD=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var WV=Ne(require("http"),1),Ohe=Ne(require("https"),1);var jD=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?VFe(e,this.proxyUrl,ta.GET,r,this.customAgentOptions,n):zFe(e,ta.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?VFe(e,this.proxyUrl,ta.POST,r,this.customAgentOptions):zFe(e,ta.POST,r,this.customAgentOptions)}},VFe=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new WV.default.Agent(i));let f="";if(r===ta.POST){let m=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((m,h)=>{let g=WV.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(A,y)=>{let E=A?.statusCode||qV.SERVER_ERROR;(E<qV.SUCCESS_RANGE_START||E>qV.SUCCESS_RANGE_END)&&(g.destroy(),y.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${A.statusCode}. Http status message: ${A?.statusMessage||"Unknown"}`))),y.write(p);let b=[];y.on("data",S=>{b.push(S)}),y.on("end",()=>{let R=Buffer.concat([...b]).toString().split(`\r
`),B=parseInt(R[0].split(" ")[1]),L=R[0].split(" ").slice(2).join(" "),O=R[R.length-1],K=R.slice(1,R.length-2),V=new Map;K.forEach(Z=>{let J=Z.split(new RegExp(/:\s(.*)/s)),j=J[0],$=J[1];try{let X=JSON.parse($);X&&typeof X=="object"&&($=X)}catch{}V.set(j,$)});let Q=Object.fromEntries(V),U=WD.getNetworkResponse(Q,YFe(B,L,Q,O),B);(B<ii.SUCCESS_RANGE_START||B>ii.SUCCESS_RANGE_END)&&U.body.error!==Nl.AUTHORIZATION_PENDING&&g.destroy(),m(U)}),y.on("error",S=>{g.destroy(),y.destroy(),h(new Error(S.toString()))})}),g.on("error",A=>{g.destroy(),h(new Error(A.toString()))})})},"networkRequestViaProxy"),zFe=s((t,e,r,n,i)=>{let o=e===ta.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...WD.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new Ohe.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let m;u.protocol==="http:"?m=WV.default.request(u):m=Ohe.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,A=h.statusCode,y=h.statusMessage,E=[];h.on("data",b=>{E.push(b)}),h.on("end",()=>{let b=Buffer.concat([...E]).toString(),S=g,R=WD.getNetworkResponse(S,YFe(A,y,S,b),A);(A<ii.SUCCESS_RANGE_START||A>ii.SUCCESS_RANGE_END)&&R.body.error!==Nl.AUTHORIZATION_PENDING&&m.destroy(),f(R)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),YFe=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=ii.CLIENT_ERROR_RANGE_START&&t<=ii.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=ii.SERVER_ERROR_RANGE_START&&t<=ii.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var jV="invalid_file_extension",GV="invalid_file_path",nT="invalid_managed_identity_id_type",VV="invalid_secret",KFe="missing_client_id",JFe="network_unavailable",zV="platform_not_supported",YV="unable_to_create_azure_arc",KV="unable_to_create_cloud_shell",JV="unable_to_create_source",vF="unable_to_read_secret_file",XFe="user_assigned_not_available_at_runtime",XV="www_authenticate_header_missing",ZV="www_authenticate_header_unsupported_format",Y2={[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[qn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[qn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[qn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var hDt={[jV]:"The file path in the WWW-Authenticate header does not contain a .key file.",[GV]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[nT]:"More than one ManagedIdentityIdType was provided.",[VV]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[zV]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[KFe]:"A ManagedIdentityId id was not provided.",[Y2.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[Y2.IDENTITY_ENDPOINT]:`The Managed Identity's '${qn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[Y2.IMDS_ENDPOINT]:`The Managed Identity's '${qn.IMDS_ENDPOINT}' environment variable is malformed.`,[Y2.MSI_ENDPOINT]:`The Managed Identity's '${qn.MSI_ENDPOINT}' environment variable is malformed.`,[JFe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[YV]:"Azure Arc Managed Identities can only be system assigned.",[KV]:"Cloud Shell Managed Identities can only be system assigned.",[JV]:"Unable to create a Managed Identity source based on environment variables.",[vF]:"Unable to read the secret file.",[XFe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[XV]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[ZV]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Qhe=class t extends oi{static{s(this,"ManagedIdentityError")}constructor(e){super(e,hDt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Bc(t){return new Qhe(t)}s(Bc,"createManagedIdentityError");var ez=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw Bc(nT);this.id=r,this.idType=$a.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw Bc(nT);this.id=n,this.idType=$a.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw Bc(nT);this.id=i,this.idType=$a.USER_ASSIGNED_OBJECT_ID}else this.id=qFe,this.idType=$a.SYSTEM_ASSIGNED}};d();var nu={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},p0=class t extends oi{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(nu.invalidLoopbackAddressType.code,`${nu.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(nu.unableToLoadRedirectUri.code,`${nu.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(nu.noAuthCodeInResponse.code,`${nu.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(nu.noLoopbackServerExists.code,`${nu.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(nu.loopbackServerAlreadyExists.code,`${nu.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(nu.loopbackServerTimeout.code,`${nu.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(nu.stateNotFoundError.code,nu.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(nu.thumbprintMissing.code,nu.thumbprintMissing.desc)}};var gDt={clientId:rt.EMPTY_STRING,authority:rt.DEFAULT_AUTHORITY,clientSecret:rt.EMPTY_STRING,clientAssertion:rt.EMPTY_STRING,clientCertificate:{thumbprint:rt.EMPTY_STRING,thumbprintSha256:rt.EMPTY_STRING,privateKey:rt.EMPTY_STRING,x5c:rt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:rt.EMPTY_STRING,authorityMetadata:rt.EMPTY_STRING,clientCapabilities:[],protocolMode:Dd.AAD,azureCloudOptions:{azureCloudInstance:Xv.None,tenant:rt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},ADt={claimsBasedCachingEnabled:!1},Uhe={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ha.Info},yDt={loggerOptions:Uhe,networkClient:new jD,proxyUrl:rt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},CDt={application:{appName:rt.EMPTY_STRING,appVersion:rt.EMPTY_STRING}};function ZFe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...yDt,networkClient:new jD(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Uhe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw p0.createStateNotFoundError();return{auth:{...gDt,...t},broker:{...e},cache:{...ADt,...r},system:{...o,...n},telemetry:{...CDt,...i}}}s(ZFe,"buildAppConfiguration");function eOe({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new ez(e),i=r?.loggerOptions||Uhe,o;return r?.networkClient?o=r.networkClient:o=new jD(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(eOe,"buildManagedIdentityConfiguration");d();d();d();d();var tOe=Ne(require("crypto"));var rz=new Uint8Array(256),tz=rz.length;function qhe(){return tz>rz.length-16&&(tOe.default.randomFillSync(rz),tz=0),rz.slice(tz,tz+=16)}s(qhe,"rng");d();d();d();var rOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vDt(t){return typeof t=="string"&&rOe.test(t)}s(vDt,"validate");var nOe=vDt;var Gu=[];for(let t=0;t<256;++t)Gu.push((t+256).toString(16).substr(1));function xDt(t,e=0){let r=(Gu[t[e+0]]+Gu[t[e+1]]+Gu[t[e+2]]+Gu[t[e+3]]+"-"+Gu[t[e+4]]+Gu[t[e+5]]+"-"+Gu[t[e+6]]+Gu[t[e+7]]+"-"+Gu[t[e+8]]+Gu[t[e+9]]+"-"+Gu[t[e+10]]+Gu[t[e+11]]+Gu[t[e+12]]+Gu[t[e+13]]+Gu[t[e+14]]+Gu[t[e+15]]).toLowerCase();if(!nOe(r))throw TypeError("Stringified UUID is invalid");return r}s(xDt,"stringify");var iOe=xDt;d();function EDt(t,e,r){t=t||{};let n=t.random||(t.rng||qhe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return iOe(n)}s(EDt,"v4");var Hhe=EDt;var GD=class{static{s(this,"GuidGenerator")}generateGuid(){return Hhe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var Sp=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Hu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,rt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Hu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var oOe=Ne(require("crypto"),1);var iT=class{static{s(this,"HashUtils")}sha256(e){return oOe.default.createHash(jFe.SHA256).update(e).digest()}};var sOe=Ne(require("crypto"),1);var nz=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new iT}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%HV.CV_CHARSET.length;for(;e.length<=WFe;){let i=sOe.default.randomBytes(1)[0];if(i>=r)continue;let o=i%HV.CV_CHARSET.length;e.push(HV.CV_CHARSET[o])}let n=e.join(rt.EMPTY_STRING);return Sp.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return Sp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Hu.BASE64),Hu.BASE64)}};var vC=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new nz,this.guidGenerator=new GD,this.hashUtils=new iT}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return Sp.base64Encode(e)}base64Decode(e){return Sp.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return Sp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Hu.BASE64),Hu.BASE64)}};d();d();var oT=class extends XI{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new O2,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof $u)r.accounts[n]=i;else if(Bl.isIdTokenEntity(i))r.idTokens[n]=i;else if(Bl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(Bl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(Bl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new $u,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Bl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=Bl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Bl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=Bl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Bl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=Bl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Bl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Bl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Bl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Bl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Bl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return ix.deserializeAllCache(ix.deserializeJSONBlob(e))}static generateJsonCache(e){return HI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=Bl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var xF={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},VD=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=HI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=ix.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=oT.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new vC().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new wp(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new wp(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount($u.generateAccountCacheKey(e),r||new GD().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new wp(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...xF.Account,...e.Account},IdToken:{...xF.IdToken,...e.IdToken},AccessToken:{...xF.AccessToken,...e.AccessToken},RefreshToken:{...xF.RefreshToken,...e.RefreshToken},AppMetadata:{...xF.AppMetadata,...e.AppMetadata}}}};d();var LUe=Ne(MUe(),1);var sx=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw vt(As.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=ea.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?Xm.PSS_256:Xm.RSA_256},c=this.useSha256?Xm.X5T_256:Xm.X5T;Object.assign(a,{[c]:Sp.base64EncodeUrl(this.thumbprint,Hu.HEX)}),this.publicCertificate&&Object.assign(a,{[Xm.X5C]:this.publicCertificate});let l={[Xm.AUDIENCE]:this.jwtAudience,[Xm.EXPIRATION_TIME]:this.expirationTime,[Xm.ISSUER]:this.issuer,[Xm.SUBJECT]:this.issuer,[Xm.NOT_BEFORE]:i,[Xm.JWT_ID]:e.createNewGuid()};return this.jwt=LUe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<ea.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,rt.EMPTY_STRING));return n}};d();var Bz="@azure/msal-node",hA="3.6.3";d();var iB=class extends ju{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=ea.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=Bi.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:mf.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addUsername(r,e.username),pr.addPassword(r,e.password),pr.addScopes(r,e.scopes),pr.addResponseType(r,kD.IDTOKEN_TOKEN),pr.addGrantType(r,d0.RESOURCE_OWNER_PASSWORD_GRANT),pr.addClientInfo(r),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(!Sa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&pr.addCcsUpn(r,e.username),Wu.mapToQueryString(r)}};d();function FUe(t,e,r,n){let i=CF.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return pr.addLibraryInfo(i,{sku:Nl.MSAL_SKU,version:hA,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Dd.OIDC&&pr.addApplicationTelemetry(i,t.telemetry.application),pr.addResponseType(i,kD.CODE),r.codeChallenge&&r.codeChallengeMethod&&pr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),pr.addExtraQueryParameters(i,r.extraQueryParameters||{}),CF.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(FUe,"getAuthCodeRequestUrl");var cT=class{static{s(this,"ClientApplication")}constructor(e){this.config=ZFe(e),this.cryptoProvider=new vC,this.logger=new bp(this.config.system.loggerOptions,Bz,hA),this.storage=new oT(this.logger,this.config.auth.clientId,this.cryptoProvider,khe(this.config.auth)),this.tokenCache=new VD(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||mC.QUERY,authenticationScheme:co.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return FUe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:co.BEARER},i=this.initializeServerTelemetryManager(ox.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new AF(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof oi&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:co.BEARER},n=this.initializeServerTelemetryManager(ox.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new V2(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof oi&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(ox.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new yF(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof YI&&c.errorCode===As.tokenRefreshRequired)return new V2(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof oi&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...l0]});if(o===ws.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new V2(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(ox.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new iB(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof oi&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw p0.createStateNotFoundError();if(e!==r)throw vt(As.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Nl.MSAL_SKU,version:hA,cpu:process.arch||rt.EMPTY_STRING,os:process.platform||rt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=sx.fromAssertion(await gf(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Nl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===co.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=co.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Sa.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...l0],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new z2(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=pA.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return BV.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var OUe=Ne(require("http"),1);var Nz=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw p0.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=OUe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===rt.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(p0.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=Wu.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(ii.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw p0.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),p0.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${Nl.HTTP_PROTOCOL}${Nl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var oB=class extends ju{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=ea.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Bi.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&pr.addExtraQueryParameters(r,e.extraQueryParameters),Wu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return pr.addScopes(r,e.scopes),pr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&pr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Wu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),vt(As.deviceCodePollingCancelled);if(r&&r<e&&ea.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),vt(As.userTimeoutReached);if(ea.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),vt(As.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=Bi.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?ea.nowSeconds()+e.timeout:void 0,l=ea.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===rt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await ea.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),bme(BD.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),vt(As.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;pr.addScopes(n,e.scopes),pr.addClientId(n,this.config.authOptions.clientId),pr.addGrantType(n,d0.DEVICE_CODE_GRANT),pr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return pr.addCorrelationId(n,i),pr.addClientInfo(n),pr.addLibraryInfo(n,this.config.libraryInfo),pr.addApplicationTelemetry(n,this.config.telemetry.application),pr.addThrottling(n),this.serverTelemetryManager&&pr.addServerTelemetry(n,this.serverTelemetryManager),(!Sa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),Wu.mapToQueryString(n)}};var sB=class extends cT{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=z2.makeExtraSkuString({libraryName:Nl.MSAL_SKU,libraryVersion:hA})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(ox.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new oB(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof oi&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||l0,redirectUri:`${Nl.HTTP_PROTOCOL}${Nl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[Q2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new Nz,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(R=>{m=R}).catch(R=>{h=R}),A=await this.waitForRedirectUri(p),y={...l,correlationId:r,scopes:e.scopes||l0,redirectUri:A,responseMode:mC.QUERY,codeChallenge:f,codeChallengeMethod:pV.S256},E=await this.getAuthCodeUrl(y);if(await n(E),await g,h)throw h;if(m.error)throw new hf(m.error,m.error_description,m.suberror);if(!m.code)throw p0.createNoAuthCodeInResponseError();let b=m.client_info,S={code:m.code,codeVerifier:u,clientInfo:b||rt.EMPTY_STRING,...y};return await this.acquireTokenByCode(S)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||l0,redirectUri:`${Nl.HTTP_PROTOCOL}${Nl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[Q2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if($V.TIMEOUT_MS/$V.INTERVAL_MS<i){clearInterval(o),n(p0.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof oi&&a.errorCode===nu.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},$V.INTERVAL_MS)})}};d();d();var lT=class extends ju{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===ws.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=ws.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new wp(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new tl(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?ea.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||DD)?(a?.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED),[null,ws.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&ea.isTokenExpired(p.refreshOn.toString(),0)&&(u=ws.PROACTIVELY_REFRESHED,a?.setCacheOutcome(ws.PROACTIVELY_REFRESHED)),[await Dc.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN),[null,ws.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:rt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:_o.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:tl.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw vt(As.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=ea.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:co.BEARER}}else{let l=this.createTokenQueryParameters(e),u=Bi.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=ea.nowSeconds();let h=await this.executePostToTokenEndpoint(u,f,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addScopes(r,e.scopes,!1),pr.addGrantType(r,d0.CLIENT_CREDENTIALS_GRANT),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(!Sa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Wu.mapToQueryString(r)}};d();var aB=class extends ju{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new tl(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(ea.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),vt(As.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),vt(As.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=AV.extractTokenClaims(n.secret,Sp.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:rt.EMPTY_STRING,localAccountId:a||rt.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Dc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:_o.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||co.BEARER,o={credentialType:n&&n.toLowerCase()!==co.BEARER.toLowerCase()?_o.ACCESS_TOKEN_WITH_AUTH_SCHEME:_o.ACCESS_TOKEN,clientId:e,target:tl.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw vt(As.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=Bi.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=ea.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new Dc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addScopes(r,e.scopes),pr.addGrantType(r,d0.JWT_BEARER),pr.addClientInfo(r),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),pr.addRequestTokenUse(r,Q2.ON_BEHALF_OF),pr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Wu.mapToQueryString(r)}};var cB=class extends cT{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw vt(As.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?sx.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):sx.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw vt(As.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await gf(e.clientAssertion,this.config.auth.clientId),assertionType:Nl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!l0.includes(m))},o={...e,...i,clientAssertion:r},c=new Bi(o.authority).getUrlComponents().PathSegments[0];if(Object.values(u0).includes(c))throw vt(As.missingTenantIdError);let l=process.env[$Fe],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[HFe]},p=this.initializeServerTelemetryManager(ox.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new lT(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof oi&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new aB(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof oi&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function QUe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(QUe,"isIso8601");d();var Mz=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===ta.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Ls.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(ta.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(ta.POST,e,r)}};var Z2={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Cf=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(QUe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-ea.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[rl.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[rl.XMS_CC]=h}let a=o.headers;a[Ls.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new Mz(this.networkClient,o.retryPolicy,this.logger),u=ea.nowSeconds(),f;try{o.httpMethod===ta.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof oi?h:vt(As.networkError)}let p=new Dc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case $a.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?Z2.MANAGED_IDENTITY_CLIENT_ID_2017:Z2.MANAGED_IDENTITY_CLIENT_ID;case $a.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?Z2.MANAGED_IDENTITY_RESOURCE_ID_IMDS:Z2.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case $a.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),Z2.MANAGED_IDENTITY_OBJECT_ID;default:throw Bc(nT)}}};Cf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Bi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Bc(Y2[t])}};d();d();d();var Lz=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var SLt=3,_Lt=1e3,RLt=[ii.NOT_FOUND,ii.REQUEST_TIMEOUT,ii.TOO_MANY_REQUESTS,ii.SERVER_ERROR,ii.SERVICE_UNAVAILABLE,ii.GATEWAY_TIMEOUT],Fz=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new Lz}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return _Lt}async pauseForRetry(e,r,n,i){if(RLt.includes(e)&&r<SLt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var h0=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new Fz}computeUri(){let e=new Map;this.queryParameters&&pr.addExtraQueryParameters(e,this.queryParameters);let r=Wu.mapToQueryString(e);return Bi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&pr.addExtraQueryParameters(e,this.bodyParameters),Wu.mapToQueryString(e)}};var kLt="2019-08-01",BF=class t extends Cf{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Jn.APP_SERVICE} managed identity is unavailable because one or both of the '${qn.IDENTITY_HEADER}' and '${qn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,a,Jn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Jn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new h0(ta.GET,this.identityEndpoint);return n.headers[f0.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[rl.API_VERSION]=kLt,n.queryParameters[rl.RESOURCE]=e,r.idType!==$a.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var ax=require("fs"),$Ue=Ne(require("path"),1);var PLt="2019-11-01",UUe="http://127.0.0.1:40342/metadata/identity/oauth2/token",qUe="N/A: himds executable exists",HUe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},DLt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},NF=class t extends Cf{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IMDS_ENDPOINT];if(!e||!r){let n=DLt[process.platform];try{(0,ax.accessSync)(n,ax.constants.F_OK|ax.constants.R_OK),e=UUe,r=qUe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Jn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${qn.IDENTITY_ENDPOINT}' and '${qn.IMDS_ENDPOINT}' are not defined. ${Jn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===qUe)e.info(`[Managed Identity] ${Jn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Jn.AZURE_ARC} endpoint: ${UUe}. Creating ${Jn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,c,Jn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(qn.IMDS_ENDPOINT,l,Jn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Jn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Jn.AZURE_ARC} managed identity.`)}if(a.idType!==$a.SYSTEM_ASSIGNED)throw Bc(YV);return new t(e,r,n,i,o,c)}createRequest(e){let r=new h0(ta.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[f0.METADATA_HEADER_NAME]="true",r.queryParameters[rl.API_VERSION]=PLt,r.queryParameters[rl.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===ii.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw Bc(XV);if(!a.includes("Basic realm="))throw Bc(ZV);let c=a.split("Basic realm=")[1];if(!HUe.hasOwnProperty(process.platform))throw Bc(zV);let l=HUe[process.platform],u=$Ue.default.basename(c);if(!u.endsWith(".key"))throw Bc(jV);if(l+u!==c)throw Bc(GV);let f;try{f=await(0,ax.statSync)(c).size}catch{throw Bc(vF)}if(f>GFe)throw Bc(VV);let p;try{p=(0,ax.readFileSync)(c,Hu.UTF8)}catch{throw Bc(vF)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[f0.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof oi?h:vt(As.networkError)}}return this.getServerTokenResponse(o||e)}};d();var MF=class t extends Cf{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[qn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Jn.CLOUD_SHELL} managed identity is unavailable because the '${qn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.MSI_ENDPOINT,c,Jn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Jn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Jn.CLOUD_SHELL} managed identity.`),a.idType!==$a.SYSTEM_ASSIGNED)throw Bc(KV);return new t(e,r,n,i,o,c)}createRequest(e){let r=new h0(ta.POST,this.msiEndpoint);return r.headers[f0.METADATA_HEADER_NAME]="true",r.bodyParameters[rl.RESOURCE]=e,r}};d();d();d();var Oz=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var BLt=[ii.NOT_FOUND,ii.REQUEST_TIMEOUT,ii.GONE,ii.TOO_MANY_REQUESTS],NLt=3,MLt=7,LLt=1e3,FLt=4e3,OLt=2e3,QLt=10*1e3,Qz=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new Oz(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return LLt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return FLt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return OLt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return QLt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ii.GONE?MLt:NLt),(BLt.includes(e)||e>=ii.SERVER_ERROR_RANGE_START&&e<=ii.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===ii.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var WUe="/metadata/identity/oauth2/token",ULt=`http://169.254.169.254${WUe}`,qLt="2018-02-01",Uz=class t extends Cf{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Jn.IMDS} returned endpoint: ${process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(qn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${WUe}`,Jn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Jn.IMDS}, using the default endpoint.`),a=ULt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new h0(ta.GET,this.identityEndpoint);return n.headers[f0.METADATA_HEADER_NAME]="true",n.queryParameters[rl.API_VERSION]=qLt,n.queryParameters[rl.RESOURCE]=e,r.idType!==$a.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new Qz,n}};d();var HLt="2019-07-01-preview",LF=class t extends Cf{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IDENTITY_HEADER],n=process.env[qn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Jn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${qn.IDENTITY_HEADER}', '${qn.IDENTITY_ENDPOINT}' or '${qn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,c,Jn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${Jn.SERVICE_FABRIC} managed identity.`),a.idType!==$a.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Jn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new h0(ta.GET,this.identityEndpoint);return n.headers[f0.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[rl.API_VERSION]=HLt,n.queryParameters[rl.RESOURCE]=e,r.idType!==$a.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var $Lt="2017-09-01",WLt=`Only client id is supported for user-assigned managed identity in ${Jn.MACHINE_LEARNING}.`,FF=class t extends Cf{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[qn.MSI_ENDPOINT],r=process.env[qn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Jn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${qn.MSI_ENDPOINT}' and '${qn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.MSI_ENDPOINT,a,Jn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Jn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Jn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new h0(ta.GET,this.msiEndpoint);if(n.headers[f0.METADATA_HEADER_NAME]="true",n.headers[f0.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[rl.API_VERSION]=$Lt,n.queryParameters[rl.RESOURCE]=e,r.idType===$a.SYSTEM_ASSIGNED)n.queryParameters[Z2.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[qn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===$a.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(WLt);return n}};var OF=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(LF.getEnvironmentVariables())?Jn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(BF.getEnvironmentVariables())?Jn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(FF.getEnvironmentVariables())?Jn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(MF.getEnvironmentVariables())?Jn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(NF.getEnvironmentVariables())?Jn.AZURE_ARC:Jn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=LF.tryCreate(e,r,n,i,o,a)||BF.tryCreate(e,r,n,i,o)||FF.tryCreate(e,r,n,i,o)||MF.tryCreate(e,r,n,i,o,a)||NF.tryCreate(e,r,n,i,o,a)||Uz.tryCreate(e,r,n,i,o);if(!c)throw Bc(JV);return c}};var jLt=[Jn.SERVICE_FABRIC],lB=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=eOe(e||{}),this.logger=new bp(this.config.system.loggerOptions,Bz,hA);let r={canonicalAuthority:rt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new oT(this.logger,this.config.managedIdentityId.id,ND,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new vC;let n={protocolMode:Dd.AAD,knownAuthorities:[Fhe],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new pA(Fhe,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new lT({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new OF(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new iT}async acquireToken(e){if(!e.resource)throw ys(OD.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&jLt.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(Hu.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===ws.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return OF.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var qz=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>$u.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();d();d();d();function QF(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(QF,"getRandomIntegerInclusive");function UF(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+QF(0,n/2)}}s(UF,"calculateRetryDelay");d();function uB(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(uB,"isObject");d();function eR(t){if(uB(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(eR,"isError");d();d();var jUe=require("node:crypto");var Pge,GLt=typeof((Pge=globalThis?.crypto)===null||Pge===void 0?void 0:Pge.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):jUe.randomUUID;function dB(){return GLt()}s(dB,"randomUUID");d();var Dge,Bge,Nge,Mge,GUe=typeof window<"u"&&typeof window.document<"u",VUe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Dge=self.constructor)===null||Dge===void 0?void 0:Dge.name)==="DedicatedWorkerGlobalScope"||((Bge=self.constructor)===null||Bge===void 0?void 0:Bge.name)==="ServiceWorkerGlobalScope"||((Nge=self.constructor)===null||Nge===void 0?void 0:Nge.name)==="SharedWorkerGlobalScope"),zUe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",YUe=typeof Bun<"u"&&typeof Bun.version<"u",uT=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((Mge=globalThis.process.versions)===null||Mge===void 0)&&Mge.node);var KUe=typeof navigator<"u"&&navigator?.product==="ReactNative";d();function g0(t,e){return Buffer.from(t,e)}s(g0,"stringToUint8Array");d();var Lge="REDACTED",VLt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],zLt=["api-version"],gA=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=VLt.concat(e),r=zLt.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||uB(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Lge);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Lge;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Lge;return r}};d();d();d();d();var tR=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function Oge(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new tR(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(Oge,"createAbortablePromise");d();var ZLt="The delay was aborted.";function Qge(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return Oge(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??ZLt})}s(Qge,"delay");d();function fB(t){if(eR(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(fB,"getErrorMessage");d();function JUe(t,e){return UF(t,e)}s(JUe,"calculateRetryDelay");function Hz(t){return eR(t)}s(Hz,"isError");var $z=uT,pB=uT;d();var qF=ti("IdentityUtils"),XUe="1.0";function rR(t,e,r){let n=s(i=>(qF.getToken.info(i),new Km({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(rR,"ensureValidMsalToken");function Uge(t){let e=t?.authorityHost;return!e&&pB&&(e=process.env.AZURE_AUTHORITY_HOST),e??p6}s(Uge,"getAuthorityHost");function qge(t,e){return e||(e=p6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(qge,"getAuthority");function ZUe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(ZUe,"getKnownAuthorities");var Wz=s((t,e=$z?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case _p.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case _p.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case _p.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case _p.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function jz(t){switch(t){case"error":return _p.LogLevel.Error;case"info":return _p.LogLevel.Info;case"verbose":return _p.LogLevel.Verbose;case"warning":return _p.LogLevel.Warning;default:return _p.LogLevel.Info}}s(jz,"getMSALLogLevel");function nR(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return qF.info(xo(t,e.message)),new Ur(e.message);case"device_code_polling_cancelled":return new tR("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":qF.info(xo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:qF.info(xo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(qF.info(xo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Km({scopes:t,getTokenOptions:r,message:e.message})}s(nR,"handleMsalError");function eqe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(eqe,"publicToMsal");function tqe(t,e){return{authority:e.environment??j6e,homeAccountId:e.homeAccountId,tenantId:e.tenantId||W6e,username:e.username,clientId:t,version:XUe}}s(tqe,"msalToPublic");function Hge(t){let e=JSON.parse(t);if(e.version&&e.version!==XUe)throw Error("Unsupported AuthenticationRecord version");return e}s(Hge,"deserializeAuthenticationRecord");d();d();d();d();d();d();function t9t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(t9t,"isPrimitiveBody");function r9t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(r9t,"handleNullableResponseAndWrappableBody");function $ge(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return r9t({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:t9t(t.parsedBody,c)})}s($ge,"flattenResponse");var bC={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var IC=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var rqe=require("node:os"),nqe=Ne(require("node:util"),1),iqe=Ne(require("node:process"),1);function oqe(t,...e){iqe.stderr.write(`${nqe.default.format(t,...e)}${rqe.EOL}`)}s(oqe,"log");var sqe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,aqe,Wge=[],jge=[],Vz=[];sqe&&Gge(sqe);var cqe=Object.assign(t=>lqe(t),{enable:Gge,enabled:Vge,disable:n9t,log:oqe});function Gge(t){aqe=t,Wge=[],jge=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?jge.push(new RegExp(`^${n.substr(1)}$`)):Wge.push(new RegExp(`^${n}$`));for(let n of Vz)n.enabled=Vge(n.namespace)}s(Gge,"enable");function Vge(t){if(t.endsWith("*"))return!0;for(let e of jge)if(e.test(t))return!1;for(let e of Wge)if(e.test(t))return!0;return!1}s(Vge,"enabled");function n9t(){let t=aqe||"";return Gge(""),t}s(n9t,"disable");function lqe(t){let e=Object.assign(r,{enabled:Vge(t),destroy:i9t,log:cqe.log,namespace:t,extend:o9t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),Vz.push(e),e}s(lqe,"createDebugger");function i9t(){let t=Vz.indexOf(this);return t>=0?(Vz.splice(t,1),!0):!1}s(i9t,"destroy");function o9t(t){let e=lqe(`${this.namespace}:${t}`);return e.log=this.log,e}s(o9t,"extend");var mB=cqe;var zge=["verbose","info","warning","error"],uqe={verbose:400,info:300,warning:200,error:100};function dqe(t,e){e.log=(...r)=>{t.log(...r)}}s(dqe,"patchLogMethod");function fqe(t){return zge.includes(t)}s(fqe,"isTypeSpecRuntimeLogLevel");function s9t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=mB(t.namespace);i.log=(...f)=>{mB.log(...f)};function o(f){if(f&&!fqe(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${zge.join(",")}`);n=f;let p=[];for(let m of e)a(m)&&p.push(m.namespace);mB.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(fqe(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${zge.join(", ")}.`));function a(f){return!!(n&&uqe[f.level]<=uqe[n])}s(a,"shouldEnable");function c(f,p){let m=Object.assign(f.extend(p),{level:p});if(dqe(f,m),a(m)){let h=mB.disable();mB.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return dqe(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(s9t,"createLoggerContext");var pqe=s9t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),a9t=pqe.logger;function $F(t){return pqe.createClientLogger(t)}s($F,"createClientLogger");d();function zz(t){return t.toLowerCase()}s(zz,"normalizeName");function*c9t(t){for(let e of t.values())yield[e.name,e.value]}s(c9t,"headerIterator");var Yge=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(zz(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(zz(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(zz(e))}delete(e){this._headersMap.delete(zz(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return c9t(this._headersMap)}};function Rp(t){return new Yge(t)}s(Rp,"createHttpHeaders");d();d();d();var Kge=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:Rp(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||dB(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function Yz(t){return new Kge(t)}s(Yz,"createPipelineRequest");d();var mqe=new Set(["Deserialize","Serialize","Retry","Sign"]),Jge=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!mqe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!mqe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let A=g.policy,y=g.options,E=A.name;if(r.has(E))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:A,dependsOn:new Set,dependants:new Set};y.afterPhase&&(b.afterPhase=f(y.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(E,b),f(y.phase).policies.add(b)}for(let g of this._policies){let{policy:A,options:y}=g,E=A.name,b=r.get(E);if(!b)throw new Error(`Missing node for policy ${E}`);if(y.afterPolicies)for(let S of y.afterPolicies){let R=r.get(S);R&&(b.dependsOn.add(R),R.dependants.add(b))}if(y.beforePolicies)for(let S of y.beforePolicies){let R=r.get(S);R&&(R.dependsOn.add(b),b.dependants.add(R))}}function p(g){g.hasRun=!0;for(let A of g.policies)if(!(A.afterPhase&&(!A.afterPhase.hasRun||A.afterPhase.policies.size))&&A.dependsOn.size===0){e.push(A.policy);for(let y of A.dependants)y.dependsOn.delete(A);r.delete(A.policy.name),g.policies.delete(A)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function Kz(){return Jge.create()}s(Kz,"createEmptyPipeline");d();d();var hqe=require("node:util"),gqe=hqe.inspect.custom;var l9t=new gA,Vu=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,gqe,{value:s(()=>`RestError: ${this.message} 
 ${l9t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};Vu.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Vu.PARSE_ERROR="PARSE_ERROR";function Jz(t){return t instanceof Vu?!0:eR(t)&&t.name==="RestError"}s(Jz,"isRestError");d();d();var hB=Ne(require("node:http"),1),gB=Ne(require("node:https"),1),Zz=Ne(require("node:zlib"),1),yqe=require("node:stream");d();var rh=$F("ts-http-runtime");var u9t={};function WF(t){return t&&typeof t.pipe=="function"}s(WF,"isReadableStream");function Aqe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(Aqe,"isStreamComplete");function Cqe(t){return t&&typeof t.byteLength=="number"}s(Cqe,"isArrayBuffer");var Xz=class extends yqe.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Xge=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new IC("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new gA;rh.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let m=m9t(f);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(f&&e.onUploadProgress){let E=e.onUploadProgress,b=new Xz(E);b.on("error",S=>{rh.error("Error in upload progress",S)}),WF(f)?f.pipe(b):b.end(f),f=b}let m=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let h=d9t(m),A={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),A;p=u?f9t(m,h):m;let y=e.onDownloadProgress;if(y){let E=new Xz(y);E.on("error",b=>{rh.error("Error in download progress",b)}),p.pipe(E),p=E}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(A.status)?A.readableStreamBody=p:A.bodyAsText=await p9t(p),A}finally{if(e.abortSignal&&a){let m=Promise.resolve();WF(f)&&(m=Aqe(f));let h=Promise.resolve();WF(p)&&(h=Aqe(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{rh.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?hB.request(l,u):gB.request(l,u);p.once("error",m=>{var h;f(new Vu(m.message,{code:(h=m.code)!==null&&h!==void 0?h:Vu.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new IC("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),f(m)}),n&&WF(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):Cqe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(rh.error("Unrecognized body type",n),f(new Vu("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?hB.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new hB.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return gB.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:u9t,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(rh.info("No cached TLS Agent exist, creating a new Agent"),a=new gB.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function d9t(t){let e=Rp();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(d9t,"getResponseHeaders");function f9t(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=Zz.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=Zz.createInflate();return t.pipe(n),n}return t}s(f9t,"getDecodedResponseStream");function p9t(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new Vu(`Error reading response as text: ${i.message}`,{code:Vu.PARSE_ERROR}))})})}s(p9t,"streamToText");function m9t(t){return t?Buffer.isBuffer(t)?t.length:WF(t)?null:Cqe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(m9t,"getBodyLength");function vqe(){return new Xge}s(vqe,"createNodeHttpClient");function eY(){return vqe()}s(eY,"createDefaultHttpClient");d();d();d();d();var Zge="logPolicy";function tY(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:rh.info,n=new gA({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Zge,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(tY,"logPolicy");d();var eAe="redirectPolicy",xqe=["GET","HEAD"];function rY(t={}){let{maxRetries:e=20}=t;return{name:eAe,async sendRequest(r,n){let i=await n(r);return Eqe(n,i,e)}}}s(rY,"redirectPolicy");async function Eqe(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&xqe.includes(i.method)||o===302&&xqe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return Eqe(t,u,r,n+1)}return e}s(Eqe,"handleRedirect");d();d();d();function bqe(){return"User-Agent"}s(bqe,"getHeaderName");d();function Iqe(){return bqe()}s(Iqe,"getUserAgentHeaderName");var Vgn=Iqe();d();var tAe="decompressResponsePolicy";function nY(){return{name:tAe,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(nY,"decompressResponsePolicy");d();d();d();d();var h9t="The operation was aborted.";function Tqe(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new IC(r?.abortErrorMsg?r?.abortErrorMsg:h9t)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(Tqe,"delay");function wqe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(wqe,"parseHeaderValueAsNumber");var rAe="Retry-After",g9t=["retry-after-ms","x-ms-retry-after-ms",rAe];function Sqe(t){if(t&&[429,503].includes(t.status))try{for(let i of g9t){let o=wqe(t,i);if(o===0||o)return o*(i===rAe?1e3:1)}let e=t.headers.get(rAe);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(Sqe,"getRetryAfterInMs");function _qe(t){return Number.isFinite(Sqe(t))}s(_qe,"isThrottlingRetryResponse");function nAe(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=Sqe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(nAe,"throttlingRetryStrategy");var A9t=1e3,y9t=1e3*64;function iY(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:A9t,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:y9t;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=v9t(c),u=l&&t.ignoreSystemErrors,f=C9t(a),p=f&&t.ignoreHttpStatusCodes;return a&&(_qe(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:UF(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(iY,"exponentialRetryStrategy");function C9t(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(C9t,"isExponentialRetryResponse");function v9t(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(v9t,"isSystemError");d();var x9t=$F("ts-http-runtime retryPolicy"),E9t="retryPolicy";function dT(t,e={maxRetries:3}){let r=e.logger||x9t;return{name:E9t,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new IC;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let m=f.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:A}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await Tqe(g,void 0,{abortSignal:n.abortSignal});continue e}if(A){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${A}`),n.url=A;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(dT,"retryPolicy");var iAe="defaultRetryPolicy";function oY(t={}){var e;return{name:iAe,sendRequest:dT([nAe(),iY(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(oY,"defaultRetryPolicy");d();var oAe="formDataPolicy";function b9t(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(b9t,"formDataToFormDataMap");function sY(){return{name:oAe,async sendRequest(t,e){if(uT&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=b9t(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=I9t(t.formData):await T9t(t.formData,t),t.formData=void 0}return e(t)}}}s(sY,"formDataPolicy");function I9t(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(I9t,"wwwFormUrlEncode");async function T9t(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:Rp({"Content-Disposition":`form-data; name="${i}"`}),body:g0(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=Rp();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(T9t,"prepareFormData");d();var rHe=Ne(Yqe(),1),nHe=Ne(Xqe(),1);var C6t="HTTPS_PROXY",v6t="HTTP_PROXY",x6t="ALL_PROXY",E6t="NO_PROXY",pAe="proxyPolicy",Zqe=[],iHe=!1,b6t=new Map;function pY(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(pY,"getEnvironmentValue");function I6t(){if(!process)return;let t=pY(C6t),e=pY(x6t),r=pY(v6t);return t||e||r}s(I6t,"loadEnvironmentProxyValue");function T6t(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(T6t,"isBypassed");function w6t(){let t=pY(E6t);return iHe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(w6t,"loadNoProxy");function S6t(){let t=I6t();return t?new URL(t):void 0}s(S6t,"getDefaultProxySettingsInternal");function eHe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(eHe,"getUrlFromProxySettings");function tHe(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&rh.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new nHe.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new rHe.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(tHe,"setProxyAgentOnRequest");function mY(t,e){iHe||Zqe.push(...w6t());let r=t?eHe(t):S6t(),n={};return{name:pAe,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!T6t(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:Zqe,e?.customNoProxyList?void 0:b6t)?tHe(i,n,r):i.proxySettings&&tHe(i,n,eHe(i.proxySettings)),o(i)}}}s(mY,"proxyPolicy");d();var mAe="agentPolicy";function hY(t){return{name:mAe,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(hY,"agentPolicy");d();var hAe="tlsPolicy";function gY(t){return{name:hAe,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(gY,"tlsPolicy");d();d();function AY(t){return typeof t.stream=="function"}s(AY,"isBlob");d();d();function oHe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(oHe,"__values");function SC(t){return this instanceof SC?(this.v=t,this):new SC(t)}s(SC,"__await");function gAe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(A){return new Promise(function(y,E){o.push([h,A,y,E])>1||l(h,A)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(A){m(o[0][3],A)}}function u(h){h.value instanceof SC?Promise.resolve(h.value.v).then(f,p):m(o[0][2],h)}function f(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(gAe,"__asyncGenerator");function sHe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof oHe=="function"?oHe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(sHe,"__asyncValues");var yY=require("stream");function aHe(){return gAe(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield SC(e.read());if(r)return yield SC(void 0);yield yield SC(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(aHe,"streamAsyncIterator");function _6t(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=aHe.bind(t)),t.values||(t.values=aHe.bind(t))}s(_6t,"makeAsyncIterable");function cHe(t){return t instanceof ReadableStream?(_6t(t),yY.Readable.fromWeb(t)):t}s(cHe,"ensureNodeStream");function R6t(t){return t instanceof Uint8Array?yY.Readable.from(Buffer.from(t)):AY(t)?cHe(t.stream()):cHe(t)}s(R6t,"toStream");async function lHe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(R6t);return yY.Readable.from(function(){return gAe(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,sHe(u)),l;l=yield SC(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield SC(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield SC(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(lHe,"concat");function k6t(){return`----AzSDKFormBoundary${dB()}`}s(k6t,"generateBoundary");function P6t(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(P6t,"encodeHeaders");function D6t(t){return t instanceof Uint8Array?t.byteLength:AY(t)?t.size===-1?void 0:t.size:void 0}s(D6t,"getLength");function B6t(t){let e=0;for(let r of t){let n=D6t(r);if(n===void 0)return;e+=n}return e}s(B6t,"getTotalLength");async function N6t(t,e,r){let n=[g0(`--${r}`,"utf-8"),...e.flatMap(o=>[g0(`\r
`,"utf-8"),g0(P6t(o.headers),"utf-8"),g0(`\r
`,"utf-8"),o.body,g0(`\r
--${r}`,"utf-8")]),g0(`--\r
\r
`,"utf-8")],i=B6t(n);i&&t.headers.set("Content-Length",i),t.body=await lHe(n)}s(N6t,"buildRequestBody");var GF="multipartPolicy",M6t=70,L6t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function F6t(t){if(t.length>M6t)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!L6t.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(F6t,"assertValidBoundary");function CY(){return{name:GF,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?F6t(n):n=k6t(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await N6t(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(CY,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function vY(){return Kz()}s(vY,"createEmptyPipeline");d();d();d();var _C=qI("core-rest-pipeline");d();d();d();d();function yAe(t={}){return tY(Object.assign({logger:_C.info},t))}s(yAe,"logPolicy");d();function CAe(t={}){return rY(t)}s(CAe,"redirectPolicy");d();d();d();var CB=Ne(require("node:os"),1),xY=Ne(require("node:process"),1);function uHe(){return"User-Agent"}s(uHe,"getHeaderName");async function dHe(t){if(xY&&xY.versions){let e=xY.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${CB.arch()}-${CB.type()}-${CB.release()})`)}s(dHe,"setPlatformSpecificData");d();var EY="1.22.0";function G6t(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(G6t,"getUserAgentString");function fHe(){return uHe()}s(fHe,"getUserAgentHeaderName");async function bY(t){let e=new Map;e.set("core-rest-pipeline",EY),await dHe(e);let r=G6t(e);return t?`${t} ${r}`:r}s(bY,"getUserAgentValue");var pHe=fHe(),mHe="userAgentPolicy";function vAe(t={}){let e=bY(t.userAgentPrefix);return{name:mHe,async sendRequest(r,n){return r.headers.has(pHe)||r.headers.set(pHe,await e),n(r)}}}s(vAe,"userAgentPolicy");d();d();var hHe=Symbol("rawContent");function xAe(t){return typeof t[hHe]=="function"}s(xAe,"hasRawContent");function gHe(t){return xAe(t)?t[hHe]():t}s(gHe,"getRawContent");var IY=GF;function EAe(){let t=CY();return{name:IY,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)xAe(n.body)&&(n.body=gHe(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(EAe,"multipartPolicy");d();function bAe(){return nY()}s(bAe,"decompressResponsePolicy");d();function IAe(t={}){return oY(t)}s(IAe,"defaultRetryPolicy");d();function TAe(){return sY()}s(TAe,"formDataPolicy");d();function wAe(t,e){return mY(t,e)}s(wAe,"proxyPolicy");d();var AHe="setClientRequestIdPolicy";function SAe(t="x-ms-client-request-id"){return{name:AHe,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(SAe,"setClientRequestIdPolicy");d();function _Ae(t){return hY(t)}s(_Ae,"agentPolicy");d();function RAe(t){return gY(t)}s(RAe,"tlsPolicy");d();d();var vB=Vu;function VF(t){return Jz(t)}s(VF,"isRestError");var yHe="tracingPolicy";function kAe(t={}){let e=bY(t.userAgentPrefix),r=new gA({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=V6t();return{name:yHe,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=z6t(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return K6t(u,p),p}catch(p){throw Y6t(u,p),p}}}}s(kAe,"tracingPolicy");function V6t(){try{return g6({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:EY})}catch(t){_C.warning(`Error when creating the TracingClient: ${fB(t)}`);return}}s(V6t,"tryCreateTracingClient");function z6t(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){_C.warning(`Skipping creating a tracing span due to an error: ${fB(n)}`);return}}s(z6t,"tryCreateSpan");function Y6t(t,e){try{t.setStatus({status:"error",error:Hz(e)?e:void 0}),VF(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){_C.warning(`Skipping tracing span processing due to an error: ${fB(r)}`)}}s(Y6t,"tryProcessError");function K6t(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){_C.warning(`Skipping tracing span processing due to an error: ${fB(r)}`)}}s(K6t,"tryProcessResponse");d();d();function TY(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(TY,"wrapAbortSignalLike");var J6t="wrapAbortSignalLikePolicy";function CHe(){return{name:J6t,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=TY(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(CHe,"wrapAbortSignalLikePolicy");function PAe(t){var e;let r=vY();return pB&&(t.agent&&r.addPolicy(_Ae(t.agent)),t.tlsOptions&&r.addPolicy(RAe(t.tlsOptions)),r.addPolicy(wAe(t.proxyOptions)),r.addPolicy(bAe())),r.addPolicy(CHe()),r.addPolicy(TAe(),{beforePolicies:[IY]}),r.addPolicy(vAe(t.userAgentOptions)),r.addPolicy(SAe((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(EAe(),{afterPhase:"Deserialize"}),r.addPolicy(IAe(t.retryOptions),{phase:"Retry"}),r.addPolicy(kAe(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),pB&&r.addPolicy(CAe(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(yAe(t.loggingOptions),{afterPhase:"Sign"}),r}s(PAe,"createPipelineFromOptions");d();function DAe(){let t=eY();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?TY(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(DAe,"createDefaultHttpClient");d();function pT(t){return Rp(t)}s(pT,"createHttpHeaders");d();function AA(t){return Yz(t)}s(AA,"createPipelineRequest");d();d();d();d();var Z6t=qI("core-rest-pipeline retryPolicy");function BAe(t,e={maxRetries:3}){return dT(t,Object.assign({logger:Z6t},e))}s(BAe,"retryPolicy");d();d();var eFt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function tFt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await Qge(e),i=await n();return i}s(tFt,"beginRefresh");function NAe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},eFt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=tFt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(NAe,"createTokenCycler");var bHe="bearerTokenAuthenticationPolicy";async function wY(t,e){try{return[await e(t),void 0]}catch(r){if(VF(r)&&r.response)return[r.response,r];throw r}}s(wY,"trySendRequest");async function rFt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(rFt,"defaultAuthorizeRequest");function vHe(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(vHe,"isChallengeResponse");async function xHe(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(xHe,"authorizeRequestOnCaeChallenge");function SY(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||_C,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:rFt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?NAe(i):()=>Promise.resolve(null);return{name:bHe,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await wY(f,p),vHe(m)){let A=EHe(m.headers.get("WWW-Authenticate"));if(A){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await xHe({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},y),g&&([m,h]=await wY(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await wY(f,p)),vHe(m)&&(A=EHe(m.headers.get("WWW-Authenticate")),A))){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await xHe({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},y),g&&([m,h]=await wY(f,p))}}if(h)throw h;return m}}}s(SY,"bearerTokenAuthenticationPolicy");function nFt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(nFt,"parseChallenges");function EHe(t){var e;return t?(e=nFt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(EHe,"getCaeChallengeClaims");d();d();d();d();d();d();var THe=Ne(IHe(),1),MAe=THe.state;function mT(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=wHe(t,n);!a.propertyFound&&r&&(a=wHe(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=mT(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(mT,"getOperationArgumentValueFromParameter");function wHe(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(wHe,"getPropertyFromParameterPath");var SHe=Symbol.for("@azure/core-client original request");function iFt(t){return SHe in t}s(iFt,"hasOriginalRequest");function cx(t){if(iFt(t))return cx(t[SHe]);let e=MAe.operationRequestMap.get(t);return e||(e={},MAe.operationRequestMap.set(t,e)),e}s(cx,"getOperationRequestInfo");var oFt=["application/json","text/json"],sFt=["application/xml","application/atom+xml"],_He="deserializationPolicy";function LAe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:oFt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:sFt,f=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}};return{name:_He,async sendRequest(h,g){let A=await g(h);return lFt(l,u,A,m,f)}}}s(LAe,"deserializationPolicy");function aFt(t){let e,r=t.request,n=cx(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(aFt,"getOperationResponseMap");function cFt(t){let e=t.request,r=cx(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(cFt,"shouldDeserializeResponse");async function lFt(t,e,r,n,i){let o=await fFt(t,e,r,n,i);if(!cFt(o))return o;let a=cx(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=aFt(o),{error:u,shouldReturnResponse:f}=dFt(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===bC.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new vB(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(lFt,"deserializeResponseBody");function uFt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(uFt,"isOperationSpecEmpty");function dFt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(uFt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new vB(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(f){let A=m;if(e.isXML&&f.type.name===bC.Sequence){A=[];let y=f.xmlElementName;typeof m=="object"&&y&&(A=m[y])}h=e.serializer.deserialize(f,A,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(dFt,"handleErrorResponse");async function fFt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||vB.PARSE_ERROR;throw new vB(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(fFt,"parse");d();d();function RHe(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===bC.Stream&&e.add(Number(r))}return e}s(RHe,"getStreamingResponseStatusCodes");function RC(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(RC,"getPathStringFromParameter");var kHe="serializationPolicy";function FAe(t={}){let e=t.stringifyXML;return{name:kHe,async sendRequest(r,n){let i=cx(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(pFt(r,a,o),mFt(r,a,o,e)),n(r)}}}s(FAe,"serializationPolicy");function pFt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=mT(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,RC(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||RC(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(pFt,"serializeHeaders");function mFt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=mT(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:A,xmlElementName:y,xmlNamespace:E,xmlNamespacePrefix:b,nullable:S}=m,R=m.type.name;try{if(t.body!==void 0&&t.body!==null||S&&t.body===null||h){let B=RC(r.requestBody);t.body=r.serializer.serialize(m,t.body,B,f);let L=R===bC.Stream;if(r.isXML){let O=b?`xmlns:${b}`:"xmlns",K=hFt(E,O,R,t.body,f);R===bC.Sequence?t.body=n(gFt(K,y||A||g,O,E),{rootName:A||g,xmlCharKey:p}):L||(t.body=n(K,{rootName:A||g,xmlCharKey:p}))}else{if(R===bC.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;L||(t.body=JSON.stringify(t.body))}}}catch(B){throw new Error(`Error "${B.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=mT(e,m);if(h!=null){let g=m.mapper.serializedName||RC(m);t.formData[g]=r.serializer.serialize(m.mapper,h,RC(m),f)}}}}s(mFt,"serializeRequestBody");function hFt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o["$"]={[e]:t},o}return n}s(hFt,"getXmlValueWithNamespace");function gFt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i["$"]={[r]:n},i}s(gFt,"prepareXMLRootList");function OAe(t={}){let e=PAe(t??{});return t.credentialOptions&&e.addPolicy(SY({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(FAe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(LAe(t.deserializationOptions),{phase:"Deserialize"}),e}s(OAe,"createClientPipeline");d();var QAe;function PHe(){return QAe||(QAe=DAe()),QAe}s(PHe,"getCachedDefaultHttpClient");d();var AFt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function BHe(t,e,r,n){let i=yFt(e,r,n),o=!1,a=DHe(t,i);if(e.path){let u=DHe(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),CFt(u)?(a=u,o=!0):a=vFt(a,u)}let{queryParams:c,sequenceParams:l}=xFt(e,r,n);return a=bFt(a,c,l,o),a}s(BHe,"getRequestUrl");function DHe(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(DHe,"replaceAll");function yFt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=mT(e,o,r),c=RC(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(yFt,"calculateUrlReplacements");function CFt(t){return t.includes("://")}s(CFt,"isAbsoluteUrl");function vFt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(vFt,"appendPath");function xFt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=mT(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,RC(a));let l=a.collectionFormat?AFt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||RC(a),c)}}return{queryParams:i,sequenceParams:o}}s(xFt,"calculateQueryParameters");function EFt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(EFt,"simpleParseQueryParams");function bFt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=EFt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(bFt,"appendQueryParams");d();var UAe=qI("core-client");var zF=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&UAe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||PHe(),this.pipeline=e.pipeline||IFt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=BHe(n,r,e,this),o=AA({url:i});o.method=r.httpMethod;let a=cx(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=RHe(r));try{let u=await this.sendRequest(o),f=$ge(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=$ge(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function IFt(t){let e=TFt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return OAe(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(IFt,"createDefaultPipeline");function TFt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(TFt,"getCredentialScopes");d();d();d();function NHe(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(NHe,"getIdentityTokenEndpointSuffix");d();var MHe="/.default",LHe="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function YF(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(MHe)?e.substr(0,e.lastIndexOf(MHe)):e}s(YF,"mapScopesToResource");function FHe(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(FHe,"parseExpirationTimestamp");function OHe(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(OHe,"parseRefreshTimestamp");var KF="noCorrelationId";function wFt(t){let e=t?.authorityHost;return $z&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??p6}s(wFt,"getIdentityClientAuthorityHost");var hT=class extends zF{static{s(this,"IdentityClient")}authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let r=`azsdk-js-identity/${rV}`,n=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,i=wFt(e);if(!i.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:n},baseUri:i}),this.authorityHost=i,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){Ep.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:FHe(n),refreshAfterTimestamp:OHe(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return Ep.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new UI(r.status,r.bodyAsText);throw Ep.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;Ep.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return ts.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=NHe(e),p=AA({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:pT({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return Ep.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(f){if(f.name===iV&&f.errorResponse.error==="interaction_required")return Ep.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw Ep.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||KF,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(KF)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){let r=e?.body?.split("&").map(n=>n.split("=")).find(([n])=>n==="client-request-id");return r&&r.length&&r[1]||KF}async sendGetRequestAsync(e,r){let n=AA({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:pT(r?.headers),abortSignal:this.generateAbortSignal(KF)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=AA({url:e,method:"POST",body:r?.body,headers:pT(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));Ep.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){Ep.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};d();var qAe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(qAe||(qAe={}));function RY(t){let e=t;return e===void 0&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(e=process.env.AZURE_REGIONAL_AUTHORITY_NAME),e===qAe.AutoDiscoverRegion?"AUTO_DISCOVER":e}s(RY,"calculateRegionalAuthority");d();d();function SFt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(SFt,"createConfigurationErrorMessage");function Wa(t,e,r=[],n){let i;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?i=t:i=e?.tenantId??t,t&&i!==t&&!r.includes("*")&&!r.some(o=>o.localeCompare(i)===0)){let o=SFt(i);throw n?.info(o),new Ur(o)}return i}s(Wa,"processMultiTenantRequest");function ou(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(xo("",r)),r}}s(ou,"checkTenantId");function xB(t,e,r){return e?(ou(t,e),e):(r||(r=c2),r!==c2?"common":"organizations")}s(xB,"resolveTenantId");function sc(t){return!t||t.length===0?[]:t.includes("*")?G6e:t}s(sc,"resolveAdditionallyAllowedTenantIds");var vf=ti("MsalClient");function $Ft(t,e,r={}){let n=xB(r.logger??vf,e,t),i=qge(n,Uge(r)),o=new hT({...r.tokenCredentialOptions,authorityHost:i,loggingOptions:r.loggingOptions});return{auth:{clientId:t,authority:i,knownAuthorities:ZUe(n,i,r.disableInstanceDiscovery)},system:{networkClient:o,loggerOptions:{loggerCallback:Wz(r.logger??vf),logLevel:jz(lV()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}s($Ft,"generateMsalConfiguration");function Nd(t,e,r={}){let n={msalConfig:$Ft(t,e,r),cachedAccount:r.authenticationRecord?eqe(r.authenticationRecord):null,pluginConfiguration:X6e.generatePluginConfiguration(r),logger:r.logger??vf},i=new Map;async function o(O={}){let K=O.enableCae?"CAE":"default",V=i.get(K);if(V)return n.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new PublicClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new sB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),i.set(K,V),V}s(o,"getPublicApp");let a=new Map;async function c(O={}){let K=O.enableCae?"CAE":"default",V=a.get(K);if(V)return n.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new cB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),a.set(K,V),V}s(c,"getConfidentialApp");async function l(O,K,V={}){if(n.cachedAccount===null)throw n.logger.getToken.info("No cached account found in local state."),new Km({scopes:K});V.claims&&(n.cachedClaims=V.claims);let z={account:n.cachedAccount,scopes:K,claims:n.cachedClaims};n.pluginConfiguration.broker.isEnabled&&(z.tokenQueryParameters||={},n.pluginConfiguration.broker.enableMsaPassthrough&&(z.tokenQueryParameters.msal_request_type="consumer_passthrough")),V.proofOfPossessionOptions&&(z.shrNonce=V.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl),n.logger.getToken.info("Attempting to acquire token silently");try{return await O.acquireTokenSilent(z)}catch(Q){throw nR(K,Q,V)}}s(l,"getTokenSilent");function u(O){return O?.tenantId?qge(O.tenantId,Uge(r)):n.msalConfig.auth.authority}s(u,"calculateRequestAuthority");async function f(O,K,V,z){let Q=null;try{Q=await l(O,K,V)}catch(U){if(U.name!=="AuthenticationRequiredError")throw U;if(V.disableAutomaticAuthentication)throw new Km({scopes:K,getTokenOptions:V,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(Q===null)try{Q=await z()}catch(U){throw nR(K,U,V)}return rR(K,Q,V),n.cachedAccount=Q?.account??null,n.logger.getToken.info(Pl(K)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}s(f,"withSilentAuthentication");async function p(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client secret"),n.msalConfig.auth.clientSecret=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RY(),claims:V?.claims});return rR(O,Q,V),n.logger.getToken.info(Pl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw nR(O,Q,V)}}s(p,"getTokenByClientSecret");async function m(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client assertion"),n.msalConfig.auth.clientAssertion=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RY(),claims:V?.claims,clientAssertion:K});return rR(O,Q,V),n.logger.getToken.info(Pl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw nR(O,Q,V)}}s(m,"getTokenByClientAssertion");async function h(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client certificate"),n.msalConfig.auth.clientCertificate=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RY(),claims:V?.claims});return rR(O,Q,V),n.logger.getToken.info(Pl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw nR(O,Q,V)}}s(h,"getTokenByClientCertificate");async function g(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using device code");let z=await o(V);return f(z,O,V,()=>{let Q={scopes:O,cancel:V?.abortSignal?.aborted??!1,deviceCodeCallback:K,authority:u(V),claims:V?.claims},U=z.acquireTokenByDeviceCode(Q);return V.abortSignal&&V.abortSignal.addEventListener("abort",()=>{Q.cancel=!0}),U})}s(g,"getTokenByDeviceCode");async function A(O,K,V,z={}){n.logger.getToken.info("Attempting to acquire token using username and password");let Q=await o(z);return f(Q,O,z,()=>{let U={scopes:O,username:K,password:V,authority:u(z),claims:z?.claims};return Q.acquireTokenByUsernamePassword(U)})}s(A,"getTokenByUsernamePassword");function y(){if(n.cachedAccount)return tqe(t,n.cachedAccount)}s(y,"getActiveAccount");async function E(O,K,V,z,Q={}){n.logger.getToken.info("Attempting to acquire token using authorization code");let U;return z?(n.msalConfig.auth.clientSecret=z,U=await c(Q)):U=await o(Q),f(U,O,Q,()=>U.acquireTokenByCode({scopes:O,redirectUri:K,code:V,authority:u(Q),claims:Q?.claims}))}s(E,"getTokenByAuthorizationCode");async function b(O,K,V,z={}){vf.getToken.info("Attempting to acquire token on behalf of another user"),typeof V=="string"?(vf.getToken.info("Using client secret for on behalf of flow"),n.msalConfig.auth.clientSecret=V):typeof V=="function"?(vf.getToken.info("Using client assertion callback for on behalf of flow"),n.msalConfig.auth.clientAssertion=V):(vf.getToken.info("Using client certificate for on behalf of flow"),n.msalConfig.auth.clientCertificate=V);let Q=await c(z);try{let U=await Q.acquireTokenOnBehalfOf({scopes:O,authority:u(z),claims:z.claims,oboAssertion:K});return rR(O,U,z),vf.getToken.info(Pl(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw nR(O,U,z)}}s(b,"getTokenOnBehalfOf");function S(O,K){return{openBrowser:s(async V=>{await(await Promise.resolve().then(()=>(NY(),p$e))).default(V,{newInstance:!0})},"openBrowser"),scopes:O,authority:u(K),claims:K?.claims,loginHint:K?.loginHint,errorTemplate:K?.browserCustomizationOptions?.errorMessage,successTemplate:K?.browserCustomizationOptions?.successMessage,prompt:K?.loginHint?"login":"select_account"}}s(S,"createBaseInteractiveRequest");async function R(O,K,V={}){vf.verbose("Authentication will resume through the broker");let z=await o(V),Q=S(O,V);n.pluginConfiguration.broker.parentWindowHandle?Q.windowHandle=Buffer.from(n.pluginConfiguration.broker.parentWindowHandle):vf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),n.pluginConfiguration.broker.enableMsaPassthrough&&((Q.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),K?(Q.prompt="none",vf.verbose("Attempting broker authentication using the default broker account")):vf.verbose("Attempting broker authentication without the default broker account"),V.proofOfPossessionOptions&&(Q.shrNonce=V.proofOfPossessionOptions.nonce,Q.authenticationScheme="pop",Q.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,Q.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl);try{return await z.acquireTokenInteractive(Q)}catch(U){if(vf.verbose(`Failed to authenticate through the broker: ${U.message}`),V.disableAutomaticAuthentication)throw new Km({scopes:O,getTokenOptions:V,message:"Cannot silently authenticate with default broker account."});if(K)return R(O,!1,V);throw U}}s(R,"getBrokeredTokenInternal");async function B(O,K,V={}){vf.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${K}`);let z=await R(O,K,V);return rR(O,z,V),n.cachedAccount=z?.account??null,n.logger.getToken.info(Pl(O)),{token:z.accessToken,expiresOnTimestamp:z.expiresOn.getTime(),refreshAfterTimestamp:z.refreshOn?.getTime(),tokenType:z.tokenType}}s(B,"getBrokeredToken");async function L(O,K={}){vf.getToken.info("Attempting to acquire token interactively");let V=await o(K);return f(V,O,K,async()=>{let z=S(O,K);return n.pluginConfiguration.broker.isEnabled?R(O,n.pluginConfiguration.broker.useDefaultBrokerAccount??!1,K):(K.proofOfPossessionOptions&&(z.shrNonce=K.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=K.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=K.proofOfPossessionOptions.resourceRequestUrl),V.acquireTokenInteractive(z))})}return s(L,"getTokenByInteractiveRequest"),{getActiveAccount:y,getBrokeredToken:B,getTokenByClientSecret:p,getTokenByClientAssertion:m,getTokenByClientCertificate:h,getTokenByDeviceCode:g,getTokenByUsernamePassword:A,getTokenByAuthorizationCode:E,getTokenOnBehalfOf:b,getTokenByInteractiveRequest:L}}s(Nd,"createMsalClient");var tO=require("node:crypto");var h$e=require("node:fs/promises");var eO="ClientCertificateCredential",m$e=ti(eO),rO=class{static{s(this,"ClientCertificateCredential")}tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${eO}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration={...typeof n=="string"?{certificatePath:n}:n};let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${eO}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${eO}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Nd(r,e,{...i,logger:m$e,tokenCredentialOptions:i})}async getToken(e,r={}){return ts.withSpan(`${eO}.getToken`,r,async n=>{n.tenantId=Wa(this.tenantId,n,this.additionallyAllowedTenantIds,m$e);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){let e=await WFt(this.certificateConfiguration,this.sendCertificateChain??!1),r;return this.certificateConfiguration.certificatePassword!==void 0?r=(0,tO.createPrivateKey)({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():r=e.certificateContents,{thumbprint:e.thumbprint,thumbprintSha256:e.thumbprintSha256,privateKey:r,x5c:e.x5c}}};async function WFt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,h$e.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,tO.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,tO.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(WFt,"parseCertificate");d();d();function sh(t){return Array.isArray(t)?t:[t]}s(sh,"ensureScopes");function IB(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(xo(t,r)),r}}s(IB,"ensureValidScopeForDevTimeCreds");function MY(t){return t.replace(/\/.default$/,"")}s(MY,"getScopeResource");var g$e=ti("ClientSecretCredential"),nO=class{static{s(this,"ClientSecretCredential")}tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,r,n,i={}){if(!e)throw new Ur("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new Ur("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new Ur("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.msalClient=Nd(r,e,{...i,logger:g$e,tokenCredentialOptions:i})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wa(this.tenantId,n,this.additionallyAllowedTenantIds,g$e);let i=sh(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var jFt=ti("UsernamePasswordCredential"),iO=class{static{s(this,"UsernamePasswordCredential")}tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,r,n,i,o={}){if(!e)throw new Ur("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new Ur("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new Ur("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new Ur("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=sc(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=Nd(r,this.tenantId,{...o,tokenCredentialOptions:o??{}})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wa(this.tenantId,n,this.additionallyAllowedTenantIds,jFt);let i=sh(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var GFt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function VFt(){return(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";")}s(VFt,"getAdditionallyAllowedTenants");var LY="EnvironmentCredential",lx=ti(LY);function zFt(){let t=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),e=t==="true"||t==="1";return lx.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${e}`),e}s(zFt,"getSendCertificateChain");var oO=class{static{s(this,"EnvironmentCredential")}_credential=void 0;constructor(e){let r=uV(GFt).assigned.join(", ");lx.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=VFt(),c=zFt(),l={...e,additionallyAllowedTenantIds:a,sendCertificateChain:c};if(n&&ou(lx,n),n&&i&&o){lx.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new nO(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){lx.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new rO(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(lx.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),lx.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new iO(n,i,p,m,l))}async getToken(e,r={}){return ts.withSpan(`${LY}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return lx.getToken.info(Pl(e)),i}catch(i){let o=new UI(400,{error:`${LY} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw lx.getToken.info(xo(e,o)),o}throw new Ur(`${LY} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};d();d();var YFt=1e3*64,KFt=3e3;function A$e(t){return BAe([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(KFt,t.startDelayInMs):t.startDelayInMs;return JUe(e,{retryDelayInMs:n,maxRetryDelayInMs:YFt})},"retry")}],{maxRetries:t.maxRetries})}s(A$e,"imdsRetryPolicy");d();var ux="ManagedIdentityCredential - IMDS",oR=ti(ux),JFt="http://169.254.169.254",XFt="/metadata/identity/oauth2/token";function ZFt(t){if(!YF(t))throw new Error(`${ux}: Multiple scopes are not supported.`);let r=new URL(XFt,process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??JFt),n={Accept:"application/json"};return{url:`${r}`,method:"GET",headers:pT(n)}}s(ZFt,"prepareInvalidRequestOptions");var y$e={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=YF(e);if(!i)return oR.info(`${ux}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=ZFt(i);return ts.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{o.tracingOptions=a.tracingOptions;let c=AA(o);c.timeout=a.requestOptions?.timeout||1e3,c.allowInsecureConnection=!0;let l;try{oR.info(`${ux}: Pinging the Azure IMDS endpoint`),l=await r.sendRequest(c)}catch(u){return Hz(u)&&oR.verbose(`${ux}: Caught error ${u.name}: ${u.message}`),oR.info(`${ux}: The Azure IMDS endpoint is unavailable`),!1}return l.status===403&&l.bodyAsText?.includes("unreachable")?(oR.info(`${ux}: The Azure IMDS endpoint is unavailable`),oR.info(`${ux}: ${l.bodyAsText}`),!1):(oR.info(`${ux}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();var C$e=ti("ClientAssertionCredential"),TB=class{static{s(this,"ClientAssertionCredential")}msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,r,n,i={}){if(!e)throw new Ur("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new Ur("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new Ur("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=Nd(r,e,{...i,logger:C$e,tokenCredentialOptions:this.options})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wa(this.tenantId,n,this.additionallyAllowedTenantIds,C$e);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var v$e=require("node:fs/promises");var sR="WorkloadIdentityCredential",eOt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],sO=ti(sR),dx=class{static{s(this,"WorkloadIdentityCredential")}client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let r=uV(eOt).assigned.join(", ");sO.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&ou(sO,i),!o)throw new Ur(`${sR}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new Ur(`${sR}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new Ur(`${sR}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);sO.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new TB(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${sR}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw sO.info(n),new Ur(n)}return sO.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Ur(`${sR}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,v$e.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new Ur(`${sR}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var x$e="ManagedIdentityCredential - Token Exchange",tOt=ti(x$e),aye={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||tOt.info(`${x$e}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new dx({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...i,disableInstanceDiscovery:!0}).getToken(r,e)}};var Dp=ti("ManagedIdentityCredential"),CT=class{static{s(this,"ManagedIdentityCredential")}managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,r){let n;typeof e=="string"?(this.clientId=e,n=r??{}):(this.clientId=e?.clientId,n=e??{}),this.resourceId=n?.resourceId,this.objectId=n?.objectId;let i=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(a=>a.value);if(i.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);n.allowInsecureConnection=!0,n.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=n.retryOptions.maxRetries),this.identityClient=new hT({...n,additionalPolicies:[{policy:A$e(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new lB({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:jz(lV()),piiLoggingEnabled:n.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:Wz(Dp)}}}),this.isAvailableIdentityClient=new hT({...n,retryOptions:{maxRetries:0}});let o=this.managedIdentityApp.getManagedIdentitySource();if(o==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw Dp.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Ur("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(o==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw Dp.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Ur(`ManagedIdentityCredential: ${LHe}`);if(Dp.info(`Using ${o} managed identity.`),i.length===1){let{key:a,value:c}=i[0];Dp.info(`${o} with ${a}: ${c}`)}}async getToken(e,r={}){Dp.getToken.info("Using the MSAL provider for Managed Identity.");let n=YF(e);if(!n)throw new Ur(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return ts.withSpan("ManagedIdentityCredential.getToken",r,async()=>{try{let i=await aye.isAvailable(this.clientId),o=this.managedIdentityApp.getManagedIdentitySource(),a=o==="DefaultToImds"||o==="Imds";if(Dp.getToken.info(`MSAL Identity source: ${o}`),i){Dp.getToken.info("Using the token exchange managed identity.");let l=await aye.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(l===null)throw new Ur("Attempted to use the token exchange managed identity, but received a null response.");return l}else if(a&&(Dp.getToken.info("Using the IMDS endpoint to probe for availability."),!await y$e.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Ur("Attempted to use the IMDS endpoint, but it is not available.");Dp.getToken.info("Calling into MSAL for managed identity token.");let c=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,c,r),Dp.getToken.info(Pl(e)),{expiresOnTimestamp:c.expiresOn.getTime(),token:c.accessToken,refreshAfterTimestamp:c.refreshOn?.getTime(),tokenType:"Bearer"}}catch(i){throw Dp.getToken.error(xo(e,i)),i.name==="AuthenticationRequiredError"?i:rOt(i)?new Ur(`ManagedIdentityCredential: Network unreachable. Message: ${i.message}`,{cause:i}):new Ur(`ManagedIdentityCredential: Authentication failed. Message ${i.message}`,{cause:i})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(Dp.getToken.info(o),new Km({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function rOt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(rOt,"isNetworkError");d();var E$e=Ne(require("child_process"),1);var fx=ti("AzureDeveloperCliCredential"),b$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(fx.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{let c=["azd",...["auth","token","--output","json",...t.reduce((l,u)=>l.concat("--scope",u),[]),...n]].join(" ");E$e.default.exec(c,{cwd:b$e.getSafeWorkingDir(),timeout:r},(l,u,f)=>{i({stdout:u,stderr:f,error:l})})}catch(a){o(a)}})}},aO=class{static{s(this,"AzureDeveloperCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(ou(fx,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Wa(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(fx,n);let i;return typeof e=="string"?i=[e]:i=e,fx.getToken.info(`Using the scopes ${e}`),ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{i.forEach(l=>{IB(l,fx)});let o=await b$e.getAzdAccessToken(i,n,this.timeout),a=o.stderr?.match("not logged in, run `azd login` to login")||o.stderr?.match("not logged in, run `azd auth login` to login");if(o.stderr?.match("azd:(.*)not found")||o.stderr?.startsWith("'azd' is not recognized")||o.error&&o.error.code==="ENOENT"){let l=new Ur("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw fx.getToken.info(xo(e,l)),l}if(a){let l=new Ur("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw fx.getToken.info(xo(e,l)),l}try{let l=JSON.parse(o.stdout);return fx.getToken.info(Pl(e)),{token:l.token,expiresOnTimestamp:new Date(l.expiresOn).getTime(),tokenType:"Bearer"}}catch(l){throw o.stderr?new Ur(o.stderr):l}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Ur(o.message||"Unknown error while trying to retrieve the access token");throw fx.getToken.info(xo(e,a)),a}})}};d();var I$e=Ne(require("child_process"),1);d();function cye(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(xo("",r)),r}}s(cye,"checkSubscription");var ah=ti("AzureCliCredential"),T$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(ah.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{let u=["az",...["account","get-access-token","--output","json","--resource",t,...i,...o]].join(" ");I$e.default.exec(u,{cwd:T$e.getSafeWorkingDir(),timeout:n},(f,p,m)=>{a({stdout:p,stderr:m,error:f})})}catch(l){c(l)}})}},cO=class{static{s(this,"AzureCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(ou(ah,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(cye(ah,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Wa(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(ah,n),this.subscription&&cye(ah,this.subscription);let i=typeof e=="string"?e:e[0];return ah.getToken.info(`Using the scope ${i}`),ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{IB(i,ah);let o=MY(i),a=await T$e.getAzureCliAccessToken(o,n,this.subscription,this.timeout),c=a.stderr?.match("(.*)az login --scope(.*)"),l=a.stderr?.match("(.*)az login(.*)")&&!c;if(a.stderr?.match("az:(.*)not found")||a.stderr?.startsWith("'az' is not recognized")){let f=new Ur("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw ah.getToken.info(xo(e,f)),f}if(l){let f=new Ur("Please run 'az login' from a command prompt to authenticate before using this credential.");throw ah.getToken.info(xo(e,f)),f}try{let f=a.stdout,p=this.parseRawResponse(f);return ah.getToken.info(Pl(e)),p}catch(f){throw a.stderr?new Ur(a.stderr):f}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Ur(o.message||"Unknown error while trying to retrieve the access token");throw ah.getToken.info(xo(e,a)),a}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return ah.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new Ur(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();d();var w$e=Ne(require("node:child_process"),1),S$e={execFile(t,e,r){return new Promise((n,i)=>{let o=[...e],a=[t,...o].join(" ");w$e.default.exec(a,r,(c,l,u)=>{Buffer.isBuffer(l)&&(l=l.toString("utf8")),Buffer.isBuffer(u)&&(u=u.toString("utf8")),u||c?i(u?new Error(u):c):n(l)})})}};var px=ti("AzurePowerShellCredential"),R$e=process.platform==="win32";function k$e(t){return R$e?`${t}.exe`:t}s(k$e,"formatCommand");async function _$e(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await S$e.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(_$e,"runCommands");var P$e={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},lye={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},nOt=s(t=>t.message.match(`(.*)${P$e.login}(.*)`),"isLoginError"),iOt=s(t=>t.message.match(P$e.installed),"isNotInstalledError"),uye=[k$e("pwsh")];R$e&&uye.push(k$e("powershell"));var lO=class{static{s(this,"AzurePowerShellCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(ou(px,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...uye]){try{await _$e([[i,"/?"]],n)}catch{uye.shift();continue}let a=(await _$e([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return oOt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=Wa(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&ou(px,n);try{IB(i,px),px.getToken.info(`Using the scope ${i}`);let o=MY(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return px.getToken.info(Pl(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(iOt(o)){let c=new Ur(lye.installed);throw px.getToken.info(xo(i,c)),c}else if(nOt(o)){let c=new Ur(lye.login);throw px.getToken.info(xo(i,c)),c}let a=new Ur(`${o}. ${lye.troubleshoot}`);throw px.getToken.info(xo(i,a)),a}})}};async function oOt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&px.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(oOt,"parseJsonToken");d();var D$e=require("node:fs/promises");var sOt="common",aOt="aebc6443-996d-45c2-90f0-388ff96faa56",dye=ti("VisualStudioCodeCredential"),cOt={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function lOt(t){let e=cOt[t];if(e)throw new Ur(e)}s(lOt,"checkUnsupportedTenant");var uO=class{static{s(this,"VisualStudioCodeCredential")}tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(ou(dye,e.tenantId),this.tenantId=e.tenantId):this.tenantId=sOt,this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),lOt(this.tenantId)}async prepare(e){let r=Wa(this.tenantId,this.options,this.additionallyAllowedTenantIds,dye)||this.tenantId;if(!J6e()||!nV)throw new Ur("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let n=await this.loadAuthRecord(nV,e);this.msalClient=Nd(aOt,r,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:n})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,r){let n=sh(e);if(await this.prepareOnce(n),!this.msalClient)throw new Ur("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(n,r||{})}async loadAuthRecord(e,r){try{let n=await(0,D$e.readFile)(e,{encoding:"utf8"});return Hge(n)}catch(n){throw dye.getToken.info(xo(r,n)),new Ur("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}};d();var FY=ti("BrokerCredential"),OY=class{static{s(this,"BrokerCredential")}brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=xB(FY,e.tenantId),this.brokerAdditionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants);let r={...e,tokenCredentialOptions:e,logger:FY,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=Nd(c2,this.brokerTenantId,r)}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wa(this.brokerTenantId,n,this.brokerAdditionallyAllowedTenantIds,FY);let i=sh(e);try{return this.brokerMsalClient.getBrokeredToken(i,!0,{...n,disableAutomaticAuthentication:!0})}catch(o){throw FY.getToken.info(xo(i,o)),new Ur("Failed to acquire token using broker authentication",{cause:o})}})}};function B$e(t={}){return new OY(t)}s(B$e,"createDefaultBrokerCredential");function fye(t={}){return new uO(t)}s(fye,"createDefaultVisualStudioCodeCredential");function pye(t={}){t.retryOptions??={maxRetries:5,retryDelayInMs:800};let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=t?.managedIdentityResourceId,i=process.env.AZURE_FEDERATED_TOKEN_FILE,o=t?.tenantId??process.env.AZURE_TENANT_ID;if(n){let a={...t,resourceId:n};return new CT(a)}if(i&&r){let a={...t,tenantId:o};return new CT(r,a)}if(e){let a={...t,clientId:e};return new CT(a)}return new CT(t)}s(pye,"createDefaultManagedIdentityCredential");function mye(t){let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=process.env.AZURE_FEDERATED_TOKEN_FILE,i=t?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let o={...t,tenantId:i,clientId:r,tokenFilePath:n};return new dx(o)}if(i){let o={...t,tenantId:i};return new dx(o)}return new dx(t)}s(mye,"createDefaultWorkloadIdentityCredential");function hye(t={}){return new aO(t)}s(hye,"createDefaultAzureDeveloperCliCredential");function gye(t={}){return new cO(t)}s(gye,"createDefaultAzureCliCredential");function Aye(t={}){return new lO(t)}s(Aye,"createDefaultAzurePowershellCredential");function yye(t={}){return new oO(t)}s(yye,"createDefaultEnvironmentCredential");var Cye=ti("DefaultAzureCredential"),vye=class{static{s(this,"UnavailableDefaultCredential")}credentialUnavailableErrorMessage;credentialName;constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return Cye.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},wB=class extends A6{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[fye,gye,Aye,hye,B$e],i=[yye,mye,pye],o=[],a="EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential";if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;case"environmentcredential":o=[yye];break;case"workloadidentitycredential":o=[mye];break;case"managedidentitycredential":o=[pye];break;case"visualstudiocodecredential":o=[fye];break;case"azureclicredential":o=[gye];break;case"azurepowershellcredential":o=[Aye];break;case"azuredeveloperclicredential":o=[hye];break;default:{let l=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - ${a}.`;throw Cye.warning(l),new Error(l)}}else o=[...i,...n];let c=o.map(l=>{try{return l(e)}catch(u){return Cye.warning(`Skipped ${l.name} because of an error creating the credential: ${u}`),new vye(l.name,u.message)}});super(...c)}};d();var CRn=ti("InteractiveBrowserCredential");d();var RRn=ti("DeviceCodeCredential");d();var uOt="AzurePipelinesCredential",QRn=ti(uOt);d();var YRn=ti("AuthorizationCodeCredential");d();var dOt="OnBehalfOfCredential",okn=ti(dOt);d();function fOt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(fOt,"getIntegrationId");function kC(t){let e={...Ap(t),"X-GitHub-Api-Version":QI},r=fOt(t.get(mn));return r&&(e["Copilot-Integration-Id"]=r),l6()&&(e["ces-proxy-target"]=s2.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(kC,"getCapiHeaders");function QY(t,e,...r){if(l6()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Ym(t,e,"api",...r)}s(QY,"getCapiUrl");async function aR(t,e){let r=await t.get(Br).getToken(),n=QY(t,r,e),i=r.token;l6()&&(i=await M$e());let o={Authorization:`Bearer ${i}`,...kC(t)};return await t.get($r).fetch(new URL(n).href,{method:"GET",headers:o})}s(aR,"fetchCapiUrl");async function N$e(t,e,r){let n=await t.get(Br).getToken(),i=QY(t,n,e),o=n.token;l6()&&(o=await M$e());let a={Authorization:`Bearer ${o}`,...kC(t)};return await t.get($r).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(N$e,"postCapiUrl");async function M$e(){let e=await new wB().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(M$e,"getMsBenchToken");d();var L$e=600*1e3,Wr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",Gpt5:"gpt-5",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},F$e=new Set([Wr.O1Ga,Wr.O3Mini,Wr.O1Mini,Wr.Gemini20Pro,Wr.Gemini20Flash]);function ch(t){switch(t){case"edits":case"user":case"inline":return[Wr.Gpt4o,Wr.Gpt4turbo,Wr.Gpt4,Wr.O1Mini,Wr.O1Ga,Wr.Claude35Sonnet,Wr.O3Mini,Wr.Gemini20Flash,Wr.Claude37Sonnet,Wr.Claude37SonnetThought,Wr.Gpt45,Wr.Gpt41,Wr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt35turbo,Wr.Gpt41,Wr.CopilotBase];case"gitCommit":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt4,Wr.Gpt41,Wr.CopilotBase];case"codeReview":return[Wr.Gpt4,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase];case"nesStubs":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase]}}s(ch,"getSupportedModelFamiliesForPrompt");var HY={textEmbedding3Small:"text-embedding-3-small"},pOt=x.Object({type:x.Union([x.Literal("chat"),x.Literal("embeddings"),x.Literal("completion")]),tokenizer:x.String(),family:x.String(),object:x.String(),supports:x.Optional(x.Object({tool_calls:x.Optional(x.Boolean()),parallel_tool_calls:x.Optional(x.Boolean()),streaming:x.Optional(x.Boolean()),vision:x.Optional(x.Boolean())})),limits:x.Optional(x.Object({max_inputs:x.Optional(x.Number()),max_prompt_tokens:x.Optional(x.Number()),max_output_tokens:x.Optional(x.Number()),max_context_window_tokens:x.Optional(x.Number())}))}),mOt=x.Object({id:x.String(),name:x.String(),version:x.String(),model_picker_enabled:x.Boolean(),is_chat_default:x.Optional(x.Boolean()),is_chat_fallback:x.Optional(x.Boolean()),capabilities:pOt,billing:x.Optional(x.Object({is_premium:x.Optional(x.Boolean()),multiplier:x.Optional(x.Number())})),object:x.String(),preview:x.Optional(x.Boolean()),isExperimental:x.Optional(x.Boolean()),policy:x.Optional(x.Object({state:x.String(),terms:x.String()}))}),O$e=x.Object({data:x.Array(mOt)}),xf=class{static{s(this,"ModelMetadataProvider")}},UY=class extends xf{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;Ps(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await aR(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){un.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw un.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new fC(r)}await this.processModels(r)}async fetchModel(r){let n=await aR(this.ctx,`/models/${r}`);if(!n.ok){un.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await N$e(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){un.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>L$e}},qY=class extends xf{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Mt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<L$e)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function Q$e(t){let e=zi(t,Ht.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(Q$e,"getUserSelectedModelConfiguration");d();d();d();var SB=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var U$e=Ne(require("node:fs/promises")),$Y=Ne(require("node:path"));async function WY(t){return await U$e.readFile(xye(t))}s(WY,"readFile");function xye(t){return $Y.default.resolve($Y.default.extname(__filename)!==".ts"?__dirname:$Y.default.resolve(__dirname,"../../dist"),t)}s(xye,"locateFile");var _B=Ne(eWe());var KY=new Map;function Ni(t="o200k_base"){let e=KY.get(t);return e!==void 0||(e=KY.get("o200k_base"),e!==void 0)?e:new xT}s(Ni,"getTokenizer");async function rWe(t="o200k_base"){return await cR,Ni(t)}s(rWe,"getTokenizerAsync");async function kOt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await WY(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(kOt,"parseTikTokenNoIndex");var Dye=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,_B.createTokenizer)(await kOt(`resources/${e}.tiktoken.noindex`),(0,_B.getSpecialTokensByEncoder)(e),(0,_B.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new SB("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Bye=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},POt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},Pye=4,xT=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,Pye)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-Pye),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-Pye)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?POt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function tWe(t){try{let e=await Dye.create(t);KY.set(t,e)}catch{}}s(tWe,"setTokenizer");var cR=(async()=>{KY.set("mock",new Bye),await Promise.all([tWe("cl100k_base"),tWe("o200k_base")])})();d();d();var DOt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},iWe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Nye,JY,oWe,Mye=class extends Dn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Nye.add(this),JY.set(this,void 0),DOt(this,JY,e,"f"),this.error=r}Errors(){return new wI(iWe(this,Nye,"m",oWe).call(this))}};JY=new WeakMap,Nye=new WeakSet,oWe=s(function*(){this.error&&(yield this.error),yield*iWe(this,JY,"f")},"_AssertError_Iterator");function nWe(t,e,r){if(!ki(t,e,r))throw new Mye(sC(t,e,r))}s(nWe,"AssertValue");function XY(...t){return t.length===3?nWe(t[0],t[1],t[2]):nWe(t[0],[],t[1])}s(XY,"Assert");d();d();d();function BOt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Ro(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Ro(t[r]);return e}s(BOt,"FromObject");function NOt(t){return t.map(e=>Ro(e))}s(NOt,"FromArray");function MOt(t){return t.slice()}s(MOt,"FromTypedArray");function LOt(t){return new Map(Ro([...t.entries()]))}s(LOt,"FromMap");function FOt(t){return new Set(Ro([...t.entries()]))}s(FOt,"FromSet");function OOt(t){return new Date(t.toISOString())}s(OOt,"FromDate");function Ro(t){if(Pn(t))return NOt(t);if(sf(t))return OOt(t);if(Om(t))return MOt(t);if(XBe(t))return LOt(t);if(ZBe(t))return FOt(t);if(Si(t))return BOt(t);if(cp(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ro,"Clone");var Bp=class extends Dn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function ko(t){return AI(t)?t():Ro(t)}s(ko,"FromDefault");function QOt(t,e){return kn(t,"default")?ko(t.default):{}}s(QOt,"FromAny");function UOt(t,e){return{}}s(UOt,"FromArgument");function qOt(t,e){if(t.uniqueItems===!0&&!kn(t,"default"))throw new Bp(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!kn(t,"default"))throw new Bp(t,"Array with the contains constraint requires a default value");return"default"in t?ko(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>y0(t.items,e)):[]}s(qOt,"FromArray");function HOt(t,e){return kn(t,"default")?ko(t.default):async function*(){}()}s(HOt,"FromAsyncIterator");function $Ot(t,e){return kn(t,"default")?ko(t.default):BigInt(0)}s($Ot,"FromBigInt");function WOt(t,e){return kn(t,"default")?ko(t.default):!1}s(WOt,"FromBoolean");function jOt(t,e){if(kn(t,"default"))return ko(t.default);{let r=y0(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(jOt,"FromConstructor");function GOt(t,e){return kn(t,"default")?ko(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(GOt,"FromDate");function VOt(t,e){return kn(t,"default")?ko(t.default):()=>y0(t.returns,e)}s(VOt,"FromFunction");function zOt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return y0(n,[...e,...r])}s(zOt,"FromImport");function YOt(t,e){return kn(t,"default")?ko(t.default):t.minimum!==void 0?t.minimum:0}s(YOt,"FromInteger");function KOt(t,e){if(kn(t,"default"))return ko(t.default);{let r=t.allOf.reduce((n,i)=>{let o=y0(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!ki(t,e,r))throw new Bp(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(KOt,"FromIntersect");function JOt(t,e){return kn(t,"default")?ko(t.default):function*(){}()}s(JOt,"FromIterator");function XOt(t,e){return kn(t,"default")?ko(t.default):t.const}s(XOt,"FromLiteral");function ZOt(t,e){if(kn(t,"default"))return ko(t.default);throw new Bp(t,"Never types cannot be created. Consider using a default value.")}s(ZOt,"FromNever");function e7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Bp(t,"Not types must have a default value")}s(e7t,"FromNot");function t7t(t,e){return kn(t,"default")?ko(t.default):null}s(t7t,"FromNull");function r7t(t,e){return kn(t,"default")?ko(t.default):t.minimum!==void 0?t.minimum:0}s(r7t,"FromNumber");function n7t(t,e){if(kn(t,"default"))return ko(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=y0(o,e));return n}}s(n7t,"FromObject");function i7t(t,e){return kn(t,"default")?ko(t.default):Promise.resolve(y0(t.item,e))}s(i7t,"FromPromise");function o7t(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(kn(t,"default"))return ko(t.default);if(r===nC||r===rC)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=y0(n,e);return o}}s(o7t,"FromRecord");function s7t(t,e){return kn(t,"default")?ko(t.default):y0(wo(t,e),e)}s(s7t,"FromRef");function a7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Bp(t,"RegExp types cannot be created. Consider using a default value.")}s(a7t,"FromRegExp");function c7t(t,e){if(t.pattern!==void 0){if(kn(t,"default"))return ko(t.default);throw new Bp(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(kn(t,"default"))return ko(t.default);throw new Bp(t,"String types with formats must specify a default value")}else return kn(t,"default")?ko(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(c7t,"FromString");function l7t(t,e){return kn(t,"default")?ko(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(l7t,"FromSymbol");function u7t(t,e){if(kn(t,"default"))return ko(t.default);if(!wj(t))throw new Bp(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return Q4(t)[0]}s(u7t,"FromTemplateLiteral");function d7t(t,e){if(sWe++>C7t)throw new Bp(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return kn(t,"default")?ko(t.default):y0(wo(t,e),e)}s(d7t,"FromThis");function f7t(t,e){return kn(t,"default")?ko(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>y0(t.items[n],e))}s(f7t,"FromTuple");function p7t(t,e){if(kn(t,"default"))return ko(t.default)}s(p7t,"FromUndefined");function m7t(t,e){if(kn(t,"default"))return ko(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return y0(t.anyOf[0],e)}s(m7t,"FromUnion");function h7t(t,e){return kn(t,"default")?ko(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(h7t,"FromUint8Array");function g7t(t,e){return kn(t,"default")?ko(t.default):{}}s(g7t,"FromUnknown");function A7t(t,e){if(kn(t,"default"))return ko(t.default)}s(A7t,"FromVoid");function y7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Error("User defined types must specify a default value")}s(y7t,"FromKind");function y0(t,e){let r=Kl(t,e),n=t;switch(n[ot]){case"Any":return QOt(n,r);case"Argument":return UOt(n,r);case"Array":return qOt(n,r);case"AsyncIterator":return HOt(n,r);case"BigInt":return $Ot(n,r);case"Boolean":return WOt(n,r);case"Constructor":return jOt(n,r);case"Date":return GOt(n,r);case"Function":return VOt(n,r);case"Import":return zOt(n,r);case"Integer":return YOt(n,r);case"Intersect":return KOt(n,r);case"Iterator":return JOt(n,r);case"Literal":return XOt(n,r);case"Never":return ZOt(n,r);case"Not":return e7t(n,r);case"Null":return t7t(n,r);case"Number":return r7t(n,r);case"Object":return n7t(n,r);case"Promise":return i7t(n,r);case"Record":return o7t(n,r);case"Ref":return s7t(n,r);case"RegExp":return a7t(n,r);case"String":return c7t(n,r);case"Symbol":return l7t(n,r);case"TemplateLiteral":return u7t(n,r);case"This":return d7t(n,r);case"Tuple":return f7t(n,r);case"Undefined":return p7t(n,r);case"Union":return m7t(n,r);case"Uint8Array":return h7t(n,r);case"Unknown":return g7t(n,r);case"Void":return A7t(n,r);default:if(!af.Has(n[ot]))throw new Bp(n,"Unknown type");return y7t(n,r)}}s(y0,"Visit");var C7t=512,sWe=0;function lh(...t){return sWe=0,t.length===2?y0(t[0],t[1]):y0(t[0],[])}s(lh,"Create");var ZY=class extends Dn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function v7t(t,e,r){if(t[ot]==="Object"&&typeof r=="object"&&!Bv(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[ot]==="Literal"&&f.const===r[u]?c:0,m=ki(f,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return ki(t,e,r)?1:0}s(v7t,"ScoreUnion");function x7t(t,e,r){let n=t.anyOf.map(a=>wo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=v7t(a,e,r);c>o&&(i=a,o=c)}return i}s(x7t,"SelectUnion");function E7t(t,e,r){if("default"in t)return typeof r=="function"?t.default:Ro(t.default);{let n=x7t(t,e,r);return fO(n,e,r)}}s(E7t,"CastUnion");function b7t(t,e,r){return ki(t,e,r)?Ro(r):lh(t,e)}s(b7t,"DefaultClone");function I7t(t,e,r){return ki(t,e,r)?r:lh(t,e)}s(I7t,"Default");function T7t(t,e,r){if(ki(t,e,r))return Ro(r);let n=Pn(r)?Ro(r):lh(t,e),i=cn(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(cn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>yA(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!ki(t,e,c))throw new ZY(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(T7t,"FromArray");function w7t(t,e,r){if(ki(t,e,r))return lh(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=yA(a,e,r.prototype[o]));return i}s(w7t,"FromConstructor");function S7t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return yA(i,[...e,...n],r)}s(S7t,"FromImport");function _7t(t,e,r){let n=lh(t,e),i=Si(n)&&Si(r)?{...n,...r}:r;return ki(t,e,i)?i:lh(t,e)}s(_7t,"FromIntersect");function R7t(t,e,r){throw new ZY(t,"Never types cannot be cast")}s(R7t,"FromNever");function k7t(t,e,r){if(ki(t,e,r))return r;if(r===null||typeof r!="object")return lh(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=yA(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=yA(t.additionalProperties,e,r[a]))}return i}s(k7t,"FromObject");function P7t(t,e,r){if(ki(t,e,r))return Ro(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return lh(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=yA(i,e,c);return o}s(P7t,"FromRecord");function D7t(t,e,r){return yA(wo(t,e),e,r)}s(D7t,"FromRef");function B7t(t,e,r){return yA(wo(t,e),e,r)}s(B7t,"FromThis");function N7t(t,e,r){return ki(t,e,r)?Ro(r):Pn(r)?t.items===void 0?[]:t.items.map((n,i)=>yA(n,e,r[i])):lh(t,e)}s(N7t,"FromTuple");function M7t(t,e,r){return ki(t,e,r)?Ro(r):E7t(t,e,r)}s(M7t,"FromUnion");function yA(t,e,r){let n=yo(t.$id)?Kl(t,e):e,i=t;switch(t[ot]){case"Array":return T7t(i,n,r);case"Constructor":return w7t(i,n,r);case"Import":return S7t(i,n,r);case"Intersect":return _7t(i,n,r);case"Never":return R7t(i,n,r);case"Object":return k7t(i,n,r);case"Record":return P7t(i,n,r);case"Ref":return D7t(i,n,r);case"This":return B7t(i,n,r);case"Tuple":return N7t(i,n,r);case"Union":return M7t(i,n,r);case"Date":case"Symbol":case"Uint8Array":return b7t(t,e,r);default:return I7t(i,n,r)}}s(yA,"Visit");function fO(...t){return t.length===3?yA(t[0],t[1],t[2]):yA(t[0],[],t[1])}s(fO,"Cast");d();function L7t(t){return CI(t)&&t[ot]!=="Unsafe"}s(L7t,"IsCheckable");function F7t(t,e,r){return Pn(r)?r.map(n=>C0(t.items,e,n)):r}s(F7t,"FromArray");function O7t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return C0(i,[...e,...n],r)}s(O7t,"FromImport");function Q7t(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>C0(c,e,Ro(r))).reduce((c,l)=>Si(l)?{...c,...l}:l,{});if(!Si(r)||!Si(o)||!CI(n))return o;let a=r0(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||ki(n,e,r[c])&&(o[c]=C0(n,e,r[c]));return o}s(Q7t,"FromIntersect");function U7t(t,e,r){if(!Si(r)||Pn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(kn(t.properties,i)){r[i]=C0(t.properties[i],e,r[i]);continue}if(CI(n)&&ki(n,e,r[i])){r[i]=C0(n,e,r[i]);continue}delete r[i]}return r}s(U7t,"FromObject");function q7t(t,e,r){if(!Si(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=C0(a,e,r[l]);continue}if(CI(n)&&ki(n,e,r[l])){r[l]=C0(n,e,r[l]);continue}delete r[l]}return r}s(q7t,"FromRecord");function H7t(t,e,r){return C0(wo(t,e),e,r)}s(H7t,"FromRef");function $7t(t,e,r){return C0(wo(t,e),e,r)}s($7t,"FromThis");function W7t(t,e,r){if(!Pn(r))return r;if(Ys(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=C0(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(W7t,"FromTuple");function j7t(t,e,r){for(let n of t.anyOf)if(L7t(n)&&ki(n,e,r))return C0(n,e,r);return r}s(j7t,"FromUnion");function C0(t,e,r){let n=yo(t.$id)?Kl(t,e):e,i=t;switch(i[ot]){case"Array":return F7t(i,n,r);case"Import":return O7t(i,n,r);case"Intersect":return Q7t(i,n,r);case"Object":return U7t(i,n,r);case"Record":return q7t(i,n,r);case"Ref":return H7t(i,n,r);case"This":return $7t(i,n,r);case"Tuple":return W7t(i,n,r);case"Union":return j7t(i,n,r);default:return r}}s(C0,"Visit");function eK(...t){return t.length===3?C0(t[0],t[1],t[2]):C0(t[0],[],t[1])}s(eK,"Clean");d();function tK(t){return yo(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(tK,"IsStringNumeric");function G7t(t){return Mu(t)||tC(t)||cn(t)}s(G7t,"IsValueToString");function pO(t){return t===!0||cn(t)&&t===1||Mu(t)&&t===BigInt("1")||yo(t)&&(t.toLowerCase()==="true"||t==="1")}s(pO,"IsValueTrue");function mO(t){return t===!1||cn(t)&&(t===0||Object.is(t,-0))||Mu(t)&&t===BigInt("0")||yo(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(mO,"IsValueFalse");function V7t(t){return yo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(V7t,"IsTimeStringWithTimeZone");function z7t(t){return yo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(z7t,"IsTimeStringWithoutTimeZone");function Y7t(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Y7t,"IsDateTimeStringWithTimeZone");function K7t(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(K7t,"IsDateTimeStringWithoutTimeZone");function J7t(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(J7t,"IsDateString");function X7t(t,e){let r=cWe(t);return r===e?r:t}s(X7t,"TryConvertLiteralString");function Z7t(t,e){let r=lWe(t);return r===e?r:t}s(Z7t,"TryConvertLiteralNumber");function eQt(t,e){let r=aWe(t);return r===e?r:t}s(eQt,"TryConvertLiteralBoolean");function tQt(t,e){return yo(t.const)?X7t(e,t.const):cn(t.const)?Z7t(e,t.const):tC(t.const)?eQt(e,t.const):e}s(tQt,"TryConvertLiteral");function aWe(t){return pO(t)?!0:mO(t)?!1:t}s(aWe,"TryConvertBoolean");function rQt(t){let e=s(r=>r.split(".")[0],"truncateInteger");return tK(t)?BigInt(e(t)):cn(t)?BigInt(Math.trunc(t)):mO(t)?BigInt(0):pO(t)?BigInt(1):t}s(rQt,"TryConvertBigInt");function cWe(t){return Nv(t)&&t.description!==void 0?t.description.toString():G7t(t)?t.toString():t}s(cWe,"TryConvertString");function lWe(t){return tK(t)?parseFloat(t):pO(t)?1:mO(t)?0:t}s(lWe,"TryConvertNumber");function nQt(t){return tK(t)?parseInt(t):cn(t)?Math.trunc(t):pO(t)?1:mO(t)?0:t}s(nQt,"TryConvertInteger");function iQt(t){return yo(t)&&t.toLowerCase()==="null"?null:t}s(iQt,"TryConvertNull");function oQt(t){return yo(t)&&t==="undefined"?void 0:t}s(oQt,"TryConvertUndefined");function sQt(t){return sf(t)?t:cn(t)?new Date(t):pO(t)?new Date(1):mO(t)?new Date(0):tK(t)?new Date(parseInt(t)):z7t(t)?new Date(`1970-01-01T${t}.000Z`):V7t(t)?new Date(`1970-01-01T${t}`):K7t(t)?new Date(`${t}.000Z`):Y7t(t)?new Date(t):J7t(t)?new Date(`${t}T00:00:00.000Z`):t}s(sQt,"TryConvertDate");function aQt(t,e,r){return(Pn(r)?r:[r]).map(i=>CA(t.items,e,i))}s(aQt,"FromArray");function cQt(t,e,r){return rQt(r)}s(cQt,"FromBigInt");function lQt(t,e,r){return aWe(r)}s(lQt,"FromBoolean");function uQt(t,e,r){return sQt(r)}s(uQt,"FromDate");function dQt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return CA(i,[...e,...n],r)}s(dQt,"FromImport");function fQt(t,e,r){return nQt(r)}s(fQt,"FromInteger");function pQt(t,e,r){return t.allOf.reduce((n,i)=>CA(i,e,n),r)}s(pQt,"FromIntersect");function mQt(t,e,r){return tQt(t,r)}s(mQt,"FromLiteral");function hQt(t,e,r){return iQt(r)}s(hQt,"FromNull");function gQt(t,e,r){return lWe(r)}s(gQt,"FromNumber");function AQt(t,e,r){if(!Si(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))kn(r,n)&&(r[n]=CA(t.properties[n],e,r[n]));return r}s(AQt,"FromObject");function yQt(t,e,r){if(!Si(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=CA(o,e,c);return r}s(yQt,"FromRecord");function CQt(t,e,r){return CA(wo(t,e),e,r)}s(CQt,"FromRef");function vQt(t,e,r){return cWe(r)}s(vQt,"FromString");function xQt(t,e,r){return yo(r)||cn(r)?Symbol(r):r}s(xQt,"FromSymbol");function EQt(t,e,r){return CA(wo(t,e),e,r)}s(EQt,"FromThis");function bQt(t,e,r){return Pn(r)&&!Ys(t.items)?r.map((i,o)=>o<t.items.length?CA(t.items[o],e,i):i):r}s(bQt,"FromTuple");function IQt(t,e,r){return oQt(r)}s(IQt,"FromUndefined");function TQt(t,e,r){for(let n of t.anyOf){let i=CA(n,e,Ro(r));if(ki(n,e,i))return i}return r}s(TQt,"FromUnion");function CA(t,e,r){let n=Kl(t,e),i=t;switch(t[ot]){case"Array":return aQt(i,n,r);case"BigInt":return cQt(i,n,r);case"Boolean":return lQt(i,n,r);case"Date":return uQt(i,n,r);case"Import":return dQt(i,n,r);case"Integer":return fQt(i,n,r);case"Intersect":return pQt(i,n,r);case"Literal":return mQt(i,n,r);case"Null":return hQt(i,n,r);case"Number":return gQt(i,n,r);case"Object":return AQt(i,n,r);case"Record":return yQt(i,n,r);case"Ref":return CQt(i,n,r);case"String":return vQt(i,n,r);case"Symbol":return xQt(i,n,r);case"This":return EQt(i,n,r);case"Tuple":return bQt(i,n,r);case"Undefined":return IQt(i,n,r);case"Union":return TQt(i,n,r);default:return r}}s(CA,"Visit");function rK(...t){return t.length===3?CA(t[0],t[1],t[2]):CA(t[0],[],t[1])}s(rK,"Convert");d();function uWe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!ki(e,r,n))throw new X4(e,n,sC(e,r,n).First());return $v(e,r)?Z4(e,r,n):n}s(uWe,"Decode");d();function mx(t,e){let r=kn(t,"default")?t.default:void 0,n=AI(r)?r():Ro(r);return Ys(e)?n:Si(e)&&Si(n)?Object.assign(n,e):e}s(mx,"ValueOrDefault");function Lye(t){return CI(t)&&"default"in t}s(Lye,"HasDefaultProperty");function wQt(t,e,r){if(Pn(r)){for(let i=0;i<r.length;i++)r[i]=bf(t.items,e,r[i]);return r}let n=mx(t,r);if(!Pn(n))return n;for(let i=0;i<n.length;i++)n[i]=bf(t.items,e,n[i]);return n}s(wQt,"FromArray");function SQt(t,e,r){return sf(r)?r:mx(t,r)}s(SQt,"FromDate");function _Qt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return bf(i,[...e,...n],r)}s(_Qt,"FromImport");function RQt(t,e,r){let n=mx(t,r);return t.allOf.reduce((i,o)=>{let a=bf(o,e,n);return Si(a)?{...i,...a}:a},{})}s(RQt,"FromIntersect");function kQt(t,e,r){let n=mx(t,r);if(!Si(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=bf(t.properties[o],e,n[o]);Ys(a)||(n[o]=bf(t.properties[o],e,n[o]))}if(!Lye(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=bf(t.additionalProperties,e,n[o]));return n}s(kQt,"FromObject");function PQt(t,e,r){let n=mx(t,r);if(!Si(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&Lye(a)&&(n[l]=bf(a,e,n[l]));if(!Lye(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=bf(i,e,n[l]));return n}s(PQt,"FromRecord");function DQt(t,e,r){return bf(wo(t,e),e,mx(t,r))}s(DQt,"FromRef");function BQt(t,e,r){return bf(wo(t,e),e,r)}s(BQt,"FromThis");function NQt(t,e,r){let n=mx(t,r);if(!Pn(n)||Ys(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=bf(i[a],e,n[a]));return n}s(NQt,"FromTuple");function MQt(t,e,r){let n=mx(t,r);for(let i of t.anyOf){let o=bf(i,e,Ro(n));if(ki(i,e,o))return o}return n}s(MQt,"FromUnion");function bf(t,e,r){let n=Kl(t,e),i=t;switch(i[ot]){case"Array":return wQt(i,n,r);case"Date":return SQt(i,n,r);case"Import":return _Qt(i,n,r);case"Intersect":return RQt(i,n,r);case"Object":return kQt(i,n,r);case"Record":return PQt(i,n,r);case"Ref":return DQt(i,n,r);case"This":return BQt(i,n,r);case"Tuple":return NQt(i,n,r);case"Union":return MQt(i,n,r);default:return mx(i,r)}}s(bf,"Visit");function nK(...t){return t.length===3?bf(t[0],t[1],t[2]):bf(t[0],[],t[1])}s(nK,"Default");d();d();var vA={};Ca(vA,{Delete:()=>FQt,Format:()=>hO,Get:()=>QQt,Has:()=>OQt,Set:()=>LQt,ValuePointerRootDeleteError:()=>oK,ValuePointerRootSetError:()=>iK});d();var iK=class extends Dn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},oK=class extends Dn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function dWe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(dWe,"Escape");function*hO(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield dWe(t.slice(e,r))),e=n+1):r=n;yield dWe(t.slice(e))}s(hO,"Format");function LQt(t,e,r){if(e==="")throw new iK(t,e,r);let[n,i,o]=[null,t,""];for(let a of hO(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(LQt,"Set");function FQt(t,e){if(e==="")throw new oK(t,e);let[r,n,i]=[null,t,""];for(let o of hO(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(FQt,"Delete");function OQt(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of hO(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(OQt,"Has");function QQt(t,e){if(e==="")return t;let r=t;for(let n of hO(e)){if(r[n]===void 0)return;r=r[n]}return r}s(QQt,"Get");d();function UQt(t,e){if(!Si(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>lR(t[i],e[i]))}s(UQt,"ObjectType");function qQt(t,e){return sf(e)&&t.getTime()===e.getTime()}s(qQt,"DateType");function HQt(t,e){return!Pn(e)||t.length!==e.length?!1:t.every((r,n)=>lR(r,e[n]))}s(HQt,"ArrayType");function $Qt(t,e){return!Om(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>lR(r,e[n]))}s($Qt,"TypedArrayType");function WQt(t,e){return t===e}s(WQt,"ValueType");function lR(t,e){if(sf(t))return qQt(t,e);if(Om(t))return $Qt(t,e);if(Pn(t))return HQt(t,e);if(Si(t))return UQt(t,e);if(cp(t))return WQt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(lR,"Equal");var jQt=Uo({type:ao("insert"),path:cf(),value:tA()}),GQt=Uo({type:ao("update"),path:cf(),value:tA()}),VQt=Uo({type:ao("delete"),path:cf()}),pWe=Qo([jQt,GQt,VQt]),sK=class extends Dn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function aK(t,e){return{type:"update",path:t,value:e}}s(aK,"CreateUpdate");function mWe(t,e){return{type:"insert",path:t,value:e}}s(mWe,"CreateInsert");function hWe(t){return{type:"delete",path:t}}s(hWe,"CreateDelete");function fWe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new sK(t,"Cannot diff objects with symbols")}s(fWe,"AssertDiffable");function*zQt(t,e,r){if(fWe(e),fWe(r),!Ife(r))return yield aK(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)kn(e,o)||(yield mWe(`${t}/${o}`,r[o]));for(let o of n)kn(r,o)&&(lR(e,r)||(yield*cK(`${t}/${o}`,e[o],r[o])));for(let o of n)kn(r,o)||(yield hWe(`${t}/${o}`))}s(zQt,"ObjectType");function*YQt(t,e,r){if(!Pn(r))return yield aK(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*cK(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield mWe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield hWe(`${t}/${n}`))}s(YQt,"ArrayType");function*KQt(t,e,r){if(!Om(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield aK(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*cK(`${t}/${n}`,e[n],r[n])}s(KQt,"TypedArrayType");function*JQt(t,e,r){e!==r&&(yield aK(t,r))}s(JQt,"ValueType");function*cK(t,e,r){if(Ife(e))return yield*zQt(t,e,r);if(Pn(e))return yield*YQt(t,e,r);if(Om(e))return yield*KQt(t,e,r);if(cp(e))return yield*JQt(t,e,r);throw new sK(e,"Unable to diff value")}s(cK,"Visit");function gWe(t,e){return[...cK("",t,e)]}s(gWe,"Diff");function XQt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(XQt,"IsRootUpdate");function ZQt(t){return t.length===0}s(ZQt,"IsIdentity");function AWe(t,e){if(XQt(e))return Ro(e[0].value);if(ZQt(e))return Ro(t);let r=Ro(t);for(let n of e)switch(n.type){case"insert":{vA.Set(r,n.path,n.value);break}case"update":{vA.Set(r,n.path,n.value);break}case"delete":{vA.Delete(r,n.path);break}}return r}s(AWe,"Patch");d();function yWe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=$v(e,r)?tD(e,r,n):n;if(!ki(e,r,i))throw new eD(e,i,sC(e,r,i).First());return i}s(yWe,"Encode");d();function lK(t){return Si(t)&&!Pn(t)}s(lK,"IsStandardObject");var uK=class extends Dn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function eUt(t,e,r,n){if(!lK(r))vA.Set(t,e,Ro(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Fye(t,`${e}/${a}`,r[a],n[a])}}s(eUt,"ObjectType");function tUt(t,e,r,n){if(!Pn(r))vA.Set(t,e,Ro(n));else{for(let i=0;i<n.length;i++)Fye(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(tUt,"ArrayType");function rUt(t,e,r,n){if(Om(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else vA.Set(t,e,Ro(n))}s(rUt,"TypedArrayType");function nUt(t,e,r,n){r!==n&&vA.Set(t,e,n)}s(nUt,"ValueType");function Fye(t,e,r,n){if(Pn(n))return tUt(t,e,r,n);if(Om(n))return rUt(t,e,r,n);if(lK(n))return eUt(t,e,r,n);if(cp(n))return nUt(t,e,r,n)}s(Fye,"Visit");function CWe(t){return Om(t)||cp(t)}s(CWe,"IsNonMutableValue");function iUt(t,e){return lK(t)&&Pn(e)||Pn(t)&&lK(e)}s(iUt,"IsMismatchedValue");function vWe(t,e){if(CWe(t)||CWe(e))throw new uK("Only object and array types can be mutated at the root level");if(iUt(t,e))throw new uK("Cannot assign due type mismatch of assignable values");Fye(t,"",t,e)}s(vWe,"Mutate");d();var dK=class extends Dn{static{s(this,"ParseError")}constructor(e){super(e)}},Oye;(function(t){let e=new Map([["Assert",(o,a,c)=>(XY(o,a,c),c)],["Cast",(o,a,c)=>fO(o,a,c)],["Clean",(o,a,c)=>eK(o,a,c)],["Clone",(o,a,c)=>Ro(c)],["Convert",(o,a,c)=>rK(o,a,c)],["Decode",(o,a,c)=>$v(o,a)?Z4(o,a,c):c],["Default",(o,a,c)=>nK(o,a,c)],["Encode",(o,a,c)=>$v(o,a)?tD(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Oye||(Oye={}));var xWe=["Clone","Clean","Default","Convert","Assert","Decode"];function oUt(t,e,r,n){return t.reduce((i,o)=>{let a=Oye.Get(o);if(Ys(a))throw new dK(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(oUt,"ParseValue");function EWe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Pn(t[0])?[t[0],t[1],[],t[2]]:[xWe,t[0],t[1],t[2]]:t.length===2?[xWe,t[0],[],t[1]]:(()=>{throw new dK("Invalid Arguments")})();return oUt(e,r,n,i)}s(EWe,"Parse");d();var BC={};Ca(BC,{Assert:()=>XY,Cast:()=>fO,Check:()=>ki,Clean:()=>eK,Clone:()=>Ro,Convert:()=>rK,Create:()=>lh,Decode:()=>uWe,Default:()=>nK,Diff:()=>gWe,Edit:()=>pWe,Encode:()=>yWe,Equal:()=>lR,Errors:()=>sC,Hash:()=>TI,Mutate:()=>vWe,Parse:()=>EWe,Patch:()=>AWe,ValueErrorIterator:()=>wI});d();var sUt="gpt-4o-copilot",uh=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&Ps(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return sUt}parseModelsResponse(e){try{return BC.Parse(O$e,e)}catch(r){un.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await aR(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(un.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=Q$e(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&un.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=zi(this._ctx,Ht.DebugOverrideEngine)||zi(this._ctx,Ht.DebugOverrideEngineLegacy);if(i)return new ET(i,"override");let o=e?this._ctx.get(Mt).customEngine(e):"",a=e?this._ctx.get(Mt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new ET(o,"exp"):new ET(n,"modelpicker"):o?new ET(o,"exp"):this.customModels.length>0?new ET(this.customModels[0],"custommodel"):new ET(r,"default")}},ET=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function bT(t,e=void 0){let r=t.get(uh),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(bT,"getEngineRequestInfo");d();d();var Mi=class{static{s(this,"FileSystem")}};var UWe=Ne(QWe());function qWe(t){return t!==void 0&&t!==0}s(qWe,"isRepoInfo");function HWe(t){if(t===void 0||t===0)return"";let e=hx(t);if(e==="github/github")return e;let r=DUt(t)?.toLowerCase();return r!==void 0?r:""}s(HWe,"getDogFood");function hx(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(hx,"tryGetGitHubNWO");function DUt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(DUt,"tryGetADONWO");function IT(t,e){let r=kd(e);return BUt(t,r)}s(IT,"extractRepoInfoInBackground");var BUt=FUt(NUt,1e4);async function NUt(t,e){let r=_6e(e);if(!r)return;let n=await MUt(t,r);if(!n)return;let i=t.get(Mi),o=Vi(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=LUt(a)??"",l=Hye(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(NUt,"extractRepoInfo");function Hye(t){let e;try{if(e=(0,UWe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Hye,"parseRepoUrl");async function MUt(t,e){let r=e+"_add_to_make_longer",n=t.get(Mi);for(;e!=="file:///"&&e.length<r.length;){let i=Vi(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=kd(e)}}s(MUt,"getRepoBaseUri");function LUt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(LUt,"getRepoUrlFromConfigText");var qye=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function FUt(t,e){let r=new wr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new qye(u)),n.delete(a)}),0}}s(FUt,"computeInBackgroundAndMemoize");d();var gO=500,$We=8192-gO,WWe=4,fK=10,jWe=1e3*5,pK={prefix:35,suffix:15,stableContext:35,volatileContext:15},OUt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function AO(t){return t=t.toLowerCase(),OUt[t]??t}s(AO,"normalizeLanguageId");var $ye=class{constructor(e){this.ctx=e;this.cache=new wr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Wye(()=>this.ctx.get(dA).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Wye=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function UUt(t){return"uri"in t}s(UUt,"isCompletionsFiltersInfo");var Mt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new $ye(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=Gr.createAndMarkAsIssued(),n=void 0){if(r instanceof uC)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&UUt(e)?IT(this.ctx,e.uri):void 0,o=hx(i)??"",a=HWe(i)??"",c=e?.languageId??"",l=bT(this.ctx).modelId;n??=await this.ctx.get(Br).getToken();let u=C6e(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,A={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},y=this.getGranularityDirectory(),E=this.makeFilterSettings(A),b=y.extendFilters(E),S=await this.getExpConfig(b.newFilterSettings,g);y.update(E,+(S.variables.copilotbycallbuckets??NaN),+(S.variables.copilottimeperiodsizeinh??NaN));let R=y.extendFilters(E),B=R.newFilterSettings,L=await this.getExpConfig(B,g),O=new Promise(K=>setTimeout(K,t.upcomingDynamicFilterCheckDelayMs));for(let K of R.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(V=>setTimeout(V,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(K,g)});return this.prepareForUpcomingFilters(B,g),new uC(r.properties,r.measurements,r.issuedTime,{filters:B,exp:L})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ds).machineId;this.granularityDirectory=new eV(e,this.ctx.get(pC))}return this.granularityDirectory}makeFilterSettings(e){return new Q_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Mm.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new Q_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=wD(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??pK.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??fK}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??$We+gO}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??jWe}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??pK.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??pK.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}maxMultilineTokens(e){return e.filtersAndExp.exp.variables.copilotmaxmultilinetokens??200}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();d();var mK=Ne(GWe());var Gye={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function Np(t){return t in Gye&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(Np,"isSupportedLanguageId");function hK(t){if(!(t in Gye))throw new Error(`Unrecognized language: ${t}`);return Gye[t]}s(hK,"languageIdToWasmLanguage");var jye=new Map;async function qUt(t){let e;try{e=await WY(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new SB(`Could not load tree-sitter-${t}.wasm`,r):r}return mK.default.Language.load(e)}s(qUt,"loadWasmLanguage");function HUt(t){let e=hK(t);if(!jye.has(e)){let r=qUt(e);jye.set(e,r)}return jye.get(e)}s(HUt,"getLanguage");var Vye=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function gx(t,e){await mK.default.init({locateFile:s(o=>xye(o),"locateFile")});let r;try{r=new mK.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Vye(`Could not init Parse for language <${t}>`,o):o}let n=await HUt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(gx,"parseTreeSitter");function VWe(t){switch(hK(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(VWe,"getBlockCloseToken");function $Ut(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s($Ut,"innerQuery");var WUt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function zWe(t){return $Ut([WUt],t).length==1}s(zWe,"queryPythonIsDocstring");var MC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},Yu=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return RB.languageIds.has(e)||yO.languageIds.has(e)||kB.languageIds.has(e)||CO.languageIds.has(e)||vO.languageIds.has(e)||xO.languageIds.has(e)||EO.languageIds.has(e)||bO.languageIds.has(e)}static isTrimmedByDefault(e){return RB.languageIds.has(e)||kB.languageIds.has(e)}static create(e,r,n,i){if(RB.languageIds.has(e))return new RB(e,r,n,i);if(yO.languageIds.has(e))return new yO(e,r,n,i);if(kB.languageIds.has(e))return new kB(e,r,n,i);if(xO.languageIds.has(e))return new xO(e,r,n,i);if(CO.languageIds.has(e))return new CO(e,r,n,i);if(vO.languageIds.has(e))return new vO(e,r,n,i);if(EO.languageIds.has(e))return new EO(e,r,n,i);if(bO.languageIds.has(e))return new bO(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await gx(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},zye=class t extends MC{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},RB=class extends Yu{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new zye(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Yye=class t extends MC{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},yO=class extends Yu{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Yye(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Kye=class t extends MC{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},kB=class extends Yu{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Kye(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Jye=class t extends MC{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},CO=class extends Yu{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Jye(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Xye=class t extends MC{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},vO=class extends Yu{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Xye(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},Zye=class t extends MC{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},xO=class extends Yu{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new Zye(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},eCe=class t extends MC{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},EO=class extends Yu{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new eCe(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},tCe=class t extends MC{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},bO=class extends Yu{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new tCe(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var LC=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return Yu.isSupported(e)}static isTrimmedByDefault(e){return Yu.isTrimmedByDefault(e)}async withParsedStatementTree(e){var n=[];try{let r=Hde(n,Yu.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{$de(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var gK=class extends LC{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function YWe(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=Hde(c,Yu.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{$de(c,u,f)}}s(YWe,"getBlockPositionType");d();function jUt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(jUt,"getProxyFromEnvironment");function GUt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(GUt,"getRejectUnauthorizedFromEnvironment");var KWe=x.Object({proxy:x.Optional(x.String()),proxyStrictSSL:x.Optional(x.Boolean()),proxyAuthorization:x.Optional(x.String()),proxyKerberosServicePrincipal:x.Optional(x.String())});function JWe(t){let e=jUt(t),r=IO({proxy:e,proxyStrictSSL:GUt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(JWe,"getHttpSettingsFromEnvironment");function IO(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||VUt(n,i)}}catch{return{...t,proxy:""}}}s(IO,"normalizeHttpSettings");function VUt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(VUt,"getAuth");d();var XWe=Ne(pi());var ja=class extends XWe.Emitter{static{s(this,"Emitter")}get event(){return super.event}};var rCe={};Ca(rCe,{activationEvents:()=>pqt,badges:()=>fqt,browser:()=>mqt,bugs:()=>iqt,build:()=>XUt,buildType:()=>ZUt,categories:()=>uqt,contributes:()=>nCe,default:()=>xqt,dependencies:()=>Cqt,description:()=>KUt,devDependencies:()=>yqt,displayName:()=>YUt,enabledApiProposals:()=>gqt,engines:()=>lqt,extensionPack:()=>cqt,homepage:()=>rqt,icon:()=>sqt,keywords:()=>dqt,license:()=>nqt,main:()=>hqt,name:()=>zUt,overrides:()=>vqt,preview:()=>tqt,pricing:()=>aqt,publisher:()=>eqt,qna:()=>oqt,scripts:()=>Aqt,version:()=>JUt});var zUt="copilot",YUt="GitHub Copilot",KUt="Your AI pair programmer",JUt="1.362.0",XUt="1754",ZUt="prod",eqt="GitHub",tqt=!1,rqt="https://github.com/features/copilot?editor=vscode",nqt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",iqt={url:"https://github.com/microsoft/vscode/issues"},oqt="https://github.com/github-community/community/discussions/categories/copilot",sqt="assets/Copilot-App-Icon.png",aqt="Trial",cqt=["GitHub.copilot-chat","GitHub.copilot"],lqt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},uqt=["AI","Chat","Programming Languages","Machine Learning"],dqt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],fqt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],pqt=["onStartupFinished"],mqt="./dist/web",hqt="./dist/extension",gqt=["inlineCompletionsAdditions"],nCe={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},Aqt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/deviceFlow.ts --save-as-test-token",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},yqt={"@azure/identity":"^4.11.0","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.17.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.16.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.1",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.3.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.2.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.9.2","typescript-eslint":"^8.39.1","vscode-dts":"^0.3.3"},Cqt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@anthropic-ai/sdk":"^0.56.0","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.39","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.3",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.2.0","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.2.2",yargs:"^17.7.2"},vqt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},xqt={name:zUt,displayName:YUt,description:KUt,version:JUt,build:XUt,buildType:ZUt,publisher:eqt,preview:tqt,homepage:rqt,license:nqt,bugs:iqt,qna:oqt,icon:sqt,pricing:aqt,extensionPack:cqt,engines:lqt,categories:uqt,keywords:dqt,badges:fqt,activationEvents:pqt,browser:mqt,main:hqt,enabledApiProposals:gqt,contributes:nCe,scripts:Aqt,devDependencies:yqt,dependencies:Cqt,overrides:vqt};var Ht={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function ZWe(t){return["server","parsingandserver"].includes(t)}s(ZWe,"shouldDoServerTrimming");var xA=class{static{s(this,"BlockModeConfig")}},DB=class extends xA{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Mt).overrideBlockMode(n);if(i)return iCe(i,r);let o=e.get(Mt).enableProgressiveReveal(n);return(zi(e,Ht.AlwaysRequestMultiline)??o)||LC.isTrimmedByDefault(r)?iCe("moremultiline",r):r=="ruby"?"parsing":Np(r)?"parsingandserver":"server"}};function Eqt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(Eqt,"blockModeRequiresTreeSitter");function iCe(t,e){return t==="moremultiline"&&Yu.isSupported(e)?t:Eqt(t)&&!Np(e)?"server":t}s(iCe,"toApplicableBlockMode");var kc=class{static{s(this,"ConfigProvider")}requireReady(){return Promise.resolve()}},BB=class extends kc{constructor(){super(...arguments);this.onDidChangeCopilotSettings=s(()=>({dispose:s(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{s(this,"DefaultsOnlyConfigProvider")}getConfig(r){return Iqt(r)}getOptionalConfig(r){return Tqt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},uR=class extends kc{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new ja;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new ja;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,i]of Object.entries(r))i!==void 0?this.overrides.set(n,i):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=IO(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[Ht.ShowEditorCompletions,Ht.EnableAutoCompletions,Ht.DelayCompletions,Ht.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function bqt(t){return t?.type==="object"&&"properties"in t}s(bqt,"isContributesObject");function eje(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(eje,"getConfigKeyRecursively");function Iqt(t){if(PB.has(t))return PB.get(t);throw new Error(`Missing config default value: ${T9}.${t}`)}s(Iqt,"getConfigDefaultForKey");function Tqt(t){return PB.get(t)}s(Tqt,"getOptionalConfigDefaultForKey");var PB=new Map([[Ht.DebugOverrideCppHeadersEnableSwitch,!1],[Ht.RelatedFilesVSCodeCSharp,!1],[Ht.RelatedFilesVSCodeTypeScript,!1],[Ht.RelatedFilesVSCode,!1],[Ht.IncludeNeighboringFiles,!1],[Ht.ExcludeRelatedFiles,!1],[Ht.ContextProviders,[]],[Ht.DebugUseEditorFetcher,null],[Ht.DebugUseElectronFetcher,null],[Ht.DebugOverrideLogLevels,{}],[Ht.DebugSnippyOverrideUrl,""],[Ht.FetchStrategy,"auto"],[Ht.ToolConfirmAutoApprove,!1],[Ht.MaxToolCallingLoop,25],[Ht.UseSubsetMatching,null],[Ht.ContextProviderTimeBudget,void 0],[Ht.DebugOverrideCapiUrl,""],[Ht.DebugTestOverrideCapiUrl,""],[Ht.DebugOverrideProxyUrl,""],[Ht.DebugTestOverrideProxyUrl,""],[Ht.DebugOverrideEngine,""],[Ht.AlwaysRequestMultiline,void 0],[Ht.ModelAlwaysTerminatesSingleline,void 0],[Ht.TrimCompletionsAggressively,void 0],[Ht.CompletionsDebounce,void 0],[Ht.NESXTab,void 0],[Ht.UseWorkspaceContextCoordinator,void 0],[Ht.ShowWorkspaceContextDebugger,!1],[Ht.CompletionsDelay,void 0],[Ht.UseSplitContextPrompt,void 0],[Ht.UseCompletionsComparisonPanel,!1],[Ht.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[Ht.ComparisonPanelRandomizedMode,!1],[Ht.ShowEditorCompletions,void 0],[Ht.EnableAutoCompletions,void 0],[Ht.DelayCompletions,void 0],[Ht.FilterCompletions,void 0]]);for(let t of Object.values(Ht)){let e=nCe.configuration[0],r=[],n=`${T9}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(bqt(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(PB.has(t))throw new Error(`Duplicate config default value ${T9}.${t}`);PB.set(t,i.default)}}if(!PB.has(t))throw new Error(`Missing config default value ${T9}.${t}`)}function zi(t,e){return t.get(kc).getConfig(e)}s(zi,"getConfig");function X9e(t){return t.get(kc).dumpForTelemetry()}s(X9e,"dumpForTelemetry");var Io=class{constructor(){this.packageJson=rCe}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function ome(t){return t.get(Io).isProduction()}s(ome,"isProduction");function q6e(t){return t.get(Io).getBuildType()==="dev"}s(q6e,"isDevBuild");function dC(t){return t.get(Io).getBuildType()}s(dC,"getBuildType");function Z9e(t){return t.get(Io).getBuild()}s(Z9e,"getBuild");function r2(t){return t.get(Io).getVersion()}s(r2,"getVersion");var Ds=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function Zy({name:t,version:e}){return`${t}/${e}`}s(Zy,"formatNameAndVersion");var mn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},QI="2025-05-01";function Ap(t){let e=t.get(mn);return{"Editor-Version":Zy(e.getEditorInfo()),"Editor-Plugin-Version":Zy(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":r2(t)}}s(Ap,"editorVersionHeaders");var vp="Iv1.b507a08c87ecfe98",tje="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",ru=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??vp}};var $r=class{static{s(this,"Fetcher")}getImplementation(){return this}};function Ax(t,e,r,n,i,o,a,c,l,u){let f={...c,Authorization:`Bearer ${r}`,...Ap(t)};u===void 0&&(f["Openai-Organization"]="github-copilot",f["X-Request-Id"]=i,f["VScode-SessionId"]=t.get(Ds).sessionId,f["VScode-MachineId"]=t.get(Ds).machineId,f["X-GitHub-Api-Version"]=QI),n&&(f["OpenAI-Intent"]=n);let p={method:"POST",headers:f,json:o,timeout:l},m=t.get($r);if(a){let g=new AbortController;a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",Gr.createAndMarkAsIssued({headerRequestId:i})),g.abort()}),p.signal=g.signal}return m.fetch(e,p).catch(g=>{if(wqt(g))return Bt(t,"networking.disconnectAll"),m.disconnectAll().then(()=>m.fetch(e,p));throw g})}s(Ax,"postRequest");function wqt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(wqt,"isInterruptedNetworkError");var Sqt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function _qt(t){return Sqt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(_qt,"isOomError");function yx(t,e,r,n=un){if(!Rd(e)){if(e instanceof Error){let i=e;_qt(i)?t.get(So).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(So).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(So).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(So).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(So).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(yx,"handleException");function rje(t){process.addListener("uncaughtException",r=>{yx(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,yx(t,r,"unhandledRejection")}finally{e=!1}})}s(rje,"registerDefaultHandlers");async function nje(t){try{await cR}catch(e){yx(t,e,"initializeTokenizers")}}s(nje,"waitForTokenizers");d();var TT=require("fs"),ije=require("os"),oje=Ne(require("path")),NB=require("process");var Ai=class{static{s(this,"PersistenceManager")}},oCe=class extends Ai{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await TT.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a;try{a=await TO.acquire(o);let c=await this.readJsonObject(r);c[n]=i,await TT.promises.writeFile(o,JSON.stringify(c)+`
`,{encoding:"utf8"})}finally{a&&await a()}}async delete(r,n){let i=`${this.directory}/${r}.json`,o;try{o=await TO.acquire(i);let a=await this.readJsonObject(r);delete a[n];let c=JSON.stringify(a)+`
`;c===`{}
`?await TT.promises.rm(i):await TT.promises.writeFile(i,c,{encoding:"utf8"})}catch{}finally{o&&await o()}}async deleteSetting(r){let n=`${this.directory}/${r}.json`,i;try{i=await TO.acquire(n),await TT.promises.rm(n)}catch{}finally{i&&await i()}}async listSettings(){try{return(await TT.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await TT.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}},TO=class{static{s(this,"LockManager")}static{this.locks=new Map}static{this.DEFAULT_TIMEOUT_MS=1e4}static async acquire(e){await this.getLock(e);let r,n=new Promise(i=>{r=i});return this.locks.set(e,n),()=>Promise.resolve().then(()=>{r&&(r(),r=void 0,this.locks.get(e)===n&&this.locks.delete(e))})}static async getLock(e){let r=Date.now();for(;Date.now()-r<this.DEFAULT_TIMEOUT_MS;){let n=this.locks.get(e);if(!n)return;let i=this.DEFAULT_TIMEOUT_MS-(Date.now()-r);if(i<=0)return;let o=new Promise((a,c)=>{setTimeout(()=>{c(new Error("timeout"))},i)});try{await Promise.race([n,o])}catch{return}}}};function sCe(){return NB.env.XDG_CONFIG_HOME&&oje.isAbsolute(NB.env.XDG_CONFIG_HOME)?NB.env.XDG_CONFIG_HOME+"/github-copilot":(0,ije.platform)()==="win32"?NB.env.USERPROFILE+"\\AppData\\Local\\github-copilot":NB.env.HOME+"/.config/github-copilot"}s(sCe,"getXdgConfigPath");function sje(){return new oCe(sCe())}s(sje,"makeXdgPersistenceManager");d();d();d();var Cx={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var aje=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],cje={".php":[".blade"]},dR=Object.keys(Cx).flatMap(t=>Cx[t].extensions);var aCe=Ne(require("node:path"));var LB=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},wO=class{static{s(this,"LanguageDetection")}},cCe=new Map,MB=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(Cx)){for(let n of e)cCe.set(n,[...cCe.get(n)??[],t]);for(let n of r??[])MB.set(n,[...MB.get(n)??[],t])}var lCe=class extends wO{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Pi(e.uri),n=aCe.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new LB(o.languageId,o.isGuess,a):new LB(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(aje.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=aCe.extname(n).toLowerCase();if(i.length>0&&dR.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=cje[e];return!n||n.includes(r)}detectLanguageId(e,r){if(MB.has(e))return{languageId:MB.get(e)[0],isGuess:!1};let n=cCe.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),MB.has(e))return{languageId:MB.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},uCe=class extends wO{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new LB("cpp",n.isGuess,n.fileExtension):n}},dCe=class extends wO{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new LB(r.languageId,!0,""):this.delegate.detectLanguage(r)}},Rqt=new uCe(new dCe(new lCe));function wT({uri:t,languageId:e}){let r=Rqt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(wT,"detectLanguage");d();d();d();d();function vx(t){if(t.isCancellationRequested)throw new AK}s(vx,"throwIfCancellationRequested");function CK(t){return t instanceof AK?!0:t instanceof Error&&t.name===fCe&&t.message===fCe}s(CK,"isCancellationError");var AK=class extends Error{static{s(this,"CancellationError")}constructor(){super(fCe),this.name=this.message}},fCe="Canceled",yK=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function fR(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(fR,"isTypeDefinition");var Os=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=uje(e,e.length,i),lje(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=uje(e,e.length,++i),lje(n,r)):i++;return n.join("")}};function lje(t,e){for(let r=0;r<e;r++)t.push(" ")}s(lje,"appendIndent");function uje(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(uje,"consumeIndent");var dh=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},ol=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await gx(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new yK,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=null,g=null;for(let E=0;E<i.length;E++){let b=i[E].name;b==="name"?(u=i[E].node.startIndex,f=i[E].node.endIndex):b==="reference"?(u=i[E].node.startIndex,f=i[E].node.endIndex,c=i[E].node.startIndex,l=i[E].node.endIndex,h=b):b==="body"?(p=i[E].node.startIndex,m=i[E].node.endIndex):b==="comment"?(o=o===0?i[E].node.startIndex:Math.min(o,i[E].node.startIndex),a=Math.max(a,i[E].node.endIndex)):b==="receiver"?g=Os.fromBounds(i[E].node.startIndex,i[E].node.endIndex).getText(n):(c=i[E].node.startIndex,l=i[E].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let A=Os.fromBounds(c,l),y=c>0||l>0||u>0||f>0?new dh(r,"","",Os.fromBounds(o,a),Os.fromBounds(u,f),Os.fromBounds(p,m),A,t.kindFromString(h),0):null;if(y){t.updateScopesForSymbol(e,y);let E=y.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new dh(r,b,E.substring(E.lastIndexOf(".")+1),y.commentRange,y.nameRange,y.bodyRange,y.extentRange,y.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var vK=class extends ol{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,kqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},xK=class extends ol{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,Dqt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,Bqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},EK=class extends ol{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,Pqt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new Os(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Os(f,p-f),h=new Os(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=Os.empty,A=Os.empty,y=u.substring(u.lastIndexOf("/")+1);i.add(new dh(e,u,y,g,m,A,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},kqt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,Pqt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,Dqt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,Bqt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var IK=class extends ol{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,Nqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},TK=class extends ol{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,Lqt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,Fqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},wK=class extends ol{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,Mqt)).filter(i=>i.kind===0)}},Nqt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,Mqt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,Lqt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,Fqt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var Oqt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),SK=class extends ol{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,Qqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},_K=class extends ol{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,Uqt)).filter(i=>!Oqt.has(i.unqualifiedName))}};var Qqt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,Uqt=`
(call_expression function: (_) @name) @reference
`;d();var qqt=new Set(["int","str","float","bool","list","dict","tuple","set"]),RK=class extends ol{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,Hqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},kK=class extends ol{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,$qt)).filter(i=>!qqt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,jqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},PK=class extends ol{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,Wqt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new Os(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Os(f.node.startIndex,u.node.endIndex-f.node.endIndex),m=new Os(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Os.empty,g=Os.empty,A=f.node.text,y=A.split(".").pop()||A,E;a?E=`${l.node.text}.${a.node.text}`:E=l.node.text,i.add(new dh(e,E,y,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},Hqt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,$qt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Wqt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,jqt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var Gqt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),FB=class extends ol{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,Vqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},OB=class extends ol{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,zqt)).filter(i=>!Gqt.has(i.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var Vqt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,zqt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var Yqt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),DK=class extends FB{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,Kqt),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},BK=class extends OB{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,Jqt),super.extractReferences(e,r)]);return[...n.filter(o=>!Yqt.has(o.unqualifiedName)),...i]}},Kqt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,Jqt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var SO=[{symbolExtractor:new IK,referenceExtractor:new TK,importExtractor:new wK,languageId:"java"},{symbolExtractor:new vK,referenceExtractor:new xK,importExtractor:new EK,languageId:"go"},{symbolExtractor:new RK,referenceExtractor:new kK,importExtractor:new PK,languageId:"python"},{symbolExtractor:new FB,referenceExtractor:new OB,languageId:"typescript"},{symbolExtractor:new DK,referenceExtractor:new BK,languageId:"typescriptreact"},{symbolExtractor:new SK,referenceExtractor:new _K,languageId:"javascript"}];function dje(t){let e=wT({uri:t});if(e&&SO.some(r=>e===r.languageId))return e}s(dje,"getSupportedLanguageIdForMultiLanguageProvider");var fje=new Map(SO.map(t=>[t.languageId,t.referenceExtractor])),NK=new Map(SO.map(t=>[t.languageId,t.symbolExtractor])),pje=new Map(SO.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),pCe=SO.map(t=>Cx[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function mCe(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(mCe,"virtualNode");function mje(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(mje,"lineNode");function hCe(t){return{type:"blank",lineNumber:t,subs:[]}}s(hCe,"blankNode");function MK(t){return{type:"top",indentation:-1,subs:t??[]}}s(MK,"topNode");function Ku(t){return t.type==="blank"}s(Ku,"isBlank");function pR(t){return t.type==="line"}s(pR,"isLine");function mR(t){return t.type==="virtual"}s(mR,"isVirtual");d();function hje(t,e){return Md(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(hje,"clearLabelsIf");function hR(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>hR(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>hR(r,e)),label:t.label?e(t.label):void 0}}}s(hR,"mapLabels");function Md(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Md,"visitTree");function gCe(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Md(t,o,n),i}s(gCe,"foldTree");function LK(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:MK()}s(LK,"rebuildTree");d();function Zqt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[mje(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>f);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let A=g;A<h;A++)m.push(hCe(A));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(hCe(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return MK(a)}s(Zqt,"parseRaw");function _O(t,e){function r(n){if(pR(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Md(t,r,"bottomUp")}s(_O,"labelLines");function FK(t){function e(r){if(mR(r)&&r.label===void 0){let n=r.subs.filter(i=>!Ku(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Md(t,e,"bottomUp")}s(FK,"labelVirtualInherited");function RO(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(RO,"buildLabelRules");function ACe(t){let r=LK(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&pR(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(pR(c)||mR(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Ku(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),m=o.subs.slice(f),h=m.length>0?[mCe(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),Ku(c)||(o=c)}return n.subs=i,n},"rebuilder"));return hje(t,n=>n==="newVirtual"),r}s(ACe,"combineClosersAndOpeners");function gje(t,e=Ku,r){return LK(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=mCe(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),Ku(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(gje,"groupBlocks");function gR(t){return LK(t,s(function(r){return mR(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&mR(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(gR,"flattenVirtual");var eHt={opener:/^[[({]/,closer:/^[\])}]/},tHt=RO(eHt),Aje={};function yCe(t,e){Aje[t]=e}s(yCe,"registerLanguageSpecificParser");function AR(t,e){let r=Zqt(t),n=Aje[e??""];return n?n(r):(_O(r,tHt),ACe(r))}s(AR,"parseTree");var rHt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},nHt=RO(rHt);function yje(t){let e=t;return _O(e,nHt),e=ACe(e),e=gR(e),FK(e),Md(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!Ku(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(yje,"processJava");d();var iHt={heading:/^# /,subheading:/^## /,subsubheading:/### /},oHt=RO(iHt);function Cje(t){let e=t;if(_O(e,oHt),Ku(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||Ku(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=gje(e),e=gR(e),FK(e),e}s(Cje,"processMarkdown");d();function vje(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(vje,"deparseLine");yCe("markdown",Cje);yCe("java",yje);var sHt={worthUp:.9,worthSibling:.88,worthDown:.8};function CCe(t,e,r=Ni(),n=sHt){let i=hR(t,o=>o?1:void 0);return Md(i,o=>{if(Ku(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Md(i,o=>{if(Ku(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),aHt(i,e,r)}s(CCe,"fromTreeWithFocussedLines");function aHt(t,e,r=Ni()){let n=gCe(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[vje(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Ut(n,e,r)}s(aHt,"fromTreeWithValuedLines");function Mp(t,e=!0,r=!0,n,i=Ni()){let o=typeof t=="string"?AR(t):AR(t.source,t.languageId);gR(o);let a=hR(o,c=>e&&c!=="closer");return Md(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&Md(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&Md(a,c=>{c.label||=(pR(c)||Ku(c))&&c.lineNumber==0},"topDown"),CCe(a,n,i)}s(Mp,"elidableTextForSourceCode");d();var kO=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Ni().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Ut=class t{constructor(e,r,n=Ni()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new kO(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&Mp(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Ni().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=lHt(this.lines,i);if(l<=e)return vCe(c);uHt(u,a);let f=l;for(;f>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?dHt(c,m):"",A=xje(g,r,o,h);c[m]=A,f-=h.cost,f+=A.cost;let y=m+1;if(y<c.length){let b=c[y];OK(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let E=m-1;if(E>=0){let b=c[E];OK(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return vCe([xje("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)OK(p[m],r)&&OK(p[m-1],r)&&p.splice(m,1);return vCe(p)}};function cHt(t){return t?.text.match(/^\s*/)?.[0]??""}s(cHt,"getIndentation");function OK(t,e){return t?.text.trim()===e.trim()}s(OK,"isEllipsis");function vCe(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(vCe,"produceElidedText");function lHt(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(lHt,"initializeElisionContext");function uHt(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(uHt,"sortPriorityQueue");function dHt(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=cHt(i);break}}return r}s(dHt,"getClosestIndentation");function xje(t,e,r,n){let i=t+e;return new kO(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(xje,"getNewEllipsis");d();var Eje=require("fs");async function bje(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of f){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((A,y)=>A+y.node.extentRange.length,0);for(let A of m){if(c<=5)return u;vx(i);let y=A.node.extentRange.length/g,E=Math.min(c,y*l),b=(await fHt([A])).elide(E).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(bje,"symbolRangesToCodeSnippets");async function fHt(t){if(t.length===0)return new Ut([]);let e=t[0].node.fileName,r=[],n="";try{let i=es(e);i&&(n=(await Eje.promises.readFile(i)).toString())}catch{}for(let i of t)Ije(i,n).forEach(o=>r.push(o));return new Ut(r)}s(fHt,"sameFileSymbolRangeToElidableText");function Ije(t,e){let n=[],i=t.node,o=e.substring(xCe(e,i.commentRange.start),i.commentRange.end);n.push([ECe(o),1-3e-4]);let a=xCe(e,i.bodyRange.start),c=xCe(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(fR(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([ECe(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...Ije(u,e));else{let u=1-(fR(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([ECe(f),u])}return fR(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(Ije,"prepareForElidableText");function xCe(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(xCe,"shiftLeftToNearestLineEndingOrAlphanumeric");function ECe(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(ECe,"trimLineEndingsAndTrailingWhitespace");var bCe=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},ST=class extends bCe{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];vx(a);let l=await c.extractReferences(e,r);vx(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let f=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>fR(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),f.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let f=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(f.length+m.length>r.mlcpMaxContextItems){f.push(...m.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...m)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(vx(r),fR(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},QK=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new ST(e,r,!0,!0)),this.strategies.set("java",new ST(e,r,!0,!0)),this.strategies.set("python",new ST(e,r,!0,!1)),this.strategies.set("typescript",new ST(e,r,!0,!0)),this.strategies.set("typescriptreact",new ST(e,r,!0,!0)),this.strategies.set("javascript",new ST(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);vx(c);let u=Ni();return bje(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var yR={Id:"id"},Lp={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},uo={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var UK=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new ICe(yR.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},PO=class t extends UK{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${Lp.FilePath}');`]);this.fields=[new NO(Lp.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new v0(Lp.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},DO=class t extends UK{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${uo.DocumentId}', '${uo.ExtentStart}', '${uo.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${uo.UnqualifiedName}');`],`FOREIGN KEY(${uo.DocumentId}) REFERENCES Document(${yR.Id}) ON DELETE CASCADE`);this.fields=[new v0(uo.DocumentId),new NO(uo.FullyQualifiedName,{notNull:!0}),new NO(uo.UnqualifiedName,{notNull:!0}),new v0(uo.CommentStart,{notNull:!0}),new v0(uo.CommentLength,{notNull:!0}),new v0(uo.NameStart,{notNull:!0}),new v0(uo.NameLength,{notNull:!0}),new v0(uo.BodyStart,{notNull:!0}),new v0(uo.BodyLength,{notNull:!0}),new v0(uo.ExtentStart,{notNull:!0}),new v0(uo.ExtentLength,{notNull:!0}),new v0(uo.SymbolKind,{notNull:!0}),new v0(uo.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},BO=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},NO=class extends BO{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},v0=class extends BO{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},ICe=class extends BO{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var qK=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?fh(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return fh(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${yR.Id} = ?`,[e])}},xx=class t extends qK{static{s(this,"DocumentTable")}static{this.tableName=PO.tableName}createQueryGenerator(){return new PO}async updateTimestamp(e,r){let n=await this.init;n&&await fh(n,`UPDATE ${t.tableName} SET ${Lp.LastWriteTimeUtc} = ? WHERE ${Lp.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await fh(r,`DELETE FROM ${t.tableName} WHERE ${Lp.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?fh(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Lp.FilePath} = ?`,[e]):[]}},sl=class t extends qK{static{s(this,"SymbolTable")}static{this.tableName=DO.tableName}createQueryGenerator(){return new DO}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return fh(r,`DELETE FROM ${t.tableName} WHERE ${uo.DocumentId} = ?`,[e])}};async function fh(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(fh,"runPromisifiedDBQuery");var WK=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${xx.tableName} ON ${sl.tableName}.${uo.DocumentId} = ${xx.tableName}.${yR.Id}`;this.db=this.initDb(e),this.documentTable=new xx(this.db),this.symbolTable=new sl(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(Lje()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await fh(n,"pragma journal_mode=wal",[]),await fh(n,"pragma synchronous=normal",[]),await fh(n,"pragma optimize=0x10002",[]),await fh(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${uo.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${uo.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${uo.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${uo.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${xx.tableName}.${Lp.FilePath} = ? AND ${sl.tableName}.${uo.ExtentStart} <= ? AND (${sl.tableName}.${uo.ExtentStart} + ${sl.tableName}.${uo.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${xx.tableName}.${Lp.FilePath} = ? AND ${sl.tableName}.${uo.ExtentStart} >= ? AND (${sl.tableName}.${uo.ExtentStart} + ${sl.tableName}.${uo.ExtentLength}) <= ?`,`ORDER BY ${sl.tableName}.${uo.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${sl.tableName}`,this.innerJoinStatement,`WHERE ${xx.tableName}.${Lp.FilePath} = ? AND ${sl.tableName}.${uo.FullyQualifiedName} LIKE ?`,`ORDER BY ${sl.tableName}.${uo.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,fh(n,e,r)):[]}};var jK=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new WK(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return qB(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),vx(n)}return qB(i)}async getDefinitionsAsync(e){return qB(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return qB(n)}async findSymbolsContainedByRangeAsync(e,r,n){return qB(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return qB(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function qB(t){return t.map(e=>new dh(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Os(e.commentStart,e.commentLength),new Os(e.nameStart,e.nameLength),new Os(e.bodyStart,e.bodyLength),new Os(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(qB,"symbolsToSymbolRanges");var VK=Ne(require("fs/promises"));var GK=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new jK(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=es(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await VK.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await VK.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);f=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function kCe(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>CHt(r))}s(kCe,"isIndexWorkerData");var LO=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},_T=class extends LO{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},zK=class extends LO{constructor(r){super(Ld.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},Ld={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},YK=class extends _T{constructor(r,n,i){super(r,Ld.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},KK=class extends _T{constructor(r,n){super(r,Ld.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},JK=class extends _T{constructor(r,n,i){super(r,Ld.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},XK=class extends _T{constructor(r,n){super(r,Ld.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},ZK=class extends _T{constructor(r,n,i,o,a,c){super(r,Ld.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},eJ=class extends _T{static{s(this,"ExitRequest")}constructor(e){super(e,Ld.Exit)}},EA=class extends LO{constructor(r,n,i){super(Ld.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function CHt(t){return"databaseFilePath"in t&&"rootPath"in t}s(CHt,"isIndexableWorkspaceFolder");var Fje=Ne(pi()),RT=require("worker_threads");var tJ=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new GK(e,NK,pje,r),this.contextRetreival=new QK(this.index.reader,fje)}},PCe=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=nc(i.rootPath);this.indices.set(o,new tJ(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new Fje.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case Ld.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case Ld.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case Ld.Cancel:n.get(e.id)?.cancel(),o=new EA(e.id,void 0,void 0);break;case Ld.Exit:o=await this.dispatchExit(e,r,i.token);break;case Ld.CreateIndex:o=t.dispatchCreateIndex(e,r,i.token);break;case Ld.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case Ld.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new EA(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=nc(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new EA(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=nc(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new EA(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=nc(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new EA(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new EA(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let i=nc(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new tJ(e.databaseFilePath)),new EA(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=nc(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new EA(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function Oje(){return kCe(RT.workerData)}s(Oje,"isIndexWorker");function Qje(){let t=RT.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!kCe(RT.workerData))throw new Error("Worker data must provide a valid database path.");let e=RT.workerData.cwd;process.cwd=()=>e,new PCe(t,RT.workerData.indexWorkspaceRoots,RT.workerData.params)}s(Qje,"runIndexWorker");d();var FO=Ne(require("util"));function Uje(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(dC(t)==="dev")return t.get(Kc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",FO.format(...i)))},e.dir=(n,i)=>r(4,FO.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(FO.format(...n));i.name="Trace",e.log(i)},e}s(Uje,"createConsole");var zE=Ne(require("fs/promises")),JEt=Ne(require("os")),HH=Ne(require("path")),xg=Ne(IA()),XEt=require("worker_threads");d();d();var QJ=require("assert");d();d();var D$t={right:F$t,center:O$t},B$t=0,DJ=1,N$t=2,BJ=3,n1e=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&Fp.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),Fp.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=Fp.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>Fp.stringWidth(a)&&(f+=" ".repeat(u-Fp.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=D$t[e[c].align];f=m(f,u),Fp.stringWidth(f)<u&&(f+=" ".repeat((l||0)-Fp.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[BJ]&&(o+=" ".repeat(p[BJ])),o+=NGe(e[c],f,"| "),o+=f,o+=NGe(e[c],f," |"),p[DJ]&&(o+=" ".repeat(p[DJ])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=Fp.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=Fp.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[B$t]||0).fill("")),i.push(...new Array(o.padding[N$t]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[BJ]||0)+(e.padding[DJ]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||Fp.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,M$t(e[c])):a)}};function NGe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(NGe,"addBorder");function M$t(t){let e=t.padding||[],r=1+(e[BJ]||0)+(e[DJ]||0);return t.border?r+4:r}s(M$t,"_minWidth");function L$t(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(L$t,"getWindowWidth");function F$t(t,e){t=t.trim();let r=Fp.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(F$t,"alignRight");function O$t(t,e){t=t.trim();let r=Fp.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(O$t,"alignCenter");var Fp;function MGe(t,e){return Fp=e,new n1e({width:t?.width||L$t(),wrap:t?.wrap})}s(MGe,"cliui");d();var LGe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function i1e(t){return t.replace(LGe,"")}s(i1e,"stripAnsi");function FGe(t,e){let[r,n]=t.match(LGe)||["",""];t=i1e(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(FGe,"wrap");function o1e(t){return MGe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:i1e,wrap:FGe})}s(o1e,"ui");d();var jB=require("path"),NJ=require("fs");function s1e(t,e){let r=(0,jB.resolve)(".",t),n;for((0,NJ.statSync)(r).isDirectory()||(r=(0,jB.dirname)(r));;){if(n=e(r,(0,NJ.readdirSync)(r)),n)return(0,jB.resolve)(r,n);if(r=(0,jB.dirname)(n=r),n===r)break}}s(s1e,"default");var ZGe=require("util"),eVe=require("fs"),tVe=require("url");d();var HGe=require("util"),OJ=require("path");d();function ER(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(ER,"camelCase");function MJ(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(MJ,"decamelize");function LJ(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(LJ,"looksLikeNumber");d();d();function OGe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(OGe,"tokenizeArgString");d();var yh;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(yh||(yh={}));var Ex,FJ=class{static{s(this,"YargsParser")}constructor(e){Ex=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=OGe(e),o=typeof e=="string",a=Q$t(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),A=n.__||Ex.format,y={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(se){let le=typeof se=="object"?se.key:se,qe=Object.keys(se).map(function(Be){return{boolean:"bools",string:"strings",number:"numbers"}[Be]}).filter(Boolean).pop();qe&&(y[qe][le]=!0),y.arrays[le]=!0,y.keys.push(le)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(se){y.bools[se]=!0,y.keys.push(se)}),[].concat(n.string||[]).filter(Boolean).forEach(function(se){y.strings[se]=!0,y.keys.push(se)}),[].concat(n.number||[]).filter(Boolean).forEach(function(se){y.numbers[se]=!0,y.keys.push(se)}),[].concat(n.count||[]).filter(Boolean).forEach(function(se){y.counts[se]=!0,y.keys.push(se)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(se){y.normalize[se]=!0,y.keys.push(se)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([se,le])=>{typeof le=="number"&&(y.nargs[se]=le,y.keys.push(se))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([se,le])=>{typeof le=="function"&&(y.coercions[se]=le,y.keys.push(se))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(se){y.configs[se]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([se,le])=>{(typeof le=="boolean"||typeof le=="function")&&(y.configs[se]=le)})),Oe(n.key,a,n.default,y.arrays),Object.keys(l).forEach(function(se){(y.aliases[se]||[]).forEach(function(le){l[le]=l[se]})});let S=null;$e();let R=[],B=Object.assign(Object.create(null),{_:[]}),L={};for(let se=0;se<i.length;se++){let le=i[se],qe=le.replace(/^-{3,}/,"---"),Be,Ee,je,tt,pt,Ft;if(le!=="--"&&/^-/.test(le)&&_t(le))O(le);else if(qe.match(/^---+(=|$)/)){O(le);continue}else if(le.match(/^--.+=/)||!c["short-option-groups"]&&le.match(/^-.+=/))tt=le.match(/^--?([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&(Te(tt[1],y.arrays)?se=V(se,tt[1],i,tt[2]):Te(tt[1],y.nargs)!==!1?se=K(se,tt[1],i,tt[2]):z(tt[1],tt[2],!0));else if(le.match(b)&&c["boolean-negation"])tt=le.match(b),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],z(Ee,Te(Ee,y.arrays)?[!1]:!1));else if(le.match(/^--.+/)||!c["short-option-groups"]&&le.match(/^-[^-]+/))tt=le.match(/^--?(.+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],Te(Ee,y.arrays)?se=V(se,Ee,i):Te(Ee,y.nargs)!==!1?se=K(se,Ee,i):(pt=i[se+1],pt!==void 0&&(!pt.match(/^-/)||pt.match(E))&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)||/^(true|false)$/.test(pt)?(z(Ee,pt),se++):z(Ee,ht(Ee))));else if(le.match(/^-.\..+=/))tt=le.match(/^-([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&z(tt[1],tt[2]);else if(le.match(/^-.\..+/)&&!le.match(E))pt=i[se+1],tt=le.match(/^-(.\..+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],pt!==void 0&&!pt.match(/^-/)&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)?(z(Ee,pt),se++):z(Ee,ht(Ee)));else if(le.match(/^-[^-]+/)&&!le.match(E)){je=le.slice(1,-1).split(""),Be=!1;for(let Jt=0;Jt<je.length;Jt++){if(pt=le.slice(Jt+2),je[Jt+1]&&je[Jt+1]==="="){Ft=le.slice(Jt+3),Ee=je[Jt],Te(Ee,y.arrays)?se=V(se,Ee,i,Ft):Te(Ee,y.nargs)!==!1?se=K(se,Ee,i,Ft):z(Ee,Ft),Be=!0;break}if(pt==="-"){z(je[Jt],pt);continue}if(/[A-Za-z]/.test(je[Jt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(pt)&&Te(pt,y.bools)===!1){z(je[Jt],pt),Be=!0;break}if(je[Jt+1]&&je[Jt+1].match(/\W/)){z(je[Jt],pt),Be=!0;break}else z(je[Jt],ht(je[Jt]))}Ee=le.slice(-1)[0],!Be&&Ee!=="-"&&(Te(Ee,y.arrays)?se=V(se,Ee,i):Te(Ee,y.nargs)!==!1?se=K(se,Ee,i):(pt=i[se+1],pt!==void 0&&(!/^(-|--)[^-]/.test(pt)||pt.match(E))&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)||/^(true|false)$/.test(pt)?(z(Ee,pt),se++):z(Ee,ht(Ee))))}else if(le.match(/^-[0-9]$/)&&le.match(E)&&Te(le.slice(1),y.bools))Ee=le.slice(1),z(Ee,ht(Ee));else if(le==="--"){R=i.slice(se+1);break}else if(c["halt-at-non-option"]){R=i.slice(se);break}else O(le)}X(B,!0),X(B,!1),J(B),$(),te(B,y.aliases,l,!0),ie(B),c["set-placeholder-key"]&&ae(B),Object.keys(y.counts).forEach(function(se){pe(B,se.split("."))||z(se,0)}),p&&R.length&&(B[m]=[]),R.forEach(function(se){B[m].push(se)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(B).filter(se=>se!=="--"&&se.includes("-")).forEach(se=>{delete B[se]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(se=>a[se])).forEach(se=>{c["camel-case-expansion"]&&se.includes("-")&&delete B[se.split(".").map(le=>ER(le)).join(".")],delete B[se]});function O(se){let le=Z("_",se);(typeof le=="string"||typeof le=="number")&&B._.push(le)}s(O,"pushPositional");function K(se,le,qe,Be){let Ee,je=Te(le,y.nargs);if(je=typeof je!="number"||isNaN(je)?1:je,je===0)return ye(Be)||(S=Error(A("Argument unexpected for: %s",le))),z(le,ht(le)),se;let tt=ye(Be)?0:1;if(c["nargs-eats-options"])qe.length-(se+1)+tt<je&&(S=Error(A("Not enough arguments following: %s",le))),tt=je;else{for(Ee=se+1;Ee<qe.length&&(!qe[Ee].match(/^-[^0-9]/)||qe[Ee].match(E)||_t(qe[Ee]));Ee++)tt++;tt<je&&(S=Error(A("Not enough arguments following: %s",le)))}let pt=Math.min(tt,je);for(!ye(Be)&&pt>0&&(z(le,Be),pt--),Ee=se+1;Ee<pt+se+1;Ee++)z(le,qe[Ee]);return se+pt}s(K,"eatNargs");function V(se,le,qe,Be){let Ee=[],je=Be||qe[se+1],tt=Te(le,y.nargs);if(Te(le,y.bools)&&!/^(true|false)$/.test(je))Ee.push(!0);else if(ye(je)||ye(Be)&&/^-/.test(je)&&!E.test(je)&&!_t(je)){if(l[le]!==void 0){let pt=l[le];Ee=Array.isArray(pt)?pt:[pt]}}else{ye(Be)||Ee.push(U(le,Be,!0));for(let pt=se+1;pt<qe.length&&!(!c["greedy-arrays"]&&Ee.length>0||tt&&typeof tt=="number"&&Ee.length>=tt||(je=qe[pt],/^-/.test(je)&&!E.test(je)&&!_t(je)));pt++)se=pt,Ee.push(U(le,je,o))}return typeof tt=="number"&&(tt&&Ee.length<tt||isNaN(tt)&&Ee.length===0)&&(S=Error(A("Not enough arguments following: %s",le))),z(le,Ee),se}s(V,"eatArray");function z(se,le,qe=o){if(/-/.test(se)&&c["camel-case-expansion"]){let je=se.split(".").map(function(tt){return ER(tt)}).join(".");Q(se,je)}let Be=U(se,le,qe),Ee=se.split(".");Ae(B,Ee,Be),y.aliases[se]&&y.aliases[se].forEach(function(je){let tt=je.split(".");Ae(B,tt,Be)}),Ee.length>1&&c["dot-notation"]&&(y.aliases[Ee[0]]||[]).forEach(function(je){let tt=je.split("."),pt=[].concat(Ee);pt.shift(),tt=tt.concat(pt),(y.aliases[se]||[]).includes(tt.join("."))||Ae(B,tt,Be)}),Te(se,y.normalize)&&!Te(se,y.arrays)&&[se].concat(y.aliases[se]||[]).forEach(function(tt){Object.defineProperty(L,tt,{enumerable:!0,get(){return le},set(pt){le=typeof pt=="string"?Ex.normalize(pt):pt}})})}s(z,"setArg");function Q(se,le){y.aliases[se]&&y.aliases[se].length||(y.aliases[se]=[le],h[le]=!0),y.aliases[le]&&y.aliases[le].length||Q(le,se)}s(Q,"addNewAlias");function U(se,le,qe){qe&&(le=U$t(le)),(Te(se,y.bools)||Te(se,y.counts))&&typeof le=="string"&&(le=le==="true");let Be=Array.isArray(le)?le.map(function(Ee){return Z(se,Ee)}):Z(se,le);return Te(se,y.counts)&&(ye(Be)||typeof Be=="boolean")&&(Be=a1e()),Te(se,y.normalize)&&Te(se,y.arrays)&&(Array.isArray(le)?Be=le.map(Ee=>Ex.normalize(Ee)):Be=Ex.normalize(le)),Be}s(U,"processValue");function Z(se,le){return!c["parse-positional-numbers"]&&se==="_"||!Te(se,y.strings)&&!Te(se,y.bools)&&!Array.isArray(le)&&(LJ(le)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${le}`)))||!ye(le)&&Te(se,y.numbers))&&(le=Number(le)),le}s(Z,"maybeCoerceNumber");function J(se){let le=Object.create(null);te(le,y.aliases,l),Object.keys(y.configs).forEach(function(qe){let Be=se[qe]||le[qe];if(Be)try{let Ee=null,je=Ex.resolve(Ex.cwd(),Be),tt=y.configs[qe];if(typeof tt=="function"){try{Ee=tt(je)}catch(pt){Ee=pt}if(Ee instanceof Error){S=Ee;return}}else Ee=Ex.require(je);j(Ee)}catch(Ee){Ee.name==="PermissionDenied"?S=Ee:se[qe]&&(S=Error(A("Invalid JSON config file: %s",Be)))}})}s(J,"setConfig");function j(se,le){Object.keys(se).forEach(function(qe){let Be=se[qe],Ee=le?le+"."+qe:qe;typeof Be=="object"&&Be!==null&&!Array.isArray(Be)&&c["dot-notation"]?j(Be,Ee):(!pe(B,Ee.split("."))||Te(Ee,y.arrays)&&c["combine-arrays"])&&z(Ee,Be)})}s(j,"setConfigObject");function $(){typeof u<"u"&&u.forEach(function(se){j(se)})}s($,"setConfigObjects");function X(se,le){if(typeof f>"u")return;let qe=typeof f=="string"?f:"",Be=Ex.env();Object.keys(Be).forEach(function(Ee){if(qe===""||Ee.lastIndexOf(qe,0)===0){let je=Ee.split("__").map(function(tt,pt){return pt===0&&(tt=tt.substring(qe.length)),ER(tt)});(le&&y.configs[je.join(".")]||!le)&&!pe(se,je)&&z(je.join("."),Be[Ee])}})}s(X,"applyEnvVars");function ie(se){let le,qe=new Set;Object.keys(se).forEach(function(Be){if(!qe.has(Be)&&(le=Te(Be,y.coercions),typeof le=="function"))try{let Ee=Z(Be,le(se[Be]));[].concat(y.aliases[Be]||[],Be).forEach(je=>{qe.add(je),se[je]=Ee})}catch(Ee){S=Ee}})}s(ie,"applyCoercions");function ae(se){return y.keys.forEach(le=>{~le.indexOf(".")||typeof se[le]>"u"&&(se[le]=void 0)}),se}s(ae,"setPlaceholderKeys");function te(se,le,qe,Be=!1){Object.keys(qe).forEach(function(Ee){pe(se,Ee.split("."))||(Ae(se,Ee.split("."),qe[Ee]),Be&&(g[Ee]=!0),(le[Ee]||[]).forEach(function(je){pe(se,je.split("."))||Ae(se,je.split("."),qe[Ee])}))})}s(te,"applyDefaultsAndAliases");function pe(se,le){let qe=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Ee){qe=qe[Ee]||{}});let Be=le[le.length-1];return typeof qe!="object"?!1:Be in qe}s(pe,"hasKey");function Ae(se,le,qe){let Be=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Ft){Ft=QGe(Ft),typeof Be=="object"&&Be[Ft]===void 0&&(Be[Ft]={}),typeof Be[Ft]!="object"||Array.isArray(Be[Ft])?(Array.isArray(Be[Ft])?Be[Ft].push({}):Be[Ft]=[Be[Ft],{}],Be=Be[Ft][Be[Ft].length-1]):Be=Be[Ft]});let Ee=QGe(le[le.length-1]),je=Te(le.join("."),y.arrays),tt=Array.isArray(qe),pt=c["duplicate-arguments-array"];!pt&&Te(Ee,y.nargs)&&(pt=!0,(!ye(Be[Ee])&&y.nargs[Ee]===1||Array.isArray(Be[Ee])&&Be[Ee].length===y.nargs[Ee])&&(Be[Ee]=void 0)),qe===a1e()?Be[Ee]=a1e(Be[Ee]):Array.isArray(Be[Ee])?pt&&je&&tt?Be[Ee]=c["flatten-duplicate-arrays"]?Be[Ee].concat(qe):(Array.isArray(Be[Ee][0])?Be[Ee]:[Be[Ee]]).concat([qe]):!pt&&!!je==!!tt?Be[Ee]=qe:Be[Ee]=Be[Ee].concat([qe]):Be[Ee]===void 0&&je?Be[Ee]=tt?qe:[qe]:pt&&!(Be[Ee]===void 0||Te(Ee,y.counts)||Te(Ee,y.bools))?Be[Ee]=[Be[Ee],qe]:Be[Ee]=qe}s(Ae,"setKey");function Oe(...se){se.forEach(function(le){Object.keys(le||{}).forEach(function(qe){y.aliases[qe]||(y.aliases[qe]=[].concat(a[qe]||[]),y.aliases[qe].concat(qe).forEach(function(Be){if(/-/.test(Be)&&c["camel-case-expansion"]){let Ee=ER(Be);Ee!==qe&&y.aliases[qe].indexOf(Ee)===-1&&(y.aliases[qe].push(Ee),h[Ee]=!0)}}),y.aliases[qe].concat(qe).forEach(function(Be){if(Be.length>1&&/[A-Z]/.test(Be)&&c["camel-case-expansion"]){let Ee=MJ(Be,"-");Ee!==qe&&y.aliases[qe].indexOf(Ee)===-1&&(y.aliases[qe].push(Ee),h[Ee]=!0)}}),y.aliases[qe].forEach(function(Be){y.aliases[Be]=[qe].concat(y.aliases[qe].filter(function(Ee){return Be!==Ee}))}))})})}s(Oe,"extendAliases");function Te(se,le){let qe=[].concat(y.aliases[se]||[],se),Be=Object.keys(le),Ee=qe.find(je=>Be.includes(je));return Ee?le[Ee]:!1}s(Te,"checkAllAliases");function Je(se){let le=Object.keys(y);return[].concat(le.map(Be=>y[Be])).some(function(Be){return Array.isArray(Be)?Be.includes(se):Be[se]})}s(Je,"hasAnyFlag");function Fe(se,...le){return[].concat(...le).some(function(Be){let Ee=se.match(Be);return Ee&&Je(Ee[1])})}s(Fe,"hasFlagsMatching");function lt(se){if(se.match(E)||!se.match(/^-[^-]+/))return!1;let le=!0,qe,Be=se.slice(1).split("");for(let Ee=0;Ee<Be.length;Ee++){if(qe=se.slice(Ee+2),!Je(Be[Ee])){le=!1;break}if(Be[Ee+1]&&Be[Ee+1]==="="||qe==="-"||/[A-Za-z]/.test(Be[Ee])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(qe)||Be[Ee+1]&&Be[Ee+1].match(/\W/))break}return le}s(lt,"hasAllShortFlags");function _t(se){return c["unknown-options-as-args"]&&xt(se)}s(_t,"isUnknownOptionAsArg");function xt(se){return se=se.replace(/^-{3,}/,"--"),se.match(E)||lt(se)?!1:!Fe(se,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(xt,"isUnknownOption");function ht(se){return!Te(se,y.bools)&&!Te(se,y.counts)&&`${se}`in l?l[se]:ue(Ue(se))}s(ht,"defaultValue");function ue(se){return{[yh.BOOLEAN]:!0,[yh.STRING]:"",[yh.NUMBER]:void 0,[yh.ARRAY]:[]}[se]}s(ue,"defaultForType");function Ue(se){let le=yh.BOOLEAN;return Te(se,y.strings)?le=yh.STRING:Te(se,y.numbers)?le=yh.NUMBER:Te(se,y.bools)?le=yh.BOOLEAN:Te(se,y.arrays)&&(le=yh.ARRAY),le}s(Ue,"guessType");function ye(se){return se===void 0}s(ye,"isUndefined");function $e(){Object.keys(y.counts).find(se=>Te(se,y.arrays)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.array.",se)),!0):Te(se,y.nargs)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.narg.",se)),!0):!1)}return s($e,"checkConfiguration"),{aliases:Object.assign({},y.aliases),argv:Object.assign(L,B),configuration:c,defaulted:Object.assign({},g),error:S,newAliases:Object.assign({},h)}}};function Q$t(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(Q$t,"combineAliases");function a1e(t){return t!==void 0?t+1:1}s(a1e,"increment");function QGe(t){return t==="__proto__"?"___proto___":t}s(QGe,"sanitizeKey");function U$t(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(U$t,"stripQuotes");var $Ge=require("fs");var c1e,l1e,u1e,UGe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,qGe=(l1e=(c1e=process==null?void 0:process.versions)===null||c1e===void 0?void 0:c1e.node)!==null&&l1e!==void 0?l1e:(u1e=process==null?void 0:process.version)===null||u1e===void 0?void 0:u1e.slice(1);if(qGe&&Number(qGe.match(/^([^.]+)/)[1])<UGe)throw Error(`yargs parser supports a minimum Node.js version of ${UGe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var q$t=process?process.env:{},WGe=new FJ({cwd:process.cwd,env:s(()=>q$t,"env"),format:HGe.format,normalize:OJ.normalize,resolve:OJ.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,$Ge.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),WO=s(function(e,r){return WGe.parse(e.slice(),r).argv},"Parser");WO.detailed=function(t,e){return WGe.parse(t.slice(),e)};WO.camelCase=ER;WO.decamelize=MJ;WO.looksLikeNumber=LJ;var jGe=WO;var wA=require("path");d();function H$t(){return $$t()?0:1}s(H$t,"getProcessArgvBinIndex");function $$t(){return W$t()&&!process.defaultApp}s($$t,"isBundledElectronApp");function W$t(){return!!process.versions.electron}s(W$t,"isElectronApp");function GGe(){return process.argv[H$t()]}s(GGe,"getProcessArgvBin");d();var na=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var GB=require("fs"),VGe=require("util"),zGe=require("path");var YGe={fs:{readFileSync:GB.readFileSync,writeFile:GB.writeFile},format:VGe.format,resolve:zGe.resolve,exists:s(t=>{try{return(0,GB.statSync)(t).isFile()}catch{return!1}},"exists")};d();var TA,d1e=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),TA.format.apply(TA.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),TA.format.apply(TA.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);TA.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{TA.fs.readFileSync&&(e=JSON.parse(TA.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=TA.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=TA.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return TA.exists(e)}};function KGe(t,e){TA=e;let r=new d1e(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(KGe,"y18n");var j$t=s(t=>KGe(t,YGe),"y18n"),JGe=j$t;var G$t="require is not supported by ESM",XGe="loading a directory of commands is not supported yet for ESM",jO;try{jO=(0,tVe.fileURLToPath)(importMetaUrlShim)}catch{jO=process.cwd()}var V$t=jO.substring(0,jO.lastIndexOf("node_modules")),rVe={assert:{notStrictEqual:QJ.notStrictEqual,strictEqual:QJ.strictEqual},cliui:o1e,findUp:s1e,getEnv:s(t=>process.env[t],"getEnv"),inspect:ZGe.inspect,getCallerFile:s(()=>{throw new na(XGe)},"getCallerFile"),getProcessArgvBin:GGe,mainFilename:V$t||process.cwd(),Parser:jGe,path:{basename:wA.basename,dirname:wA.dirname,extname:wA.extname,relative:wA.relative,resolve:wA.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:eVe.readFileSync,require:s(()=>{throw new na(G$t)},"require"),requireDirectory:s(()=>{throw new na(XGe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:JGe({directory:(0,wA.resolve)(jO,"../../../locales"),updateFiles:!1})};d();d();d();function Tf(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Tf,"assertNotStrictEqual");function f1e(t,e){e.assert.strictEqual(typeof t,"string")}s(f1e,"assertSingleKey");function VB(t){return Object.keys(t)}s(VB,"objectKeys");d();function ia(t){return!!t&&!!t.then&&typeof t.then=="function"}s(ia,"isPromise");d();d();d();function BT(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(BT,"parseCommand");var z$t=["first","second","third","fourth","fifth","sixth"];function Mr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[BT(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new na(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new na(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=nVe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&iVe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=nVe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&iVe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Mr,"argsert");function nVe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(nVe,"guessType");function iVe(t,e,r){throw new na(`Invalid ${z$t[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(iVe,"argumentTypeError");var UJ=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Mr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function oVe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(oVe,"commandMiddlewareFactory");function bR(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(ia(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return ia(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(bR,"applyMiddleware");d();function IR(t,e,r=n=>{throw n}){try{let n=Y$t(t)?t():t;return ia(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(IR,"maybeAsyncResult");function Y$t(t){return typeof t=="function"}s(Y$t,"isFunction");d();function p1e(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(p1e,"whichModule");var zB=/(^\*)|(^\$0)/,m1e=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=oVe(o);if(i=i||(()=>{}),Array.isArray(e))if(K$t(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(X$t(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(sVe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=BT(e);c=c.map(m=>BT(m).cmd);let f=!1,p=[u.cmd].concat(c).filter(m=>zB.test(m)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(zB,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return ia(p)?p.then(m=>this.applyMiddlewareAndGetResult(f,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if(qJ(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(ia(p))return p.then(m=>(f=cVe(m)?m:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else J$t(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return ia(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=zB.test(r.original)?r.original.replace(zB,"").trim():r.original,i=e.filter(o=>!zB.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=IR(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=bR(n,a,c,!1),n=IR(n,f=>{let p=r.handler(f);return ia(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),ia(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=bR(n,c,u,!0);return ia(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=BT(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=zB.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(qJ(r))return r(e,!0);sVe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=p1e(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Tf(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Tf(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function aVe(t,e,r,n){return new m1e(t,e,r,n)}s(aVe,"command");function sVe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(sVe,"isCommandBuilderDefinition");function K$t(t){return t.every(e=>typeof e=="string")}s(K$t,"isCommandAndAliases");function qJ(t){return typeof t=="function"}s(qJ,"isCommandBuilderCallback");function J$t(t){return typeof t=="object"}s(J$t,"isCommandBuilderOptionDefinitions");function X$t(t){return typeof t=="object"&&!Array.isArray(t)}s(X$t,"isCommandHandlerDefinition");d();d();function NT(t={},e=()=>!0){let r={};return VB(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(NT,"objFilter");d();function MT(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(MT,"setBlocking");function Z$t(t){return typeof t=="boolean"}s(Z$t,"isBoolean");function uVe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(U=!0,Z){let[J,j]=typeof U=="string"?[!0,U]:[U,Z];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,c=J,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(U,Z){let J=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let $=i[j];if(Z$t($)){if(Z)throw Z;if(U)throw Error(U)}else $(U,Z,n)}else{if(t.getExitProcess()&&MT(!0),!l){l=!0,c&&(t.showHelp("error"),J.error()),(U||Z)&&J.error(U||Z);let j=o||a;j&&((U||Z)&&J.error(""),J.error(j))}if(Z=Z||new na(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,Z);throw Z}},"fail");let u=[],f=!1;n.usage=(Q,U)=>Q===null?(f=!0,u=[],n):(f=!1,u.push([Q,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(Q,U)=>{p.push([Q,U||""])};let m=[];n.command=s(function(U,Z,J,j,$=!1){J&&(m=m.map(X=>(X[2]=!1,X))),m.push([U,Z||"",J,j,$])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(U,Z){Array.isArray(U)?U.forEach(J=>{n.describe(J,Z)}):typeof U=="object"?Object.keys(U).forEach(J=>{n.describe(J,U[J])}):h[U]=Z},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=Q=>{g.push(Q)};let A=!1,y;n.wrap=Q=>{A=!0,y=Q},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(A||(y=K(),A=!0),y);let E="__yargsString__:";n.deferY18nLookup=Q=>E+Q,n.help=s(function(){if(R)return R;S();let U=t.customScriptName?t.$0:e.path.basename(t.$0),Z=t.getDemandedOptions(),J=t.getDemandedCommands(),j=t.getDeprecatedOptions(),$=t.getGroups(),X=t.getOptions(),ie=[];ie=ie.concat(Object.keys(h)),ie=ie.concat(Object.keys(Z)),ie=ie.concat(Object.keys(J)),ie=ie.concat(Object.keys(X.default)),ie=ie.filter(L),ie=Object.keys(ie.reduce((Fe,lt)=>(lt!=="_"&&(Fe[lt]=!0),Fe),{}));let ae=n.getWrap(),te=e.cliui({width:ae,wrap:!!ae});if(!f){if(u.length)u.forEach(Fe=>{te.div({text:`${Fe[0].replace(/\$0/g,U)}`}),Fe[1]&&te.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),te.div();else if(m.length){let Fe=null;J._?Fe=`${U} <${r("command")}>
`:Fe=`${U} [${r("command")}]
`,te.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){te.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),lt=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((xt,ht)=>xt[0].localeCompare(ht[0])));let _t=U?`${U} `:"";m.forEach(xt=>{let ht=`${_t}${lt}${xt[0].replace(/^\$0 ?/,"")}`;te.span({text:ht,padding:[0,2,0,2],width:b(m,ae,`${U}${lt}`)+4},{text:xt[1]});let ue=[];xt[2]&&ue.push(`[${r("default")}]`),xt[3]&&xt[3].length&&ue.push(`[${r("aliases:")} ${xt[3].join(", ")}]`),xt[4]&&(typeof xt[4]=="string"?ue.push(`[${r("deprecated: %s",xt[4])}]`):ue.push(`[${r("deprecated")}]`)),ue.length?te.div({text:ue.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(X.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Fe=>!t.parsed.newAliases[Fe]&&pe.every(lt=>(X.alias[lt]||[]).indexOf(Fe)===-1));let Ae=r("Options:");$[Ae]||($[Ae]=[]),B(ie,X.alias,$,Ae);let Oe=s(Fe=>/^--/.test(HJ(Fe)),"isLongSwitch"),Te=Object.keys($).filter(Fe=>$[Fe].length>0).map(Fe=>{let lt=$[Fe].filter(L).map(_t=>{if(pe.includes(_t))return _t;for(let xt=0,ht;(ht=pe[xt])!==void 0;xt++)if((X.alias[ht]||[]).includes(_t))return ht;return _t});return{groupName:Fe,normalizedKeys:lt}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:lt})=>{let _t=lt.reduce((xt,ht)=>(xt[ht]=[ht].concat(X.alias[ht]||[]).map(ue=>Fe===n.getPositionalGroupName()?ue:(/^[0-9]$/.test(ue)?X.boolean.includes(ht)?"-":"--":ue.length>1?"--":"-")+ue).sort((ue,Ue)=>Oe(ue)===Oe(Ue)?0:Oe(ue)?1:-1).join(", "),xt),{});return{groupName:Fe,normalizedKeys:lt,switches:_t}});if(Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:lt})=>!Fe.every(_t=>Oe(lt[_t])))&&Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:lt})=>{Fe.forEach(_t=>{Oe(lt[_t])&&(lt[_t]=eWt(lt[_t],4))})}),Te.forEach(({groupName:Fe,normalizedKeys:lt,switches:_t})=>{te.div(Fe),lt.forEach(xt=>{let ht=_t[xt],ue=h[xt]||"",Ue=null;ue.includes(E)&&(ue=r(ue.substring(E.length))),X.boolean.includes(xt)&&(Ue=`[${r("boolean")}]`),X.count.includes(xt)&&(Ue=`[${r("count")}]`),X.string.includes(xt)&&(Ue=`[${r("string")}]`),X.normalize.includes(xt)&&(Ue=`[${r("string")}]`),X.array.includes(xt)&&(Ue=`[${r("array")}]`),X.number.includes(xt)&&(Ue=`[${r("number")}]`);let ye=s(le=>typeof le=="string"?`[${r("deprecated: %s",le)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),$e=[xt in j?ye(j[xt]):null,Ue,xt in Z?`[${r("required")}]`:null,X.choices&&X.choices[xt]?`[${r("choices:")} ${n.stringifiedValues(X.choices[xt])}]`:null,O(X.default[xt],X.defaultDescription[xt])].filter(Boolean).join(" ");te.span({text:HJ(ht),padding:[0,2,0,2+lVe(ht)],width:b(_t,ae)+4},ue);let se=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;$e&&!se?te.div({text:$e,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,U)}),p.forEach(Fe=>{Fe[1]===""?te.div({text:Fe[0],padding:[0,2,0,2]}):te.div({text:Fe[0],padding:[0,2,0,2],width:b(p,ae)+4},{text:Fe[1]})}),te.div()),g.length>0){let Fe=g.map(lt=>lt.replace(/\$0/g,U)).join(`
`);te.div(`${Fe}
`)}return te.toString().replace(/\s*$/,"")},"help");function b(Q,U,Z){let J=0;return Array.isArray(Q)||(Q=Object.values(Q).map(j=>[j])),Q.forEach(j=>{J=Math.max(e.stringWidth(Z?`${Z} ${HJ(j[0])}`:HJ(j[0]))+lVe(j[0]),J)}),U&&(J=Math.min(J,parseInt((U*.5).toString(),10))),J}s(b,"maxWidth");function S(){let Q=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(Z=>{U.alias[Z].forEach(J=>{h[J]&&n.describe(Z,h[J]),J in Q&&t.demandOption(Z,Q[J]),U.boolean.includes(J)&&t.boolean(Z),U.count.includes(J)&&t.count(Z),U.string.includes(J)&&t.string(Z),U.normalize.includes(J)&&t.normalize(Z),U.array.includes(J)&&t.array(Z),U.number.includes(J)&&t.number(Z)})})}s(S,"normalizeAliases");let R;n.cacheHelpMessage=function(){R=this.help()},n.clearCachedHelpMessage=function(){R=void 0},n.hasCachedHelpMessage=function(){return!!R};function B(Q,U,Z,J){let j=[],$=null;return Object.keys(Z).forEach(X=>{j=j.concat(Z[X])}),Q.forEach(X=>{$=[X].concat(U[X]),$.some(ie=>j.indexOf(ie)!==-1)||Z[J].push(X)}),j}s(B,"addUngroupedKeys");function L(Q){return t.getOptions().hiddenOptions.indexOf(Q)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(L,"filterHiddenOptions"),n.showHelp=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(n.help())},n.functionDescription=Q=>["(",Q.name?e.Parser.decamelize(Q.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,Z){let J="",j=Z||", ",$=[].concat(U);return!U||!$.length||$.forEach(X=>{J.length&&(J+=j),J+=JSON.stringify(X)}),J},"stringifiedValues");function O(Q,U){let Z=`[${r("default:")} `;if(Q===void 0&&!U)return null;if(U)Z+=U;else switch(typeof Q){case"string":Z+=`"${Q}"`;break;case"object":Z+=JSON.stringify(Q);break;default:Z+=Q}return`${Z}]`}s(O,"defaultString");function K(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(K,"windowWidth");let V=null;n.version=Q=>{V=Q},n.showVersion=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(V)},n.reset=s(function(U){return o=null,l=!1,u=[],f=!1,g=[],p=[],m=[],h=NT(h,Z=>!U[Z]),n},"reset");let z=[];return n.freeze=s(function(){z.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(U=!1){let Z=z.pop();Z&&(U?(h={...Z.descriptions,...h},m=[...Z.commands,...m],u=[...Z.usages,...u],p=[...Z.examples,...p],g=[...Z.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h}=Z)},"unfreeze"),n}s(uVe,"usage");function h1e(t){return typeof t=="object"}s(h1e,"isIndentedText");function eWt(t,e){return h1e(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(eWt,"addIndentation");function lVe(t){return h1e(t)?t.indentation:0}s(lVe,"getIndentation");function HJ(t){return h1e(t)?t.text:t}s(HJ,"getText");d();d();var dVe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,fVe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var g1e=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(qJ(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=BT(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(E=>{let b=h[E];return typeof b=="string"&&b.length>0}),A=g?h[g]:void 0,y=(l=(c=h[e])!==null&&c!==void 0?c:A)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${y.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!f(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Tf(this.customCompletionFunction,null,this.shim),rWt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return ia(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return nWt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return ia(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?fVe:dVe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function pVe(t,e,r,n){return new g1e(t,e,r,n)}s(pVe,"completion");function rWt(t){return t.length<3}s(rWt,"isSyncCompletionFunction");function nWt(t){return t.length>3}s(nWt,"isFallbackCompletionFunction");d();d();function mVe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(mVe,"levenshtein");var hVe=["$0","--","_"];function gVe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let y of Object.keys(h)){let E=h[y];E&&g.indexOf(E)<0&&g.push(E)}let A=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+A))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,A=!0){var y;let E=t.getInternalMethods().getCommandInstance().getCommands(),b=[],S=t.getInternalMethods().getContext();if(Object.keys(p).forEach(R=>{!hVe.includes(R)&&!Object.prototype.hasOwnProperty.call(h,R)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),R)&&!o.isValidAndSomeAliasIsNotNew(R,m)&&b.push(R)}),A&&(S.commands.length>0||E.length>0||g)&&p._.slice(S.commands.length).forEach(R=>{E.includes(""+R)||b.push(""+R)}),A){let B=((y=t.getDemandedCommands()._)===null||y===void 0?void 0:y.max)||0,L=S.commands.length+B;L<p._.length&&p._.slice(L).forEach(O=>{O=String(O),!S.commands.includes(O)&&!b.includes(O)&&b.push(O)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(R=>R.trim()?R:`"${R}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(A=>{m.includes(""+A)||h.push(""+A)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(y=>{hVe.indexOf(y)===-1&&Object.prototype.hasOwnProperty.call(m.choices,y)&&[].concat(p[y]).forEach(E=>{m.choices[y].indexOf(E)===-1&&E!==void 0&&(h[y]=(h[y]||[]).concat(E))})});let g=Object.keys(h);if(!g.length)return;let A=n("Invalid values:");g.forEach(y=>{A+=`
  ${n("Argument: %s, Given: %s, Choices: %s",y,e.stringifiedValues(h[y]),e.stringifiedValues(m.choices[y]))}`}),e.fail(A)},"limitedChoices");let a={};o.implies=s(function(p,m){Mr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Tf(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(A=>{let y=g,E=A;y=c(p,y),A=c(p,A),y&&!A&&m.push(` ${g} -> ${E}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){Mr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((y,E)=>E.length-y.length);let g=null,A=1/0;for(let y=0,E;(E=m[y])!==void 0;y++){let b=mVe(p,E);b<=3&&b<A&&(A=b,g=E)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=NT(a,m=>!p[m]),l=NT(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Tf(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(gVe,"validation");d();var A1e=[],GO;function $J(t,e,r,n){GO=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=oWt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}iWt(a),A1e.push(a),i=o?JSON.parse(GO.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=$J(i,GO.path.dirname(a),r,GO)}return A1e=[],r?AVe(i,t):Object.assign({},i,t)}s($J,"applyExtends");function iWt(t){if(A1e.indexOf(t)>-1)throw new na(`Circular extended configurations: '${t}'.`)}s(iWt,"checkForCircularExtends");function oWt(t,e){return GO.path.resolve(t,e)}s(oWt,"getPathToDefaultConfig");function AVe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=AVe(t[i],e[i]):r[i]=e[i];return r}s(AVe,"mergeDeep");var Fr=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},he=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Nc,TR,VO,Ch,Op,WJ,LT,wR,jJ,vh,GJ,xh,FC,Qp,Eh,VJ,YB,su,nn,zJ,YJ,Up,SR,KB,_R,FT,KJ,Vn,RR,kR,PR,ai,JJ,OC,ac;function FVe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new _1e(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(FVe,"YargsFactory");var yVe=Symbol("copyDoubleDash"),CVe=Symbol("copyDoubleDash"),y1e=Symbol("deleteFromParserHintObject"),vVe=Symbol("emitWarning"),xVe=Symbol("freeze"),EVe=Symbol("getDollarZero"),DR=Symbol("getParserConfiguration"),bVe=Symbol("getUsageConfiguration"),C1e=Symbol("guessLocale"),IVe=Symbol("guessVersion"),TVe=Symbol("parsePositionalNumbers"),v1e=Symbol("pkgUp"),OT=Symbol("populateParserHintArray"),JB=Symbol("populateParserHintSingleValueDictionary"),x1e=Symbol("populateParserHintArrayDictionary"),E1e=Symbol("populateParserHintDictionary"),b1e=Symbol("sanitizeKey"),I1e=Symbol("setKey"),T1e=Symbol("unfreeze"),wVe=Symbol("validateAsync"),SVe=Symbol("getCommandInstance"),_Ve=Symbol("getContext"),RVe=Symbol("getHasOutput"),kVe=Symbol("getLoggerInstance"),PVe=Symbol("getParseContext"),DVe=Symbol("getUsageInstance"),BVe=Symbol("getValidationInstance"),XJ=Symbol("hasParseCallback"),NVe=Symbol("isGlobalContext"),BR=Symbol("postProcess"),MVe=Symbol("rebase"),w1e=Symbol("reset"),zO=Symbol("runYargsParserAndExecuteCommands"),S1e=Symbol("runValidation"),LVe=Symbol("setHasOutput"),NR=Symbol("kTrackManuallySetKeys"),_1e=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Nc.set(this,void 0),TR.set(this,void 0),VO.set(this,{commands:[],fullCommands:[]}),Ch.set(this,null),Op.set(this,null),WJ.set(this,"show-hidden"),LT.set(this,null),wR.set(this,!0),jJ.set(this,{}),vh.set(this,!0),GJ.set(this,[]),xh.set(this,void 0),FC.set(this,{}),Qp.set(this,!1),Eh.set(this,null),VJ.set(this,!0),YB.set(this,void 0),su.set(this,""),nn.set(this,void 0),zJ.set(this,void 0),YJ.set(this,{}),Up.set(this,null),SR.set(this,null),KB.set(this,{}),_R.set(this,{}),FT.set(this,void 0),KJ.set(this,!1),Vn.set(this,void 0),RR.set(this,!1),kR.set(this,!1),PR.set(this,!1),ai.set(this,void 0),JJ.set(this,{}),OC.set(this,null),ac.set(this,void 0),Fr(this,Vn,i,"f"),Fr(this,FT,e,"f"),Fr(this,TR,r,"f"),Fr(this,zJ,n,"f"),Fr(this,xh,new UJ(this),"f"),this.$0=this[EVe](),this[w1e](),Fr(this,Nc,he(this,Nc,"f"),"f"),Fr(this,ai,he(this,ai,"f"),"f"),Fr(this,ac,he(this,ac,"f"),"f"),Fr(this,nn,he(this,nn,"f"),"f"),he(this,nn,"f").showHiddenOpt=he(this,WJ,"f"),Fr(this,YB,this[CVe](),"f")}addHelpOpt(e,r){let n="help";return Mr("[string|boolean] [string]",[e,r],arguments.length),he(this,Eh,"f")&&(this[y1e](he(this,Eh,"f")),Fr(this,Eh,null,"f")),e===!1&&r===void 0?this:(Fr(this,Eh,typeof e=="string"?e:n,"f"),this.boolean(he(this,Eh,"f")),this.describe(he(this,Eh,"f"),r||he(this,ai,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Mr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:he(this,WJ,"f");return this.boolean(n),this.describe(n,r||he(this,ai,"f").deferY18nLookup("Show hidden options")),he(this,nn,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Mr("<object|string|array> [string|array]",[e,r],arguments.length),this[x1e](this.alias.bind(this),"alias",e,r),this}array(e){return Mr("<array|string>",[e],arguments.length),this[OT]("array",e),this[NR](e),this}boolean(e){return Mr("<array|string>",[e],arguments.length),this[OT]("boolean",e),this[NR](e),this}check(e,r){return Mr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>IR(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&he(this,ai,"f").fail(o.toString(),o):he(this,ai,"f").fail(he(this,Vn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(he(this,ai,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Mr("<object|string|array> [string|array]",[e,r],arguments.length),this[x1e](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Mr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new na("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new na("coerce callback must be provided");return he(this,nn,"f").key[e]=!0,he(this,xh,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?IR(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new na(c.message)}):n},e),this}conflicts(e,r){return Mr("<string|object> [string|array]",[e,r],arguments.length),he(this,ac,"f").conflicts(e,r),this}config(e="config",r,n){return Mr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=$J(e,he(this,TR,"f"),this[DR]()["deep-merge-config"]||!1,he(this,Vn,"f")),he(this,nn,"f").configObjects=(he(this,nn,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||he(this,ai,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{he(this,nn,"f").config[i]=n||!0}),this)}completion(e,r,n){return Mr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Fr(this,Op,e||he(this,Op,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(he(this,Op,"f"),r),n&&he(this,Ch,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Mr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),he(this,Nc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Mr("<string> [object]",[e,r],arguments.length);let n=he(this,zJ,"f")||he(this,Vn,"f").require;return he(this,Nc,"f").addDirectory(e,n,he(this,Vn,"f").getCallerFile(),r),this}count(e){return Mr("<array|string>",[e],arguments.length),this[OT]("count",e),this[NR](e),this}default(e,r,n){return Mr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(f1e(e,he(this,Vn,"f")),he(this,nn,"f").defaultDescription[e]=n),typeof r=="function"&&(f1e(e,he(this,Vn,"f")),he(this,nn,"f").defaultDescription[e]||(he(this,nn,"f").defaultDescription[e]=he(this,ai,"f").functionDescription(r)),r=r.call()),this[JB](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Mr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),he(this,nn,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Tf(n,!0,he(this,Vn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Tf(n,!0,he(this,Vn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Tf(n,!0,he(this,Vn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Mr("<object|string|array> [string]",[e,r],arguments.length),this[JB](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Mr("<string> [string|boolean]",[e,r],arguments.length),he(this,nn,"f").deprecatedOptions[e]=r,this}describe(e,r){return Mr("<object|string|array> [string]",[e,r],arguments.length),this[I1e](e,!0),he(this,ai,"f").describe(e,r),this}detectLocale(e){return Mr("<boolean>",[e],arguments.length),Fr(this,wR,e,"f"),this}env(e){return Mr("[string|boolean]",[e],arguments.length),e===!1?delete he(this,nn,"f").envPrefix:he(this,nn,"f").envPrefix=e||"",this}epilogue(e){return Mr("<string>",[e],arguments.length),he(this,ai,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Mr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):he(this,ai,"f").example(e,r),this}exit(e,r){Fr(this,Qp,!0,"f"),Fr(this,LT,r,"f"),he(this,vh,"f")&&he(this,Vn,"f").process.exit(e)}exitProcess(e=!0){return Mr("[boolean]",[e],arguments.length),Fr(this,vh,e,"f"),this}fail(e){if(Mr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new na("Invalid first argument. Expected function or boolean 'false'");return he(this,ai,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Mr("<array> [function]",[e,r],arguments.length),r?he(this,Ch,"f").getCompletion(e,r):new Promise((n,i)=>{he(this,Ch,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Mr([],0),he(this,nn,"f").demandedOptions}getDemandedCommands(){return Mr([],0),he(this,nn,"f").demandedCommands}getDeprecatedOptions(){return Mr([],0),he(this,nn,"f").deprecatedOptions}getDetectLocale(){return he(this,wR,"f")}getExitProcess(){return he(this,vh,"f")}getGroups(){return Object.assign({},he(this,FC,"f"),he(this,_R,"f"))}getHelp(){if(Fr(this,Qp,!0,"f"),!he(this,ai,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[zO](he(this,FT,"f"),void 0,void 0,0,!0);if(ia(r))return r.then(()=>he(this,ai,"f").help())}let e=he(this,Nc,"f").runDefaultBuilderOn(this);if(ia(e))return e.then(()=>he(this,ai,"f").help())}return Promise.resolve(he(this,ai,"f").help())}getOptions(){return he(this,nn,"f")}getStrict(){return he(this,RR,"f")}getStrictCommands(){return he(this,kR,"f")}getStrictOptions(){return he(this,PR,"f")}global(e,r){return Mr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?he(this,nn,"f").local=he(this,nn,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{he(this,nn,"f").local.includes(n)||he(this,nn,"f").local.push(n)}),this}group(e,r){Mr("<string|array> <string>",[e,r],arguments.length);let n=he(this,_R,"f")[r]||he(this,FC,"f")[r];he(this,_R,"f")[r]&&delete he(this,_R,"f")[r];let i={};return he(this,FC,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Mr("<string>",[e],arguments.length),he(this,nn,"f").hiddenOptions.push(e),this}implies(e,r){return Mr("<string|object> [number|string|array]",[e,r],arguments.length),he(this,ac,"f").implies(e,r),this}locale(e){return Mr("[string]",[e],arguments.length),e===void 0?(this[C1e](),he(this,Vn,"f").y18n.getLocale()):(Fr(this,wR,!1,"f"),he(this,Vn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return he(this,xh,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Mr("<string|object|array> [number]",[e,r],arguments.length),this[JB](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Mr("<array|string>",[e],arguments.length),this[OT]("normalize",e),this}number(e){return Mr("<array|string>",[e],arguments.length),this[OT]("number",e),this[NR](e),this}option(e,r){if(Mr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[NR](e),he(this,OC,"f")&&(e==="version"||r?.alias==="version")&&this[vVe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),he(this,nn,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(he(this,nn,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=he(this,ai,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Mr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[xVe](),typeof e>"u"&&(e=he(this,FT,"f")),typeof r=="object"&&(Fr(this,SR,r,"f"),r=n),typeof r=="function"&&(Fr(this,Up,r,"f"),r=!1),r||Fr(this,FT,e,"f"),he(this,Up,"f")&&Fr(this,vh,!1,"f");let i=this[zO](e,!!r),o=this.parsed;return he(this,Ch,"f").setParsed(this.parsed),ia(i)?i.then(a=>(he(this,Up,"f")&&he(this,Up,"f").call(this,he(this,LT,"f"),a,he(this,su,"f")),a)).catch(a=>{throw he(this,Up,"f")&&he(this,Up,"f")(a,this.parsed.argv,he(this,su,"f")),a}).finally(()=>{this[T1e](),this.parsed=o}):(he(this,Up,"f")&&he(this,Up,"f").call(this,he(this,LT,"f"),i,he(this,su,"f")),this[T1e](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return ia(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(ia(i))throw new na(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Mr("<object>",[e],arguments.length),Fr(this,YJ,e,"f"),this}pkgConf(e,r){Mr("<string> [string]",[e,r],arguments.length);let n=null,i=this[v1e](r||he(this,TR,"f"));return i[e]&&typeof i[e]=="object"&&(n=$J(i[e],r||he(this,TR,"f"),this[DR]()["deep-merge-config"]||!1,he(this,Vn,"f")),he(this,nn,"f").configObjects=(he(this,nn,"f").configObjects||[]).concat(n)),this}positional(e,r){Mr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=NT(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=he(this,VO,"f").fullCommands[he(this,VO,"f").fullCommands.length-1],o=i?he(this,Nc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return VB(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,he(this,ai,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Mr("[boolean]",[e],arguments.length),Fr(this,KJ,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Mr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&he(this,nn,"f").narg[e]?this:(this[JB](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Mr("[string] [string]",[e,r],arguments.length),e=e||this.$0,he(this,YB,"f").log(he(this,Ch,"f").generateCompletionScript(e,r||he(this,Op,"f")||"completion")),this}showHelp(e){if(Mr("[string|function]",[e],arguments.length),Fr(this,Qp,!0,"f"),!he(this,ai,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[zO](he(this,FT,"f"),void 0,void 0,0,!0);if(ia(n))return n.then(()=>{he(this,ai,"f").showHelp(e)}),this}let r=he(this,Nc,"f").runDefaultBuilderOn(this);if(ia(r))return r.then(()=>{he(this,ai,"f").showHelp(e)}),this}return he(this,ai,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Mr("[boolean|string] [string]",[e,r],arguments.length),he(this,ai,"f").showHelpOnFail(e,r),this}showVersion(e){return Mr("[string|function]",[e],arguments.length),he(this,ai,"f").showVersion(e),this}skipValidation(e){return Mr("<array|string>",[e],arguments.length),this[OT]("skipValidation",e),this}strict(e){return Mr("[boolean]",[e],arguments.length),Fr(this,RR,e!==!1,"f"),this}strictCommands(e){return Mr("[boolean]",[e],arguments.length),Fr(this,kR,e!==!1,"f"),this}strictOptions(e){return Mr("[boolean]",[e],arguments.length),Fr(this,PR,e!==!1,"f"),this}string(e){return Mr("<array|string>",[e],arguments.length),this[OT]("string",e),this[NR](e),this}terminalWidth(){return Mr([],0),he(this,Vn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Mr("<object>",[e],arguments.length),Fr(this,wR,!1,"f"),he(this,Vn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Mr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Tf(e,null,he(this,Vn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new na(".usage() description must start with $0 if being used as alias for .command()")}else return he(this,ai,"f").usage(e),this}usageConfiguration(e){return Mr("<object>",[e],arguments.length),Fr(this,JJ,e,"f"),this}version(e,r,n){let i="version";if(Mr("[boolean|string] [string] [string]",[e,r,n],arguments.length),he(this,OC,"f")&&(this[y1e](he(this,OC,"f")),he(this,ai,"f").version(void 0),Fr(this,OC,null,"f")),arguments.length===0)n=this[IVe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Fr(this,OC,typeof e=="string"?e:i,"f"),r=r||he(this,ai,"f").deferY18nLookup("Show version number"),he(this,ai,"f").version(n||void 0),this.boolean(he(this,OC,"f")),this.describe(he(this,OC,"f"),r),this}wrap(e){return Mr("<number|null|undefined>",[e],arguments.length),he(this,ai,"f").wrap(e),this}[(Nc=new WeakMap,TR=new WeakMap,VO=new WeakMap,Ch=new WeakMap,Op=new WeakMap,WJ=new WeakMap,LT=new WeakMap,wR=new WeakMap,jJ=new WeakMap,vh=new WeakMap,GJ=new WeakMap,xh=new WeakMap,FC=new WeakMap,Qp=new WeakMap,Eh=new WeakMap,VJ=new WeakMap,YB=new WeakMap,su=new WeakMap,nn=new WeakMap,zJ=new WeakMap,YJ=new WeakMap,Up=new WeakMap,SR=new WeakMap,KB=new WeakMap,_R=new WeakMap,FT=new WeakMap,KJ=new WeakMap,Vn=new WeakMap,RR=new WeakMap,kR=new WeakMap,PR=new WeakMap,ai=new WeakMap,JJ=new WeakMap,OC=new WeakMap,ac=new WeakMap,yVe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[CVe](){return{log:s((...e)=>{this[XJ]()||console.log(...e),Fr(this,Qp,!0,"f"),he(this,su,"f").length&&Fr(this,su,he(this,su,"f")+`
`,"f"),Fr(this,su,he(this,su,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[XJ]()||console.error(...e),Fr(this,Qp,!0,"f"),he(this,su,"f").length&&Fr(this,su,he(this,su,"f")+`
`,"f"),Fr(this,su,he(this,su,"f")+e.join(" "),"f")},"error")}}[y1e](e){VB(he(this,nn,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=he(this,nn,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete he(this,ai,"f").getDescriptions()[e]}[vVe](e,r,n){he(this,jJ,"f")[n]||(he(this,Vn,"f").process.emitWarning(e,r),he(this,jJ,"f")[n]=!0)}[xVe](){he(this,GJ,"f").push({options:he(this,nn,"f"),configObjects:he(this,nn,"f").configObjects.slice(0),exitProcess:he(this,vh,"f"),groups:he(this,FC,"f"),strict:he(this,RR,"f"),strictCommands:he(this,kR,"f"),strictOptions:he(this,PR,"f"),completionCommand:he(this,Op,"f"),output:he(this,su,"f"),exitError:he(this,LT,"f"),hasOutput:he(this,Qp,"f"),parsed:this.parsed,parseFn:he(this,Up,"f"),parseContext:he(this,SR,"f")}),he(this,ai,"f").freeze(),he(this,ac,"f").freeze(),he(this,Nc,"f").freeze(),he(this,xh,"f").freeze()}[EVe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(he(this,Vn,"f").process.argv()[0])?r=he(this,Vn,"f").process.argv().slice(1,2):r=he(this,Vn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[MVe](he(this,TR,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),he(this,Vn,"f").getEnv("_")&&he(this,Vn,"f").getProcessArgvBin()===he(this,Vn,"f").getEnv("_")&&(e=he(this,Vn,"f").getEnv("_").replace(`${he(this,Vn,"f").path.dirname(he(this,Vn,"f").process.execPath())}/`,"")),e}[DR](){return he(this,YJ,"f")}[bVe](){return he(this,JJ,"f")}[C1e](){if(!he(this,wR,"f"))return;let e=he(this,Vn,"f").getEnv("LC_ALL")||he(this,Vn,"f").getEnv("LC_MESSAGES")||he(this,Vn,"f").getEnv("LANG")||he(this,Vn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[IVe](){return this[v1e]().version||"unknown"}[TVe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)he(this,Vn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[v1e](e){let r=e||"*";if(he(this,KB,"f")[r])return he(this,KB,"f")[r];let n={};try{let i=e||he(this,Vn,"f").mainFilename;!e&&he(this,Vn,"f").path.extname(i)&&(i=he(this,Vn,"f").path.dirname(i));let o=he(this,Vn,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});Tf(o,void 0,he(this,Vn,"f")),n=JSON.parse(he(this,Vn,"f").readFileSync(o,"utf8"))}catch{}return he(this,KB,"f")[r]=n||{},he(this,KB,"f")[r]}[OT](e,r){r=[].concat(r),r.forEach(n=>{n=this[b1e](n),he(this,nn,"f")[e].push(n)})}[JB](e,r,n,i){this[E1e](e,r,n,i,(o,a,c)=>{he(this,nn,"f")[o][a]=c})}[x1e](e,r,n,i){this[E1e](e,r,n,i,(o,a,c)=>{he(this,nn,"f")[o][a]=(he(this,nn,"f")[o][a]||[]).concat(c)})}[E1e](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of VB(n))e(a,n[a]);else o(r,this[b1e](n),i)}[b1e](e){return e==="__proto__"?"___proto___":e}[I1e](e,r){return this[JB](this[I1e].bind(this),"key",e,r),this}[T1e](){var e,r,n,i,o,a,c,l,u,f,p,m;let h=he(this,GJ,"f").pop();Tf(h,void 0,he(this,Vn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,m=this,{options:{set value(A){Fr(e,nn,A,"f")}}.value,configObjects:g,exitProcess:{set value(A){Fr(r,vh,A,"f")}}.value,groups:{set value(A){Fr(n,FC,A,"f")}}.value,output:{set value(A){Fr(i,su,A,"f")}}.value,exitError:{set value(A){Fr(o,LT,A,"f")}}.value,hasOutput:{set value(A){Fr(a,Qp,A,"f")}}.value,parsed:this.parsed,strict:{set value(A){Fr(c,RR,A,"f")}}.value,strictCommands:{set value(A){Fr(l,kR,A,"f")}}.value,strictOptions:{set value(A){Fr(u,PR,A,"f")}}.value,completionCommand:{set value(A){Fr(f,Op,A,"f")}}.value,parseFn:{set value(A){Fr(p,Up,A,"f")}}.value,parseContext:{set value(A){Fr(m,SR,A,"f")}}.value}=h,he(this,nn,"f").configObjects=g,he(this,ai,"f").unfreeze(),he(this,ac,"f").unfreeze(),he(this,Nc,"f").unfreeze(),he(this,xh,"f").unfreeze()}[wVe](e,r){return IR(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[SVe].bind(this),getContext:this[_Ve].bind(this),getHasOutput:this[RVe].bind(this),getLoggerInstance:this[kVe].bind(this),getParseContext:this[PVe].bind(this),getParserConfiguration:this[DR].bind(this),getUsageConfiguration:this[bVe].bind(this),getUsageInstance:this[DVe].bind(this),getValidationInstance:this[BVe].bind(this),hasParseCallback:this[XJ].bind(this),isGlobalContext:this[NVe].bind(this),postProcess:this[BR].bind(this),reset:this[w1e].bind(this),runValidation:this[S1e].bind(this),runYargsParserAndExecuteCommands:this[zO].bind(this),setHasOutput:this[LVe].bind(this)}}[SVe](){return he(this,Nc,"f")}[_Ve](){return he(this,VO,"f")}[RVe](){return he(this,Qp,"f")}[kVe](){return he(this,YB,"f")}[PVe](){return he(this,SR,"f")||{}}[DVe](){return he(this,ai,"f")}[BVe](){return he(this,ac,"f")}[XJ](){return!!he(this,Up,"f")}[NVe](){return he(this,VJ,"f")}[BR](e,r,n,i){return n||ia(e)||(r||(e=this[yVe](e)),(this[DR]()["parse-positional-numbers"]||this[DR]()["parse-positional-numbers"]===void 0)&&(e=this[TVe](e)),i&&(e=bR(e,this,he(this,xh,"f").getMiddleware(),!1))),e}[w1e](e={}){Fr(this,nn,he(this,nn,"f")||{},"f");let r={};r.local=he(this,nn,"f").local||[],r.configObjects=he(this,nn,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(he(this,_R,"f"),Object.keys(he(this,FC,"f")).reduce((a,c)=>{let l=he(this,FC,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),Fr(this,FC,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(he(this,nn,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=NT(he(this,nn,"f")[a],c=>!n[c])}),r.envPrefix=he(this,nn,"f").envPrefix,Fr(this,nn,r,"f"),Fr(this,ai,he(this,ai,"f")?he(this,ai,"f").reset(n):uVe(this,he(this,Vn,"f")),"f"),Fr(this,ac,he(this,ac,"f")?he(this,ac,"f").reset(n):gVe(this,he(this,ai,"f"),he(this,Vn,"f")),"f"),Fr(this,Nc,he(this,Nc,"f")?he(this,Nc,"f").reset():aVe(he(this,ai,"f"),he(this,ac,"f"),he(this,xh,"f"),he(this,Vn,"f")),"f"),he(this,Ch,"f")||Fr(this,Ch,pVe(this,he(this,ai,"f"),he(this,Nc,"f"),he(this,Vn,"f")),"f"),he(this,xh,"f").reset(),Fr(this,Op,null,"f"),Fr(this,su,"","f"),Fr(this,LT,null,"f"),Fr(this,Qp,!1,"f"),this.parsed=!1,this}[MVe](e,r){return he(this,Vn,"f").path.relative(e,r)}[zO](e,r,n,i=0,o=!1){let a=!!n||o;e=e||he(this,FT,"f"),he(this,nn,"f").__=he(this,Vn,"f").y18n.__,he(this,nn,"f").configuration=this[DR]();let c=!!he(this,nn,"f").configuration["populate--"],l=Object.assign({},he(this,nn,"f").configuration,{"populate--":!0}),u=he(this,Vn,"f").Parser.detailed(e,Object.assign({},he(this,nn,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,he(this,SR,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(f).forEach(A=>{A===he(this,Eh,"f")&&f[A]?h=!0:A===he(this,OC,"f")&&f[A]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&he(this,ai,"f").clearCachedHelpMessage();try{if(this[C1e](),r)return this[BR](f,c,!!n,!1);he(this,Eh,"f")&&[he(this,Eh,"f")].concat(m[he(this,Eh,"f")]||[]).filter(S=>S.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),h=!0),Fr(this,VJ,!1,"f");let A=he(this,Nc,"f").getCommands(),y=he(this,Ch,"f").completionKey in f,E=h||y||o;if(f._.length){if(A.length){let b;for(let S=i||0,R;f._[S]!==void 0;S++)if(R=String(f._[S]),A.includes(R)&&R!==he(this,Op,"f")){let B=he(this,Nc,"f").runCommand(R,this,u,S+1,o,h||g||o);return this[BR](B,c,!!n,!1)}else if(!b&&R!==he(this,Op,"f")){b=R;break}!he(this,Nc,"f").hasDefaultCommand()&&he(this,KJ,"f")&&b&&!E&&he(this,ac,"f").recommendCommands(b,A)}he(this,Op,"f")&&f._.includes(he(this,Op,"f"))&&!y&&(he(this,vh,"f")&&MT(!0),this.showCompletionScript(),this.exit(0))}if(he(this,Nc,"f").hasDefaultCommand()&&!E){let b=he(this,Nc,"f").runCommand(null,this,u,0,o,h||g||o);return this[BR](b,c,!!n,!1)}if(y){he(this,vh,"f")&&MT(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${he(this,Ch,"f").completionKey}`)+1);return he(this,Ch,"f").getCompletion(b,(S,R)=>{if(S)throw new na(S.message);(R||[]).forEach(B=>{he(this,YB,"f").log(B)}),this.exit(0)}),this[BR](f,!c,!!n,!1)}if(he(this,Qp,"f")||(h?(he(this,vh,"f")&&MT(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(he(this,vh,"f")&&MT(!0),a=!0,he(this,ai,"f").showVersion("log"),this.exit(0))),!a&&he(this,nn,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>he(this,nn,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new na(u.error.message);if(!y){let b=this[S1e](m,{},u.error);n||(p=bR(f,this,he(this,xh,"f").getMiddleware(),!0)),p=this[wVe](b,p??f),ia(p)&&!n&&(p=p.then(()=>bR(f,this,he(this,xh,"f").getMiddleware(),!1)))}}}catch(A){if(A instanceof na)he(this,ai,"f").fail(A.message,A);else throw A}return this[BR](p??f,c,!!n,!0)}[S1e](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new na(n.message);he(this,ac,"f").nonOptionCount(a),he(this,ac,"f").requiredArguments(a,o);let c=!1;he(this,kR,"f")&&(c=he(this,ac,"f").unknownCommands(a)),he(this,RR,"f")&&!c?he(this,ac,"f").unknownArguments(a,e,r,!!i):he(this,PR,"f")&&he(this,ac,"f").unknownArguments(a,e,{},!1,!1),he(this,ac,"f").limitedChoices(a),he(this,ac,"f").implications(a),he(this,ac,"f").conflicting(a)}}[LVe](){Fr(this,Qp,!0,"f")}[NR](e){if(typeof e=="string")he(this,nn,"f").key[e]=!0;else for(let r of e)he(this,nn,"f").key[r]=!0}};function cVe(t){return!!t&&typeof t.getInternalMethods=="function"}s(cVe,"isYargsInstance");var sWt=FVe(rVe),OVe=sWt;d();d();d();var QVe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function UVe(t,e,r){let n=Gr.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,QVe.NewGitHubLogin,n)}s(UVe,"telemetryNewGitHubLogin");function qVe(t,e){let r=Gr.createAndMarkAsIssued({authType:e});return Bt(t,QVe.GitHubLoginSuccess,r)}s(qVe,"telemetryGitHubLoginSuccess");var R1e=class extends xa{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function aWt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...Ap(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get($r).fetch(o,n)}catch(a){throw a instanceof Error&&i6(a)?new xa(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new xa(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(aWt,"requestDeviceFlowStage1");async function cWt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...Ap(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get($r).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new R1e(a):new xa(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(cWt,"requestDeviceFlowStage2");async function lWt(t,e){qVe(t,"deviceFlow");let n=await(await zm(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new xa(`Error retrieving user information: ${String(n.errors)}`);return n}s(lWt,"requestUserInfo");var wf=class{constructor(e){this.ctx=e;this.pendingSignIn=void 0}static{s(this,"GitHubDeviceFlow")}get authManager(){return this.ctx.get(Yi)}get authPersistence(){return this.ctx.get(uA)}async save(e){let r=new URL(e.serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e.accessToken,user:e.login,githubAppId:e.githubAppId,authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n,freshSignIn:n})}async initiate(e,r){let n=e?.githubAppId??this.ctx.get(ru).findAppIdToAuthenticate();r??=this.authManager.getConfiguredUrls();try{let i=await this.getTokenUnguarded(n,r),o=i.waitForAuth.then(async a=>(this.ctx.get(ru).githubAppId=n,await this.save(a)));return o.catch(()=>{}),this.pendingSignIn={verificationUri:i.verification_uri,status:o},i}catch(i){throw this.ctx.get(lf).notifyUser(this.ctx,i),i}}async abandon(){let{serverUrl:e}=this.authManager.getConfiguredUrls(),r=new URL(e).hostname;await this.authPersistence.deleteAuthRecord({authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n})}async getTokenUnguarded(e,r){let n=this.ctx;UVe(n,"unknown","deviceFlow");let i=await aWt(n,e,r),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(f=>setTimeout(f,1e3*l));let u=await cWt(n,i.device_code,e,r);if(a-=l,c=u.access_token,c){let f=await lWt(n,{...r,accessToken:c});return{...r,githubAppId:e,login:f.login,accessToken:c}}l=u.interval??l}throw new xa("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};d();var Sf=class{static{s(this,"CitationManager")}},ZJ=class extends Sf{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var uWt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Cs=class{constructor(){this.capabilities={...uWt};this.emitter=new ja;this.onDidSetCapabilities=this.emitter.event}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};d();d();d();d();function k1e(t,e){let r=SA(t,e);return r===-1?void 0:t[r]}s(k1e,"findLastMonotonous");function SA(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(SA,"findLastIdxMonotonous");function XB(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(XB,"findFirstIdxMonotonousOrArrLen");var HVe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=SA(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var P1e=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?eX.isErrorNoTelemetry(e)?new eX(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},$Ve=new P1e;function MR(t){$Ve.onUnexpectedError(t)}s(MR,"onBugIndicatingError");function ZB(t){dWt(t)||$Ve.onUnexpectedError(t)}s(ZB,"onUnexpectedError");var D1e="Canceled";function dWt(t){return t instanceof QC?!0:t instanceof Error&&t.name===D1e&&t.message===D1e}s(dWt,"isCancellationError");var QC=class extends Error{static{s(this,"CancellationError")}constructor(){super(D1e),this.name=this.message}};function YO(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(YO,"illegalArgument");function WVe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(WVe,"illegalState");var eX=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},xn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function e3(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(e3,"equals");function*LR(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(LR,"groupAdjacentBy");function GVe(t){return t.filter(e=>!!e)}s(GVe,"coalesce");var VVe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(VVe||={});function bh(t,e){return(r,n)=>e(t(r),t(n))}s(bh,"compareBy");var Ih=s((t,e)=>t-e,"numberComparator");var tX=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},jVe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||VVe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function KO(t,e){return t.reduce((r,n)=>r+e(n),0)}s(KO,"sumBy");d();function JVe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(JVe,"groupBy");var YVe,KVe,zVe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[YVe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(KVe=Symbol.iterator,YVe=Symbol.toStringTag,KVe)](){return this.values()}};d();function B1e(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(B1e,"createSingleCallFunction");d();var N1e;(S=>{function t(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}S.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}S.empty=r,s(r,"empty");function*n(R){yield R}S.single=n,s(n,"single");function i(R){return t(R)?R:n(R)}S.wrap=i,s(i,"wrap");function o(R){return R||e}S.from=o,s(o,"from");function*a(R){for(let B=R.length-1;B>=0;B--)yield R[B]}S.reverse=a,s(a,"reverse");function c(R){return!R||R[Symbol.iterator]().next().done===!0}S.isEmpty=c,s(c,"isEmpty");function l(R){return R[Symbol.iterator]().next().value}S.first=l,s(l,"first");function u(R,B){let L=0;for(let O of R)if(B(O,L++))return!0;return!1}S.some=u,s(u,"some");function f(R,B){for(let L of R)if(B(L))return L}S.find=f,s(f,"find");function*p(R,B){for(let L of R)B(L)&&(yield L)}S.filter=p,s(p,"filter");function*m(R,B){let L=0;for(let O of R)yield B(O,L++)}S.map=m,s(m,"map");function*h(R,B){let L=0;for(let O of R)yield*B(O,L++)}S.flatMap=h,s(h,"flatMap");function*g(...R){for(let B of R)yield*B}S.concat=g,s(g,"concat");function A(R,B,L){let O=L;for(let K of R)O=B(O,K);return O}S.reduce=A,s(A,"reduce");function*y(R,B,L=R.length){for(B<-R.length&&(B=0),B<0&&(B+=R.length),L<0?L+=R.length:L>R.length&&(L=R.length);B<L;B++)yield R[B]}S.slice=y,s(y,"slice");function E(R,B=Number.POSITIVE_INFINITY){let L=[];if(B===0)return[L,R];let O=R[Symbol.iterator]();for(let K=0;K<B;K++){let V=O.next();if(V.done)return[L,S.empty()];L.push(V.value)}return[L,{[Symbol.iterator](){return O}}]}S.consume=E,s(E,"consume");async function b(R){let B=[];for await(let L of R)B.push(L);return Promise.resolve(B)}S.asyncToArray=b,s(b,"asyncToArray")})(N1e||={});d();var M1e=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function pWt(t){return Array.isArray(t)}s(pWt,"isEntries");var ZVe,rX=class t{constructor(e,r){this[ZVe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(pWt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new M1e(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(ZVe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},eze,XVe=class{constructor(e,r){this[eze]="ResourceSet";!e||typeof e=="function"?this._map=new rX(e):(this._map=new rX(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(eze=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var tze,L1e=class{constructor(){this[tze]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(tze=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},F1e=class extends L1e{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},t3=class extends F1e{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var nX=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var mWt=!1,r3=null;var rze=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new nX;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(bh(l=>l.idx,Ih));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),A=JVe([...g].map(y=>i(y)[p]),y=>y);delete A[u[p]];for(let[y,E]of Object.entries(A))f.unshift(`    - stacktraces of ${E.length} other leaks continue with ${y}`);f.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function hWt(t){r3=t}s(hWt,"setDisposableTracker");if(mWt){let t="__is_disposable_tracked__";hWt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ss.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ss.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function n3(t){return r3?.trackDisposable(t),t}s(n3,"trackDisposable");function i3(t){r3?.markAsDisposed(t)}s(i3,"markAsDisposed");function O1e(t,e){r3?.setParent(t,e)}s(O1e,"setParentOfDisposable");function gWt(t,e){if(r3)for(let r of t)r3.setParent(r,e)}s(gWt,"setParentOfDisposables");function nze(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(nze,"isDisposable");function iX(t){if(N1e.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(iX,"dispose");function ize(...t){let e=Mc(()=>iX(t));return gWt(t,e),e}s(ize,"combinedDisposable");function Mc(t){let e=n3({dispose:B1e(()=>{i3(e),t()})});return e}s(Mc,"toDisposable");var Ju=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;n3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(i3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{iX(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return O1e(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),O1e(e,null))}},Ss=class{constructor(){this._store=new Ju;n3(this),O1e(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){i3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Th=class extends Ss{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(Ps(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var oze=Ne(require("events"));var oX="CompletionRequested",UC=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new oze.default;notifyRequest(e,r,n,i,o){return this.#e.emit(oX,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=eu(this.ctx,e,`event.${oX}`);return this.#e.on(oX,r),vn.Disposable.create(()=>this.#e.off(oX,r))}};d();var Q1e=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},o3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Q1e(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var sX=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=cze(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=sze(n.text,!1,o);if(l-c===f.length)for(let m=0,h=f.length;m<h;m++)u[m+c+1]=f[m];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+f.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=sze(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&aze(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},QT;(function(t){function e(i,o,a,c){return new sX(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof sX)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=U1e(o.map(AWt),(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(QT||(QT={}));function U1e(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);U1e(n,e),U1e(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(U1e,"mergeSort");function sze(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);aze(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(sze,"computeLineOffsets");function aze(t){return t===13||t===10}s(aze,"isEOL");function cze(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(cze,"getWellformedRange");function AWt(t){let e=cze(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(AWt,"getWellformedEdit");d();var lze;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(lze||(lze={}));var q1e;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(q1e||(q1e={}));var uze;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(uze||(uze={}));var aX;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(aX||(aX={}));var Od;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=aX.MAX_VALUE),i===Number.MAX_VALUE&&(i=aX.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.line)&&Xe.uinteger(i.character)}s(r,"is"),t.is=r})(Od||(Od={}));var Qs;(function(t){function e(n,i,o,a){if(Xe.uinteger(n)&&Xe.uinteger(i)&&Xe.uinteger(o)&&Xe.uinteger(a))return{start:Od.create(n,i),end:Od.create(o,a)};if(Od.is(n)&&Od.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Od.is(i.start)&&Od.is(i.end)}s(r,"is"),t.is=r})(Qs||(Qs={}));var cX;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&(Xe.string(i.uri)||Xe.undefined(i.uri))}s(r,"is"),t.is=r})(cX||(cX={}));var dze;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.targetRange)&&Xe.string(i.targetUri)&&Qs.is(i.targetSelectionRange)&&(Qs.is(i.originSelectionRange)||Xe.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(dze||(dze={}));var H1e;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.numberRange(i.red,0,1)&&Xe.numberRange(i.green,0,1)&&Xe.numberRange(i.blue,0,1)&&Xe.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(H1e||(H1e={}));var fze;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&H1e.is(i.color)}s(r,"is"),t.is=r})(fze||(fze={}));var pze;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.undefined(i.textEdit)||a3.is(i))&&(Xe.undefined(i.additionalTextEdits)||Xe.typedArray(i.additionalTextEdits,a3.is))}s(r,"is"),t.is=r})(pze||(pze={}));var mze;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(mze||(mze={}));var hze;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return Xe.defined(o)&&(u.startCharacter=o),Xe.defined(a)&&(u.endCharacter=a),Xe.defined(c)&&(u.kind=c),Xe.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.startLine)&&Xe.uinteger(i.startLine)&&(Xe.undefined(i.startCharacter)||Xe.uinteger(i.startCharacter))&&(Xe.undefined(i.endCharacter)||Xe.uinteger(i.endCharacter))&&(Xe.undefined(i.kind)||Xe.string(i.kind))}s(r,"is"),t.is=r})(hze||(hze={}));var $1e;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&cX.is(i.location)&&Xe.string(i.message)}s(r,"is"),t.is=r})($1e||($1e={}));var gze;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(gze||(gze={}));var Aze;(function(t){t.Unnecessary=1,t.Deprecated=2})(Aze||(Aze={}));var yze;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Xe.string(n.href)}s(e,"is"),t.is=e})(yze||(yze={}));var lX;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return Xe.defined(o)&&(u.severity=o),Xe.defined(a)&&(u.code=a),Xe.defined(c)&&(u.source=c),Xe.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Xe.defined(o)&&Qs.is(o.range)&&Xe.string(o.message)&&(Xe.number(o.severity)||Xe.undefined(o.severity))&&(Xe.integer(o.code)||Xe.string(o.code)||Xe.undefined(o.code))&&(Xe.undefined(o.codeDescription)||Xe.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Xe.string(o.source)||Xe.undefined(o.source))&&(Xe.undefined(o.relatedInformation)||Xe.typedArray(o.relatedInformation,$1e.is))}s(r,"is"),t.is=r})(lX||(lX={}));var s3;(function(t){function e(n,i,...o){let a={title:n,command:i};return Xe.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.title)&&Xe.string(i.command)}s(r,"is"),t.is=r})(s3||(s3={}));var a3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Xe.objectLiteral(a)&&Xe.string(a.newText)&&Qs.is(a.range)}s(i,"is"),t.is=i})(a3||(a3={}));var W1e;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Xe.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(W1e||(W1e={}));var c3;(function(t){function e(r){let n=r;return Xe.string(n)}s(e,"is"),t.is=e})(c3||(c3={}));var Cze;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return a3.is(a)&&(W1e.is(a.annotationId)||c3.is(a.annotationId))}s(i,"is"),t.is=i})(Cze||(Cze={}));var j1e;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&K1e.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(j1e||(j1e={}));var G1e;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(G1e||(G1e={}));var V1e;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Xe.string(i.oldUri)&&Xe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(V1e||(V1e={}));var z1e;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Xe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Xe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(z1e||(z1e={}));var Y1e;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Xe.string(i.kind)?G1e.is(i)||V1e.is(i)||z1e.is(i):j1e.is(i)))}s(e,"is"),t.is=e})(Y1e||(Y1e={}));var vze;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)}s(r,"is"),t.is=r})(vze||(vze={}));var xze;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.integer(i.version)}s(r,"is"),t.is=r})(xze||(xze={}));var K1e;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&(i.version===null||Xe.integer(i.version))}s(r,"is"),t.is=r})(K1e||(K1e={}));var Eze;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.string(i.languageId)&&Xe.integer(i.version)&&Xe.string(i.text)}s(r,"is"),t.is=r})(Eze||(Eze={}));var J1e;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(J1e||(J1e={}));var JO;(function(t){function e(r){let n=r;return Xe.objectLiteral(r)&&J1e.is(n.kind)&&Xe.string(n.value)}s(e,"is"),t.is=e})(JO||(JO={}));var bze;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(bze||(bze={}));var Ize;(function(t){t.PlainText=1,t.Snippet=2})(Ize||(Ize={}));var Tze;(function(t){t.Deprecated=1})(Tze||(Tze={}));var wze;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.newText)&&Qs.is(i.insert)&&Qs.is(i.replace)}s(r,"is"),t.is=r})(wze||(wze={}));var Sze;(function(t){t.asIs=1,t.adjustIndentation=2})(Sze||(Sze={}));var _ze;(function(t){function e(r){let n=r;return n&&(Xe.string(n.detail)||n.detail===void 0)&&(Xe.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(_ze||(_ze={}));var Rze;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(Rze||(Rze={}));var kze;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(kze||(kze={}));var uX;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Xe.string(i)||Xe.objectLiteral(i)&&Xe.string(i.language)&&Xe.string(i.value)}s(r,"is"),t.is=r})(uX||(uX={}));var Pze;(function(t){function e(r){let n=r;return!!n&&Xe.objectLiteral(n)&&(JO.is(n.contents)||uX.is(n.contents)||Xe.typedArray(n.contents,uX.is))&&(r.range===void 0||Qs.is(r.range))}s(e,"is"),t.is=e})(Pze||(Pze={}));var Dze;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(Dze||(Dze={}));var Bze;(function(t){function e(r,n,...i){let o={label:r};return Xe.defined(n)&&(o.documentation=n),Xe.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(Bze||(Bze={}));var Nze;(function(t){t.Text=1,t.Read=2,t.Write=3})(Nze||(Nze={}));var Mze;(function(t){function e(r,n){let i={range:r};return Xe.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(Mze||(Mze={}));var Lze;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Lze||(Lze={}));var Fze;(function(t){t.Deprecated=1})(Fze||(Fze={}));var Oze;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(Oze||(Oze={}));var Qze;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(Qze||(Qze={}));var Uze;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.name)&&Xe.number(i.kind)&&Qs.is(i.range)&&Qs.is(i.selectionRange)&&(i.detail===void 0||Xe.string(i.detail))&&(i.deprecated===void 0||Xe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(Uze||(Uze={}));var qze;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(qze||(qze={}));var dX;(function(t){t.Invoked=1,t.Automatic=2})(dX||(dX={}));var Hze;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.typedArray(i.diagnostics,lX.is)&&(i.only===void 0||Xe.typedArray(i.only,Xe.string))&&(i.triggerKind===void 0||i.triggerKind===dX.Invoked||i.triggerKind===dX.Automatic)}s(r,"is"),t.is=r})(Hze||(Hze={}));var $ze;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):s3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.title)&&(i.diagnostics===void 0||Xe.typedArray(i.diagnostics,lX.is))&&(i.kind===void 0||Xe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||s3.is(i.command))&&(i.isPreferred===void 0||Xe.boolean(i.isPreferred))&&(i.edit===void 0||Y1e.is(i.edit))}s(r,"is"),t.is=r})($ze||($ze={}));var Wze;(function(t){function e(n,i){let o={range:n};return Xe.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(i.range)&&(Xe.undefined(i.command)||s3.is(i.command))}s(r,"is"),t.is=r})(Wze||(Wze={}));var jze;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.uinteger(i.tabSize)&&Xe.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(jze||(jze={}));var Gze;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(i.range)&&(Xe.undefined(i.target)||Xe.string(i.target))}s(r,"is"),t.is=r})(Gze||(Gze={}));var Vze;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(Vze||(Vze={}));var zze;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(zze||(zze={}));var Yze;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Yze||(Yze={}));var Kze;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(Kze||(Kze={}));var Jze;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&Xe.string(i.text)}s(r,"is"),t.is=r})(Jze||(Jze={}));var Xze;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&Xe.boolean(i.caseSensitiveLookup)&&(Xe.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(Xze||(Xze={}));var Zze;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&(Xe.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(Zze||(Zze={}));var eYe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(n.stoppedLocation)}s(r,"is"),t.is=r})(eYe||(eYe={}));var X1e;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(X1e||(X1e={}));var Z1e;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&(i.tooltip===void 0||Xe.string(i.tooltip)||JO.is(i.tooltip))&&(i.location===void 0||cX.is(i.location))&&(i.command===void 0||s3.is(i.command))}s(r,"is"),t.is=r})(Z1e||(Z1e={}));var tYe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Od.is(i.position)&&(Xe.string(i.label)||Xe.typedArray(i.label,Z1e.is))&&(i.kind===void 0||X1e.is(i.kind))&&i.textEdits===void 0||Xe.typedArray(i.textEdits,a3.is)&&(i.tooltip===void 0||Xe.string(i.tooltip)||JO.is(i.tooltip))&&(i.paddingLeft===void 0||Xe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Xe.boolean(i.paddingRight))}s(r,"is"),t.is=r})(tYe||(tYe={}));var rYe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(rYe||(rYe={}));var nYe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(nYe||(nYe={}));var iYe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(iYe||(iYe={}));var oYe;(function(t){t.Invoked=0,t.Automatic=1})(oYe||(oYe={}));var sYe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(sYe||(sYe={}));var aYe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(aYe||(aYe={}));var cYe;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&q1e.is(n.uri)&&Xe.string(n.name)}s(e,"is"),t.is=e})(cYe||(cYe={}));var lYe;(function(t){function e(o,a,c,l){return new eve(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Xe.defined(a)&&Xe.string(a.uri)&&(Xe.undefined(a.languageId)||Xe.string(a.languageId))&&Xe.uinteger(a.lineCount)&&Xe.func(a.getText)&&Xe.func(a.positionAt)&&Xe.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,m=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[m++]=l[f++]:o[m++]=u[p++];for(;f<l.length;)o[m++]=l[f++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(lYe||(lYe={}));var eve=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Od.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Od.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Xe;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,A){return e.call(h)==="[object Number]"&&g<=h&&h<=A}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(h){return e.call(h)==="[object Function]"}s(f,"func"),t.func=f;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Xe||(Xe={}));var vs=class{static{s(this,"LocationFactory")}static{this.range=Qs.create.bind(Qs)}static{this.position=Od.create.bind(Od)}},bx=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=QT.create(e.clientUri,e.clientLanguageId,n,e.getText());return QT.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=QT.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return QT.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=wT({uri:e,languageId:r})){return new t(kl(e),QT.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Qs.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Qs.create(Od.create(r,0),Od.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var XO={isBlocked:!1,reason:"VALID_FILE"},fX={isBlocked:!1,reason:"NO_MATCHING_POLICY"},uYe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},FR={all:"all",repo:"repo"},UT=new Ct("contentExclusion");d();d();var pX=class{static{s(this,"PolicyEvaluator")}};d();d();d();var dYe=new Ct("repository"),OR=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},_A=class{static{s(this,"GitConfigLoader")}},mX=class extends _A{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var fYe=require("os");var hX=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return OI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=OI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,fYe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var gX=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(_A).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new hX(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var yWt=100,tve=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},Ix=class t{constructor(e){this.ctx=e;this.remoteResolver=new gX;this.cache=new wr(yWt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=kd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new tve(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(Mi),i=Vi(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=Vi(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=o2(r,o[1]),c=Vi(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=Vi(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=Vi(a,"commondir");a=o2(a,(await e.readFileString(u)).trimEnd());let f=Vi(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var QR=s((t,e)=>{if(BC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...BC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var AX=new WeakMap;function yX(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&AX.has(t))return AX.get(t);switch(AX.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=yX(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+yX(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+yX(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return AX.set(t,n),n}s(yX,"t");function CX(t){return yX(t,0)}s(CX,"r");var rve=new WeakMap;function pYe(t,e,r=CX(e)){let n,i,o=rve.get(t);o||(rve.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(m){for(;u=n[f++];u.r(m));}s(p,"o"),rve.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[f++],f<=m.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(pYe,"n");var mYe=new WeakMap;function CWt(t,e,r,n=CX(r)){if(e||(e=mYe.get(t)),e||mYe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=pYe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(CWt,"n");function hYe(t,e){return function(r,n){return CWt(t,e,r,n)}}s(hYe,"o");d();var LYe=Ne(_Ye(),1);d();var t7=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var SWt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},r7=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),_Wt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),RYe=s(t=>t.join(""),"rangesToString"),kYe=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let A=t.charAt(o);if((A==="!"||A==="^")&&o===r+1){u=!0,o++;continue}if(A==="]"&&a&&!l){f=o+1;break}if(a=!0,A==="\\"&&!l){l=!0,o++;continue}if(A==="["&&!l){for(let[y,[E,b,S]]of Object.entries(SWt))if(t.startsWith(y,o)){if(p)return["$.",!1,t.length-r,!0];o+=y.length,S?i.push(E):n.push(E),c=c||b;continue e}}if(l=!1,p){A>p?n.push(r7(p)+"-"+r7(A)):A===p&&n.push(r7(A)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(r7(A+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=A,o+=2;continue}n.push(r7(A)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let A=n[0].length===2?n[0].slice(-1):n[0];return[_Wt(A),!1,f-r,!1]}let m="["+(u?"^":"")+RYe(n)+"]",h="["+(u?"":"^")+RYe(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,f-r,!0]},"parseClass");d();var qT=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var RWt=new Set(["!","?","+","*","@"]),PYe=s(t=>RWt.has(t),"isExtglobType"),kWt="(?!(?:^|/)\\.\\.?(?:$|/))",vX="(?!\\.)",PWt=new Set(["[","."]),DWt=new Set(["..","."]),BWt=new Set("().*{}+?[]^$\\!"),NWt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),ove="[^/]",DYe=ove+"*?",BYe=ove+"+?",l3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let A=e.charAt(h++);if(o||A==="\\"){o=!o,g+=A;continue}if(a){h===c+1?(A==="^"||A==="!")&&(l=!0):A==="]"&&!(h===c+2&&l)&&(a=!1),g+=A;continue}else if(A==="["){a=!0,c=h,l=!1,g+=A;continue}if(!i.noext&&PYe(A)&&e.charAt(h)==="("){r.push(g),g="";let y=new t(A,r);h=t.#u(e,y,h,i),r.push(y);continue}g+=A}return r.push(g),h}let u=n+1,f=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(PYe(h)&&e.charAt(u)==="("){f.push(m),m="";let g=new t(h,f);f.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){f.push(m),m="",p.push(f),f=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),f.push(m),m="",r.push(...p,f),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,A,y,E]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||E,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&DWt.has(this.#n[0]))){let g=PWt,A=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),y=!r&&!e&&g.has(u.charAt(0));f=A?kWt:y?vX:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,qT(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,qT(this.toString()),!1,!1]}let a=!n||e||r||!vX?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?vX:"")+BYe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?vX:"")+DYe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,qT(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(BWt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,m]=kYe(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=BYe:o+=DYe,r=!0;continue}if(l==="?"){o+=ove,r=!0;continue}o+=NWt(l)}return[o,qT(e),!!r,a]}};d();var sve=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Lc=s((t,e,r={})=>(t7(e),!r.nocomment&&e.charAt(0)==="#"?!1:new u3(e,r).match(t)),"minimatch"),MWt=/^\*+([^+@!?\*\[\(]*)$/,LWt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),FWt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),OWt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),QWt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),UWt=/^\*+\.\*+$/,qWt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),HWt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),$Wt=/^\.\*+$/,WWt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),jWt=/^\*+$/,GWt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),VWt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),zWt=/^\?+([^+@!?\*\[\(]*)?$/,YWt=s(([t,e=""])=>{let r=FYe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),KWt=s(([t,e=""])=>{let r=OYe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),JWt=s(([t,e=""])=>{let r=OYe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),XWt=s(([t,e=""])=>{let r=FYe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),FYe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),OYe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),QYe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",NYe={win32:{sep:"\\"},posix:{sep:"/"}},ZWt=QYe==="win32"?NYe.win32.sep:NYe.posix.sep;Lc.sep=ZWt;var Sh=Symbol("globstar **");Lc.GLOBSTAR=Sh;var ejt="[^/]",tjt=ejt+"*?",rjt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",njt="(?:(?!(?:\\/|^)\\.).)*?",ijt=s((t,e={})=>r=>Lc(r,t,e),"filter");Lc.filter=ijt;var wh=s((t,e={})=>Object.assign({},t,e),"ext"),ojt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Lc;let e=Lc;return Object.assign(s((n,i,o={})=>e(n,i,wh(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,wh(t,o))}static defaults(i){return e.defaults(wh(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,wh(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,wh(t,o))}},unescape:s((n,i={})=>e.unescape(n,wh(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,wh(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,wh(t,i)),"filter"),defaults:s(n=>e.defaults(wh(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,wh(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,wh(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,wh(t,o)),"match"),sep:e.sep,GLOBSTAR:Sh})},"defaults");Lc.defaults=ojt;var UYe=s((t,e={})=>(t7(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,LYe.default)(t)),"braceExpand");Lc.braceExpand=UYe;var sjt=s((t,e={})=>new u3(t,e).makeRe(),"makeRe");Lc.makeRe=sjt;var ajt=s((t,e,r={})=>{let n=new u3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Lc.match=ajt;var MYe=/[?*]|[+@!]\(.*?\)|\[|\]/,cjt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),u3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){t7(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||QYe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!MYe.test(o[2]))&&!MYe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let A=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!A&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),E=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!E&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),S=y?3:A?0:void 0,R=b?3:E?0:void 0;if(typeof S=="number"&&typeof R=="number"){let[B,L]=[e[S],r[R]];B.toLowerCase()===L.toLowerCase()&&(r[R]=B,R>S?r=r.slice(R):S>R&&(e=e.slice(S)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===Sh){this.debug("GLOBSTAR",[r,f,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let A;if(typeof f=="string"?(A=p===f,this.debug("string match",f,p,A)):(A=f.test(p),this.debug("pattern match",f,p,A)),!A)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return UYe(this.pattern,this.options)}parse(e){t7(e);let r=this.options;if(e==="**")return Sh;if(e==="")return"";let n,i=null;(n=e.match(jWt))?i=r.dot?VWt:GWt:(n=e.match(MWt))?i=(r.nocase?r.dot?QWt:OWt:r.dot?FWt:LWt)(n[1]):(n=e.match(zWt))?i=(r.nocase?r.dot?KWt:YWt:r.dot?JWt:XWt)(n):(n=e.match(UWt))?i=r.dot?HWt:qWt:(n=e.match($Wt))&&(i=WWt);let o=l3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?tjt:r.dot?rjt:njt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?cjt(f):f===Sh?Sh:f._src});return u.forEach((f,p)=>{let m=u[p+1],h=u[p-1];f!==Sh||h===Sh||(h===void 0?m!==void 0&&m!==Sh?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==Sh&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=Sh))}),u.filter(f=>f!==Sh).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Lc.defaults(e).Minimatch}};Lc.AST=l3;Lc.Minimatch=u3;Lc.escape=sve;Lc.unescape=qT;var ave="contentExclusion",xX=class extends pX{static{s(this,"CopilotContentExclusion")}#e;#t=new wr(1e4);#i=new wr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=o2(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??FR.all);if(!i)return fX;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return UT.exception(this.#e,n,`${ave}.evaluate`),uYe}return XO}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=XO,a,c=nme(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(Lc(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=cve(l,"FILE_BLOCKED_PATH"),a=u;break e}return UT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return XO;let a=this.evaluateFileContent(i,o,n);return UT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>qYe(a)).some(a=>a.test(n)))return cve(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>qYe(a)).some(a=>a.test(n)))return cve(i,"FILE_BLOCKED_TEXT_BASED");return XO}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){qa(this.#e,e,`${ave}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=hYe(async e=>{let r=await this.#e.get(Br).getGitHubSession();if(!r)throw new xa("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(FR.all);e.filter(u=>u!==FR.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==FR.all).join(",")),i.searchParams.set("scope",o?FR.all:FR.repo);let c=await zm(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new fC(c)}return this.#s("fetch.success"),QR(fjt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(Ix).getRepo(kd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${ave}.${e}`,Gr.createAndMarkAsIssued(r,n))}};function qYe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(qYe,"stringToRegex");function cve(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(cve,"fileBlockedEvaluationResult");var ljt=x.Object({name:x.String(),type:x.String()}),ujt=x.Object({paths:x.Array(x.String()),ifNoneMatch:x.Optional(x.Array(x.String())),ifAnyMatch:x.Optional(x.Array(x.String())),source:ljt}),lve=x.Array(ujt),djt=x.Object({rules:lve,last_updated_at:x.String(),scope:x.String()}),fjt=x.Array(djt);var ll=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new xX(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Cr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");let r=eu(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(Cr).onDidFocusTextDocument(r),Ps(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=performance.now(),p=await u.evaluate(e,r),m=performance.now();return i.push({key:l,result:p,elapsedMs:Math.round(m-f)}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){UT.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(So).setInactive(r??"Copilot is disabled"):this.ctx.get(So).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===fX.reason)return UT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={contentExclusionEvalMs:i};return Bt(this.ctx,e,Gr.createAndMarkAsIssued(c,l)),Bt(this.ctx,e,Gr.createAndMarkAsIssued({...c,path:r},l),1),UT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function Tx(t,e,r){let n=await t.get(ll).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(Tx,"isDocumentValid");var Cr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await Tx(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=kl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return Tx(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Mi).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Mi).readFileString(e)}getWorkspaceFolder(e){let r=kl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(kl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=kl(e.uri);for(let n of this.getWorkspaceFolders()){let i=kl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Pi(r)}};function oa(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(oa,"statusFromTextDocumentResult");var En=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Cr).getRelativePath(e)??Pi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Cr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await Tx(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:bx.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Mi).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Mi).stat(e)).size/1024/1024}};d();d();var _h=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function qC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(qC,"delay");d();var uve=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},EX=class extends uve{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var E0=class{constructor(e){this.ctx=e;this.#e=new Ct("AsyncCompletionManager");this.requests=new wr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(dve(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new EX;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Mt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new _h,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(dve(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:m}=f.choice;if(!m.startsWith(p)||m.length<=p.length){l(f.headerRequestId)();return}m=m.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...f.choice,completionText:m},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)dve(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function dve(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(dve,"isCandidate");d();d();var i7=class{constructor(e){this.maxSize=e;this.root=new n7;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new n7;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new n7;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},n7=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var RA=class{constructor(){this.cache=new i7(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new i7(100)}};d();d();d();d();var wx={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function HYe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let A;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?A=.03507251990078782:t[2]>14.500000000000002?A=.004905698363309292:t[8]>2421.5000000000005?A=-.10306119951984316:A=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?A=-.08503171085833393:A=.015130974593044409:A=-.024425267075198206:A=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?A=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?A=.09908783187786288:A=-.06920877329925636:t[8]>241.50000000000003?A=-.016756131804203496:t[9]>33.50000000000001?A=.04903179955263626:t[217]>1e-35?A=-.047416847619291644:A=-.0017200891991431119:t[39]>1e-35?A=-.10389927604977028:t[134]>1e-35?A=-.050480365434872866:t[178]>1e-35?A=-.05167855791556937:t[8]>2134.5000000000005?A=-.01663197335585307:t[242]>1e-35?A=-.05361323756615453:t[118]>1e-35?A=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?A=-.0016544848369620534:A=.04494144460483587:A=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?A=.051166688553608355:A=-.06623908820705383:t[84]>1e-35?A=-.12990936092409747:t[306]>1e-35?A=-.07020596855118943:t[49]>1e-35?A=.06272964802556856:t[192]>1e-35?A=.06540204627162581:A=.008277910531592885;let y;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?y=.003325460510319164:y=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?y=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?y=.0697359767152808:t[230]>1e-35?y=.06513506845651572:y=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?y=.013616385013146277:y=.04171540100223404:y=-.04360396575094823:t[212]>1e-35?y=.025945477945627522:y=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?y=-.07856453318384411:y=-.014803893522351739:t[39]>1e-35?y=-.09185452630751932:t[149]>1e-35?y=-.07122426086157027:t[134]>1e-35?y=-.04231052091434186:t[227]>1e-35?y=-.029815824273994197:t[50]>1e-35?y=-.15736496271211153:t[222]>1e-35?y=-.02360285356956629:t[128]>1e-35?y=-.03922080193836443:t[136]>1e-35?y=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?y=-.0029736170756835783:y=-.06482902102259112:t[84]>1e-35?y=-.11340924635708383:t[94]>1e-35?y=-.03635703457792193:t[118]>1e-35?y=-.058181913914186034:t[126]>1e-35?y=-.062030576241517366:t[116]>1e-35?y=-.045086301850604006:t[25]>1e-35?y=-.031665223656767286:t[203]>1e-35?y=-.009444685731407691:y=.0112265153772187;let E;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?E=.022717227245241684:E=-.049700413274686266:E=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?E=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?E=-.12263724050601095:E=.0070743478891288035:t[288]>1e-35?E=-.050439138582109:E=.0255701593657891:E=-.005812703740580558:t[6]>49.50000000000001?E=-.008542694147899113:E=.035147383686665:E=-.0960461939274094:t[32]>1e-35?E=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?E=-.01800870272656664:E=-.07817304234604389:t[30]>1e-35?E=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?E=.08778416018479411:E=-.026563982720830256:E=-.05296139548112329:t[50]>1e-35?E=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?E=-.036572140520852024:t[183]>1e-35?E=-.10766853736801459:E=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?E=.09513215942486053:E=-.03641865277445567:t[10]>59.50000000000001?E=.03177172388687933:t[39]>1e-35?E=-.10234241303898953:t[243]>1e-35?E=-.02966738115984321:t[190]>1e-35?E=-.04312785336449181:t[118]>1e-35?E=-.05808521194081524:E=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let S;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?S=-.0024117174588695603:S=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?S=.04575380761203418:S=-.10025595041353463:t[15]>1e-35?S=.17705790384964004:S=.0073813837628615014:S=.07676373681392407:S=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?S=.07078572910026419:t[4]>23.500000000000004?S=.005513918674164821:S=.0206586476926392:t[0]>5269.500000000001?S=.07706773525822633:S=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?S=-.03204783603215824:S=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?S=-.0930246911392012:S=.011173087289703683:t[3]>24.500000000000004?S=.03281421918878597:S=.12449335091369843:t[204]>1e-35?S=.06634531187326123:S=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?S=-.041196758517013515:t[4]>7.500000000000001?S=-2942718111029724e-20:t[4]>6.500000000000001?S=.11953909558532852:S=.03188615019450534:t[122]>1e-35?S=-.0616037324662157:t[101]>1e-35?S=.027230889593349412:t[8]>4968.500000000001?S=-.1113986516540856:t[3]>2.5000000000000004?S=-.002045140426885727:t[129]>1e-35?S=.12641163374304432:S=.014909826232873194;let R;t[308]>1e-35?t[0]>7277.500000000001?R=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?R=-.040884836258675006:t[210]>1e-35?R=-.0003719413278428804:t[13]>1e-35?R=.030287610160818174:R=.011174130013595384:t[1]>38.50000000000001?R=-.0662442170185784:R=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?R=-.08092286307197555:R=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?R=-.1155211149523894:R=-.0032903546638958538:t[149]>1e-35?R=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?R=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?R=-.025416927789760076:R=.02777568919793122:R=-.10310351509769732:R=.013549608903688785:t[186]>1e-35?R=.08513865847420551:R=-.009306721292510369:t[31]>1e-35?R=.009780833952582307:t[23]>1e-35?R=.011143773934157629:t[210]>1e-35?R=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?R=-.04846287537743046:R=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?R=-.034224938681445764:t[8]>1641.5000000000002?R=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?R=-.027950103994861836:R=.14575930827829034:R=-.007124740389354946:t[10]>22.500000000000004?R=.013173304107866726:R=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let L;t[13]>1e-35?t[118]>1e-35?L=.07957905150112207:t[1]>125.50000000000001?L=-.0662620579858685:t[145]>1e-35?L=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?L=-.0009597832580977798:L=-.081474760755753:t[212]>1e-35?L=.03637001492325179:L=.006912305498963309:t[32]>1e-35?L=-.03919900630910754:t[134]>1e-35?L=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?L=.06671440854602108:t[136]>1e-35?L=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?L=.026430947016830915:L=-.04075501264495112:t[9]>93.50000000000001?L=-.04353169430417609:t[50]>1e-35?L=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?L=.068392679163672:t[10]>1.5000000000000002?L=-.0209659792007492:L=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?L=.07254524592323175:L=-.0319087835282534:L=.00037444813327793425:L=-.025138768151370408:t[243]>1e-35?L=-.050010891710502096:t[94]>1e-35?L=-.0817513550778599:t[122]>1e-35?L=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?L=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?L=.1454877641381946:L=.053787998331240316:t[9]>33.50000000000001?L=.08602629796680285:L=-.03895127455803038:L=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let K;t[306]>1e-35?t[149]>1e-35?K=-.1389218965136736:K=-.032218642644416894:t[13]>1e-35?K=.006465035217331847:t[50]>1e-35?K=-.1381687930130022:t[179]>1e-35?K=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?K=-.03262719498763048:K=.023342916702125613:t[191]>1e-35?K=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?K=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?K=-.09989343595668776:K=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?K=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?K=-.09165257825246746:t[9]>32.50000000000001?K=.02484870392366004:K=-.008499493096971395:t[8]>24.500000000000004?K=.02459679192828244:K=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?K=.0015644546318714849:K=-.06579524865022705:K=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?K=.03331853632960164:K=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?K=-.019091477207111116:K=.037878468575478504:t[94]>1e-35?K=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?K=.16919658785098224:t[243]>1e-35?K=-.06580584936754524:K=.01567555159935563:t[129]>1e-35?K=.06721746994993226:t[10]>32.50000000000001?K=-.046394462507797975:K=-.006436180519584767;let V;t[131]>1e-35?V=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?V=.019122095523977856:t[298]>1e-35?V=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?V=-.026094309429557913:t[204]>1e-35?V=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?V=.012643810980689466:V=-.07884161741497837:V=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?V=.04493082949897325:V=.18046359750455776:t[7]>18.500000000000004?V=-.018667348656891496:V=.02584325784698236:V=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?V=.04749240016989375:V=-.0333334578246718:t[5]>3276.5000000000005?V=.11330554740098908:t[7]>94.50000000000001?V=.1296600395033268:V=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?V=-.13787130789142835:t[0]>1847.5000000000002?V=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?V=.028856848462727104:V=-.11197632885851168:V=.08169801342016791:t[1]>22.500000000000004?V=-.021052888644970163:V=.019048604298876753:t[7]>4.500000000000001?V=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?V=.03432638833359197:V=-.0036767863082454973:t[1]>48.50000000000001?V=.03087375270128195:t[2]>3.5000000000000004?V=-.04219917149740248:V=.018818493993207935;let z;t[306]>1e-35?z=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?z=-.09091897542577475:z=.04042943082645558:t[218]>1e-35?z=.056254985867151:z=-.053848117950183044:z=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?z=.021581808008986944:z=-.05639286496176611:z=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?z=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?z=.023885302967553288:z=.1617794086125622:t[212]>1e-35?z=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?z=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?z=.01894935813286188:z=-.06449356357429188:z=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?z=-.034718828212885515:z=.0898976288814321:t[1]>17.500000000000004?z=-.15440137451988326:z=-.03864183216821465:z=.009988507307006308:z=-.08540311947043305:t[50]>1e-35?z=-.13323659732101975:t[134]>1e-35?z=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?z=.08082476177379844:z=-.041665761903645876:t[179]>1e-35?z=-.12405023987936657:t[39]>1e-35?z=-.06247416524997478:t[138]>1e-35?z=-.10724031753676487:z=-.0005423122305122404;let Q;t[308]>1e-35?Q=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?Q=.023223358334607133:Q=-.04383410185346742:Q=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?Q=.023406489302867494:Q=-.085521220804058:Q=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?Q=.028120059780969632:Q=-.04211009474298743:t[294]>1e-35?Q=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?Q=-.0993035220737934:Q=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?Q=.029770210551187937:Q=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?Q=.06421359317599738:Q=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?Q=.024368404612215164:Q=-.04045232374803373:t[131]>1e-35?Q=.017372701982485795:t[120]>1e-35?Q=.08812710275150198:t[18]>1e-35?t[90]>1e-35?Q=.18451364351180236:t[7]>33.50000000000001?Q=-.03850813130183531:t[195]>1e-35?Q=.06966114053446336:t[3]>16.500000000000004?Q=-.0012869181693341211:t[0]>4242.500000000001?Q=-.054625548611291035:Q=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?Q=.006302103427145562:Q=.13967622319898698:t[121]>1e-35?Q=-.038798585213145644:t[5]>4544.500000000001?Q=-.08050498033009466:Q=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let Z;t[183]>1e-35?Z=-.05753337139158443:t[308]>1e-35?Z=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?Z=-.10477869875380448:Z=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?Z=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?Z=-.04442302951713574:Z=.00012409888451734224:Z=-.092199119633697:t[225]>1e-35?Z=.13773072450201831:t[0]>2882.5000000000005?Z=.0028540012229920533:t[298]>1e-35?Z=.07134486044361629:Z=.014297412329837425:t[145]>1e-35?Z=.05608385321902638:t[92]>1e-35?Z=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?Z=-.0039957800609801315:Z=.0776927564241081:t[203]>1e-35?Z=-.05502900859432093:t[105]>1e-35?Z=.06062892720841595:Z=-.009574839629252128:t[31]>1e-35?Z=.009488858841144216:t[23]>1e-35?t[20]>1e-35?Z=.08818126313644752:t[8]>161.50000000000003?Z=.014353968957885408:Z=-.022240738532827903:t[210]>1e-35?Z=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?Z=-.043902062079383485:Z=-.014741559220396223:Z=-.00934935734853194:t[6]>32.50000000000001?Z=.1514593126307404:Z=.010771222510801532:t[10]>22.500000000000004?Z=.01412495209334078:Z=-.08576940379502533;let J;t[0]>384.50000000000006?t[84]>1e-35?J=-.06647690967306838:t[2]>101.50000000000001?J=-.024451334501552457:t[306]>1e-35?J=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?J=.0031858381443673127:J=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?J=-.08601340441214533:t[1]>29.500000000000004?J=.10487598629539963:t[8]>597.5000000000001?J=-.0786529133673238:J=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?J=-.04883600353740688:t[126]>1e-35?J=-.03794042763348827:J=-.003358871967539988:t[210]>1e-35?J=.054991356498447566:t[6]>19.500000000000004?J=-.007418396981635549:J=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?J=-.02143003429501711:J=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?J=-.006636355416244082:J=-.06483095743431454:t[4]>21.500000000000004?J=-.028975965946833545:J=.022012264796522657:J=-.06653648243193663:t[5]>4593.500000000001?J=.01753551428088607:t[217]>1e-35?J=-.028864824937700297:t[94]>1e-35?J=-.04885192273020658:t[279]>1e-35?J=.08105715462329498:t[121]>1e-35?J=-.04576676034750651:J=.004795141324949362:t[1]>42.50000000000001?J=-.047446619702809195:t[145]>1e-35?J=.08400495571952321:J=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let $;t[0]>384.50000000000006?t[84]>1e-35?$=-.06088131453064195:t[147]>1e-35?$=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?$=.04219361472548491:$=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?$=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?$=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?$=-.11431764534511478:$=.013549717238356157:$=-.020987333767091276:t[6]>2.5000000000000004?$=-.02914877855133127:$=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?$=-.10087072787978416:t[37]>1e-35?$=-.030467397753331196:t[229]>1e-35?$=-.1017559811057469:t[4]>20.500000000000004?$=-.00413177742240167:t[20]>1e-35?$=.05213315982685969:$=.0037921635866823133:t[8]>51.50000000000001?$=.07327913092421544:t[6]>49.50000000000001?$=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?$=.02744420891894289:$=.11288946357194463:$=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?$=-.012329314369909049:$=.026816658655600168:$=-.0872405354618811:$=.007872673500247845:t[1]>42.50000000000001?$=-.04309044198258254:t[145]>1e-35?$=.07572529147860785:t[7]>5.500000000000001?$=-.013837187093264945:t[1]>17.500000000000004?$=.04208698439539668:$=-.06284346769019863;let X;t[294]>1e-35?X=-.0384794324818203:t[266]>1e-35?X=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?X=.07432960094940501:X=-.035248735855751855:t[134]>1e-35?X=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?X=-.01706896375068821:X=.08212247914968074:t[2]>59.50000000000001?X=-.09546478958824225:t[6]>53.50000000000001?X=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?X=.02816463285971267:X=.15449139016588445:X=-.10199787406123524:X=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?X=-.13924786681478077:X=-.0072772442570213335:t[39]>1e-35?X=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?X=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?X=-.11174465335620831:X=.00013144040097180107:X=-.08493919336681105:t[42]>1e-35?X=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?X=-.015540659878839153:X=-.14442609417300142:t[21]>1e-35?X=-.025251979447574083:X=.0023698372645272847:t[18]>1e-35?X=.07269739695712212:t[8]>2592.5000000000005?X=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?X=-.01835130329646532:t[9]>45.50000000000001?X=.02023047454629885:X=.16469378262221102:X=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ae;t[183]>1e-35?t[17]>1e-35?ae=.030100940443356424:t[10]>1.5000000000000002?ae=-.10861112216742408:ae=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ae=-.032062878390325456:ae=-.10808232631806887:t[8]>1641.5000000000002?ae=-.06147013392655731:t[4]>12.500000000000002?ae=.03324767551088266:t[145]>1e-35?ae=.028851633810612017:ae=-.054871239091792784:t[134]>1e-35?ae=-.023813968121342108:t[266]>1e-35?ae=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ae=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ae=-.025350325484720576:ae=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ae=.056817276537534815:ae=-.07674158463557636:ae=-.06335553143454145:t[1]>56.50000000000001?ae=.16390494217299284:ae=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ae=.041717597065890205:ae=-.10357913492269129:t[10]>29.500000000000004?ae=.1365512866715726:ae=.020600048310575665:ae=.09708785634773187:ae=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ae=-.03146213719547347:ae=.11784024316238083:ae=-.050940520532045355:ae=-.047988344143075616:t[191]>1e-35?ae=.028764654731460032:ae=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let Ae;t[179]>1e-35?Ae=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ae=.026484626664041125:t[10]>1.5000000000000002?Ae=-.10187000872941615:Ae=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ae=.09574540795390041:Ae=-.06454986703691233:Ae=-.11411849349353141:t[266]>1e-35?Ae=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ae=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ae=-.04403391373512386:Ae=.1132928075412222:t[2]>47.50000000000001?Ae=-.09700191391838056:Ae=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ae=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ae=-.001668912999010927:Ae=-.02363511102970245:t[8]>58.50000000000001?Ae=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ae=.0911011436534449:t[1]>28.500000000000004?Ae=-.07192390493729035:Ae=.06913818091291246:Ae=-.012312625373699222:Ae=.06784496312307986:Ae=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ae=.0026564453057705273:Ae=-.025425772389361445:t[122]>1e-35?Ae=-.12046786388602149:t[0]>3183.5000000000005?Ae=.01162092842804907:t[91]>1e-35?Ae=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ae=-.0001647792543020228:Ae=-.023664538532907665:Ae=.01609078206180752;let Oe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Oe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Oe=-.017696526862422682:Oe=.1450050954613223:Oe=-.05406930069823832:Oe=-.08308700260259043:t[120]>1e-35?Oe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Oe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Oe=.038431826961746934:Oe=-.05937462906539856:t[9]>65.50000000000001?Oe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Oe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Oe=-.09579030954062734:Oe=.025064711572811746:Oe=.02579440518821548:Oe=.1044440128091862:Oe=-.058348633139536844:Oe=.07766788227934436:Oe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Oe=.07463684068207214:Oe=.18244269035484484:t[6]>39.50000000000001?Oe=-.06050050067471004:Oe=.05787759066913493:Oe=.010783225857972171:Oe=.1674891243602606:t[4]>9.500000000000002?Oe=-.004814132027475892:Oe=-.14543299413454813:Oe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Oe=-.07634466313617769:Oe=.0287825335169114:Oe=-.06894721943300268:Oe=-.00023988459059521937;let Te;t[131]>1e-35?t[1]>93.50000000000001?Te=-.05706887458825395:t[2]>1.5000000000000002?Te=.011446637886629108:Te=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Te=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Te=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Te=.026278724448495064:Te=.17053138400480508:t[0]>4463.500000000001?Te=-.06482289890096041:Te=.03026516489536295:Te=-.031785170717683144:Te=.1312690622980455:t[13]>1e-35?Te=.14336922540461444:Te=.03523850945454039:Te=-.015407465968975714:t[39]>1e-35?Te=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Te=-.0659975068798723:Te=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Te=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Te=.057409156184759516:Te=.2024322059866388:Te=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Te=.010648654146284154:t[308]>1e-35?Te=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Te=.12364025998551711:Te=-.02247495081065243:t[1]>22.500000000000004?Te=-.0726295464624251:Te=.03481895086048152:t[0]>4331.500000000001?Te=-.04775443357020673:Te=.07172377425057568:t[2]>89.50000000000001?Te=-.11782645274716962:Te=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let lt;t[179]>1e-35?lt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?lt=-.07595415373151816:lt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?lt=.022822510448266862:lt=.17491569312933697:lt=-.058362287133533565:t[2]>2.5000000000000004?lt=-.03633895806364428:lt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?lt=-.07294848747514579:lt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?lt=-.07009535282685533:t[8]>2640.0000000000005?lt=-.051761240111316276:t[131]>1e-35?lt=-.06245774419231631:lt=.03495606662854905:lt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?lt=.0015036626973581122:lt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?lt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?lt=.022343994371919224:lt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?lt=.07724450228328664:t[0]>3853.5000000000005?lt=-.15671707454435677:t[10]>28.500000000000004?lt=-.10179090671841723:lt=.014878216919760927:lt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?lt=.14054154485273487:lt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?lt=-.08632985141410315:lt=.005524157938954954:lt=-.08802502622523681:lt=-.0004649168897260341;let _t;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?_t=-.007458687464321174:_t=-.09444966249102484:t[1]>23.500000000000004?_t=.08564129697360716:_t=-.07105002902845851:_t=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?_t=-.10326216566705966:t[1]>26.500000000000004?_t=.0050539832484585365:_t=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?_t=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?_t=.05783632021087773:t[10]>17.500000000000004?_t=-.06720598671764105:t[1]>47.50000000000001?_t=.097495825172558:_t=-.013372242800584872:_t=-.06463226787713715:t[42]>1e-35?_t=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?_t=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?_t=.11051270080118503:_t=.027719462817590454:t[8]>597.5000000000001?_t=-.08441503592016869:_t=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?_t=-.12190088985091102:_t=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?_t=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?_t=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?_t=.016585157185448045:_t=-.11032043771149425:_t=.01586986028570486:t[8]>388.50000000000006?_t=-.10592413013261853:_t=.04930703248769364:t[13]>1e-35?_t=.003621937787920821:_t=-.0013786331198611841;let xt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?xt=.009769895322846493:xt=-.10620052926943656:t[9]>19.500000000000004?xt=.03781202525403449:t[9]>14.500000000000002?xt=-.11485785321365344:t[9]>6.500000000000001?xt=.07677177833073881:t[0]>4342.500000000001?xt=-.07079285609687631:t[49]>1e-35?xt=.06156814809246001:xt=-.014788509042554625:xt=-.032659201618470655:t[5]>5207.500000000001?xt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?xt=-.03094160322187924:t[1]>29.500000000000004?xt=.09474646043921069:xt=.023445783928231618:xt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?xt=-.07164443768784848:t[1]>29.500000000000004?xt=.089473622509272:t[8]>597.5000000000001?xt=-.08155349903101317:xt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?xt=-.004003900679358653:t[190]>1e-35?xt=-.09236113461485262:t[8]>3198.5000000000005?xt=-.0124130160451179:xt=.018453070064009328:t[15]>1e-35?xt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?xt=-.0009580759587680961:xt=-.03227283036698222:xt=.01369287669536875:t[1]>50.50000000000001?xt=-.04213060332500437:t[35]>1e-35?xt=-.11508095777767471:t[190]>1e-35?xt=-.08611884672400155:t[297]>1e-35?xt=.05723551879433584:xt=-.004829340082311461;let ht;t[183]>1e-35?ht=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?ht=-.11753465135886734:ht=-.007515490299047085:ht=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?ht=-.12371142493530439:t[1]>36.50000000000001?ht=.032189417575190435:ht=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?ht=-.0784518658439288:t[2]>54.50000000000001?ht=.12477882322370665:ht=.000313468482399738:ht=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?ht=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?ht=.0353146070135579:ht=-.06327619611098285:ht=.02813577701641991:ht=-.12354390728506215:t[34]>1e-35?ht=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?ht=-.01245803535276381:ht=-.07169472553475001:t[1]>11.500000000000002?ht=.12989984824561698:ht=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?ht=.010390226893521422:t[10]>14.500000000000002?ht=.16790888126487719:ht=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?ht=-.043398307129729134:ht=.09963544907820426:t[9]>30.500000000000004?ht=-.13540713124984502:t[9]>17.500000000000004?ht=.0509435850590757:ht=-.04761897852404613:t[4]>78.50000000000001?ht=.09197086656470652:ht=.0006771050176682337;let ue;t[122]>1e-35?t[6]>36.50000000000001?ue=.05686884451670743:ue=-.05334759543084309:t[266]>1e-35?ue=-.08603579519816038:t[157]>1e-35?ue=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ue=-.0499592651503952:t[0]>725.5000000000001?ue=.11780353905132664:ue=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ue=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ue=-.03190157229022304:ue=.07985197845805492:ue=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ue=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ue=-.027174047777029083:ue=.057117284879796476:t[3]>43.50000000000001?ue=-.0016147040913107311:ue=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ue=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ue=-.01466076988151239:ue=.13375695925484857:ue=-.04885873081899647:t[0]>5566.500000000001?ue=.11086813028591343:t[8]>992.5000000000001?ue=-.07622304217072383:ue=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ue=.03285858361708423:ue=-.12354858211764992:ue=.0672788301823281:t[15]>1e-35?ue=.08658836986585006:ue=-.02741484278509758:t[290]>1e-35?ue=-.08161310335133287:t[135]>1e-35?ue=-.04824156054814152:ue=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let $e;t[189]>1e-35?t[0]>5269.500000000001?$e=-.103183298350443:t[2]>51.50000000000001?$e=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?$e=-.05186168947388339:$e=.0496996365539082:t[10]>23.500000000000004?$e=.1404445738719:t[93]>1e-35?$e=.0027146310074558505:t[5]>3821.5000000000005?$e=.002153033152069652:t[4]>2.5000000000000004?$e=.007663539551317215:$e=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?$e=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?$e=-.021479467709980358:$e=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?$e=.021660293256233334:$e=-.0927396152303864:$e=.0665074081601698:t[0]>1550.5000000000002?$e=.08972407105958534:$e=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?$e=.06761927942466854:$e=-.015762168112653286:t[17]>1e-35?$e=.10311304131145381:$e=-.017672785252336027:$e=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?$e=-.10638321435298535:$e=.0007073011744385905:t[18]>1e-35?$e=-.027056185501334325:t[145]>1e-35?$e=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?$e=.09762140519655171:t[9]>110.50000000000001?$e=-.06581942957595835:t[6]>54.50000000000001?$e=.04959634035251596:$e=.0022616298654554207:$e=-.007437620924990854;let se;t[179]>1e-35?se=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?se=.1470294450403005:se=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?se=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?se=.07965955447707423:t[10]>10.500000000000002?se=-.09236156404262426:se=.03396273196231458:se=-.13246465021467432:se=.07092822261735353:se=-.08753829085942:se=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?se=.004705878789890202:se=.13775378964952867:se=-.04770928980587811:t[10]>29.500000000000004?se=.011221519891071544:t[0]>3853.5000000000005?se=.06365381191628273:se=.15506252245336827:t[1]>37.50000000000001?se=-.07254777021042061:se=.026514587757252385:t[308]>1e-35?se=.04115804816617256:t[10]>26.500000000000004?se=.02077721353011946:t[5]>3548.5000000000005?se=-.1280907116663952:se=-.021974774274438:t[306]>1e-35?se=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?se=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?se=-.005710865560475598:t[94]>1e-35?se=-.06751507982853555:se=.027250040757588703:t[9]>52.50000000000001?se=.07060357924595577:se=-.030297760713011795:se=-.0006005400085266517;let le;t[113]>1e-35?le=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?le=-.06996356565314456:le=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?le=-.08317707559926495:t[21]>1e-35?le=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?le=-.010538203005984922:le=.08454819465349446:t[9]>124.50000000000001?le=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?le=-.08542251249346582:t[9]>50.50000000000001?le=-.023428882537657472:le=.010042500833979073:le=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?le=.03006025206979096:t[9]>108.50000000000001?le=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?le=.04222035773042132:le=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?le=-.07209095448054853:le=.028065954981903313:le=.08714651929917122:le=-.006678820669279169:t[10]>40.50000000000001?le=.006982396294941626:le=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?le=-.09351114982645548:t[4]>3.5000000000000004?le=-.004837550129223451:le=-.08324141237464677:t[303]>1e-35?le=.10703037493990825:t[9]>156.50000000000003?le=-.10803018621648303:t[116]>1e-35?le=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?le=.10261721665006701:le=.018994509090668264:le=.0011244262442038839;let qe;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?qe=-.08404263465005328:t[0]>3682.5000000000005?qe=.041259223920298876:t[1]>29.500000000000004?qe=-.09541257493441671:qe=.001482192721625409:qe=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?qe=-.08268996098437432:t[230]>1e-35?qe=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?qe=-913218977737457e-19:t[4]>10.500000000000002?qe=-.056334165674005156:t[127]>1e-35?qe=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?qe=-.04231200150318989:t[10]>42.50000000000001?qe=.10182973257894812:qe=.015934763950068445:qe=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?qe=-.041117068322885315:qe=.1167767830037126:qe=.13611206992387337:t[10]>41.50000000000001?qe=-.07120286010564107:qe=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?qe=-.07702290997669524:t[198]>1e-35?qe=.08776558554437136:qe=-.008290740324975692:t[2]>32.50000000000001?qe=.07198457624219955:qe=.005463113714361629:qe=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03295785445437507:qe=.15140250150674536:qe=-.035613213948910254:t[186]>1e-35?qe=.06849425535860769:t[96]>1e-35?qe=.06028225812727254:qe=-.007582543288662308;let Be;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Be=.08396556264106572:Be=-.0562516995099192:Be=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Be=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Be=.0052017514017035915:Be=-.11194119432743639:Be=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Be=-.025692451287403446:Be=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Be=-.11892250746801664:t[10]>22.500000000000004?Be=.07548493166973796:Be=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Be=.13750699058082427:t[18]>1e-35?Be=.06535408879552801:Be=-.054118179035040674:Be=.1344282838979622:t[0]>3982.5000000000005?Be=-.10409582202467015:t[19]>1e-35?Be=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Be=.012705935670766466:Be=.14149359442527545:Be=-.047977876173706004:t[20]>1e-35?Be=.057945228080337946:t[0]>3642.5000000000005?Be=-.008726535792122467:Be=-.08424769891378858:t[34]>1e-35?Be=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Be=.01196849566739346:Be=.1614642278429876:Be=-.043022338150701625:t[3]>5.500000000000001?Be=-.03907848255033881:Be=.018280601026175593:Be=.0006654540402589085;let Ee;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?Ee=-.01386103677247845:Ee=.11386694333005128:t[4]>27.500000000000004?Ee=-.021862617610091336:t[2]>31.500000000000004?Ee=.0828858469030438:Ee=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?Ee=.11303635767048735:Ee=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?Ee=-.04238798044549342:Ee=.022091190130494303:t[5]>5082.500000000001?Ee=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?Ee=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?Ee=-.04291104140431434:t[17]>1e-35?Ee=.11256797532342613:Ee=-.017206916368289193:Ee=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?Ee=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?Ee=.03581712466863222:Ee=.14770264307668884:t[8]>73.50000000000001?Ee=-.13093289429740068:Ee=.042461737442702936:t[52]>1e-35?Ee=.0501831919044939:Ee=-.010450249720465756:Ee=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?Ee=.0005381332165438493:Ee=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?Ee=.04849637311285226:Ee=-.036671377119808564:t[0]>421.50000000000006?Ee=.00020968499911058945:Ee=.11636422423182405:Ee=-.12687837788222575:Ee=.0012774367867215346;let je;t[120]>1e-35?je=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?je=-.042799574885345304:je=.07412430171193245:je=-.11248270469336048:t[193]>1e-35?je=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?je=.028911612178122104:je=.12326369727728437:t[0]>4091.5000000000005?je=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?je=.1159839898100149:je=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?je=-.0216343737351583:je=-.1220272260878369:t[2]>18.500000000000004?je=.09152924475072398:t[8]>55.50000000000001?je=.039508716651005665:je=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?je=.06793009902674053:je=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?je=-.04391068849624096:je=.04009967593394672:t[8]>1085.5000000000002?je=-.024773826356034825:je=-.13919707884246582:je=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?je=-.11567917501901476:je=-.006813640337684114:t[3]>7.500000000000001?je=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?je=-.001754586408351048:je=-.055422422450722056:je=-.06090032532532226:t[0]>5269.500000000001?je=.11787981735983527:je=-.00198119768540783:je=.00210412924303036;let tt;t[294]>1e-35?t[10]>50.50000000000001?tt=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?tt=-.06063239096209816:tt=.03317022411417386:tt=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?tt=-.013608609329298802:tt=.09078000157330264:t[99]>1e-35?tt=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?tt=-.07536137260189814:tt=.006253266595455118:t[10]>28.500000000000004?tt=-.006106041147592768:t[9]>156.50000000000003?tt=-.11828932797811101:t[94]>1e-35?tt=-.02566078479505714:t[303]>1e-35?tt=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?tt=-.08401252789168523:t[5]>4244.500000000001?tt=.026372887658499107:t[1]>16.500000000000004?tt=-.027836756345634026:tt=.09205362097909099:tt=.00934612788718244:t[203]>1e-35?tt=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?tt=-.09580979052540028:t[1]>50.50000000000001?tt=-.06402211827281554:tt=.08342858760095972:t[2]>36.50000000000001?tt=.008114897658204584:t[92]>1e-35?tt=.09541587072672864:tt=-.022342147210555434:tt=-.01660492519175128:tt=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?tt=.15846731118501817:tt=.039498507912023195:t[245]>1e-35?tt=.07008718676813333:tt=.0019806389728814727;let pt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?pt=-.01192072916082109:pt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?pt=.06874032717466054:t[4]>40.50000000000001?pt=-.07752510020707537:t[1]>76.50000000000001?pt=-.09944032260703917:t[8]>1381.5000000000002?pt=-.054466635810800745:t[1]>32.50000000000001?pt=.05974084520839573:pt=-.0384718740755954:pt=-.11374190719134032:t[0]>2151.5000000000005?pt=-.13703645155803298:pt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?pt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?pt=.013539805885738608:pt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?pt=.09941880179344399:pt=-.01608127391210995:pt=.08025226531247417:t[9]>67.50000000000001?pt=.13525448212444113:t[6]>61.50000000000001?pt=-.05511099182158894:t[94]>1e-35?pt=-.06821509831783572:t[128]>1e-35?pt=.11361314817714643:pt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?pt=-.09954181329804547:t[197]>1e-35?pt=.10102833149755386:t[188]>1e-35?pt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?pt=-.03781554214742005:pt=.09927933385592314:pt=-.020006000056720083:pt=-.10520473615957895:pt=-.12006990846253787:pt=-.00026111570975317574;let Ft;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ft=-.019188245509744628:Ft=-.13354864350075848:t[0]>2461.5000000000005?Ft=.051885477468354396:Ft=-.0833581968852119:Ft=.08233441701532287:Ft=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ft=.09926337893072812:Ft=-.027753610497327715:t[0]>1972.5000000000002?Ft=-.09780045823152517:Ft=.032380915168504935:Ft=.11502632261226381:t[17]>1e-35?Ft=-.06094965899579662:t[10]>40.50000000000001?Ft=-.07500475582440802:Ft=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ft=-.09584538995220808:Ft=-.00908705814304442:Ft=.03203281520813893:t[10]>49.50000000000001?Ft=-.03146271513986384:t[2]>63.50000000000001?Ft=.13172001315536286:t[224]>1e-35?Ft=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ft=.09521549382082259:Ft=-.04414925613522197:t[0]>1847.5000000000002?Ft=-.09118580379557353:Ft=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ft=.03525144509943896:Ft=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ft=-.04766112322938157:t[2]>10.500000000000002?Ft=.0728516504357201:Ft=-.05049625965272536:Ft=-.10868663055825774:Ft=.0005382613419948969;let Jt;t[147]>1e-35?t[1]>53.50000000000001?Jt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Jt=-.030504020655417463:Jt=.07102458639110094:Jt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Jt=.055304563442710876:t[1]>53.50000000000001?Jt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Jt=-.1568835288372895:Jt=-.0279829124400056:Jt=.04493843959601833:Jt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Jt=-.054133834303687026:t[9]>48.50000000000001?Jt=.11263810289007213:t[9]>9.500000000000002?Jt=-.02202034562838259:t[4]>45.50000000000001?Jt=-.03410927569045158:Jt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Jt=-.029687297407295893:Jt=.10673602850001934:t[4]>42.50000000000001?Jt=.0036275562945108117:Jt=-.0760789221330622:Jt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Jt=.08274426793676076:Jt=-.07076234425516396:Jt=.13890177606150175:Jt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Jt=-.09250637750836187:Jt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Jt=-.01897867921812603:Jt=.04890781705365262:Jt=-.11569892307597907:t[2]>106.50000000000001?Jt=.09032697440623969:Jt=.00047935919155035045;let Qt;t[115]>1e-35?Qt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Qt=-.10131179514695865:t[8]>938.5000000000001?Qt=.10203729808015481:Qt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Qt=.03574015165562999:Qt=-.07763042506449493:Qt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Qt=.0665706259130275:Qt=-.06586817559309924:Qt=.11925564412287476:Qt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Qt=.046017146627455346:Qt=-.08623321630086885:t[8]>1765.5000000000002?Qt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Qt=.11143827902215087:Qt=-.01817808730473413:Qt=.16980985030210127:Qt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Qt=.010168994879727824:Qt=-.09099594488792513:t[9]>1.5000000000000002?Qt=.0533459678147928:Qt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Qt=-.062346959148773695:t[1]>47.50000000000001?Qt=-.0021578343835599316:t[2]>27.500000000000004?Qt=.19567373210166172:Qt=.07851555379116423:t[18]>1e-35?Qt=.03711549097804649:t[8]>359.50000000000006?Qt=.012492346746905587:t[4]>20.500000000000004?Qt=.047511695735697544:Qt=-.07999269063948773:Qt=6802045404471004e-20;let Vr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Vr=.0011484728213539738:Vr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Vr=-.09828874964938798:t[8]>1586.5000000000002?Vr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Vr=.011938269926919522:Vr=.17541983715953954:t[19]>1e-35?Vr=.023002786011088672:Vr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Vr=.06508934844183291:Vr=-.10168553534835639:Vr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Vr=.021140806225203937:Vr=-.1167833342453639:t[2]>33.50000000000001?Vr=.13163585734056618:Vr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Vr=.06314479201263888:Vr=-.09639088327091713:t[10]>29.500000000000004?Vr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Vr=40577156464836036e-21:Vr=.12322387121810757:Vr=-.03697224045046014:t[1]>22.500000000000004?Vr=.016474835887320276:Vr=.16919298733903063:Vr=.07633203630214054:Vr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Vr=.14150493354700563:Vr=-.01831155354975749:t[1]>28.500000000000004?Vr=-.07952557178685365:t[10]>28.500000000000004?Vr=.0665695554984927:Vr=-.053640139319277094:Vr=.0004754840665898665;let Pr;t[76]>1e-35?Pr=-.06814884255939921:t[179]>1e-35?Pr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Pr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Pr=.004193658608848433:Pr=-.1066968975983452:t[8]>302.50000000000006?Pr=.05476730110440451:Pr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Pr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Pr=.013555772109446666:Pr=-.09856116699770784:Pr=.0284329611813383:t[2]>52.50000000000001?Pr=.04008708444763762:t[9]>29.500000000000004?Pr=-.1289599546008197:Pr=-.018566534248335896:t[8]>747.5000000000001?Pr=.02236484980076122:Pr=.1148871655157582:t[8]>3084.0000000000005?Pr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Pr=.03164751204281298:Pr=.11752140436184891:t[9]>42.50000000000001?Pr=-.07180559595410106:t[22]>1e-35?Pr=.09325040416256854:Pr=-.016041122807939914:Pr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Pr=-.010718250133458515:Pr=.09818827994853763:Pr=.010180038981174032:Pr=-.039472162599295535:t[9]>170.50000000000003?Pr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Pr=-.08674788057474031:Pr=.02077653508548371:Pr=-.0003536561382007414;let ln;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?ln=.018337297491457794:ln=-.05926206443180149:ln=.024026520855881126:t[288]>1e-35?t[184]>1e-35?ln=.10747078482128616:t[126]>1e-35?ln=-.10550625192391357:t[7]>71.50000000000001?ln=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?ln=.1317396472229434:ln=-.025035791351328947:ln=-.0728334305864372:t[8]>963.5000000000001?ln=.023642201723096064:ln=.183010326734258:t[128]>1e-35?ln=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?ln=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?ln=-.1088876900335281:ln=.02758317023002635:ln=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?ln=-.01928020117446408:ln=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?ln=.07893723375925096:ln=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?ln=-.10301657587280551:ln=.005787463140224318:ln=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?ln=-.019296977889522397:ln=-.07274529751752634:t[1]>30.500000000000004?ln=-.050368901143148286:ln=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?ln=.0015332402792773946:ln=.09930153676749967:ln=-.06370844564357069:ln=.00042272155209927616;let ve;t[71]>1e-35?t[4]>17.500000000000004?ve=.12586844370423247:ve=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?ve=-.08474891624263797:t[8]>125.50000000000001?ve=.08125086980439704:ve=-.04082085238068532:t[0]>3863.5000000000005?ve=.020481535807469208:ve=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?ve=-.019110200161573936:ve=-.12387719685855114:t[0]>1102.5000000000002?ve=.08376595701957407:ve=-.031821919580524834:t[9]>4.500000000000001?ve=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?ve=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?ve=.1349841206807871:ve=.011864053595560297:t[1]>41.50000000000001?ve=-.08203662486612544:t[2]>18.500000000000004?ve=-.009541865642346947:ve=.08345043168501759:t[2]>10.500000000000002?ve=-.09585031818030947:ve=.019432330487099865:ve=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ve=.11951517733981365:ve=-.016651014735738538:t[1]>28.500000000000004?ve=-.07410922545030711:t[10]>28.500000000000004?ve=.05886430683844788:ve=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?ve=.04802269879144705:ve=-.026208212831796737:t[4]>45.50000000000001?ve=-.03227476944664786:ve=.05124575625622705:ve=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Tt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Tt=-.10504730480402079:t[5]>3341.5000000000005?Tt=.11087894671081754:Tt=-.0406668834674614:Tt=.03308382165616109:t[8]>104.50000000000001?Tt=-.10431436764549162:Tt=.0073928337244891455:t[4]>34.50000000000001?Tt=-.10571751512748416:Tt=-.006081128814142983:t[13]>1e-35?Tt=.1299673566095023:t[4]>60.50000000000001?Tt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Tt=.04857126072645073:Tt=-.03431365358104773:t[4]>16.500000000000004?Tt=.04101865986596709:Tt=.16480274980378218:t[10]>26.500000000000004?Tt=.03673978504199255:t[10]>9.500000000000002?Tt=-.10996402743800027:t[308]>1e-35?Tt=.0553693735082498:Tt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Tt=.010902983761213922:Tt=.1325118659895645:Tt=-.064362945508595:t[1]>66.50000000000001?Tt=.033416767779331176:Tt=-.054080316225040496:t[42]>1e-35?Tt=-.07762364337810815:t[10]>1089.5000000000002?Tt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Tt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Tt=.0220102041325908:Tt=-.06516708740003069:Tt=.012833498905748267:t[224]>1e-35?Tt=-.007038418272997865:Tt=.00037666304316290967;let or;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?or=.07554189644995735:or=-.052089349455904946:or=-.10148206848169845:t[113]>1e-35?or=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?or=.07172653627995676:or=-.07602959317610998:or=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?or=-.0399322883690891:or=.06523495517476098:or=-.10358715295743802:t[193]>1e-35?or=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?or=.015928764772252406:or=.1341513061552287:or=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?or=-.033592997607280156:or=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?or=-.08402551858097379:or=.017401984506038796:t[1]>25.500000000000004?or=.13337205393591278:or=-.01160208350090984:or=.06708317942315471:t[8]>227.50000000000003?or=-.08486943882418681:or=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?or=-.10496268177586783:or=-.020921489532370493:or=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?or=.11639296062157028:or=-.004275784356569115:t[32]>1e-35?or=-.07297384970166025:or=.006026841626381599:or=.002034611134960428;let Zt;t[248]>1e-35?Zt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Zt=-.06455513326540585:t[1]>29.500000000000004?Zt=.07718474591552532:t[4]>7.500000000000001?Zt=.040139336931404826:Zt=-.09685734690563386:Zt=.00015327283570347363:t[9]>88.50000000000001?Zt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Zt=-.04077257804338707:Zt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Zt=.03778141591008941:Zt=-.06459919920634845:Zt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Zt=.14063930759326346:t[0]>179.50000000000003?Zt=.07287482250668585:t[8]>1180.5000000000002?Zt=-.14419393112726253:t[10]>28.500000000000004?Zt=-.07993142770099469:t[17]>1e-35?Zt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Zt=.05527969663610186:Zt=-.10824385941441346:t[3]>11.500000000000002?Zt=.12358502961047915:Zt=-.017509147119622873:t[0]>74.50000000000001?Zt=-.014907705458730486:t[8]>95.50000000000001?Zt=-.02225118168342062:Zt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Zt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Zt=.04962819555610421:Zt=-.07213577821855309:Zt=.09139529824708481:t[19]>1e-35?Zt=.013439401088345224:Zt=-.049274647207292056:Zt=.10531673719686951;let Ir;t[40]>1e-35?t[0]>1937.5000000000002?Ir=-.06421671152073961:Ir=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Ir=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Ir=-.03520420769287065:t[8]>1085.5000000000002?Ir=-.019817352506127633:Ir=.11444439424520964:Ir=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Ir=-.010490117519863269:Ir=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Ir=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Ir=.06619344145920268:t[0]>4091.5000000000005?Ir=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ir=.10016091391222309:Ir=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Ir=-.019511460451434884:Ir=-.11643672465055221:t[2]>18.500000000000004?Ir=.07848228087333317:t[8]>55.50000000000001?Ir=.032583027899956235:Ir=-.11209832692153521:t[11]>1e-35?Ir=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Ir=-.09996887746328006:t[9]>2.5000000000000004?Ir=.02157682011863397:Ir=-.05247727848991843:Ir=.07409150201483244:t[1]>38.50000000000001?Ir=-.11378466075449625:t[224]>1e-35?Ir=-.10741749127732923:t[1]>26.500000000000004?Ir=.07343136534146562:Ir=-.07013573628594773:t[25]>1e-35?Ir=-.04626669734164317:Ir=.05518333197956482:Ir=.00032434010867555516;let ur;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?ur=.026313251010808853:ur=-.08997339150292381:ur=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?ur=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?ur=.0905155504503746:t[8]>1049.5000000000002?ur=-.062312558183394054:t[8]>719.5000000000001?ur=.09583836191410239:t[0]>3719.5000000000005?ur=-.0778097309430818:ur=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?ur=-.12920865648544927:t[0]>2699.5000000000005?ur=-.07086587879041864:ur=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?ur=-.11377786322600797:ur=-.009486325820117998:t[1]>55.50000000000001?ur=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?ur=-.07938291201004219:t[2]>36.50000000000001?ur=.01520046732530246:ur=.13649854049662832:ur=-.07145015938528873:t[8]>407.50000000000006?ur=-.00350257360822279:ur=.11332047082193297:ur=-.10060624458629897:ur=.05429496612497562:t[8]>1446.5000000000002?ur=.006073419197482838:ur=-.08718676350883998:ur=-.11532497988252638:ur=.10766270463068293:t[34]>1e-35?ur=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?ur=-.0004109812623829506:ur=.021601073497455662:ur=-7343540098965853e-20;let rr;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?rr=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?rr=.05995640200798119:t[0]>3443.5000000000005?rr=-.14698883458733583:rr=-.030039164579240187:t[189]>1e-35?rr=-.06086763220538141:t[1]>86.50000000000001?rr=-.05096727866142538:t[4]>64.50000000000001?rr=.11240554253834577:t[4]>45.50000000000001?rr=-.030279760168394117:t[6]>45.50000000000001?rr=.10161088917815142:t[10]>77.50000000000001?rr=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?rr=-.06672020005240323:rr=.08831457502630258:t[8]>2592.5000000000005?rr=-.052617701047376654:t[10]>29.500000000000004?rr=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?rr=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?rr=-.064099222705728:rr=.044332487521538365:t[0]>2882.5000000000005?rr=.031099546885005065:rr=.12938467051623853:t[0]>4221.500000000001?rr=-.0928676413498701:t[9]>30.500000000000004?rr=-.05781824812803708:rr=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?rr=-.06648105454098469:rr=.05985487552383097:rr=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?rr=.05282385499619401:t[1]>66.50000000000001?rr=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?rr=.027885690791379255:rr=-.08407126408362446:rr=.014432924125571093:rr=-9903435845205118e-20;let lr;t[76]>1e-35?lr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?lr=.013633653464240465:lr=-.10164319411983509:lr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?lr=.00632864847804078:lr=-.08393000368134668:lr=.07870508617440916:t[284]>1e-35?lr=.1092302727710421:lr=-.0025505047582483234:t[248]>1e-35?lr=.07101822393621864:t[274]>1e-35?lr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?lr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?lr=.025081789181021243:lr=-.014813325803582618:t[9]>33.50000000000001?lr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?lr=.11926990418060353:lr=.01852125513565268:lr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?lr=-.1178464984373743:t[283]>1e-35?lr=.043370859226927405:t[5]>4320.500000000001?lr=-.01103141226366587:t[8]>1104.5000000000002?lr=-.023053423988095886:lr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?lr=.000579145585864887:lr=.03389152834202143:t[128]>1e-35?lr=-.14527722052568462:t[210]>1e-35?lr=-.08915971541902741:t[7]>9.500000000000002?lr=-.03307314577076116:t[18]>1e-35?lr=-.05521712302023565:lr=.009315605032770029:lr=.0036332551852289933;let nr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?nr=-.07583539600416284:t[188]>1e-35?nr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?nr=-.011038193049597113:nr=.08154028164397753:t[1]>85.50000000000001?nr=.10259361975201933:nr=.011640408330521594:nr=-.00023319159023748508:t[92]>1e-35?nr=.13771692859530546:nr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?nr=.09967230141007705:t[30]>1e-35?nr=-.08888529037551285:nr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?nr=.08284665960761373:nr=-.029292565021289504:t[7]>7.500000000000001?nr=-.09945093355204493:nr=-.008381393701708593:t[20]>1e-35?nr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?nr=.07585582641438211:t[8]>284.50000000000006?nr=-.029387993239886723:nr=.07716738177321587:t[1]>18.500000000000004?nr=.026745348497993746:nr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?nr=.02337306890530338:nr=-.10390355904767366:nr=.07390521199638532:nr=-.06788247515155237:nr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?nr=-.06360325615644084:nr=.04342192339836601:nr=-.10598779152030145:nr=.05253384605768211;let Nr;t[3]>7.500000000000001?t[157]>1e-35?Nr=-.07514182877923786:Nr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Nr=.028692053800951845:Nr=.14081686716133598:Nr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Nr=.0037139292567243084:Nr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Nr=.01202688580305612:Nr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Nr=.043935495082738626:Nr=-.05639305759669704:t[247]>1e-35?Nr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Nr=.10331836202616368:Nr=.0006926658459781341:t[96]>1e-35?Nr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Nr=-.0741403257305367:Nr=.022900127535540854:t[7]>3.5000000000000004?Nr=.038110741403836294:Nr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Nr=-.09552842289807008:t[1]>27.500000000000004?Nr=.012505935885798007:Nr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Nr=-.1046104767723845:Nr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Nr=.023466328488582572:Nr=.11730925774586994:Nr=-.04771965631104874:Nr=.17059689880751394:Nr=-.08181850955999449:t[26]>1e-35?Nr=-.12727482696678769:Nr=-.014343123272734182;let zr;t[147]>1e-35?t[1]>53.50000000000001?zr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?zr=-.02763546051134888:zr=.06423344777499343:zr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?zr=.049825139823021586:t[7]>22.500000000000004?zr=-.01131680751379858:t[0]>2579.5000000000005?zr=-.10673674485369694:zr=-.015387212937189957:zr=.04347325151148724:t[179]>1e-35?zr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?zr=.0650355590939066:zr=-.0473332870892226:zr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?zr=.11139543329789044:t[126]>1e-35?zr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?zr=.06370903833231022:t[10]>29.500000000000004?zr=.03415223859607161:t[10]>3.5000000000000004?zr=-.07415518117873297:zr=-.0014119203473324082:zr=.12617652343819508:t[9]>41.50000000000001?zr=-.10311145857176976:t[8]>2757.5000000000005?zr=-.08106484219011428:t[7]>71.50000000000001?zr=-.09783384432091176:t[1]>88.50000000000001?zr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?zr=-.008884084501608536:zr=.061339437777743616:zr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?zr=.01526664064166223:zr=.13534828515415498:zr=-.06985484465894776:zr=.0005758961943178744;let sn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?sn=-.029152732370514342:sn=.07173628916139178:t[1]>36.50000000000001?sn=-.08859111297255318:sn=.0018030071815630785:sn=.13652461563759322:sn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?sn=-.07145140450454163:t[21]>1e-35?sn=-.07422841663493233:sn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?sn=.11864240653986852:t[3]>33.50000000000001?sn=-.08821209591953476:sn=.05706392280054726:sn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?sn=.01953613016837112:sn=-.059781039130025006:t[148]>1e-35?sn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?sn=.07207826841738371:t[202]>1e-35?sn=.08163917539410503:sn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?sn=-.06858280496900336:sn=-.1781828899516648:sn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?sn=.018232649414147116:sn=-.04419781124222661:sn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?sn=.11452368095776105:sn=-.036496437259924026:sn=-.040445338739465486:sn=.0816572651001145:sn=-.08968914517368663:sn=.0002826343082585516;let yn;t[189]>1e-35?t[0]>5269.500000000001?yn=-.08839493050459957:t[10]>85.50000000000001?yn=.10046908365702462:t[8]>2592.5000000000005?yn=-.09632233975926387:t[8]>2000.5000000000002?yn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?yn=.035504970430426296:t[1]>31.500000000000004?yn=-.1133764813142531:yn=-.01138280942244812:t[8]>1125.5000000000002?yn=.09800530246229806:yn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?yn=.07316772160107896:yn=-.059095014819051765:yn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?yn=-.09150209066166894:t[8]>3084.0000000000005?yn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?yn=-.04449234460408263:yn=.05568837973347338:yn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?yn=.12741077850267066:yn=.007372371864985329:t[2]>39.50000000000001?yn=.02295917234617787:yn=.14966532083907075:t[1]>39.50000000000001?yn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?yn=-.02511861881285652:t[1]>27.500000000000004?yn=.08683660011672288:yn=.02956214835267301:t[9]>15.500000000000002?yn=-.016538805462996232:yn=.04352738094981517:yn=-.05561856645643868:t[9]>170.50000000000003?yn=-.07996752635874248:t[179]>1e-35?yn=-.09065975936933919:yn=-.00042817975060427177;let ri;t[39]>1e-35?t[4]>25.500000000000004?ri=.03443173196222934:ri=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?ri=-.0013415395759330318:ri=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?ri=.002297618040307216:ri=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?ri=-.015297257305397608:ri=.09651828834062742:ri=-.06636003334371929:t[10]>11.500000000000002?ri=.17631616138309397:t[0]>1639.5000000000002?ri=3804386478092585e-20:ri=-.09099296398683193:ri=-.06874415876172972:t[0]>2151.5000000000005?ri=-.1311264883406766:ri=.00809052010141122:t[253]>1e-35?ri=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?ri=.045038497754638605:ri=-.07770167665661752:ri=-.08596294280650517:ri=.08538655727027213:ri=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?ri=.054627956617973275:t[1]>61.50000000000001?ri=-.11994465088415499:t[4]>8.500000000000002?ri=.06676200239406452:ri=-.027503148069376867:t[8]>676.5000000000001?ri=-.10363964928357075:t[4]>8.500000000000002?ri=-.07589816227175682:ri=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?ri=.009093153189012338:ri=-.06119765876605404:ri=.0004668642103528348;let _n;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?_n=-.10100794502567233:_n=.08000205636470442:_n=-.11945419826856896:t[113]>1e-35?_n=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?_n=.1224302423880318:_n=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?_n=.0019277012166729114:t[1]>28.500000000000004?_n=-.054445821715687494:_n=.045645722976713245:t[30]>1e-35?_n=.13402660155331655:_n=.008921176001777645:_n=-.058547426505451076:_n=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?_n=-.13526418192218206:_n=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?_n=.0007263224246135398:_n=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?_n=-.11575657261278308:_n=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?_n=-.01995960178292952:_n=.11216586049153021:_n=-.10050961087149474:_n=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?_n=.10303451081526649:_n=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?_n=-.043799548968209395:_n=-.12451444314954115:t[4]>12.500000000000002?_n=-.03838117361958468:_n=.06504990789767144:t[57]>1e-35?_n=.06890006938293915:_n=.0003914274695562949;let Zn;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Zn=.004271749009686975:Zn=-.10523878297127605:Zn=.04633982158107851:Zn=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Zn=-.08655730561951676:t[8]>919.5000000000001?Zn=-.0676453705610183:t[7]>18.500000000000004?Zn=-.027787974193650575:Zn=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Zn=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Zn=-.03473877164537313:t[8]>719.5000000000001?Zn=.10471053866934404:Zn=.008236107678382981:t[4]>57.50000000000001?Zn=.09412219478825269:t[10]>66.50000000000001?Zn=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Zn=-.040681323751002293:Zn=.06374650297561021:Zn=.12884615227401788:t[10]>5.500000000000001?Zn=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Zn=-.05474068967150784:Zn=.03744700650806603:Zn=-.07846396348680855:t[1]>42.50000000000001?Zn=.018972315810821302:Zn=.10953621007604744:t[5]>4439.500000000001?Zn=.010999776705494586:t[1]>40.50000000000001?Zn=-.12394200059775967:t[10]>2.5000000000000004?Zn=.013528093962849453:Zn=-.09222088417048682:Zn=-.12662967149701485:Zn=.09327296405849603:t[3]>99.50000000000001?Zn=-.013581954439986752:Zn=.0005526498251862075;let an;t[187]>1e-35?t[243]>1e-35?an=-.08392792551692502:t[10]>68.50000000000001?an=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?an=-.0825306209711224:an=.049559996084532945:an=-.1064938580886302:an=.03353240732240275:an=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?an=.16966001471529374:t[1]>57.50000000000001?an=-.005772777673676247:an=.09383677041525058:t[8]>747.5000000000001?an=.054068175469351235:an=-.049968216310277036:t[8]>753.5000000000001?an=-.0679383555784074:t[4]>8.500000000000002?an=-.059757341189735386:an=.05701083682780414:an=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?an=.05820296128730006:an=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?an=.15340611616954566:an=.04385036188666874:t[0]>4449.500000000001?an=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?an=.004840354641006495:an=.09967827580276283:an=.11605363537391578:t[9]>19.500000000000004?an=-.0735831692725717:an=.019973331823355176:t[306]>1e-35?t[149]>1e-35?an=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?an=-.02442182361342386:an=.10334853004243093:an=-.030431948680167104:an=-956078595250818e-19;let Yn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Yn=-.040232505718244854:t[0]>3030.5000000000005?Yn=.0634109586813073:Yn=-.04043617034245621:Yn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Yn=-.007859096946435131:Yn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Yn=.05515771679628051:Yn=-.04214471312668263:Yn=-.09589322222261765:t[193]>1e-35?Yn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Yn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Yn=-.08152604001147906:t[11]>1e-35?Yn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Yn=.13100930780107503:t[10]>25.500000000000004?Yn=.05921074710011526:Yn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Yn=.0009447118243153454:Yn=-.09820565036865991:Yn=.057146909749745546:t[0]>2115.5000000000005?Yn=-.12331216726611678:Yn=.007281983677694285:t[2]>56.50000000000001?Yn=.012310154675612615:Yn=-.08873665774670461:t[6]>25.500000000000004?Yn=.134708740821879:t[9]>5.500000000000001?Yn=-.0805901581148979:t[224]>1e-35?Yn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Yn=.10842593386554122:t[2]>13.500000000000002?Yn=.06466798320378395:Yn=-.08578130788886655:Yn=-.03590892078300114:Yn=.0003499894043880708;let Pe;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?Pe=.10839808814624702:Pe=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?Pe=-.007478368069393829:Pe=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?Pe=.04035247751736232:t[0]>4255.500000000001?Pe=-.1310865624507367:t[0]>4004.5000000000005?Pe=.06647367311982634:Pe=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?Pe=-.011618902907510411:Pe=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?Pe=.09356028223727986:Pe=-.03811765057032162:Pe=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?Pe=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?Pe=.1146142460964847:t[1]>62.50000000000001?Pe=-.09679869865322362:t[9]>71.50000000000001?Pe=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?Pe=-.039046426387852974:Pe=.04558778688367152:Pe=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?Pe=.03261697816211156:t[15]>1e-35?Pe=.02586252542264368:t[2]>14.500000000000002?Pe=-.016420452667484604:Pe=-.1011799626006976:Pe=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?Pe=.010193588102560583:Pe=.11748729525930773:Pe=-.04468162226743652:Pe=-.028365274393617957:t[71]>1e-35?Pe=.05115139346588793:Pe=-.0001510425316936658;let Y;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?Y=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?Y=.020637047900190317:Y=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?Y=-.04632587527094407:Y=.08603684785510396:Y=-.05101401015448496:Y=.025466432054358498:Y=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?Y=.020385355430046367:Y=.12032592051335252:Y=-.012387370292173013:t[2]>23.500000000000004?Y=-.12568545484492677:Y=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?Y=.043528764484784536:Y=.14352071657196003:Y=-.009332833816977268:Y=.11186782227735846:Y=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.05649104643152564:Y=.03884200719305747:t[42]>1e-35?Y=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Y=-.04103416502526736:Y=.04881823954656287:t[4]>15.500000000000002?Y=.009342724662897898:t[0]>3969.5000000000005?Y=-.025637309961309498:Y=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?Y=-.08185697075265091:t[0]>2215.5000000000005?Y=.030063975892297354:t[0]>807.5000000000001?Y=-.03924325550733229:Y=.0415330999189793:Y=-.00024374664461674863;let Ce;t[3]>7.500000000000001?Ce=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ce=.025798416259686565:Ce=.13251610353146012:Ce=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?Ce=-.11098564237775424:Ce=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?Ce=.15347826616466054:t[3]>4.500000000000001?Ce=.10379320730958941:Ce=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?Ce=.03159791088468647:Ce=-.10612873364104258:Ce=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?Ce=-.02335760775001469:Ce=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?Ce=-.011164334474672973:Ce=-.06594044410501655:t[207]>1e-35?Ce=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?Ce=-.01725821503981916:Ce=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?Ce=-.04226531631656534:Ce=-.14409800530171432:Ce=-.03245576341206398:t[8]>4214.500000000001?Ce=.0895409165534886:t[247]>1e-35?Ce=-.06506383629143335:t[118]>1e-35?Ce=-.07214270121257443:t[8]>546.5000000000001?Ce=-.004385020865473831:Ce=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?Ce=.046278501133958524:Ce=-.030835570926968044:t[0]>493.50000000000006?Ce=-.12794504651610425:Ce=.009415039807550776;let Ie;t[304]>1e-35?Ie=-.04717777269217453:t[76]>1e-35?Ie=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Ie=-.09648224457374217:t[132]>1e-35?Ie=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Ie=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Ie=.10838431695638147:t[230]>1e-35?Ie=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Ie=.050071316251979:Ie=-.006356941111525215:t[6]>8.500000000000002?Ie=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Ie=.10217402850540398:Ie=-.048840949025349197:Ie=-.03668313197909846:t[7]>39.50000000000001?Ie=-.0562642841496003:t[10]>2.5000000000000004?Ie=.09749777369987417:Ie=-.04848223121417616:t[0]>5453.500000000001?Ie=.08316648226133942:Ie=-.0261979698267618:t[212]>1e-35?Ie=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Ie=.04837009746506856:Ie=-.09184360565631328:Ie=.0032411047845613606:t[0]>4733.500000000001?Ie=.0977378556864798:Ie=.010776545559325588:Ie=-.012483310473120218:Ie=-.049284121449103935:Ie=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Ie=-.08380361910948711:Ie=.07375088778585813:Ie=-.1084864186071348:Ie=.0007819503469605476;let F;t[7]>17.500000000000004?t[115]>1e-35?F=.08741852531696623:t[167]>1e-35?F=.10078975495600809:F=-.0018324767784017562:t[290]>1e-35?F=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?F=.1379733311640402:F=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?F=-.09360083033774169:F=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?F=-.015599362579530679:t[0]>4593.500000000001?F=-.12029549262691491:F=-.018917032256501397:F=.04632831686576592:F=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?F=-.05894883236412263:F=.05213944998315824:F=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?F=.07577412405680808:F=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?F=-.0277076900736147:t[1]>65.50000000000001?F=-.023587471585763506:F=.10184896592433082:F=-.057699270527916825:F=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?F=.06566902102799584:t[10]>25.500000000000004?F=-.07033633753181047:F=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?F=-.08108035861059537:F=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?F=-.12431182772561139:F=.01886235886984271:F=.0025579594894418116;let D;t[8]>2915.5000000000005?t[101]>1e-35?D=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?D=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?D=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?D=.0687641681341721:t[10]>102.50000000000001?D=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?D=-.06762578396473291:t[10]>65.50000000000001?D=-.05226727783610509:t[282]>1e-35?D=.09911438410640917:t[19]>1e-35?D=.06915156336429933:D=-.006565637886508241:D=-.08344300251849307:D=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?D=.19428463865406298:D=.016073883020956765:t[13]>1e-35?D=.06864077097923665:D=-.01388867527034731:t[0]>1847.5000000000002?D=.004655280608161356:t[1]>40.50000000000001?D=.031406054057765996:D=.12798062439212832:D=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?D=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?D=-.0706095614785733:D=.04227164041372561:D=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?D=-.07139533369873902:D=.008952586782921625:D=.06086212582180936:D=-.0816938490403437:D=-.051224901945956025:D=-.10525399124186095:D=.000270924147208224;let ee;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ee=.029186512383291244:t[7]>1.5000000000000002?ee=-.14984127276725573:t[1]>40.50000000000001?ee=.032757060730648144:ee=-.07675575422749602:t[6]>8.500000000000002?ee=.10599766037117893:ee=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ee=-.051394622947855385:ee=.03237141302699347:ee=.12526173027943244:ee=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ee=-.07383912482657777:t[0]>5147.500000000001?ee=.07008813937042091:t[10]>38.50000000000001?ee=-.06779203808365307:ee=-.013782769999524498:ee=.0880038869117715:ee=-.12846294176070952:t[281]>1e-35?ee=-.06810806903850834:t[10]>227.50000000000003?ee=-.08937977001661111:t[10]>130.50000000000003?ee=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ee=.011036530162093841:ee=-.11500797478569702:ee=.03702229366129399:ee=.07242026683784307:t[189]>1e-35?ee=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ee=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ee=-.02608892716555304:ee=.09609599320761308:t[9]>105.50000000000001?ee=-.06848127135991534:ee=.0023675721254089715:t[86]>1e-35?ee=-.11049635625500497:ee=-.004847764219432233;let ge;t[125]>1e-35?t[0]>3969.5000000000005?ge=-.09462233499115416:ge=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ge=-.030700661288166148:ge=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ge=.03149547314036763:ge=-.08166208257451366:t[0]>5850.500000000001?ge=-.10228136324773157:t[102]>1e-35?ge=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ge=.01782894842128785:t[13]>1e-35?ge=.002680190260979968:ge=.1773965720476949:t[2]>72.50000000000001?ge=.09090831938627947:t[1]>59.50000000000001?ge=-.12297206702816128:t[0]>4977.500000000001?ge=.09899015653118268:ge=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ge=-.0675900954187773:ge=.012336403425364092:ge=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ge=-.02671721777458802:ge=-.09242452991958029:t[284]>1e-35?ge=-.08585691288582491:ge=.013332890564324447:t[4]>14.500000000000002?ge=-.005245022074799553:t[23]>1e-35?ge=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ge=-.09289852307936758:t[116]>1e-35?ge=-.09686573010015055:t[8]>804.5000000000001?ge=.03812547148215318:ge=.005162744968176633:t[9]>43.50000000000001?ge=-.059246106396159376:ge=.050370113808135275:ge=.000794041852811028;let _e;t[3]>7.500000000000001?_e=.0004981426543104341:t[9]>114.50000000000001?_e=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?_e=-.019061766497948867:_e=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?_e=-.006044199577160493:_e=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?_e=.11486607015912494:t[9]>16.500000000000004?_e=-.08686820858087294:_e=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?_e=-.022230207980026437:_e=.1056683690528792:_e=-.05859530800943035:_e=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?_e=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?_e=-.05177544573528314:_e=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?_e=.15159657923771555:_e=-.0060542654587671055:t[9]>5.500000000000001?_e=-.042808028205051786:t[1]>48.50000000000001?_e=-.010449538258110742:_e=.10026907521968294:_e=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?_e=-.02272452389409874:_e=-.11202691218244319:t[5]>1809.5000000000002?_e=-.04460413584255906:_e=.08196329474205256:t[10]>69.50000000000001?_e=.10221481166238167:_e=.0004063052701699382:t[243]>1e-35?_e=-.07563941678849846:t[18]>1e-35?_e=.02563513231103432:_e=-.004740081147303786;let ut;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ut=.057446442918106:ut=-.04404018270156349:ut=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ut=-.05930486238817954:t[1]>29.500000000000004?ut=.06955866121256543:t[8]>597.5000000000001?ut=-.06538593556505168:ut=.06212512595497445:ut=.00021102929959182257:t[9]>90.50000000000001?ut=.0958061289119631:t[102]>1e-35?ut=.07172059675638813:t[1]>47.50000000000001?ut=-.03879798603977766:t[297]>1e-35?ut=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?ut=.003805910996312012:ut=.09304295674749524:t[11]>1e-35?t[18]>1e-35?ut=.11252376801858695:t[288]>1e-35?ut=-.10293901912180432:ut=.014669268837893872:t[1]>42.50000000000001?ut=-.05988274123836837:t[145]>1e-35?ut=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?ut=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?ut=-.03366718308159971:ut=.11936550608549797:t[1]>31.500000000000004?ut=-.07454716789539667:ut=.027859650621164217:t[10]>10.500000000000002?ut=-.11806374092321247:ut=-.03506042229223101:ut=-.0007080765837654515:t[10]>6.500000000000001?ut=-.028077713664996503:t[2]>7.500000000000001?ut=.15803724124216814:ut=.0351381284833169:ut=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let Yt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?Yt=-.06563670567578264:Yt=.067656954313663:Yt=-.10388217548685377:t[8]>2302.5000000000005?Yt=.07190621943790435:t[4]>67.50000000000001?Yt=.060020507643618604:t[4]>38.50000000000001?Yt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?Yt=-.06568134366461277:t[8]>1075.5000000000002?Yt=-.004768057709758692:Yt=.11785959165999467:Yt=-.05080221682879267:Yt=.14814206127494542:Yt=-.07241946332311736:t[253]>1e-35?Yt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?Yt=-.02471195342450034:Yt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?Yt=-.10741850739482771:Yt=.010051635824944:Yt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?Yt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?Yt=-.08992396138178163:Yt=.010944365997007212:Yt=.06221307021813793:Yt=.1286024087559141:t[127]>1e-35?Yt=.06568148624531012:t[10]>40.50000000000001?Yt=-.07567979134643352:t[5]>5647.500000000001?Yt=.07594672895572069:Yt=-.018158016446439187:t[6]>55.50000000000001?Yt=.009293422430111872:t[4]>45.50000000000001?Yt=-.017749818406964022:t[2]>46.50000000000001?Yt=.01714136511113982:Yt=-724762291423549e-19;let er;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?er=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?er=.07084726276890757:er=-.11232323677722932:er=.04812773089510436:er=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?er=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?er=.0879462816013881:er=-.002966662093626573:t[306]>1e-35?er=-.04588085188342676:er=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?er=-.006600332774461143:er=.1272481351557754:er=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?er=.011884312066620044:er=.11678751052403374:t[4]>8.500000000000002?er=.03627129613273813:er=-.12132783497902287:er=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?er=-.06830131718398992:t[0]>5147.500000000001?er=.062360406249609306:t[4]>4.500000000000001?er=-.013162203864592055:er=-.07153029184927609:er=.07628618062271557:er=-.12085065687320373:t[190]>1e-35?er=-.045816889524231186:t[137]>1e-35?er=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?er=.025895337822752502:er=-.06503949350616421:t[10]>227.50000000000003?er=-.09989456525790491:t[10]>130.50000000000003?er=.08616651057030683:er=.0001234981796706021;let Kt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Kt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Kt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Kt=-.141732381961068:Kt=-.0317152307496497:Kt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Kt=.12191801556691254:Kt=-.0003444689085397977:Kt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Kt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Kt=-.05676033995381961:Kt=.10933961076803381:t[4]>26.500000000000004?Kt=-.11667582544549814:t[8]>1765.5000000000002?Kt=.032174455312047705:Kt=-.0755016390126608:t[293]>1e-35?Kt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Kt=.026571311956824436:t[15]>1e-35?Kt=.06175459479851121:Kt=-.018778084411148754:t[9]>40.50000000000001?Kt=-.09420232889965811:Kt=-.004578248021263184:t[2]>1.5000000000000002?Kt=.005453714644971445:Kt=-.03907138175699279:Kt=-.055296364182154736:t[23]>1e-35?Kt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Kt=-.09358146510580179:Kt=.060524657996178094:Kt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Kt=-.12698331085931538:Kt=.006059605604079918:t[2]>196.50000000000003?Kt=-.09451315810804783:Kt=.0011390147031687425;let bt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?bt=.05517359070460923:bt=-.04758751221404857:bt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?bt=.1040436595565776:t[9]>21.500000000000004?bt=.04032250517675179:t[107]>1e-35?bt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?bt=.1192453009230486:t[1]>51.50000000000001?bt=.0443376336292195:bt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?bt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?bt=-.08999822408398037:bt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?bt=-.061850439226075:bt=.08849196353361093:bt=.10536348167793089:t[92]>1e-35?bt=.04894947712119185:t[9]>16.500000000000004?bt=.05900227903883853:t[9]>5.500000000000001?bt=-.11946594348916476:bt=-.03652096348071964:t[1]>41.50000000000001?bt=-.07411603110840567:bt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?bt=.08493634342741495:t[11]>1e-35?bt=-.10899097825564363:bt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?bt=.08356655906359918:t[7]>25.500000000000004?bt=-.09475076526194888:t[10]>5.500000000000001?bt=-.01999406228763778:bt=.06696212545889428:t[6]>20.500000000000004?bt=.14713592661393468:bt=.0459917279002218:bt=.00027445928493734093;let yr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?yr=-.06904501553217077:yr=.05696231672035904:yr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?yr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?yr=-.011419256378538392:t[0]>3830.5000000000005?yr=.140315841503076:yr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?yr=-.04027822909411164:yr=.03176085103667189:yr=.06779515865838849:t[4]>15.500000000000002?yr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?yr=.06124039747298539:yr=-.04312732764434027:yr=.09161522761808062:yr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?yr=.11211681010488772:t[13]>1e-35?yr=.06725735814960367:yr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?yr=.11743605068905603:yr=-.011309033539148687:yr=-.07896094707523052:yr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?yr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?yr=.02836295848998302:yr=.12210680366745175:yr=-.058302317470509096:t[5]>4144.500000000001?yr=.06123341960495106:yr=-.03840046906926525:yr=-.05221474543453495:yr=.03988215485860711:yr=-.00033074684693083496;let li=pjt(e+r+n+i+o+a+c+l+u+f+p+m+h+g+A+y+E+b+S+R+B+L+O+K+V+z+Q+U+Z+J+j+$+X+ie+ae+te+pe+Ae+Oe+Te+Je+Fe+lt+_t+xt+ht+ue+Ue+ye+$e+se+le+qe+Be+Ee+je+tt+pt+Ft+Jt+Qt+Vr+Pr+ln+ve+Ge+ft+Tt+or+Zt+Ir+ur+rr+lr+nr+Nr+zr+sn+yn+ri+_n+Zn+an+Yn+Pe+Y+Ce+Ie+F+D+ee+ge+_e+ut+St+Yt+er+Kt+bt+yr);return[1-li,li]}s(HYe,"multilineModelPredict");function pjt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(pjt,"sigmoid");var mjt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},$Ye={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function WYe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(mjt[r]??[]).some(c=>o.includes(c))}s(WYe,"hasComment");var bX=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=WYe(e,-2,r),this.rstripSecondToLastLineHasComment=WYe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},fve=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new bX(e,n),this.suffixFeatures=new bX(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys($Ye).length+1).fill(0);r[$Ye[this.language]??0]=1;let n=new Array(Object.keys(wx).length+1).fill(0);n[wx[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(wx).length+1).fill(0);i[wx[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(wx).length+1).fill(0);o[wx[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(wx).length+1).fill(0);return a[wx[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function hjt(t,e){return new fve(t.prefix,t.suffix,e)}s(hjt,"constructMultilineFeatures");function jYe(t,e){let r=hjt(t,e).constructFeatures();return HYe(r)[1]}s(jYe,"requestMultilineScore");d();d();d();d();async function*Sx(t,e){for await(let r of t)yield e(r)}s(Sx,"asyncIterableMap");async function*GYe(t,e){for await(let r of t)await e(r)&&(yield r)}s(GYe,"asyncIterableFilter");async function*o7(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(o7,"asyncIterableMapFilter");async function*VYe(...t){for(let e of t)yield*e}s(VYe,"asyncIterableConcat");d();async function s7(t,e,r,n){let i=Gr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Mt).updateExPValuesAndAssignments(n,i)}s(s7,"createTelemetryWithExpWithId");function Fc(t,{turn:e,conversation:r}={},n){return s7(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(Fc,"createTelemetryWithExpWithTurn");function a7(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(gjt(c))),a=a.extendedBy(u,f),a}s(a7,"extendUserMessageTelemetryData");function gjt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(gjt,"mapSkillResolutionsForTelemetry");function zYe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),IX(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(zYe,"createUserMessageTelemetryData");function YYe(t,e,r,n,i,o,a){let c=yjt(r);return IX(t.ctx,o,e,r,{source:"model",turnIndex:(t.conversation.turns.length-1).toString(),headerRequestId:i,uiKind:e,codeBlockLanguages:JSON.stringify(c),mode:(t.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:t.turn.getResolvedModelId()??"unknown"},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:n},a).properties.messageId}s(YYe,"createModelMessageTelemetryData");function KYe(t,e,r,n,i,o,a){IX(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(KYe,"createOffTopicMessageTelemetryData");function JYe(t,e,r,n,i,o,a,c,l){let u=IX(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return Ajt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(JYe,"createSuggestionMessageTelemetryData");var XYe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function ZYe(t,e,r){let n=await Fc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";_f(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(ZYe,"telemetryIndexCodesearch");function IX(t,e,r,n,i,o,a){let c=a??Gr.createAndMarkAsIssued();if(!("messageId"in i)&&!("messageId"in c.properties)){let m=Er();i.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let l={messageText:n,...i},u=c.extendedBy(i,o),f=c.extendedBy(l),p=au(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,f,1),u}s(IX,"telemetryMessage");function eKe(t,e,r,n){_f(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(eKe,"createSuggestionShownTelemetryData");function Ajt(t,e,r,n,i,o,a,c){_f(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(Ajt,"createSuggestionSelectedTelemetryData");function _f(t,e,r,n,i,o){let a=o??Gr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Bt(t,i,c),c}s(_f,"telemetryUserAction");function f3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(f3,"logEngineMessages");function au(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(au,"telemetryPrefixForUiKind");function yjt(t){let e=t.split(`
`),r=[],n;for(let i=0;i<e.length;i++){let o=e[i];if(n)new RegExp(`^\\s*${n.delimiter}\\s*$`).test(o)?(r.push({languageId:n.languageId,totalLines:n.totalLines}),n=void 0):n.totalLines++;else{let a=o.match(/^(\s*)(`{3,}|~{3,})([a-zA-Z0-9_+]*)/);a&&(n={delimiter:a[2],languageId:a[3],totalLines:0})}}return r}s(yjt,"getCodeBlocks");function tKe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(tKe,"uiKindToIntent");function HT(t){return t==="inline"?"conversationInline":"conversationPanel"}s(HT,"conversationSourceToUiKind");function rKe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};iKe(t,"round",i.extendedBy(o,a))}s(rKe,"createAgentRoundTelemetryData");function nKe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};iKe(t,"toolCall",c.extendedBy(l,u))}s(nKe,"createToolInvocationTelemetryData");function iKe(t,e,r){return Bt(t,`${au("agentPanel")}.${e}`,r)}s(iKe,"logAgenticEvent");function Cjt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(Cjt,"truncateContentIfNeeded");function TX(t,e,r,n,i,o,a){let c=`${au(e)}.${a}`,l=o.extendedBy(r,n);Bt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=Cjt(i.currentFileContent));let f=o.extendedBy(u,n);Bt(t,`${c}.restricted`,f,1)}s(TX,"telemetryEditSurvivalTracking");d();d();function _x(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(_x,"toString");var qp=new Ct("streamChoices"),pve=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new gve;this.tool_calls=[];this.function_call=new hve;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new mve),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function vjt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(vjt,"splitChunk");var mve=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},hve=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},gve=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},$T=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=UR(this.response);this.stats=new Ave;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),qp.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),qp.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;qp.debug(this.ctx,"chunk",a.toString());let[c,l]=vjt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{qp.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&xjt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?qp.error(this.ctx,"Error in response:",p.error.message):qp.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];qp.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new pve);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let A=this.asSolutionDecision(),y=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||y){let b=g.text.join("");if(A=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>c7(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(A.yieldSolution=!0,A.continueStreaming=!1),!A.yieldSolution)continue;let E=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:E,engineName:i??"",engineChoiceSource:bT(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:A.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;A.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&qp.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{qp.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>c7(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(qp.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function wX(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(qp.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),qp.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),qp.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=c7(e.solution);return SX(t,n,o,e.index,e.requestId,i,r)}s(wX,"prepareSolutionForReturn");function c7(t){let e=t.text.join(""),r=Ejt(t),n=bjt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(c7,"convertToAPIJsonData");function xjt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(xjt,"isCopilotConfirmation");function oKe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${_x(n)}. Input: '${t}'`)}}s(oKe,"parseCallArguments");function Ejt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=oKe(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(Ejt,"extractToolCalls");function bjt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=oKe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(bjt,"extractFunctionCall");var Ave=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new yve,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},yve=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function _X(t,e){return t!==null&&typeof t=="object"&&e in t}s(_X,"hasKey");function Rf(t,e){return _X(t,e)?t[e]:void 0}s(Rf,"getKey");var aKe=Ne(pi());var Ga=new Ct("fetchCompletions");function UR(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(UR,"getRequestId");function p3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(p3,"getProcessingTime");function cKe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(cKe,"uiKindToIntent");var b0=class{static{s(this,"OpenAIFetcher")}};function Ijt(t,e,r,n){return Ym(t,e,"proxy","v1/engines",r,n)}s(Ijt,"getProxyEngineUrl");function RX(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(RX,"sanitizeRequestOptionTelemetry");async function sKe(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(So),m=Ijt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},ED(e));RX(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=wa(),A=cKe(c);return Ax(t,m,a.token,A,i,o,u,f).then(y=>{let E=UR(y);h.extendWithRequestId(E);let b=wa()-g;return h.measurements.totalTimeMs=b,Ga.info(t,`Request ${i} at <${m}> finished with ${y.status} status after ${b}ms`),h.properties.status=String(y.status),Ga.debug(t,"request.response properties",h.properties),Ga.debug(t,"request.response measurements",h.measurements),Ga.debug(t,"prompt:",e),Bt(t,"request.response",h),y}).catch(y=>{if(Rd(y))throw Bt(t,"request.cancel",h),y;p.setWarning(Rf(y,"message")??"");let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(Rf(y,"name")??""),h.properties.code=String(Rf(y,"code")??""),h.properties.errno=String(Rf(y,"errno")??""),h.properties.type=String(Rf(y,"type")??"");let b=wa()-g;throw h.measurements.totalTimeMs=b,Ga.info(t,`Request ${i} at <${m}> rejected with ${String(y)} after ${b}ms`),Ga.debug(t,"request.error properties",h.properties),Ga.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),y}).finally(()=>{J9e(t,e,h)})}s(sKe,"fetchWithInstrumentation");async function Tjt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});RX(o,f,["messages"]),f.properties.headerRequestId=i,Bt(t,"request.sent",f);let p=wa(),m=cKe(c),h={...kC(t)};try{let g=await Ax(t,n,a.token,m,i,o,u,h),A=UR(g);f.extendWithRequestId(A);let y=wa()-p;return f.measurements.totalTimeMs=y,Ga.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${y}ms`),Ga.debug(t,"request.response properties",f.properties),Ga.debug(t,"request.response measurements",f.measurements),Ga.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",f),g}catch(g){if(Rd(g))throw Bt(t,"request.cancel",f),g;let A=f.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",A),f.properties.message=String(Rf(g,"name")??""),f.properties.code=String(Rf(g,"code")??""),f.properties.errno=String(Rf(g,"errno")??""),f.properties.type=String(Rf(g,"type")??"");let y=wa()-p;throw f.measurements.totalTimeMs=y,Ga.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${y}ms`),Ga.debug(t,"request.error properties",f.properties),Ga.debug(t,"request.error measurements",f.measurements),Bt(t,"request.error",f),g}finally{f3(t,e,f)}}s(Tjt,"fetchChatWithInstrumentation");function Cve(t){return GYe(t,e=>e.completionText.trim().length>0)}s(Cve,"postProcessChoices");var wjt="github.copilot.completions.quotaExceeded",l7=class extends b0{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(So),c="completions",l=await e.get(Br).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Ga.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=$T.create(e,r.count,u,n,[],o).processSSE(i),m=Sx(p,h=>wX(e,h,n));return{type:"success",choices:Cve(m),getProcessingTime:s(()=>p3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:f,model:c.name}),h=e.get(So),g=await e.get(Br).getToken(),A=await Tjt(e,r,c.id,f,o,p,g,i,m,u);if(u?.isCancellationRequested){let S=A.body();try{S&&"destroy"in S&&typeof S.destroy=="function"?S.destroy():S instanceof ReadableStream&&S.cancel()}catch(R){Ga.exception(e,R,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(A.status!==200){let S=Gr.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,S,A,g)}let E=$T.create(e,1,A,m,[],aKe.CancellationToken.None).processSSE(),b=Sx(E,S=>wX(e,S,n));return{type:"success",choices:Cve(b),getProcessingTime:s(()=>p3(A),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(So),c="speculation",l=await e.get(Br).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:Er(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){Ga.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let m=$T.create(e,1,f,n,[],o).processSSE(i),h=Sx(m,g=>wX(e,g,n));return{type:"success",choices:Cve(h),getProcessingTime:s(()=>p3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return Gr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await qC(0),a?.isCancellationRequested?"not-sent":await sKe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Mt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:PX(e),temperature:m3(e,n.count),top_p:kX(e),n:n.count,stop:lKe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=hx(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await qC(0),a?.isCancellationRequested?"not-sent":await sKe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:wjt,title:"Learn More"});let l=Ps(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Ga.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Ga.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Ga.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Br).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Ga.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Ga.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Ga.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function SX(t,e,r,n,i,o,a){return K9e(t,e,r,i,n),{completionText:e,meanLogProb:Sjt(t,r),meanAlternativeLogProb:_jt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:Er(),finishReason:r.finish_reason}}s(SX,"convertToAPIChoice");function Sjt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){un.exception(t,r,"Error calculating mean prob")}}s(Sjt,"calculateMeanLogProb");function _jt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){un.exception(t,r,"Error calculating mean prob")}}s(_jt,"calculateMeanAlternativeLogProb");function m3(t,e){return Gg(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(m3,"getTemperatureForSamples");var Rjt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function lKe(t,e){return Rjt[e??""]??[`


`,"\n```"]}s(lKe,"getStops");function kX(t){return 1}s(kX,"getTopP");function PX(t){return gO}s(PX,"getMaxSolutionTokens");var vve=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},DX=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new vve(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new gK(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=SX(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var Rh=class{constructor(){this.cache=new wr(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var BX=new Ct("getCompletions");function NX(t,e,r){t.get(Rh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=h3(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(NX,"telemetryShown");function uKe(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(uKe,"telemetryAccepted");function dKe(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(dKe,"telemetryRejected");function WT(t,e={}){return{...e,telemetryBlob:t}}s(WT,"mkCanceledResultTelemetry");function cc(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(cc,"mkBasicResultTelemetry");function fKe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=wa()-e.telemetryBlob.issuedTime,n=h3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return BX.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),$pe(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(BX.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}$pe(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(fKe,"handleGhostTextResultTelemetry");function h3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(h3,"resultTypeToString");d();d();d();async function kjt(t){if(t.isCancellationRequested)return;let e=new _h,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(kjt,"cancellationTokenToPromise");async function pKe(t,e){if(e){let r=kjt(e);await Promise.race([t,r])}else await t}s(pKe,"raceCancellation");function xve(t){return Array.isArray(t)}s(xve,"isArrayOfT");async function mKe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await hKe(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(mKe,"resolveAll");async function hKe(t,e){let r;return t instanceof Promise?r=await Pjt(t,e):r=await Djt(t,e),r}s(hKe,"resolve");async function Pjt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:xve(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await pKe(i,e),n.resolutionTime=performance.now()-r,n}s(Pjt,"resolvePromise");async function Djt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await pKe(i,e),n.resolutionTime=performance.now()-r,n}s(Djt,"resolveIterable");d();var Bjt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Njt="ms-vscode.cpptools",Mjt="CppCompletionContextProvider";function gKe(t,e,r,n){(e.includes(Mjt)||e.length===1&&e[0]==="*")&&yKe(t,r,n)}s(gKe,"fillInCppVSActiveExperiments");function AKe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Njt))&&yKe(t,r,n)}s(AKe,"fillInCppVSCodeActiveExperiments");function yKe(t,e,r){try{let n=Bjt,i=t.get(Mt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){un.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){un.exception(t,n,"fillInCppActiveExperiments")}}s(yKe,"addActiveExperiments");d();function MX(t,e,r){try{let n=t.get(Mt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return un.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(MX,"fillInCSharpActiveExperiments");d();var jT="fallbackContextProvider",LX={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function CKe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(jT))&&Ljt(t,r,n)}s(CKe,"fillInMultiLanguageActiveExperiments");function Ljt(t,e,r){try{let n=Fjt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){un.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(Ljt,"addActiveExperiments");function Fjt(t,e){let r=LX,n=t.get(Mt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){un.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(Fjt,"getMultiLanguageContextProviderParamsFromExp");function vKe(t){let e={...LX};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(vKe,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var Ojt="typescript-ai-context-provider";function xKe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(Ojt)))return!1;try{let i=t.get(Mt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return un.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(xKe,"fillInTsActiveExperiments");d();var EKe=x.Object({importance:x.Optional(x.Integer({minimum:0,maximum:100})),id:x.Optional(x.String()),origin:x.Optional(x.Union([x.Literal("request"),x.Literal("update")]))}),bKe=x.Intersect([x.Object({name:x.String(),value:x.String()}),EKe]),IKe=x.Intersect([x.Object({uri:x.String(),value:x.String(),additionalUris:x.Optional(x.Array(x.String()))}),EKe]),Qjt=[bKe,IKe],Ujt=x.Union(Qjt),qjt=new Map([["Trait",Xs.Compile(bKe)],["CodeSnippet",Xs.Compile(IKe)]]),Hjt=s(t=>t,"ensureTypesAreEqual");Hjt(!0);var $jt=x.Object({contextItems:x.Array(Ujt)}),Wjt=x.Object({selector:x.Array(x.Union([x.String(),x.Object({language:x.Optional(x.String()),scheme:x.Optional(x.String()),pattern:x.Optional(x.String())})]))}),Eve=x.Object({id:x.String()}),jjt=x.Intersect([Eve,Wjt]),Gjt=x.Intersect([Eve,$jt]),TKe=x.Object({providers:x.Array(jjt)}),wKe=x.Object({providers:x.Array(Eve)}),bve=x.Object({providers:x.Array(Gjt),updating:x.Optional(x.Array(x.String()))}),FX=x.Intersect([a6e,x.Object({contextItems:x.Optional(bve)})]);function OX(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(OX,"filterContextItemsByType");function SKe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of qjt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(SKe,"filterSupportedContextItems");function Vjt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(Vjt,"validateContextItemId");function _Ke(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??Er();if(!Vjt(o)){let a=Er();un.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=Er();un.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(_Ke,"addOrValidateContextItemsIDs");d();var ul=class{constructor(e=()=>new Ive){this.createStatistics=e;this.statistics=new wr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},Ive=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function QX(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(QX,"componentStatisticsToPromptMatcher");var RKe=Ne(pi());var Oc=class{static{s(this,"ContextProviderRegistry")}},HC=class{static{s(this,"DefaultContextProviders")}},A3=class extends HC{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},Tve=class extends Oc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return un.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;MX(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(R=>R[1]>0);if(f.filter(R=>R[1]<=0).forEach(([R,B])=>{let L={providerId:R.id,matchScore:B,resolution:"none",resolutionTimeMs:0,data:[]};u.push(L)}),p.length===0)return u;if(a?.isCancellationRequested)return un.debug(this.ctx,"Resolving context providers cancelled"),[];AKe(this.ctx,p.map(R=>R[0].id),l,o),CKe(this.ctx,p.map(R=>R[0].id),l,o),xKe(this.ctx,p.map(R=>R[0].id),l,o);let h=new RKe.CancellationTokenSource;if(a){let R=a.onCancellationRequested(B=>{h.cancel(),R.dispose()})}let g=R9(this.ctx)&&!hj(this.ctx)?0:zjt(this.ctx,o),A=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,y;g>0&&(y=setTimeout(()=>{h.cancel(),h.dispose()},g));let E=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:A,data:c};for(let[R]of p){let B=this.ctx.get(ul).getPreviousStatisticsForCompletion(r)?.get(R.id);B&&(b.previousUsageStatistics=B);let L=R.resolver.resolve(b,h.token);E.set(R.id,L)}let S=await mKe(E,h.token);y&&clearTimeout(y);for(let[R,B]of p){let L=S.get(R.id);if(L){if(L.status==="error")CK(L.reason)||un.error(this.ctx,`Error resolving context from ${R.id}: `,L.reason),u.push({providerId:R.id,matchScore:B,resolution:L.status,resolutionTimeMs:L.resolutionTime,data:[]});else{let O=[...L.value??[]];if((L.status==="none"||L.status==="partial")&&(un.info(this.ctx,`Context provider ${R.id} exceeded time budget of ${g}ms`),R.resolver.resolveOnTimeout))try{let U=R.resolver.resolveOnTimeout(b);xve(U)?O.push(...U):U&&O.push(U),O.length>0&&(L.status="partial")}catch(U){un.error(this.ctx,`Error in fallback logic for context provider ${R.id}: `,U)}let[K,V]=SKe(O);V&&un.error(this.ctx,`Dropped ${V} context items from ${R.id} due to invalid schema`);let z=_Ke(this.ctx,K),Q={providerId:R.id,matchScore:B,resolution:L.status,resolutionTimeMs:L.resolutionTime,data:z};u.push(Q)}this.ctx.get(ul).getStatisticsForCompletion(r).setLastResolution(R.id,L.status)}else un.error(this.ctx,`Context provider ${R.id} not found in results`)}return u.sort((R,B)=>B.matchScore-R.matchScore)}async matchProviders(r,n){let i=$X(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},wve=class extends Oc{constructor(r){super();this.delegate=r;this._cachedContextItems=new wr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function UX(t,e){return new wve(new Tve(t,e))}s(UX,"getContextProviderRegistry");function qX(t,e,r){let n=t.get(ul).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="full"||y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0,A=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),A!==void 0&&(h.numPartiallyUsedItems=A),h})}s(qX,"telemetrizeContextItems");function HX(t){return t.matchScore>0&&t.resolution!=="error"}s(HX,"matchContextItems");function $X(t,e){let r=Sve(t,e),n=zi(t,Ht.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(HC).getIds();return Array.from(new Set([...i,...r,...n]))}s($X,"getActiveContextProviders");function Sve(t,e){return R9(t)?["*"]:t.get(Mt).contextProviders(e)}s(Sve,"getExpContextProviders");function y3(t,e){return $X(t,e).length>0}s(y3,"useContextProviderAPI");function zjt(t,e){let r=zi(t,Ht.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Mt).contextProviderTimeBudget(e)}s(zjt,"getContextProviderTimeBudget");var I0=class{constructor(e){this.ctx=e;this.scheduledResolutions=new wr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){let c=this.ctx.get(Oc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var WX=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await gx(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},jX=class extends WX{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=PKe(r,n),this.isBlockStart(Yjt(r,n))&&this.isBlockBodyEmpty(r,n)}};function Yjt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(Yjt,"getLineAtOffset");function PKe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(PKe,"rewindToNearestNonWs");function kKe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(kKe,"indent");function Kjt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=kKe(t,r),i=kKe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(Kjt,"outdented");var $C=class extends WX{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&zWe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=PKe(r,n);let i=await gx(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&Kjt(f,p,r)?!0:!f.children.find(h=>h.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(h=>this.startKeywords.includes(h.type)),m=f.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=f.find(A=>A.hasError())?.children.find(A=>A.type=="block"));let h,g=0;for(let A of a.children){if(A.type==":"&&g==0){h=A;break}A.type=="("&&(g+=1),A.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let A=h.nextSibling;if(A.type=='"'||A.type=="'"||A.type=="ERROR"&&(A.text=='"""'||A.text=="'''"))return!0}return!1}break}case"javascript":{let h=f.find(y=>y.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=f.find(y=>y.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=f.find(A=>A.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||f.find(A=>A.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},Jjt={python:new $C("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new $C("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new $C("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new $C("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new jX("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new jX("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new $C("csharp",{},new Map([]),[],"block",null,!0),java:new $C("java",{},new Map([]),[],"block",null,!0),php:new $C("php",{},new Map([]),[],"block",null,!0),cpp:new $C("cpp",{},new Map([]),[],"block",null,!0)};function _ve(t){if(!Np(t))throw new Error(`Language ${t} is not supported`);return Jjt[hK(t)]}s(_ve,"getBlockParser");async function DKe(t,e,r){return Np(t)?_ve(t).isEmptyBlockStart(e,r):!1}s(DKe,"isEmptyBlockStart");async function BKe(t,e,r,n){if(Np(t))return _ve(t).isBlockBodyFinished(e,r,n)}s(BKe,"isBlockBodyFinished");async function NKe(t,e,r){if(Np(t))return _ve(t).getNodeStart(e,r)}s(NKe,"getNodeStart");var QGn=new Ct("parseBlock");function u7(t,e,r){let n=e.getText(vs.range(vs.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>BKe(o,n,a,i)}s(u7,"parsingBlockFinished");function VX(t,e){return DKe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(VX,"isEmptyBlockStartUtil");async function MKe(t,e,r,n){let o=e.getText(vs.range(vs.position(0,0),r))+n,a=await NKe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(MKe,"getNodeStartUtil");var Xjt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),Zjt=new RegExp(`^(${Xjt.join("|")})`);function eGt(t){return Zjt.test(t.trimLeft().toLowerCase())}s(eGt,"isContinuationLine");function GX(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(GX,"indentationOfLine");function zX(t,e){let r=t.getText(),n=t.offsetAt(e);return Rve(r,n,t.detectedLanguageId)}s(zX,"contextIndentation");function Rve(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,m){let h=p,g,A;for(;g===void 0&&h>=0&&h<f.length;)g=GX(f[h]),A=h,h+=m;if(r==="python"&&m===-1){h++;let y=f[h].trim();if(y.endsWith('"""')){if(!(y.startsWith('"""')&&y!=='"""'))for(h--;h>=0&&!f[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=GX(f[h]),A=h,h--}}return[g,A]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=GX(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(Rve,"contextIndentationFromText");var tGt=!1;function rGt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&tGt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=GX(u);if(f!==void 0&&(f<c||f===c&&!eGt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(rGt,"completionCutOrContinue");function LKe(t,e){return r=>{let n=rGt(r,t,e);return n==="continue"?void 0:n}}s(LKe,"indentationBlockFinished");d();d();d();d();d();d();var nGt={tokenizerName:"o200k_base"};function iGt(t){return{...nGt,...t}}s(iGt,"cursorContextOptions");function d7(t,e={}){let r=iGt(e),n=Ni(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(d7,"getCursorContext");d();d();var oGt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function FKe(t){let e=oGt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(FKe,"announceSnippet");var kve=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Pve=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=lGt.get(e.languageId)??cGt}tokenize(e){return new Set(sGt(e).filter(r=>!this.stopsForLanguage.has(r)))}},OKe=new kve(20),C3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Pve(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=OKe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(A=>A.forEach(y=>g.add(y),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:f,endLine:p})}return c&&OKe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function sGt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(sGt,"splitIntoWords");var aGt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),cGt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...aGt]),lGt=new Map([]);d();function YX(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(YX,"getBasicWindowDelineations");var KX=class t extends C3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return YX(this.windowLength,e)}_getCursorContextInfo(e){return d7(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return uGt(e,r)}};function uGt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(uGt,"computeScore");d();var JX=class t extends C3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return YX(this.windowLength,e)}_getCursorContextInfo(e){return d7(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):d7(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return dGt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await gx(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function dGt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(dGt,"computeScore");var fGt=0,pGt=60,mGt=4,hGt=1,gGt=20,AGt=1e4,QKe={snippetLength:pGt,threshold:fGt,maxTopSnippets:mGt,maxCharPerFile:AGt,maxNumberOfFiles:gGt,maxSnippetsPerFile:hGt,useSubsetMatching:!1};var Dve={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function yGt(t,e){return(e.useSubsetMatching?JX.FACTORY(e.snippetLength):KX.FACTORY(e.snippetLength)).to(t)}s(yGt,"getMatcher");async function UKe(t,e,r){let n=yGt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(UKe,"getSimilarSnippets");function qKe(t,e){return{...Dve,useSubsetMatching:Bve(t,e)}}s(qKe,"getCppSimilarFilesOptions");function HKe(t){return Dve.maxTopSnippets}s(HKe,"getCppNumberOfSnippets");var CGt=new Map([["cpp",qKe]]);function XX(t,e,r){let n=CGt.get(r);return n?n(t,e):{...QKe,useSubsetMatching:Bve(t,e)}}s(XX,"getSimilarFilesOptions");var vGt=new Map([["cpp",HKe]]);function $Ke(t,e){let r=vGt.get(e);return r?r(t):WWe}s($Ke,"getNumberOfSnippets");function Bve(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||zi(t,Ht.UseSubsetMatching))??!1}s(Bve,"useSubsetMatching");d();d();d();d();var xGt="content_excluded";async function ZX(t,e,r,n){let i=OX(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:f.providerId,data:p}))),c=t.get(Cr),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get(ul).getStatisticsForCompletion(e);return a.filter(f=>{let m=[f.data.uri,...f.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,xGt]]),m}).map(f=>f.data)}s(ZX,"getCodeSnippetsFromContextItems");function WKe(t,e){let r=t.get(Cr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(WKe,"addRelativePathToCodeSnippets");d();function lc(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(lc,"Text");function GT(t){return t.children}s(GT,"Chunk");d();function Xr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Xr,"functionComponentFunction");function kA(t){return{type:"f",children:t}}s(kA,"fragmentFunction");kA.isFragmentFunction=!0;var eZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(T0,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=WKe(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push(Xr(lc,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{f.push(Xr(lc,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&f.push(Xr(lc,{children:"---"}))}),Xr(GT,{children:f})})},"CodeSnippets");d();function Nve(t){return t.children}s(Nve,"CompletionsContext");function Mve(t){return t.children}s(Mve,"StableCompletionsContext");function Lve(t){return t.children}s(Lve,"AdditionalCompletionsContext");function tZ(t){return t.name===Nve.name||t.name===Mve.name||t.name===Lve.name}s(tZ,"isContextNode");d();d();d();function rZ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(rZ,"findEditDistanceScore");var f7=50;function Fve(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(Fve,"approximateMaxCharacters");function p7(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(T0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Fve(a);return Xr(kA,{children:[Xr(qR,{document:r,position:i,maxCharacters:m}),Xr(nZ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})]})}s(p7,"CurrentFile");function qR(t){if(t.document===void 0||t.position===void 0)return Xr(lc,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Xr(lc,{children:e})}s(qR,"BeforeCursor");function nZ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Xr(lc,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Xr(lc,{});if(r===o)return Xr(lc,{children:r});let a=o;if(r!==""){let c=Ni(t.tokenizer),l=c.takeFirstTokens(o,f7);l.tokens.length>0&&100*rZ(l.tokens,c.takeFirstTokens(r,f7).tokens)?.score<(t.suffixMatchThreshold??fK)*l.tokens.length&&(a=r)}return a!==r&&n(a),Xr(lc,{children:a})}s(nZ,"AfterCursor");function jKe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(T0,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=Fve(a);return Xr(qR,{document:r,position:i,maxCharacters:l})}s(jKe,"DocumentPrefix");function GKe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(T0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Fve(a);return Xr(nZ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})}s(GKe,"DocumentSuffix");d();var iZ=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===f.componentPath&&h.line!=="").map(h=>h.line).join(""),m=f.tokens;return p!==f.value&&(m=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function VKe(t){return t.map(e=>e.elidedValue).join("")}s(VKe,"makePrompt");function zKe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(zKe,"makePrefixPrompt");function YKe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(YKe,"makeContextPrompt");d();var v3=class{constructor(e,r=Ove()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function Ove(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===GT.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(Ove,"defaultTransformers");d();var m7={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Qve={};for(let[t,e]of Object.entries(m7))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Qve[r]=t;else Qve[t]=t;function JKe(t){return Qve[t]}s(JKe,"mdCodeBlockLangToLanguageId");var EGt={start:"//",end:""},bGt=["php","plaintext"],Uve={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function XKe(t){return Object.values(Uve).includes(t.trim())}s(XKe,"isShebangLine");function IGt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(IGt,"hasLanguageMarker");function TGt(t,e){let r=m7[e]?m7[e].lineComment:EGt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(TGt,"comment");function WC(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>TGt(o,e)).join(`
`);return r?i+`
`:i}s(WC,"commentBlockAsSingles");function oZ(t){let{languageId:e}=t;return bGt.indexOf(e)===-1&&!IGt(t)?e in Uve?Uve[e]:`Language: ${e}`:""}s(oZ,"getLanguageMarker");function sZ(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(sZ,"getPathMarker");function h7(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(h7,"newLineEnded");function ZKe(t){return KKe(typeof t=="string"?t:"plaintext")}s(ZKe,"getLanguage");function KKe(t){return m7[t]!==void 0?{languageId:t,...m7[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(KKe,"_getLanguage");var wGt=5,x3=class{constructor(){this.renderId=0;this.formatPrefix=VKe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new iZ,{blocks:[A,...y]}=g.elide(l,p,u,m,Ni(c)),E=performance.now(),b=this.formatPrefix(y),S=this.formatContext?this.formatContext(y):void 0,R=A.elidedValue,B=y.reduce((L,O)=>L+O.elidedTokens,0);return f.push(...SGt([...y,A])),{prefix:b,prefixTokens:B,suffix:R,suffixTokens:A.elidedTokens,context:S,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:E-h,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((L,O)=>L+(O.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-wGt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new v3(e,qve).walkSnapshot((f,p,m)=>{if(f===e||(f.name===p7.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:g7(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,A=g;m.type==="prefix"?A=f.value:XKe(f.value)?A=g:A=WC(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:g7(A),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${p7.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},qve=[...Ove(),(t,e,r)=>tZ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===qR.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===nZ.name?{...r,type:"suffix"}:r];function SGt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(SGt,"computeComponentStatistics");function g7(t){return t.replace(/\r\n?/g,`
`)}s(g7,"normalizeLineEndings");d();var aZ=s((t,e)=>{let[r,n]=e.useState();if(e.useData(T0,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Cr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Xr(_Gt,{docInfo:a}):Xr(RGt,{docInfo:a})}},"DocumentMarker"),_Gt=s(t=>Xr(lc,{children:sZ(t.docInfo)}),"PathMarker"),RGt=s(t=>Xr(lc,{children:oZ(t.docInfo)}),"LanguageMarker");d();d();d();d();function A7(t,e="Unreachable"){throw new Error(e)}s(A7,"assertNever");function Ml(t,e="unexpected state"){if(!t)throw new xn(`Assertion Failed: ${e}`)}s(Ml,"assert");function PA(t){if(!t()){debugger;t(),ZB(new xn("Assertion Failed"))}}s(PA,"assertFn");function Rx(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(Rx,"checkAdjacentItems");d();d();d();d();d();var kx=s((t,e)=>t===e,"strictEquals");d();d();var sa=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},y7=class{constructor(){this._first=sa.Undefined;this._last=sa.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===sa.Undefined}clear(){let e=this._first;for(;e!==sa.Undefined;){let r=e.next;e.prev=sa.Undefined,e.next=sa.Undefined,e=r}this._first=sa.Undefined,this._last=sa.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new sa(e);if(this._first===sa.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==sa.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==sa.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==sa.Undefined&&e.next!==sa.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===sa.Undefined&&e.next===sa.Undefined?(this._first=sa.Undefined,this._last=sa.Undefined):e.next===sa.Undefined?(this._last=this._last.prev,this._last.next=sa.Undefined):e.prev===sa.Undefined&&(this._first=this._first.next,this._first.prev=sa.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==sa.Undefined;)yield e.element,e=e.next}};d();var kGt=globalThis.performance&&typeof globalThis.performance.now=="function",E3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=kGt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var eJe=!1,PGt=!1,HR;(J=>{J.None=s(()=>Ss.None,"None");function e(j){if(PGt){let{onDidAddListener:$}=j,X=C7.create(),ie=0;j.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),X.print()),$?.()}}}s(e,"_addLeakageTraceLogic");function r(j,$){return h(j,()=>{},0,void 0,!0,void 0,$)}J.defer=r,s(r,"defer");function n(j){return($,X=null,ie)=>{let ae=!1,te;return te=j(pe=>{if(!ae)return te?te.dispose():ae=!0,$.call(X,pe)},null,ie),ae&&te.dispose(),te}}J.once=n,s(n,"once");function i(j,$){return J.once(J.filter(j,$))}J.onceIf=i,s(i,"onceIf");function o(j,$,X){return p((ie,ae=null,te)=>j(pe=>ie.call(ae,$(pe)),null,te),X)}J.map=o,s(o,"map");function a(j,$,X){return p((ie,ae=null,te)=>j(pe=>{$(pe),ie.call(ae,pe)},null,te),X)}J.forEach=a,s(a,"forEach");function c(j,$,X){return p((ie,ae=null,te)=>j(pe=>$(pe)&&ie.call(ae,pe),null,te),X)}J.filter=c,s(c,"filter");function l(j){return j}J.signal=l,s(l,"signal");function u(...j){return($,X=null,ie)=>{let ae=ize(...j.map(te=>te(pe=>$.call(X,pe))));return m(ae,ie)}}J.any=u,s(u,"any");function f(j,$,X,ie){let ae=X;return o(j,te=>(ae=$(ae,te),ae),ie)}J.reduce=f,s(f,"reduce");function p(j,$){let X,ie={onWillAddFirstListener(){X=j(ae.fire,ae)},onDidRemoveLastListener(){X?.dispose()}};$||e(ie);let ae=new Hp(ie);return $?.add(ae),ae.event}s(p,"snapshot");function m(j,$){return $ instanceof Array?$.push(j):$&&$.add(j),j}s(m,"addAndReturnDisposable");function h(j,$,X=100,ie=!1,ae=!1,te,pe){let Ae,Oe,Te,Je=0,Fe,lt={leakWarningThreshold:te,onWillAddFirstListener(){Ae=j(xt=>{Je++,Oe=$(Oe,xt),ie&&!Te&&(_t.fire(Oe),Oe=void 0),Fe=s(()=>{let ht=Oe;Oe=void 0,Te=void 0,(!ie||Je>1)&&_t.fire(ht),Je=0},"doFire"),typeof X=="number"?(clearTimeout(Te),Te=setTimeout(Fe,X)):Te===void 0&&(Te=0,queueMicrotask(Fe))})},onWillRemoveListener(){ae&&Je>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,Ae.dispose()}};pe||e(lt);let _t=new Hp(lt);return pe?.add(_t),_t.event}J.debounce=h,s(h,"debounce");function g(j,$=0,X){return J.debounce(j,(ie,ae)=>ie?(ie.push(ae),ie):[ae],$,void 0,!0,void 0,X)}J.accumulate=g,s(g,"accumulate");function A(j,$=(ie,ae)=>ie===ae,X){let ie=!0,ae;return c(j,te=>{let pe=ie||!$(te,ae);return ie=!1,ae=te,pe},X)}J.latch=A,s(A,"latch");function y(j,$,X){return[J.filter(j,$,X),J.filter(j,ie=>!$(ie),X)]}J.split=y,s(y,"split");function E(j,$=!1,X=[],ie){let ae=X.slice(),te=j(Oe=>{ae?ae.push(Oe):Ae.fire(Oe)});ie&&ie.add(te);let pe=s(()=>{ae?.forEach(Oe=>Ae.fire(Oe)),ae=null},"flush"),Ae=new Hp({onWillAddFirstListener(){te||(te=j(Oe=>Ae.fire(Oe)),ie&&ie.add(te))},onDidAddFirstListener(){ae&&($?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ie&&ie.add(Ae),Ae.event}J.buffer=E,s(E,"buffer");function b(j,$){return s((ie,ae,te)=>{let pe=$(new R);return j(function(Ae){let Oe=pe.evaluate(Ae);Oe!==S&&ie.call(ae,Oe)},void 0,te)},"fn")}J.chain=b,s(b,"chain");let S=Symbol("HaltChainable");class R{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map($){return this.steps.push($),this}forEach($){return this.steps.push(X=>($(X),X)),this}filter($){return this.steps.push(X=>$(X)?X:S),this}reduce($,X){let ie=X;return this.steps.push(ae=>(ie=$(ie,ae),ie)),this}latch($=(X,ie)=>X===ie){let X=!0,ie;return this.steps.push(ae=>{let te=X||!$(ae,ie);return X=!1,ie=ae,te?ae:S}),this}evaluate($){for(let X of this.steps)if($=X($),$===S)break;return $}}function B(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.on($,ie),"onFirstListenerAdd"),te=s(()=>j.removeListener($,ie),"onLastListenerRemove"),pe=new Hp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function L(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.addEventListener($,ie),"onFirstListenerAdd"),te=s(()=>j.removeEventListener($,ie),"onLastListenerRemove"),pe=new Hp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromDOMEventEmitter=L,s(L,"fromDOMEventEmitter");function O(j,$){return new Promise(X=>n(j)(X,null,$))}J.toPromise=O,s(O,"toPromise");function K(j){let $=new Hp;return j.then(X=>{$.fire(X)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}J.fromPromise=K,s(K,"fromPromise");function V(j,$){return j(X=>$.fire(X))}J.forward=V,s(V,"forward");function z(j,$,X){return $(X),j(ie=>$(ie))}J.runAndSubscribe=z,s(z,"runAndSubscribe");class Q{constructor($,X){this._observable=$;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:s(()=>{$.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{$.removeObserver(this)},"onDidRemoveLastListener")};X||e(ie),this.emitter=new Hp(ie),X&&X.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,X){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(j,$){return new Q(j,$).emitter.event}J.fromObservable=U,s(U,"fromObservable");function Z(j){return($,X,ie)=>{let ae=0,te=!1,pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(j.reportChanges(),te&&(te=!1,$.call(X)))},handlePossibleChange(){},handleChange(){te=!0}};j.addObserver(pe),j.reportChanges();let Ae={dispose(){j.removeObserver(pe)}};return ie instanceof Ju?ie.add(Ae):Array.isArray(ie)&&ie.push(Ae),Ae}}J.fromObservableLight=Z,s(Z,"fromObservableLight")})(HR||={});var Hve=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new E3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},tJe=-1;var $ve=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new Wve(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},C7=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Wve=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},jve=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},DGt=0,b3=class{constructor(e){this.value=e;this.id=DGt++}static{s(this,"UniqueContainer")}},BGt=2,NGt=s((t,e)=>{if(t instanceof b3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),Hp=class{constructor(e){this._size=0;this._options=e,this._leakageMon=tJe>0||this._options?.leakWarningThreshold?new $ve(e?.onListenerError??ZB,this._options?.leakWarningThreshold??tJe):void 0,this._perfMon=this._options?._profName?new Hve(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(eJe){let e=this._listeners;queueMicrotask(()=>{NGt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new jve(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||ZB)(f),Ss.None}if(this._disposed)return Ss.None;r&&(e=e.bind(r));let i=new b3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=C7.create(),o=this._leakageMon.check(i.stack,this._size+1)),eJe&&(i.stack=a??C7.create()),this._listeners?this._listeners instanceof b3?(this._deliveryQueue??=new Gve,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=Mc(()=>{o?.(),this._removeListener(i)});return n instanceof Ju?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*BGt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||ZB;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof b3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Gve=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var kf=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return oJe(e,this)}},rJe=new Map,Vve=new WeakMap;function oJe(t,e){let r=Vve.get(t);if(r)return r;let n=MGt(t,e);if(n){let i=rJe.get(n)??0;i++,rJe.set(n,i);let o=i===1?n:`${n}#${i}`;return Vve.set(t,o),o}}s(oJe,"getDebugName");function MGt(t,e){let r=Vve.get(t);if(r)return r;let n=e.owner?FGt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=cZ(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=LGt(e.owner,t);if(c!==void 0)return n+c}}s(MGt,"computeDebugName");function LGt(t,e){for(let r in t)if(t[r]===e)return r}s(LGt,"findKey");var nJe=new Map,iJe=new WeakMap;function FGt(t){let e=iJe.get(t);if(e)return e;let r=OGt(t),n=nJe.get(r)??0;n++,nJe.set(r,n);let i=n===1?r:`${r}#${n}`;return iJe.set(t,i),i}s(FGt,"formatOwner");function OGt(t){let e=t.constructor;return e?e.name:"Object"}s(OGt,"getClassName");function cZ(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(cZ,"getFunctionName");d();var $R;function uZ(t){$R?$R instanceof lZ?$R.loggers.push(t):$R=new lZ([$R,t]):$R=t}s(uZ,"addLogger");function _a(){return $R}s(_a,"getLogger");var zve;function sJe(t){zve=t}s(sJe,"setLogObservableFn");function aJe(t){zve&&zve(t)}s(aJe,"logObservable");var lZ=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var cJe;function lJe(t){cJe=t}s(lJe,"_setRecomputeInitiallyAndOnChange");var uJe;function dJe(t){uJe=t}s(dJe,"_setKeepObserved");var Yve;function fJe(t){Yve=t}s(fJe,"_setDerivedOpts");var dZ=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return Yve({owner:n,debugName:s(()=>{let o=cZ(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Yve({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(cJe(this,r)),this}keepObserved(e){return e.add(uJe(this)),this}get debugValue(){return this.get()}},VT=class extends dZ{constructor(){super();this.observers=new Set;_a()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&_a()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&_a()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!_a();return aJe(this),r||_a()?.handleObservableCreated(this),this}};function pZ(t,e){let r=new I3(t,e);try{t(r)}finally{r.finish()}}s(pZ,"transaction");function Kve(t,e,r){t?e(t):pZ(e,r)}s(Kve,"subtransaction");var I3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];_a()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():cZ(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,_a()?.handleEndTransaction(this)}};function DA(t,e){let r;return typeof t=="string"?r=new kf(void 0,t,void 0):r=new kf(t,void 0,void 0),new fZ(r,e,kx)}s(DA,"observableValue");var fZ=class extends VT{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,_a()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new I3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),_a()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function WR(t){return new T3(new kf(void 0,void 0,t),t,void 0,void 0)}s(WR,"autorun");function Jve(t,e){return new T3(new kf(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Jve,"autorunOpts");function mZ(t,e){return new T3(new kf(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(mZ,"autorunHandleChanges");function Xve(t,e){let r=new Ju,n=mZ({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return Mc(()=>{n.dispose(),r.dispose()})}s(Xve,"autorunWithStoreHandleChanges");function Zve(t){let e=new Ju,r=Jve({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Mc(()=>{r.dispose(),e.dispose()})}s(Zve,"autorunWithStore");var T3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),_a()?.handleAutorunCreated(this),this._runIfNeeded(),n3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),_a()?.handleAutorunDisposed(this),i3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){_a()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){MR(n)}finally{this._isRunning=!1}}}finally{this.disposed||_a()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}PA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){_a()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){MR(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new xn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=T3)(WR||={});d();function hZ(t,e){return new jR(new kf(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??kx)}s(hZ,"derivedOpts");fJe(hZ);var jR=class extends VT{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,_a()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),_a()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){MR(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new xn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}PA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){_a()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){MR(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new xn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function exe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new zT(new kf(e,void 0,n),r,n,()=>zT.globalTransaction,kx)}s(exe,"observableFromEvent");var zT=class extends VT{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,Kve(this._getTransaction(),c=>{_a()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||_a()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=zT;function e(n,i){let o=!1;zT.globalTransaction===void 0&&(zT.globalTransaction=n,o=!0);try{i()}finally{o&&(zT.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(exe||={});function mJe(t){let e=new gZ(!1,void 0);return t.addObserver(e),Mc(()=>{t.removeObserver(e)})}s(mJe,"keepObserved");dJe(mJe);function hJe(t,e){let r=new gZ(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Mc(()=>{t.removeObserver(r)})}s(hJe,"recomputeInitiallyAndOnChange");lJe(hJe);var gZ=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function kh(t,e,r,n){let i=new AZ(r,n);return hZ({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new AZ(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(kh,"mapObservableArrayCached");var AZ=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new Ju;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function txe(t,e){let r;return Xve({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(txe,"runOnChange");d();d();d();var gJe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),yZ;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof w3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:HR.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:gJe})})(yZ||={});var w3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?gJe:(this._emitter||(this._emitter=new Hp),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Px=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w3),this._token}cancel(){this._token?this._token instanceof w3&&this._token.cancel():this._token=yZ.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w3&&this._token.dispose():this._token=yZ.None}};d();var CZ;function AJe(t){CZ||(CZ=new x7,uZ(CZ)),CZ.addFilteredObj(t)}s(AJe,"logObservableToConsole");var x7=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return QGt([S3(HGt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[S3(" "),Ph(v7(e.oldValue,70),{color:"red",strikeThrough:!0}),S3(" "),Ph(v7(e.newValue,60),{color:"green"})]:[S3(" (unchanged)")]:[S3(" "),Ph(v7(e.newValue,60),{color:"green"}),S3(" (initial)")]}handleObservableCreated(e){if(e instanceof jR){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof jR){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([_3("observable value changed"),Ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Ph(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([_3("derived recomputed"),Ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("derived cleared"),Ph(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("observable from event triggered"),Ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("autorun"),Ph(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("transaction"),Ph(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function QGt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(QGt,"consoleTextToArgs");function S3(t){return Ph(t,{color:"black"})}s(S3,"normalText");function _3(t){return Ph($Gt(`${t}: `,10),{color:"black",bold:!0})}s(_3,"formatKind");function Ph(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Ph,"styled");function v7(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?UGt(t,e):qGt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(v7,"formatValue");function UGt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${v7(i,e-r.length)}`}return r+=" ]",r}s(UGt,"formatArray");function qGt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${v7(o,e-r.length)}`}return r+=" }",r}s(qGt,"formatObject");function HGt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(HGt,"repeat");function $Gt(t,e){for(;t.length<e;)t+=" ";return t}s($Gt,"padStr");sJe(AJe);var WGt=!1;WGt&&uZ(new x7);d();var GR;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(GR||={});d();d();d();function yJe(t){return t}s(yJe,"identity");var vZ=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=yJe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},Dx=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=yJe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var Dh=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function VR(t){return t<0?0:t>4294967295?4294967295:t|0}s(VR,"toUint32");function k3(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(k3,"escapeRegExpCharacters");function bJe(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}s(bJe,"ltrim");function Bh(t){return t.split(/\r\n|\r|\n/)}s(Bh,"splitLines");function GGt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(GGt,"compareSubstring");function VGt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l===u)continue;if(l>=128||u>=128)return GGt(t.toLowerCase(),e.toLowerCase(),r,n,i,o);CJe(l)&&(l-=32),CJe(u)&&(u-=32);let f=l-u;if(f!==0)return f}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(VGt,"compareSubstringIgnoreCase");function CJe(t){return t>=97&&t<=122}s(CJe,"isLowerAsciiLetter");function IJe(t,e){let r=e.length;return e.length>t.length?!1:VGt(t,e,0,r)===0}s(IJe,"startsWithIgnoreCase");function YT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(YT,"commonPrefixLength");function Bx(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(Bx,"commonSuffixLength");var zGt=/^[\t\n\r\x20-\x7E]*$/;function rxe(t){return zGt.test(t)}s(rxe,"isBasicASCII");var iZn=String.fromCharCode(65279);var vJe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=YGt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function YGt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(YGt,"getGraphemeBreakRawData");var xJe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Dh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new vZ({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let m=0;m<f.length;m+=2)p.set(f[m],f[m+1]);return p}s(r,"arrayToMap");function n(f,p){let m=new Map(f);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(f,p){if(!f)return p;let m=new Map;for(let[h,g]of f)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Dh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},EJe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Vt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new xn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new xn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var qr=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var ir=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new qr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new qr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var Hr=class t{static{s(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=bh(e=>e.startLineNumber,Ih)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new xZ(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new xZ(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new xn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new xn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ir(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ir(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new Vt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},xZ=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=XB(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=SA(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=k1e(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=k1e(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Hr(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=XB(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=SA(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new Hr(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Hr(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var cu=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ir(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ir(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ir(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Hr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new qr(e.lineNumber,e.column+this.columnCount):new qr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return ir.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var lu=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new nxe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Bh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},nxe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=SA(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new qr(n,i)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return cu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new cu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var BA=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var EZ=class extends Ss{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=DA(this,n),this.selection=DA(this,i),this.languageId=DA(this,o),this._register(Mc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function Nx(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return mZ({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(Nx,"autorunWithChanges");d();var jC=class extends Ss{static{s(this,"RecentEditsProvider")}};function KGt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(KGt,"editIsTooCloseToCursor");var bZ=s((t,e)=>{let[r,n]=e.useState();return e.useData(T0,async i=>{if(!i.document)return;let o=t.ctx.get(jC);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(Cr),f=[];for(let m=c.length-1;m>=0&&!(f.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let y=h.file===i.document?.uri,E=y?i.position.line:void 0;if(KGt(h,y,E,a.activeDocDistanceLimitFromCursor))continue;let S=o.getEditSummary(h);if(S){l.add(h.file);let R=u.getRelativePath({uri:h.file});f.unshift(h7(`File: ${R}`)+h7(S))}}if(f.length===0){n(void 0);return}let p=h7("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+h7("End of recent edits");n(p)}),r?Xr(GT,{children:Xr(lc,{children:r})}):void 0},"RecentEdits");d();d();d();d();var ixe=new wr;function TJe(t){return[...t].sort((e,r)=>{let n=ixe.get(e.uri)??0;return(ixe.get(r.uri)??0)-n})}s(TJe,"sortByAccessTimes");var wJe=s(t=>t.get(Cr).onDidFocusTextDocument(e=>{e.document&&ixe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var IZ=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>zR.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&TZ(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=this.truncateDocs(TJe(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function SJe(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(SJe,"shortCircuit");d();function XGt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(XGt,"defaultHash");function oxe(t,e={}){let{hash:r=XGt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(oxe,"memoize");var _Je={entries:[],traits:[]},wZ={entries:new Map,traits:[]},sxe=class extends wr{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},Ll=new Ct("relatedFiles"),ZGt=1e3,SZ=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},YR=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{Ll.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){Ll.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){Ll.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){Ll.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(Mi).readFileString(e)}catch(r){Ll.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(ll).evaluate(e,r)).isBlocked}catch(n){Ll.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},eVt=3,RJe=new sxe(ZGt);async function kJe(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){Ll.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(RJe.bumpRetryCount(e.uri)>=eVt?a=wZ:a=void 0);let c=performance.now()-o;if(Ll.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new SZ;return a}s(kJe,"getRelatedFiles");var axe=oxe(kJe,{cache:RJe,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});axe=SJe(axe,200,wZ);async function _Z(t,e,r,n,i,o=!1){let a=t.get(YR),c=wZ;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await kJe(t,l,r,n,a):await axe(t,l,r,n,a)}catch(l){c=wZ,l instanceof SZ&&Bt(t,"getRelatedFilesList",r)}return Ll.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(_Z,"getRelatedFilesAndTraits");function TZ(t,e){return AO(t)===AO(e)}s(TZ,"considerNeighborFile");var zR=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(Cr);t.instance===void 0&&(t.instance=new IZ(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(tVt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return Ll.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return Ll.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await _Z(e,f,i,o,a,c);return m.entries.size===0?(Ll.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let A=[];h.forEach((y,E)=>{let b=t.getRelativePath(E,p.uri);if(!b||u.docs.has(E))return;let S={relativePath:b,uri:E,source:y};A.unshift(S),u.docs.set(E,S)}),A.length>0&&u.neighborSource.set(g,A.map(y=>y.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function tVt(t,e){return t.get(Mt).excludeRelatedFiles(e)||zi(t,Ht.ExcludeRelatedFiles)}s(tVt,"isExcludeRelatedFilesActive");function PJe(t,e){return t.get(Mt).includeNeighboringFiles(e)||zi(t,Ht.IncludeNeighboringFiles)}s(PJe,"isIncludeNeighborFilesActive");var RZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(T0,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=zR.defaultEmptyResult();l.turnOffSimilarFiles||(u=await zR.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let m=P3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,A)=>g.score-A.score).map(g=>({...FKe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,m){let h=l.similarFilesOptions||XX(t.ctx,u,f.detectedLanguageId),A=t.ctx.get(Cr).getRelativePath(f),y={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:A,languageId:f.detectedLanguageId};return await UKe(y,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Xr(kA,{children:[...i.map((l,u)=>Xr(rVt,{snippet:l}))]})},"SimilarFiles"),rVt=s((t,e)=>Xr(GT,{children:[Xr(lc,{children:t.snippet.headline}),Xr(lc,{children:t.snippet.snippet})]}),"SimilarFile");d();d();var kZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(T0,a=>{a.traits!==r&&n(a.traits);let c=AO(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Xr(kA,{children:[Xr(lc,{children:`Consider this related information:
`}),...r.map(a=>Xr(lc,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function DJe(t,e){return zi(t,Ht.UseSplitContextPrompt)??t.get(Mt).enablePromptContextProxyField(e)}s(DJe,"shouldUseSplitContextPrompt");function BJe(t){return Xr(kA,{children:[Xr(Mve,{children:[Xr(aZ,{ctx:t,weight:.7}),Xr(kZ,{weight:.6}),Xr(eZ,{ctx:t,weight:.9}),Xr(RZ,{ctx:t,weight:.8})]}),Xr(GKe,{weight:1}),Xr(Lve,{children:Xr(bZ,{ctx:t,weight:.99})}),Xr(jKe,{weight:1})]})}s(BJe,"splitContextCompletionsPrompt");d();var NJe=0;function nVt(){NJe=0}s(nVt,"resetContextIndex");function iVt(){return NJe++}s(iVt,"getNextContextIndex");var PZ=class extends x3{constructor(){super(...arguments);this.formatPrefix=zKe;this.formatContext=YKe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(nVt(),new v3(r,oVt).walkSnapshot((f,p,m)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===qR.name&&(c=!0),f.value===void 0||f.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:g7(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let A=g==="prefix",y=A||f.value.endsWith(n)?f.value:f.value+n;i.push({type:A?"prefix":"context",value:g7(y),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source,index:A?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${qR.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},oVt=[...qve,(t,e,r)=>tZ(t)?{...r,index:iVt()}:r];d();function DZ(t,e,r){let n=OX(r,"Trait");for(let o of n)sVt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(DZ,"getTraitsFromContextItems");function sVt(t,e,r,n){let i=t.get(ul).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(sVt,"setupExpectationsForTraits");var aVt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function BZ(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=aVt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Bt(e,t,c)}}s(BZ,"ReportTraitsTelemetry");d();d();d();var NZ=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},MZ=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var LZ=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(cVt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new lxe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new cxe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},cxe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},lxe=class{constructor(e){this.lifecycleData=e;this.stateHook=new NZ(e.state),this.dataHook=new MZ(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function cVt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(cVt,"isFragmentFunction");var E7=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new LZ(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function T0(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(T0,"isCompletionRequestData");var uxe={default:{promptFunction:MJe,renderer:x3},splitContext:{promptFunction:BJe,renderer:PZ}};function MJe(t){return Xr(kA,{children:[Xr(Nve,{children:[Xr(aZ,{ctx:t,weight:.7}),Xr(kZ,{weight:.6}),Xr(eZ,{ctx:t,weight:.9}),Xr(RZ,{ctx:t,weight:.8}),Xr(bZ,{ctx:t,weight:.99})]}),Xr(p7,{weight:1})]})}s(MJe,"defaultCompletionsPrompt");var FZ=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new E7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=P3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let f=i?.separateContext?"splitContext":"default";this.setPromptOrdering(f);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:A}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return Mx;let y=this.virtualPrompt.snapshot(o),E=y.status;if(E==="cancelled")return Mx;if(E==="error")return this.errorPrompt(y.error);let b=this.renderer.render(y.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return Mx;if(b.status==="error")return this.errorPrompt(b.error);let[S,R]=KT(b.prefix),B={...b,prefix:S},L;if(y3(this.ctx,n)){let K=QX(b.metadata.componentStatistics);this.ctx.get(ul).getStatisticsForCompletion(e).computeMatch(K),L=qX(this.ctx,e,A),un.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(L)}'`)}let O=performance.now();return this.resetIfEmpty(b),this.successPrompt(B,O,p,R,L)}async updateComponentData(e,r,n,i,o,a,c,l,u={},f,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,f,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(y3(this.ctx,n)){a=await this.ctx.get(I0).resolution(e);let{textDocument:f}=r,p=a.filter(HX);uVt(this.ctx,f.detectedLanguageId,p,n)||(u=!0),c=DZ(this.ctx,e,p),BZ("contextProvider.traits",this.ctx,c,f.detectedLanguageId,f.detectedLanguageId,n),l=await ZX(this.ctx,e,p,f.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Mx;if((await this.ctx.get(ll).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return UZ;if((n>0?e.getText().length:e.offsetAt(r))<OZ)return QZ}createRequestData(e,r,n,i,o,a,c,l,u,f,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:f,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return qa(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),D3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new E7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(uxe[this.promptOrdering]?.promptFunction??MJe)(this.ctx)}getRenderer(){let e=uxe[this.promptOrdering]??uxe.default;return new e.renderer}};function uVt(t,e,r,n){let i=["cpp","c"];return PJe(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(uVt,"similarFilesEnabled");d();d();d();d();d();var qZ="[...]",dVt=0,GC=-1;function uc(){return dVt++}s(uc,"getAvailableNodeId");function fVt(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(fVt,"elideChildren");function dxe(t,e=qZ){return r=>t.tokenLength(fVt(r,e))}s(dxe,"getTokenizerCostFunction");d();var B3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,i=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),i<this.size&&this.heap[i].priority>this.heap[r].priority&&(r=i),r===e)break;let o=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=o,e=r}}};var w0=class{constructor(e,r,n,i,o=0,a=!1,c=qZ,l=!1){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=l;this.weightFromChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/Math.max(this.cost,1)}get isRenderedChildRequired(){return this.requireRenderedChild||this.weightFromChild}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new B3([]);let i=new B3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.weightFromChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.weightFromChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function LJe(t,e={}){let{budget:r,mask:n,costFunction:i}=e,o=n??[],a=new Set(Array.isArray(o)?o:[o]);if((r??t.cost)<t.cost||a.has(t.id))return{text:t.elisionMarker,cost:i?i(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let p=s(y=>a.has(y.id),"elider"),m=[],h=new Map;if(pxe(t,m,p,h),m.length===0)return fxe(t,i);let g=m.join(""),A=i?i(g):[...h.values()].reduce((y,E)=>y+E.cost,0);return{text:g,cost:A,renderedNodes:h}}let c=new Map,l=[],u=new B3([{item:t,priority:t.value}]),f=r;for(;f>0&&u.size>0;){let{item:p}=u.pop();if(!a.has(p.id)&&p.cost<=f){f-=p.cost,c.set(p.id,p),l.push(p);for(let m of p.children)u.insert(m,m.value)}}for(;c.size>0;){let p=[],m=s(y=>!c.has(y.id),"elider"),h=new Map;if(pxe(t,p,m,h),p.length===0)return fxe(t,i);let g=p.join("");if(i===void 0){let y=[...h.values()].reduce((E,b)=>E+b.cost,0);return{text:g,cost:y,renderedNodes:h}}let A=i(g);if(A<=r)return{text:g,cost:A,renderedNodes:h};for(c=h;l.length>0&&A>r;){let y=l.pop();c.has(y.id)&&(A-=y.cost,c.delete(y.id))}if(l.length===0)break}return fxe(t,i)}s(LJe,"render");function fxe(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}s(fxe,"renderEmpty");function pxe(t,e,r,n,i=!1){let o=e.length;if(r(t))return o>=2&&(i||e[o-2]===t.elisionMarker&&e[o-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let a=t.isRenderedChildRequired,c=!0;for(let[l,u]of t.children.entries())e.push(t.text[l]??""),c=pxe(u,e,r,n,u.canMerge&&!c),a&&=!c;if(a){for(;e.length>o;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}s(pxe,"recursivelyRender");function b7(t,e,r=qZ){let n=t.children.map(a=>b7(a,e,r));r=t.elisionMarker??r;let i=e(t);return new w0(t.id,t.text,n,i,0,t.canMerge,r)}s(b7,"snapshot");var JT=new w0(uc(),[""],[],0);d();function Nh(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(Nh,"setDefault");var UJe=2e4,FJe=0,OJe=new wr;function qJe(t,e,r,n){FJe++;let i=r.promptOpts?.tokenizer??"o200k_base",o=performance.now(),{root:a,mask:c,statistics:l}=t.snapshot(r,n),u=performance.now(),f=new Set(c),p=OJe?.get(a.id),m;if(p&&p.budget>=e&&p.render.cost<=e&&p.tokenizer===i&&f.size===p.mask.size&&[...f].every(b=>p.mask.has(b)))m=p.render;else{let b=Ni(i);m=LJe(a,{budget:e,mask:c,costFunction:s(R=>b.tokenLength(R),"costFunction")}),OJe.set(a.id,{budget:e,mask:f,tokenizer:i,render:m})}let{text:h,cost:g,renderedNodes:A}=m,y=performance.now();for(let[b,S]of l?.entries()??[])S.actualTokens=A.get(b)?.cost??0;let E={renderId:FJe,rendererName:"renderNode",tokenizer:i,elisionTimeMs:y-u,renderTimeMs:u-o,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:g}]};return{root:a,renderedNodes:A,text:h,cost:g,metadata:E}}s(qJe,"renderWithMetadata");function HJe(t,e){return r=>{let n=r.text.join("")+`
`;return Nh(e,n,()=>t.tokenLength(n)+1)}}s(HJe,"cachedLineCostFunction");function $Je(t,e,r){let i=t.split(`
`).map(f=>({id:uc(),text:[f],children:[],canMerge:!0})),o=[""];i.length>=1&&o.push(...Array(i.length-1).fill(`
`),"");let a={id:uc(),text:o,children:i,canMerge:!0},l=b7(a,s(f=>f.id===a.id?0:e(f),"nodeCostFunction")),u=r?i.length:1;for(let f of l.children)f.weight=u*Math.max(1,f.cost),u+=r?-1:1;return l}s($Je,"getLinewiseNode");var HZ=class{constructor(){this.name="basicPrefix";this.costCache=new wr(UJe)}static{s(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r,promptOpts:n}=e,i=r.textDocument.getText({start:{line:0,character:0},end:r.position}),o=Ni(n?.tokenizer),a=HJe(o,this.costCache);return{root:$Je(i,a,!1)}}},QJe={root:JT,text:"",cost:0},$Z=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new wr(5);this.costCache=new wr(UJe)}static{s(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:i}=e,a=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(a==="")return QJe;let c=this.cache.get(r.textDocument.uri)||QJe;if(c.text===a)return c;let l=this.ctx.get(Mt).suffixMatchThreshold(n);if(c.text!==""){let h=new xT,g=h.takeFirstTokens(a,f7);if(g.tokens.length>0&&100*rZ(g.tokens,h.takeFirstTokens(c.text,f7).tokens)?.score<l*g.tokens.length)return c}let u=Ni(i?.tokenizer),f=HJe(u,this.costCache),p=$Je(a,f,!0),m=p.children.reduce((h,g)=>h+g.cost+1,0);return{root:p,cost:m,text:a}}},WZ=class{constructor(){this.name="traitProvider"}static{s(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Ni(n?.tokenizer);if(!r||r.traits.length===0)return{root:JT};let o=new Map,a=0,c=[],l=new Map;for(let m of r.traits){let h=uc(),g=`${m.name}: ${m.value}`,A=new w0(h,[g],[],i.tokenLength(g));c.push(A),l.set(h,{componentPath:m.id,source:m,expectedTokens:A.cost}),o.set(h,m.importance??0),a+=m.importance??0}let f=[`Related context:
`,...new Array(c.length).fill(`
`)],p=new w0(uc(),f,c,0,0,!0,"");return p.updateWeights(m=>(o.get(m.id)??0)/(a||1)),{root:p,statistics:l}}},jZ=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{s(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Ni(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:JT};let o=new Map;for(let h of r.codeSnippets){let g=h.uri;Nh(o,g,()=>[]).push(h)}let a=new Map,c=[],l=new Map,u=0,f=this.ctx.get(Cr);for(let[h,g]of o.entries()){let A=f.getRelativePath({uri:h})??h,E=[`Compare ${g.length>1?"these snippets":"this snippet"} from ${A}:
`,...new Array(g.length).fill(`
`)],b=[];for(let S of g){let R=uc();l.set(R,S.importance??0);let B=new w0(R,[S.value],[],i.tokenLength(S.value));b.push(B),u+=S.importance??0,a.set(R,{componentPath:S.id,source:S,expectedTokens:B.cost})}c.push(new w0(uc(),E,b,i.tokenLength(E.join("")),0,!0,""))}let p=new Array(c.length+1).fill(""),m=new w0(uc(),p,c,0,0,!0,"");return m.updateWeights(h=>(l.get(h.id)??0)/(u||1)),{root:m,statistics:a}}},GZ=class{constructor(e,r){this.name=e;this.components=r}static{s(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(u=>u.snapshot(e,r)),i=n.map(u=>u.root).filter(u=>u.id!==JT.id);if(i.length===0)return{root:JT};let o=["",...Array(i.length-1).fill(`
`),""],a=new w0(uc(),o,i,0,0,!0,"",!0),c=[],l=new Map;for(let u of n){for(let[f,p]of u.statistics?.entries()??[])l.set(f,p);u.mask&&c.push(...u.mask)}return{root:a,mask:c,statistics:l}}};var pVt=.8,VZ=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{s(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Mt).suffixPercent(e),n=this.ctx.get(Mt).stableContextPercent(e),i=this.ctx.get(Mt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(i<0||i>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${i}`);let o=100-r-n-i;if(o<=1||o>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${o}`);return{prefix:o/100,suffix:r/100,stableContext:n/100,volatileContext:i/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:i,telemetryData:o,promptOpts:a}=e,c=await this.failFastPrompt(i.textDocument,r);if(c)return c;let l=performance.now(),u;y3(this.ctx,o)&&(u=await this.resolveContext(n,i,o,r));let f=performance.now()-l,p={},m={renderId:this.renderId,rendererName:"w",tokenizer:a?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:f,componentStatistics:[]},h=i.textDocument.detectedLanguageId,{maxPromptLength:g}=P3(this.ctx,o,h),A=this.getComponentAllocation(o),y=A.suffix*g,E=this.components.suffix.estimatedCost?.(e,u),b=["stableContext","volatileContext","prefix","suffix"];y>pVt*(E??0)&&(b=["stableContext","volatileContext","suffix","prefix"]);let S=0;for(let z of b){let Q=S+g*A[z],U=qJe(this.components[z],Q,e,u);S=Q-U.cost,p[z]=U,mVt(m,U.metadata)}let[R,B]=KT(p.prefix.text),L=performance.now(),O=y3(this.ctx,o)?this.telemetrizeContext(n,m.componentStatistics,u?.resolvedContextItems??[]):[],K=[p.stableContext.text.trim(),p.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:a?.separateContext?R:WC(K.join(`
`),h)+`

`+R,prefixTokens:p.prefix.cost+p.stableContext.cost+p.volatileContext.cost,suffix:p.suffix.text,suffixTokens:p.suffix.cost,context:a?.separateContext?K:void 0,isFimEnabled:p.suffix.text.length>0},computeTimeMs:L-l,trailingWs:B,neighborSource:new Map,metadata:m,contextProvidersTelemetry:O}}async resolveContext(e,r,n,i){let o=await this.ctx.get(I0).resolution(e),{textDocument:a}=r,c=o.filter(HX),l=DZ(this.ctx,e,c);BZ("contextProvider.traits",this.ctx,l,a.detectedLanguageId,a.detectedLanguageId,n);let u=await ZX(this.ctx,e,c,a.detectedLanguageId);return{traits:l,codeSnippets:u,resolvedContextItems:o}}telemetrizeContext(e,r,n){let i=QX(r);this.ctx.get(ul).getStatisticsForCompletion(e).computeMatch(i);let o=qX(this.ctx,e,n);return un.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(o)}'`),o}async failFastPrompt(e,r){if(r?.isCancellationRequested)return Mx;if((await this.ctx.get(ll).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return UZ;if(e.getText().length<OZ)return QZ}errorPrompt(e){return qa(this.ctx,e,"WorkspaceContextPromptFactory"),D3}};function mVt(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}s(mVt,"aggregateMetadata");d();d();function hVt(t){return t.id!==void 0}s(hVt,"isNodeItem");function gVt(t){return!("uri"in t)&&!("id"in t)}s(gVt,"isNullItem");var AVt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},XT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",N3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==GC),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},zZ=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=AVt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new N3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new N3(r.items):new N3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(GC);if(c!==void 0&&c>0){o.delete(GC);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),f=c/Math.max(u.length,1);for(let p of u)o.set(p,f)}else for(let[u,f]of[...o.entries()])o.set(u,f+c*(f/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new N3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(gVt(r))return{weight:r.weight,uri:XT,id:GC};let n=hVt(r)?r.id:GC,i=r.uri??this.activeContext.getUri(n)??XT;return i===XT&&(n=GC),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0||isNaN(c))continue;let l=Nh(r,o,()=>new Map),u=GC;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let f=l!==XT?this.activeContext.normalizeUri(l)??XT:XT;for(let[p,m]of u.entries())l===XT||p===GC?n.set(f,(n.get(f)??0)+m):r.push({uri:f,id:p,weight:m}),i+=m}if(i<=0)return[];n.delete(XT),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:GC,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};d();d();d();var $p=class{static{s(this,"FileSearch")}};d();d();var YZ=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*jJe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},yVt=6,KZ=class{constructor(e,r,n,i){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=uc();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(i??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,i=n;for(;i;)n=i,i=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=uc()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:f}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:f})}let o=i[0].root.parent,a=e.parts[0].root.parent;if((o&&this.canMergeChildren(o))!==(a&&this.canMergeChildren(a)))return this.invalidateNode(e),!1;let c=WJe(i,this.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e),!1;let l=new YZ(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=WJe(e,this.document),i=new YZ(uc(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);this.canBeNode(o)&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let A=g.endOffset-g.startOffset;h-=A,r-=A}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let f=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);f.push(this.createNode(h,p)),p=!0}return f}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>yVt}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function WJe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(WJe,"buildText");function*jJe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*jJe(r,e))}s(jJe,"walk");d();d();d();var JZ=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.range={start:m,end:m};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)}}static{s(this,"IndentationNode")}get type(){return this.raw.type}};function mxe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:mxe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=mxe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new JZ(uc(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(mxe,"recursivelyBuildNode");function GJe(t){let e=AR(t.getText(),t.detectedLanguageId);return mxe(e,t.lineCount,t)??new JZ(uc(),e,[],0,t.lineCount-1,t)}s(GJe,"parse");var VJe={source:"indentation",parse:GJe,update(t,e){return{root:GJe(e),remapper:s(()=>{},"remapper")}},dispose:s(()=>{},"dispose"),labeler:{isIdentifier:s(t=>!1,"isIdentifier"),isText:s(t=>!0,"isText")}};async function zJe(t){return Promise.resolve(VJe)}s(zJe,"getParser");var CVt=new Ct("WorkspaceContextManager"),XZ=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},ZZ=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},YJe=5e3,eee=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new wr(YJe);this.allowedExtensions=new Set(dR);this.invalidDocumentCache=new U_(YJe,this.config.InvalidCacheTime),this.cachedDocuments=new mj(this.config.MaxActiveFiles)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(Cr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>Cx[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if($G(e),r=kl(e),!(this.ctx.get(Cr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(k6e(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new XZ(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new ZZ(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new _h;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new ZZ(n,i=>this.disposeDocument(i))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let a=new Set(r.getAllIds());r.update(n);let c=new Set(r.getAllIds()),l=[...c].filter(f=>!a.has(f)),u=[...a].filter(f=>!c.has(f));return this.recordDocumentChanges(e,{created:l,invalidated:u}),r}let o=new KZ(n,i,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:o.getAllIds(),invalidated:[]}),o}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=Nh(this.createdNodes,e,()=>new Set),i=Nh(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await zJe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(Cr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get($p).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){CVt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,3600*1e3);return}let o=await this.ctx.get(En).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};var KJe=Ne(require("events"));var vVt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},NA=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new _h;this.config=vVt;this.emitter=new KJe.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new eee(e,this.config),this.coordinator=new zZ(this.contextManager,this.config),this.tokenEventDisposable=Ps(e,r=>{this.maybeStart(r)})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(e){if(this.didStart||this.didDispose)return;let r=zi(this.ctx,Ht.UseWorkspaceContextCoordinator);if(r===void 0)try{let n=await this.ctx.get(Mt).updateExPValuesAndAssignments(void 0,void 0,e);r=this.isEnabled(n)}catch{}r&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return zi(this.ctx,Ht.UseWorkspaceContextCoordinator)??this.ctx.get(Mt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),vn.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),vn.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights(),r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await qC(n)}}}catch(e){yx(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function hxe(t,e){let r=eu(t,e,"event.WorkspaceContextUpdate");return t.get(NA).onUpdate(r)}s(hxe,"onWorkspaceContextUpdate");d();var xVt=2e4,tee=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=JT;this.costFunction=dxe(new xT);this.disposables=[];this.costCache=new wr(xVt);this.rootWithPathCache=new wr;this.disposables.push(hxe(e,r=>{(this.nextUpdateTime===void 0||performance.now()>=this.nextUpdateTime)&&setTimeout(()=>{this.update(r.weights,r.context)},0)}))}static{s(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;this.nextUpdateTime=this.lastUpdateTime!==void 0?this.lastUpdateTime+this.ctx.get(Mt).workspaceContextCacheTime(n):performance.now();let i=Nh(this.rootWithPathCache,r.textDocument.uri,()=>{let a=dxe(Ni(e.promptOpts?.tokenizer));this.costFunction=l=>Nh(this.costCache,l.id,()=>a(l));let c=this.getPathMarker(r);return new w0(uc(),[`${c}
`,""],[this.root],1,0,!0,"")}),o=this.getMask(r.textDocument.uri);return{root:i,mask:o}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(Cr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?WC(sZ(o),o.languageId):WC(oZ(o),o.languageId)}update(e,r){this.rootWithPathCache.clear(),this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=b7(o,this.costFunction);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode(),this.lastUpdateTime=performance.now()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new w0(uc(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:uc(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(Cr).getRelativePath({uri:e});return WC(`Related portions of ${i??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};d();d();var ree=class extends VZ{static{s(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new tee(e),prefix:new HZ,suffix:new $Z(e),volatileContext:new GZ("volatileContext",[new WZ,new jZ(e)])};super(e,r)}};var JJe=Ne(pi());var Lx=class{static{s(this,"CompletionsPromptFactory")}};function nee(t,e,r){return new gxe(new Axe(new yxe(t,new FZ(t,e,r),new ree(t),bVt)))}s(nee,"createCompletionsPromptFactory");var gxe=class extends Lx{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Mx;try{return await this.delegate.prompt(r,n)}catch{return D3}}},EVt=1200,Axe=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new JJe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(XJe)},EVt)})])}},yxe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function bVt(t,e){let r=t.get(NA);return r.isEnabled(e)&&r.isActive()}s(bVt,"workspaceContextEnabledAndActive");var OZ=10,QZ={type:"contextTooShort"},UZ={type:"copilotContentExclusion"},D3={type:"promptError"},Mx={type:"promptCancelled"},XJe={type:"promptTimeout"};function KT(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(KT,"trimLastLine");function M3(t,e,r,n,i,o={}){let c=t.get(Cr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=TVt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=DJe(t,n);return t.get(Lx).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(M3,"extractPrompt");function IVt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:WC(n,e)}s(IVt,"addNeighboringCellsToPrompt");function TVt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&TZ(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>IVt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(TVt,"applyEditsForNotebook");function P3(t,e,r){let i=t.get(Mt).maxPromptCompletionTokens(e)-PX(t),o=$Ke(e,r),a=XX(t,e,r),c=t.get(Mt).suffixPercent(e),l=t.get(Mt).suffixMatchThreshold(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l}}s(P3,"getPromptOptions");d();d();var ZJe=2.98410452738298,eXe=-.838732736843507,tXe=1.50314646255716,rXe=-.237798634012662,iee={python:.314368072478742},nXe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var wVt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function SVt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(SVt,"linearInterpolation");var L3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},Cxe=class{constructor(e,r,n){this.link=wVt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return SVt(n,this.logitsToQuantiles)}},iXe=new Cxe(ZJe,[new L3("compCharLen",eXe,t=>Math.log(1+t)),new L3("meanLogProb",tXe),new L3("meanAlternativeLogProb",rXe)].concat(Object.entries(iee).map(t=>new L3(t[0],t[1]))),nXe);function oXe(t,e){let r={...e.measurements};return Object.keys(iee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),iXe.predict(t,r)}s(oXe,"ghostTextScoreConfidence");function sXe(t,e){let r={...e.measurements};return Object.keys(iee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),iXe.quantile(t,r)}s(sXe,"ghostTextScoreQuantile");d();d();var _Vt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function oee(t){let e=t.slice();return e.reverse(),aXe(e)||aXe(e.filter(r=>r.trim().length>0))}s(oee,"isRepetitive");function aXe(t){let e=RVt(t);for(let r of _Vt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(aXe,"isRepeatedPattern");function RVt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(RVt,"kmp_prefix_function");function kVt(t,e,r,n){let i="}";try{i=VWe(e.detectedLanguageId)??"}"}catch{}return PVt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(kVt,"maybeSnipCompletion");function PVt(t,e,r,n){let i=DVt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let A=e.line+1+f+l;if(p=A>=t.getLineCount()?void 0:t.getLineText(A),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+f+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(PVt,"maybeSnipCompletionImpl");function DVt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(DVt,"splitByNewLine");function BVt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(BVt,"matchesNextLine");function I7(t,e,r,n,i,o){if(oee(n.tokens)){let c=Gr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(BVt(e,r,a.completionText,!i)){let c=Gr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",c),Bt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=kVt(t,e,r,a.completionText),a.completionText?a:void 0}s(I7,"postProcessChoiceInContext");function cXe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(cXe,"checkSuffix");var fXe=Ne(gI());var ds=new Ct("ghostText");var lXe=20;async function pXe(t,e,r,n,i,o,a){ds.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=m3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:ZWe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l,code_annotations:!1},p=zi(t,Ht.ModelAlwaysTerminatesSingleline)??t.get(Mt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&LC.isSupported(e.languageId)&&!p;!e.multiline&&!m?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let A={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},y=await t.get(b0).fetchAndStreamCompletions(t,A,r,i,n);return y.type==="failed"?{type:"failed",reason:y.reason,telemetryData:cc(r)}:y.type==="canceled"?(ds.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:y.reason,telemetryData:WT(r)}):a(h,y.getProcessingTime(),y.choices)}catch(A){if(Rd(A))return{type:"canceled",reason:"network request aborted",telemetryData:WT(r,{cancelledNetworkRequest:!0})};if(ds.exception(t,A,"Error on ghost text request"),t.get(lf).notifyUser(t,A),_4(t))throw A;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:cc(r)}}}s(pXe,"genericGetCompletionsFromNetwork");function vxe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(vxe,"postProcessChoices");async function MVt(t,e,r,n,i){return pXe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return ds.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:cc(r)};if(n?.isCancellationRequested)return ds.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:WT(r)};let f=u.value;if(f===void 0)return ds.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:cc(r)};hXe(t,"performance",f,o,a),ds.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=vxe(f,e);p&&(see(t,e,p),ds.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;ds.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let A=vxe(g,e,h);A&&(h.push(A),see(t,e,A))}})();return Gg(t)&&await m,p?{type:"success",value:[xxe(p,{forceSingleLine:!1}),m],telemetryData:cc(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:cc(r)}})}s(MVt,"getCompletionsFromNetwork");async function LVt(t,e,r,n,i){return pXe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return ds.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:WT(r)};let f=vxe(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)see(t,e,u);hXe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:cc(r),telemetryBlob:r,resultType:3}})}s(LVt,"getAllCompletionsFromNetwork");function xxe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(xxe,"makeGhostAPIChoice");function uXe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(uXe,"takeNLines");async function FVt(t,e,r,n,i,o,a,c){let l=t.get(Mt).multilineAfterAcceptLines(c),u=t.get(xA).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:uXe(l),stop:[`

`],maxTokens:lXe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(f=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let f;try{f=await GVt(t,u,e.textDocument,e.position,o,a,n)}catch{f={requestMultiline:!1}}if(!a&&f.requestMultiline&&t.get(Mt).singleLineUnlessAccepted(c)&&(f.requestMultiline=!1),f.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=vs.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...dXe(t,u,e.textDocument,p,f.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:uXe(l),stop:[`

`],maxTokens:lXe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...dXe(t,u,e.textDocument,e.position,f.blockPosition,r,!1,n.prompt,c)}}}}s(FVt,"getGhostTextStrategy");function dXe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&LC.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Mt).longLookaheadSize(l):t.get(Mt).shortLookaheadSize(l);return{finishedCb:new DX(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};see(t,h,m)}).getFinishedCallback(),maxTokens:t.get(Mt).maxMultilineTokens(l)}}return{finishedCb:a?u7(t,r,n):u=>{}}}s(dXe,"buildFinishedCallback");var OVt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function QVt(t,e,r){let n=zi(t,Ht.CompletionsDebounce)??t.get(Mt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=wa()-r.issuedTime;return Math.max(0,n-i)}s(QVt,"getRemainingDebounceMs");function T7(t,e,r){return r?.isCancellationRequested||e!==t.get(S0).currentRequestId}s(T7,"inlineCompletionRequestCancelled");async function UVt(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(y){let E=wa();c.push([y,E-a]),a=E}s(l,"recordPerformance"),l("telemetry");let u=t.get(Mt);if(T7(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:cc(n)};let f=HVt(e.textDocument,e.position);if(f===void 0)return ds.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:cc(n)};let p=bT(t,n),m={...OVt,...o,tokenizer:p.tokenizer},h=await M3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return ds.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:cc(n)};if(h.type==="contextTooShort")return ds.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:cc(n)};if(h.type==="promptError")return ds.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:cc(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return ds.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:cc(n)};if(h.type==="promptTimeout")return ds.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:cc(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return ds.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:cc(n)};let g=QVt(t,m,n);return g>0&&(ds.debug(t,`Debouncing ghost text request for ${g}ms`),await qC(g),T7(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:cc(n)}:t.get(So).withProgress(async()=>{let[y]=KT(e.textDocument.getText(vs.range(vs.position(0,0),e.position))),E=t.get(S0).hasAcceptedCurrentCompletion(y,h.prompt.suffix),b=h.prompt,S=await FVt(t,e,y,h,m.isCycling,f,E,n);l("strategy");let R=qVt(t,y,b,S.requestMultiline);l("cache");let B=IT(t,e.textDocument.uri),L={blockMode:S.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:B,engineModelId:p.modelId,ourRequestId:r,prefix:y,prompt:h.prompt,multiline:S.requestMultiline,indentation:zX(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:S.stop,maxTokens:S.maxTokens,afterAccept:E};L.headers={...L.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let O=JVt(t,e.textDocument,L,e.position,h,n,p,m);if(R===void 0&&!m.isCycling&&t.get(E0).shouldWaitForAsyncCompletions(y,h.prompt)){let $=await t.get(E0).getFirstMatchingRequestWithTimeout(r,y,h.prompt,m.isSpeculative,O);if(l("asyncWait"),$){let X=!S.requestMultiline;R=[[xxe($[0],{forceSingleLine:X})],4]}if(T7(t,r,i))return ds.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:cc(O)}}let K=S.blockMode==="moremultiline"&&LC.isSupported(e.textDocument.detectedLanguageId);if(R!==void 0&&(R[0]=R[0].map($=>I7(t,e.textDocument,e.position,$,K,ds)).filter($=>$!==void 0)),R!==void 0&&R[0].length===0)return ds.debug(t,`Found empty inline suggestions locally via ${h3(R[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:cc(O)};if(R!==void 0&&R[0].length>0&&(!m.isCycling||R[0].length>1))ds.debug(t,`Found inline suggestions locally via ${h3(R[1])}`);else{if(m.isCycling){let $=await LVt(t,L,O,i,S.finishedCb);if($.type==="success"){let X=R?.[0]??[];$.value[0].forEach(ie=>{X.findIndex(ae=>ae.completionText.trim()===ie.completionText.trim())===-1&&X.push(ie)}),R=[X,3]}else if(R===void 0)return $}else{let $=s((te,pe)=>(t.get(E0).updateCompletion(r,te),S.finishedCb(te,pe)),"finishedCb"),X=new vn.CancellationTokenSource,ie=MVt(t,L,O,X.token,$);t.get(E0).queueCompletionRequest(r,y,h.prompt,X,ie);let ae=await t.get(E0).getFirstMatchingRequest(r,y,h.prompt,m.isSpeculative);if(ae===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:cc(O)};R=[[ae[0]],4]}l("network")}if(R===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:cc(O)};let[V,z]=R,Q=V.map($=>I7(t,e.textDocument,e.position,$,K,ds)).filter($=>$!==void 0),U=zi(t,Ht.CompletionsDelay)??u.completionsDelay(n),Z=wa()-n.issuedTime,J=Math.max(U-Z,0);if(z!==2&&!m.isCycling&&J>0&&(ds.debug(t,`Waiting ${J}ms before returning completion`),await qC(J),T7(t,r,i)))return ds.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:WT(O)};let j=[];for(let $ of Q){let X=KVt(t,e.textDocument,L,$,O),ie=f?cXe(e.textDocument,e.position,$):0,te={completion:VVt($.choiceIndex,$.completionText,h.trailingWs),telemetry:X,isMiddleOfTheLine:f,suffixCoverage:ie,copilotAnnotations:$.copilotAnnotations,clientCompletionId:$.clientCompletionId};j.push(te)}return O.properties.clientCompletionId=j[0]?.clientCompletionId,O.measurements.foundOffset=j?.[0]?.telemetry?.measurements?.foundOffset??-1,ds.debug(t,`Produced ${j.length} results from ${h3(z)} at ${O.measurements.foundOffset} offset`),T7(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:WT(O)}:(m.isSpeculative||t.get(S0).setGhostText(y,h.prompt.suffix,Q,z),l("complete"),{type:"success",value:[j,z],telemetryData:cc(O),telemetryBlob:O,resultType:z,performanceMetrics:c})})}s(UVt,"getGhostTextWithoutAbortHandling");async function Exe(t,e,r,n){let i=Er();t.get(S0).currentRequestId=i;let o=await YVt(t,e.textDocument,i,n);await cR.catch(()=>{});try{return t.get(I0).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(UC).notifyRequest(e,i,o,r,n),await UVt(t,e,i,o,r,n)}catch(a){if(Rd(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:WT(o,{cancelledNetworkRequest:!0})};throw a}}s(Exe,"getGhostText");function qVt(t,e,r,n){let i=t.get(S0).getCompletionsForUserTyping(e,r.suffix),o=zVt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(qVt,"getLocalInlineSuggestion");function HVt(t,e){let r=$Vt(e,t),n=WVt(e,t);return r&&!n?void 0:r&&n}s(HVt,"isInlineSuggestion");function $Vt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s($Vt,"isMiddleOfTheLine");function WVt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(WVt,"isValidMiddleOfTheLinePosition");function jVt(t,e){return e.lineAt(t).text.trim().length===0}s(jVt,"isNewLine");var Fx=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function GVt(t,e,r,n,i,o,a){if(t.get(Fx).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",Gr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&LC.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await YWe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&jVt(n,r))return{requestMultiline:!0};let l=!1;return!i&&Np(r.detectedLanguageId)?l=await VX(r,n):i&&Np(r.detectedLanguageId)&&(l=await VX(r,n)||await VX(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=jYe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(GVt,"shouldRequestMultiline");function see(t,e,r){t.get(RA).append(e.prefix,e.prompt.suffix,r)}s(see,"appendToCache");function VVt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(VVt,"adjustLeadingWhitespace");function zVt(t,e,r,n){let i=t.get(RA).findAll(e,r);return i.length===0?(ds.debug(t,"Found no completions in cache"),[]):(ds.debug(t,`Found ${i.length} completions in cache`),i.map(o=>xxe(o,{forceSingleLine:!n})))}s(zVt,"getCompletionsFromCache");async function YVt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=Gr.createAndMarkAsIssued(i);return await t.get(Mt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(YVt,"createTelemetryWithExp");function KVt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,mXe(l,e),l.extendWithRequestId(o),l.measurements.confidence=oXe(t,l),l.measurements.quantile=sXe(t,l),ds.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(KVt,"telemetryWithAddData");function JVt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);mXe(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(vs.range(p.range.start,n)),h=e.getText(vs.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(S=>(0,fXe.SHA256)(S).toString())]),A={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},y={...ED(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(A.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(A.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let E=u.extendedBy(A,y);return Bt(t,"ghostText.issued",E),u}s(JVt,"telemetryIssued");function mXe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(mXe,"addDocumentTelemetry");function hXe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,c)}s(hXe,"telemetryPerformance");var S0=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&gXe(this.choices[0].completionText,n))return XVt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function XVt(t,e){return t.filter(r=>gXe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(XVt,"adjustChoicesStart");function gXe(t,e){return t.startsWith(e)&&t.length>e.length}s(gXe,"startsWithAndExceeds");d();d();d();var KR=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Cr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var bxe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??vn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:vn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:vn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function VC(t,e){return new bxe(t,e)}s(VC,"createCompletionState");d();d();d();d();d();d();var AXe="code-referencing";var _0=new Ct(AXe);var ZVt=3e3,Ixe=2,yXe=256,CXe=Math.log(yXe)/Math.log(Ixe)/Ixe,MA={connection:"disabled",maxAttempts:CXe,retryAttempts:0,initialWait:!1},aee,cee=[];function ezt(){if(aee)return aee;function t(E){return cee.push(E),()=>{let b=cee.indexOf(E);b!==-1&&cee.splice(b,1)}}s(t,"subscribe");function e(){for(let E of cee)E()}s(e,"afterUpdateConnection");function r(E){MA.connection!==E&&(MA.connection=E,e())}s(r,"updateConnection");function n(){return MA.connection==="connected"}s(n,"isConnected");function i(){return MA.connection==="disconnected"}s(i,"isDisconnected");function o(){return MA.connection==="retry"}s(o,"isRetrying");function a(){return MA.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function f(){r("disabled")}s(f,"setDisabled");function p(E){MA.initialWait!==E&&(MA.initialWait=E)}s(p,"setInitialWait");function m(E,b=ZVt){o()||(u(),p(!0),g(E,b))}s(m,"enableRetry");function h(){return MA.initialWait}s(h,"isInitialWait");async function g(E,b){_0.info(E,`Attempting to reconnect in ${b}ms.`),await A(b),p(!1);let S=E.get($r);function R(B,L){if(B>yXe){_0.info(L,"Max retry time reached, disabling."),f();return}let O=s(async()=>{MA.retryAttempts=Math.min(MA.retryAttempts+1,CXe);try{_0.info(L,`Pinging service after ${B} second(s)`);let K=await S.fetch(new URL("_ping",wD(L)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(K.status!==200||!K.ok)R(B**2,L);else{_0.info(L,"Successfully reconnected."),c();return}}catch{R(B**2,L)}},"tryAgain");setTimeout(()=>void O(),B*1e3)}s(R,"succeedOrRetry"),_0.info(E,"Attempting to reconnect."),R(Ixe,E)}s(g,"attemptToPing");let A=s(E=>new Promise(b=>setTimeout(b,E)),"timeout");function y(E){return{dispose:t(E)}}return s(y,"listen"),aee={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:f,enableRetry:m,listen:y,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},aee}s(ezt,"registerConnectionState");var JR=ezt();d();var uu={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},w7={[uu.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[uu.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[uu.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function Txe(t){return t===401?uu.Unauthorized:t===400?uu.BadArguments:t===404?uu.NotFound:t===429?uu.RateLimit:t>=500&&t<600?uu.InternalError:t>=600?uu.ConnectionError:uu.Unknown}s(Txe,"getErrorType");function zC(t,e,r={}){return{kind:"failure",reason:Txe(Number(t)),code:Number(t),msg:e,meta:r}}s(zC,"createErrorResponse");d();var tzt=/^[1-6][0-9][0-9]$/,rzt=/([A-Z][a-z]+)/,nzt="code_referencing",S7=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[nzt,this.baseKey,...e].join(".")}},wxe=class extends S7{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Gr.createAndMarkAsIssued();Bt(e,r,n)}handleFocus({context:e}){let r=Gr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Bt(e,n,r)}handleWrite({context:e}){let r=Gr.createAndMarkAsIssued(),n=this.buildKey("write","count");Bt(e,n,r)}},Tci=new wxe,Sxe=class extends S7{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Gr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Bt(e,i,n)}handleDismiss({context:e,actor:r}){let n=Gr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Bt(e,i,n)}},wci=new Sxe,_xe=class extends S7{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=Gr.createAndMarkAsIssued({origin:r,reason:n});cA(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=Gr.createAndMarkAsIssued({origin:r,reason:n});cA(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(tzt)){_0.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(rzt).filter(c=>!!c).join("_").toLowerCase(),a=Gr.createAndMarkAsIssued({message:i});cA(e,this.buildKey(o,r),a)}},lee=new _xe;var izt="twirp/github.snippy.v1.SnippyAPI";async function Rxe(t,e,r,n){let i;try{i=await t.get(Br).getToken()}catch{return JR.setDisconnected(),zC(401,w7[uu.Unauthorized])}if(_0.info(t,`Calling ${e}`),JR.isRetrying())return zC(600,"Attempting to reconnect to the public code matching service.");if(JR.isDisconnected())return zC(601,"The public code matching service is offline.");let o;try{o=await t.get($r).fetch(Ym(t,i,"origin-tracker",`${izt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...Ap(t)},signal:n})}catch{return JR.enableRetry(t),zC(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let A=g.message;throw lee.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:A}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:f}=c,p=Number(l),m=Txe(p),h=u||"unknown error";switch(m){case uu.Unauthorized:return zC(l,w7[uu.Unauthorized],f);case uu.BadArguments:return zC(l,h,f);case uu.RateLimit:return JR.enableRetry(t,60*1e3),zC(l,w7.RateLimitError,f);case uu.InternalError:return JR.enableRetry(t),zC(l,w7[uu.InternalError],f);default:return zC(l,h,f)}}s(Rxe,"call");d();var uee=x.Object({kind:x.Literal("failure"),reason:x.String(),code:x.Number(),msg:x.String(),meta:x.Optional(x.Any())}),szt=x.Object({matched_source:x.String(),occurrences:x.String(),capped:x.Boolean(),cursor:x.String(),github_url:x.String()}),vXe=x.Object({source:x.String()}),azt=x.Object({snippets:x.Array(szt)}),xXe=x.Union([azt,uee]),EXe=x.Object({cursor:x.String()}),czt=x.Object({commit_id:x.String(),license:x.String(),nwo:x.String(),path:x.String(),url:x.String()}),lzt=x.Object({has_next_page:x.Boolean(),cursor:x.String()}),uzt=x.Object({count:x.Record(x.String(),x.String())}),dzt=x.Object({file_matches:x.Array(czt),page_info:lzt,license_stats:uzt}),bXe=x.Union([dzt,uee]);async function IXe(t,e,r){let n=await Rxe(t,"Match",{method:"POST",body:QR(vXe,{source:e})},r);return QR(xXe,n)}s(IXe,"Match");async function TXe(t,{cursor:e},r){let n=await Rxe(t,"FilesForMatch",{method:"POST",body:QR(EXe,{cursor:e})},r);return QR(bXe,n)}s(TXe,"FilesForMatch");d();var _7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),dee=65;function mzt(t){let e=0,r;_7.lastIndex=0;do if(r=_7.exec(t),r&&(e+=1),e>=dee)break;while(r);return e}s(mzt,"lexemeLength");function hzt(t,e){let r=0,n;_7.lastIndex=0;do if(n=_7.exec(t),n&&(r+=1,r>=e))return _7.lastIndex;while(n);return t.length}s(hzt,"offsetFirstLexemes");function wXe(t,e){let r=t.split("").reverse().join(""),n=hzt(r,e);return r.length-n}s(wXe,"offsetLastLexemes");function R7(t){return mzt(t)>=dee}s(R7,"hasMinLexemeLength");function Azt(t){return BC.Check(uee,t)}s(Azt,"isError");async function SXe(t,e){let r=await e();if(Azt(r)){lee.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(SXe,"snippyRequest");function _Xe(t){return"kind"in t&&t.kind==="failure"}s(_Xe,"isMatchError");async function RXe(t,e,r,n){let o=await t.get(Cr).getTextDocument({uri:e});if(!o){_0.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!R7(a)||!R7(a))return;let c=r;if(!R7(r)){let h=a.slice(0,n),g=wXe(h,dee);c=a.slice(g,n+r.length)}if(!R7(c))return;let l=await SXe(t,()=>IXe(t,c));if(!l||_Xe(l)||!l.snippets.length){_0.info(t,"No match found");return}_0.info(t,"Match found");let{snippets:u}=l,f=u.map(async h=>{let g=await SXe(t,()=>TXe(t,{cursor:h.cursor}));if(!g||_Xe(g))return;let A=g.file_matches,y=g.license_stats;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(f)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let A=Array.from(g).sort(),y=n,E=n+h.match.matched_source.length,b=o.positionAt(y),S=o.positionAt(E);await t.get(Sf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:y,offsetEnd:E,version:o.version,location:{start:b,end:S},matchingText:c,details:A.map(R=>({license:R,url:h.match.github_url}))})}}s(RXe,"fetchCitations");d();function kxe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(kxe,"editDistance");function yzt(){return new Map}s(yzt,"emptyLexDictionary");function Czt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(Czt,"reverseLexDictionary");function*vzt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(vzt,"lexGeneratorWords");function kXe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(kXe,"lexicalAnalyzer");function PXe(t){return t!==" "}s(PXe,"notSingleSpace");function DXe(t,e,r=vzt){let[n,i]=kXe(t,yzt(),r,PXe),[o,a]=kXe(e,i,r,PXe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=Czt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(A,y,E,b){if(b===0||b===l-1){let S=c[n[E][0]];return b==0&&S.endsWith(u)||b==l-1&&S.startsWith(f)?0:1}else return A===y?0:1}s(p,"compare");let m=kxe(n.map(A=>A[0]),o.map(A=>A[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(DXe,"lexEditDistance");d();function XR(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}s(XR,"countLines");function BXe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(BXe,"computeCompletionText");var ZT=new Ct("postInsertion"),NXe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],MXe=50,xzt=1500,Ezt=.5,bzt=500,Pxe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function LXe(t,e,r,n,i){let o=await t.get(En).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return ZT.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await M3(t,r.properties.headerRequestId,VC(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=Rve(l,n,a.detectedLanguageId),A=LKe(h,void 0)(m),y=Math.min(c.length,n+(A?A*2:bzt)),E=c.substring(n,y);return{prompt:p,capturedCode:E,terminationOffset:A??-1}}}s(LXe,"captureCode");function fee(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{ZT.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),dKe(t,e,u)});let o=new KR(t,n,r-1),a=new KR(t,n,r),c=s(async l=>{ZT.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:m}=await LXe(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});ZT.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");NXe.filter(l=>l.captureRejection).map(l=>o.push(eu(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(fee,"postRejectionTasks");function k7(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});ZT.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),uKe(t,e,l);let u=r;r=BXe(r,a);let f=r.trim(),p=new KR(t,i,n),m=new KR(t,i,n+r.length),h=s(async g=>{await Szt(t,e,f,n,i,g,l,p,m)},"stillInCodeCheck");if(Pxe.triggerPostInsertionSynchroneously&&Gg(t)){let g=h({seconds:0,captureCode:Pxe.captureCode,captureRejection:Pxe.captureRejection});t.get(Jc).register(g)}else NXe.map(g=>p.push(eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));eu(t,Izt,"post insertion citation check")(t,i,u,r,n,c)}s(k7,"postInsertionTasks");async function Izt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(ID(t)?.getTokenValue("sn")==="1")return;await RXe(t,e,n,i);return}let a=await t.get(Cr).getTextDocument({uri:e});if(a){let c=Dxe(a.getText(),n,MXe,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=Tzt(r.length,n.length,c.start_offset);if(l===void 0){ZT.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+wzt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=f&&m?a?.getText({start:f,end:m}):"<unknown>";await t.get(Sf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&m?{start:f,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(Izt,"citationCheck");function Tzt(t,e,r){if(!(e<t&&r>e))return r}s(Tzt,"computeCitationStart");function wzt(t,e,r){return e<t?Math.min(r,e):r}s(wzt,"computeCitationEnd");function Dxe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=DXe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=kxe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=Ezt?1:0}}s(Dxe,"find");async function Szt(t,e,r,n,i,o,a,c,l){let u=await t.get(En).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=Dxe(p,r,MXe,c.offset);m.stillInCodeHeuristic||(m=Dxe(p,r,xzt,c.offset)),ZT.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:A,terminationOffset:y}=await LXe(t,i,h,c.offset,l.offset),E={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...E,capturedCodeJson:JSON.stringify(A)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});ZT.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",b,1)}}}s(Szt,"checkStillInCode");var Rzt=new Ct("ghostText"),Zu=class{constructor(){this.#i=[];this.linesAccepted=0}static{s(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function kzt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(kzt,"computeRejectedCompletions");function Bxe(t,e){let r=t.get(Zu);if(!r.position||!r.uri)return;let n=kzt(r);n.length>0&&fee(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(Bxe,"rejectLastShown");function FXe(t,e,r,n){let i=t.get(Zu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&Bxe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(FXe,"setLastShown");function OXe(t,e){let r=t.get(Zu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;Rzt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,NX(t,"ghostText",e)}}s(OXe,"handleGhostTextShown");function Pzt(t,e,r){let n=t.get(Zu);n.linesLeft===void 0&&(n.linesLeft=XR(e.displayText));let i=XR(e.displayText);n.linesLeft.length>i.length&&(n.linesAccepted+=n.linesLeft.length-i.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=i),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}s(Pzt,"handleLineAcceptance");function F3(t,e,r="ghostText"){let n=t.get(Zu),i;return n.partiallyAcceptedLength?i={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:i={compType:"full",acceptedLength:e.displayText.length,acceptedLines:XR(e.displayText).length},n.resetState(),k7(t,r,e.displayText,e.offset,e.uri,e.telemetry,i,e.copilotAnnotations)}s(F3,"handleGhostTextPostInsert");function pee(t,e,r,n=0,i="ghostText",o="line"){let a=t.get(Zu),c;return o==="cumulative"?(Dzt(t,e,r),c={compType:a.totalLength!=null?"full":"partial",acceptedLength:a.totalLength??(a.partiallyAcceptedLength||0),acceptedLines:a.linesAccepted},c.compType==="full"&&a.resetState()):(Pzt(t,e,r),c={compType:"partial",acceptedLength:a.partiallyAcceptedLength||0,acceptedLines:a.linesAccepted}),k7(t,i,e.displayText,e.offset,e.uri,e.telemetry,c,e.copilotAnnotations)}s(pee,"handlePartialGhostTextPostInsert");function Dzt(t,e,r){let n=t.get(Zu);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=XR(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}s(Dzt,"handleCumulativeAcceptance");function QXe(t){let e=new o3;return e.set(kc,t),e.set(pC,new pC),e.set(Io,new Io),e.set(RA,new RA),e.set(lA,new lA),e.set(Mt,new Mt(e)),e.set(eC,new eC),e.set(Nu,new Nu(e)),e.set(Uu,new Uu),e.set(lf,new lf),e.set(b0,new l7),e.set(xA,new DB),e.set(dA,new f6),e.set(Jc,new Jc),e.set(UC,new UC(e)),e.set(En,new En(e)),e.set(NA,new NA(e)),e.set(Lx,nee(e)),e.set(Zu,new Zu),e.set(S0,new S0),e.set(Fx,Fx.default),e.set(Ix,new Ix(e)),e.set(uh,new uh(e)),e.set(ru,new ru),e.set(E0,new E0(e)),e.set(Cs,new Cs),e.set(Th,new Th(e)),e.set(Rh,new Rh),e}s(QXe,"createCommonContext");d();d();var mee=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var O3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Nui=x.Object({prompt:x.String(),speculation:x.String(),languageId:x.String(),stops:x.Array(x.String())}),P7=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Mt).updateExPValuesAndAssignments(),a=await this.ctx.get(b0).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new mee(a.reason);case"failed":throw new O3(a.reason)}}};d();d();var UXe=Ne(require("node:util"));function qXe(t,...e){return`[${t}] ${Bzt(e)}`}s(qXe,"formatLogMessage");function Bzt(t){return UXe.default.formatWithOptions({maxStringLength:1/0},...t)}s(Bzt,"format");function hee(t){return HBe(t)}s(hee,"verboseLogging");var gee=class extends Kc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||hee(r))&&this.console.warn(`[${i}]`,...o)}};d();var HXe=require("node:util");var Q3=class extends Xy{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){cA(e,"log",Gr.createAndMarkAsIssued({context:r,level:O_[1],message:Nzt(...n)}),1)}sendException(e,r,n){qa(e,r,n)}};function Nzt(...t){return t.map(e=>(0,HXe.inspect)(e)).join(" ")}s(Nzt,"telemetryMessage");d();var ilt=Ne(require("crypto")),olt=Ne(require("fs")),zre=Ne(rlt()),slt=require("tls"),alt=Ne(nlt());var zN=new Ct("certificates"),ml=class{static{s(this,"RootCertificateReader")}};function Yre(t,e=process.platform){return new iwe(t,[new owe,new swe,Odr(t,e)])}s(Yre,"getRootCertificateReader");function Odr(t,e){switch(e){case"linux":return new awe(t);case"darwin":return new cwe(t);case"win32":return new lwe(t);default:return new uwe}}s(Odr,"createPlatformReader");var nwe=class extends ml{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return zN.warn(this.ctx,"Failed to read root certificates:",r),[]}}},iwe=class extends ml{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new nwe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new ilt.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return zN.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&zN.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},owe=class extends ml{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return slt.rootCertificates}},swe=class extends ml{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await clt(e):[]}},awe=class extends ml{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await clt(n);zN.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},cwe=class extends ml{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=zre.get({excludeBundled:!1,format:zre.Format.pem});return zN.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},lwe=class extends ml{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=alt.all();return zN.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},uwe=class extends ml{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function clt(t){let e;try{e=await olt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(clt,"readCertsFromFile");d();var vlt=Ne(require("http"));var lfr=407,id=new Ct("proxySocketFactory"),g1=class{static{s(this,"ProxySocketFactory")}},Pk=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function Kre(t){return new pwe(t,new mwe(t))}s(Kre,"getProxySocketFactory");var pwe=class extends g1{constructor(r,n,i=new KQ,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new wr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(id.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof Pk&&i.code===`ProxyStatusCode${lfr}`){id.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return id.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(id.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(id.debug(this.ctx,"Proxy authorization successful, received token"),i)return id.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){id.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);id.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);id.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return id.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return id.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return id.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},mwe=class extends g1{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(Io).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{id.debug(this.ctx,"Attempting to establish connection to proxy");let c=vlt.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{id.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new Pk(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new Pk(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(id.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{id.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new Pk(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{id.debug(this.ctx,"Proxy socket connection timeout"),a(new Pk(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},KQ=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(Clt()))}};d();var Ilt=require("node:os");var ufr=new Ct("repository"),Dk="\\\\",Tlt="(?:[#;].*)",JN=`(?:[^"${Dk}]|${Dk}.)`,dfr="[0-9A-Za-z-]",xlt=`[A-Za-z]${dfr}*`,wlt=`\\s*${Tlt}?$`,Slt=`(?:[^"${Dk};#]|${Dk}.)`,ffr=`(?:"${JN}*"|"${JN}*(?<strCont>${Dk})$)`,pfr=`(?:${Slt}|${ffr})+`,mfr=`(?:(?<cont>${Dk})$)`,_lt=`(?<value>${pfr})${mfr}?${wlt}`,Elt=new RegExp(`^${_lt}`),hfr=new RegExp(`^(?<value>${JN}*(?:(?<strCont>${Dk})$|(?<quote>")))`),gfr=new RegExp(`^\\s*(?:(?<key>${xlt})\\s*=\\s*${_lt}|(?<soloKey>${xlt})${wlt})`),Afr=new RegExp(`(?<value>${Slt}+)|"(?<string>${JN}*)"`,"g"),blt="[-.0-9A-Za-z]+",yfr=`\\s+"(?<ext>${JN}*)"`,Cfr=`\\s+"(?<extOnly>${JN}*)"`,vfr=new RegExp(`^\\s*\\[(?:(?<simple>${blt})${yfr}|${Cfr}|(?<simpleOnly>${blt}))\\]`),xfr=new RegExp(`^\\s*${Tlt}$`),hwe=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(vfr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(gfr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(hfr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Elt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Elt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Afr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){xfr.test(this.line)&&(this.line="")}},Jre=class extends _A{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await Ix.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new OR)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new hwe(i),a=new OR;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(Mi).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&ufr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=Vi(this.xdgConfigUri(),"git","config"),o=Vi(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Pi(r).toLowerCase()!=="config.worktree")return;let n=kd(r),i=Vi(n,"commondir");try{let o=(await e.get(Mi).readFileString(i)).trimEnd();return Vi(o2(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Rl(process.env.XDG_CONFIG_HOME):Vi(this.homeUri(),".config")}homeUri(){return Rl((0,Ilt.homedir)())}};d();var Rlt=require("child_process");var Xre=class extends _A{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Rlt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){dYe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=es(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new OR;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var Plt=Ne(require("node:events"));var klt="onWorkspaceChanged",em=class{constructor(){this.emitter=new Plt.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(klt,e)}emit(e){this.emitter.emit(klt,e)}};function Dlt(t){let e=QXe(t);return Efr(e),e.set(ml,Yre(e)),e.set(g1,Kre(e)),e.set(_A,new mX([new Xre,new Jre])),e.set(em,new em),e.set(P7,new P7(e)),e}s(Dlt,"createProductionContext");function Efr(t){t.set(Fm,Fm.fromEnvironment(!1)),t.set(Xy,new Q3),t.set(Kc,new gee(console))}s(Efr,"setupRudimentaryLogging");var Cyi=new Ct("context");d();d();d();var A1="byok",Ya=class{constructor(e){this.persistenceManager=e}static{s(this,"BYOKPersistence")}async getAPIKey(e,r){if(r){let i=await this.persistenceManager.read(A1,`${e}-${r}-api-key`);if(i)return i}return await this.persistenceManager.read(A1,`${e}-api-key`)}async storeAPIKey(e,r,n,i){n!==2&&(n===0?await this.persistenceManager.update(A1,`${e}-api-key`,r):n===1&&i&&await this.persistenceManager.update(A1,`${e}-${i}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(A1,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(A1,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(A1,`${e}-models-config`)||{}}async saveModelConfig(e,r,n,i,o){let a=await this.getStoredModelConfigs(e);a[r]=n,await this.persistenceManager.update(A1,`${e}-models-config`,a),i&&o&&await this.storeAPIKey(e,i,o,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),i=n[r];i&&(delete n[r],await this.persistenceManager.update(A1,`${e}-models-config`,n),i.deploymentUrl&&await this.deleteAPIKey(e,1,r))}async removeAllModelConfigs(e){await this.persistenceManager.delete(A1,`${e}-models-config`)}};var Wo={Azure:"Azure",OpenAI:"OpenAI",Gemini:"Gemini",Groq:"Groq",OpenRouter:"OpenRouter",Anthropic:"Anthropic"};function Pw(t){switch(t){case Wo.Azure:return 1;default:return 0}}s(Pw,"getAuthTypeForProvider");function ene(t){return t===Wo.OpenAI||t===Wo.Gemini||t===Wo.Groq||t===Wo.OpenRouter||t===Wo.Anthropic}s(ene,"isOpenAICompatible");async function XN(t,e,r){let i=await new Ya(t.get(Ai)).getStoredModelConfigs(e),o=i?Object.values(i).find(f=>f.isRegistered!==!1):void 0,a=o?.modelCapabilities,c=a?.name||r,l=a?.maxInputTokens||1e5,u=a?.maxOutputTokens||8192;return{modelId:r,uiName:c,modelFamily:Wr.BYOK,providerName:e,deploymentUrl:o?.deploymentUrl,maxRequestTokens:l,maxResponseTokens:u,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!a?.toolCalling}}s(XN,"resolveModelConfiguration");async function Blt(t,e,r){return await new Ya(t.get(Ai)).getAPIKey(e,r)}s(Blt,"resolveModelKey");function Nlt(t,e){let{protocol:r,hostname:n,pathname:i}=new URL(e);if(i.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}s(Nlt,"resolveAzureUrl");d();var JQ=new Ct("openAICompatibleLMProvider"),gwe={[Wo.OpenAI]:"https://api.openai.com/v1",[Wo.Gemini]:"https://generativelanguage.googleapis.com/v1beta/openai",[Wo.Groq]:"https://api.groq.com/openai/v1",[Wo.OpenRouter]:"https://openrouter.ai/api/v1",[Wo.Anthropic]:"https://api.anthropic.com/v1"},Yh=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{s(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new Ya(this.ctx.get(Ai)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data){let l=this._knownModels?.[c.id];l&&a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:l})}return a}catch(e){throw JQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getBaseUrl(){let e=gwe[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}getFetchModelUrl(){return`${this.getBaseUrl()}/models`}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await this.ctx.get($r).fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};d();var en=new Ct("chat");d();d();var Ka=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(Ka||{});function on(t){return t?(t=tm(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(on,"getTextPart");var Mlt=s((t,e)=>x.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),Llt=x.Optional(x.Object({agentSlug:x.String(),state:x.Union([x.Literal("accepted"),x.Literal("dismissed")]),confirmation:x.Any()}));function Dw(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(Dw,"parseToolCallArguments");function Flt(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(Flt,"toOpenAIToolCall");function Olt(t,e,r,n,i,o,a,c,l){let u=JSON.parse(JSON.stringify(e));return r.tool_calls&&(u.tool_calls=r.tool_calls),f3(t,[u],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c,copilotEditsSessionHeader:l}}s(Olt,"convertToChatCompletion");function XQ(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(XQ,"isChatCompletionContentPartArray");function tne(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(tne,"isChatMessageArray");function tm(t){if(typeof t=="string")return t;if(XQ(t))return t;if(tne(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(tm,"resolveAsChatMessageContent");function ZQ(t,e){return(typeof t=="string"||XQ(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(ZQ,"appendChatMessageContent");function rne(t,e){if(t){if(typeof t=="string"||XQ(t))return[{role:"assistant",content:t}];if(tne(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(rne,"resolveResponseAsChatMessages");d();var Awe=new Ct("streamMessages");function Qlt(t,e,r,n){let i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(Awe.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),Awe.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Awe.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let a=c7(e.solution),c={role:"assistant",content:i};return Olt(t,c,a,e.index,e.requestId,o,e.reason??"",r,n)}s(Qlt,"prepareChatCompletionForReturn");var Kh=new Ct("fetchChat"),nne=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(u){Kh.exception(e,u,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}e.get(Th).processQuotaHeaders(a.headers);let c=a.headers.get("copilot-edits-session")||void 0;if(r.postOptions?.stream===!1){let l=await a.text(),u=JSON.parse(l),f=u.choices!=null?u.choices[0].message:{role:"assistant",content:""},p=a.headers.get("X-Request-ID")??Er(),m={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:f,tokens:on(f.content).split(" "),requestId:{headerRequestId:p,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0,copilotEditsSessionHeader:c},h=on(f.content);return await i(h,{text:h,copilotReferences:u.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(m)}(),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}else{let u=$T.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:Sx(u,p=>Qlt(e,p,n,c)),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return Gr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:m3(e,n.count),top_p:kX(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=hx(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await bfr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,n.apiKey,n.modelProviderName,n.copilotEditsSessionHeader,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Kh.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Br).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Kh.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Kh.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Br).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Kh.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function bfr(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let A=n===""&&i===""?r:Vi(r,n,i),y=u.extendedBy({endpoint:i,engineName:n,uiKind:l});RX(a,y,["messages"]),y.properties.headerRequestId=o,Bt(t,"request.sent",y);let E=wa(),b=tKe(l),S={...kC(t),...f.toCapiHeaders()};return a.messages?.some(R=>Array.isArray(R.content)?R.content.some(B=>"image_url"in B):!1)&&(S["Copilot-Vision-Request"]="true"),p&&(S["api-key"]=p),h&&(S["copilot-edits-session"]=h),a.messages&&a.messages.forEach(R=>{Ifr(R)&&R.tool_calls&&(R.tool_calls=R.tool_calls.map(B=>Flt(B)))}),Ax(t,A,c,b,o,a,g,S,void 0,m).then(R=>{let B=UR(R);y.extendWithRequestId(B);let L=wa()-E;return y.measurements.totalTimeMs=L,Kh.info(t,`Request ${o} at <${A}> finished with ${R.status} status after ${L}ms`),Kh.debug(t,"request.response properties",y.properties),Kh.debug(t,"request.response measurements",y.measurements),Kh.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",y),R}).catch(R=>{if(Rd(R))throw R;let B=y.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",B),y.properties.message=String(Rf(R,"name")??""),y.properties.code=String(Rf(R,"code")??""),y.properties.errno=String(Rf(R,"errno")??""),y.properties.type=String(Rf(R,"type")??"");let L=wa()-E;throw y.measurements.totalTimeMs=L,Kh.info(t,`Request ${o} at <${A}> rejected with ${String(R)} after ${L}ms`),Kh.debug(t,"request.error properties",y.properties),Kh.debug(t,"request.error measurements",y.measurements),Bt(t,"request.error",y),R}).finally(()=>{f3(t,e,y)})}s(bfr,"fetchWithInstrumentation");function Ifr(t){return"tool_calls"in t}s(Ifr,"isChatMessageWithToolCalls");var Ja=class{constructor(e){this.ctx=e;this.fetcher=new nne}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=Er(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&c.maxResponseTokens!==void 0&&(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(Br).getToken(),u,f,p,m;if(e.modelConfiguration?.providerName)if(p=await Blt(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),m=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===Wo.Azure)if(e.modelConfiguration.deploymentUrl)u=Nlt(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),f="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(ene(e.modelConfiguration?.providerName))u=gwe[e.modelConfiguration?.providerName],f=e.endpoint??"completions",e.authToken=p;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else u=Ym(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions";let h=e.authToken??l.token,g={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:h,apiKey:p,modelProviderName:m,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction,copilotEditsSessionHeader:e.copilotEditsSessionHeader};return c&&(g.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(g.tools=e.tools,g.tool_choice=e.tool_choice??"auto"),await this.fetch(g,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=o7(r.chatCompletions,l=>this.postProcess(l,i));en.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)en.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:on(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:on(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>on(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n,copilotEditsSessionHeader:l[0].copilotEditsSessionHeader}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return oee(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return en.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Rd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(en.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var y1=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var Bw=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var Ult=new Ct("CommandLineAutoApprover"),rE=class{constructor(e){this.ctx=e;this._denyListRules=[];this._allowListRules=[]}static{s(this,"CommandLineAutoApprover")}updateConfiguration(e){let{denyListRules:r,allowListRules:n}=this._mapAutoApproveConfigToRules(e);this._allowListRules=n,this._denyListRules=r}isCommandAutoApproved(e){for(let r of this._denyListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"denied",reason:`Command '${e}' is denied by deny list rule: ${r.sourceText}`};for(let r of this._allowListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"approved",reason:`Command '${e}' is approved by allow list rule: ${r.sourceText}`};return{result:"noMatch",reason:`Command '${e}' has no matching auto approve entries`}}_commandMatchesRegex(e,r){return!!e.test(r)}_mapAutoApproveConfigToRules(e){if(!e||typeof e!="object")return{denyListRules:[],allowListRules:[]};let r=[],n=[];return Object.entries(e).forEach(([i,o])=>{if(typeof o=="boolean"){let a=this._convertAutoApproveEntryToRegex(i);o===!0?n.push({regex:a,sourceText:i}):o===!1&&r.push({regex:a,sourceText:i})}else if(typeof o=="object"&&o!==null){let a=o;if(typeof a.approve=="boolean"){let c=this._convertAutoApproveEntryToRegex(i);a.approve===!0?n.push({regex:c,sourceText:i}):a.approve===!1&&r.push({regex:c,sourceText:i})}}}),Ult.debug(this.ctx,"Update CommandLineAutoApprover denyListRules",r),Ult.debug(this.ctx,"Update CommandLineAutoApprover allowListRules",n),{denyListRules:r,allowListRules:n}}_convertAutoApproveEntryToRegex(e){let r=e.match(/^\/(?<pattern>.+)\/(?<flags>[dgimsuvy]*)$/),n=r?.groups?.pattern;if(n){let o=r.groups?.flags;o&&(o=o.replaceAll("g",""));try{let a=new RegExp(n,o||void 0);return this._regExpLeadsToEndlessLoop(a)?/(?!.*)/:a}catch{return/(?!.*)/}}let i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");return new RegExp(`^${i}\\b`)}_regExpLeadsToEndlessLoop(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}};d();var Tfr=".github/copilot-instructions.md",wfr=".github/git-commit-instructions.md",Sfr="global-copilot-instructions",_fr="global-git-commit-instructions",C1=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Sfr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:_fr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=Vi(r.uri,n),l=(await e.get(Mi).readFileString(c)).trim();if(!l)return;(await Tx(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,Tfr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,wfr,void 0,i,0)),c});return await Promise.all(o),i}};d();d();d();d();d();d();d();var Rfr=Symbol("MicrotaskDelay");function one(t){return!!t&&typeof t.then=="function"}s(one,"isThenable");function kfr(t){let e=new Px,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new QC)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(kfr,"createCancelablePromise");function nE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new QC)})}):kfr(r=>nE(t,r))}s(nE,"timeout");var ZN=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new xn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new xn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var eU=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new QC)}},Pfr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Pfr||={});var tU=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new Hp,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await HR.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var ine=class{constructor(e){this._deferred=new eU;this._asyncIterable=new tU(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};d();d();d();d();var sne=!1,ane=!1,rU=!1,Dfr=!1,Bfr=!1,qlt=!1,Nfr=!1,Mfr=!1,Lfr=!1,Ffr=!1;var iE,oE=globalThis,Jh;typeof oE.vscode<"u"&&typeof oE.vscode.process<"u"?Jh=oE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Jh=process);var Hlt=typeof Jh?.versions?.electron=="string",Ofr=Hlt&&Jh?.type==="renderer";typeof Jh=="object"?(sne=Jh.platform==="win32",ane=Jh.platform==="darwin",rU=Jh.platform==="linux",Dfr=rU&&!!Jh.env.SNAP&&!!Jh.env.SNAP_REVISION,Nfr=Hlt,Lfr=!!Jh.env.CI||!!Jh.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Bfr=!0):typeof navigator=="object"&&!Ofr?(iE=navigator.userAgent,sne=iE.indexOf("Windows")>=0,ane=iE.indexOf("Macintosh")>=0,Mfr=(iE.indexOf("Macintosh")>=0||iE.indexOf("iPad")>=0||iE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,rU=iE.indexOf("Linux")>=0,Ffr=iE?.indexOf("Mobi")>=0,qlt=!0):console.error("Unable to resolve platform.");var ywe=0;ane?ywe=1:sne?ywe=3:rU&&(ywe=2);var Nw=sne,$lt=ane,Wlt=rU;var Qfr=qlt&&typeof oE.importScripts=="function",V1i=Qfr?oE.origin:void 0;var v1=iE;var Ufr=typeof oE.postMessage=="function"&&!oE.importScripts,z1i=(()=>{if(Ufr){let t=[];oE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),oE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var qfr=!!(v1&&v1.indexOf("Chrome")>=0),Y1i=!!(v1&&v1.indexOf("Firefox")>=0),K1i=!!(!qfr&&v1&&v1.indexOf("Safari")>=0),J1i=!!(v1&&v1.indexOf("Edg/")>=0),X1i=!!(v1&&v1.indexOf("Android")>=0);var Bk,Cwe=globalThis.vscode;if(typeof Cwe<"u"&&typeof Cwe.process<"u"){let t=Cwe.process;Bk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Bk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Bk={get platform(){return Nw?"win32":$lt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var nU=Bk.cwd,jlt=Bk.env,Glt=Bk.platform,ivi=Bk.arch;var $fr=65,Wfr=97,jfr=90,Gfr=122,Fw=46,Au=47,O0=92,Mw=58,Vfr=63,cne=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function zfr(t,e){if(t===null||typeof t!="object")throw new cne(e,"Object",t)}s(zfr,"validateObject");function mc(t,e){if(typeof t!="string")throw new cne(e,"string",t)}s(mc,"validateString");var Q0=Glt==="win32";function Ii(t){return t===Au||t===O0}s(Ii,"isPathSeparator");function vwe(t){return t===Au}s(vwe,"isPosixPathSeparator");function Lw(t){return t>=$fr&&t<=jfr||t>=Wfr&&t<=Gfr}s(Lw,"isWindowsDeviceRoot");function lne(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Au}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Fw||i.charCodeAt(i.length-2)!==Fw){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===Fw&&c!==-1?++c:c=-1}return i}s(lne,"normalizeString");function Yfr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(Yfr,"formatExt");function Vlt(t,e){zfr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${Yfr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Vlt,"_format");var hc={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],mc(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=nU():(o=jlt[`=${e}`]||nU(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===O0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ii(f)&&(c=1,u=!0);else if(Ii(f))if(u=!0,Ii(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ii(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ii(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ii(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else Lw(f)&&o.charCodeAt(1)===Mw&&(l=o.slice(0,2),c=2,a>2&&Ii(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=lne(r,!n,"\\",Ii),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){mc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return vwe(o)?"\\":t;if(Ii(o))if(i=!0,Ii(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ii(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else Lw(o)&&t.charCodeAt(1)===Mw&&(n=t.slice(0,2),r=2,e>2&&Ii(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?lne(t.slice(r),!i,"\\",Ii):"";return a.length===0&&!i&&(a="."),a.length>0&&Ii(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){mc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ii(r)||e>2&&Lw(r)&&t.charCodeAt(1)===Mw&&Ii(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];mc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ii(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ii(r.charCodeAt(1))&&(++i,o>2&&(Ii(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ii(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return hc.normalize(e)},relative(t,e){if(mc(t,"from"),mc(e,"to"),t===e)return"";let r=hc.resolve(t),n=hc.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===O0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===O0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===O0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===O0;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===O0&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===O0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===O0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===O0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===O0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=hc.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===O0){if(e.charCodeAt(1)===O0){let r=e.charCodeAt(2);if(r!==Vfr&&r!==Fw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Lw(e.charCodeAt(0))&&e.charCodeAt(1)===Mw&&e.charCodeAt(2)===O0)return`\\\\?\\${e}`;return t},dirname(t){mc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ii(i)?t:".";if(Ii(i)){if(r=n=1,Ii(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ii(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else Lw(i)&&t.charCodeAt(1)===Mw&&(r=e>2&&Ii(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ii(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&mc(e,"suffix"),mc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Lw(t.charCodeAt(0))&&t.charCodeAt(1)===Mw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ii(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ii(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){mc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===Mw&&Lw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ii(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===Fw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Vlt.bind(null,"\\"),parse(t){mc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ii(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ii(i)){if(n=1,Ii(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ii(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ii(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ii(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(Lw(i)&&t.charCodeAt(1)===Mw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ii(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ii(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===Fw?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Kfr=(()=>{if(Q0){let t=/\\/g;return()=>{let e=nU().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>nU()})(),ua={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Kfr();mc(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Au)}return e=lne(e,!r,"/",vwe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(mc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Au,r=t.charCodeAt(t.length-1)===Au;return t=lne(t,!e,"/",vwe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return mc(t,"path"),t.length>0&&t.charCodeAt(0)===Au},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];mc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ua.normalize(e)},relative(t,e){if(mc(t,"from"),mc(e,"to"),t===e||(t=ua.resolve(t),e=ua.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Au&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Au)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Au?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Au)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(mc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Au,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Au){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&mc(e,"ext"),mc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Au){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Au){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){mc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Au){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===Fw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Vlt.bind(null,"/"),parse(t){mc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Au,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Au){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===Fw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ua.win32=hc.win32=hc;ua.posix=hc.posix=ua;var Jfr=Q0?hc.normalize:ua.normalize,Xfr=Q0?hc.isAbsolute:ua.isAbsolute,une=Q0?hc.join:ua.join,svi=Q0?hc.resolve:ua.resolve,avi=Q0?hc.relative:ua.relative,cvi=Q0?hc.dirname:ua.dirname,dne=Q0?hc.basename:ua.basename,fne=Q0?hc.extname:ua.extname,lvi=Q0?hc.format:ua.format,uvi=Q0?hc.parse:ua.parse,dvi=Q0?hc.toNamespacedPath:ua.toNamespacedPath,Nk=Q0?hc.sep:ua.sep,fvi=Q0?hc.delimiter:ua.delimiter;d();function Ylt(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(Ylt,"isObject");function pne(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(pne,"assertType");function Klt(t,e,r,n=Nk){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!IJe(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}s(Klt,"isEqualOrParent");var mne="**",Jlt="/",hne="[/\\\\]",gne="[^/\\\\]",Zfr=/\//g;function Xlt(t,e){switch(t){case 0:return"";case 1:return`${gne}*?`;default:return`(?:${hne}|${gne}+${hne}${e?`|${hne}${gne}+`:""})*?`}}s(Xlt,"starsToRegExp");function iU(t,e){if(!t)return[];let r=[],n=!1,i=!1,o="";for(let a of t){switch(a){case e:if(!n&&!i){r.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=a}return o&&r.push(o),r}s(iU,"splitGlobAware");function rut(t){if(!t)return"";let e="",r=iU(t,Jlt);if(r.every(n=>n===mne))e=".*";else{let n=!1;r.forEach((i,o)=>{if(i===mne){if(n)return;e+=Xlt(2,o===r.length-1)}else{let a=!1,c="",l=!1,u="";for(let f of i){if(f!=="}"&&a){c+=f;continue}if(l&&(f!=="]"||!u)){let p;f==="-"?p=f:(f==="^"||f==="!")&&!u?p="^":f===Jlt?p="":p=k3(f),u+=p;continue}switch(f){case"{":a=!0;continue;case"[":l=!0;continue;case"}":{let m=`(?:${iU(c,",").map(h=>rut(h)).join("|")})`;e+=m,a=!1,c="";break}case"]":{e+="["+u+"]",l=!1,u="";break}case"?":e+=gne;continue;case"*":e+=Xlt(1);continue;default:e+=k3(f)}}o<r.length-1&&(r[o+1]!==mne||o+2<r.length)&&(e+=hne)}n=i===mne})}return e}s(rut,"parseRegExp");var e0r=/^\*\*\/\*\.[\w\.-]+$/,t0r=/^\*\*\/([\w\.-]+)\/?$/,r0r=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,n0r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i0r=/^\*\*((\/[\w\.-]+)+)\/?$/,o0r=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Zlt=new t3(1e4),Ewe=s(function(){return!1},"FALSE"),YA=s(function(){return null},"NULL");function nut(t){return t===Ewe||t===YA}s(nut,"isEmptyPattern");function bwe(t,e){if(!t)return YA;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,i=Zlt.get(n);if(i)return eut(i,t);let o;return e0r.test(r)?i=s0r(r.substr(4),r):(o=t0r.exec(xwe(r,e)))?i=a0r(o[1],r):(e.trimForExclusions?n0r:r0r).test(r)?i=c0r(r,e):(o=i0r.exec(xwe(r,e)))?i=tut(o[1].substr(1),r,!0):(o=o0r.exec(xwe(r,e)))?i=tut(o[1],r,!1):i=l0r(r),Zlt.set(n,i),eut(i,t)}s(bwe,"parsePattern");function eut(t,e){if(typeof e=="string")return t;let r=s(function(n,i){return Klt(n,e.base,!Wlt)?t(bJe(n.substr(e.base.length),Nk),i):null},"wrappedPattern");return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}s(eut,"wrapRelativePattern");function xwe(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}s(xwe,"trimForExclusions");function s0r(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}s(s0r,"trivia1");function a0r(t,e){let r=`/${t}`,n=`\\${t}`,i=s(function(a,c){return typeof a!="string"?null:c?c===t?e:null:a===t||a.endsWith(r)||a.endsWith(n)?e:null},"parsedPattern"),o=[t];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}s(a0r,"trivia2");function c0r(t,e){let r=sut(t.slice(1,-1).split(",").map(c=>bwe(c,e)).filter(c=>c!==YA),t),n=r.length;if(!n)return YA;if(n===1)return r[0];let i=s(function(c,l){for(let u=0,f=r.length;u<f;u++)if(r[u](c,l))return t;return null},"parsedPattern"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(c0r,"trivia3");function tut(t,e,r){let n=Nk===ua.sep,i=n?t:t.replace(Zfr,Nk),o=Nk+i,a=ua.sep+t,c;return r?c=s(function(l,u){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===t||l.endsWith(a)))?e:null},"parsedPattern"):c=s(function(l,u){return typeof l=="string"&&(l===i||!n&&l===t)?e:null},"parsedPattern"),c.allPaths=[(r?"*/":"./")+t],c}s(tut,"trivia4and5");function l0r(t){try{let e=new RegExp(`^${rut(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return YA}}s(l0r,"toRegExp");function iut(t,e,r){return!t||typeof e!="string"?!1:Iwe(t)(e,void 0,r)}s(iut,"match");function Iwe(t,e={}){if(!t)return Ewe;if(typeof t=="string"||u0r(t)){let r=bwe(t,e);if(r===YA)return Ewe;let n=s(function(i,o){return!!r(i,o)},"resultPattern");return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return d0r(t,e)}s(Iwe,"parse");function u0r(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}s(u0r,"isRelativePattern");function d0r(t,e){let r=sut(Object.getOwnPropertyNames(t).map(c=>f0r(c,t[c],e)).filter(c=>c!==YA)),n=r.length;if(!n)return YA;if(!r.some(c=>!!c.requiresSiblings)){if(n===1)return r[0];let c=s(function(f,p){let m;for(let h=0,g=r.length;h<g;h++){let A=r[h](f,p);if(typeof A=="string")return A;one(A)&&(m||(m=[]),m.push(A))}return m?(async()=>{for(let h of m){let g=await h;if(typeof g=="string")return g}return null})():null},"resultExpression"),l=r.find(f=>!!f.allBasenames);l&&(c.allBasenames=l.allBasenames);let u=r.reduce((f,p)=>p.allPaths?f.concat(p.allPaths):f,[]);return u.length&&(c.allPaths=u),c}let i=s(function(c,l,u){let f,p;for(let m=0,h=r.length;m<h;m++){let g=r[m];g.requiresSiblings&&u&&(l||(l=dne(c)),f||(f=l.substr(0,l.length-fne(c).length)));let A=g(c,l,f,u);if(typeof A=="string")return A;one(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(let m of p){let h=await m;if(typeof h=="string")return h}return null})():null},"resultExpression"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(d0r,"parsedExpression");function f0r(t,e,r){if(e===!1)return YA;let n=bwe(t,r);if(n===YA)return YA;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=s((a,c,l,u)=>{if(!u||!n(a,c))return null;let f=i.replace("$(basename)",()=>l),p=u(f);return one(p)?p.then(m=>m?t:null):p?t:null},"result");return o.requiresSiblings=!0,o}}return n}s(f0r,"parseExpressionPattern");function sut(t,e){let r=t.filter(c=>!!c.basenames);if(r.length<2)return t;let n=r.reduce((c,l)=>{let u=l.basenames;return u?c.concat(u):c},[]),i;if(e){i=[];for(let c=0,l=n.length;c<l;c++)i.push(e)}else i=r.reduce((c,l)=>{let u=l.patterns;return u?c.concat(u):c},[]);let o=s(function(c,l){if(typeof c!="string")return null;if(!l){let f;for(f=c.length;f>0;f--){let p=c.charCodeAt(f-1);if(p===47||p===92)break}l=c.substr(f)}let u=n.indexOf(l);return u!==-1?i[u]:null},"aggregate");o.basenames=n,o.patterns=i,o.allBasenames=n;let a=t.filter(c=>!c.basenames);return a.push(o),a}s(sut,"aggregateBasenameMatches");function aut(t){let e=t.match(/^---\s*\r?\n([\s\S]*?)\r?\n---\s*\r?\n/);return e?e[1]:null}s(aut,"extractFrontMatter");function cut(t){let e=aut(t);if(!e)return{};let r=e.match(/^applyTo:\s*["']?(.*?)["']?\s*$/m),n=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{applyTo:r?r[1].trim():void 0,description:n?n[1].trim():void 0}}s(cut,"extractMetadataFromContent");function lut(t){let e=aut(t);if(!e)return{};let r=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{description:r?r[1].trim():void 0}}s(lut,"extractPromptMetadataFromContent");function uut(t){if(!t||t.trim()==="")return{pattern:t,isValid:!1,error:"Pattern cannot be empty"};let e=t.trim();return p0r(e)?{pattern:e,isValid:!0}:{pattern:e,isValid:!1,error:"Invalid glob pattern"}}s(uut,"validate");function dut(t,e){let r=iU(e,","),n=s(i=>{if(i=i.trim(),i.length!==0){if(i==="**"||i==="**/*"||i==="*")return{pattern:i};!i.startsWith("/")&&!i.startsWith("**/")&&(i="**/"+i);for(let o of t)if(iut(i,o))return{pattern:i,file:o}}},"patternMatches");for(let i of r){let o=n(i);if(o)return o}}s(dut,"matches");function p0r(t){try{let e=iU(t,",");if(e.length===0)return!1;for(let r of e){let n=Iwe(r);if(nut(n))return!1}return!0}catch{return!1}}s(p0r,"isValidGlob");d();d();var m0r=".prompt.md",h0r=".instructions.md",g0r=".chatmode.md";function fut(t){if(t.endsWith(m0r))return"prompt";if(t.endsWith(h0r))return"instructions";if(t.endsWith(g0r))return"mode"}s(fut,"getPromptFileType");var y0r=".github/instructions",C0r=".github/prompts",Mk=class{static{s(this,"PromptFilesLocator")}async listFiles(e,r,n){if(!r.length)return[];let i=r.map(a=>{let c="";return n==="instructions"?c=Vi(a.uri,y0r):n==="prompt"&&(c=Vi(a.uri,C0r)),this.getFilesByUri(e,c,n)});return(await Promise.all(i)).flat()}async getFilesByUri(e,r,n){let i,o=[];try{i=await e.get(Mi).readDirectory(r)}catch{return[]}for(let[a,c]of i)c===1&&fut(a)===n&&o.push(Vi(r,a));return o}};var KA=class{constructor(){this.logger=new Ct("PromptService");this.promptTemplatesCache=null;this.fileLocator=new Mk}static{s(this,"PromptService")}async collect(e,r,n){let i=await this.fileLocator.listFiles(e,r,"instructions").then(put("instructions")),o=[];for(let a of i)try{let c=await this.parseInstructionFile(e,a.uri);c&&dut(n,c.applyTo)&&o.push(c)}catch(c){this.logger.warn(e,`Failed to parse instruction file ${a.uri}:`,c)}return o}async collectPromptFiles(e,r){let n=await this.fileLocator.listFiles(e,r,"prompt").then(put("prompt")),i=[];for(let o of n)try{let a=await this.parsePromptFile(e,o.uri);a&&i.push(a)}catch(a){this.logger.warn(e,`Failed to parse prompt file ${o.uri}:`,a)}this.promptTemplatesCache?this.promptTemplatesCache.clear():this.promptTemplatesCache=new Map;for(let o of i)this.promptTemplatesCache.set(o.name,o);return i}async parseInstructionFile(e,r){try{let n=await e.get(Mi).readFileString(r),i=cut(n);if(!i.applyTo)return null;let o=uut(i.applyTo);return o.isValid?{uri:r,applyTo:o.pattern,description:i.description,content:n}:(this.logger.warn(e,`Invalid applyTo pattern in ${r}: ${o.error}`),null)}catch{return null}}async parsePromptFile(e,r){try{let n=await e.get(Mi).readFileString(r),i=lut(n),a=Pi(r).replace(/\.prompt\.md$/,"");return{uri:r,name:a,description:i.description,content:n}}catch{return null}}getPromptTemplates(){return this.promptTemplatesCache?Array.from(this.promptTemplatesCache.values()):[]}getPromptTemplate(e){return this.promptTemplatesCache?.get(e)}};function put(t){return e=>e.map(r=>({uri:r,type:t}))}s(put,"withType");var JA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={},i){try{let o=e.get(C1),a=o.getGlobalInstructions(n),c=await o.readFromWorkspaces(e,r,n),u=await e.get(KA).collect(e,r,i||[]),f=u.map(h=>({content:[{instruction:h.content}],kind:2,reference:h.uri})),p=n;if(!n.customIntroduction&&u.length>0){let g=["Here is a list of instruction files that contain rules for modifying or creating new code.","These files are important for ensuring that the code is modified or created correctly.","Please make sure to follow the rules specified in these files when working with the codebase.","If the file is not already available as attachment, use the `read_file` tool to acquire it.","Make sure to acquire the instructions before making any changes to the code.","| Pattern | File Path | Description |","| ------- | --------- | ----------- |"],A=u.map(y=>{let E=y.applyTo||"*",b=y.uri,S=y.description||"";return`| \`${E}\` | \`${b}\` | ${S} |`});p={...n,customIntroduction:g.concat(A).join(`
`)}}let m=[...a,...c,...f];return this.processInstructions(m,p)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>
${n.join(`

`)}
</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let o of e.content)o.languageId?r.languageId&&o.languageId===r.languageId&&n.push(`For ${o.languageId} code: ${o.instruction}`):n.push(o.instruction);if(n.length===0)return;let i=n.join(`
`);return`<attachment filePath="${e.reference}">
${i}
</attachment>`}static async appendToUserMessage(e,r,n="",i={},o){if(!r||r.length===0)return n;let a=await t.getInstructions(e,r,i,o);return a?a+`

`+n:n}};d();var v0r="X-Initiator",x0r="X-Interaction-ID",E0r="X-Interaction-Type";var Ane=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},Twe=class extends Ane{static{s(this,"User")}static id(){return"user"}},wwe=class extends Ane{static{s(this,"Agent")}static id(){return"agent"}},Swe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[v0r]:this.initiator,[x0r]:this.interactionId,[E0r]:this.interactionType.toString()}}},U0=class t extends Swe{static{s(this,"LlmInteraction")}static user(e,r){return new t(Twe,e,r)}static agent(e,r){return new t(wwe,e,r)}};d();d();var Xa=class{static{s(this,"ModelConfigurationProvider")}},yne=class extends Xa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw en.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(xf).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(xf).getMetadata(),i=I0r(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===Wr.Gpt35turbo||r===Wr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Rwe(6144,i),maxResponseTokens:_we(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4||r===Wr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Rwe(10240,i),maxResponseTokens:_we(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await b0r(this.ctx,i),maxResponseTokens:_we(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case HY.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function b0r(t,e){let r=t.get(Mt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),Rwe(i,e)}s(b0r,"getExpRequestTokens");function Rwe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Rwe,"getRequestTokens");function _we(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(_we,"getResponseTokens");function I0r(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(I0r,"filterModelsByCapabilities");var Jo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(Xa).getBestChatModelConfig([n]);if(e.get(Th).quotaExhausted&&!(await e.get(Br).getToken()).userInfo?.isFreeUser){let o=await e.get(xf).getFallbackModel();if(o)return e.get(Xa).getBestChatModelConfig([o?.id])}return e.get(Xa).getBestChatModelConfig(ch(r),i)}static transformMessages(e,r){return r===Wr.O1Ga||r===Wr.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Lk=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{s(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(i=>`- ${i}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(i=>`- ${i}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,i){let o=new Ja(e),a=await Jo.getModelConfiguration(e,"gitCommit"),c=[{uri:n.workspaceFolder?n.workspaceFolder:Rl(process.cwd())}],l=await JA.getInstructions(e,c,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),u=[{role:"system",content:this.buildSystemMessage(n.userLanguage,i)},{role:"user",content:this.buildUserMessage(n,l)}];this.updateAttemptCount(n.changes);let f=await e.get(Mt).updateExPValuesAndAssignments(),p=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),m=await o.fetchResponse({modelConfiguration:a,messages:u,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:U0.user("git-commit",Er()),temperature:p},r,f);if(this.lastChanges=n.changes,m.type!=="success")return;let h=m.value.match(/```text\n([\s\S]*?)\n```/);return h?h[1].trim():m.value.trim()}};d();var od=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},vne=class extends od{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};d();d();d();function Ow(){return Er()}s(Ow,"uuidV4");d();var Qw=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var x1=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var oU="filepath:",hl="...existing code...",kwe="copilot-edited-file";d();function e8(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(e8,"getFenceForCodeBlock");var rm=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=e8(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${oU} ${nc(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var Pwe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},sU=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=on(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=on(a.content).endsWith(`
`)?on(a.content):`${on(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${kwe}>.
</SYSTEM>


`}return o+on(a.content)},"")+`


The resulting document:
<${kwe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${hl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new rm({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new Pwe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new rm({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var sE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(En).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var Xh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new xn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(gl.fromJson))}static from(e){let r=e.map(i=>new gl(Vt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new gl(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new gl(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return T0r(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new gl(Vt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Vt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new gl(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new gl(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Vt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Vt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},gl=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Vt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=YT(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,Bx(r,this.newText)),o=new Vt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function T0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new gl(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new gl(Vt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Vt(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new gl(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Xh(n).normalize()}s(T0r,"joinEdits");d();d();var mut=-1;function t8(){return mut!==-1?mut:Date.now()}s(t8,"now");function hut(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(hut,"lineRangeDistance");d();var r8=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new aE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Pa.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return da.create(r)}mapEdits(e){return new t(this.edits.map(e))}},aE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=ir.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(ir.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Pa.replace(n,this.newText)}};var ms=class t{constructor(e){this.edits=e;Ml(Rx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>XA.deserialize(r)))}static fromEdit(e){let r=r8.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=aE.joinEdits(o,r);o.length=0;let f=XA.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(bh(n=>n.lineRange.startLineNumber,Ih)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return da.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Hr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Hr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new XA(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of LR(this.edits,(l,u)=>hut(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new XA(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},XA=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Hr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Bh(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(ir.fromPositions(new qr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new qr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Hr(i,a),n)}toLineEdit(){return new ms([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new qr(o,a)}else n=new qr(1,1);let i=r.addToPosition(new qr(1,1));return new aE(ir.fromPositions(n,i),"")}else return new aE(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new aE(ir.fromPositions(new qr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new ir(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new aE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Pa.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Hr(r,n),this.newLines.slice(i,this.newLines.length-o))}},w0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(w0r||={});var E1=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=ms.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Hd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new ms(r))}};var da=class t{constructor(e){this.edits=e;Ml(Rx(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Pa.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Pa.replace(e,r)])}static insert(e,r){return new t([Pa.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Pa.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Xh(this.edits.map(e=>new gl(e.range,e.newText)))}compose(e){return S0r(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Pa.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Pa.replace(Vt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Pa.replaceWithData(Vt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new xne(i)}if(this.edits.length!==e.arrayLength)throw YO(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=Pa.replaceWithData(Vt.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new xne(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Vt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Pa.replace(Vt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(Pa.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(Pa.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function S0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(Pa.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(Pa.replaceWithData(Vt.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let m=Pa.replaceWithData(Vt.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Vt(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Pa.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return da.create(n).normalize()}s(S0r,"joinEdits");var Pa=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Vt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Vt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Vt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return da.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=_0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=R0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function _0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(_0r,"commonPrefixLength");function R0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(R0r,"commonSuffixLength");var Hd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return PA(()=>null.base.equals(this.base.apply(e))),PA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return E1.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},xne=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return da.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new b1(this.edits.map(e=>e.toEdit()))}},b1=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return da.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=da.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>da.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=ms.fromEdit(new Hd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();d();d();var Fk=0;function Ene(t){return t===0}s(Ene,"lengthIsZero");var nm=2**26;function n8(t,e){return t*nm+e}s(n8,"toLength");function cE(t){let e=t,r=Math.floor(e/nm),n=e-r*nm;return new cu(r,n)}s(cE,"lengthToObj");function aU(t,e){let r=t+e;return e>=nm&&(r=r-t%nm),r}s(aU,"lengthAdd");function gut(t,e){return t.reduce((r,n)=>aU(r,e(n)),Fk)}s(gut,"sumLengths");function Dwe(t,e){return t===e}s(Dwe,"lengthEquals");function cU(t,e){let r=t,n=e;if(n-r<=0)return Fk;let o=Math.floor(r/nm),a=Math.floor(n/nm),c=n-a*nm;if(o===a){let l=r-o*nm;return n8(0,c-l)}else return n8(a-o,c)}s(cU,"lengthDiffNonNegative");function Aut(t,e){let r=t,n=Math.floor(r/nm),i=r-n*nm,o=e,a=Math.floor(o/nm),c=o-a*nm;return new ir(n+1,i+1,a+1,c+1)}s(Aut,"lengthsToRange");d();var i8=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${cE(this.startOffset)}...${cE(this.endOffset)}) -> ${cE(this.newLength)}`}};function Cut(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new tX(yut(t)),n=yut(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!Ene(u);){let[p,m]=i.splitAt(u);f.push(p),u=cU(p.lengthAfter,u),i=m??r.dequeue()}return Ene(u)||f.push(new lU(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&Dwe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new i8(m.startOffset,f,aU(m.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=Fk;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=gut(f,h=>h.lengthBefore),m=aU(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of f){let m=l;l=aU(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(Cut,"combineTextEditInfos");var lU=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=cU(e,this.lengthAfter);return Dwe(r,Fk)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,Fk,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${cE(this.lengthBefore)} -> ${cE(this.lengthAfter)}`}};function yut(t){let e=[],r=Fk;for(let n of t){let i=cU(r,n.startOffset);Ene(i)||e.push(new lU(!1,i,i));let o=cU(n.startOffset,n.endOffset);e.push(new lU(!0,o,n.newLength)),r=n.endOffset}return e}s(yut,"toLengthMapping");var uU=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new bne(n.range,cu.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=cE(n.newLength);return new bne(Aut(n.startOffset,n.endOffset),new cu(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new i8(n8(e.range.startLineNumber-1,e.range.startColumn-1),n8(e.range.endLineNumber-1,e.range.endColumn-1),n8(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=Cut(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return ir.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},bne=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var Ine=class{constructor(e){this.documents=e;Ml(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Tne=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Hd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var wne=class extends Ss{constructor(){super();this.branch=DA("branchName",void 0);this._register(Zve((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var Sne=class extends Ss{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new Nwe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new wne;this._register(WR(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=t8(),this._documentState.forEach(o=>o.applyAllEdits()))})),kh(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new Bwe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(Nx(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Mc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new Ine(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=t8()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},Bwe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new lu(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=r8.fromEdit(e,this._currentValue),i=uU.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return Ok(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&k0r(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=t8(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:t8()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new b1(this._edits.map(o=>o.edit));return{history:new Tne(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=da.empty,o=uU.empty,a,c=0,l=da.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(t8()-u.instant>600*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();pne(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=Ok(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||Ok(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Ok(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let B=da.trySwap(u.edit,l);if(B)l=B.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let y=u.edit.inverseOnString(n.value);n=n.apply(y);let E=u.edit.compose(i),b=ms.fromEdit(new Hd(n,E)),R=new E1(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(R>e)break;c=R,i=E,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new b1(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Ok(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Ok,"sum");function k0r(t,e){let r=e.getNewRanges();return t.edits.every(n=>P0r(n.range,r))}s(k0r,"editExtends");function P0r(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(P0r,"doesTouch");var Nwe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};d();d();var Qk=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=SA(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new qr(n,i)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return cu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new cu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Mwe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new qr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new Qk(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Bh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var lE=class extends Mwe{constructor(r){super();this.value=r;this._t=new Qk(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();d();d();var dU=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new xn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let y=u.slice(Vt.emptyAt(p),new Vt(0,m));o.push(y)}if(!f)throw new xn("Invariant violation: lastIntersecting is undefined");let h=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let y=f.slice(Vt.ofStartAndLength(f.replaceRange.endExclusive,0),new Vt(f.getNewLength()-h,f.getNewLength()));i.unshift(y),a-=y.getNewLength()-y.replaceRange.length}let g=new Vt(p,c.replaceRange.endExclusive-a),A=c.slice(g,new Vt(0,c.getNewLength()));o.push(A)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Vt(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Vt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return KO(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Vt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Vt(r,n)}},_ne=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Vt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Vt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},vut=class t extends dU{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var Rne=class extends dU{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(sd.replace(Vt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new Ff(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new sd(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new sd(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new Ff(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new Ff(r)}normalizeEOL(e){return new Ff(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=sd.replace(Vt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?Ff.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new lE(this.apply(e.value))}mapData(e){return new Lwe(this.replacements.map(r=>new o8(r.replaceRange,r.newText,e(r))))}},kne=class extends _ne{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=YT(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,Bx(n,this.newText)),a=new Vt(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new sd(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new sd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=YT(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Vt(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=Bx(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Vt(0,this.newText.length-i))}toEdit(){return new Ff([this])}},Ff=class t extends Rne{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new sd(e,r)])}static insert(e,r){return new t([new sd(Vt.emptyAt(e),r)])}static delete(e){return new t([new sd(e,"")])}static fromJson(e){return new t(e.map(sd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},sd=class t extends kne{static{s(this,"StringReplacement")}static insert(e,r){return new t(Vt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Vt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var Lwe=class t extends Rne{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new o8(e,r,n)])}static insert(e,r,n){return new t([new o8(Vt.emptyAt(e),r,n)])}static delete(e,r){return new t([new o8(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new Ff(this.replacements.map(e=>new sd(e.replaceRange,e.newText)))}},o8=class t extends kne{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Vt.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};d();var fU=class t{constructor(e){this.replacements=e;PA(()=>Rx(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(i=>$d.fromStringReplacement(i,r));return new t(n)}static replace(e,r){return new t([new $d(e,r)])}static insert(e,r){return new t([new $d(ir.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new $d(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.replacements){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=cu.ofText(o.text);if(e.isBefore(c)){let u=new qr(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return Pne(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new qr(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof qr?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof qr?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return Pne(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new qr(1,1);for(let o of this.replacements){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=Pne(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=Pne(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new lE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,i)=>new $d(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.replacements){let a=cu.ofText(o.text),c=qr.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new xn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),i="";for(let o=0;o<this.replacements.length;o++){let a=this.replacements[o];if(i+=a.text,o<this.replacements.length-1){let c=this.replacements[o+1],l=ir.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new $d(ir.fromPositions(r,n),i)}equals(e){return e3(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new lE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let i=e.getValueOfRange(r.range),o=ir.fromPositions(new qr(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),a=e.getValueOfRange(o);a.length>10&&(a="..."+a.substring(a.length-10));let c=ir.fromPositions(r.range.getEndPosition(),new qr(r.range.endLineNumber+1,1)),l=e.getValueOfRange(c);l.length>10&&(l=l.substring(0,10)+"...");let u=i;if(u.length>10){let p=Math.floor(5);u=u.substring(0,p)+"..."+u.substring(u.length-p)}let f=r.text;if(f.length>10){let p=Math.floor(5);f=f.substring(0,p)+"..."+f.substring(f.length-p)}return u.length===0?`${a}\u2770${f}\u2771${l}`:`${a}\u2770${u}\u21A6${f}\u2771${l}`}).join(`
`)}},$d=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=ir.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(ir.fromPositions(n,i),o)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new fU([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=YT(r,n),o=cu.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=ir.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=YT(r,n);r=r.substring(i),n=n.substring(i);let o=Bx(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function Pne(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return ir.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new xn("start must be before end");return new ir(t.lineNumber,t.column,e.lineNumber,e.column)}s(Pne,"rangeFromPositions");var pU=class t{constructor(e){this.replacements=e;Ml(Rx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>s8.deserialize(r)))}static fromEdit(e,r){let n=fU.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=$d.joinReplacements(o,r);o.length=0;let f=s8.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(bh(n=>n.lineRange.startLineNumber,Ih)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let i=n.toSingleEdit(e);r.push(i)}return new Ff(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Hr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Hr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new s8(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of LR(this.replacements,(l,u)=>l.lineRange.distanceToRange(u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.replacements){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,i)=>new s8(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},s8=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"LineReplacement")}static deserialize(e){return new t(Hr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Bh(e.text),i=e.range.startLineNumber,o=r.getValueOfRange(ir.fromPositions(new qr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new qr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Hr(i,a),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new qr(o,a)}else n=new qr(1,1);let i=r.addToPosition(new qr(1,1));return new $d(ir.fromPositions(n,i),"")}else return new $d(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new $d(ir.fromPositions(new qr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new ir(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new $d(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new sd(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Hr(r,n),this.newLines.slice(i,this.newLines.length-o))}toLineEdit(){return new pU([this])}},D0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(D0r||={});var a8=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Dne(!0))}static{s(this,"ArcTracker")}handleEdits(e){let r=e.mapData(o=>new Dne(!1)),i=this._updatedTrackedEdit.compose(r).decomposeSplit(o=>!o.data.isTrackedEdit).e2;this._updatedTrackedEdit=i}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return Ok(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return Ok(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=pU.fromEdit(e,new lE(this.originalText)),n=KO(r.replacements,o=>o.lineRange.length),i=KO(r.getNewLineRanges(),o=>o.length);return{deletedLineCounts:n,insertedLineCounts:i}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Dne=class{constructor(e){this.isTrackedEdit=e}static{s(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};d();var c8=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Ff.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=B0r(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),m=f.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),A=Fwe(g,m),y=Fwe(m,p),E=Fwe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${A.toFixed(2)} noRevert:(${y.toFixed(2)},${E.toFixed(2)})`),y!==1){let b=1-Math.max(E-y,0)/(1-y);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*A,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function Fwe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(Fwe,"compute4GramTextSimilarity");function B0r(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(B0r,"applyEditsToRanges");d();d();var mU=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new qr(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function Bne(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new mU(t),a=new mU(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(f,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),A=new Vt(h,g);c.push(new sd(A,m))}return new Ff(c)}s(Bne,"stringEditFromDiff");d();d();var xut=require("worker_threads");var Owe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function N0r(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(N0r,"createRpcProxy");var Nne=class{constructor(e,r,n){this.responseHandler=new Owe;this.worker=new xut.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=N0r((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();var Mne=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();var hU=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new Hr(o,l.original.startLineNumber),new Hr(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new Hr(o,r+1),new Hr(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new I1(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new xn("not a valid diff");return new I1(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new I1(new ir(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new ir(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(Eut(this.original.endLineNumberExclusive,e)&&Eut(this.modified.endLineNumberExclusive,r))return new I1(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new I1(ir.fromPositions(new qr(this.original.startLineNumber,1),l8(new qr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(new qr(this.modified.startLineNumber,1),l8(new qr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new I1(ir.fromPositions(l8(new qr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),l8(new qr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(l8(new qr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),l8(new qr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new xn}};function l8(t,e){if(t.lineNumber<1)return new qr(1,1);if(t.lineNumber>e.length)return new qr(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new qr(t.lineNumber,r.length+1):t}s(l8,"normalizePosition");function Eut(t,e){return t>=1&&t<=e.length}s(Eut,"isValidLineNumber");var Lne=class t extends hU{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Hr.join(e.map(i=>Hr.fromRangeInclusive(i.originalRange))),n=Hr.join(e.map(i=>Hr.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},I1=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new xn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new xn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new $d(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var Iut=require("fs");var q0=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new Dh(()=>{let e=M0r([une(__dirname,"diffWorker.js"),une(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new Nne(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:but(i.changes),moves:i.moves.map(a=>new Mne(new hU(new Hr(a[0],a[1]),new Hr(a[2],a[3])),but(a[4])))}}};function but(t){return t.map(e=>new Lne(new Hr(e[0],e[1]),new Hr(e[2],e[3]),e[4]?.map(r=>new I1(new ir(r[0],r[1],r[2],r[3]),new ir(r[4],r[5],r[6],r[7])))))}s(but,"toLineRangeMappings");function M0r(t){for(let e of t)if((0,Iut.existsSync)(e))return e}s(M0r,"firstExistingPath");d();var One=new Ct("repository"),uE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},Zh=class{static{s(this,"GitBranchLoader")}},Fne=class extends Zh{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var Qne=new Ct("editSurvivalReporter"),Qwe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new Ju;this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=kd(this._document.uri),r=this.ctx.get(Zh);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){Qne.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=kd(this._document.uri),n=await this.ctx.get(Zh).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return Qne.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i,o){let a=e.computeTrackedEditsSurvivalScore(),c=await this.checkBranchChange(),l=this._getLineCountInfo(),u={fourGram:a.fourGram,noRevert:a.noRevert,timeDelayMs:r,didBranchChange:c,arc:o?.getAcceptedRetainedCharactersCount(),originalCharCount:o?.getOriginalCharacterCount(),currentLineCount:l?.insertedLineCounts,currentDeletedLineCount:l?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i};return{...u,currentLineCount:u.currentLineCount&&u.originalLineCount&&u.currentLineCount>u.originalLineCount?u.originalLineCount:u.currentLineCount,currentDeletedLineCount:u.currentDeletedLineCount&&u.originalDeletedLineCount&&u.currentDeletedLineCount>u.originalDeletedLineCount?u.originalDeletedLineCount:u.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(En).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new xn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await Bne(r,n,e.get(q0)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var Une=class extends Qwe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new ZN(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{Qne.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw Qne.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Tut=new Ct("editSurvivalTrackerService"),T1=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){Tut.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await Bne(r,n,this.ctx.get(q0));i=new Une(this.ctx,e,r,n,a,o,[0,30*1e3,120*1e3,300*1e3,600*1e3])}catch(a){Tut.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${_x(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var qc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var L0r=1e3,F0r={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:Wr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},u8=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new Ct("codeMapper")}async mapCode(e,r,n,i,o,a=!1,c){if(!e.resource)throw new x1("No uri found in code block");if(i.isCancellationRequested)throw new Qw;e.code.includes(hl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let l=await this.ctx.get(En).getOrReadTextDocument({uri:e.resource});if(l.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(l.status==="invalid"){let S=`Failed to find file ${e.resource} with status ${l.status} and reason ${l.reason}`,R=new x1(S);throw this.logger.error(this.ctx,S,R),R}let u=l.document.getText();if(u.length===0&&!e.code.includes(hl))return o&&await this.reportCodeBlock(e,o),{code:e.code};let f=new sU({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new sE(this.ctx)}),p=this.ctx.get(T1),m=await f.render();m=f.transformToFastApplyMessage(m),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Pi(e.resource),editDescription:e.markdownBeforeBlock});let h=await this.ctx.get(Mt).updateExPValuesAndAssignments(),g=Ow(),A=[],y=0,E=0,b=u.length+e.code.length+L0r;for(;;){let S={copilotApiProvider:"proxy",modelConfiguration:F0r,messages:m,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:u},copilotEditsSessionHeader:c};this.logger.debug(this.ctx,`Send map code request ${g} in iteration ${E} with params: ${JSON.stringify(S,null,2)}`);let B=await this.ctx.get(Ja).fetchResponse(S,i,h);if(this.logger.debug(this.ctx,`Received map code response ${g} in iteration ${E} with result: ${JSON.stringify(B,null,2)}`),y=this.calculateResponseLength(B,A,y),B.type==="length"){if(y>b)throw new x1(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${u.length}, Code block length ${e.code.length}`);m=await new sU({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new sE(this.ctx),inProgressRewriteContent:B.truncatedValue}).render()}else if(B.type==="success"){let L=A.join("");if(L){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Pi(e.resource),partialText:L,languageId:l.document.detectedLanguageId,markdownCodeFence:e8(L)});let O=p.initialize(l.document,u,L);return{code:L,editSurvivalTrackingSession:O,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:B.requestId}}}else{let O=`No valid completion found for uri ${e.resource}`;throw new x1(O)}}else{if(B.type==="canceled")throw new qc;{let L=`Failed to map code for uri ${e.resource} with result type ${B.type}`;throw this.logger.error(this.ctx,L,B),new x1(L)}}E+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Pi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Pi(e.resource)})}};d();var Wd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var Uw=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var qne=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var qw=class{constructor(e,r){this.request=e;this.id=Er();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},Uwe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},Hne=class{constructor(e=[],r="panel",n="en"){this._id=Er();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new Uwe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new qne(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var $ne=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Wd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:LI,type:"user"},new Wd({message:LI});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Wd({message:Uw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Wd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Wd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Wd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Wd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Wd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Wd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Wd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Wd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*Sut(t){yield Promise.resolve(t)}s(Sut,"stringToAsyncIterable");d();d();var dE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Rl(r)}static uriToPath(e){let r=es(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var Wne=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await JA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},[]);return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(dE.posixFilePathToUri(e))}getFilePath(e){return dE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${oU} ${this.exampleFilePath}`,`// ${hl}`,"{ changed code }",`// ${hl}`,"{ changed code }",`// ${hl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${oU} ${this.tsExampleFilePath}`,"class Person {",`   // ${hl}`,"   age: number;",`   // ${hl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new rm({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${hl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var jne=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var qwe="<file>",gU="```",yU="###",Q0r=/^(`+)([^ \n]*)/,AU="filepath:";async function*Rut(t,e){let r=new jne(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let A=await r.peek(Math.max(gU.length,qwe.length,yU.length));if(A.startsWith(qwe)||A.startsWith(gU))break;if(A.startsWith(yU)){let y=await r.readLineIncludingLF(),E=y.substring(yU.length).trim();e(E)?n.length=0:n.push(y)}else await _ut(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(qwe);for(;!r.endOfStream&&!i.startsWith(gU);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Q0r),c=a?a[2]:void 0,l=ZKe(c?JKe(c):void 0),u=[`${l.lineComment.start} ${AU}`,`:: ${AU}`,`<!-- ${AU}`,`// ${AU}`,`# ${AU}`],f=Math.max(...u.map(A=>A.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let A=await r.peek(Math.max(gU.length,f));if(A.startsWith(gU)){let y=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(y);continue}}if(!h&&u.some(y=>A.startsWith(y))){let y=await r.readLineIncludingLF(),E=u.reduce((b,S)=>A.startsWith(S)?y.substring(S.length):b,y);E=E.split("-->")[0].trim(),E.endsWith(p)&&(E=E.substring(0,E.length-p.length)),E=E.trim(),h=e(E);continue}await _ut(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Rut,"getCodeBlocksFromResponse");async function _ut(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(_ut,"pipeOneLine");function kut(t){if(t.startsWith(`${yU} `))return"";let e=t.indexOf(`
${yU} `);return e===-1?"":t.substring(0,e)+`
`}s(kut,"parseOverallDescription");d();d();var Gne=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var U0r=new Ct("CopilotEditsConversations"),Al=class{constructor(e){this.editConversations=new wr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new Hne([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&U0r.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new Gne(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var q0r=new Ct("copilotEditsService"),fE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Ja(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=$ne.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof Qw)await this.reportEnd(e,{message:LI});else if(n instanceof Wd)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Mt).updateExPValuesAndAssignments();this.abortIfCancelled(e,r);let o=e.userSelectedModelProviderName&&e.userSelectedModel?await XN(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Jo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Jo.transformMessages(n,o.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Jo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new Wne({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new sE(this.ctx),modelName:n,history:o,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:LI,type:"user"},new Qw;this.ctx.get(Al).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Sut(r),o=new u8(this.ctx),a=s(u=>dE.pathToUri(e,u),"createUri"),c=[],l=kut(r);l&&await this.ctx.get(od).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),this.abortIfCancelled(e,n);for await(let u of Rut(i,a)){let f=o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async p=>{await this.ctx.get(od).reportTurn(e,p)}).then(async p=>(p.editSurvivalTrackingSession&&u.resource&&await this.startEditSurvivalTrackingWithSession(e,u.resource,p.editSurvivalTrackingSession,p.telemetry),p));c.push(f)}await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof x1||i instanceof O3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof Qw)e.currentTurn.status="cancelled",e.currentTurn.response={message:LI,type:"user"},await this.reportEnd(e,{message:LI});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(od).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(od).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(od).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}async startEditSurvivalTrackingWithSession(e,r,n,i){try{let o=wT({uri:r,languageId:"UNKNOWN"}),a=await this.ctx.get(Mt).updateExPValuesAndAssignments();n.startReporter(c=>{this.handleEditSurvivalTelemetry(e,c,a,o,i)})}catch(o){let a=e?.editConversationId||"unknown",c=e?.currentTurn?.id||"unknown",l=r||"unknown";q0r.warn(this.ctx,`Failed to start edit survival tracking for file '${l}' in conversation '${a}', turn '${c}'.`,o)}}handleEditSurvivalTelemetry(e,r,n,i,o){TX(this.ctx,"editsPanel",{requestSource:o?.requestSource??e.editConversation.getSource(),chatRequestModel:o?.chatRequestModel??"",mapper:o?.mapper??"",headerRequestId:o?.headerRequestId??"",mode:"edit",modelId:e.userSelectedModel??"unknown",languageId:i},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}};d();var d8=class extends uf{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Br).resetToken(),r.get(Pd).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Cp({serverUrl:WG(r,n.serverUrl),apiUrl:WG(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var p2i=new Ct("exp");function Put(t){let e=t.get(Mt);e.registerStaticFilters(W0r(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>zi(t,Ht.DebugOverrideEngine)||zi(t,Ht.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>qG()?"copilot-web":t.get(mn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Hwe(!t.get(Io).isProduction()&&t.get(mn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(mn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>H0r(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(mn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Hwe(t.get(mn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>$0r(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(mn).getRelatedPluginInfo()){let i=Lm+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(w9).includes(i)){wW(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=Hwe(n.version)}return r})}s(Put,"setupExperimentationService");function H0r(t){let e=t.get(mn).getEditorPluginInfo();return e.name==="copilot"&&dC(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(H0r,"getPluginRelease");function $0r(t){let e=t.get(mn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s($0r,"getTargetPopulation");function W0r(t){return j0r(t)}s(W0r,"createAllFilters");function j0r(t){let e=t.get(Ds);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(Io).isProduction()?r2(t):"1.999.0"}}s(j0r,"createDefaultFilters");function Hwe(t){return t.split("-")[0]}s(Hwe,"trimVersionSuffix");d();var CU=(r=>(r.enabled="enabled",r.disabled="disabled",r))(CU||{}),Uk=Symbol("onMCPToolsListChanged"),eg=class{static{s(this,"McpManager")}};d();var ZA=class{static{s(this,"McpRuntimeNotifier")}},Vne=class extends ZA{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var f8=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var $we=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},zne=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new $we(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=f.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var hs;(n=>{function t(i){return new Wwe(i)}n.ok=t,s(t,"ok");function e(i){return new jwe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(hs||={});var Wwe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},jwe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();var Yne=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw YO(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw YO(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var NU=Ne(Hc());function Vdt(t){return t.map(zpr).join(`
`)}s(Vdt,"stringifyChatMessages");function zpr({role:t,content:e}){if(t!==NU.Raw.ChatRole.User&&t!==NU.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===NU.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==NU.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(zpr,"stringifyMessage");d();d();var Ypr=/^\w[\w\d+.-]*$/,Kpr=/^\//,Jpr=/^\/\//;function Xpr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Ypr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Kpr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Jpr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Xpr,"_validateUri");function Zpr(t,e){return!t&&!e?"file":t}s(Zpr,"_schemeFix");function emr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==iy&&(e=iy+e):e=iy;break}return e}s(emr,"_referenceResolution");var ks="",iy="/",tmr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Xw=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||ks,this.authority=e.authority||ks,this.path=e.path||ks,this.query=e.query||ks,this.fragment=e.fragment||ks):(this.scheme=Zpr(e,a),this.authority=r||ks,this.path=emr(this.scheme,n||ks),this.query=i||ks,this.fragment=o||ks,Xpr(this,a))}get fsPath(){return OSe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=ks),n===void 0?n=this.authority:n===null&&(n=ks),i===void 0?i=this.path:i===null&&(i=ks),o===void 0?o=this.query:o===null&&(o=ks),a===void 0?a=this.fragment:a===null&&(a=ks),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Jw(r,n,i,o,a)}static parse(e,r=!1){let n=tmr.exec(e);return n?new Jw(n[2]||ks,bie(n[4]||ks),bie(n[5]||ks),bie(n[7]||ks),bie(n[9]||ks),r):new Jw(ks,ks,ks,ks,ks)}static file(e){let r=ks;if(Nw&&(e=e.replace(/\\/g,iy)),e[0]===iy&&e[1]===iy){let n=e.indexOf(iy,2);n===-1?(r=e.substring(2),e=iy):(r=e.substring(2,n),e=e.substring(n)||iy)}return new Jw("file",r,e,ks,ks)}static from(e,r){return new Jw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Nw&&e.scheme==="file"?n=t.file(hc.join(OSe(e,!0),...r)).path:n=ua.join(e.path,...r),e.with({path:n})}toString(e=!1){return QSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Jw(e);return r._formatted=e.external??null,r._fsPath=e._sep===Kdt?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var Kdt=Nw?1:void 0,Jw=class extends Xw{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=OSe(this,!1)),this._fsPath}toString(r=!1){return r?QSe(this,!0):(this._formatted||(this._formatted=QSe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=Kdt),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Jdt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function zdt(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Jdt[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(zdt,"encodeURIComponentFast");function rmr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Jdt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(rmr,"encodeURIComponentMinimal");function OSe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Nw&&(r=r.replace(/\//g,"\\")),r}s(OSe,"uriToFsPath");function QSe(t,e){let r=e?rmr:zdt,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=iy,n+=iy),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:zdt(l,!1,!1)),n}s(QSe,"_asFormatted");function Xdt(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Xdt(t.substr(3)):t}}s(Xdt,"decodeURIComponentGraceful");var Ydt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function bie(t){return t.match(Ydt)?t.replace(Ydt,e=>Xdt(e)):t}s(bie,"percentDecode");d();var oy=class t{constructor(e){this.uri=e;this._uri=Xw.parse(kl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new Dx({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return dne(this.uri)}get extension(){return fne(this.uri)}toUri(){return this._uri}};var MU=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},Iie=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new Px;this.liveDependentants=0;this.fetchIssued=!1;this._result=new eU;Ml(r.length>0),Ml(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>LU.deserialize(r)),e.activeDocumentIdx,[],MU.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},LU=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,m,h=i.length,g=new Hr(1,i.length+1),A=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=A;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Hr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new lu(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(oy.create(e.id),e.workspaceRoot?Xw.parse(e.workspaceRoot):void 0,GR.create(e.languageId),e.documentLinesBeforeEdit,ms.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?ir.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new lu(e.documentBeforeEdits),b1.deserialize(e.recentEdits),new lu(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Hr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Zi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=hs.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=hs.ok(e),i=r.build(n);return new t(n,i)}},Zw=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?Vdt(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:A7(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ml(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function nmr(t,...e){let r=t;for(let n of e)r=n(r);return r}s(nmr,"chainStatelessNextEditProviders");var C8=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=nmr(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},v8=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Zi(hs.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=Yne.createSortPermutation(a,bh(u=>u.lineRange.startLineNumber,Ih)),l=new ms(c.apply(a));return new Zi(hs.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},x8=class extends v8{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},E8=class extends v8{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var imr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),omr=new Map(Object.entries(imr).map(([t,e])=>[t,{languageId:t,...e}]));function eft(t){return USe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(eft,"getLanguage");function USe(t){return omr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(USe,"_getLanguage");d();var b8=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?W0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new W0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new W0(new is(0,0),new is(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!W0.isRange(e))throw eS("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw eS("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw eS("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var is=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw eS("line must be non-negative");if(r<0)throw eS("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw eS();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw eS();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},W0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?is.isPosition(e.start)&&is.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new is(e,r),a=new is(n,i)):is.isPosition(e)&&is.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):is.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=is.Max(e.start,this._start),n=is.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=is.Min(e.start,this._start),n=is.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw eS();let n;return e?is.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return smr(this)}};function eS(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(eS,"illegalArgument");function smr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(smr,"getDebugDescriptionOfRange");d();function tft(t){let r=t.split(/\r?\n/).map(amr),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(tft,"looksLikeCode");function amr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),rxe(t)||(e+=1);{rxe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(amr,"guessLineType");var I8;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(I8||={});function cmr(t){return t.replace(/^\s+/g,"")}s(cmr,"trimLeadingWhitespace");function qSe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(qSe,"isImportStatement");var lmr=new Dx(t=>{let e=eft(t),{start:r,end:n}=e.lineComment,i=`(?:${k3(r)})`,o=n?`(?:${k3(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function HSe(t,e){let r=t.match(lmr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=cmr(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(HSe,"extractEndLineComment");function wie(t,e){let r=HSe(t,e);if(!(r&&r.content.trim().length>0&&tft(r.commentWithoutTokens)))return r}s(wie,"extractExplicativeEndLineComment");var T8=class t extends v8{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>qSe(i,r))||umr(e,n).some(i=>qSe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function umr(t,e){return GVe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(umr,"getOldLines");d();var WSe=Ne(Hc());d();d();d();var sy;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(sy||={});var R1=j0("instantiationService");function dmr(t,e,r){e[sy.DI_TARGET]===e?e[sy.DI_DEPENDENCIES].push({id:t,index:r}):(e[sy.DI_DEPENDENCIES]=[{id:t,index:r}],e[sy.DI_TARGET]=e)}s(dmr,"storeServiceDependency");function j0(t){if(sy.serviceIds.has(t))return sy.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");dmr(e,r,i)},"id");return e.toString=()=>t,sy.serviceIds.set(t,e),e}s(j0,"createDecorator");d();d();var sm=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var $Se=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},FU=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new $Se(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var zk=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var fmr=!1,Sie=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},_ie=class t{constructor(e=new zk,r=!1,n,i=fmr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(R1,this),this._globalGraph=i?n?._globalGraph??new FU(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,iX(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)nze(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=OU.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw WVe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof sm?(n=OU.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=OU.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=sy.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof sm)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof sm?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new FU(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new Sie(i);for(let u of sy.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof sm){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new Sie(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof sm){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof sm)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var OU=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Rie=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new zk(...e):e??new zk}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new _ie(this._collection,!0)}};var Pie=j0("ITelemetrySender"),ay=j0("IChatMLFetcher");var kie=class{constructor(){this._stream=new ine;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Die=j0("IEndpointProvider");d();var yE=j0("IParserService");d();var w8=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},QU=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},UU=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},tS=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},rS=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var Bie=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new w8(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},qU=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(tS.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new w8(e,0,n,i-n+1)]):e<=r?(tS.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new w8(e,r-e+1,n,0)]):(tS.Assert(e===r+1,"originalStart should only be one more than originalEnd"),tS.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,m,h,g,A,y,E){let b=null,S=null,R=new Bie,B=r,L=n,O=h[0]-y[0]-i,K=-1073741824,V=this.m_forwardHistory.length-1;do{let z=O+e;z===B||z<L&&u[z-1]<u[z+1]?(p=u[z+1],g=p-O-i,p<K&&R.MarkNextChange(),K=p,R.AddModifiedElement(p+1,g),O=z+1-e):(p=u[z-1]+1,g=p-O-i,p<K&&R.MarkNextChange(),K=p-1,R.AddOriginalElement(p,g+1),O=z-1-e),V>=0&&(u=this.m_forwardHistory[V],e=u[0],B=1,L=u.length-1)}while(--V>=-1);b=R.getReverseChanges(),R=new Bie,B=a,L=c,O=h[0]-y[0]-l,K=1073741824,V=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let z=O+o;z===B||z<L&&f[z-1]>=f[z+1]?(p=f[z+1]-1,g=p-O-l,p>K&&R.MarkNextChange(),K=p+1,R.AddOriginalElement(p+1,g+1),O=z+1-o):(p=f[z-1],g=p-O-l,p>K&&R.MarkNextChange(),K=p,R.AddModifiedElement(p+1,g+1),O=z-1-o),V>=0&&(f=this.m_reverseHistory[V],o=f[0],B=1,L=f.length-1)}while(--V>=-1);return S=R.getChanges(),this.ConcatenateChanges(b,S)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,A=new Int32Array(g),y=new Int32Array(g),E=i-n,b=r-e,S=e-n,R=r-i,L=(b-E)%2===0;A[E]=e,y[b]=r;for(let O=1;O<=h/2+1;O++){let K=0,V=0;u=this.ClipDiagonalBound(E-O,O,E,g),f=this.ClipDiagonalBound(E+O,O,E,g);for(let z=u;z<=f;z+=2){z===u||z<f&&A[z-1]<A[z+1]?c=A[z+1]:c=A[z-1]+1,l=c-(z-E)-S;let Q=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(A[z]=c,c+l>K+V&&(K=c,V=l),!L&&Math.abs(z-b)<=O-1&&c>=y[z])return o[0]=c,a[0]=l,Q<=y[z]&&O<=1448?this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L):null}p=this.ClipDiagonalBound(b-O,O,b,g),m=this.ClipDiagonalBound(b+O,O,b,g);for(let z=p;z<=m;z+=2){z===p||z<m&&y[z-1]>=y[z+1]?c=y[z+1]-1:c=y[z-1],l=c-(z-b)-R;let Q=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(y[z]=c,L&&Math.abs(z-E)<=O&&c<=A[z])return o[0]=c,a[0]=l,Q>=A[z]&&O<=1448?this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L):null}if(O<=1447){let z=new Int32Array(f-u+2);z[0]=E-u+1,rS.Copy2(A,u,z,1,f-u+1),this.m_forwardHistory.push(z),z=new Int32Array(m-p+2),z[0]=b-p+1,rS.Copy2(y,p,z,1,m-p+1),this.m_reverseHistory.push(z)}}return this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return rS.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],rS.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return rS.Copy(e,0,i,0,e.length),rS.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(tS.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),tS.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new w8(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();function rft(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(Ylt(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(rft,"safeStringify");var Nie=!1,VSe=!0,pmr=200,HU=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new Zw(e),i=e.getActiveDocument(),o=Yk(i);if(!o||!o.isEmpty())return Zi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let S of e.documents)S.id!==i.id&&(l.push(`RELATED DOC: ${S.getDisplayPath()}`),l.push("```patch"),l.push(...ymr(S)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new Hr(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=f.endLineNumberExclusive){let S=p<c.length;l.push(`IN PROGRESS VERSION ${S?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),S&&(l.push(u),m={editRange:new Hr(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let h=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Zi.noEdit({kind:"fetchFailure",error:new Error(rft(g.err))},n);let{result:A,ttft:y}=g.val;if(y!==void 0&&n.setTtft(y),A.trim().length===0)return Zi.noEdit({kind:"noSuggestions"},n);let E=Mie(i.languageId,c,f,void 0,A,m),b=await KSe(this._parserService,E,i,{requireEditWithinNLines:5});if(b){let S=new ms([b]);return Zi.edit({edit:S},n)}else return Zi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};HU=of([va(1,yE)],HU);var S8=class extends HU{constructor(r,n){super(S8.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return hs.error({kind:"cancel"});let o=await zSe(this.ID,this._chatMLFetcher,[{role:WSe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:WSe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),hs.ok({ignored:a,result:c,ttft:l})}};S8=of([va(0,yE),va(1,ay)],S8);async function zSe(t,e,r,n,i){let o=new kie,a=!1,c,l=o.stream.map(A=>({choices:[{index:0,finish_reason:null,logprobs:null,text:A.delta.text}]})),u=hmr(l,n),f=e.fetchOne(r,async(A,y,E)=>(typeof c>"u"&&(c=Date.now()),o.update(A,E),a?A.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await f;return g.type!=="success"?hs.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):hs.ok({ttft:c,ignored:p,result:m})}s(zSe,"fetchUntilConvergence");function Yk(t){let e=new Vt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:mmr(t)}s(Yk,"getOrDeduceSelectionFromLastEdit");function mmr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new ir(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=Bx(a,o),l=o.length-c+1;return new ir(i,l,i,l)}s(mmr,"deduceSelectionFromLastEdit");async function hmr(t,e){let r=gmr(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,f[m.index]=f[m.index]??"",f[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let A=g.split(`
`).slice(-4,-1);if(A.length<3||n.indexOf(A.join(`
`)+`
`)<=0)continue;let E=f[m.index].substring(f[m.index].length-o);if(a.indexOf(E)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(hmr,"fetchCompletionUntilConvergence");function gmr(t,e){let r=[],n=[];return new tU(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(gmr,"getTextAfterFirstPattern");function Amr(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new XA(new Hr(n,i),o)}s(Amr,"createReducedLineEdit");var _8=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Amr(r,n,i);let o=new ms([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let A=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),y=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),E=A.join(`
`),b=y.join(`
`),{editDistance:S}=f(E,b);return new jSe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,S)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new QU(this.oldLines,n),o=new QU(this.newLines,n),a=new qU(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(e3(this.newLines,u))return new GSe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return ift(this.languageId,this.oldLines,u);function f(p,m){let h=new UU(p),g=new UU(m),y=new qU(h,g).ComputeDiff(),E=0,b=0;for(let L of y)E+=L.originalLength,b+=L.modifiedLength;let S=p.length,R=m.length,B=E+b;return{aChanged:E,bChanged:b,aLength:S,bLength:R,editDistance:B}}}},jSe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},GSe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new ms([this.edit]);{let r=this.groupInHunks();return new ms(r.map(n=>{let i=n[0],o=n[n.length-1];return new XA(new Hr(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!VSe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>pmr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!YSe(new Hr(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new ms([this.edit]),i=r(n);this.parseErrorCount=await $U(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=wie(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>wie(l,this.languageId)),i=r.map(l=>wie(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return ift(this.languageId,this.oldLines,e)}};function YSe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(YSe,"editIsInsideEditWindow");function ift(t,e,r){let i=e.length+1,o=r.slice(0);return new _8(t,e,new Hr(1,i),o).resolveDiff()}s(ift,"createPossibleEditFromLines");function Mie(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=I8.fromString(i.trimEnd()),c=o?a.some(y=>y.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((y,E)=>{l.push(new _8(t,e,y,E))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let E=new Hr(r.endLineNumberExclusive,e.length+1);E.length>a.length+5||u(E,a)}s(p,"generateEditAllDoc");function m(){for(let y=1;y<a.length;y++){let b=a.slice(a.length-y).join(`
`);for(let S=r.endLineNumberExclusive-1;S<e.length;S++){let B=e.slice(S,S+y).join(`
`);b===B&&u(new Hr(r.endLineNumberExclusive,S+1),a.slice(0,a.length-y))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let y=[];for(let E of a){if(E.indexOf(o.omittedMessage)>=0){u(o.editRange,y.map(b=>b));return}y.push(E)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),f(),h(),p(),m(),!i.endsWith(`
`)){let y=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...Mie(t,e,r,n,y,o))}return g(l);function g(y){return A(y,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function A(y,E){let b=new Set,S=[];for(let R of y){let B=E(R);b.has(B)||(b.add(B),S.push(R))}return S}}s(Mie,"generatePossibleEdits");async function KSe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Nie?await $U(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Nie){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>f(p)-f(m)),u.length>0?u[0].edit:null}s(KSe,"selectBestEdit");function ymr(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(ymr,"summariseDocDiff");function oft(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(oft,"summarizeEditsAsUnifiedDiff");async function $U(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s($U,"getParseErrorCount");d();var CE=Ne(Hc());d();var WU=j0("ITokenizerProvider");var nS=class extends CE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(WU);return new nS(n,i,o,c,r,a.get(ay))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===CE.Raw.ChatRole.System&&f.role===CE.Raw.ChatRole.System){let p=f.content.at(-1),m=u.content.at(0);p&&m&&p.type===CE.Raw.ChatCompletionContentPartKind.Text&&m.type===CE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:CE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==CE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};nS=of([va(3,WU),va(4,R1),va(5,ay)],nS);d();var sft=Ne(Hc());var Lie=class extends sft.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var JSe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Vt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new W0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},cy=class extends JSe{constructor(r){super();this.value=r;this._transformer=new Qk(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new qr(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Cmr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(vmr(r))}_validatePosition(r){if(r.line<0)return new is(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new is(n-1,o)}if(r.character<0)return new is(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new is(r.line,i):r}};function Cmr(t){return new is(t.lineNumber-1,t.column-1)}s(Cmr,"corePositionToVSCodePosition");function vmr(t){return new qr(t.line+1,t.character+1)}s(vmr,"vsCodePositionToCorePosition");d();d();function aft(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(aft,"min");d();function XSe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>XSe(n,e))}}s(XSe,"toAstNode");function cft(t,e){let r=XB(e,a=>a.endExclusive>=t.start),n=SA(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Vt(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Vt(o,t.endExclusive)),i}s(cft,"subtractRange");d();d();d();var Fie=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=VR(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=VR(e),r=VR(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=VR(e),r=VR(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=VR(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new ZSe(i,e-a)}};var ZSe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var jU=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Bh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new Fie(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Bh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new is(r.index,Math.min(r.remainder,n))}toRange(e){return new W0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Vt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new b8(this.validateRange(n.range),n.newText));return new Xh(r.map(n=>new gl(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new b8(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof is))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new is(r,n):e}validateRange(e){return new W0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Oie=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Dh(()=>new jU(this.text));this._originalPositionOffsetTransformer=new Dh(()=>new jU(this.originalText));this._text=new Dh(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var e_e=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},Jk=class extends Oie{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function Uie(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),m=f?l.rangeToOffsetRange(f):void 0,h=lft(u,l),g=t_e.fromRootNode(h,p),A=r_e.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&A.visitAll(O=>O.node.range.intersectsOrTouches(m)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(A),i.push(A.getTextFragment());let y=s(O=>m?O.range.endExclusive<m.start?m.start-O.range.endExclusive:O.range.start>m.endExclusive?3*(O.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),E=new Dx(O=>m?O.children.length===0?O.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:aft(O.children.map(K=>E.get(K)))+1:0),b=new Dx(O=>{let K=O.parent?b.get(O.parent):Number.MAX_SAFE_INTEGER,V=E.get(O);return Math.min(K,V)}),S=!!e.tryPreserveTypeChecking,R=s(O=>S&&O.node?.kind==="import_statement"?0:100*b.get(O)+O.depth+10*(y(O)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(B!==void 0){let O=R;R=s(K=>{let V=O(K);return V===!1?!1:K.node?B(K.node,V,l):V},"costFn")}let L=A.getDescendantsAndSelf();for(let O of L){if(!O.node.node)continue;let K=R(O.node);K!==!1&&o.push({idx:c,node:O,cost:K})}}o.sort(bh(c=>c.cost,Ih));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new Jk(u,l.toTextEditFromOriginal(u.getText().length)),p=f,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:cft(Vt.ofLength(f.originalText.length),f.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:XSe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(f)}return a}s(Uie,"summarizeDocumentsSyncImpl");function lft(t,e,r=void 0){let n=new Vt(t.startIndex,t.endIndex),i=[],o=new e_e(r,t,n,i,e);for(let a of t.children)i.push(lft(a,e,o));return o}s(lft,"createRemovableNodeFromOverlayNode");var t_e=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Vt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Vt(0,e.range.start),o=new Vt(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Vt(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Vt(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return xmr(this.document,this.range)}getTrailingWs(){return Emr(this.document,this.range)}};function xmr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(xmr,"getLeadingWs");function Emr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(Emr,"getTrailingWs");var r_e=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new iS(this.node.range,this.node.document);if(!this._surviving)return new Kk("");let e=Array.from(LR(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof iS&&c.fragment instanceof iS){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new Kk(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new Kk(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)bmr(r,i.fragment);return Qie.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},GU=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new gl(new Vt(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof Qie)for(let l of c.fragments)a(l);else c instanceof Kk?i+=c.text:c instanceof iS&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new Xh(r)}},Kk=class extends GU{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},iS=class t extends GU{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Vt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Vt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Vt(this.range.start,r.range.endExclusive),this.originalText):null}},Qie=class t extends GU{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new Kk(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function bmr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof iS&&e instanceof iS){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(bmr,"pushFragment");d();var qie=Ne(Hc());function VU(t){if(Array.isArray(t))return t.map(r=>VU(r));let e=(0,qie.toMode)(qie.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(VU,"rawMessageToCAPI");d();d();var Hie=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new xn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new xn("Invalid child startIndex");if(a.endIndex>r)throw new xn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function dft(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Imr(o,e),[c]=fft(t,a,void 0);return c.adjust(t,pft(e)),c.toOverlayNode(t,!0)}catch{return new $ie(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(dft,"getStructureUsingIndentation");function fft(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=fft(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new xn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new xn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new $ie(n,i,o),r]}s(fft,"createFoldingRangeTree");var $ie=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new xn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=n_e(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=n_e(e,o,o,"LINE",[]);a&&n.push(a)}return n_e(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function n_e(t,e,r,n,i){let o=t.getOffsetAtPosition(new is(e-1,0)),a=r<t.getLineCount()?new is(r,0):new is(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new Hie(o,c,n,i)}s(n_e,"createOverlayNode");function Imr(t,e){return Tmr(t,pft(e))}s(Imr,"generateFoldingRegions");function pft(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(pft,"isOffSide");function Tmr(t,e){let r=t.getOptions().tabSize,n=new i_e,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Smr(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(Tmr,"_computeRanges");var wmr=65535,Xk=16777215,uft=4278190080,i_e=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>Xk||r>Xk)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new o_e(e,r)}};function Smr(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Smr,"computeIndentLevel");var o_e=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>Xk||a>Xk)throw new Error("startLineNumber or endLineNumber must not exceed "+Xk);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Xk}getEndLineNumber(e){return this._endIndexes[e]&Xk}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&uft)>>>24)+((this._endIndexes[e]&uft)>>>16);return r===wmr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function Zk(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(Zk,"fromUnknown");var Ol=Ne(Hc());var Wie="current-version",eP="next-version",hft=2,gft=10,Aft=.7,_mr=/```[^\n]*\n/,oS=class extends C8{constructor(r,n,i){super(oS.ID,[o=>new T8(o),o=>new x8(o),o=>new E8(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new zne}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=Yk(a),u=l?s_e(a,l):null,f=Yk(c),p=f?s_e(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(hft,gft)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new Zw(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return Zi.noEdit({kind:"unexpected",error:Zk(l)},i)}let c=o.getArtificalDelay();return c>0&&await nE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Zi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Zi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Zi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let R={kind:"gotCancelled",message:"afterDebounce"};return Zi.noEdit(R,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:A,activeDocumentLines:y}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let E=await zSe(this.ID,this.fetcher,VU(p),{convergence:g,ignoreReplyTextBefore:_mr,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(E.isOk()?"success":E.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),E.isOk()&&typeof E.val.ttft=="number"&&o.setTtft(E.val.ttft),i.isCancellationRequested)return Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(E.isError())return E.err.kind==="cancel"?Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Zi.noEdit({kind:"fetchFailure",error:Zk(E.err.err)},o);let b=E.val.result;if(b.length===0){let R=`<${eP}>
`,B=E.val.ignored.indexOf(R);B>=0&&(b=E.val.ignored.substring(B+R.length))}if(b=Rmr(b),b.trim().length===0)return Zi.noEdit({kind:"noSuggestions"},o);let S;if(c&&l&&u){let R=kmr(A,c,l,b);if(!R||R.edits.length===0)return Zi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=Pmr(c,R);if(B.edits.length===0)return Zi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Nie){let K=await $U(this._parserService,A.languageId,A.documentAfterEditsNoShortening.value),V=B.apply(A.documentAfterEditsNoShortening.value);if(await $U(this._parserService,A.languageId,V)>K)return Zi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}S=Dmr(A,B);let L=S.edits[0].lineRange.startLineNumber,O=S.edits[S.edits.length-1].lineRange.endLineNumberExclusive;if(!YSe(new Hr(L,O),u))return Zi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let R=Mie(A.languageId,y,m,h,b,void 0),B=await KSe(this._parserService,R,A,{requireEditWithinNLines:100});if(!B)return Zi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);S=new ms([B])}return Bmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Nmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):Mmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Lmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Zi.edit({edit:S},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await nE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=Yk(i);if(l===null)return;let u=s_e(i,l),f=new cy(i.documentAfterEditsNoShortening.value),p=await Qmr(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let V=Fmr(i.documentAfterEditsLines,l.startLineNumber),z=Math.max(1,Math.min(V,l.startLineNumber-hft)),Q=l.startLineNumber-z,U=Math.min(c.length,l.endLineNumber+gft),Z=U-l.endLineNumber,J=u.line-Q,j=u.line+Z,$=new W0(J,0,j,f.getLineLength(j));return{firstEditableLineInShortenedDocument:z,lastEditableLineInShortenedDocument:U,editWindow:$}}(),A=Uie(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],y=new Hr(1,m),E=new Hr(m,h+1),b=A.text,{messages:S,prediction:R,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),L=b.split(/\r\n|\r|\n/).length,O=A.projectRange(g),K=A.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:A,editWindowAllowedEditLineRange:new Hr(O.start.line+1,O.end.line+2),allowedEditLineRange:new Hr(m,h+1),messages:S,prediction:R,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:c,completionPrefixRange:y,completionRange:E,convergence:b,expectedConvergencePrefix:K.start,maxCompletionLineCount:L+20}}async _renderPrompt(r,n){let o=await nS.create(this._instantiationService,c_e,r).render(void 0,n,{trace:!1}),a=o.metadata.get(Yie)?.prediction,c=!!o.metadata.get(Gie);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};oS=of([va(0,ay),va(1,yE),va(2,R1)],oS);function Rmr(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${eP}>`,`
`),t=e(t,`\`\`\`
</${eP}>`,`
`),t=e(t,`</${eP}>`,`
`),t}s(Rmr,"removeSuffixFromReply");function s_e(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new cy(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(s_e,"getCursorPositionInOuterDocument");function kmr(t,e,r,n){let i=I8.fromString(e.text),o=I8.fromString(n.trimEnd()),c=new _8(t.languageId,i,new Hr(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=VSe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(kmr,"generateSummarizedEditWindowEdit");function Pmr(t,e){let r=e.toEdit(new lu(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Pmr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Dmr(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Pa.replace(new Vt(a,a+i.replaceRange.length),i.newText)}),n=new Hd(t.documentAfterEdits,da.create(r));return ms.fromEdit(n)}s(Dmr,"convertOuterDocumentEditToProjectedEdit");function Bmr(t,e){let r=e.toEdit(t.documentAfterEdits),n=yft(t.documentAfterEdits.value,r),i=new jie,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(yft(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Bmr,"editWouldUndo");function Nmr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!bft(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Nmr,"editWouldDeleteWhatWasJustInserted");function Mmr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!bft(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(HSe(i,t.languageId))return!0}return!1}s(Mmr,"editWouldDeleteAComment");function Lmr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return a_e(o,i)/i.size>.8}s(Lmr,"editWouldDuplicateExistingLines");function bft(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(bft,"editIsDeletion");function Fmr(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(Fmr,"findLineNumberAboveWithContent");var jie=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(vft(this.inserted,e.inserted),vft(this.deleted,e.deleted))}isUndoneBy(e){let r=xft(e.inserted,e.deleted),n=xft(e.deleted,e.inserted),i=a_e(n,this.inserted),o=a_e(r,this.deleted);return n.size>6&&i/n.size>Aft||r.size>6&&o/r.size>Aft}};function yft(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of Cft(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of Cft(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Omr(c.newText,l.newText)))}return new jie(r,n)}s(yft,"getInformationDelta");function Omr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Omr,"trimOverlap");function Cft(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(Cft,"to4grams");function vft(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(vft,"setUnion");function xft(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(xft,"setMinus");function a_e(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(a_e,"setIntersectionCount");async function Qmr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||dft(new cy(e.getText()),e.languageId,void 0)}s(Qmr,"getStructure");var c_e=class extends Ol.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${eP}>`,`\`\`\`${o}`,`${i}`,"```",`</${eP}>`].join(`
`),c=(0,Ol.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Yie(a)}),vscpp(Ol.SystemMessage,{priority:1e3},vscpp(Lie,null),this._getInstructions()),vscpp(Ol.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Ol.Chunk,{priority:300},vscpp(Vie,{doc:l}))):vscpp(Ol.Chunk,{priority:100+u},vscpp(Vie,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Ol.Chunk,{priority:300},vscpp(zie,{doc:l}))):vscpp(Ol.Chunk,{priority:200+u},vscpp(zie,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(Ol.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Gie}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Wie,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Wie,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Wie,"> and </",Wie,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",eP,">.")}},Gie=class extends Ol.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Vie=class extends Ol.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},zie=class extends Ol.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...oft(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Yie=class extends Ol.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function Ift(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(Ift,"findIndexes");function Umr(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=Ift(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],A=r[p];if(g===A)h--,p--;else if(A.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=Ift(t,e[c]).slice(-n).reverse();for(let p of f){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],A=t[p];if(g===A)h++,p++;else if(A.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(Umr,"deduplicateEditRegion");function Tft(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:Umr(i,r.split(/\r?\n/),o).join(`
`)}}s(Tft,"postProcessUpdatedEditWindow");d();var Kie=Ne(Hc());function wft(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Kie.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Kie.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(wft,"getTextPart");function qmr(t){return{type:Kie.Raw.ChatCompletionContentPartKind.Text,text:t}}s(qmr,"toTextPart");function l_e(t){return[qmr(t)]}s(l_e,"toTextParts");d();var Jie=j0("IDiffService");var m_e=Ne(Hc());d();var Xie="<|cursor|>",tP="<|code_to_edit|>",R8="<|/code_to_edit|>",_ft="<|area_around_code_to_edit|>",Rft="<|/area_around_code_to_edit|>",Hmr="<|current_file_content|>",$mr="<|/current_file_content|>",Wmr="<|edit_diff_history|>",jmr="<|/edit_diff_history|>",Gmr="<|recently_viewed_code_snippets|>",Vmr="<|/recently_viewed_code_snippets|>",zmr="<|recently_viewed_code_snippet|>",Ymr="<|/recently_viewed_code_snippet|>",kft=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${tP} and ${R8} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Xie}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${tP} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${tP} and ${R8} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${tP} or ${R8} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Pft(t,e,r,n){let i=t.getActiveDocument(),o=Xmr(t,n),a=Kmr(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${Gmr}
${o}
${Vmr}

${Hmr}
current_file_path: ${c}
${e}
${$mr}

${Wmr}
${a}
${jmr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Xie}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${tP}\` and \`${R8}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Pft,"getUserPrompt");function Kmr(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=Jmr(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(Kmr,"getEditDiffHistory");function Jmr(t){let e=[],r=ms.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(Jmr,"generateDocDiff");function Sft(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[zmr,n,e,Ymr].join(`
`)}s(Sft,"formatCodeSnippet");function Xmr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((y,E)=>`${E+1}|${y}`));let m=p.map(y=>e(y)+1),h=e(Sft(f.path,"",!0)),g=m.reduce((y,E)=>y+E,0)+h,A=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,A=!0;p.length>0&&(l+=g,c.push(Sft(f.path,p.join(`
`),A)))}return c.join(`

`)}s(Xmr,"getRecentCodeSnippets");function u_e(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(u_e,"truncateCode");var Dft=2,Bft=10,d_e=15,f_e=1e3,p_e=2e3;var rg=class extends C8{constructor(r,n,i){super(rg.ID,[o=>new T8(o),o=>new x8(o),o=>new E8(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new Zw(r);try{if(r.xtabEditHistory.length===0)return Zi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Zi(o,i.build(o))}catch(o){return Zi.noEdit({kind:"unexpected",error:Zk(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=Yk(o);if(a===null)return hs.error({kind:"uncategorized",error:Zk(new Error("NoSelection"))});let c=s(ae=>Math.floor(ae.length/4),"computeTokens"),l=new qr(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+Xie+f.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-d_e),A=Math.min(h.length,m+d_e+1),y=Dft,E=Bft,b=Math.max(0,m-y),S=Math.min(h.length,m+E+1),R=o.documentAfterEdits.getTransformer().getOffsetRange(new ir(b,0,S,0)),B;B=f.split(/\r?\n/).slice(b,S);let L=[b,S],O=h.slice(b,S),K=[_ft,...h.slice(g,b),tP,...O,R8,...h.slice(S,A),Rft].join(`
`),V=K,z;{let ae=c(K),te=0;if(ae>=p_e)z=K,te=g;else{let pe=Math.floor((p_e-ae)/2),[Ae]=u_e(h.slice(0,g),!0,pe),[,Oe]=u_e(h.slice(A),!1,pe);te=Math.max(Ae,m-f_e);let Te=Math.min(Oe+A,m+f_e+1);z=[...h.slice(te,g),K,...h.slice(A,Te)].join(`
`)}}let Q=Pft(r,z,V,c),U=[{role:m_e.Raw.ChatRole.System,content:l_e(kft)},{role:m_e.Raw.ChatRole.User,content:l_e(Q)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return hs.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let Z=new E3;i.setFetchStartedAt();let J,j=await this._endpointProvider.getEndpointInfo(this.ID),$=await this._chatMLFetcher.fetchOne(VU(U),async(ae,te,pe)=>{J===void 0&&(J=Z.elapsed())},{id:j.id,name:j.name},{temperature:0},n);if($.type==="canceled")return i.setFetchResultIfNotSet("cancelled"),hs.error({kind:"gotCancelled",message:"afterFetchCall"});if($.type==="quotaExceeded")return i.setFetchResultIfNotSet("failure"),hs.error({kind:"quotaExceeded"});if($.type!=="success")return i.setFetchResultIfNotSet("failure"),hs.error({kind:"fetchFailure",error:Zk($)});i.setFetchResultIfNotSet("success"),J&&i.setTtft(J),i.setResponse($.value);let X=rg.getBacktickSection($.value);return await this.generateReturnEditFormat(o,R,B.join(`
`),X,L,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Tft(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(m=>new XA(new Hr(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),f.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?hs.error({kind:"noSuggestions"}):hs.ok({editWindow:n,edit:new ms(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,rg.DEBOUNCE_MS-n);r.setDebounceTime(i),await nE(i)}};rg=of([va(0,Jie),va(1,ay),va(2,Die)],rg);d();var Zie=class t extends Ss{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new y7,kh(this,r.openDocuments,(i,o)=>{o.add(Nx(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ml(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new Hd(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,m=ms.fromEdit(p),h=ms.fromEdit(f);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),A=new Hd(p.base,g);this.pushToHistory(i.id,A)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var h_e=Ne(require("crypto"));var zU=h_e.randomUUID.bind(h_e);var Hft=Ne(Hc()),v_e=Ne(vU());d();var eoe=j0("ISnippyService");d();d();var YU=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),toe=65;function ehr(t){let e=0,r;YU.lastIndex=0;do if(r=YU.exec(t),r&&(e+=1),e>=toe)break;while(r);return e}s(ehr,"lexemeLength");function thr(t,e){let r=0,n;YU.lastIndex=0;do if(n=YU.exec(t),n&&(r+=1,r>=e))return YU.lastIndex;while(n);return t.length}s(thr,"offsetFirstLexemes");function Nft(t,e){let r=t.split("").reverse().join(""),n=thr(r,e);return r.length-n}s(Nft,"offsetLastLexemes");function g_e(t){return ehr(t)>=toe}s(g_e,"hasMinLexemeLength");d();d();var Mft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Mft||={});var A_e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(A_e||={});var Lft;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Mft.is)}e.is=t,s(t,"is")})(Lft||={});var y_e;(e=>{function t(r){if(A_e.is(r))return hs.error(r);if(Lft.is(r))return hs.ok(r)}e.to=t,s(t,"to")})(y_e||={});var Fft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Fft||={});var Oft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Oft||={});var Qft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Qft||={});var Uft;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Fft.is)&&"page_info"in r&&Oft.is(r.page_info)&&"license_stats"in r&&Qft.is(r.license_stats)}e.is=t,s(t,"is")})(Uft||={});var C_e;(e=>{function t(r){if(A_e.is(r))return hs.error(r);if(Uft.is(r))return hs.ok(r)}e.to=t,s(t,"to")})(C_e||={});var roe=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,y_e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,C_e.to)}async fetch(e,r,n){let i=this.ctx.get($r),o=await this.ctx.get(Br).getToken(),a=Ym(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...Ap(this.ctx),"X-GitHub-Api-Version":QI},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var qft=new Ct("[CODE REFERENCING]"),k8=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(roe,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Cr).getTextDocument({uri:e.toString()});if(!a){qft.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:A,license_stats:y}=g.val;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(f)).filter(h=>!!h);if(m.length===0){qft.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let A=Array.from(g).sort(),y=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,E={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:y,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:A.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(Sf).handleIPCodeCitation(this.ctx,E)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=da.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!g_e(l)){let m=a.value.slice(0,o.start),h=Nft(m,toe);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!g_e(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};k8=of([va(1,R1)],k8);async function $ft(t){let e=new Rie;return e.define(Pie,new x_e(t)),e.define(Jie,new q0),e.define(yE,new sm(E_e,[!0])),e.define(eoe,new sm(k8,[t])),e.define(ay,await I_e.Create(t)),e.define(WU,new sm(T_e)),e.define(Die,new b_e(t)),e.seal()}s($ft,"createInstantiationService");var x_e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=Gr.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},E_e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},b_e=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==rg.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Mt).updateExPValuesAndAssignments();return{id:this.ctx.get(Mt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},I_e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Jo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=zU(),l=await this.ctx.get(b0).fetchAndStreamChat(this.ctx,a,uC.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:wft(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},T_e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new noe("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new noe(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},noe=class{constructor(e){this.mode=Hft.OutputMode.Raw;this.tokenizer=Ni(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===v_e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===v_e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var ioe=class extends Ss{constructor(r){super();this.workspace=r;this._garbageCollector=new __e(20);this._documentCaches=new Map;kh(this,r.openDocuments,(n,i)=>{let o=new w_e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(Nx(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Mc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},w_e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new S_e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},S_e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},__e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var KU=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},ooe=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new KU("",null),this._tail=new KU("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new KU(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var soe=class extends Ss{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new ooe(50);kh(this,r.openDocuments,(n,i)=>{let o=new R_e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(Nx(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Mc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},R_e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var aoe=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},P8=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:y,isShown:E,acceptance:b,logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:L,promptLineCount:O,promptCharCount:K,isDefaultEndpoint:V,hadLowLogProbSuggestion:z,nonTerminatingError:Q,nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,hasNextEdit:$,nextEditLogprob:X,maxLinesPerEdit:ie,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchTime:Oe,fetchResult:Te,fetchError:Je,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:Q,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchResult:Te,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(V),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:this._boolToNum(y),isShown:this._boolToNum(E),logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:L,promptLineCount:O,promptCharCount:K,hadLowLogProbSuggestion:this._boolToNum(z),nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,fetchStartedAfterMs:Fe,fetchTime:Oe,hasNextEdit:this._boolToNum($),nextEditLogprob:X,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};P8=of([va(0,Pie)],P8);d();var D8=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var rP=!1,Wft=300,B8=class extends Ss{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new ioe(this._workspace);this._nextEditCache=new soe(this._workspace);this._recentlyShownCache=new D_e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;kh(this,this._workspace.openDocuments,(u,f)=>{f.add(txe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(P8)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new aoe(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??zU());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,m,h;if(l)f=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await nE(Wft);else if(u)f=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await nE(Wft);else{h=new P_e,c.setHeaderRequestId(h.headerRequestId);let y=o.value.get();p=y;let E=await this.fetchNextEdit(h,r,c,i),b=y.value!==o.value.get().value;if(E.isError())switch(E.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=E.err.error;break;default:A7(E.err)}else if(!b){let S=E.val;S.isEmpty()||(f=S.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||S.edits.length>1)&&this._nextEditCache.setNextEdits(r,S,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!f)return this._telemetrySender.sendTelemetry(c),new D8(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new D8(void 0);Ml(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",A=new D8({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(A,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,h]),A}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=da.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=k_e(r.lastEdits.swap(c)),f=l.compose(),p=new Jk(new cy(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new lu(o.text),g=E1.fromEdit(new Hd(m,f)).removeCommonSuffixPrefixLines(),A=l.edits.at(-1)?.getNewRanges().at(0),y;A&&(y=new lu(p.text).getTransformer().getRange(A));let E=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),S=s(O=>{let V=new E1(new lu(p.text),O).toEdit();return jft(V,p)},"toEditOnDocumentAfterEditsNoShortening"),R=s(O=>p.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(O=>p.project(O),"toProjectedOffset"),L=new LU(r.docId,b,r.languageId,g.base.getLines(),g.edit,y,m,l,i,S,R,B,r.lastEdit.base.getTextLength().lineCount,a,E);return{recentEdit:r.lastEdit,nextEditDoc:L,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return hs.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=k_e(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(O=>this._shortenDocument(O,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new Iie(r.headerRequestId,u.map(O=>O.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,A;if(h){g=h,rP&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let O=this._hookupCancellation(g,o);try{A=await g.result}finally{O.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let O=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let K=this._hookupCancellation(g,o);try{A=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(A)}catch(V){throw g.setResultError(V),V}finally{K.dispose(),O()}}i.setStatelessNextEditTelemetry(A.telemetry);let y=A.nextEdit;if(y.isError())return y;let E=y.val.edit;if(E.edits.length===0)return hs.error({kind:"noSuggestions"});let S=new E1(new lu(f.projectedDocument.text),E).toEdit(),R=jft(S,f.projectedDocument),B=S.edits.length===R.edits.length?y.val.permutation:void 0,L=R.decompose(B);return hs.ok(L)}_hookupCancellation(r,n){let i=new Ju,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new ZN);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){rP&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){rP&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){rP&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}rP&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(Mc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){pne(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new Jk(new cy(r.base.value),new Xh([])),clippedRange:new Hr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Vt(0,0)),o=Hr.fromRange(i);function a(p,m){return new Hr(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new Hr(1,n.textLength.lineCount+1),l=k_e(c.intersect(a(o,100))),u=Hr.subtract(c,l);return{document:new Jk(new cy(r.base.value),new Xh(u.map(p=>gl.delete(n.getOffsetRange(new ir(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new MU("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await ohr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new cy(n.base.value),a=n.edit.edits.at(0)?.range??new Vt(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Vt(h.range.start,g.range.endExclusive))}let l=Gft(o.offsetRangeToRange(a)),u=Uie(1e4,{costFnOverride:s((h,g,A)=>{let y=Gft(A.offsetRangeToRange(h.range)),E=ihr(l,y);return E>100?!1:E},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,m=new Hr(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};B8=of([va(4,yE),va(5,R1),va(6,eoe)],B8);function jft(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return da.fromOffsetEdit(r)}s(jft,"projectBackEdit");function Gft(t){return new Hr(t.start.line+1,t.end.line+1)}s(Gft,"lineRangeFromVSCodeRange");function ihr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(ihr,"lineRangeDist");async function ohr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(ohr,"getStructure");function k_e(t){if(!t)throw new xn("expected value to be defined, but it was not");return t}s(k_e,"assertDefined");var P_e=class{constructor(){this.headerRequestId=zU()}static{s(this,"NextEditFetchRequest")}},D_e=class{constructor(){this._cache=new t3(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var Vft=10,ly=class{constructor(e){this.lastResultsById=new wr(Vft);this.lastResultsByUri=new wr(Vft);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=oy.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(Cr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=Er(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await $ft(this.ctx),r=!1;try{let a=await this.ctx.get(Mt).updateExPValuesAndAssignments();r=shr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?rg:oS),i=this.ctx.get(BA),o=new Sne(i);return await cR.catch(()=>{}),e.createInstance(B8,i,n,o,new Zie(i))}};function shr(t,e){let r=zi(t,Ht.NESXTab);return r!==void 0?r:t.get(Mt).enableNESXTab(e)}s(shr,"shouldUseXTab");d();var zft=Ne(pi());var coe=class extends BA{constructor(r){super();this._openDocuments=DA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Cr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=oy.create(r);return this.addDocument({id:o,initialValue:i,languageId:GR.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=oy.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=oy.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=oy.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new B_e(r.id,new lu(r.initialValue??""),[],r.languageId??GR.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Cr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},B_e=class extends EZ{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new qr(e.lineNumber+1,e.column+1));this.updateSelection([new Vt(r,r)])}editFromLspContentChanges(e){return new b1(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(zft.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new qr(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new qr(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new xn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return da.replace(new Vt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var uy=class{static{s(this,"AuthenticationService")}};d();var Yft=require("crypto"),k1=Ne(require("fs/promises")),Kft=require("os"),vE=Ne(require("path"));var xE=class{constructor(e){this.ctx=e;this.logger=new Ct("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=vE.extname(__filename)===".ts"?vE.resolve(__dirname,"../../../packages/ripgrep/bin"):vE.resolve(__dirname,"./bin"),o=vE.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await k1.readFile(o),c=(0,Yft.createHash)("sha256").update(a).digest("hex"),l=vE.join((0,Kft.homedir)(),".cache/pkg",c);await k1.mkdir(l,{recursive:!0});let u=Pi(Rl(o)),f=vE.join(l,u);try{await k1.stat(f)}catch{await k1.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await k1.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var Jft=require("child_process"),N_e=require("perf_hooks");var EE=new Ct("ripgrepProcessManager"),dy=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,EE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){EE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){EE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){EE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){EE.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}EE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:Ow(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);EE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=N_e.performance.now();EE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,Jft.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=N_e.performance.now()-r;EE.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var N8=class extends jC{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var Xft=100,Zft=1e3*60*5;function e0t(t){let e=new M_e(t);t.get(Oc).registerContextProvider(e),t.get(HC).add(e.id)}s(e0t,"registerRelatedFilesShim");var M_e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new U_(Xft,Zft);this.relatedFilesCache=new U_(Xft,Zft);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Mt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await _Z(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){yx(this.ctx,o,"relatedFilesShim")}}};d();d();d();var loe=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new ja;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var Gd=class{constructor(e){this.ctx=e;this.watchers=new wr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(en.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,i){return this.getWatcher(e)?.onFileChange(eu(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,i)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var M8=class{static{s(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},ahr="workspaceLifecycleManager",Vd=new Ct(ahr),P1=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=Ps(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?Vd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(Vd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):Vd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);Vd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(em).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Cr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){Vd.debug(r,"No workspaces to add.");return}Vd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];Vd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));Vd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));Vd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));Vd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){Vd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(Gd).terminateWatching(c);for(let u of this.activeListeners)Vd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.didRemoveWorkspace(c)}for(let c of o){if(!c.uri)continue;Vd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(Gd);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){Vd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.didTerminateWorkspaceSubfolders(c,u)}for(let f of this.activeListeners)Vd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.didChangeFiles.bind(f))}}for(let c of this.activeListeners)for(let l of o)Vd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.didAddWorkspace(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(Gd).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function uoe(t){t.set(P1,new P1(t))}s(uoe,"setupWorkspaceLifecycleListener");d();var r0t=require("child_process");var doe=class extends Zh{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,r0t.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){One.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=es(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?uE.branch(o):uE.detachedHead()}}extraArgs(){return[]}};d();var foe=class extends Zh{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(Mi),i=Vi(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;One.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return uE.branch(r)}else return this.isCommitSha(e)?uE.detachedHead():uE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};d();d();var poe=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var chr=64;var aS={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},D1={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},L_e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,chr)}},sS=class extends L_e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Li=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},nP=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},iP=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var go=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},n0t=x.Object({content:x.Array(x.Union([x.Object({value:x.String()}),x.Object({value:x.Unknown()})])),status:x.Optional(x.Union([x.Literal("success"),x.Literal("error"),x.Literal("cancelled")]))}),moe=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(moe||{}),i0t=x.Object({result:x.Enum(moe)});var ng=class extends sS{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:aS,type:"shared"})}};d();var lhr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),uhr=new Map;for(let[t,e]of lhr)uhr.set(e,t);d();function L8(t){return`[${Pi(t)}](${t})`}s(L8,"formatUriForFileWidget");function B1(t){let e=dhr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(B1,"resolvePathInput");function dhr(t){if(t.startsWith("/")||o0t()&&phr(t)||o0t()&&t.startsWith("\\\\"))return Rl(t)}s(dhr,"resolveFsUri");function o0t(){return process.platform==="win32"}s(o0t,"isWindows");function fhr(t){return t>=65&&t<=90||t>=97&&t<=122}s(fhr,"isWindowsDriveLetter");function phr(t){return fhr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(phr,"hasDriveLetter");function JU(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Li?r.value:r instanceof iP?"":r instanceof nP?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(JU,"parseToolResultToString");function goe(t){let{content:e}=t;return{message:JU(e)}}s(goe,"formatToolErrorResult");function s0t(t){let{content:e}=t;return{data:e.map(r=>r instanceof Li?{type:"text",value:r.value}:r instanceof iP?{type:"text",value:"<unsupported>"}:r instanceof nP?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(s0t,"formatToolSuccessResult");var Aoe=class extends ng{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:x.Object({filePath:x.String({description:"The absolute path of the file to edit."}),code:x.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:x.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=B1(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new u8(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0,r.copilotEditsSessionHeader)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(Cu).getToolByNameAndProvider("insert_edit_into_file",D1);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(Cu).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;let a=wT({uri:B1(r.input.filePath),languageId:"UNKNOWN"});if(i){let f=await Fc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,a,o)})}let c=JU(n.content),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new rm({code:c,languageId:a,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new go([new Li(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i,o){TX(e.ctx,"agentPanel",{requestSource:o?.requestSource??"",chatRequestModel:o?.chatRequestModel??"",mapper:o?.mapper??"",headerRequestId:o?.headerRequestId??"",mode:(e.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:e.turn.getResolvedModelId()??"unknown",languageId:i},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=B1(n.filePath);return{progressMessage:`Editing ${L8(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var a0t=new Ct("findFilesTool"),yoe=class t extends ng{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:x.Object({query:x.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:x.Optional(x.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new go([new Li("Cancelled")],"cancelled");i=await e.ctx.get(xE).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new go([new Li("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(dy),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{a0t.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let A=await l.execute(i,["--files","-g",o],n,{cwd:nc(g.uri)},t.timeOutInSeconds*1e3);a0t.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${A}`),u[g.uri.toString()]=A.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>`${nc(Vi(g.uri,y))}`)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${y}`)}});try{await Promise.all(f)}catch(g){let A=g instanceof Error?g.message:"An unknown error occurred";return new go([new Li(A)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let A in u)u[A].length>0&&m>0&&(p.push(u[A].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new go([new Li(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var c0t=new Ct("findTextInFilesTool"),Coe=class t extends ng{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:x.Object({query:x.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:x.Optional(x.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:x.Optional(x.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new go([new Li("Cancelled")],"cancelled");i=await e.ctx.get(xE).resolvePath()}catch(y){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(y)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new go([new Li("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(dy),p={},m=u.map(async y=>{if(n.isCancellationRequested)throw new Error("Canceled");try{c0t.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${y.uri.toString()}`);let E=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",nc(y.uri)],b=await f.execute(i,E,n,{cwd:nc(y.uri)},t.timeOutInSeconds*1e3);c0t.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${y.uri.toString()} with results: ${b}`),p[y.uri.toString()]=b.split(`
`).map(S=>S.trim()).filter(S=>S.length>0)}catch(E){let b=E instanceof Error?E.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${y.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";return new go([new Li(E)],"error")}let h=[],g=l;for(;g>0;){let y=!1;for(let E in p)p[E].length>0&&g>0&&(h.push(p[E].shift()),g--,y=!0);if(!y)break}let A=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new go([new Li(A)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var xoe=Ne(require("path"));var voe=class extends ng{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:x.Object({path:x.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=e.turn.workspaceFolders,a=e.turn.workspaceFolder,c=B1(i);if(!this.isPathWithinWorkspace(c,o,a))return new go([new Li("Error: Path is outside of workspace folders")],"error");let u=await e.ctx.get(Mi).readDirectory(c.toString());return u.length===0?new go([new Li("Folder is empty")],"success"):new go([new Li(u.map(([f,p])=>`${f}${p&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=B1(e.input.path);return{progressMessage:`Reading directory ${L8(n)}`}}isPathWithinWorkspace(e,r,n){return!r&&!n?!0:r&&r.length>0?r.some(i=>this.isUriWithinDirectory(e,i.uri)):n?this.isUriWithinDirectory(e,n.uri):!1}isUriWithinDirectory(e,r){let n=es(e),i=es(r);if(!n||!i)return!1;let o=xoe.relative(i,n);return o===""?!0:!o.startsWith("..")&&!xoe.isAbsolute(o)}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var Eoe=class extends ng{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:x.Object({filePath:x.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:x.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:x.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=B1(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(En).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new rm({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new go([new Li(f.renderAsString(`
`))],"success")}else return new go([new Li(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=B1(n.filePath);return{progressMessage:`Reading file ${L8(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function l0t(){return[new voe,new Eoe,new Aoe,new yoe,new Coe]}s(l0t,"getAllClsTools");var Cu=class{constructor(e){this.ctx=e;this._toolRegistry=new poe;for(let r of l0t())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new qc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new go([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new qc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(aS.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(aS.id)?.splice(e.get(aS.id)?.indexOf(r)??0,1);let n=e.get(D1.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(D1.id)?.splice(e.get(D1.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(D1.id)??[],a=e.get(aS.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==aS.id&&l!==D1.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var sP=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var f0t=require("crypto"),F_e=require("fs"),O_e=Ne(require("path"));var u0t="symbolDatabaseLookup",d0t="multiLanguageContextProviderDocumentSymbols",aP=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(u0t,e);return r||(r=await this.createDBFile(e)),O_e.default.join(this.persistenceManager.directory,d0t,r)}async init(){let e=O_e.default.join(this.persistenceManager.directory,d0t);await this.createIfNotExists(e)}async dirExists(e){try{return await F_e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await F_e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,f0t.randomUUID)()}.db`;return await this.persistenceManager.update(u0t,e,r),r}async deleteDBFile(e){}};d();d();var XU=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var boe=Ne(require("path")),p0t=require("worker_threads");function m0t(t,e){return new p0t.Worker(boe.default.resolve(boe.default.extname(__filename)!==".ts"?__dirname:boe.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(m0t,"createWorker");d();var Ioe=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var h0t=Ne(pi());var Toe="main.js",woe=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=m0t(Toe,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new Ioe(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new eJ(this.id++),h0t.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new JK(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new XK(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new ZK(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new YK(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new KK(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new zK(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(Toe+"'")&&(r=new Error(`Failed to load ${Toe}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${Toe} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var ZU=Ne(pi());var am=new Ct(jT),cP=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){am.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,ZU.CancellationToken.None);return}am.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new woe(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{am.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await hhr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,ZU.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{am.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){am.debug(this.ctx,`indexing workspace ${e}`);let r=pCe.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${pCe.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get($p),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,ZU.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));am.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),am.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{am.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,ZU.CancellationToken.None)}catch(n){am.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return dje(e)}};async function hhr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(hhr,"createIndexableWorkspaceFolder");d();d();var g0t=100,ghr=5e3,Soe=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new vn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>g0t)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>ghr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>g0t&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:Er(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var _oe=class{constructor(e){this.id=jT;this.selector=Array.from(NK.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Cr),this.resolver=new Q_e(this.documentManager,e)}catch(r){throw am.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},Q_e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new Soe}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(sP).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=VC(o,a);l=l.applyEdits(c);let u=vKe(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return am.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(CK(o))return[];throw am.error(this.ctx,"Failed to get context",o),o}}};var eq=class extends M8{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(P1).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Oc).providers.some(r=>r.id===jT)){let r=this.ctx.get(aP);this.fileWatcher=new U_e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new cP(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new q_e(this.ctx),this.ctx.set(XU,this.fileWatcher),this.ctx.set($p,this.fileSearch),this.ctx.set(cP,this.multiLanguageContextIndexWatcher),this.ctx.get(Oc).registerContextProvider(new _oe(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Mt).updateExPValuesAndAssignments(),n=$X(this.ctx,r);return n.includes(jT)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},U_e=class extends XU{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},q_e=class extends $p{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(Gd).getWatchedFiles(n)).map(a=>this.ctx.get(Cr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var H_e=class extends sP{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new eq(e),e.set(eq,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function A0t(t){let e=t.get(Ai),r=new aP(e);t.set(aP,r),t.set(sP,new H_e(t))}s(A0t,"setupMultiLanguageContextProviderFeature");d();d();d();var N1=new Map;N1.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});N1.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});N1.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});N1.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});N1.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});N1.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var yhr=new Ct("sdk");function Roe(t,e){N1.has(t.get(mn).getEditorPluginInfo().name)||yhr.warn(t,...e)}s(Roe,"deprecationWarning");var pCt=Ne(nB()),mm=Ne(IA());d();d();d();var tr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var ad=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(y0t(e))}};function Ze(t,e){let r=Xs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=y0t(r.Errors(o));return[null,{code:tr.InvalidParams,message:a}]}return e(n,i,o)}}s(Ze,"addMethodHandlerValidation");function y0t(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(y0t,"createErrorMessage");d();var $_e=Ne(pi());d();var M1=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var koe="github.copilot.finishDeviceFlow",W_e=class extends M1{constructor(){super(...arguments);this.name=koe;this.arguments=x.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(wf),o=i.pendingSignIn;if(!o)throw new $_e.ResponseError(tr.InvalidRequest,"No pending sign in");try{await this.ctx.get(qu).open(o.verificationUri)}catch(a){yp.warn(this.ctx,"Failed to open",o.verificationUri),yp.exception(this.ctx,a,koe)}try{return await o.status}catch(a){throw new $_e.ResponseError(tr.DeviceFlowFailed,String(a))}finally{i.pendingSignIn=void 0}}},C0t=[W_e];d();d();var $s=class extends wr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var tq="github.copilot.didAcceptCompletionItem",j_e=class extends M1{constructor(){super(...arguments);this.name=tq;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get($s).get(n);return o?(F3(this.ctx,o),!0):!1}},v0t=[j_e];d();var Chr="github.copilot.didAcceptNextEditSuggestionItem",G_e=class extends M1{constructor(){super(...arguments);this.name=Chr;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(ly).handleAcceptance(n),!0}},x0t=[G_e];d();var z_e="github.copilot.didAcceptPanelCompletionItem",V_e=class extends M1{constructor(){super(...arguments);this.name=z_e;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get($s).get(i);return a?(k7(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full",acceptedLength:a.displayText.length,acceptedLines:XR(a.displayText).length},a.copilotAnnotations),!0):!1}},E0t=[V_e];var vhr=[...C0t,...v0t,...x0t,...E0t];function b0t(t,e){let r=new Map;for(let n of vhr){let i=new n(t),o=Xs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=bE(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new ad(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(b0t,"registerCommands");d();var ig=class extends uR{constructor(r){super(new BB,new Map);this.envSettings=new Map;this.env={...r};let n;this.#e=new Promise(o=>{n=o}),this.markReady=n,["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(o=>{for(let a of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let c=`${a}${xhr(o.replace(/^Debug/,""))}`;c in this.env&&this.envSettings.set(Ht[o],this.env[c])}})}static{s(this,"AgentConfigProvider")}#e;async requireReady(){await this.#e}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function xhr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(xhr,"camelCaseToSnakeCaseAllCaps");var Ehr="unknown-editor",I0t="unknown-editor-plugin",Poe=class extends mn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:Ehr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:I0t,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function T0t(t){return t.getEditorPluginInfo().name!==I0t}s(T0t,"hasValidInfo");d();var IE=Ne(IA());var bhr=new Map([[4,IE.MessageType.Log],[3,IE.MessageType.Info],[2,IE.MessageType.Warning],[1,IE.MessageType.Error]]),Doe=class extends Kc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!hee(e)&&n!=="console")return;let o={type:bhr.get(r),message:qXe(n,...i)},a=e.get(Dr).connection;try{a.sendNotification(new IE.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof IE.ConnectionError)return;throw c}}};d();var w0t=Ne(cl());var Boe=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(Dr).connection.sendNotification(new w0t.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function S0t(t){t.get(Pd).setCustomReporters(new Boe(t),new Boe(t,!0))}s(S0t,"setupRedirectingTelemetryReporters");d();d();var Noe=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var rq=Ne(nB());var F8=class extends Noe{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(mn).getEditorPluginInfo();return await e.get(Ai).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Ai).listSettings()).length>0}async markInstalled(e){let r=e.get(mn).getEditorPluginInfo();await e.get(Ai).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(mn).getEditorPluginInfo(),n=await e.get(Ai).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,rq.gt)((0,rq.coerce)(r.version),(0,rq.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(mn).getEditorPluginInfo();await e.get(Ai).delete("versions",r.name),(await e.get(Ai).listKeys("versions")).length===0&&await e.get(Ai).deleteSetting("versions")}};d();var Y_e=Ne(require("path")),Moe=Ne(cl());var Ihr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},L1=class t{constructor(e){this.ctx=e;this.#e=new ja;this.onDidChangeWatchedFiles=this.#e.event}static{s(this,"LspFileWatcher")}#e;static{this.requestType=new Moe.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Dr).connection}init(){this.ctx.get(Cs).getCapabilities().watchedFiles&&this.connection.onNotification(Moe.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(Cs).getCapabilities().watchedFiles)return Ihr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=Y_e.extname(l).toLowerCase();if(!dR.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=Y_e.extname(o.uri).toLowerCase();if(!dR.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(En).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var Thr=x.Object({providerName:x.String()});async function whr(t,e,r){try{let{providerName:n}=r,i=Pw(n);if(i!==0)return[null,{code:tr.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${i}`}];let o=new Ya(t.get(Ai));return await o.removeAllModelConfigs(n),await o.deleteAPIKey(n,i),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}s(whr,"handleBYOKDeleteApiKeyChecked");var _0t=Ze(Thr,whr);d();var Shr=x.Object({providerName:x.String(),modelId:x.String()});async function _hr(t,e,r){try{let n=new Ya(t.get(Ai)),{providerName:i,modelId:o}=r,a=Pw(i);return await n.removeModelConfig(i,o),a===1&&await n.deleteAPIKey(i,a,o),[{success:!0,message:`Model ${o} deleted successfully for provider ${i}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}s(_hr,"handleBYOKDeleteModelChecked");var R0t=Ze(Shr,_hr);d();var Rhr=x.Object({providerName:x.Optional(x.String()),modelId:x.Optional(x.String())});async function khr(t,e,r){try{let n=new Ya(t.get(Ai)),{providerName:i,modelId:o}=r;if(!i){let c=t.get(Ai),l=await c.listKeys("byok"),u=[];for(let f of l)if(f.endsWith("-api-key")){let p=await c.read("byok",f);if(p){let h=f.replace("-api-key","").split("-");if(h.length===1)u.push({providerName:h[0],apiKey:p});else if(h.length>=2){let g=h[0],A=h.slice(1).join("-");u.push({providerName:g,modelId:A,apiKey:p})}}}return[{apiKeys:u},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(i,o)||void 0,providerName:i,modelId:o}]},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}s(khr,"handleBYOKListApiKeysChecked");var k0t=Ze(Rhr,khr);d();d();d();d();d();d();function Sn(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Sn,"__classPrivateFieldSet");function Rt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Rt,"__classPrivateFieldGet");d();var K_e=s(function(){let{crypto:t}=globalThis;if(t?.randomUUID)return K_e=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},"uuid4");d();d();d();function TE(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}s(TE,"isAbortError");var nq=s(t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)},"castToError");var In=class extends Error{static{s(this,"AnthropicError")}},vu=class t extends In{static{s(this,"APIError")}constructor(e,r,n,i){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.requestID=i?.get("request-id"),this.error=r}static makeMessage(e,r,n){let i=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new lS({message:n,cause:nq(r)});let o=r;return e===400?new Q8(e,o,n,i):e===401?new U8(e,o,n,i):e===403?new q8(e,o,n,i):e===404?new H8(e,o,n,i):e===409?new $8(e,o,n,i):e===422?new W8(e,o,n,i):e===429?new j8(e,o,n,i):e>=500?new G8(e,o,n,i):new t(e,o,n,i)}},cd=class extends vu{static{s(this,"APIUserAbortError")}constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},lS=class extends vu{static{s(this,"APIConnectionError")}constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},O8=class extends lS{static{s(this,"APIConnectionTimeoutError")}constructor({message:e}={}){super({message:e??"Request timed out."})}},Q8=class extends vu{static{s(this,"BadRequestError")}},U8=class extends vu{static{s(this,"AuthenticationError")}},q8=class extends vu{static{s(this,"PermissionDeniedError")}},H8=class extends vu{static{s(this,"NotFoundError")}},$8=class extends vu{static{s(this,"ConflictError")}},W8=class extends vu{static{s(this,"UnprocessableEntityError")}},j8=class extends vu{static{s(this,"RateLimitError")}},G8=class extends vu{static{s(this,"InternalServerError")}};var Dhr=/^[a-z][a-z0-9+.-]*:/i,P0t=s(t=>Dhr.test(t),"isAbsoluteURL"),J_e=s(t=>(J_e=Array.isArray,J_e(t)),"isArray"),X_e=J_e;function Z_e(t){return typeof t!="object"?{}:t??{}}s(Z_e,"maybeObj");function D0t(t){if(!t)return!0;for(let e in t)return!1;return!0}s(D0t,"isEmptyObj");function B0t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(B0t,"hasOwn");var N0t=s((t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new In(`${t} must be an integer`);if(e<0)throw new In(`${t} must be a positive integer`);return e},"validatePositiveInteger");var Loe=s(t=>{try{return JSON.parse(t)}catch{return}},"safeJSON");d();var M0t=s(t=>new Promise(e=>setTimeout(e,t)),"sleep");d();d();var uS="0.56.0";var Q0t=s(()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u","isRunningInBrowser");function Bhr(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}s(Bhr,"getDetectedPlatform");var Nhr=s(()=>{let t=Bhr();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uS,"X-Stainless-OS":F0t(Deno.build.os),"X-Stainless-Arch":L0t(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uS,"X-Stainless-OS":F0t(globalThis.process.platform??"unknown"),"X-Stainless-Arch":L0t(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=Mhr();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},"getPlatformProperties");function Mhr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let i=n[1]||0,o=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}s(Mhr,"getBrowserInfo");var L0t=s(t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown","normalizeArch"),F0t=s(t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),"normalizePlatform"),O0t,U0t=s(()=>O0t??(O0t=Nhr()),"getPlatformHeaders");d();function q0t(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}s(q0t,"getDefaultFetch");function e2e(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}s(e2e,"makeReadableStream");function Foe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return e2e({start(){},async pull(r){let{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){await e.return?.()}})}s(Foe,"ReadableStreamFrom");function iq(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}s(iq,"ReadableStreamToAsyncIterable");async function H0t(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}s(H0t,"CancelReadableStream");d();var $0t=s(({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),"FallbackEncoder");d();d();d();d();d();function G0t(t){let e=0;for(let i of t)e+=i.length;let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}s(G0t,"concatBytes");var W0t;function oq(t){let e;return(W0t??(e=new globalThis.TextEncoder,W0t=e.encode.bind(e)))(t)}s(oq,"encodeUTF8");var j0t;function t2e(t){let e;return(j0t??(e=new globalThis.TextDecoder,j0t=e.decode.bind(e)))(t)}s(t2e,"decodeUTF8");var cm,lm,wE=class{static{s(this,"LineDecoder")}constructor(){cm.set(this,void 0),lm.set(this,void 0),Sn(this,cm,new Uint8Array,"f"),Sn(this,lm,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oq(e):e;Sn(this,cm,G0t([Rt(this,cm,"f"),r]),"f");let n=[],i;for(;(i=Ohr(Rt(this,cm,"f"),Rt(this,lm,"f")))!=null;){if(i.carriage&&Rt(this,lm,"f")==null){Sn(this,lm,i.index,"f");continue}if(Rt(this,lm,"f")!=null&&(i.index!==Rt(this,lm,"f")+1||i.carriage)){n.push(t2e(Rt(this,cm,"f").subarray(0,Rt(this,lm,"f")-1))),Sn(this,cm,Rt(this,cm,"f").subarray(Rt(this,lm,"f")),"f"),Sn(this,lm,null,"f");continue}let o=Rt(this,lm,"f")!==null?i.preceding-1:i.preceding,a=t2e(Rt(this,cm,"f").subarray(0,o));n.push(a),Sn(this,cm,Rt(this,cm,"f").subarray(i.index),"f"),Sn(this,lm,null,"f")}return n}flush(){return Rt(this,cm,"f").length?this.decode(`
`):[]}};cm=new WeakMap,lm=new WeakMap;wE.NEWLINE_CHARS=new Set([`
`,"\r"]);wE.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ohr(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}s(Ohr,"findNewlineIndex");function V0t(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}s(V0t,"findDoubleNewlineIndex");d();var Qoe={off:0,error:200,warn:300,info:400,debug:500},r2e=s((t,e,r)=>{if(t){if(B0t(Qoe,t))return t;xu(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Qoe))}`)}},"parseLogLevel");function sq(){}s(sq,"noop");function Ooe(t,e,r){return!e||Qoe[t]>Qoe[r]?sq:e[t].bind(e)}s(Ooe,"makeLogFn");var Qhr={error:sq,warn:sq,info:sq,debug:sq},z0t=new WeakMap;function xu(t){let e=t.logger,r=t.logLevel??"off";if(!e)return Qhr;let n=z0t.get(e);if(n&&n[0]===r)return n[1];let i={error:Ooe("error",e,r),warn:Ooe("warn",e,r),info:Ooe("info",e,r),debug:Ooe("debug",e,r)};return z0t.set(e,[r,i]),i}s(xu,"loggerFor");var SE=s(t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t),"formatRequestDetails");var aq,F1=class t{static{s(this,"Stream")}constructor(e,r,n){this.iterator=e,aq.set(this,void 0),this.controller=r,Sn(this,aq,n,"f")}static fromSSEResponse(e,r,n){let i=!1,o=n?xu(n):console;async function*a(){if(i)throw new In("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(let l of Uhr(e,r)){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(u){throw o.error("Could not parse message into JSON:",l.data),o.error("From chunk:",l.raw),u}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(u){throw o.error("Could not parse message into JSON:",l.data),o.error("From chunk:",l.raw),u}if(l.event!=="ping"&&l.event==="error")throw new vu(void 0,Loe(l.data)??l.data,void 0,e.headers)}c=!0}catch(l){if(TE(l))return;throw l}finally{c||r.abort()}}return s(a,"iterator"),new t(a,r,n)}static fromReadableStream(e,r,n){let i=!1;async function*o(){let c=new wE,l=iq(e);for await(let u of l)for(let f of c.decode(u))yield f;for(let u of c.flush())yield u}s(o,"iterLines");async function*a(){if(i)throw new In("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(let l of o())c||l&&(yield JSON.parse(l));c=!0}catch(l){if(TE(l))return;throw l}finally{c||r.abort()}}return s(a,"iterator"),new t(a,r,n)}[(aq=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),i=s(o=>({next:s(()=>{if(o.length===0){let a=n.next();e.push(a),r.push(a)}return o.shift()},"next")}),"teeIterator");return[new t(()=>i(e),this.controller,Rt(this,aq,"f")),new t(()=>i(r),this.controller,Rt(this,aq,"f"))]}toReadableStream(){let e=this,r;return e2e({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:i,done:o}=await r.next();if(o)return n.close();let a=oq(JSON.stringify(i)+`
`);n.enqueue(a)}catch(i){n.error(i)}},async cancel(){await r.return?.()}})}};async function*Uhr(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new In("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new In("Attempted to iterate over a response with no body");let r=new n2e,n=new wE,i=iq(t.body);for await(let o of qhr(i))for(let a of n.decode(o)){let c=r.decode(a);c&&(yield c)}for(let o of n.flush()){let a=r.decode(o);a&&(yield a)}}s(Uhr,"_iterSSEMessages");async function*qhr(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?oq(r):r,i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let o;for(;(o=V0t(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}s(qhr,"iterSSEChunks");var n2e=class{static{s(this,"SSEDecoder")}constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=Hhr(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}};function Hhr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}s(Hhr,"partition");async function Uoe(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{if(e.options.stream)return xu(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):F1.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let p=await r.json();return i2e(p,r)}return await r.text()})();return xu(t).debug(`[${n}] response parsed`,SE({retryOfRequestLogID:i,url:r.url,status:r.status,body:a,durationMs:Date.now()-o})),a}s(Uoe,"defaultParseResponse");function i2e(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}s(i2e,"addRequestID");d();var cq,lP=class t extends Promise{static{s(this,"APIPromise")}constructor(e,r,n=Uoe){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,cq.set(this,void 0),Sn(this,cq,e,"f")}_thenUnwrap(e){return new t(Rt(this,cq,"f"),this.responsePromise,async(r,n)=>i2e(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Rt(this,cq,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};cq=new WeakMap;var qoe,o2e=class{static{s(this,"AbstractPage")}constructor(e,r,n,i){qoe.set(this,void 0),Sn(this,qoe,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new In("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Rt(this,qoe,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(qoe=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},lq=class extends lP{static{s(this,"PagePromise")}constructor(e,r,n){super(e,r,async(i,o)=>new n(i,o.response,await Uoe(i,o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},og=class extends o2e{static{s(this,"Page")}constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let r=this.first_id;return r?{...this.options,query:{...Z_e(this.options.query),before_id:r}}:null}let e=this.last_id;return e?{...this.options,query:{...Z_e(this.options.query),after_id:e}}:null}};d();d();d();var a2e=s(()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},"checkFileSupport");function uP(t,e,r){return a2e(),new File(t,e??"unknown_file",r)}s(uP,"makeFile");function uq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}s(uq,"getName");var c2e=s(t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function","isAsyncIterable");var K0t=s(async(t,e)=>({...t,body:await jhr(t.body,e)}),"multipartFormRequestOptions"),Y0t=new WeakMap;function Whr(t){let e=typeof t=="function"?t:t.fetch,r=Y0t.get(e);if(r)return r;let n=(async()=>{try{let i="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new i(o).text()}catch{return!0}})();return Y0t.set(e,n),n}s(Whr,"supportsFormData");var jhr=s(async(t,e)=>{if(!await Whr(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,i])=>s2e(r,n,i))),r},"createForm"),Ghr=s(t=>t instanceof Blob&&"name"in t,"isNamedBlob");var s2e=s(async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response){let n={},i=r.headers.get("Content-Type");i&&(n={type:i}),t.append(e,uP([await r.blob()],uq(r),n))}else if(c2e(r))t.append(e,uP([await new Response(Foe(r)).blob()],uq(r)));else if(Ghr(r))t.append(e,uP([r],uq(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(n=>s2e(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>s2e(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},"addFormValue");var J0t=s(t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function","isBlobLike"),Vhr=s(t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&J0t(t),"isFileLike"),zhr=s(t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function","isResponseLike");async function Hoe(t,e,r){if(a2e(),t=await t,e||(e=uq(t)),Vhr(t))return t instanceof File&&e==null&&r==null?t:uP([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...r});if(zhr(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),uP(await l2e(i),e,r)}let n=await l2e(t);if(!r?.type){let i=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(r={...r,type:i})}return uP(n,e,r)}s(Hoe,"toFile");async function l2e(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(J0t(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(c2e(t))for await(let r of t)e.push(...await l2e(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${Yhr(t)}`)}return e}s(l2e,"getBytes");function Yhr(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}s(Yhr,"propsForError");d();d();d();d();var yl=class{static{s(this,"APIResource")}constructor(e){this._client=e}};d();d();var X0t=Symbol.for("brand.privateNullableHeaders");function*Jhr(t){if(!t)return;if(X0t in t){let{values:n,nulls:i}=t;yield*n.entries();for(let o of i)yield[o,null];return}let e=!1,r;t instanceof Headers?r=t.entries():X_e(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=X_e(n[1])?n[1]:[n[1]],a=!1;for(let c of o)c!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,c])}}s(Jhr,"iterateHeaders");var jo=s(t=>{let e=new Headers,r=new Set;for(let n of t){let i=new Set;for(let[o,a]of Jhr(n)){let c=o.toLowerCase();i.has(c)||(e.delete(o),i.add(c)),a===null?(e.delete(o),r.add(c)):(e.append(o,a),r.delete(c))}}return{[X0t]:!0,values:e,nulls:r}},"buildHeaders");d();function ept(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}s(ept,"encodeURIPath");var Z0t=Object.freeze(Object.create(null)),Xhr=s((t=ept)=>s(function(r,...n){if(r.length===1)return r[0];let i=!1,o=[],a=r.reduce((f,p,m)=>{/[?#]/.test(p)&&(i=!0);let h=n[m],g=(i?encodeURIComponent:t)(""+h);return m!==n.length&&(h==null||typeof h=="object"&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??Z0t)??Z0t)?.toString)&&(g=h+"",o.push({start:f.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),f+p+(m===n.length?"":g)},""),c=a.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(c))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((f,p)=>f.start-p.start),o.length>0){let f=0,p=o.reduce((m,h)=>{let g=" ".repeat(h.start-f),A="^".repeat(h.length);return f=h.start+h.length,m+g+A},"");throw new In(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${a}
${p}`)}return a},"path"),"createPathTagFunction"),zd=Xhr(ept);var V8=class extends yl{static{s(this,"Files")}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/files",og,{query:i,...r,headers:jo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}delete(e,r={},n){let{betas:i}=r??{};return this._client.delete(zd`/v1/files/${e}`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,r={},n){let{betas:i}=r??{};return this._client.get(zd`/v1/files/${e}/content`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,r={},n){let{betas:i}=r??{};return this._client.get(zd`/v1/files/${e}`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,r){let{betas:n,...i}=e;return this._client.post("/v1/files",K0t({body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])},this._client))}};d();var z8=class extends yl{static{s(this,"Models")}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(zd`/v1/models/${e}?beta=true`,{...n,headers:jo([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",og,{query:i,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};d();d();d();var Y8=class t{static{s(this,"JSONLDecoder")}constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new wE;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new In("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new In("Attempted to iterate over a response with no body");return new t(iq(e.body),r)}};d();var K8=class extends yl{static{s(this,"Batches")}create(e,r){let{betas:n,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(zd`/v1/messages/batches/${e}?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",og,{query:i,...r,headers:jo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}delete(e,r={},n){let{betas:i}=r??{};return this._client.delete(zd`/v1/messages/batches/${e}?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,r={},n){let{betas:i}=r??{};return this._client.post(zd`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,r={},n){let i=await this.retrieve(e);if(!i.results_url)throw new In(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);let{betas:o}=r??{};return this._client.get(i.results_url,{...n,headers:jo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((a,c)=>Y8.fromResponse(c.response,c.controller))}};d();d();d();var rgr=s(t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let c="",l=!1;for(n=t[++e];n!=='"';){if(e===t.length){l=!0;break}if(n==="\\"){if(e++,e===t.length){l=!0;break}c+=n+t[e],n=t[++e]}else c+=n,n=t[++e]}n=t[++e],l||r.push({type:"string",value:c});continue}if(n&&/\s/.test(n)){e++;continue}let o=/[0-9]/;if(n&&o.test(n)||n==="-"||n==="."){let c="";for(n==="-"&&(c+=n,n=t[++e]);n&&o.test(n)||n===".";)c+=n,n=t[++e];r.push({type:"number",value:c});continue}let a=/[a-z]/i;if(n&&a.test(n)){let c="";for(;n&&a.test(n)&&e!==t.length;)c+=n,n=t[++e];if(c=="true"||c=="false"||c==="null")r.push({type:"name",value:c});else{e++;continue}continue}e++}return r},"tokenize"),J8=s(t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),J8(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),J8(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),J8(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),J8(t);break;case"delimiter":return t=t.slice(0,t.length-1),J8(t);break}return t},"strip"),ngr=s(t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},"unstrip"),igr=s(t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},"generate"),$oe=s(t=>JSON.parse(igr(ngr(J8(rgr(t))))),"partialParse");var sg,dS,dq,Woe,fq,pq,joe,mq,_E,hq,Goe,Voe,X8,zoe,Yoe,u2e,tpt,Koe,d2e,f2e,p2e,rpt,npt="__json_buf";function ipt(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}s(ipt,"tracksToolInput");var Joe=class t{static{s(this,"BetaMessageStream")}constructor(){sg.add(this),this.messages=[],this.receivedMessages=[],dS.set(this,void 0),this.controller=new AbortController,dq.set(this,void 0),Woe.set(this,()=>{}),fq.set(this,()=>{}),pq.set(this,void 0),joe.set(this,()=>{}),mq.set(this,()=>{}),_E.set(this,{}),hq.set(this,!1),Goe.set(this,!1),Voe.set(this,!1),X8.set(this,!1),zoe.set(this,void 0),Yoe.set(this,void 0),Koe.set(this,e=>{if(Sn(this,Goe,!0,"f"),TE(e)&&(e=new cd),e instanceof cd)return Sn(this,Voe,!0,"f"),this._emit("abort",e);if(e instanceof In)return this._emit("error",e);if(e instanceof Error){let r=new In(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new In(String(e)))}),Sn(this,dq,new Promise((e,r)=>{Sn(this,Woe,e,"f"),Sn(this,fq,r,"f")}),"f"),Sn(this,pq,new Promise((e,r)=>{Sn(this,joe,e,"f"),Sn(this,mq,r,"f")}),"f"),Rt(this,dq,"f").catch(()=>{}),Rt(this,pq,"f").catch(()=>{})}get response(){return Rt(this,zoe,"f")}get request_id(){return Rt(this,Yoe,"f")}async withResponse(){let e=await Rt(this,dq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let i=new t;for(let o of r.messages)i._addMessageParam(o);return i._run(()=>i._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},Rt(this,Koe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let i=n?.signal,o;i&&(i.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),i.addEventListener("abort",o));try{Rt(this,sg,"m",d2e).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)Rt(this,sg,"m",f2e).call(this,l);if(c.controller.signal?.aborted)throw new cd;Rt(this,sg,"m",p2e).call(this)}finally{i&&o&&i.removeEventListener("abort",o)}}_connected(e){this.ended||(Sn(this,zoe,e,"f"),Sn(this,Yoe,e?.headers.get("request-id"),"f"),Rt(this,Woe,"f").call(this,e),this._emit("connect"))}get ended(){return Rt(this,hq,"f")}get errored(){return Rt(this,Goe,"f")}get aborted(){return Rt(this,Voe,"f")}abort(){this.controller.abort()}on(e,r){return(Rt(this,_E,"f")[e]||(Rt(this,_E,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Rt(this,_E,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Rt(this,_E,"f")[e]||(Rt(this,_E,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,X8,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,X8,!0,"f"),await Rt(this,pq,"f")}get currentMessage(){return Rt(this,dS,"f")}async finalMessage(){return await this.done(),Rt(this,sg,"m",u2e).call(this)}async finalText(){return await this.done(),Rt(this,sg,"m",tpt).call(this)}_emit(e,...r){if(Rt(this,hq,"f"))return;e==="end"&&(Sn(this,hq,!0,"f"),Rt(this,joe,"f").call(this));let n=Rt(this,_E,"f")[e];if(n&&(Rt(this,_E,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!Rt(this,X8,"f")&&!n?.length&&Promise.reject(i),Rt(this,fq,"f").call(this,i),Rt(this,mq,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!Rt(this,X8,"f")&&!n?.length&&Promise.reject(i),Rt(this,fq,"f").call(this,i),Rt(this,mq,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Rt(this,sg,"m",u2e).call(this))}async _fromReadableStream(e,r){let n=r?.signal,i;n&&(n.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),n.addEventListener("abort",i));try{Rt(this,sg,"m",d2e).call(this),this._connected(null);let o=F1.fromReadableStream(e,this.controller);for await(let a of o)Rt(this,sg,"m",f2e).call(this,a);if(o.controller.signal?.aborted)throw new cd;Rt(this,sg,"m",p2e).call(this)}finally{n&&i&&n.removeEventListener("abort",i)}}[(dS=new WeakMap,dq=new WeakMap,Woe=new WeakMap,fq=new WeakMap,pq=new WeakMap,joe=new WeakMap,mq=new WeakMap,_E=new WeakMap,hq=new WeakMap,Goe=new WeakMap,Voe=new WeakMap,X8=new WeakMap,zoe=new WeakMap,Yoe=new WeakMap,Koe=new WeakMap,sg=new WeakSet,u2e=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_BetaMessageStream_getFinalMessage"),tpt=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new In("stream ended without producing a content block with type=text");return r.join(" ")},"_BetaMessageStream_getFinalText"),d2e=s(function(){this.ended||Sn(this,dS,void 0,"f")},"_BetaMessageStream_beginRequest"),f2e=s(function(r){if(this.ended)return;let n=Rt(this,sg,"m",rpt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let i=n.content.at(-1);switch(r.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",r.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",r.delta.citation,i.citations??[]);break}case"input_json_delta":{ipt(i)&&i.input&&this._emit("inputJson",r.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",r.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,dS,n,"f");break}case"content_block_start":case"message_delta":break}},"_BetaMessageStream_addStreamEvent"),p2e=s(function(){if(this.ended)throw new In("stream has ended, this shouldn't happen");let r=Rt(this,dS,"f");if(!r)throw new In("request ended without sending any chunks");return Sn(this,dS,void 0,"f"),r},"_BetaMessageStream_endRequest"),rpt=s(function(r){let n=Rt(this,dS,"f");if(r.type==="message_start"){if(n)throw new In(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new In(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.container=r.delta.container,n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let i=n.content.at(r.index);switch(r.delta.type){case"text_delta":{i?.type==="text"&&(n.content[r.index]={...i,text:(i.text||"")+r.delta.text});break}case"citations_delta":{i?.type==="text"&&(n.content[r.index]={...i,citations:[...i.citations??[],r.delta.citation]});break}case"input_json_delta":{if(i&&ipt(i)){let o=i[npt]||"";o+=r.delta.partial_json;let a={...i};if(Object.defineProperty(a,npt,{value:o,enumerable:!1,writable:!0}),o)try{a.input=$oe(o)}catch(c){let l=new In(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${c}. JSON: ${o}`);Rt(this,Koe,"f").call(this,l)}n.content[r.index]=a}break}case"thinking_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,thinking:i.thinking+r.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_BetaMessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:s(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),"next"),return:s(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new F1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};d();var Xoe={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192};var opt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},dP=class extends yl{static{s(this,"Messages")}constructor(){super(...arguments),this.batches=new K8(this._client)}create(e,r){let{betas:n,...i}=e;i.model in opt&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${opt[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let o=this._client._options.timeout;if(!i.stream&&o==null){let a=Xoe[i.model]??void 0;o=this._client.calculateNonstreamingTimeout(i.max_tokens,a)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:o??6e5,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}stream(e,r){return Joe.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},r?.headers])})}};dP.Batches=K8;var O1=class extends yl{static{s(this,"Beta")}constructor(){super(...arguments),this.models=new z8(this._client),this.messages=new dP(this._client),this.files=new V8(this._client)}};O1.Models=z8;O1.Messages=dP;O1.Files=V8;d();var fP=class extends yl{static{s(this,"Completions")}create(e,r){let{betas:n,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}};d();d();var ag,fS,gq,Zoe,Aq,yq,ese,Cq,RE,vq,tse,rse,Z8,nse,ise,m2e,spt,h2e,g2e,A2e,y2e,apt,cpt="__json_buf";function lpt(t){return t.type==="tool_use"||t.type==="server_tool_use"}s(lpt,"tracksToolInput");var ose=class t{static{s(this,"MessageStream")}constructor(){ag.add(this),this.messages=[],this.receivedMessages=[],fS.set(this,void 0),this.controller=new AbortController,gq.set(this,void 0),Zoe.set(this,()=>{}),Aq.set(this,()=>{}),yq.set(this,void 0),ese.set(this,()=>{}),Cq.set(this,()=>{}),RE.set(this,{}),vq.set(this,!1),tse.set(this,!1),rse.set(this,!1),Z8.set(this,!1),nse.set(this,void 0),ise.set(this,void 0),h2e.set(this,e=>{if(Sn(this,tse,!0,"f"),TE(e)&&(e=new cd),e instanceof cd)return Sn(this,rse,!0,"f"),this._emit("abort",e);if(e instanceof In)return this._emit("error",e);if(e instanceof Error){let r=new In(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new In(String(e)))}),Sn(this,gq,new Promise((e,r)=>{Sn(this,Zoe,e,"f"),Sn(this,Aq,r,"f")}),"f"),Sn(this,yq,new Promise((e,r)=>{Sn(this,ese,e,"f"),Sn(this,Cq,r,"f")}),"f"),Rt(this,gq,"f").catch(()=>{}),Rt(this,yq,"f").catch(()=>{})}get response(){return Rt(this,nse,"f")}get request_id(){return Rt(this,ise,"f")}async withResponse(){let e=await Rt(this,gq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let i=new t;for(let o of r.messages)i._addMessageParam(o);return i._run(()=>i._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},Rt(this,h2e,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let i=n?.signal,o;i&&(i.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),i.addEventListener("abort",o));try{Rt(this,ag,"m",g2e).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)Rt(this,ag,"m",A2e).call(this,l);if(c.controller.signal?.aborted)throw new cd;Rt(this,ag,"m",y2e).call(this)}finally{i&&o&&i.removeEventListener("abort",o)}}_connected(e){this.ended||(Sn(this,nse,e,"f"),Sn(this,ise,e?.headers.get("request-id"),"f"),Rt(this,Zoe,"f").call(this,e),this._emit("connect"))}get ended(){return Rt(this,vq,"f")}get errored(){return Rt(this,tse,"f")}get aborted(){return Rt(this,rse,"f")}abort(){this.controller.abort()}on(e,r){return(Rt(this,RE,"f")[e]||(Rt(this,RE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Rt(this,RE,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Rt(this,RE,"f")[e]||(Rt(this,RE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,Z8,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,Z8,!0,"f"),await Rt(this,yq,"f")}get currentMessage(){return Rt(this,fS,"f")}async finalMessage(){return await this.done(),Rt(this,ag,"m",m2e).call(this)}async finalText(){return await this.done(),Rt(this,ag,"m",spt).call(this)}_emit(e,...r){if(Rt(this,vq,"f"))return;e==="end"&&(Sn(this,vq,!0,"f"),Rt(this,ese,"f").call(this));let n=Rt(this,RE,"f")[e];if(n&&(Rt(this,RE,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!Rt(this,Z8,"f")&&!n?.length&&Promise.reject(i),Rt(this,Aq,"f").call(this,i),Rt(this,Cq,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!Rt(this,Z8,"f")&&!n?.length&&Promise.reject(i),Rt(this,Aq,"f").call(this,i),Rt(this,Cq,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Rt(this,ag,"m",m2e).call(this))}async _fromReadableStream(e,r){let n=r?.signal,i;n&&(n.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),n.addEventListener("abort",i));try{Rt(this,ag,"m",g2e).call(this),this._connected(null);let o=F1.fromReadableStream(e,this.controller);for await(let a of o)Rt(this,ag,"m",A2e).call(this,a);if(o.controller.signal?.aborted)throw new cd;Rt(this,ag,"m",y2e).call(this)}finally{n&&i&&n.removeEventListener("abort",i)}}[(fS=new WeakMap,gq=new WeakMap,Zoe=new WeakMap,Aq=new WeakMap,yq=new WeakMap,ese=new WeakMap,Cq=new WeakMap,RE=new WeakMap,vq=new WeakMap,tse=new WeakMap,rse=new WeakMap,Z8=new WeakMap,nse=new WeakMap,ise=new WeakMap,h2e=new WeakMap,ag=new WeakSet,m2e=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_MessageStream_getFinalMessage"),spt=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new In("stream ended without producing a content block with type=text");return r.join(" ")},"_MessageStream_getFinalText"),g2e=s(function(){this.ended||Sn(this,fS,void 0,"f")},"_MessageStream_beginRequest"),A2e=s(function(r){if(this.ended)return;let n=Rt(this,ag,"m",apt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let i=n.content.at(-1);switch(r.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",r.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",r.delta.citation,i.citations??[]);break}case"input_json_delta":{lpt(i)&&i.input&&this._emit("inputJson",r.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",r.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,fS,n,"f");break}case"content_block_start":case"message_delta":break}},"_MessageStream_addStreamEvent"),y2e=s(function(){if(this.ended)throw new In("stream has ended, this shouldn't happen");let r=Rt(this,fS,"f");if(!r)throw new In("request ended without sending any chunks");return Sn(this,fS,void 0,"f"),r},"_MessageStream_endRequest"),apt=s(function(r){let n=Rt(this,fS,"f");if(r.type==="message_start"){if(n)throw new In(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new In(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push({...r.content_block}),n;case"content_block_delta":{let i=n.content.at(r.index);switch(r.delta.type){case"text_delta":{i?.type==="text"&&(n.content[r.index]={...i,text:(i.text||"")+r.delta.text});break}case"citations_delta":{i?.type==="text"&&(n.content[r.index]={...i,citations:[...i.citations??[],r.delta.citation]});break}case"input_json_delta":{if(i&&lpt(i)){let o=i[cpt]||"";o+=r.delta.partial_json;let a={...i};Object.defineProperty(a,cpt,{value:o,enumerable:!1,writable:!0}),o&&(a.input=$oe(o)),n.content[r.index]=a}break}case"thinking_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,thinking:i.thinking+r.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_MessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:s(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),"next"),return:s(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new F1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};d();var eM=class extends yl{static{s(this,"Batches")}create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(zd`/v1/messages/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/v1/messages/batches",og,{query:e,...r})}delete(e,r){return this._client.delete(zd`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(zd`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new In(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:jo([{Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,o)=>Y8.fromResponse(o.response,o.controller))}};var pS=class extends yl{static{s(this,"Messages")}constructor(){super(...arguments),this.batches=new eM(this._client)}create(e,r){e.model in upt&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${upt[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){let i=Xoe[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...r,stream:e.stream??!1})}stream(e,r){return ose.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},upt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};pS.Batches=eM;d();var pP=class extends yl{static{s(this,"Models")}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(zd`/v1/models/${e}`,{...n,headers:jo([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models",og,{query:i,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};d();var xq=s(t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()},"readEnv");var C2e,v2e,sse,dpt,Za=class{static{s(this,"BaseAnthropic")}constructor({baseURL:e=xq("ANTHROPIC_BASE_URL"),apiKey:r=xq("ANTHROPIC_API_KEY")??null,authToken:n=xq("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){C2e.add(this),sse.set(this,void 0);let o={apiKey:r,authToken:n,...i,baseURL:e||"https://api.anthropic.com"};if(!o.dangerouslyAllowBrowser&&Q0t())throw new In(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=o.baseURL,this.timeout=o.timeout??v2e.DEFAULT_TIMEOUT,this.logger=o.logger??console;let a="warn";this.logLevel=a,this.logLevel=r2e(o.logLevel,"ClientOptions.logLevel",this)??r2e(xq("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??q0t(),Sn(this,sse,$0t,"f"),this._options=o,this.apiKey=r,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return jo([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(this.apiKey!=null)return jo([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(this.authToken!=null)return jo([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new In(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${uS}`}defaultIdempotencyKey(){return`stainless-node-retry-${K_e()}`}makeStatusError(e,r,n,i){return vu.generate(e,r,n,i)}buildURL(e,r,n){let i=!Rt(this,C2e,"m",dpt).call(this)&&n||this.baseURL,o=P0t(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return D0t(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new In("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}request(e,r=null){return new lP(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let i=await e,o=i.maxRetries??this.maxRetries;r==null&&(r=o),await this.prepareOptions(i);let{req:a,url:c,timeout:l}=this.buildRequest(i,{retryCount:o-r});await this.prepareRequest(a,{url:c,options:i});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=n===void 0?"":`, retryOf: ${n}`,p=Date.now();if(xu(this).debug(`[${u}] sending request`,SE({retryOfRequestLogID:n,method:i.method,url:c,options:i,headers:a.headers})),i.signal?.aborted)throw new cd;let m=new AbortController,h=await this.fetchWithTimeout(c,a,l,m).catch(nq),g=Date.now();if(h instanceof Error){let E=`retrying, ${r} attempts remaining`;if(i.signal?.aborted)throw new cd;let b=TE(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(r)return xu(this).info(`[${u}] connection ${b?"timed out":"failed"} - ${E}`),xu(this).debug(`[${u}] connection ${b?"timed out":"failed"} (${E})`,SE({retryOfRequestLogID:n,url:c,durationMs:g-p,message:h.message})),this.retryRequest(i,r,n??u);throw xu(this).info(`[${u}] connection ${b?"timed out":"failed"} - error; no more retries left`),xu(this).debug(`[${u}] connection ${b?"timed out":"failed"} (error; no more retries left)`,SE({retryOfRequestLogID:n,url:c,durationMs:g-p,message:h.message})),b?new O8:new lS({cause:h})}let A=[...h.headers.entries()].filter(([E])=>E==="request-id").map(([E,b])=>", "+E+": "+JSON.stringify(b)).join(""),y=`[${u}${f}${A}] ${a.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${g-p}ms`;if(!h.ok){let E=this.shouldRetry(h);if(r&&E){let O=`retrying, ${r} attempts remaining`;return await H0t(h.body),xu(this).info(`${y} - ${O}`),xu(this).debug(`[${u}] response error (${O})`,SE({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:g-p})),this.retryRequest(i,r,n??u,h.headers)}let b=E?"error; no more retries left":"error; not retryable";xu(this).info(`${y} - ${b}`);let S=await h.text().catch(O=>nq(O).message),R=Loe(S),B=R?void 0:S;throw xu(this).debug(`[${u}] response error (${b})`,SE({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,message:B,durationMs:Date.now()-p})),this.makeStatusError(h.status,R,B,h.headers)}return xu(this).info(y),xu(this).debug(`[${u}] response start`,SE({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:g-p})),{response:h,options:i,controller:m,requestLogID:u,retryOfRequestLogID:n,startTime:p}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new lq(this,n,e)}async fetchWithTimeout(e,r,n,i){let{signal:o,method:a,...c}=r||{};o&&o.addEventListener("abort",()=>i.abort());let l=setTimeout(()=>i.abort(),n),u=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,f={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...c};a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){let o,a=i?.get("retry-after-ms");if(a){let l=parseFloat(a);Number.isNaN(l)||(o=l)}let c=i?.get("retry-after");if(c&&!o){let l=parseFloat(c);Number.isNaN(l)?o=Date.parse(c)-Date.now():o=l*1e3}if(!(o&&0<=o&&o<60*1e3)){let l=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,l)}return await M0t(o),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let o=r-e,a=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return a*c*1e3}calculateNonstreamingTimeout(e,r){if(36e5*e/128e3>6e5||r!=null&&e>r)throw new In("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:i,path:o,query:a,defaultBaseURL:c}=n,l=this.buildURL(o,a,c);"timeout"in n&&N0t("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:u,body:f}=this.buildBody({options:n}),p=this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:r});return{req:{method:i,headers:p,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let o={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);let a=jo([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...U0t(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=jo([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Foe(e)}:Rt(this,sse,"f").call(this,{body:e,headers:n})}};v2e=Za,sse=new WeakMap,C2e=new WeakSet,dpt=s(function(){return this.baseURL!=="https://api.anthropic.com"},"_BaseAnthropic_baseURLOverridden");Za.Anthropic=v2e;Za.HUMAN_PROMPT=`

Human:`;Za.AI_PROMPT=`

Assistant:`;Za.DEFAULT_TIMEOUT=6e5;Za.AnthropicError=In;Za.APIError=vu;Za.APIConnectionError=lS;Za.APIConnectionTimeoutError=O8;Za.APIUserAbortError=cd;Za.NotFoundError=H8;Za.ConflictError=$8;Za.RateLimitError=j8;Za.BadRequestError=Q8;Za.AuthenticationError=U8;Za.InternalServerError=G8;Za.PermissionDeniedError=q8;Za.UnprocessableEntityError=W8;Za.toFile=Hoe;var fy=class extends Za{static{s(this,"Anthropic")}constructor(){super(...arguments),this.completions=new fP(this),this.messages=new pS(this),this.models=new pP(this),this.beta=new O1(this)}};fy.Completions=fP;fy.Messages=pS;fy.Models=pP;fy.Beta=O1;var{HUMAN_PROMPT:cgr,AI_PROMPT:lgr}=fy;var ase=class extends Yh{static{s(this,"AnthropicProvider")}constructor(e){super(Wo.Anthropic,e)}async getAllModels(){await this.ensureKnownModelsCache();let e=await new Ya(this.ctx.get(Ai)).getAPIKey(this.providerName);if(!e)throw new Error(`API key not found for provider: ${this.providerName}`);let r=new fy({apiKey:e,fetch:ugr(this.ctx.get($r))});try{let n=await r.models.list(),i=[];for(let o of n.data){let a=this._knownModels?.[o.id];a&&i.push({providerName:this.providerName,modelId:o.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:a})}return i}catch(n){throw JQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,n),n}}};function ugr(t){return async(e,r)=>{let n=dgr(e,r),i=pgr(r),o=await t.fetch(n,i);return hgr(o)}}s(ugr,"createAnthropicFetchAdapter");function dgr(t,e){return t instanceof Request?(fgr(t,e),t.url):t instanceof URL?t.toString():t}s(dgr,"convertInputToString");function fgr(t,e){e&&(e.headers??=t.headers,e.method??=t.method,!e.body&&!t.bodyUsed&&(e.body=t.body))}s(fgr,"mergeRequestInit");function pgr(t){let e;return t?.headers&&(e=mgr(t.headers)),{method:t?.method||"GET",headers:e,body:t?.body,signal:t?.signal||void 0}}s(pgr,"convertToFetchOptions");function mgr(t){let e={};if(t instanceof Headers)for(let[r,n]of t.entries())e[r]=n;else if(Array.isArray(t))for(let[r,n]of t)e[r]=n;else return t;return e}s(mgr,"convertHeaders");async function hgr(t){let e=t.body(),r=null;if(e)r=ggr(e);else{let n=await t.text();r=ygr(n)}return new globalThis.Response(r,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})}s(hgr,"convertToWebResponse");function ggr(t){return new ReadableStream({start(e){let r=Agr(t,e);return()=>r()},cancel(){"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}})}s(ggr,"createReadableStreamFromNodeStream");function Agr(t,e){let r=s(a=>{e.enqueue(new Uint8Array(a))},"onData"),n=s(()=>{e.close(),o()},"onEnd"),i=s(a=>{e.error(a),o()},"onError"),o=s(()=>{t.off("data",r),t.off("end",n),t.off("error",i)},"cleanup");return t.on("data",r),t.on("end",n),t.on("error",i),o}s(Agr,"setupStreamHandlers");function ygr(t){return new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(t)),e.close()}})}s(ygr,"createReadableStreamFromText");d();var cse=class extends Yh{static{s(this,"GeminiProvider")}constructor(e){super(Wo.Gemini,e)}};d();var lse=class extends Yh{static{s(this,"GroqProvider")}constructor(e){super(Wo.Groq,e)}};d();var use=class extends Yh{static{s(this,"OpenAIProvider")}constructor(e){super(Wo.OpenAI,e)}};d();var fpt=16e3,dse=class extends Yh{static{s(this,"OpenRouterProvider")}constructor(e){super(Wo.OpenRouter,e)}async getAllModels(){try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new Ya(this.ctx.get(Ai)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await this.ctx.get($r).fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data)a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:{name:c.name,maxInputTokens:Math.max(0,c.top_provider.context_length-fpt),maxOutputTokens:fpt,toolCalling:c.supported_parameters?.includes("tools")??!1,vision:c.architecture?.input_modalities?.includes("image")??!1}});return a}catch(e){throw JQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getFetchModelUrl(){return`${this.getBaseUrl()}/models?supported_parameters=tools`}};var mP=class{static{s(this,"BYOKProviderFactory")}constructor(e){this.providers=new Map([[Wo.OpenAI,new use(e)],[Wo.Gemini,new cse(e)],[Wo.Groq,new lse(e)],[Wo.OpenRouter,new dse(e)],[Wo.Anthropic,new ase(e)]])}getBYOKProvider(e){return this.providers.get(e)}};var Cgr=x.Object({providerName:x.Optional(x.String()),enableFetchUrl:x.Optional(x.Boolean())});async function vgr(t,e,r){try{let{providerName:n,enableFetchUrl:i}=r,o=new Ya(t.get(Ai)),a=[];if(n)if(i){if(!ene(n))return[null,{code:tr.InvalidRequest,message:`enableFetchUrl is not supported for the ${n} provider`}];if(!await o.getAPIKey(n))return[null,{code:tr.InvalidRequest,message:`API key is required to fetch models from ${n}`}];let l=t.get(mP).getBYOKProvider(n);if(l){let u=await l.getAllModels(),f=new Map;u.forEach(h=>{let g=`${h.providerName}_${h.modelId}`;f.set(g,h)});let p=await o.getStoredModelConfigs(n),m=[];Object.entries(p).forEach(([h,g])=>{m.push({providerName:n,modelId:h,deploymentUrl:g.deploymentUrl,isRegistered:g.isRegistered,isCustomModel:g.isCustomModel,modelCapabilities:g.modelCapabilities})}),m.forEach(h=>{let g=`${h.providerName}_${h.modelId}`;f.set(g,h)}),a.push(...f.values())}}else{let c=await o.getStoredModelConfigs(n);Object.entries(c).forEach(([l,u])=>{a.push({providerName:n,modelId:l,deploymentUrl:u.deploymentUrl,isRegistered:u.isRegistered,isCustomModel:u.isCustomModel,modelCapabilities:u.modelCapabilities})})}else{let c=Object.values(Wo);for(let l of c){let u=await o.getStoredModelConfigs(l);Object.entries(u).forEach(([f,p])=>{a.push({providerName:l,modelId:f,deploymentUrl:p.deploymentUrl,isRegistered:p.isRegistered,isCustomModel:p.isCustomModel,modelCapabilities:p.modelCapabilities})})}}return[{models:a},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}s(vgr,"handleBYOKListModelsChecked");var ppt=Ze(Cgr,vgr);d();var xgr=x.Object({providerName:x.String(),apiKey:x.String(),modelId:x.Optional(x.String())});async function Egr(t,e,r){try{let n=new Ya(t.get(Ai)),{providerName:i,apiKey:o,modelId:a}=r,c=Pw(i);if(c===1&&!a)return[null,{code:tr.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(i,o,c,a);let l=`API key saved successfully for provider ${i}`;return[{success:!0,message:a?`${l} and model ${a}`:l},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Egr,"handleBYOKSaveApiKeyChecked");var mpt=Ze(xgr,Egr);d();var bgr=x.Object({providerName:x.String(),modelId:x.String(),isRegistered:x.Boolean(),isCustomModel:x.Boolean(),deploymentUrl:x.Optional(x.String()),apiKey:x.Optional(x.String()),modelCapabilities:x.Optional(x.Object({name:x.String(),maxInputTokens:x.Optional(x.Number()),maxOutputTokens:x.Optional(x.Number()),toolCalling:x.Boolean(),vision:x.Boolean()}))});async function Igr(t,e,r){try{let{providerName:n,modelId:i,isRegistered:o,isCustomModel:a,deploymentUrl:c,apiKey:l,modelCapabilities:u}=r,f=new Ya(t.get(Ai)),p=Pw(n);if(p===1&&!c)return[null,{code:tr.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(c||u){let m={deploymentUrl:c,isRegistered:o,isCustomModel:a,modelCapabilities:u};await f.saveModelConfig(n,i,m,l,p)}else l!==void 0&&await f.storeAPIKey(n,l,p,i);return[{success:!0,message:`Model ${i} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}s(Igr,"handleBYOKSaveModelChecked");var hpt=Ze(bgr,Igr);d();var Tgr=x.Object({uri:x.String({minLength:1})});async function wgr(t,e,r){let n=await t.get(En).getOrReadTextDocument(r);return[{status:oa(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(wgr,"handleCheckFileStatusChecked");var gpt=Ze(Tgr,wgr);d();var Sgr=x.Object({});function Apt(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Apt,"calculatePercentRemaining");async function _gr(t,e,r){let n=await t.get(Yi).getSession();if(n){let i=await sme(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Apt(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Apt(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:tr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:tr.InternalError,message:"Not signed in"}]}s(_gr,"handleCheckQuotaChecked");var ypt=Ze(Sgr,_gr);d();var Rgr=x.Object({options:x.Optional(x.Object({localChecksOnly:x.Optional(x.Boolean()),forceRefresh:x.Optional(x.Boolean())}))});async function kgr(t,e,r){return[await t.get(Yi).checkAndUpdateStatus(r.options),null]}s(kgr,"handleCheckStatusChecked");var Cpt=Ze(Rgr,kgr);d();d();d();d();d();d();function vpt(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(vpt,"filterUnsupportedReferences");function xpt(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(xpt,"convertToCopilotReferences");var Ept=x.Object({type:x.Literal("github.web-search"),id:x.String(),data:x.Object({query:x.String(),type:x.String(),results:x.Optional(x.Array(x.Object({title:x.String(),excerpt:x.String(),url:x.String()})))}),metadata:x.Optional(x.Object({display_name:x.Optional(x.String()),display_icon:x.Optional(x.String())}))});var mS=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,vpt(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var Cl=class{static{s(this,"ConversationInspector")}};d();var x2e={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var pa=class{constructor(e){this.ctx=e;this.progressEntries=new wr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&en.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var Q1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Yi).getSession(),o;if(i&&new URL(i.serverUrl).hostname===n)o=i;else{let l=await this.ctx.get(uA).getAuthRecord({authAuthority:n});l&&(o={accessToken:l.oauth_token,apiUrl:`https://api.${n}/`})}if(!o&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let a={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};o&&(a.Authorization=`Bearer ${o.accessToken}`);let c=new URL(`repos/${e}/${r}`,o?.apiUrl||`https://api.${n}`).href;return this.ctx.get($r).fetch(c,{method:"GET",headers:a})}};d();d();d();var Ipt=Ne(um());var U1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Ut([(0,Ipt.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Ut(u.filter(([p,m])=>!tM(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Mp(h),m]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||tM(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Ut([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function tM(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(tM,"isEmptyRange");var Tpt=Ne(require("path"));var wpt=x.Object({uri:x.String(),visibleRange:x.Optional(Pc),selection:x.Optional(Pc)}),E2e=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument(e),i=oa(n);if(await this.turnContext.collectFile(Yd,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new U1(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Ut([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(tM(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Ut([...l,...u])}else if(n.status==="invalid")return new Ut([`The currently open file \`${Tpt.basename(e.uri)}\` is content excluded.`])}},Yd="current-editor",fse=class{constructor(e){this._resolver=e;this.id=Yd;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new E2e(e)}};d();d();var Ql=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},b2e=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},I2e=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Eu=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new b2e(this._resolver(e),this.id,this.stepTitle)}processor(e){return new I2e(this._processor(e),this.id)}};var Spt=x.Object({name:x.String(),url:x.String()}),_pt=x.Object({path:x.String(),head:x.Optional(x.Object({name:x.String(),upstream:x.Optional(Spt)})),remotes:x.Optional(x.Array(Spt))}),T2e=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(q1,"git repository information");let r=[];return r.push([new Ut(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Ut([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Ut([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Ut(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Ut([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Ut(r)}},q1="git-metadata",pse=class extends Eu{static{s(this,"GitMetadataSkill")}constructor(e){super(q1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new T2e(r))}};async function Rpt(t){let e=await t.skillResolver.resolve(Yd);if(e){let a=e.uri,c=IT(t.ctx,a);if(qWe(c))return{repoInfo:c,skillUsed:Yd}}let r=await t.skillResolver.resolve(q1);if(!r||!r.remotes||r.remotes.length===0){en.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Hye(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:q1}}s(Rpt,"extractRepoInfo");async function kpt(t){let e=[];return await Pgr(t,e),await Dgr(t,e),await Bgr(t,e),e}s(kpt,"skillsToReference");async function Pgr(t,e){let r=await Ngr(t);r&&e.push(r)}s(Pgr,"addRepositoryReference");async function Dgr(t,e){let r=await Mgr(t);r&&e.push(r)}s(Dgr,"addSelectionReference");async function Bgr(t,e){let r=[],n=await Fgr(t);n&&r.push(n),r.push(...await Ogr(t)),r.length>0&&e.push(...r)}s(Bgr,"addFileReferences");async function Ngr(t){let e=await Rpt(t);if(e){let r=t.ctx.get(Q1),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Ngr,"gitMetadataToReference");async function Mgr(t){let e=await t.skillResolver.resolve(Yd);if(e&&e.selection){let n=await t.ctx.get(En).getOrReadTextDocument(e),i=oa(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return Lgr(e,n.document)}}s(Mgr,"currentEditorToSelectionReference");function Lgr(t,e){if(t.selection&&!tM(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(Lgr,"extractSelection");async function Fgr(t){let e=await t.skillResolver.resolve(Yd);if(e){let n=await t.ctx.get(En).getOrReadTextDocument(e),i=oa(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(Fgr,"currentEditorToFileReference");async function Ogr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(En);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=oa(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(Ogr,"fileReferenceToPlatformFileReference");d();d();d();d();var Opt=Ne(gse()),R2e=Ne(require("path"));var Qpt=500,zgr=Math.floor(.25*Qpt),Ase=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=R2e.default.extname(__filename)===".ts"?R2e.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await Opt.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,A=[],y=0;for(;y<g;){let E=y+u>=g,b=E?g:y+u,S=h.slice(y,b),R=m.detokenize(S),B=o.indexOf(R);A.push({id:`${a.toString()}#${y}`,chunk:R,tokenCount:S.length,range:{start:B,end:B+R.length}}),y=E?b:b-f}return A},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:Qpt,overlap:zgr}}),n}};var Ygr="fixedSize",Kgr=new Map([["fixedSize",Ase]]);function Upt(t){let e=t==="default"?Ygr:t,r=Kgr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(Upt,"getChunkingAlgorithm");d();d();var yse=Ne(gI()),H1=Ne(require("fs")),qpt=require("os"),cg=Ne(require("path")),rM=require("process");var k2e=5e4,Jgr=new Ct("workspaceChunks"),Cse=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Pi(r.uri),i=(0,yse.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=cg.join(Xgr(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,yse.SHA256)(e).toString().substring(0,this.pathHashLength),n=cg.basename(e);return cg.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await H1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await H1.promises.mkdir(cg.dirname(n),{recursive:!0}),await H1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){Jgr.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await H1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await H1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=cg.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(cg.join(this.cacheRootPath,n))}}async getFileHash(e){let r=es(e),n="";return r&&(n=await H1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,yse.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=es(e);if(!i)return;async function o(p){try{return(await H1.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=Rl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=es(e);if(!r)return[];let n;try{n=await H1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=Rl(cg.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await H1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function Xgr(){return rM.env.XDG_CACHE_HOME&&cg.isAbsolute(rM.env.XDG_CACHE_HOME)?rM.env.XDG_CACHE_HOME+"/github-copilot":(0,qpt.platform)()==="win32"?rM.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":rM.env.HOME+"/.cache/github-copilot"}s(Xgr,"getXdgCachePath");var P2e=1e4;var vse=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new B2e;this.status="notStarted",this.workspaceChunks=new Cse(e,r),this.cancellationToken=new D2e,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(Gd).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>P2e&&(this._fileCountExceeded=!0,n=n.slice(0,P2e));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){qa(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>k2e&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){qa(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>k2e&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>P2e&&(this._fileCountExceeded=!0),VYe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Jo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},D2e=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},B2e=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var Ac=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=Upt(r),i=new n;return new vse(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=Gr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=Gr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function Ese(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(Ese,"toChatModeEnum");var hS=class{constructor(e,r){this.request=e;this.telemetryId=Er();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}extractContextFilesUri(){let e=[...(this.request.references??[]).filter(r=>r.type==="file").map(r=>r.uri).filter(Boolean),...this.request.activeEditor?.uri?[this.request.activeEditor.uri]:[]];return Array.from(new Set(e))}},xse=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=Er();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var Hpt={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},$pt="Alright, This response contains a code citation.";d();var Wpt=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var jpt=Ne(require("fs")),Of=Ne(require("path"));var N2e=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],M2e="test_",Iq={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},Tq=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Pi(e),n=Of.extname(r).replace(".",""),i=Iq[n]??{location:"sameFolder",prefix:M2e,suffix:N2e},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=es(kd(e)),c===void 0)return}else{let u=es(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=Of.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=Rl(c);if(await this.fileExists(l))return Vi(l,o[0])}parseTestFilePath(e){try{return Rl(e)}catch(r){un.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Pi(e),n=Of.extname(r).replace(".",""),i=Iq[n]??{location:"sameFolder",prefix:M2e,suffix:N2e},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=kd(e):c=this.determineImplFolder(e);for(let l of o){let u=Vi(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=es(e);if(r===void 0)return;let n=Of.extname(Pi(e)).replace(".",""),i,o=Iq[n]?.location??"sameFolder";o==="sameFolder"?i=Of.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,Iq[n]);if(a.length>0)return Rl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${Of.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return jpt.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&es(this.baseUri))??"",i=Of.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(Of.sep)}getRelativeTestFolder(e,r,n,i){let o=Of.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=Of.extname(Pi(e)).replace(".",""),n=kd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function wq(t){let e=Pi(t),r=Of.extname(e),n=Iq[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(N2e.some(o=>e.endsWith(o+r))||e.startsWith(M2e))}s(wq,"isTestFile");d();var Gpt=["indexed","indexing","not_indexed"],gS=class{constructor(){this._cache=new wr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await zm(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,i=!1){let o=hx(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function Vpt(t,e,r,n){let i=Ni(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(Br).getToken(),l=QY(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),m=await Zgr(t,l,u,e.modelId,p,n);a.push(...m||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(Vpt,"fetchEmbeddings");async function Zgr(t,e,r,n,i,o){let a=Er(),c=i.map(u=>u.text),l=await Ax(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,kC(t));if(l.status!==200||o.isCancellationRequested){qa(t,new kE(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(Zgr,"sendEmbeddingsRequest");d();d();var bse=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var eAr="cosine",tAr=new Map([["cosine",bse]]);function zpt(t){let e=t==="default"?eAr:t,r=tAr.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(zpt,"getScoringAlgorithm");d();var dm=class{constructor(){this.workspaceScoringProviders=new wr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=zpt(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Ypt={modelFamily:HY.textEmbedding3Small,scoringType:"default",dimensions:null};async function Kpt(t,e,r,n,i,o,a,c=Ypt){let l={...Ypt,...c},u=nAr(t,e,r,n);en.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(Xa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await Vpt(t,f,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let A=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let y=performance.now(),E=iAr(t,e,m,A,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-y);let S=E.slice(0,i);return en.debug(t,`EmbeddingsReranker: Returning ${S.length} snippets`),S.map(B=>u.find(L=>L.id===B.id).id)}s(Kpt,"rerankSnippets");function nAr(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(nAr,"formatEmbeddingsInput");function iAr(t,e,r,n,i){let o=t.get(dm);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(iAr,"scoreEmbeddings");d();d();d();var F2e=Ne(gse());var oAr=.75,sAr=1.2,aAr=47,Ise=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Tse();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,aAr),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(Ac).getChunks(this.workspaceFolder),n=Sx(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=Sx(n,o=>o.chunk);return await cAr(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(Ac).getChunks(this.workspaceFolder),a=new L2e(i);for await(let c of o){let l=await lAr({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function cAr(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=F2e.job(({snippet:f,keywords:p})=>p.map(h=>f.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(cAr,"calculateIDFValues");async function lAr(t,e,r,n){return{score:await F2e.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let m=0;for(let h of o){let g=u[h],A=(a.match(new RegExp(h,"g"))||[]).length,y=g*(A*(f+1)),E=A+f*(1-p+p*c/l);m+=y/E}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:sAr,b:oAr}}),...t}}s(lAr,"calculateBM25Score");var L2e=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var dAr="bm25",fAr=new Map([["bm25",Ise]]);function Jpt(t){let e=t==="default"?dAr:t,r=fAr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(Jpt,"getRankingAlgorithm");var ld=class{constructor(){this.workspaceRankingProviders=new wr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=Jpt(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function Xpt(t,e){let r=t.ctx,n=await Jo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(ud).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new Ja(r),l=await Fc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(en.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";qa(r,new kE(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(Xpt,"parseUserQuery");var Zpt=Ne(um());var kE=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},wse=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(Ac),o=i.status(e.turn.workspaceFolder),a=n.get(ld),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(Ac).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await Xpt(e,e.cancelationToken)}catch(g){let A=new kE(g);qa(i,A,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(ld),p=[],m=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let A=new kE(g);qa(i,A,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=on(e.turn.request.message),c=[];try{c=await Kpt(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new kE(f);qa(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(En);for(let f of c){let p=f.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===f);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),A=m.document.positionAt(h.range.end),y=vs.range(g,A);l.push({uri:m.document.uri,range:y,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...XYe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return en.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(Ac).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return Zpt.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var tmt=Ne(emt()),Rse=Ne(gse()),rmt=Ne(require("os")),nmt=Ne(um());var hAr=Math.min(Math.max(Math.ceil(rmt.cpus().length/2),1),10),Sq=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new tmt.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await Rse.start({maxWorkers:hAr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await Rse.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Tse=Sq.startWorkerPool.bind(Sq);var TYi=x.Object({uri:x.String(),snippet:x.String(),range:x.Object({start:x.Object({line:x.Number(),character:x.Number()}),end:x.Object({line:x.Number(),character:x.Number()})})}),U2e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(nM);return}let r=[],n=this.turnContext.ctx.get(En),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new U1(u.document,l,l),p=new Ut([c]),h=wq(a)?.5:.8;r.push([`Code excerpt from file \`${es(a)}\`:`,1],[f.wrapInTicks(p,h),1]),await this.turnContext.collectFile(iM,a,oa(u),l)}}if(r.length>0)return r.unshift([new Ut(["The user wants you to consider the following snippets when computing your answer."]),1]),new Ut(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},nM="collect-project-context",Sse=class extends M8{constructor(r,n=[new wse]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(P1).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await Tse(),!r.uri))return;let n=this.ctx.get(Ac),i=this.ctx.get(Gd),o=this.ctx.get(ld),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(Ac);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(ld).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(ld).terminateRanking(this.ctx,r),this.ctx.get(dm).terminateScoring(this.ctx,r),n.workspaceCount===0&&await Sq.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let i=this.ctx.get(Ac),o=this.ctx.get(ld),a=this.ctx.get(dm);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await Tse();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(Ac),c=this.ctx.get(ld);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(nM,"Collecting relevant project context"),await r.info(nmt.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of Gpt){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await ZYe(r,a.providerType,l),c.length===0){await r.steps.error(nM,"No project context found");return}return await r.steps.finish(nM),c}case"indexing":{await r.steps.error(nM,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(nM,"No project context available");return}}}},iM="project-context",_se=class extends Eu{static{s(this,"ProjectContextSkill")}constructor(e){super(iM,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new U2e(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var imt=x.Object({labels:x.Array(x.String())}),q2e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Ut(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Ut([`- ${n}`]),.9]),this.turnContext.collectLabel(py,n)}),new Ut(r)}},py="project-labels",kse=class{constructor(e){this._resolver=e;this.id=py;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new q2e(e)}};d();var Pse=Ne(um());var smt={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},amt=Pse.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,cmt=Pse.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,gAr=Pse.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,H2e=`

`,omt=amt+H2e+cmt;function lmt(t){let e=1;if(t.length===0)return{reply:omt,vulnerabilities:e};if(t==="0")return{reply:omt,vulnerabilities:0};if(t==="help")return{reply:gAr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=amt+H2e:i==="c"&&(n+=cmt+H2e);return{reply:n.trimEnd(),vulnerabilities:e}}s(lmt,"parseVulnerabilitiesInstructions");var umt=Ne(um());var AAr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",yAr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",$2e=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},CAr=new $2e,W2e=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new bu(yAr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},vAr=new W2e,j2e=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new bu("Alright, I'm producing a notification",void 0,[],o)}},xAr=new j2e,G2e=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new bu(AAr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},EAr=new G2e,V2e=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new bu(await fmt(e))}},bAr=new V2e,z2e=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[py,Yd]}instructions(e,r){return"Create a function that prints a christmas tree"}},IAr=new z2e,Y2e=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new bu(on(e.turn.request.message))}},TAr=new Y2e,K2e=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Iu).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=umt.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new bu(i)}return new bu("No prompt available")}},wAr=new K2e,J2e=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new bu(await pmt(e,n,i))}},SAr=new J2e,X2e=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=lmt(r);for(let o=0;o<i;o++)e.turn.annotations.push(smt);return new bu(n,void 0,e.turn.annotations)}},_Ar=new X2e,Z2e=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(Hpt),new bu($pt,void 0,e.turn.annotations)}},RAr=new Z2e,eRe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new bu(Wpt)}},kAr=new eRe,tRe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},PAr=new tRe,rRe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[iM]}},DAr=new rRe,nRe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new bu("Alright, I'm producing a notification",void 0,[],[],[],e)}},BAr=new nRe;function dmt(){return[CAr,vAr,xAr,EAr,IAr,bAr,TAr,wAr,SAr,_Ar,RAr,BAr,kAr,PAr,DAr]}s(dmt,"getDebugTemplates");d();d();function yS(t,e){if(t.length==0)return new Ut([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Ut(r)}s(yS,"weighElidableList");var mmt=x.Object({uri:x.String(),problems:x.Array(x.Object({message:x.String(),range:Pc}))}),iRe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(CS,e.uri,oa(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(CS,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(CS,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Ut([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),yS(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Ut([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Ut([["```"+c,1],[Mp(a),.8],["```",1]]))}return new Ut(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Jo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},CS="problems-in-active-document",Dse=class extends Eu{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(CS,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new iRe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var Bse=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new Tq(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=wq(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!wq(e))return;let n=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new Tq(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${NAr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${MAr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${LAr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(my,e,oa(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Mp(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Mi).stat(e),!0}catch{return!1}}}},NAr="Code excerpt from the implementation source file",MAr="Code excerpt from the test file",LAr="Code excerpt from an example test file";var hmt=x.Object({currentFileUri:x.String(),sourceFileUri:x.Optional(x.String()),testFileUri:x.Optional(x.String())}),sRe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(En),n=new Bse(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(my,e.testFileUri,oa(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(my,e.sourceFileUri,oa(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(my,e.sourceFileUri,oa(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(my,e.testFileUri,oa(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},my="test-context",Nse=class extends Eu{static{s(this,"TestContextSkill")}constructor(e){super(my,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new sRe(r))}};d();var gmt=Ne(um());var Amt=x.Object({failures:x.Array(x.Object({testName:x.String(),testSuite:x.Optional(x.String()),testFileUri:x.String(),failureReason:x.Optional(x.String()),testLocation:Pc}))}),aRe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(AP,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Ut(["The latest test run produced the following failures and errors:"]);return new Ut([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(En),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(AP,o,oa(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Ut(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Ut([gmt.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Ut(n)}appendCode(e,r,n){let i=[new Ut([`
The code of file \`${r}\` is:
`]),.6],o=[new Ut([["```"+n.detectedLanguageId,1],[Mp(n.getText()),.9],["```",1]]),.7];return new Ut([[e,1],i,o])}},AP="test-failures",Mse=class extends Eu{static{s(this,"TestFailuresSkill")}constructor(e){super(AP,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new aRe(r))}};var lg=Ne(um());var bu=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},yP=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},FAr=new yP("tests","Generate unit tests","Generate Tests",lg.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[my,AP],["chat-panel","agent-panel","editor"]),OAr=new yP("simplify","Simplify the code","Simplify This",lg.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","agent-panel","inline"],lg.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),QAr=new yP("fix","Fix problems and compile errors","Fix This",lg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[CS],["editor","chat-panel","agent-panel","inline"],lg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),UAr=new yP("explain","Explain how the code works","Explain This",lg.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","agent-panel","inline"],lg.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),qAr=new yP("doc","Document the current selection of code","Generate Docs",lg.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","agent-panel","inline"],lg.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),cRe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel","agent-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=dRe(e.conversation),n=lg.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://aka.ms/copilot-jetbrains-feedback) to share your feedback.
            `;return r?new bu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new bu(n)}},HAr=new cRe,lRe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel","agent-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=uRe(e.ctx).filter(i=>i!=this),n=lg.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new bu(n)}},$Ar=new lRe;function CP(){return[FAr,OAr,QAr,UAr,qAr,HAr,$Ar,...dmt()]}s(CP,"getPromptTemplates");function uRe(t){let e=CP();return!R9(t)&&!Gg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(uRe,"getUserFacingPromptTemplates");var fRe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},eo=class{constructor(e){this.ctx=e;this.conversations=new wr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new xse([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(Ql).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new fRe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),this.determineAndApplyPromptTemplate(this.ctx,u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&on(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(on(r.request.message),"@");(await W1(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(on(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(on(r.request.message),"/"),o=CP().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}determineAndApplyPromptTemplate(e,r,n){if(on(n.request.message).trim().startsWith("/")){let[i,o]=this.extractKeywordAndQuestionFromRequest(on(n.request.message),"/"),c=e.get(KA).getPromptTemplate(i);c&&(n.request.message=`Follow instructions in [${c.name}](${c.uri}). ${o}`,n.request.references=[...n.request.references||[],{type:"file",uri:c.uri}])}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(Ql).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function Bmt(t){return typeof t>"u"||t===null}s(Bmt,"isNothing");function WAr(t){return typeof t=="object"&&t!==null}s(WAr,"isObject");function jAr(t){return Array.isArray(t)?t:Bmt(t)?[]:[t]}s(jAr,"toArray");function GAr(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(GAr,"extend");function VAr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(VAr,"repeat");function zAr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(zAr,"isNegativeZero");var YAr=Bmt,KAr=WAr,JAr=jAr,XAr=VAr,ZAr=zAr,eyr=GAr,Ul={isNothing:YAr,isObject:KAr,toArray:JAr,repeat:XAr,isNegativeZero:ZAr,extend:eyr};function Nmt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(Nmt,"formatError");function Rq(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Nmt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(Rq,"YAMLException$1");Rq.prototype=Object.create(Error.prototype);Rq.prototype.constructor=Rq;Rq.prototype.toString=s(function(e){return this.name+": "+Nmt(this,e)},"toString");var G0=Rq;function pRe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(pRe,"getLine");function mRe(t,e){return Ul.repeat(" ",e-t.length)+t}s(mRe,"padStart");function tyr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=pRe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=Ul.repeat(" ",e.indent)+mRe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=pRe(t.buffer,n[a],i[a],t.position,p),c+=Ul.repeat(" ",e.indent)+mRe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=Ul.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=pRe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=Ul.repeat(" ",e.indent)+mRe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(tyr,"makeSnippet");var ryr=tyr,nyr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],iyr=["scalar","sequence","mapping"];function oyr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(oyr,"compileStyleAliases");function syr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(nyr.indexOf(r)===-1)throw new G0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=oyr(e.styleAliases||null),iyr.indexOf(this.kind)===-1)throw new G0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(syr,"Type$1");var Kd=syr;function ymt(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(ymt,"compileList");function ayr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(ayr,"compileMap");function gRe(t){return this.extend(t)}s(gRe,"Schema$1");gRe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof Kd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new G0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Kd))throw new G0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new G0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new G0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Kd))throw new G0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(gRe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ymt(i,"implicit"),i.compiledExplicit=ymt(i,"explicit"),i.compiledTypeMap=ayr(i.compiledImplicit,i.compiledExplicit),i},"extend");var cyr=gRe,lyr=new Kd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),uyr=new Kd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),dyr=new Kd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),fyr=new cyr({explicit:[lyr,uyr,dyr]});function pyr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(pyr,"resolveYamlNull");function myr(){return null}s(myr,"constructYamlNull");function hyr(t){return t===null}s(hyr,"isNull");var gyr=new Kd("tag:yaml.org,2002:null",{kind:"scalar",resolve:pyr,construct:myr,predicate:hyr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function Ayr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(Ayr,"resolveYamlBoolean");function yyr(t){return t==="true"||t==="True"||t==="TRUE"}s(yyr,"constructYamlBoolean");function Cyr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(Cyr,"isBoolean");var vyr=new Kd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ayr,construct:yyr,predicate:Cyr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function xyr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(xyr,"isHexCode");function Eyr(t){return 48<=t&&t<=55}s(Eyr,"isOctCode");function byr(t){return 48<=t&&t<=57}s(byr,"isDecCode");function Iyr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!xyr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Eyr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!byr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(Iyr,"resolveYamlInteger");function Tyr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(Tyr,"constructYamlInteger");function wyr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ul.isNegativeZero(t)}s(wyr,"isInteger");var Syr=new Kd("tag:yaml.org,2002:int",{kind:"scalar",resolve:Iyr,construct:Tyr,predicate:wyr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_yr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ryr(t){return!(t===null||!_yr.test(t)||t[t.length-1]==="_")}s(Ryr,"resolveYamlFloat");function kyr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(kyr,"constructYamlFloat");var Pyr=/^[-+]?[0-9]+e/;function Dyr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ul.isNegativeZero(t))return"-0.0";return r=t.toString(10),Pyr.test(r)?r.replace("e",".e"):r}s(Dyr,"representYamlFloat");function Byr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ul.isNegativeZero(t))}s(Byr,"isFloat");var Nyr=new Kd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ryr,construct:kyr,predicate:Byr,represent:Dyr,defaultStyle:"lowercase"}),Myr=fyr.extend({implicit:[gyr,vyr,Syr,Nyr]}),Lyr=Myr,Mmt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Lmt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Fyr(t){return t===null?!1:Mmt.exec(t)!==null||Lmt.exec(t)!==null}s(Fyr,"resolveYamlTimestamp");function Oyr(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,m;if(e=Mmt.exec(t),e===null&&(e=Lmt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(Oyr,"constructYamlTimestamp");function Qyr(t){return t.toISOString()}s(Qyr,"representYamlTimestamp");var Uyr=new Kd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Fyr,construct:Oyr,instanceOf:Date,represent:Qyr});function qyr(t){return t==="<<"||t===null}s(qyr,"resolveYamlMerge");var Hyr=new Kd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:qyr}),xRe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $yr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=xRe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s($yr,"resolveYamlBinary");function Wyr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=xRe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(Wyr,"constructYamlBinary");function jyr(t){var e="",r=0,n,i,o=t.length,a=xRe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(jyr,"representYamlBinary");function Gyr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(Gyr,"isBinary");var Vyr=new Kd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$yr,construct:Wyr,predicate:Gyr,represent:jyr}),zyr=Object.prototype.hasOwnProperty,Yyr=Object.prototype.toString;function Kyr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,Yyr.call(i)!=="[object Object]")return!1;for(o in i)if(zyr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(Kyr,"resolveYamlOmap");function Jyr(t){return t!==null?t:[]}s(Jyr,"constructYamlOmap");var Xyr=new Kd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Kyr,construct:Jyr}),Zyr=Object.prototype.toString;function eCr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],Zyr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(eCr,"resolveYamlPairs");function tCr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(tCr,"constructYamlPairs");var rCr=new Kd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:eCr,construct:tCr}),nCr=Object.prototype.hasOwnProperty;function iCr(t){if(t===null)return!0;var e,r=t;for(e in r)if(nCr.call(r,e)&&r[e]!==null)return!1;return!0}s(iCr,"resolveYamlSet");function oCr(t){return t!==null?t:{}}s(oCr,"constructYamlSet");var sCr=new Kd("tag:yaml.org,2002:set",{kind:"mapping",resolve:iCr,construct:oCr}),Fmt=Lyr.extend({implicit:[Uyr,Hyr],explicit:[Vyr,Xyr,rCr,sCr]}),xS=Object.prototype.hasOwnProperty,Lse=1,Omt=2,Qmt=3,Fse=4,hRe=1,aCr=2,Cmt=3,cCr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lCr=/[\x85\u2028\u2029]/,uCr=/[,\[\]\{\}]/,Umt=/^(?:!|!!|![a-z\-]+!)$/i,qmt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function vmt(t){return Object.prototype.toString.call(t)}s(vmt,"_class");function j1(t){return t===10||t===13}s(j1,"is_EOL");function xP(t){return t===9||t===32}s(xP,"is_WHITE_SPACE");function V0(t){return t===9||t===32||t===10||t===13}s(V0,"is_WS_OR_EOL");function sM(t){return t===44||t===91||t===93||t===123||t===125}s(sM,"is_FLOW_INDICATOR");function dCr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(dCr,"fromHexCode");function fCr(t){return t===120?2:t===117?4:t===85?8:0}s(fCr,"escapedHexLen");function pCr(t){return 48<=t&&t<=57?t-48:-1}s(pCr,"fromDecimalCode");function xmt(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(xmt,"simpleEscapeSequence");function mCr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(mCr,"charFromCodepoint");var Hmt=new Array(256),$mt=new Array(256);for(vP=0;vP<256;vP++)Hmt[vP]=xmt(vP)?1:0,$mt[vP]=xmt(vP);var vP;function hCr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Fmt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(hCr,"State$1");function Wmt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=ryr(r),new G0(e,r)}s(Wmt,"generateError");function pn(t,e){throw Wmt(t,e)}s(pn,"throwError");function Ose(t,e){t.onWarning&&t.onWarning.call(null,Wmt(t,e))}s(Ose,"throwWarning");var Emt={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&pn(e,"duplication of %YAML directive"),n.length!==1&&pn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&pn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&pn(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Ose(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&pn(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Umt.test(i)||pn(e,"ill-formed tag handle (first argument) of the TAG directive"),xS.call(e.tagMap,i)&&pn(e,'there is a previously declared suffix for "'+i+'" tag handle'),qmt.test(o)||pn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{pn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function vS(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||pn(t,"expected valid JSON character");else cCr.test(c)&&pn(t,"the stream contains non-printable characters");t.result+=c}}s(vS,"captureSegment");function bmt(t,e,r,n){var i,o,a,c;for(Ul.isObject(r)||pn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],xS.call(e,o)||(e[o]=r[o],n[o]=!0)}s(bmt,"mergeMappings");function aM(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&pn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&vmt(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&vmt(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)bmt(t,e,o[u],r);else bmt(t,e,o,r);else!t.json&&!xS.call(r,i)&&xS.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,pn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(aM,"storeMappingPair");function ERe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):pn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(ERe,"readLineBreak");function vl(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;xP(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(j1(i))for(ERe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Ose(t,"deficient indentation"),n}s(vl,"skipSeparationSpace");function qse(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||V0(r)))}s(qse,"testDocumentSeparator");function bRe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ul.repeat(`
`,e-1))}s(bRe,"writeFoldedLines");function gCr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),V0(h)||sM(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),V0(i)||r&&sM(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),V0(i)||r&&sM(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),V0(n))break}else{if(t.position===t.lineStart&&qse(t)||r&&sM(h))break;if(j1(h))if(l=t.line,u=t.lineStart,f=t.lineIndent,vl(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(vS(t,o,a,!1),bRe(t,t.line-l),o=a=t.position,c=!1),xP(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return vS(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(gCr,"readPlainScalar");function ACr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(vS(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else j1(r)?(vS(t,n,i,!0),bRe(t,vl(t,!1,e)),n=i=t.position):t.position===t.lineStart&&qse(t)?pn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);pn(t,"unexpected end of the stream within a single quoted scalar")}s(ACr,"readSingleQuotedScalar");function yCr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return vS(t,r,t.position,!0),t.position++,!0;if(c===92){if(vS(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),j1(c))vl(t,!1,e);else if(c<256&&Hmt[c])t.result+=$mt[c],t.position++;else if((a=fCr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=dCr(c))>=0?o=(o<<4)+a:pn(t,"expected hexadecimal character");t.result+=mCr(o),t.position++}else pn(t,"unknown escape sequence");r=n=t.position}else j1(c)?(vS(t,r,n,!0),bRe(t,vl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&qse(t)?pn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}pn(t,"unexpected end of the stream within a double quoted scalar")}s(yCr,"readDoubleQuotedScalar");function CCr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,m,h,g=Object.create(null),A,y,E,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,h=!1,c=[];else if(b===123)f=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(vl(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&pn(t,"expected the node content, but found ','"):pn(t,"missed comma between flow collection entries"),y=A=E=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),V0(u)&&(p=m=!0,t.position++,vl(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,cM(t,e,Lse,!1,!0),y=t.tag,A=t.result,vl(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),vl(t,!0,e),cM(t,e,Lse,!1,!0),E=t.result),h?aM(t,c,g,y,A,E,n,i,o):p?c.push(aM(t,null,g,y,A,E,n,i,o)):c.push(A),vl(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}pn(t,"unexpected end of the stream within a flow collection")}s(CCr,"readFlowCollection");function vCr(t,e){var r,n,i=hRe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)hRe===i?i=p===43?Cmt:aCr:pn(t,"repeat of a chomping mode identifier");else if((f=pCr(p))>=0)f===0?pn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?pn(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(xP(p)){do p=t.input.charCodeAt(++t.position);while(xP(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!j1(p)&&p!==0)}for(;p!==0;){for(ERe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),j1(p)){l++;continue}if(t.lineIndent<c){i===Cmt?t.result+=Ul.repeat(`
`,o?1+l:l):i===hRe&&o&&(t.result+=`
`);break}for(n?xP(p)?(u=!0,t.result+=Ul.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=Ul.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Ul.repeat(`
`,l):t.result+=Ul.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!j1(p)&&p!==0;)p=t.input.charCodeAt(++t.position);vS(t,r,t.position,!1)}return!0}s(vCr,"readBlockScalar");function Imt(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pn(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!V0(a))));){if(c=!0,t.position++,vl(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,cM(t,e,Qmt,!1,!0),o.push(t.result),vl(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)pn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(Imt,"readBlockSequence");function xCr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},m=Object.create(null),h=null,g=null,A=null,y=!1,E=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pn(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&V0(n))b===63?(y&&(aM(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!0,i=!0):y?(y=!1,i=!0):pn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!cM(t,r,Omt,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);xP(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),V0(b)||pn(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(aM(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!1,i=!1,h=t.tag,g=t.result;else if(E)pn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(E)pn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,l=t.position),cM(t,e,Fse,!0,i)&&(y?g=t.result:A=t.result),y||(aM(t,p,m,h,g,A,a,c,l),h=g=A=null),vl(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)pn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&aM(t,p,m,h,g,null,a,c,l),E&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),E}s(xCr,"readBlockMapping");function ECr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&pn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):pn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!V0(a);)a===33&&(n?pn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Umt.test(i)||pn(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),uCr.test(o)&&pn(t,"tag suffix cannot contain flow indicator characters")}o&&!qmt.test(o)&&pn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{pn(t,"tag name is malformed: "+o)}return r?t.tag=o:xS.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:pn(t,'undeclared tag handle "'+i+'"'),!0}s(ECr,"readTagProperty");function bCr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&pn(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!V0(r)&&!sM(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&pn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(bCr,"readAnchorProperty");function ICr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!V0(n)&&!sM(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&pn(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),xS.call(t.anchorMap,r)||pn(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],vl(t,!0,-1),!0}s(ICr,"readAlias");function cM(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,m,h,g,A,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=Fse===r||Qmt===r,n&&vl(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;ECr(t)||bCr(t);)vl(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||Fse===r)&&(Lse===r||Omt===r?A=e:A=e+1,y=t.position-t.lineStart,l===1?c&&(Imt(t,y)||xCr(t,y,A))||CCr(t,A)?f=!0:(a&&vCr(t,A)||ACr(t,A)||yCr(t,A)?f=!0:ICr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&pn(t,"alias node should not have any properties")):gCr(t,A,Lse===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&Imt(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&pn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(xS.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||pn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&pn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):pn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(cM,"composeNode");function TCr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(vl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!V0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&pn(t,"directive name must not be less than one character in length");a!==0;){for(;xP(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!j1(a));break}if(j1(a))break;for(r=t.position;a!==0&&!V0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&ERe(t),xS.call(Emt,n)?Emt[n](t,n,i):Ose(t,'unknown document directive "'+n+'"')}if(vl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,vl(t,!0,-1)):o&&pn(t,"directives end mark is expected"),cM(t,t.lineIndent-1,Fse,!1,!0),vl(t,!0,-1),t.checkLineBreaks&&lCr.test(t.input.slice(e,t.position))&&Ose(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&qse(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,vl(t,!0,-1));return}if(t.position<t.length-1)pn(t,"end of the stream or a document separator is expected");else return}s(TCr,"readDocument");function jmt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new hCr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,pn(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)TCr(r);return r.documents}s(jmt,"loadDocuments");function wCr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=jmt(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(wCr,"loadAll$1");function SCr(t,e){var r=jmt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new G0("expected a single document in the stream, but found more")}}s(SCr,"load$1");var _Cr=wCr,RCr=SCr,Gmt={loadAll:_Cr,load:RCr},Vmt=Object.prototype.toString,zmt=Object.prototype.hasOwnProperty,IRe=65279,kCr=9,kq=10,PCr=13,DCr=32,BCr=33,NCr=34,ARe=35,MCr=37,LCr=38,FCr=39,OCr=42,Ymt=44,QCr=45,Qse=58,UCr=61,qCr=62,HCr=63,$Cr=64,Kmt=91,Jmt=93,WCr=96,Xmt=123,jCr=124,Zmt=125,Jd={};Jd[0]="\\0";Jd[7]="\\a";Jd[8]="\\b";Jd[9]="\\t";Jd[10]="\\n";Jd[11]="\\v";Jd[12]="\\f";Jd[13]="\\r";Jd[27]="\\e";Jd[34]='\\"';Jd[92]="\\\\";Jd[133]="\\N";Jd[160]="\\_";Jd[8232]="\\L";Jd[8233]="\\P";var GCr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],VCr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function zCr(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&zmt.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(zCr,"compileStyleMap");function YCr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new G0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ul.repeat("0",n-e.length)+e}s(YCr,"encodeHex");var KCr=1,Pq=2;function JCr(t){this.schema=t.schema||Fmt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ul.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=zCr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Pq:KCr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(JCr,"State");function Tmt(t,e){for(var r=Ul.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(Tmt,"indentString");function yRe(t,e){return`
`+Ul.repeat(" ",t.indent*e)}s(yRe,"generateNextLine");function XCr(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(XCr,"testImplicitResolving");function Use(t){return t===DCr||t===kCr}s(Use,"isWhitespace");function Dq(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==IRe||65536<=t&&t<=1114111}s(Dq,"isPrintable");function wmt(t){return Dq(t)&&t!==IRe&&t!==PCr&&t!==kq}s(wmt,"isNsCharOrWhitespace");function Smt(t,e,r){var n=wmt(t),i=n&&!Use(t);return(r?n:n&&t!==Ymt&&t!==Kmt&&t!==Jmt&&t!==Xmt&&t!==Zmt)&&t!==ARe&&!(e===Qse&&!i)||wmt(e)&&!Use(e)&&t===ARe||e===Qse&&i}s(Smt,"isPlainSafe");function ZCr(t){return Dq(t)&&t!==IRe&&!Use(t)&&t!==QCr&&t!==HCr&&t!==Qse&&t!==Ymt&&t!==Kmt&&t!==Jmt&&t!==Xmt&&t!==Zmt&&t!==ARe&&t!==LCr&&t!==OCr&&t!==BCr&&t!==jCr&&t!==UCr&&t!==qCr&&t!==FCr&&t!==NCr&&t!==MCr&&t!==$Cr&&t!==WCr}s(ZCr,"isPlainSafeFirst");function e1r(t){return!Use(t)&&t!==Qse}s(e1r,"isPlainSafeLast");function _q(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(_q,"codePointAt");function eht(t){var e=/^\n* /;return e.test(t)}s(eht,"needIndentIndicator");var tht=1,CRe=2,rht=3,nht=4,oM=5;function t1r(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,m=!1,h=n!==-1,g=-1,A=ZCr(_q(t,0))&&e1r(_q(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_q(t,l),!Dq(u))return oM;A=A&&Smt(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_q(t,l),u===kq)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!Dq(u))return oM;A=A&&Smt(u,f,c),f=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?A&&!a&&!i(t)?tht:o===Pq?oM:CRe:r>9&&eht(t)?oM:a?o===Pq?oM:CRe:m?nht:rht}s(t1r,"chooseScalarStyle");function r1r(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Pq?'""':"''";if(!t.noCompatMode&&(GCr.indexOf(e)!==-1||VCr.test(e)))return t.quotingType===Pq?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return XCr(t,u)}switch(s(l,"testAmbiguity"),t1r(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case tht:return e;case CRe:return"'"+e.replace(/'/g,"''")+"'";case rht:return"|"+_mt(e,t.indent)+Rmt(Tmt(e,o));case nht:return">"+_mt(e,t.indent)+Rmt(Tmt(n1r(e,a),o));case oM:return'"'+i1r(e)+'"';default:throw new G0("impossible error: invalid scalar style")}}()}s(r1r,"writeScalar");function _mt(t,e){var r=eht(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(_mt,"blockHeader");function Rmt(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Rmt,"dropEndingNewline");function n1r(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,kmt(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+kmt(l,e),i=o}return n}s(n1r,"foldString");function kmt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(kmt,"foldLine");function i1r(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=_q(t,i),n=Jd[r],!n&&Dq(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||YCr(r);return e}s(i1r,"escapeString");function o1r(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(DE(t,e,c,!1,!1)||typeof c>"u"&&DE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(o1r,"writeFlowSequence");function Pmt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(DE(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&DE(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=yRe(t,e)),t.dump&&kq===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(Pmt,"writeBlockSequence");function s1r(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),DE(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),DE(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(s1r,"writeFlowMapping");function a1r(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new G0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=yRe(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),DE(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&kq===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=yRe(t,e)),DE(t,e+1,f,!0,p)&&(t.dump&&kq===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(a1r,"writeBlockMapping");function Dmt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,Vmt.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(zmt.call(c.represent,l))n=c.represent[l](e,l);else throw new G0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(Dmt,"detectType");function DE(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Dmt(t,r,!1)||Dmt(t,r,!0);var c=Vmt.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,m;if(f&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(a1r(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(s1r(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Pmt(t,e-1,t.dump,i):Pmt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(o1r(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&r1r(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new G0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(DE,"writeNode");function c1r(t,e){var r=[],n=[],i,o;for(vRe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(c1r,"getDuplicateReferences");function vRe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)vRe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)vRe(t[n[i]],e,r)}s(vRe,"inspectNode");function l1r(t,e){e=e||{};var r=new JCr(e);r.noRefs||c1r(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),DE(r,0,n,!0,!0)?r.dump+`
`:""}s(l1r,"dump$1");var u1r=l1r,d1r={dump:u1r};function TRe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(TRe,"renamed");var CJi=Gmt.load,vJi=Gmt.loadAll,wRe=d1r.dump;var xJi=TRe("safeLoad","load"),EJi=TRe("safeLoadAll","loadAll"),bJi=TRe("safeDump","dump");var EP=Ne(um());var SRe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Iu=class{constructor(){this.dump=new wr(25);this.promptsDump=new wr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new SRe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function iht(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(iht,"filterConversationTurns");function dRe(t){return iht(t).getLastTurn()?.id}s(dRe,"getLastTurnId");async function fmt(t){let e=iht(t.conversation),r=dRe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Iu).getDump(r),o=m1r(i,e.turns);un.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await h1r(i,t.ctx);return EP.default`
        ${p1r(t.conversation,r)}
        ${f1r(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(fmt,"getConversationDump");function f1r(t){let e=t.get(mn);return EP.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(f1r,"getEditorInfoDumpMessage");function p1r(t,e){return EP.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(p1r,"getInfoDumpMessage");async function pmt(t,e,r){let n=t.ctx.get(Ql),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(eo).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&on(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${on(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=EP.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=EP.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${wRe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=EP.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(pmt,"getSkillsDump");function m1r(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:on(n.request.message)};return n.response&&(o.response=on(n.response.message)),o})};return wRe(r)}s(m1r,"toSimulationFormat");async function h1r(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(En).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();un.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(h1r,"fileDump");d();function _Re(t,e){let r=Ni(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(on(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(_Re,"countMessagesTokens");d();function oht(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(oht,"chatBasePrompt");d();d();d();d();d();function sht(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Mp(i.join(`
`)),1]),i=[],r.push([new Ut([o]),1])):r.push([new Ut([o]),1]),n=!n):n?i.push(o):r.push([new Ut([o]),.8]);return n&&(r.push([Mp(i.join(`
`)),1]),r.push([new Ut(["```"]),1])),new Ut(r)}s(sht,"fromMessage");function lM(t){let e=RRe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=aht(i.request,n+1),a=i.response&&i.response?.type!=="meta"?aht(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(sht(c))}return r.length>0?new Ut([[new Ut(["Consider the following conversation history:"]),1],[yS(r,"inverseLinear"),1]]):null}s(lM,"fromHistory");var g1r=5;function RRe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&on(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,g1r).reverse()}s(RRe,"filterTurns");function aht(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=on(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${on(t.message)}`}s(aht,"formatTurnMessage");d();d();d();var A1r=4,kRe={skillIds:[]},Hse=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Jo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(ud).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,f);return m.type!=="success"&&(en.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(Cl).inspectFetchResult(m),this.handleResult(m,f,on(a),o,u.toolConfig)}else return kRe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),kRe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,A1r);else return en.error(this.ctx,"Missing tool call in meta prompt response"),kRe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Bt(this.ctx,`${au(i)}.metaPrompt`,l,0),Bt(this.ctx,`${au(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var $se=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return me(e,r,"org.springframework.boot","Spring Boot"),me(e,r,"jakarta.jakartaee-api","Jakarta EE"),me(e,r,"javax:javaee-api","Java EE"),me(e,r,"org.apache.struts:struts2-core","Apache Struts"),me(e,r,"org.hibernate:hibernate-core","Hibernate"),me(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),me(e,r,"javax.faces:jsf-api","JSF"),me(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return me(e,r,"com.google.guava","Google Guava"),me(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),me(e,r,"org.apache.commons:commons-io","Apache Commons IO"),me(e,r,"joda-time:joda-time","Joda-Time"),me(e,r,"com.google.code.gson:gson","Google Gson"),me(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),me(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),me(e,r,"org.apache.commons:commons-net","Apache Commons Net"),me(e,r,"org.apache.poi:poi","Apache POI"),me(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),me(e,r,"junit:junit","JUnit"),me(e,r,"org.testng:testng","TestNG"),me(e,r,"org.spockframework:spock-core","Spock"),me(e,r,"io.cucumber:cucumber-java","Cucumber"),me(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return me(e,r,"org.mockito","Mockito"),me(e,r,"org.assertj","AssertJ"),me(e,r,"org.hamcrest","Hamcrest"),me(e,r,"org.powermock","PowerMock"),me(e,r,"org.jmock","JMock"),me(e,r,"org.easymock","EasyMock"),me(e,r,"org.jmockit:jmockit","JMockit"),me(e,r,"com.github.tomakehurst:wiremock","WireMock"),me(e,r,"org.dbunit:dbunit","DBUnit"),me(e,r,"com.icegreen:greenmail","GreenMail"),me(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),me(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),me(e,r,"io.rest-assured:rest-assured","Rest-Assured"),me(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),me(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},Wse=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"@types/node","Node.js"),me(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||me(e,r,"react","React"),me(e,r,"angular","Angular"),me(e,r,"vue","Vue.js"),me(e,r,"ember","Ember.js"),me(e,r,"backbone","Backbone.js"),me(e,r,"meteor","Meteor"),me(e,r,"polymer","Polymer"),me(e,r,"aurelia","Aurelia"),me(e,r,"knockout","Knockout.js"),me(e,r,"dojo","Dojo Toolkit"),me(e,r,"mithril","Mithril.js"),me(e,r,"marionette","Marionette.js"),me(e,r,"marko","Marko.js"),me(e,r,"svelte","Svelte"),me(e,r,"hyperapp","Hyperapp"),me(e,r,"inferno","Inferno.js"),me(e,r,"preact","Preact"),me(e,r,"riot","Riot.js"),me(e,r,"moon","Moon.js"),me(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return me(e,r,"lodash","Lodash"),me(e,r,"moment","Moment.js"),me(e,r,"axios","Axios"),me(e,r,"redux","Redux"),me(e,r,"recoil","Recoil"),me(e,r,"jquery","jQuery"),me(e,r,"d3","D3.js"),me(e,r,"underscore","Underscore.js"),me(e,r,"ramda","Ramda"),me(e,r,"immutable","Immutable.js"),me(e,r,"rxjs","RxJS"),me(e,r,"three","Three.js"),me(e,r,"socket.io","Socket.IO"),me(e,r,"express","Express.js"),me(e,r,"next","Next.js"),me(e,r,"puppeteer","Puppeteer"),me(e,r,"cheerio","Cheerio"),me(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"jest","Jest"),me(e,r,"mocha","Mocha"),me(e,r,"jasmine","Jasmine"),me(e,r,"ava","AVA"),me(e,r,"qunit","QUnit"),me(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return me(e,r,"chai","Chai"),me(e,r,"sinon","Sinon"),me(e,r,"enzyme","Enzyme"),me(e,r,"protractor","Protractor"),me(e,r,"supertest","Supertest"),me(e,r,"nock","Nock"),me(e,r,"cypress","Cypress"),me(e,r,"@testing-library/react","React Testing Library"),r}},jse=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"github.com/gorilla/mux","Gorilla Mux"),me(e,r,"github.com/go-chi/chi","Chi"),me(e,r,"github.com/gin-gonic/gin","Gin"),me(e,r,"github.com/labstack/echo","Echo"),me(e,r,"github.com/revel/revel","Revel"),me(e,r,"github.com/astaxie/beego","Beego"),me(e,r,"github.com/go-martini/martini","Martini"),me(e,r,"github.com/gobuffalo/buffalo","Buffalo"),me(e,r,"github.com/goji/goji","Goji"),me(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return me(e,r,"net/http","net/http"),me(e,r,"fmt","fmt"),me(e,r,"io","io"),me(e,r,"time","time"),me(e,r,"math","math"),me(e,r,"strconv","strconv"),me(e,r,"strings","strings"),me(e,r,"sort","sort"),me(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"github.com/onsi/ginkgo","ginkgo"),me(e,r,"github.com/onsi/gomega","gomega"),me(e,r,"github.com/stretchr/testify","testify"),me(e,r,"gopkg.in/check.v1","gocheck"),me(e,r,"github.com/franela/goblin","goblin"),me(e,r,"github.com/DATA-DOG/godog","godog"),me(e,r,"github.com/stesla/gospec","gospec"),me(e,r,"github.com/rjeczalik/gotest","gotest"),me(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return me(e,r,"github.com/stretchr/testify","Testify"),me(e,r,"github.com/smartystreets/goconvey","GoConvey"),me(e,r,"github.com/onsi/ginkgo","Ginkgo"),me(e,r,"github.com/golang/mock","GoMock"),me(e,r,"gopkg.in/check.v1","GoCheck"),me(e,r,"github.com/franela/goblin","Goblin"),me(e,r,"github.com/DATA-DOG/godog","GoDog"),me(e,r,"github.com/onsi/gomega","Gomega"),me(e,r,"github.com/stesla/gospec","GoSpec"),me(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},Gse=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flask","Flask"),me(e,r,"django","Django"),me(e,r,"pyramid","Pyramid"),me(e,r,"tornado","Tornado"),me(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return me(e,r,"requests","requests"),me(e,r,"numpy","numpy"),me(e,r,"pandas","pandas"),me(e,r,"scipy","scipy"),me(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"pytest","Pytest"),me(e,r,"unittest","Unittest"),me(e,r,"doctest","Doctest"),me(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mock","Mock"),me(e,r,"hypothesis","Hypothesis"),me(e,r,"behave","Behave"),me(e,r,"lettuce","Lettuce"),me(e,r,"testify","Testify"),me(e,r,"pyhamcrest","PyHamcrest"),r}},Vse=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"laravel/framework","Laravel"),me(e,r,"symfony/symfony","Symfony"),me(e,r,"slim/slim","Slim"),me(e,r,"cakephp/cakephp","CakePHP"),me(e,r,"yiisoft/yii2","Yii"),me(e,r,"zendframework/zendframework","Zend Framework"),me(e,r,"phalcon/cphalcon","Phalcon"),me(e,r,"bcosca/fatfree","Fat-Free"),me(e,r,"fuel/fuel","FuelPHP"),me(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return me(e,r,"monolog/monolog","Monolog"),me(e,r,"vlucas/phpdotenv","PHP dotenv"),me(e,r,"symfony/console","Symfony Console"),me(e,r,"guzzlehttp/guzzle","GuzzleHttp"),me(e,r,"ramsey/uuid","Ramsey UUID"),me(e,r,"doctrine/orm","Doctrine ORM"),me(e,r,"php-di/php-di","PHP-DI"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"symfony/finder","Symfony Finder"),me(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"phpunit/phpunit","PHPUnit"),me(e,r,"behat/behat","Behat"),me(e,r,"phpspec/phpspec","PHPSpec"),me(e,r,"codeception/codeception","Codeception"),me(e,r,"atoum/atoum","Atoum"),me(e,r,"pestphp/pest","PestPHP"),me(e,r,"kahlan/kahlan","Kahlan"),me(e,r,"peridot-php/peridot","Peridot"),me(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockery/mockery","Mockery"),me(e,r,"php-mock/php-mock","PHP-Mock"),me(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),me(e,r,"padraic/mockery","Padraic Mockery"),me(e,r,"phpspec/prophecy","PHPSpec Prophecy"),me(e,r,"phpunit/php-invoker","PHPUnit Invoker"),me(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),me(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},zse=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"Microsoft.NETCore.App",".NET Core"),me(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return me(e,r,"EntityFramework","Entity Framework"),me(e,r,"Newtonsoft.Json","Newtonsoft.Json"),me(e,r,"AutoMapper","AutoMapper"),me(e,r,"Serilog","Serilog"),me(e,r,"Dapper","Dapper"),me(e,r,"Polly","Polly"),me(e,r,"FluentValidation","FluentValidation"),me(e,r,"MediatR","MediatR"),me(e,r,"Hangfire","Hangfire"),me(e,r,"RabbitMQ.Client","RabbitMQ.Client"),me(e,r,"MassTransit","MassTransit"),me(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),me(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),me(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),me(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"xunit","xUnit"),me(e,r,"NUnit","NUnit"),me(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return me(e,r,"Moq","Moq"),me(e,r,"FluentAssertions","FluentAssertions"),me(e,r,"Bogus","Bogus"),me(e,r,"RestSharp","RestSharp"),me(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},Yse=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flutter","Flutter"),me(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return me(e,r,"dartx","dartx"),me(e,r,"provider","Provider"),me(e,r,"rxdart","RxDart"),me(e,r,"dio","Dio"),me(e,r,"json_serializable","json_serializable"),me(e,r,"freezed","Freezed"),me(e,r,"moor","Moor"),me(e,r,"hive","Hive"),me(e,r,"http","http"),me(e,r,"path","path"),me(e,r,"intl","intl"),me(e,r,"equatable","equatable"),me(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test","test"),me(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockito","mockito"),me(e,r,"bloc_test","bloc_test"),r}},Kse=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"rails","Rails"),me(e,r,"sinatra","Sinatra"),me(e,r,"hanami","Hanami"),me(e,r,"grape","Grape"),me(e,r,"roda","Roda"),me(e,r,"padrino","Padrino"),me(e,r,"cuba","Cuba"),me(e,r,"ramaze","Ramaze"),me(e,r,"nyara","Nyara"),me(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return me(e,r,"active_record","ActiveRecord"),me(e,r,"sequel","Sequel"),me(e,r,"rom","ROM"),me(e,r,"datamapper","DataMapper"),me(e,r,"mongoid","Mongoid"),me(e,r,"neo4j","Neo4j"),me(e,r,"redis","Redis"),me(e,r,"cassandra","Cassandra"),me(e,r,"couchrest","CouchRest"),me(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"rspec","RSpec"),me(e,r,"minitest","Minitest"),me(e,r,"cucumber","Cucumber"),me(e,r,"spinach","Spinach"),me(e,r,"turnip","Turnip"),me(e,r,"bacon","Bacon"),me(e,r,"shoulda","Shoulda"),me(e,r,"test-unit","Test::Unit"),me(e,r,"wrong","Wrong"),me(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return me(e,r,"factory_bot","FactoryBot"),me(e,r,"faker","Faker"),me(e,r,"ffaker","FFaker"),me(e,r,"fabrication","Fabrication"),me(e,r,"machinist","Machinist"),me(e,r,"mocha","Mocha"),me(e,r,"flexmock","FlexMock"),me(e,r,"rr","RR"),me(e,r,"bourne","Bourne"),me(e,r,"not_a_mock","NotAMock"),r}},Jse=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"tokio","tokio"),me(e,r,"async-std","async-std"),me(e,r,"hyper","hyper"),me(e,r,"actix-web","actix-web"),me(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return me(e,r,"serde","serde"),me(e,r,"regex","regex"),me(e,r,"rand","rand"),me(e,r,"log","log"),me(e,r,"lazy_static","lazy_static"),me(e,r,"libc","libc"),me(e,r,"futures","futures"),me(e,r,"rayon","rayon"),me(e,r,"reqwest","reqwest"),me(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test-case","test-case"),me(e,r,"proptest","proptest"),me(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockall","mockall"),me(e,r,"double","double"),me(e,r,"rstest","rstest"),me(e,r,"mockiato","mockiato"),me(e,r,"mock_derive","mock_derive"),me(e,r,"mocktopus","mocktopus"),me(e,r,"mockers","mockers"),me(e,r,"mock_it","mock_it"),r}},Xse=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function me(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(me,"addFromLibraries");var Zse=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function lht(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(lht,"determineProgrammingLanguage");var cht=[new $se,new Wse,new jse,new Gse,new Vse,new zse,new Yse,new Kse,new Jse,new Xse];function uht(t){let e=cht.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new Zse(t,cht);return new PRe(e)}s(uht,"getMetadataLookup");var PRe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var dht=x.Object({name:x.String(),version:x.Optional(x.String())}),fht=x.Object({language:x.Object({id:x.String(),name:x.String(),version:x.Optional(x.String())}),libraries:x.Array(dht),buildTools:x.Array(dht)}),DRe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Ut([`The user is working on a project with the following characteristics:
`]),1]);let n=uht(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Ut(r)}addProgrammingLanguage(e,r){let n=lht(e);this.turnContext.collectLabel(G1,n),r.push([new Ut([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(G1,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Ut([`${r}
${i}`]),1])}}},G1="project-metadata",eae=class{constructor(e){this._resolver=e;this.id=G1;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new DRe(e)}};d();var pht=Ne(require("path"));var BRe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Ut(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Ut(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=oa(n);if(await this.turnContext.collectFile(rae,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new U1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Ut([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Ut([`The referenced file \`${pht.basename(r.uri)}\` is content excluded.`]),1]]}},NRe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},rae="references",tae=class{constructor(){this.id=rae;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new NRe}processor(e){return new BRe(e)}};var bP=s(()=>[G1,py,rae,Yd],"mandatorySkills"),nae=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new Hse(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!bP().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!bP().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!bP().includes(u)))}return c.push(...bP()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(eo).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(eo).getSupportedSkills(r.id),a=e.get(Ql).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await W1(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...bP(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var iae=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))en.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):en.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var oae=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):en.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var ES=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new MRe(this),this.steps=new oae(e,r,n,e.get(pa)),this.collector=new LRe(r,n,e.get(pa)),this.agentToolCalls=new iae(e,r,n,e.get(pa))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return U0.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?U0.agent(e,this.turn.telemetryId):U0.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(pa).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}clearCopilotEditsSessionHeader(){this.copilotEditsSessionHeader=void 0}setCopilotEditsSessionHeader(e){this.copilotEditsSessionHeader=e}},sae=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},Bq=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},MRe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(eo).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Iu).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new sae(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(Ql).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Iu).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof sae||i instanceof Bq)throw i;en.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},LRe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function mht(t,e){let[r,n,i]=await C1r(t,e);return i.push(...E1r(t)),r.length>0||n.length>0?[new Ut([[new Ut(["Consider the additional context:"]),1],[yS(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(mht,"fromSkills");async function C1r(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await b1r(t,a.skillId,e?.languageId??""))continue;let[c,l]=await v1r(t,a.skillId);c&&(bP().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(C1r,"handleSkillsInReverse");async function v1r(t,e){let n=t.ctx.get(Ql).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await x1r(t,n,c,u,a,f):[void 0,await aae(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await aae(t,n,"unresolvable",void 0,a)]}catch(i){if(en.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof Bq)throw i;return[void 0,await aae(t,n,"failed")]}}s(v1r,"safelyProcessSkill");async function x1r(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Ut([[n,1]]):a=n,[[a,r?.value()||0],await aae(t,e,"resolved",a,i,o)]}s(x1r,"handleProcessedSkill");async function aae(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(Xa).getBestChatModelConfig(ch("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=Ni(u.tokenizer).tokenLength(f)}return t.ctx.get(Iu).addResolution(t.turn.id,l),l}s(aae,"determineResolution");function E1r(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(E1r,"handleIgnoredSkills");async function b1r(t,e,r){if(e!==G1&&e!==py)return!0;let n=t.ctx.get(Mt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===G1:e===py}s(b1r,"includeSkill");var hht=Ne(um());var IP=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=lM(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Ut(n),a]}async elidableSkills(e,r){return await mht(e,r)}async promptContent(e,r,n){let i,o={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},a=e.turn.extractContextFilesUri();e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?i=await JA.getInstructions(e.ctx,e.turn.workspaceFolders,o,a):e.turn.workspaceFolder&&(i=await JA.getInstructions(e.ctx,[e.turn.workspaceFolder],o,a));let c=tm(e.conversation.getLastTurn().request.message),l;i?typeof c=="string"?l=i+`

`+c:l=[{type:"text",text:i},...c]:l=c;let[u,f]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:u},{role:"system",content:this.suffix(e)},{role:"user",content:l}],f]}},cae=class extends IP{static{s(this,"PanelUserPromptStrategy")}suffix(e){return hht.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var ght=Ne(um());var lae=class extends IP{static{s(this,"InlineUserPromptStrategy")}suffix(e){return ght.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var FRe=Ne(um());var uae=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=lM(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return FRe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=Mlt(e.map(n=>n.id));return x.Object({skillIds:x.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:Dw(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:FRe.default`
                    This is the user's question: 
                    ${on(i).trim()} 
                `.trim()}],[]]}};d();var Aht=Ne(um());var dae=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:x.Object({suggestedTitle:x.String({description:"The suggested title for the conversation"}),followUp:x.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=Dw(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Aht.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=lM(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var I1r=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:x.Object({keywords:x.Array(x.Object({keyword:x.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:x.Array(x.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],fae=class extends IP{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=tm(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:I1r,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=Dw(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!_X(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!_X(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var ORe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function Nq(t,e,r){return new ORe(t,e,r)}s(Nq,"descriptor");var yht=[Nq("user",ch("user"),()=>new cae),Nq("inline",ch("inline"),()=>new lae),Nq("meta",ch("meta"),()=>new uae),Nq("suggestions",ch("suggestions"),()=>new dae),Nq("synonyms",ch("synonyms"),()=>new fae)],pae=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=yht.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return yht}};var vht=require("console");var ud=class{constructor(e,r=new pae){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Yi).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(Cl).inspectPrompt({type:r.promptType,prompt:Cht(c),tokens:l}),this.ctx.get(Iu).addPrompt(e.turn.id,Cht(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,vht.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:T1r(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,_Re(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),_Re(n,r)}safetyPrompt(e,r){let n=this.ctx.get(mn).getEditorInfo().readableName??this.ctx.get(mn).getEditorInfo().name,i=w1r(process.platform);return oht(this.ctx,n,r?.login,i,e)}};function T1r(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(T1r,"processResultOfElidableText");function Cht(t){return t.map(e=>on(e.content)).join(`

`)}s(Cht,"debugChatMessages");function w1r(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(w1r,"mapPlatformToOs");var uM=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Jo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(ud).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(en.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){en.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){en.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){en.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){en.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{en.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var dM=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(zYe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(Ac).workspaceCount})),await this.turnContext.ctx.get(Cl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:on(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:Uw.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},YYe(this.turnContext,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:on(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new uM(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return en.debug(this.turnContext.ctx,"Computed followup",c),en.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:Er(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return eKe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",KYe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var mae=x.Union([x.String(),x.Number()]),TP=x.Union([x.String(),x.Number()]),S1r=x.Union([x.Literal("included"),x.Literal("blocked"),x.Literal("notfound"),x.Literal("empty")]),hae=x.Object({uri:x.String(),position:x.Optional(tu)}),Mq=x.Object({type:x.Literal("file"),uri:x.String(),visibleRange:x.Optional(Pc),selection:x.Optional(Pc),status:x.Optional(S1r),range:x.Optional(Pc)}),_1r=x.Object({type:x.Literal("directory"),uri:x.String()}),fM=x.Union([Mq,_1r,Ept]),ug=x.Union([x.Literal("panel"),x.Literal("inline")]),R1r=x.Union([x.Object({type:x.Literal("text"),text:x.String()}),x.Object({type:x.Literal("image_url"),imageUrl:x.Object({url:x.String(),detail:x.Optional(x.Union([x.Literal("low"),x.Literal("high")]))})})]),QRe=x.Union([x.String(),x.Array(R1r)]),xht=x.Object({request:QRe,response:x.Optional(x.String()),agentSlug:x.Optional(x.String()),turnId:x.Optional(TP),model:x.Optional(x.String())});function gae(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(gae,"convertToMessageContent");function Aae(t,e){if(t=tm(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(Aae,"appendToMessage");var yae=x.Union([x.Literal("Ask"),x.Literal("Agent")]),k1r=x.Object({type:x.String(),description:x.String()}),Eht=x.Object({name:x.String(),description:x.String(),inputSchema:x.Optional(x.Object({type:x.String(),properties:x.Record(x.String(),k1r),required:x.Array(x.String())})),confirmationMessages:x.Optional(x.Object({title:x.String(),message:x.String()}))}),pM=x.Object({uri:x.String(),name:x.String()});var URe="generate-response",Cae=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},Lq=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(pa),this.chatFetcher=this.chatFetcher??new Ja(r.ctx),this.postProcessor=new dM(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof Cae?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await Fc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(Cl).inspectPrompt(c),await n.steps.start(URe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:tm(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return Er()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return RRe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:tm(r.request.message)}),r.response&&r.response.type==="model"){let i=xpt(r.response.references);n.push({role:"assistant",content:tm(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await kpt(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new mS((p,m,h,g,A)=>{let y=A?{...A,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(E=>({message:E.message,severity:"warning"})),confirmationRequest:y}),this.turn.response?(this.turn.response.message=Aae(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),y&&(this.turn.confirmationRequest=y)}),l=await this.turnContext.ctx.get(Br).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:on(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),on(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Cae("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return a7(this.conversation,"conversationPanel",on(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(URe,e.error.message):await r.steps.finish(URe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var Fq=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new Lq(this,e)}},vae=class extends Fq{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new Lq(this,e)}};d();var P1r="github",hy=class{static{s(this,"RemoteAgentRegistry")}},xae=class extends hy{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await aR(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(un.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||un.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||un.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==P1r).map(i=>new Fq(i.id,i.slug,i.name,i.description,i.avatar_url))}};var qRe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[iM]}};async function W1(t){let e=[];return e.push(new vae),e.push(...await t.get(hy).agents()),e.push(new qRe),e}s(W1,"getAgents");var D1r=x.Object({});async function B1r(t,e,r){return[(await W1(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(B1r,"handleConversationAgentsChecked");var bht=Ze(D1r,B1r);d();d();var Oq=Ne(cl());function N1r(t,e,r){let n=Gr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(N1r,"telemetryVersionMismatch");async function gy(t,e,r){let i=t.get(Cr).getTextDocumentUnsafe(e);if(!i)throw new Oq.ResponseError(tr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await Tx(t,e,i.getText());if(o.status==="invalid")throw t.get(So).setInactive(o.reason),new Oq.ResponseError(tr.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(N1r(t,i,e.version),Tu.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new Oq.ResponseError(tr.ContentModified,"Document Version Mismatch");return i}s(gy,"getTextDocument");async function V1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await gy(t,n,r)}catch(i){if(i instanceof Oq.ResponseError&&i.code===tr.CopilotNotAvailable)return;throw i}}s(V1,"getTextDocumentIfAvailable");var M1r=x.Union([x.Literal("keyboard"),x.Literal("toolbar")]),L1r=x.Object({turnId:TP,codeBlockIndex:x.Number(),source:M1r,copiedCharacters:x.Number(),totalCharacters:x.Number(),copiedText:x.String(),doc:x.Optional(hae),textDocument:x.Optional(c0),position:x.Optional(tu),conversationSource:x.Optional(ug)});async function F1r(t,e,r){let n=await V1(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=HT(r.conversationSource),c=t.get(eo).findByTurnId(r.turnId),l=await Fc(t,c,{languageId:n?.detectedLanguageId??""});return _f(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${au(a)}.acceptedCopy`,l),["OK",null]}s(F1r,"handleConversationCodeCopyChecked");var Iht=Ze(L1r,F1r);d();var O1r=x.Union([x.Literal("keyboard"),x.Literal("toolbar"),x.Literal("diff")]),Q1r=x.Object({turnId:TP,source:O1r,codeBlockIndex:x.Number(),acceptedLength:x.Optional(x.Number()),totalCharacters:x.Number(),newFile:x.Optional(x.Boolean()),doc:x.Optional(hae),textDocument:x.Optional(c0),position:x.Optional(tu),conversationSource:x.Optional(ug)});async function U1r(t,e,r){let n=await V1(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=HT(r.conversationSource),c=t.get(eo).findByTurnId(r.turnId),l=await Fc(t,c,{languageId:n?.detectedLanguageId??""});return _f(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${au(a)}.acceptedInsert`,l),["OK",null]}s(U1r,"handleConversationCodeInsertChecked");var Tht=Ze(Q1r,U1r);d();d();var Eae=x.Array(Pc);function bae(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(bae,"resolveAsActiveEditor");d();var wht=Ne(cl());var Iae=new wht.ProgressType,HRe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(Dr).connection.sendProgress(Iae,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(Dr).connection.sendProgress(Iae,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(Dr).connection.sendProgress(Iae,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(Dr).connection.sendProgress(Iae,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function mM(t){return new HRe(t.workDoneToken)}s(mM,"createProgressHandler");d();d();d();var dd=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var BE=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var hM=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var Sht="```",Qq=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,q1r=String.raw`${Sht}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Sht}`,H1r=new RegExp(Qq+`
`+q1r,"gs"),$Re=["replace","delete"];function WRe(t,e){let r=t.matchAll(H1r),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!$Re.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((A,y)=>{f[y]=A.slice(p.length)});let m={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},h=jRe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(WRe,"extractEditsFromTaggedCodeblocks");function jRe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(jRe,"applyEditsToDocument");d();d();var z1=Ne(Hc());function GRe(t){return{isCancellationRequested:t.isCancellationRequested,onCancellationRequested:s(e=>{let r=t.onCancellationRequested(e);return{dispose:s(()=>r.dispose(),"dispose")}},"onCancellationRequested")}}s(GRe,"adaptCancellationToken");function _ht(t){return{report:s(e=>{"value"in e&&typeof e.value=="string"?t({text:e.value}):t({})},"report")}}s(_ht,"adaptProgressCallback");function Rht(t){return{modelMaxPromptTokens:t.maxRequestTokens}}s(Rht,"createEndpointInfo");function kht(t){let e={role:$1r(t.role),content:W1r(t.content)};return t.role===z1.Raw.ChatRole.Assistant&&"toolCalls"in t&&t.toolCalls&&(e.tool_calls=t.toolCalls.map(r=>({id:r.id,type:r.type,function:r.function,approxNumTokens:0}))),t.role===z1.Raw.ChatRole.Tool&&"toolCallId"in t&&t.toolCallId&&(e.tool_call_id=t.toolCallId),Object.entries(t).forEach(([r,n])=>{["role","content","toolCalls","toolCallId"].includes(r)||(e[r]=n)}),e}s(kht,"convertToCopilotChatMessage");function $1r(t){switch(t){case z1.Raw.ChatRole.System:return"system";case z1.Raw.ChatRole.User:return"user";case z1.Raw.ChatRole.Assistant:return"assistant";case z1.Raw.ChatRole.Tool:return"tool";default:return"user"}}s($1r,"convertRole");function W1r(t){return typeof t=="string"?t:Array.isArray(t)?t.length===1&&t[0].type===z1.Raw.ChatCompletionContentPartKind.Text?t[0].text:t.map(e=>e.type===z1.Raw.ChatCompletionContentPartKind.Text?{type:"text",text:e.text}:e.type===z1.Raw.ChatCompletionContentPartKind.Image?{type:"image_url",image_url:e.imageUrl}:{type:"text",text:String(e.type)}):String(t)}s(W1r,"convertContent");d();var NE=Ne(Hc());var Tae=class extends NE.PromptRenderer{constructor(r,n,i,o,a){super(i,r,n,o);this.options=a}static{s(this,"InternalPromptRenderer")}async renderWithOptions(r,n,i){let o=await super.render(r,n);return{...this.options,...i}.collapseSystemMessages&&this.collapseConsecutiveSystemMessages(o.messages),o}collapseConsecutiveSystemMessages(r){let n=[],i=null;for(let o of r)if(o.role===NE.Raw.ChatRole.System&&i?.role===NE.Raw.ChatRole.System){let a=i.content.at(-1),c=o.content.at(0);a&&c&&a.type===NE.Raw.ChatCompletionContentPartKind.Text&&c.type===NE.Raw.ChatCompletionContentPartKind.Text?(a.text=a.text.trimEnd()+`
`+c.text,i.content=i.content.concat(o.content.slice(1))):(i.content.push({type:NE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),i.content=i.content.concat(o.content))}else n.push(o),i=o.role===NE.Raw.ChatRole.System?o:null;r.length=0,r.push(...n)}};d();d();function Pht(t){if(!t.startsWith("data:image/"))throw new Error("Could not read image: invalid base64 image string");let e=t.split(",")[1];switch(Y1r(e)){case"image/png":return j1r(e);case"image/gif":return G1r(e);case"image/jpeg":case"image/jpg":return V1r(e);case"image/webp":return z1r(e);default:throw new Error("Unsupported image format")}}s(Pht,"getImageDimensions");function j1r(t){let e=atob(t.slice(0,50)).slice(16,24),r=Uint8Array.from(e,i=>i.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint32(0,!1),height:n.getUint32(4,!1)}}s(j1r,"getPngDimensions");function G1r(t){let e=atob(t.slice(0,50)),r=Uint8Array.from(e,i=>i.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint16(6,!0),height:n.getUint16(8,!0)}}s(G1r,"getGifDimensions");function V1r(t){let e=atob(t),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=r.length,i=2;for(;i<n;){let o=r[i]<<8|r[i+1],a=r[i+2]<<8|r[i+3];if(o>=65472&&o<=65474){let c=new DataView(r.buffer,i+5,4);return{height:c.getUint16(0,!1),width:c.getUint16(2,!1)}}i+=2+a}throw new Error("JPEG dimensions not found")}s(V1r,"getJpegDimensions");function z1r(t){let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);if(e.slice(0,4)!=="RIFF"||e.slice(8,12)!=="WEBP")throw new Error("Not a valid WebP image.");let n=e.slice(12,16);if(n==="VP8 "){let i=(r[26]|r[27]<<8)&16383,o=(r[28]|r[29]<<8)&16383;return{width:i,height:o}}else if(n==="VP8L"){let i=(r[21]|r[22]<<8)&16383,o=(r[23]|r[24]<<8)&16383;return{width:i,height:o}}else if(n==="VP8X"){let i=((r[24]|r[25]<<8|r[26]<<16)&16777215)+1,o=((r[27]|r[28]<<8|r[29]<<16)&16777215)+1;return{width:i,height:o}}else throw new Error("Unsupported WebP format.")}s(z1r,"getWebPDimensions");function Y1r(t){if(!t||t.length<4)return;let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return e[r]}s(Y1r,"getMimeType");var wP=Ne(Hc());var K1r=3,J1r=1,VRe=class{constructor(e,r){this.tokenizer=e;this.mode=wP.OutputMode.Raw;this._cache=new wr(5e3);this.baseTokensPerMessage=r.baseTokensPerMessage||K1r,this.baseTokensPerName=r.baseTokensPerName||J1r}static{s(this,"PromptTsxTokenizer")}tokenLength(e){if(typeof e=="string")return this._textTokenLength(e);switch(e.type){case wP.Raw.ChatCompletionContentPartKind.Text:return this._textTokenLength(e.text);case wP.Raw.ChatCompletionContentPartKind.Opaque:return e.tokenUsage||0;case wP.Raw.ChatCompletionContentPartKind.Image:return this.calculateImageTokenCost(e.imageUrl.url,e.imageUrl.detail);case wP.Raw.ChatCompletionContentPartKind.CacheBreakpoint:return 0}}_textTokenLength(e){if(!e)return 0;let r=this._cache.get(e);return r===void 0&&(r=this.tokenizer.tokenLength(e),this._cache.set(e,r)),r}countMessageTokens(e){let r=this.baseTokensPerMessage;typeof e.content=="string"?r+=this.tokenLength(e.content):Array.isArray(e.content)&&(r+=e.content.reduce((o,a)=>o+this.tokenLength(a),0));let n=e;n.name&&(r+=this.baseTokensPerName,r+=this.tokenLength(n.name));let i=e;if(i.tool_calls){let o=i.tool_calls,a=0;for(let c of o)a+=this.countObjectTokens({id:c.id,type:c.type,function:c.function});r+=Math.floor(a*1.5)}return r}countMessagesTokens(e){let r=this.baseTokensPerMessage;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){if(!e||e.length===0)return 0;let n=16,i=8;for(let o of e)n+=i,n+=this.countObjectTokens({name:o.name,description:o.description,parameters:o.inputSchema});return Math.floor(n*1.1)}countObjectTokens(e){let r=0;for(let[n,i]of Object.entries(e||{}))if(i){if(r+=this.tokenLength(n),typeof i=="string")r+=this.tokenLength(i);else if(i&&typeof i=="object"){let o=i;if("type"in o&&o.type==="text"&&"text"in o&&typeof o.text=="string")r+=this.tokenLength(o.text);else if("type"in o&&o.type==="image_url"&&"image_url"in o){let a=o.image_url;a.url&&a.url.startsWith("data")&&(r+=this.calculateImageTokenCost(a.url,a.detail))}else r+=this.countObjectTokens(o)}}return r}calculateImageTokenCost(e,r){let{width:n,height:i}=Pht(e);if(r==="low")return 85;if(n>2048||i>2048){let c=2048/Math.max(n,i);n=Math.round(n*c),i=Math.round(i*c)}let o=768/Math.min(n,i);return n=Math.round(n*o),i=Math.round(i*o),Math.ceil(n/512)*Math.ceil(i/512)*170+85}};function Dht(t){let e=Ni(t.tokenizer);return new VRe(e,t)}s(Dht,"createPromptTsxTokenizer");var Uq=class t{static{s(this,"TsxPromptRenderer")}constructor(e,r,n,i={}){let o=Rht(n),a=Dht(n);this._internalRenderer=new Tae(e,r,o,a,i)}static create(e,r,n,i={}){return new t(e,r,n,i)}async renderPrompt(e,r,n){let i=e?_ht(e):void 0,o=r?GRe(r):void 0,a=await this._internalRenderer.renderWithOptions(i,o,n);return{messages:a.messages.map(kht),tokenCount:a.tokenCount,hasIgnoredFiles:a.hasIgnoredFiles}}async countTokens(e){let r=e?GRe(e):void 0;return(await this._internalRenderer.renderWithOptions(void 0,r)).tokenCount}};d();d();var Mht=Ne(Hc());var fm=class extends Mht.PromptElement{static{s(this,"CopilotPromptElement")}constructor(e){super(e)}async prepare(e,r,n){if(!this.prepareCopilot)return;let i=r?Bht(r):void 0,o=n?Nht(n):void 0;return await this.prepareCopilot(e,i,o)}render(e,r,n,i){let o=n?Bht(n):void 0,a=i?Nht(i):void 0;return this.renderCopilot(e,r,o,a)}};function Bht(t){return e=>{let r=e.text||"";if(t?.report&&r){let n={value:r};t.report(n)}}}s(Bht,"adaptProgressCallbackFromVSCode");function Nht(t){return{get isCancellationRequested(){return t?.isCancellationRequested??!1},onCancellationRequested:s((e,r)=>{let n=t?.onCancellationRequested(e,r);return{dispose:s(()=>{n?.dispose()},"dispose")}},"onCancellationRequested")}}s(Nht,"adaptCancellationTokenFromVSCode");d();d();var xl=Ne(Hc());function X1r(t){let e=t.filter(n=>n.type==="image_url"),r=t.filter(n=>n.type==="text").map(n=>n.text).join("");return{imageUrls:e,textContent:r}}s(X1r,"separateTextAndImages");function Z1r(t){return t.map(e=>vscpp(xl.Image,{src:e.image_url.url,detail:e.image_url.detail}))}s(Z1r,"createImageElements");function wae(t){let{imageUrls:e,textContent:r}=X1r(t);return e.length===0?[vscpp(vscppf,null,r)]:[vscpp(xl.TextChunk,null,vscpp(vscppf,null,r)),...Z1r(e)]}s(wae,"renderMixedContent");function zRe(t){return t==null?[]:t.map(r=>({id:r.id||"",type:"function",function:{name:r.function.name,arguments:typeof r.function.arguments=="string"?r.function.arguments:JSON.stringify(r.function.arguments)},approxNumTokens:r.approxNumTokens}))}s(zRe,"convertToPromptTsxToolCall");function Sae(t){switch(t.role){case"assistant":return evr(t);case"tool":return tvr(t);case"user":return rvr(t);case"system":return nvr(t);case"function":throw new Error("ChatRole.Function is not supported in prompt-tsx conversion. Use ChatRole.Tool instead.");default:throw new Error(`Unsupported chat role: ${String(t.role)}`)}}s(Sae,"convertChatMessageToPromptTsx");function evr(t){return typeof t.content=="string"?vscpp(xl.AssistantMessage,{toolCalls:zRe(t.tool_calls)},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(xl.AssistantMessage,{toolCalls:zRe(t.tool_calls)},wae(t.content)):vscpp(xl.AssistantMessage,{toolCalls:zRe(t.tool_calls)},vscpp(vscppf,null,JSON.stringify(t.content)))}s(evr,"renderAssistantMessage");function tvr(t){return typeof t.content=="string"?vscpp(xl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(xl.ToolMessage,{toolCallId:t.tool_call_id||""},wae(t.content)):vscpp(xl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,JSON.stringify(t.content)))}s(tvr,"renderToolMessage");function rvr(t){return typeof t.content=="string"?vscpp(xl.UserMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(xl.UserMessage,null,wae(t.content)):vscpp(xl.UserMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}s(rvr,"renderUserMessage");function nvr(t){return typeof t.content=="string"?vscpp(xl.SystemMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(xl.SystemMessage,null,wae(t.content)):vscpp(xl.SystemMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}s(nvr,"renderSystemMessage");var ivr=new Ct("conversationHistoryPrompt"),_ae=class extends fm{static{s(this,"ConversationHistoryPrompt")}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:tm(n.request.message)}),n.response){let i=rne(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.some(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):ivr.warn(this.props.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);return{...e,tool_calls:i}}return e}renderCopilot(){let e=this.createChatMessagesFromHistory(this.props.historyTurns);return vscpp(vscppf,null,e.map((r,n)=>Sae(r)))}};d();d();var SP=Ne(Hc());var Y1=class t extends SP.PromptElement{static{s(this,"Tag")}static{this._regex=/^[a-zA-Z_][\w.-]*$/}render(){let{name:e,children:r,attrs:n={}}=this.props;if(!t._regex.test(e))throw new Error(`Invalid tag name: ${this.props.name}. Tag names must start with a letter or underscore, and can contain letters, digits, underscores, hyphens, or periods.`);let i="";for(let[a,c]of Object.entries(n))c!==void 0&&(i+=` ${a}=${JSON.stringify(c)}`);if(r?.length===0)return i?vscpp(SP.TextChunk,null,vscpp(vscppf,null,`<${e}${i} />`)):void 0;let o=(0,SP.useKeepWith)();return vscpp(vscppf,null,vscpp(o,null,vscpp(vscppf,null,`<${e}${i}>
`)),vscpp(YRe,{priority:1,flexGrow:1},r,vscpp("br",null)),vscpp(o,null,vscpp(vscppf,null,`</${e}>`)),vscpp("br",null))}},YRe=class extends SP.PromptElement{static{s(this,"TagInner")}render(){return vscpp(vscppf,null,this.props.children)}};var Lht=Ne(Hc());var Rae=class extends fm{static{s(this,"DefaultAgentPrompt")}renderKeepGoingReminder(){return this.props.modelConfiguration.modelFamily===Wr.Gpt41||this.props.modelConfiguration.modelFamily===Wr.Gpt5?vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.",vscpp("br",null),"Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.",vscpp("br",null),"You MUST iterate and keep going until the problem is solved.",vscpp("br",null),"You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.",vscpp("br",null),"Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.",vscpp("br",null),"Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.",vscpp("br",null),"You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.",vscpp("br",null),"You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input.",vscpp("br",null)):vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue.",vscpp("br",null),"You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.",vscpp("br",null))}renderCopilot(){let e=this.props.modelConfiguration.modelFamily===Wr.Gpt5,r=this.props.toolsService.getToolMapForModel().get("semantic_search")!==void 0,n=this.props.toolsService.getToolMapForModel().get("get_errors")!==void 0,i=this.props.toolsService.getToolMapForModel().get("read_file")!==void 0,o=this.props.toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,a=this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,c=this.props.toolsService.getToolMapForModel().get("update_user_preferences")!==void 0;return vscpp(Lht.SystemMessage,null,vscpp(Y1,{name:"instructions"},"You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks.",vscpp("br",null),"The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question.",vscpp("br",null),this.renderKeepGoingReminder(),e&&vscpp(vscppf,null,`Communication style: Use a friendly, confident, and conversational tone. Prefer short sentences, contractions, and concrete language. Keep it skimmable and encouraging, not formal or robotic. A tiny touch of personality is okay; avoid overusing exclamations or emoji. Avoid empty filler like "Sounds good!", "Great!", "Okay, I will\u2026", or apologies when not needed\u2014open with a purposeful preamble about what you're doing next.`,vscpp("br",null)),"If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes.",vscpp("br",null),"If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept.",vscpp("br",null),"If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context.",vscpp("br",null),e&&vscpp(vscppf,null,"Mission and stop criteria: You are responsible for completing the user's task end-to-end. Continue working until the goal is satisfied or you are truly blocked by missing information. Do not defer actions back to the user if you can execute them yourself with available tools. Only ask a clarifying question when essential to proceed.",vscpp("br",null),"Preamble and progress: Start with a brief, friendly preamble that explicitly acknowledges the user's task and states what you're about to do next. Make it engaging and tailored to the repo/task; keep it to a single sentence. If the user has not asked for anything actionable and it's only a greeting or small talk, respond warmly and invite them to share what they'd like to do\u2014do not create a checklist or run tools yet. Use the preamble only once per task; if the previous assistant message already included a preamble for this task, skip it this turn. Do not re-introduce your plan after tool calls or after creating files\u2014give a concise status and continue with the next concrete action. For multi-step tasks, keep a lightweight checklist and weave progress updates into your narration. Batch independent, read-only operations together; after a batch, share a concise progress note and what's next. If you say you will do something, execute it in the same turn using tools.",vscpp("br",null),vscpp(Y1,{name:"requirementsUnderstanding"},vscpp(vscppf,null,"Always read the user's request in full before acting. Extract the explicit requirements and any reasonable implicit requirements.",vscpp("br",null),"If a requirement cannot be completed with available tools, state why briefly and propose a viable alternative or follow-up."))),r&&vscpp(vscppf,null,"Prefer using the ","semantic_search"," tool to search for context unless you know the exact string or filename pattern you're searching for.",vscpp("br",null)),"Don't make assumptions about the situation-gather context first, then perform the task or answer the question.",vscpp("br",null),e&&vscpp(vscppf,null,"Under-specification policy: If details are missing, infer 1-2 reasonable assumptions from the repository conventions and proceed. Note assumptions briefly and continue; ask only when truly blocked.",vscpp("br",null),"Proactive extras: After satisfying the explicit ask, implement small, low-risk adjacent improvements that clearly add value (tests, types, docs, wiring). If a follow-up is larger or risky, list it as next steps.",vscpp("br",null),"Anti-laziness: Avoid generic restatements and high-level advice. Prefer concrete edits, running tools, and verifying outcomes over suggesting what the user should do.",vscpp("br",null),vscpp(Y1,{name:"engineeringMindsetHints"},vscpp(vscppf,null,"Think like a software engineer\u2014when relevant, prefer to:",vscpp("br",null),'- Outline a tiny "contract" in 2-4 bullets (inputs/outputs, data shapes, error modes, success criteria).',vscpp("br",null),"- List 3-5 likely edge cases (empty/null, large/slow, auth/permission, concurrency/timeouts) and ensure the plan covers them.",vscpp("br",null),"- Write or update minimal reusable tests first (happy path + 1-2 edge/boundary) in the project's framework; then implement until green.")),vscpp(Y1,{name:"qualityGatesHints"},vscpp(vscppf,null,'Before wrapping up, prefer a quick "quality gates" triage: Build, Lint/Typecheck, Unit tests, and a small smoke test. Ensure there are no syntax/type errors across the project; fix them or clearly call out any intentionally deferred ones. Report deltas only (PASS/FAIL). Include a brief "requirements coverage" line mapping each requirement to its status (Done/Deferred + reason).')),vscpp(Y1,{name:"responseModeHints"},vscpp(vscppf,null,"Choose response mode based on task complexity. Prefer a lightweight answer when it's a greeting, small talk, or a trivial/direct Q&A that doesn't require tools or edits: keep it short, skip todo lists and progress checkpoints, and avoid tool calls unless necessary. Use the full engineering workflow (checklist, phases, checkpoints) when the task is multi-step, requires edits/builds/tests, or has ambiguity/unknowns. Escalate from light to full only when needed; if you escalate, say so briefly and continue.")),"Validation and green-before-done: After any substantive change, run the relevant build/tests/linters automatically. For runnable code that you created or edited, immediately run a test to validate the code works (fast, minimal input) yourself using terminal tools. Prefer automated code-based tests where possible. Then provide optional fenced code blocks with commands for larger or platform-specific runs. Don't end a turn with a broken build if you can fix it. If failures occur, iterate up to three targeted fixes; if still failing, summarize the root cause, options, and exact failing output. For non-critical checks (e.g., a flaky health check), retry briefly (2-3 attempts with short backoff) and then proceed with the next step, noting the flake.",vscpp("br",null),"Never invent file paths, APIs, or commands. Verify with tools (search/read/list) before acting when uncertain.",vscpp("br",null),"Security and side-effects: Do not exfiltrate secrets or make network calls unless explicitly required by the task. Prefer local actions first.",vscpp("br",null),"Reproducibility and dependencies: Follow the project's package manager and configuration; prefer minimal, pinned, widely-used libraries and update manifests or lockfiles appropriately. Prefer adding or updating tests when you change public behavior.",vscpp("br",null),'Build characterization: Before stating that a project "has no build" or requires a specific build step, verify by checking the provided context or quickly looking for common build config files (for example: `package.json`, `pnpm-lock.yaml`, `requirements.txt`, `pyproject.toml`, `setup.py`, `Makefile`, `Dockerfile`, `build.gradle`, `pom.xml`). If uncertain, say what you know based on the available evidence and proceed with minimal setup instructions; note that you can adapt if additional build configs exist.',vscpp("br",null),"Deliverables for non-trivial code generation: Produce a complete, runnable solution, not just a snippet. Create the necessary source files plus a small runner or test/benchmark harness when relevant, a minimal `README.md` with usage and troubleshooting, and a dependency manifest (for example, `package.json`, `requirements.txt`, `pyproject.toml`) updated or added as appropriate. If you intentionally choose not to create one of these artifacts, briefly say why.",vscpp("br",null)),"Think creatively and explore the workspace in order to make a complete fix.",vscpp("br",null),"Don't repeat yourself after a tool call, pick up where you left off.",vscpp("br",null),"NEVER print out a codeblock with file changes unless the user asked for it. Use the"," ","insert_edit_into_file"," ",a?"or replace_string_in_file":""," tool instead.",vscpp("br",null),o&&vscpp(vscppf,null,"NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the ","run_in_terminal"," tool instead.",vscpp("br",null)),"You don't need to read a file if it's already provided in context."),vscpp(Y1,{name:"toolUseInstructions"},"When using a tool, follow the json schema very carefully and make sure to include ALL required properties.",vscpp("br",null),"Always output valid JSON when using a tool.",vscpp("br",null),"If a tool exists to do a task, use the tool instead of asking the user to manually take an action.",vscpp("br",null),"If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission.",vscpp("br",null),"Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs.",vscpp("br",null),"Never say the name of a tool to a user.",vscpp("br",null),"For example, instead of saying that you'll use the ","run_in_terminal",` tool, say "I'll run the command in a terminal".`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel.",vscpp("br",null),e&&vscpp(vscppf,null,"Before notable tool batches, briefly tell the user what you're about to do and why. After the results return, briefly interpret them and state what you'll do next. Don't narrate every trivial call.",vscpp("br",null),`You MUST preface each tool call batch with a one-sentence "why/what/outcome" preamble (why you're doing it, what you'll run, expected outcome). If you make many tool calls in a row, you MUST checkpoint progress after roughly every 3-5 calls: what you ran, key results, and what you'll do next. If you create or edit more than ~3 files in a burst, checkpoint immediately with a compact bullet summary.`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel. Parallelize read-only, independent operations only; do not parallelize edits or dependent steps.",vscpp("br",null),"Context acquisition: Trace key symbols to their definitions and usages. Read sufficiently large, meaningful chunks to avoid missing context. Prefer semantic or codebase search when you don't know the exact string; prefer exact search or direct reads when you do. Avoid redundant reads when the content is already attached and sufficient.",vscpp("br",null),"Verification preference: For service or API checks, prefer a tiny code-based test (unit/integration or a short script) over shell probes. Use shell probes (e.g., curl) only as optional documentation or quick one-off sanity checks, and mark them as optional.",vscpp("br",null)),i&&vscpp(vscppf,null,"When using the ","read_file"," tool, prefer reading a large section over calling the"," ","read_file"," tool many times in sequence. You can also think of all the pieces you may be interested in and read them in parallel. Read large enough context to ensure you get what you need.",vscpp("br",null)),"If ","semantic_search"," returns the full contents of the text files in the workspace, you have all the workspace context.",vscpp("br",null),o&&vscpp(vscppf,null,"Don't call the ","run_in_terminal"," tool multiple times in parallel. Instead, run one command and wait for the output before running the next command.",vscpp("br",null)),c&&vscpp(vscppf,null,"After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the"," ","update_user_preferences"," tool to save their preferences.",vscpp("br",null))),vscpp(Y1,{name:"editFileInstructions"},a?vscpp(vscppf,null,"Before you edit an existing file, make sure you either already have it in the provided context, or read it with the ","read_file"," tool, so that you can make proper changes.",vscpp("br",null),"Use the ","replace_string_in_file"," tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to insert code into a file.",vscpp("br",null),"When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," or"," ","replace_string_in_file"," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ","replace_string_in_file"," or ","insert_edit_into_file"," tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)):vscpp(vscppf,null,"Don't try to edit an existing file without reading it first, so you can make changes properly.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to edit files. When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," ",a?"or replace_string_in_file":""," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ",a?"replace_string_in_file or":""," ","insert_edit_into_file"," tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)),"Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ",o?'with "npm install" or ':"",'creating a "requirements.txt".',vscpp("br",null),n&&vscpp(vscppf,null,"After editing a file, you MUST call ","get_errors"," to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed.",vscpp("br",null)),"The ","insert_edit_into_file"," tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints.",vscpp("br",null),"When you use the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:",vscpp("br",null),"// ",hl,vscpp("br",null),"changed code",vscpp("br",null),"// ",hl,vscpp("br",null),"changed code",vscpp("br",null),"// ",hl,vscpp("br",null),vscpp("br",null),"Here is an example of how you should format an edit to an existing Person class:",vscpp("br",null),["class Person {",`	// ${hl}`,"	age: number;",`	// ${hl}`,"	getAge() {","		return this.age;","	}","}"].join(`
`)))}};d();var Pae=Ne(Hc());var kae=class extends Pae.PromptElement{static{s(this,"SystemInstructionsPrompt")}render(){return vscpp(Pae.SystemMessage,null,"You are an AI programming assistant. ",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot". ',vscpp("br",null),"Follow the user's requirements carefully & to the letter. ",vscpp("br",null),"Follow Microsoft content policies. ",vscpp("br",null),"Avoid content that violates copyrights. ",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that.".`," ",vscpp("br",null),"Keep your answers short and impersonal. ",vscpp("br",null),"Respond in the following locale: ",this.props.turnContext.conversation.userLanguage,".")}};d();var Fht=Ne(Hc());var Dae=class extends fm{static{s(this,"ToolCallHistoryPrompt")}renderCopilot(){let e=rne(this.props.currentTurn.response?.message,!0),r=e.length>0;return vscpp(vscppf,null,e.map((n,i)=>Sae(n)),r&&vscpp(Fht.UserMessage,null,vscpp(vscppf,null,"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself.")))}};d();d();d();d();var ME=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new rm({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var ovr=new Ct("activeEditorPrompt");async function Oht(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new qc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&svr(n.selection)){let o=new ME(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Pi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new ME(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new ME(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Pi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new ME(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else ovr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Oht,"processActiveEditor");function svr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(svr,"notEmptySelection");d();d();function Qht(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Qht,"partsLength");async function qht(t,e=1/0,r){let n=Uht(0,t,e),i=e-Qht(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return avr();let u=Uht(c.level+1,l,i-1);u.length&&(o=!0,i-=Qht(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(qht,"visualFileTree");function Uht(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Uht,"toParts");var avr=s(()=>({tree:"",files:[]}),"emptyTree");var cvr=new Ct("fileReferencesPrompt");async function Hht(t,e,r,n){let i=await $ht(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=e8(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(Hht,"generateWorkspaceStructurePrompt");async function $ht(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await qht(await Wht(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s($ht,"generateWorkspaceStructure");async function Wht(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(Mi).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=Vi(e,o);return r.excludeDotFiles&&o.startsWith(".")||dvr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>Wht(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(Wht,"buildFileList");var lvr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],uvr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function dvr(t){return!!(uvr.includes(Pi(t).toLowerCase())||es(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>lvr.includes(r)))}s(dvr,"shouldAlwaysIgnoreFile");async function Bae(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Pi(a.uri)})),i=await $ht(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${nc(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return cvr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(Bae,"processDirectoryReferences");var fvr=new Ct("fileReferencesPrompt");async function jht(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new qc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new ME(h,void 0,[]);g&&m.push(...g.render())}else fvr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),Oht(t,e),Bae(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(jht,"processFileReferences");d();var bS=Ne(Hc());var pvr=new Ct("userRequestPrompt"),Nae=class extends fm{static{s(this,"UserRequestPrompt")}renderKeepGoingReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Wr.Gpt41||this.props.modelConfiguration.modelFamily===Wr.Gpt5?e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.","Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.","You MUST iterate and keep going until the problem is solved.","You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.","Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.","Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.","You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.","You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input."):(e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue."),e.push("You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.")),e}renderExplanationReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Wr.Gpt5&&(e.push(`Skip filler acknowledgements like "Sounds good" or "Okay, I will\u2026". Open with a purposeful one-liner about what you're doing next.`),e.push("When sharing setup or run steps, present terminal commands in fenced code blocks with the correct language tag. Keep commands copyable and on separate lines."),e.push("Avoid definitive claims about the build or runtime setup unless verified from the provided context (or quick tool checks). If uncertain, state what's known from attachments and proceed with minimal steps you can adapt later."),e.push("When you create or edit runnable code, run a test yourself to confirm it works; then share optional fenced commands for more advanced runs."),e.push("Do not state your identity or model name unless the user explicitly asks you to."),e.push('For non-trivial code generation, produce a complete, runnable solution: necessary source files, a tiny runner or test/benchmark harness, a minimal `README.md`, and updated dependency manifests (e.g., `package.json`, `requirements.txt`, `pyproject.toml`). Offer quick "try it" commands and optional platform-specific speed-ups when relevant.'),e.push("Your goal is to act like a pair programmer: be friendly and helpful. If you can do more, do more. Be proactive with your solutions, think about what the user needs and what they want, and implement it proactively."),e.push("<importantReminders>"),e.push("ALWAYS start your response with a brief task receipt and a concise high-level plan for how you will proceed."),e.push("Every so often, explain the notable action you are about to take next, especially before multi-step or impactful tool calls."),e.push("</importantReminders>")),e}async renderCopilot(e,r,n,i){let o=i??new vn.CancellationTokenSource().token,a=await JA.appendToUserMessage(this.props.ctx,this.props.workspaceFolders,on(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),c=[];try{let f=await jht({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.props.ctx},o);f.length>0&&c.push(...f)}catch(f){pvr.debug(this.props.ctx,"Failed to process file references",f)}c.push("<context>"),c.push(this.getCurrentDate()),c.push(this.getUserOS()),c.push(this.getWorkspaceFoldersHint()),c.push(await this.getWorkspaceStructureHint(o)),c.push("</context>"),c.push("<reminderInstructions>"),c.push(...this.renderKeepGoingReminder()),c.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${hl}\` to represent regions of unchanged code.`),this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0&&c.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),c.push(...this.renderExplanationReminder()),c.push("</reminderInstructions>"),c.push("<prompt>"),c.push(a),c.push("</prompt>");let u=c.join(`
`);if(XQ(this.props.userRawMessage)){let f=this.props.userRawMessage.filter(p=>p.type==="image_url");return f.length===0?vscpp(bS.UserMessage,null,vscpp(vscppf,null,u)):vscpp(bS.UserMessage,null,vscpp(bS.TextChunk,null,vscpp(vscppf,null,u)),f.map(p=>vscpp(bS.Image,{src:p.image_url.url,detail:p.image_url.detail})))}else return vscpp(bS.UserMessage,null,vscpp(vscppf,null,u))}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${es(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await Hht(this.props.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}};var Mae=class extends fm{static{s(this,"AgentPrompt")}constructor(e){super(e),this.ctx=e.turnContext.ctx,this.turnContext=e.turnContext,this.currentTurn=e.turnContext.turn}renderCopilot(e,r,n,i){let o=this.turnContext.conversation.turns.slice(0,-1);return vscpp(vscppf,null,vscpp(kae,{turnContext:this.turnContext}),vscpp(_ae,{historyTurns:o,ctx:this.ctx}),vscpp(Rae,{toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(Nae,{ctx:this.ctx,turnContext:this.turnContext,userRawMessage:this.props.userRawMessage,workspaceFolders:this.props.workspaceFolders,textDocumentProvider:this.props.textDocumentProvider,toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(Dae,{currentTurn:this.currentTurn}))}};var Ght=128,mvr=100,hvr=200,IS=new Ct("toolCallingLoop"),Lae=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(pa),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(Cu);let o={turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new sE(this.turnContext.ctx),toolsService:this.toolsService,modelConfiguration:this.modelConfiguration};this.tsxPromptRenderer=Uq.create(Mae,o,n),this.requestId=Er(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId});let a=E6e()?hvr:mvr;this.maxToolCallingLoop=Math.min(a,zi(e.ctx,Ht.MaxToolCallingLoop))}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n),this.turnContext.clearCopilotEditsSessionHeader();let i=performance.now(),o=await this.runOne(r,e);if(rKe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=(await this.tsxPromptRenderer.renderPrompt(void 0,r)).messages,i="",o=new mS((u,f,p,m)=>{let h=u.trim().match(Qq)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:f,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...f??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),IS.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,f)=>o.isFinishedAfter(u,f));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),IS.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.addToolCallModelResponseToTurn(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new dd({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new qc;case"failed":throw this.turn.status="error",new dd({message:Uw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new dd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new dd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new dd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new dd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new dd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new dd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new dd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new dd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");this.turnContext.setCopilotEditsSessionHeader(e.copilotEditsSessionHeader);let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.addToolCallModelResponseToTurn(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=Dw(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.shouldRequireToolConfirmation(o.id,l);IS.debug(this.turnContext.ctx,"need tool confirmation",f),await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=s0t(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=goe(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.addToolCallResultToTurn(p,e.id)}catch(l){if(l instanceof BE||l instanceof qc)throw this.turn.status="cancelled",c="cancelled",this.addToolCallResultToTurn(new go([new Li("")],"cancelled"),e.id),new BE(l.message);{IS.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${_x(l)}`,l),c="error";let u=new go([new Li(_x(l).substring(0,300))],"error");this.addToolCallResultToTurn(u,e.id),this.abortIfCanceled(i);let f=goe(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;nKe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;IS.error(this.turnContext.ctx,a);let c=new go([new Li(a)],"error");this.addToolCallResultToTurn(c,e.id);let l=goe(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}addToolCallModelResponseToTurn(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.turn.response?this.turn.response.message=ZQ(this.turn.response.message,n):this.turn.response={message:[n],type:"model"}}addToolCallResultToTurn(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+JU(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.turn.response)this.turn.response={message:[o],type:"model"};else{if(tne(this.turn.response.message)&&this.turn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){IS.info(this.turnContext.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.turn.response.message=ZQ(this.turn.response.message,o)}}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(e,r){if(e.includes("run_in_terminal")){let i=r.command,a=this.turnContext.ctx.get(rE).isCommandAutoApproved(i);if(a.result==="denied")return!0;if(a.result==="approved")return!1}return zi(this.turnContext.ctx,Ht.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new qc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new BE("Cancelled by user");case"accept":return Promise.resolve();default:throw new BE(`Invalid confirmation result ${u.result}`)}}else IS.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw IS.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new hM}checkChatPayload(e){if(e.messages.length===0)throw new dd({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>Ght)throw new dd({message:`You may not include more than ${Ght} tools in your request.`,responseIsFiltered:!1})}};var Fae=new Ct("agenticTurnProcessor"),Oae=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(pa),this.chatFetcher=this.chatFetcher??new Ja(e.ctx),this.turnSuggestions=new uM(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o,a)}catch(c){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:x2e.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a,c){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Fc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Fae.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});let u=CP().find(f=>f.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}try{let f=c&&a?await XN(this.turnContext.ctx,c,a):await Jo.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(f),await new Lae(this.turnContext,this.chatFetcher,f,l).run(r);let m={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let h=await this.fetchSuggestedTitle(r,l.extendedBy({messageSource:"chat.user"},{}));typeof h=="string"&&h!==""&&(m.suggestedTitle=h)}await this.endProgress(m)}catch(f){if(f instanceof BE)Fae.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,f),this.turn.status="cancelled",await this.cancelProgress();else if(f instanceof qc)Fae.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,f),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(f instanceof hM)this.turn.status="error",this.updateTurnResponseWithError(f.message),await this.endProgress({error:{message:f.message,code:x2e.ToolRoundExceedError,responseIsIncomplete:!0}});else if(f instanceof dd)this.turn.status="error",this.updateTurnResponseWithError(f.message),await this.endProgress({error:f.conversationError});else throw Fae.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,f),f}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return en.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=ZQ(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}};d();var KRe="collect-context",JRe="generate-response",Qae=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(pa),this.chatFetcher=this.chatFetcher??new Ja(e.ctx),this.postProcessor=new dM(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModel(e,r,this.turnContext,n,i,o,a)}catch(c){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a,c){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Fc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(l=l.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=CP().find(h=>h.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}let f=(await W1(this.turnContext.ctx)).find(h=>h.slug===this.turn.agent?.agentSlug);if(f){let h=await this.checkAgentPreconditions(f);if(h){await this.endProgress(h);return}}await n.steps.start(KRe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,u,f);let p;c?p="customized":a?p=(await this.turnContext.ctx.get(Xa).getBestChatModelConfig([a])).uiName:p=void 0;let m=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,p);if(!m)await n.steps.error(KRe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(KRe),await n.steps.start(JRe,"Generating response");let h=this.augmentTelemetry(m,l,u,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let g=await this.fetchConversationResponse(m.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:m.tokens}),h,o,a,c),A=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(g,n),await this.endProgress({error:g.error,followUp:g.followup,suggestedTitle:g.suggestedTitle,skillResolutions:m.skillResolutions,updatedDocuments:A}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){en.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new nae(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a,c){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",u=0,f=new mS((A,y,E,b)=>{let S=A.trim().match(Qq)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:A,annotations:y,references:E,hideText:S,notifications:b.map(R=>({severity:"warning",message:R.message}))}),this.turn.response?this.turn.response.message=Aae(this.turn.response.message,A):this.turn.response={message:A,type:"model"},this.turn.annotations.push(...y??[]),l+=A,this.strategy.currentDocument){let R=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);R&&R.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:R}),u+=R.length)}}),p=c&&a?await XN(this.turnContext.ctx,c,a):await Jo.getModelConfiguration(this.turnContext.ctx,"user",a);e=Jo.transformMessages(e,p.modelFamily),this.turnContext.setResolvedModelConfiguration(p);let m=this.turn.getResolvedModelId();m&&(i=i.extendedBy({modelId:m}));let h={modelConfiguration:p,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:on(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},g=await this.chatFetcher.fetchResponse(h,r,n,(A,y)=>f.isFinishedAfter(A,y));return i=i.extendedBy(void 0,{numCodeEdits:u}),await this.postProcessor.postProcess(g,r,f.appliedText,n,i,on(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",JYe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,on(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=a7(this.conversation,this.strategy.uiKind,on(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=a7(this.conversation,this.strategy.uiKind,on(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(JRe,e.error.message):await r.steps.finish(JRe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var Uae=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Jo.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(ud).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},qae=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(Xa).getBestChatModelConfig(ch(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(ud).toPrompt(e,l)}async processResponse(e){let r=[],n=on(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(Yd);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(En).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=WRe(e,r).filter(a=>$Re.includes(a.mode)),o=jRe(i,r);if(o)return await this.ctx.get(Cl).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return WRe(e,r)}};d();d();var Vht=Ne(cl()),zht=Ne(IA());var Qf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new Vht.ProtocolRequestType("conversation/context");this.typeCheck=Xs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(Dr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new zht.ResponseError(c.code,c.message,c.data);en.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){en.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new ad(this.typeCheck.Errors(i));return i}}};var XRe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},LE=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new XRe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},Hae=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(pa)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){en.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(eo).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Qf(this.turnContext.ctx,o,x.Object({value:x.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await qC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:Er()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var FE=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(LE).get(r);if(i)return new Hae(e,i);let a=(await W1(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new qae(e.ctx):c=new Uae(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new Oae(e,c):new Qae(e,c)}};d();var Yht=Ne(cl());var gM=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new Yht.ResponseError(tr.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function $ae(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Pi(t.uri)}]}s($ae,"resolveAsWorkspaceFolders");d();d();var gvr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Xd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?gvr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Uf=class{constructor(){this.tokens=new wr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new vn.CancellationTokenSource,i=new Xd([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var Avr=x.Object({conversationId:x.Optional(mae),workDoneToken:x.Union([x.String(),x.Number()]),turns:x.Array(xht,{minItems:1}),capabilities:x.Optional(x.Object({allSkills:x.Optional(x.Boolean()),skills:x.Optional(x.Array(x.String()))})),doc:x.Optional(c0),textDocument:x.Optional(c0),selection:x.Optional(Pc),visibleRanges:x.Optional(Eae),computeSuggestions:x.Optional(x.Boolean()),references:x.Optional(x.Array(fM)),source:x.Optional(ug),workspaceFolder:x.Optional(x.String()),workspaceFolders:x.Optional(x.Array(pM)),ignoredSkills:x.Optional(x.Array(x.String())),userLanguage:x.Optional(x.String()),model:x.Optional(x.String()),modelProviderName:x.Optional(x.String()),chatMode:x.Optional(yae),needToolCallConfirmation:x.Optional(x.Boolean())});async function yvr(t,e,r){gM.validate(r.workspaceFolders);let n=await V1(t,r,e),i=t.get(eo).create(r);await Cvr(t,i,r,n);let o=i.turns[i.turns.length-1],a=mM(r),c=t.get(Uf).add(a.progressToken,e),l=new ES(t,i,o,c);return await(await t.get(FE).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model,r.modelProviderName),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(yvr,"handleConversationCreateChecked");async function Cvr(t,e,r,n){for(let i of r.turns){let o=gae(i.request),a=new hS({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=Ese(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:$ae(c),u=bae({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(eo).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(Cvr,"addTurns");var Kht=Ze(Avr,yvr);d();var vvr=x.Object({conversationId:x.String()});function xvr(t,e,r){return t.get(eo).destroy(r.conversationId),["OK",null]}s(xvr,"handleConversationDestroyChecked");var Jht=Ze(vvr,xvr);d();var Evr=x.Object({turnId:x.String(),acceptedFileCount:x.Number({minimum:0}),totalFileCount:x.Number({minimum:1})}),bvr=new Ct("conversationNotifyCodeAcceptance");async function Ivr(t,e,r){let n=t.get(eo).findByTurnId(r.turnId);if(!n)return bvr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await Fc(t,n,{languageId:""});return _f(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${au("agentPanel")}.codeAcceptance`,i),["OK",null]}s(Ivr,"handleConversationNotifyCodeAcceptanceChecked");var Xht=Ze(Evr,Ivr);d();var Tvr=x.Object({});function wvr(t,e,r){return[{path:t.get(Ai).directory},null]}s(wvr,"handleConversationPersistenceChecked");var Zht=Ze(Tvr,wvr);d();d();var ZRe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Yi).getSession(),n=e.get(ru);return r&&r.githubAppId&&r.githubAppId!==vp?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},eke=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Br).getToken()).envelope.chat_enabled?"ok":"failed"}}},Svr=[new ZRe,new eke],dg=class{constructor(e,r=Svr){this.ctx=e;this.checks=r;this.emitter=new ja;this.onChange=this.emitter.event;Ps(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var _vr=x.Object({forceCheck:x.Optional(x.Boolean())});async function Rvr(t,e,r){let n=r.forceCheck??!1;return[await t.get(dg).check(n),null]}s(Rvr,"handleConversationPreconditionsChecked");var egt=Ze(_vr,Rvr);d();var kvr=x.Object({turnId:x.String(),rating:x.Number(),doc:x.Optional(c0),textDocument:x.Optional(c0),source:x.Optional(ug)});async function Pvr(t,e,r){let n=await V1(t,r,e),i=HT(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await Fc(t,t.get(eo).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return _f(t,n,{rating:o,uiKind:i},{},`${au(i)}.messageRating`,a),["OK",null]}s(Pvr,"handleConversationRatingChecked");var tgt=Ze(kvr,Pvr);d();d();var Wae=class extends sS{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:D1,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(Bw).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new qc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(y1).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Dvr=x.Object({tools:x.Array(Eht)});function Bvr(t,e,r){let n=t.get(Cu);return r.tools.forEach(o=>{n.registerTool(new Wae({name:o.name,description:o.description,inputSchema:o.inputSchema,confirmationMessages:o.confirmationMessages}))}),[n.getToolsForModel().filter(o=>o.type!=="mcp"),null]}s(Bvr,"conversationRegisterToolsChecked");var rgt=Ze(Dvr,Bvr);d();var Nvr=x.Object({workspaceFolders:x.Optional(x.Array(pM))});async function Mvr(t,e,r){let n=uRe(t).map(o=>({id:o.id,description:o.description,shortDescription:o.shortDescription,scopes:o.scopes})),i=t.get(KA);if(r.workspaceFolders&&r.workspaceFolders.length>0){let a=(await i.collectPromptFiles(t,r.workspaceFolders)).filter(c=>!n.some(l=>l.id===c.name)).map(c=>({id:c.name,description:c.description||"",shortDescription:"",scopes:["chat-panel","agent-panel"]}));n.push(...a)}return[n,null]}s(Mvr,"handleConversationTemplatesChecked");var ngt=Ze(Nvr,Mvr);d();var Lvr=x.Object({workDoneToken:x.Union([x.String(),x.Number()]),conversationId:mae,turnId:x.Optional(TP),message:QRe,followUp:x.Optional(x.Object({id:x.String(),type:x.String()})),doc:x.Optional(c0),textDocument:x.Optional(c0),selection:x.Optional(Pc),visibleRanges:x.Optional(Eae),computeSuggestions:x.Optional(x.Boolean()),references:x.Optional(x.Array(fM)),workspaceFolder:x.Optional(x.String()),workspaceFolders:x.Optional(x.Array(pM)),ignoredSkills:x.Optional(x.Array(x.String())),confirmationResponse:Llt,model:x.Optional(x.String()),modelProviderName:x.Optional(x.String()),chatMode:x.Optional(yae),needToolCallConfirmation:x.Optional(x.Boolean())});async function Fvr(t,e,r){gM.validate(r.workspaceFolders);let n=await V1(t,r,e),i=t.get(eo),o=i.get(r.conversationId),a=gae(r.message),c=new hS({message:a,type:"user"},r.turnId);c.chatMode=Ese(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:$ae(l),f=bae({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=mM(r),m=t.get(Uf).add(p.progressToken,e),h=new ES(t,o,c,m);return await(await t.get(FE).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(Fvr,"handleConversationTurnChecked");var igt=Ze(Lvr,Fvr);d();var Ovr=x.Object({conversationId:x.String(),turnId:x.String(),source:x.Optional(ug)});async function Qvr(t,e,r){t.get(eo).deleteTurn(r.conversationId,r.turnId);let i=HT(r.source),o=await Fc(t,t.get(eo).findByTurnId(r.turnId),{languageId:""});return _f(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${au(i)}.messageDelete`,o),["OK",null]}s(Qvr,"handleConversationTurnDeleteChecked");var ogt=Ze(Ovr,Qvr);d();var Uvr=x.Object({toolIds:x.Array(x.String())});function qvr(t,e,r){let n=t.get(Cu);return r.toolIds.forEach(o=>{n.unregisterTool(o)}),[n.getToolsForModel().filter(o=>o.type!=="mcp"),null]}s(qvr,"conversationUnregisterToolsChecked");var sgt=Ze(Uvr,qvr);d();var Hvr=x.Object({document:x.Object({uri:x.String(),text:x.String(),languageId:x.String(),version:x.Number()}),selection:x.Object({start:x.Object({line:x.Number(),character:x.Number()}),end:x.Object({line:x.Number(),character:x.Number()})})});function $vr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s($vr,"buildSystemMessage");function Wvr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Wvr,"buildUserMessage");function jvr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],A=Math.max(g.search(/\S/),0),y=g.trimEnd().length,E={uri:t.uri,range:{start:{line:h,character:A},end:{line:h,character:y}},message:m.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(E)}return r}s(jvr,"parseReviewComments");async function Gvr(t,e,r){if(!r.document.text)return[null,{code:tr.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:tr.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:tr.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:tr.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:tr.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(Ja),o=await Jo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:$vr()},{role:"user",content:Wvr(r)}],c=await t.get(Mt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:U0.user("code-review",Er())},e,c);if(l.type!=="success")return[null,{code:tr.InternalError,message:"Failed to generate code review"}];let u=jvr(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(Gvr,"handleCopilotCodeReviewChecked");var agt=Ze(Hvr,Gvr);d();d();var qq=class t{constructor(e){this.ctx=e;this.name="ReviewChangesProvider"}static{s(this,"ReviewChangesProvider")}static{this.DEFAULT_TIMEOUT=120*1e3}async fetchCodeReview(e,r){let n=await this.ctx.get(Br).getToken(),i=Ym(this.ctx,n,"api","agents/github-code-review"),a=kC(this.ctx)["Copilot-Integration-Id"];return Ax(this.ctx,i,n.token,void 0,Ow(),e,r,{"X-Copilot-Code-Review-Mode":"ide","Copilot-Integration-Id":a},t.DEFAULT_TIMEOUT)}static changesToReference(e){return{type:"github.pull_request",id:"1",data:{type:"pull-request",headFileContents:e.map(r=>({path:r.path,content:r.headContent})),baseFileContents:e.map(r=>({path:r.path,content:r.baseContent}))}}}static createReviewRequest(e){return{messages:[{role:"user",copilot_references:[t.changesToReference(e)]}]}}};d();d();var jae=/```suggestion(\u0020*(\r\n|\n))((?<suggestion>[\s\S]*?)(\r\n|\n))?```/g;var Gae=class t{static{s(this,"ReviewChangesResponseParser")}static findFirstNonWhitespaceCharacterIndex(e){let r=e.match(/\S/);return r?r.index:e.length}static removeSuggestion(e){return e.replaceAll(jae,"")}static extractSuggestionAndText(e){jae.lastIndex=0;let n=jae.exec(e)?.groups?.suggestion||null,i=t.removeSuggestion(e);return{suggestion:n,textWithoutSuggestion:i}}static ghCommentToReviewComment(e,r){let n=r.headContent.split(`
`)[e.data.line-1],i=n.trimEnd().length,o={start:{line:e.data.start_line?e.data.start_line-1:e.data.line-1,character:t.findFirstNonWhitespaceCharacterIndex(n)},end:{line:e.data.line-1,character:i}},a=e.data.body,{suggestion:c,textWithoutSuggestion:l}=t.extractSuggestionAndText(a);return{uri:r.uri,range:o,message:l,kind:e.data.problem_type,severity:"medium",suggestion:c}}static parseLine(e){if(e==="data: [DONE]")return[];if(e==="")return[];let r=JSON.parse(e.replace("data: ",""));return Array.isArray(r.copilot_references)&&r.copilot_references.length>0?r.copilot_references.filter(n=>n.type):[]}static parseReviewResponse(e,r){let n=e.split(`
`),i=[];for(let o of n){let a=t.parseLine(o);for(let c of a.filter(l=>l.type==="github.generated-pull-request-comment")){if(c.data.side!=="RIGHT")continue;let l=r.find(f=>f.path===c.data.path);if(!l)continue;let u=t.ghCommentToReviewComment(c,l);i.push(u)}}return i}};var Vvr=x.Object({uri:x.String(),path:x.String(),baseContent:x.String(),headContent:x.String()}),zvr=x.Object({changes:x.Array(Vvr)}),Hq;async function Yvr(t,e,r){Hq&&(Hq.cancel(),Hq.dispose()),Hq=new vn.CancellationTokenSource;let n=new Xd([e,Hq.token]),i=new qq(t);if(!(await t.get(Br).getToken()).isCopilotCodeReviewEnabled)return[null,{code:tr.InternalError,message:"GitHub Copilot Code Review is not enabled."}];let a=qq.createReviewRequest(r.changes),c=await i.fetchCodeReview(a,n);if(!c.ok)return c.status===402?[null,{code:c.status,message:"You have reached your GitHub Copilot Code Review quota limit."}]:[null,{code:tr.InternalError,message:"Failed to generate code review."}];let l=await c.text();return[{comments:Gae.parseReviewResponse(l,r.changes)},null]}s(Yvr,"handleCopilotCodeReviewReviewChangesChecked");var cgt=Ze(zvr,Yvr);d();d();var TS=class{constructor(e,r,n,i,o,a){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.userSelectedModelProviderName=a;this.workingSetUriToPathMap=new Map;for(let c of n.workingSet)this.workingSetUriToPathMap.set(c.uri,dE.uriToPath(c.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return U0.user("conversation-edits",this.editTurnId)}};d();async function Vae(t,e,r,n){let o=t.get(Al).create("panel","en"),a=new qw({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new TS(t,o,a,n,Wr.Gpt4o),u=t.get(od);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Vae,"streamMockedResult");d();var Kvr=x.Object({enableMock:x.Boolean()}),K1=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Jvr(t,e,r){return t.get(K1).setMockEnabled(r.enableMock),["OK",null]}s(Jvr,"handleTestingSetCopilotEditsResponseChecked");var lgt=Ze(Kvr,Jvr);var Xvr=x.Object({request:x.String(),response:x.Optional(x.String())}),Zvr=x.Union([x.Literal("panel")]),exr=x.Object({partialResultToken:x.Union([x.String(),x.Number()]),turns:x.Array(Xvr,{minItems:1}),workingSet:x.Optional(x.Array(Mq)),source:x.Optional(Zvr),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String()),model:x.Optional(x.String()),modelProviderName:x.Optional(x.String())});function txr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new qw({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(txr,"buildEditConversation");async function rxr(t,e,r){if(t.get(K1).isMockEnabled())return await Vae(t,Er(),Er(),r.partialResultToken),[[],null];let n=txr(t.get(Al),r),i=n.getLastTurn(),o=new TS(t,n,i,r.partialResultToken,r.model,r.modelProviderName),a=t.get(Uf).add(r.partialResultToken,e);return[await t.get(fE).createOrContinueEditConversation(o,a),null]}s(rxr,"handleEditConversationCreateChecked");var ugt=Ze(exr,rxr);d();var nxr=x.Object({editConversationId:x.String()});function ixr(t,e,r){return t.get(Al).destroy(r.editConversationId),["OK",null]}s(ixr,"handleEditConversationDestroyChecked");var dgt=Ze(nxr,ixr);d();var oxr=x.Object({partialResultToken:x.Union([x.String(),x.Number()]),editConversationId:x.String(),message:x.String(),workingSet:x.Optional(x.Array(Mq)),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String()),model:x.Optional(x.String())});function sxr(t,e,r){let n=t.get(e),i=new qw({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(sxr,"buildEditConversation");async function axr(t,e,r){if(t.get(K1).isMockEnabled())return await Vae(t,r.editConversationId,Er(),r.partialResultToken),[[],null];let n=t.get(Al),i=sxr(n,r.editConversationId,r),o=i.getLastTurn(),a=new TS(t,i,o,r.partialResultToken,r.model),c=t.get(Uf).add(r.partialResultToken,e);return[await t.get(fE).createOrContinueEditConversation(a,c),null]}s(axr,"handleEditConversationTurnChecked");var fgt=Ze(oxr,axr);d();var cxr=x.Object({editConversationId:x.String(),editTurnId:x.String(),source:x.Optional(ug)});async function lxr(t,e,r){t.get(Al).deleteTurn(r.editConversationId,r.editTurnId);let i=await s7(t,r.editTurnId,r.editConversationId,{languageId:""});return _f(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${au("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(lxr,"handleEditConversationTurnDeleteChecked");var pgt=Ze(cxr,lxr);d();var uxr=x.Object({}),dxr=x.Object({servers:x.Array(x.Object({name:x.String(),tools:x.Array(x.Object({name:x.String(),status:x.Enum(CU)}))}))});function fxr(t,e,r){return[t.get(eg).getAllTools(),null]}s(fxr,"handleGetMCPToolsChecked");function pxr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(eg).updateMCPToolStatus(i,a,c);return[t.get(eg).getAllTools(),null]}s(pxr,"handleUpdateMCPToolsStatusChecked");var mgt=Ze(uxr,fxr),hgt=Ze(dxr,pxr);d();var mxr=x.Object({});async function hxr(t,e,r){let n=await t.get(Br).getToken();return[gxr(await t.get(xf).getMetadata(),n),null]}s(hxr,"handleCopilotModelsChecked");function gxr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=uh.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!F$e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(gxr,"filterModels");var ggt=Ze(mxr,hxr);d();var Axr=x.Object({model:x.Optional(x.String()),status:x.Optional(x.String())});async function yxr(t,e,r){return r.model&&r.status==="enabled"?await t.get(xf).acceptModelPolicy(r.model)?["OK",null]:[null,{code:tr.InternalError,message:"Failed to accept model policy"}]:[null,{code:tr.InvalidRequest,message:"Invalid model or status"}]}s(yxr,"handleCopilotModelsPolicyChecked");var Agt=Ze(Axr,yxr);d();d();d();d();function Cxr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(Cxr,"panelPositionForDocument");async function*ygt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(ygt,"trimChoices");var AM=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=Cxr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function tke(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await tke(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(tke,"reportSolutions");async function rke(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:rke(t,e)}}s(rke,"generateSolutionsStream");function zae(t){return t.replace(/\s+/g,"")}s(zae,"normalizeCompletionText");async function Cgt(t,e,r,n,i,o){let a=e.targetPosition,c=e.textDocument,l=IT(t,c.uri),u=Er(),f=Gr.createAndMarkAsIssued({headerRequestId:u,languageId:c.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Mt).updateExPValuesAndAssignments({uri:c.uri,languageId:c.detectedLanguageId},f),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i})),o&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({comparisonRequestId:o}));let p=await M3(t,u,VC(c,a),e.savedTelemetryData);if(p.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(p.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(p.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(p.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(p.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let m=p.prompt,h=p.trailingWs;return h.length>0&&(e.startPosition=vs.position(e.startPosition.line,e.startPosition.character-h.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...ED(m),solutionCount:e.solutionCountTarget,promptEndPos:c.offsetAt(a)}),n.debug(t,"prompt:",m),Bt(t,"solution.requested",e.savedTelemetryData),{prompt:m,trailingWs:h,telemetryData:e.savedTelemetryData,repoInfo:l,ourRequestId:u}}s(Cgt,"setupPromptAndTelemetry");function vgt(t,e,r,n,i,o){let a=t.get(xA).forLanguage(t,e.detectedLanguageId,o),c=Np(e.detectedLanguageId),l=zX(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=bT(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?u7(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?u7(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:m,engineInfo:p}}s(vgt,"setupCompletionParams");var nke=new Ct("solutions");async function vxr(t,e){let r=e.targetPosition,n=e.textDocument,i=await Cgt(t,e,"open copilot",nke);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:m,engineInfo:h}=vgt(t,n,r,o,e,c),g=e.cancellationToken,A={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:f},y=await t.get(b0).fetchAndStreamCompletions(t,A,c.extendedBy(),m,g);if(y.type==="failed"||y.type==="canceled")return{status:"FinishedWithError",error:`${y.type}: ${y.reason}`};let E=y.choices;E=ygt(E),E=o7(E,R=>I7(t,n,r,R,!1,nke));let b=o7(E,async R=>{let B=R.completionText;nke.info(t,`Open Copilot completion: [${R.completionText}]`);let L=await MKe(t,n,r,R.completionText)??vs.position(r.line,0),[O]=KT(n.getText(vs.range(L,r)));B=O+B;let K=R.completionText;a.length>0&&K.startsWith(a)&&(K=K.substring(a.length));let V=R.meanLogProb,z=V!==void 0?Math.exp(V):0,Q=c.extendedBy({choiceIndex:R.choiceIndex.toString()});return{completionText:K,insertText:B,range:vs.range(L,r),meanProb:z,meanLogProb:V||0,requestId:R.requestId,choiceIndex:R.choiceIndex,telemetryData:Q,copilotAnnotations:R.copilotAnnotations}});return rke(g,b[Symbol.asyncIterator]())}s(vxr,"launchSolutions");async function Yae(t,e,r){return t.get(So).withProgress(async()=>{let i=vxr(t,e);return await tke(i,r)})}s(Yae,"runSolutions");var Egt=Ne(gI()),Wq=Ne(cl());d();d();function Kae(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Kae,"parseChallengeDoc");var xxr=x.Object({text:x.String(),score:x.Number()}),Exr=x.Object({documents:x.Array(xxr),options:x.Optional(x.Object({}))});async function Jae(t,e,r){let n=Er();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=Kae(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:uC.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(Jae,"runTestSolutions");var Ay=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function bxr(t,e,r){return t.forceSet(Ay,new Ay(r.documents)),["OK",null]}s(bxr,"handleTestingSetPanelCompletionDocumentsChecked");var xgt=Ze(Exr,bxr);var bgt=QG.type;function Ixr(t,e,r,n,i){let o=zae(n.completionText),a=(0,Egt.SHA256)(o).toString();return t.get($s).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:z_e,title:`Accept completion ${i}`,arguments:[a]}}}s(Ixr,"makeCompletion");function oke(t,e){return`${t}/${e}`}s(oke,"progressMessage");var ike=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Dr)}async onSolution(e){this.count+=1;let r=Ixr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(Wq.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:oke(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return Txr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(Wq.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function Txr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(Wq.WorkDoneProgress.type,t,{kind:"end",message:oke(r,10)})}s(Txr,"reportDone");var $q;async function wxr(t,e,r){let n=await gy(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(Dr).connection.sendProgress(Wq.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:oke(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(Dr).connection.sendProgress(QG.partialResult,c,{items:[f]})},"onCompletion"));let l=new ike(t,r,a),u=t.get(Ay);if(u.documents){let f=u.documents;await Jae(i,f,l)}else{l.offset=n.offsetAt(i);let f=new AM(n,i,e,10);await Yae(t,f,l)}return l.error!==void 0?[null,{code:tr.InternalError,message:l.error}]:[{items:o},null]}s(wxr,"handleChecked");async function Sxr(t,e,r){$q&&($q.cancel(),$q.dispose()),$q=new vn.CancellationTokenSource;let n=$q.token,i=new Xd([e,n]);try{return await wxr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(Sxr,"handleCheckedWithAbort");var Igt=Ze(h6e,Sxr);d();d();d();function Rxr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(uf).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(Rxr,"urlsToCheck");async function Tgt(t,e,r=wD(t),n,i){let o=Rxr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await kxr(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(Tgt,"checkReachability");async function kxr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(kxr,"determineReachability");var pm=Ne(require("os")),yM=Ne(require("tls"));async function Sgt(t,e){let r=await t.get($r).getImplementation(),n=await t.get(Br).getGitHubSession(),i=await t.get(Br).getToken().catch(()=>{});return{sections:[Dxr(t),Pxr(t,n),Bxr(t,r),await Nxr(t,r,i?.endpoints,n,e)]}}s(Sgt,"collectDiagnostics");function _gt(t){return t.sections.map(Mxr).join(pm.EOL+pm.EOL)+pm.EOL}s(_gt,"formatDiagnosticsAsMarkdown");function Pxr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:r2(t),"GitHub Account":n,"Session ID":t.get(Ds).sessionId,"Send Restricted Telemetry":bD(t)?"enabled":"disabled","Content Exclusion":t.get(ll).enabled?"enabled":"unavailable"}}}s(Pxr,"collectCopilotSection");function Dxr(t){let e={Plugin:Fxr(t),Editor:Lxr(t),"Operating System":`${pm.type()} ${pm.release()} (${pm.arch()})`};return J1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(Dxr,"collectEnvironmentSection");function Bxr(t,e){let r=t.get(kc).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":yM.rootCertificates.length,"TLS Default Min Version":yM.DEFAULT_MIN_VERSION,"TLS Default Max Version":yM.DEFAULT_MAX_VERSION};return J1(n,"http_proxy"),J1(n,"https_proxy"),J1(n,"no_proxy"),J1(n,"SSL_CERT_FILE"),J1(n,"SSL_CERT_DIR"),J1(n,"OPENSSL_CONF"),J1(n,"NODE_EXTRA_CA_CERTS"),J1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(Bxr,"collectNetworkConfigSection");async function Nxr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Tgt(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(Nxr,"collectReachabilitySection");function wgt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(wgt,"quoteCode");function J1(t,e){let r=process.env[e];r&&(t[wgt(e)]=wgt(r)),r!==process.env[e.toUpperCase()]&&J1(t,e.toUpperCase())}s(J1,"addEnvironmentVariable");function Mxr(t){return`## ${t.name}`+pm.EOL+pm.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(pm.EOL)}s(Mxr,"formatSectionAsMarkdown");function Lxr(t){let e=t.get(mn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(Lxr,"getEditorDisplayVersion");function Fxr(t){let e=t.get(mn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(Fxr,"getPluginDisplayVersion");var Oxr=x.Object({});async function Qxr(t,e){return[{report:_gt(await Sgt(t,e))},null]}s(Qxr,"handleDiagnosticsChecked");var Rgt=Ze(Oxr,Qxr);d();d();d();d();function kgt(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(kgt,"normalizeIndentCharacter");function Pgt(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=vs.range(vs.position(i.line,0),vs.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=kgt(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=vs.range(f.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:Er(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s(Pgt,"completionsFromGhostTextResults");async function ske(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await Exe(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=FXe(t,e.textDocument,e.position,c),u=Pgt(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};if(c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let p={isSpeculative:!0,opportunityId:n.opportunityId},m=s(()=>Exe(t,e,void 0,p),"fn");t.get(Rh).set(u[0].clientCompletionId,m)}let f=u.map(p=>{let{start:m,end:h}=p.range,g=vn.Range.create(m,vn.Position.create(h.line,h.character-i));return{...p,range:g}});return{...o,value:f}}s(ske,"getInlineCompletionsResult");async function Xae(t,e,r,n,i={}){Uxr(t,e,r);let o=await ske(t,VC(e,r),n,i);return fKe(t,o)}s(Xae,"getInlineCompletions");function Uxr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});BX.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(Uxr,"logCompletionLocation");var Fgt=Ne(cl());d();var Dgt=require("crypto");var CM=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new cke(e,this.id)}},cke=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(Dr),o=(0,Dgt.randomUUID)(),a=i.connection.onProgress(LG.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(LG.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function vM(t,e,r){try{let n=t.get(Oc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof CM&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof CM&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){un.error(t,"Failed to set context items on context providers",n)}}s(vM,"setContextItems");var ake={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function Bgt(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Lc(r.uri,i,ake);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Lc(r.uri,i.scheme||"",ake)),"pattern"in i&&(o&&=Lc(r.uri,i.pattern||"",ake)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Bgt,"match");d();var qxr=x.Object({documents:x.Array(x.String()),basename:x.Optional(x.String()),options:x.Optional(x.Object({}))}),SS=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function Hxr(t,e,r){return t.forceSet(SS,new SS(r.documents,r.basename||"")),["OK",null]}s(Hxr,"handleTestingSetCompletionDocumentsChecked");var Ngt=new Ct("setCompletionDocuments"),Lgt=Ze(qxr,Hxr);function Zae(t,e,r,n){let i=t.get(SS);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Ngt.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=$xr(i,r);return a&&a.length>0?Mgt(a,o,e):void 0}else return Ngt.debug(t,"Returning completions for all pre-set documents"),Mgt(i.documents,o,e)}}s(Zae,"getTestCompletions");function Mgt(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=Kae(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(Mgt,"sliceAndMapCompletions");function $xr(t,e){return t.basename===Pi(e)?t.documents||[]:[]}s($xr,"getFilteredDocs");var Ogt=x.Object({doc:x.Object({position:tu,insertSpaces:x.Optional(x.Boolean()),tabSize:x.Optional(x.Number()),uri:o6,version:x.Number()}),contextItems:x.Optional(bve)}),jq;async function Qgt(t,e,r,n){jq&&(jq.cancel(),jq.dispose()),jq=new vn.CancellationTokenSource;let i=new Xd([e,jq.token]);r.contextItems&&vM(t,r.contextItems);let o=Zae(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:Er(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await gy(t,r.doc,i)}catch(p){if(!(p instanceof Fgt.ResponseError))throw p;switch(p.code){case tr.CopilotNotAvailable:case tr.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await Xae(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get($s);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Qgt,"handleGetCompletionsHelper");var Ugt=Ze(Ogt,(t,e,r)=>Qgt(t,e,r,!1)),qgt=Ze(Ogt,(t,e,r)=>Qgt(t,e,r,!0));d();var Hgt=Ne(gI()),xM=Ne(cl());var Wxr=x.Object({doc:x.Object({position:tu,uri:o6,version:x.Number()}),panelId:x.String()});function jxr(t,e,r,n,i){let o=zae(i.completionText),a=(0,Hgt.SHA256)(o).toString();return t.get($s).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(jxr,"makeSolution");var lke=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Dr)}onSolution(e){return this.service.connection.sendNotification(new xM.NotificationType("PanelSolution"),jxr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return $gt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new xM.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function $gt(t,e){return e.connection.sendNotification(new xM.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s($gt,"reportDone");var Gq;async function Gxr(t,e,r){Gq&&(Gq.cancel(),Gq.dispose()),Gq=new vn.CancellationTokenSource;let n=new Xd([e,Gq.token]),i=r.doc.position,o=vs.range(i,i),a=new lke(t,r,o),c=t.get(Ay);if(c.documents){let l=c.documents;Jae(i,l,a)}else{let l;try{l=await gy(t,r.doc,n)}catch(f){if(!(f instanceof xM.ResponseError))throw f;switch(f.code){case tr.CopilotNotAvailable:case tr.ContentModified:return Vxr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new AM(l,i,n,10);Yae(t,u,a)}return[{solutionCountTarget:10},null]}s(Gxr,"handleGetPanelCompletionsChecked");async function Vxr(t,e){return await $gt(e.panelId,t.get(Dr)),[{solutionCountTarget:0},null]}s(Vxr,"produceEmptySolutions");var Wgt=Ze(Wxr,Gxr);d();var zxr=x.Object({});function Yxr(t,e,r){return[{version:t.get(Io).getDisplayVersion(),buildType:dC(t),runtimeVersion:`node/${process.versions.node}`},null]}s(Yxr,"handleGetVersionChecked");var jgt=Ze(zxr,Yxr);d();var Kxr=x.Object({changes:x.Array(x.String()),userCommits:x.Array(x.String()),recentCommits:x.Array(x.String()),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String())});async function Jxr(t,e,r){if(r.changes.length===0)return[null,{code:tr.InvalidRequest,message:"No changes provided"}];let n=t.get(eo),i=n.create({capabilities:{skills:[q1]}}),o=new hS({message:"",type:"user"});await n.addTurn(i.id,o);let a=mM({workDoneToken:Er()});await t.get(pa).begin(i,o,a);let u=(await new ES(t,i,o,e).skillResolver.resolve(q1))?.head?.name,p=await t.get(Lk).generateCommitMessage(t,e,r,u);return p==null?[null,{code:tr.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:p},null]}s(Jxr,"handleGitCommitGenerateChecked");var Ggt=Ze(Kxr,Jxr);d();var zgt=zpe.type,Vq;function Vgt(t){return{title:"Completion Accepted",command:tq,arguments:[t]}}s(Vgt,"makeCommand");async function Xxr(t,e,r){Vq&&(Vq.cancel(),Vq.dispose());let n=r.context.triggerKind===1;Vq=new vn.CancellationTokenSource;let i=Vq.token,o=new Xd([e,i]);r.contextItems&&vM(t,r.contextItems,r.data);let a=Zae(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:Vgt(Er()),...h}))},null];let c=await gy(t,r.textDocument,o),l=r.position,u=await Xae(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:tr.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get($s);for(let m of u)f.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Vgt(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(Xxr,"handleChecked");var Ygt=Ze(FX,(t,e,r)=>Xxr(t,e,r));d();var Kgt=Jpe.type,zq;async function eEr(t,e,r){zq&&(zq.cancel(),zq.dispose());let n=r.context.triggerKind===1;zq=new vn.CancellationTokenSource;let i=zq.token,o=new Xd([e,i]);r.contextItems&&vM(t,r.contextItems);let a=await gy(t,r.textDocument,o),c=await ske(t,VC(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(eEr,"handleChecked");var Jgt=Ze(FX,(t,e,r)=>eEr(t,e,r));d();d();function uke(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return EM(i)}s(uke,"asReadableCert");function EM(t){return t.replace(/\s/g,"")}s(EM,"normalizeNewlines");var rEr=x.Object({});async function nEr(t){return[{certificates:(await t.get(ml).getAllRootCAs()).map(EM)},null]}s(nEr,"handleListCertificatesChecked");var Xgt=Ze(rEr,nEr);d();d();var eAt=x.Object({url:x.String(),source:x.String(),id:x.String()}),tAt=x.Object({version:x.String(),release_date:x.String(),is_latest:x.Boolean()}),iEr=x.Object({id:x.String(),name:x.String(),description:x.String(),status:x.Optional(x.Union([x.Literal("active"),x.Literal("deprecated")])),repository:x.Optional(eAt),version_detail:tAt}),bAo=x.Object({servers:x.Array(iEr),next:x.Optional(x.String()),total_count:x.Number()}),Zgt=x.Union([x.Object({type:x.Literal("positional"),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String())),value_hint:x.Optional(x.String()),is_repeated:x.Optional(x.Boolean())}),x.Object({type:x.Literal("named"),name:x.String(),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String())),is_repeated:x.Optional(x.Boolean())})]),rAt=x.Object({name:x.String(),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String()))}),oEr=x.Object({registry_name:x.String(),name:x.String(),version:x.String(),runtime_hint:x.Optional(x.String()),runtime_arguments:x.Optional(x.Array(Zgt)),package_arguments:x.Optional(x.Array(Zgt)),environment_variables:x.Optional(x.Array(rAt))}),sEr=x.Object({transport_type:x.Union([x.Literal("streamable"),x.Literal("sse")]),url:x.String(),headers:x.Optional(x.Array(rAt))}),IAo=x.Object({id:x.String(),name:x.String(),description:x.String(),status:x.Optional(x.Union([x.Literal("active"),x.Literal("deprecated")])),repository:x.Optional(eAt),version_detail:tAt,packages:x.Optional(x.Array(oEr)),remotes:x.Optional(x.Array(sEr))}),nAt=x.Object({baseUrl:x.String(),limit:x.Optional(x.Number({minimum:1})),offset:x.Optional(x.Number({minimum:0,default:0}))}),iAt=x.Object({baseUrl:x.String(),id:x.String(),version:x.Optional(x.String())});async function aEr(t,e,r){if(!r.baseUrl)return[null,{code:tr.InvalidParams,message:"Base URL is required"}];let n=t.get($r),i=new URLSearchParams;r.limit!==void 0&&i.append("limit",r.limit.toString()),r.offset!==void 0&&i.append("offset",r.offset.toString());let o=`${r.baseUrl}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)return[null,{code:tr.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:tr.InternalError,message:`Failed to fetch servers from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(aEr,"handleListServersChecked");async function cEr(t,e,r){if(!r.baseUrl)return[null,{code:tr.InvalidParams,message:"Base URL is required"}];if(!r.id)return[null,{code:tr.InvalidParams,message:"Server ID is required"}];let n=t.get($r),i=new URLSearchParams;r.version!==void 0&&i.append("version",r.version);let o=`${r.baseUrl}/${r.id}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.status===404)return[null,{code:tr.InternalError,message:"Server not found"}];if(!a.ok)return[null,{code:tr.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:tr.InternalError,message:`Failed to fetch server from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(cEr,"handleGetServerChecked");var oAt=Ze(nAt,aEr),sAt=Ze(iAt,cEr);d();async function lEr(t,e,r){let n=t.get(ly);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=kl(r.textDocument.uri);t.get(BA).onUserPositionChange(i,new qr(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:tq,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(lEr,"handleChecked");var aAt=Ze(p6e,lEr);d();var dEr=x.Object({uuid:x.String({minLength:1}),acceptedLength:x.Optional(x.Number({minimum:1}))});function fEr(t,e,r){let n=t.get($s),i=n.get(r.uuid);return i&&(pEr(r,i)==="full"?(n.delete(r.uuid),F3(t,i,i.triggerCategory)):pee(t,i,r.acceptedLength,0,i.triggerCategory,"cumulative")),["OK",null]}s(fEr,"notifyAcceptedChecked");function pEr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}s(pEr,"getCompletionType");var cAt=Ze(dEr,fEr);d();var mEr=x.Object({uuids:x.Array(x.String())});function hEr(t,e,r){let n=t.get($s),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));fee(t,"ghostText",o.offset,o.uri,a),t.get(Zu).resetState()}return["OK",null]}s(hEr,"notifyRejectedChecked");var lAt=Ze(mEr,hEr);d();var gEr=x.Object({uuid:x.String({minLength:1})});function AEr(t,e,r){let i=t.get($s).get(r.uuid);return i&&NX(t,i.triggerCategory,i),["OK",null]}s(AEr,"notifyShownChecked");var uAt=Ze(gEr,AEr);d();var yEr=TKe;function CEr(t,e,r){let n=t.get(Oc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new CM(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(CEr,"registerContextProviders");var dAt=Ze(yEr,CEr);d();d();var vEr=x.Object({uri:x.Optional(x.String())}),xEr=x.Object({showEditorCompletions:x.Optional(x.Boolean()),enableAutoCompletions:x.Optional(x.Boolean()),delayCompletions:x.Optional(x.Boolean()),filterCompletions:x.Optional(x.Boolean())}),pAt=x.Object({github:x.Optional(x.Object({copilot:x.Optional(x.Object({}))})),[kDe]:x.Optional(vEr),http:x.Optional(KWe),telemetry:x.Optional(x.Object({telemetryLevel:x.Optional(x.String())}))}),Yq=Object.keys(pAt.properties).filter(t=>t!=="github"),EEr=x.Intersect([pAt,xEr]),bEr=x.Object({settings:x.Optional(x.Union([x.Object({}),x.Array(x.Unknown(),{maxItems:0})])),authProvider:x.Optional(x.Never())}),fAt=Xs.Compile(bEr),dke=Xs.Compile(EEr);async function tce(t,e){if(!fAt.Check(e))throw ece(t),new ad(fAt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;return r&&IEr(t,r),ece(t,r),Promise.resolve()}s(tce,"notifyChangeConfiguration");function IEr(t,e){for(let n of dke.Errors(e)){let i=n.path.split("/")?.[1];Tu.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[i]}if(!dke.Check(e))throw new ad(dke.Errors(e));e.http&&fke(t,e.http);let r=e["github-enterprise"];r&&P6e(t,r.uri),e.github?.copilot&&TEr(t,e.github.copilot)}s(IEr,"applySettingsToConfiguration");function TEr(t,e){let r=t.get(ig),n={};for(let i of Object.values(Ht)){let o=eje(e,i);n[i]=o}r.setCopilotSettings(n),typeof e.mcp=="string"&&_Er(t,e.mcp),e.agent&&typeof e.agent=="object"&&REr(t,e.agent),wEr(t,e.globalCopilotInstructions||""),SEr(t,e.globalGitCommitInstructions||"")}s(TEr,"applyCopilotConfiguration");function wEr(t,e){try{t.get(C1).setGlobalCopilotInstructions(e)}catch(r){Tu.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(wEr,"applyGlobalCopilotInstructionsConfiguration");function SEr(t,e){try{t.get(C1).setGlobalGitCommitInstructions(e)}catch(r){Tu.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(SEr,"applyGlobalGitCommitInstructionsConfiguration");function fke(t,e){let r=t.get(ig);e.proxy===void 0&&(e=JWe(r.env));try{r.setHttpSettings(IO(e))}catch(n){if(!(n instanceof TypeError))throw n;Tu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(fke,"applyHttpConfiguration");async function _Er(t,e){try{let r=JSON.parse(e||"{}");await t.get(eg).updateMCPServers(r)}catch(r){Tu.error(t,"Failed to apply MCP configuration",r)}}s(_Er,"applyMCPConfiguration");function REr(t,e){try{let r=e;t.get(rE).updateConfiguration(r.tools?.terminal?.autoApprove)}catch(r){Tu.error(t,"Failed to apply settings configuration",r)}}s(REr,"applyTerminalAutoApproveConfiguration");function ece(t,e){if(t.get(ig).markReady(),!t.get(Cs).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Pd).initialize(r)}}s(ece,"initializePostConfigurationDependencies");var mAt=x.Object({name:x.String(),version:x.String(),readableName:x.Optional(x.String())}),kEr=x.Object({editorInfo:mAt,editorPluginInfo:mAt,editorConfiguration:x.Optional(x.Object({}))});async function PEr(t,e,r){t.get(mn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Roe(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),await tce(t,{settings:r.editorConfiguration}),Bt(t,"setEditorInfo");for(let n of["github",...Yq])r.editorConfiguration&&n in r.editorConfiguration&&Bt(t,`setEditorInfo.editorConfiguration.${n}`);return["OK",null]}s(PEr,"handleSetEditorInfoChecked");var hAt=Ze(kEr,PEr);d();var DEr=x.Object({options:x.Optional(x.Object({}))});async function BEr(t,e,r){let n=t.get(wf),i=n.pendingSignIn?.status;if(i===void 0)return[null,{code:tr.InvalidRequest,message:"No pending sign in"}];let o;try{return o=await i,[o,null]}catch(a){return[null,{code:tr.DeviceFlowFailed,message:String(a)}]}finally{n.pendingSignIn=void 0}}s(BEr,"handleSignInConfirmChecked");var gAt=Ze(DEr,BEr);d();var NEr=x.Object({options:x.Optional(x.Object({})),githubAppId:x.Optional(x.String())});async function MEr(t,e,r){try{let i=await t.get(Yi).checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let a=await t.get(wf).initiate(r);return[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:koe,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof xa))throw n;return[null,{code:tr.DeviceFlowFailed,message:n.message}]}}s(MEr,"handleSignInInitiateChecked");var pke=Ze(NEr,MEr);d();var LEr=x.Object({githubToken:x.String({minLength:1}),user:x.String({minLength:1}),githubAppId:x.Optional(x.String({minLength:1}))});async function FEr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId,a=t.get(Yi);return[await t.get(wf).save({...a.getConfiguredUrls(),accessToken:n,login:i,githubAppId:o}),null]}s(FEr,"handleSignInWithGithubTokenChecked");var AAt=Ze(LEr,FEr);d();var OEr=x.Object({options:x.Optional(x.Object({}))});async function QEr(t,e,r){return[await t.get(wf).abandon(),null]}s(QEr,"handleSignOutChecked");var yAt=Ze(OEr,QEr);d();var UEr=x.Object({transaction:x.Optional(x.String()),stacktrace:x.Optional(x.String()),properties:x.Optional(x.Record(x.String(),x.String())),platform:x.Optional(x.String()),exception_detail:x.Optional(x.Array(x.Object({type:x.Optional(x.String()),value:x.Optional(x.String()),stacktrace:x.Optional(x.Array(x.Object({filename:x.Optional(x.String()),lineno:x.Optional(x.Union([x.String(),x.Integer()])),colno:x.Optional(x.Union([x.String(),x.Integer()])),function:x.Optional(x.String()),in_app:x.Optional(x.Boolean())})))})))}),mke=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function qEr(t,e,r){let n=t.get(Io),i=t.get(mn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&N1.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:mfe(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},N1.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new mke(r.stacktrace??"N/A",i.name);return c.stack=void 0,qa(t,c,void 0,o,a),["OK",null]}s(qEr,"handleTelemetryExceptionChecked");var CAt=Ze(UEr,qEr);d();d();d();function hke(t){let e=Date.now()+((t?.refresh_in??0)+jG)*1e3;return new a2({token:`test token ${Er()}`,refresh_in:0,expires_at:e,...t},void 0)}s(hke,"createTestCopilotToken");var bM=class extends Br{constructor(){super(...arguments);this.primed=!0}static{s(this,"FakeCopilotTokenManagerFromAuthManager")}async fetchCopilotToken(r){switch(r.accessToken){case"valid-github-token":return Promise.resolve(hke({token:"tid=valid-copilot-token"}));case"":return Promise.resolve(hke({token:"tid=test"}));case void 0:throw new df({reason:"NotSignedIn"});case"notauth-github-token":throw new df({reason:"NotAuthorized"});case"bogus-github-token":throw new df({reason:"NotAuthorized"});case"expired-github-token":throw new df({reason:"HTTP401"});default:throw new Error("Don't have a valid GitHub token")}}};var rce=class extends Br{constructor(r,n){super(r,!0);this.envelopeFn=n}static{s(this,"FakeCopilotTokenManager")}async fetchCopilotToken(){return hke(await this.envelopeFn())}};var HEr=x.Object({options:x.Optional(x.Object({}))});async function $Er(t,e,r){let n=new bM(t);return t.get(Yi).setTransientSession({accessToken:"valid-github-token",login:"always auth"}),t.forceSet(Br,n),t.get(So).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s($Er,"handleTestingAlwaysAuthChecked");var vAt=Ze(HEr,$Er);d();var WEr=x.Object({messages:x.Array(x.Object({role:x.Enum(Ka),content:x.String(),name:x.Optional(x.String())})),modelFamily:x.Optional(x.Enum(Wr)),stop:x.Optional(x.Array(x.String())),conversationOptions:x.Optional(x.Object({maxResponseTokens:x.Optional(x.Number()),temperature:x.Optional(x.Number())}))});async function jEr(t,e,r){let n=new Ja(t),i=await t.get(Xa).getBestChatModelConfig([r.modelFamily??Wr.CopilotBase]),o=await s7(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:U0.user("test",Er())},e,o),null]}s(jEr,"handleChatMLChecked");var xAt=Ze(WEr,jEr);d();d();d();var _M=Ne(Tyt(),1),Wvo={ALPN_HTTP2:_M.default.ALPN_HTTP2,ALPN_HTTP2C:_M.default.ALPN_HTTP2C,ALPN_HTTP1_1:_M.default.ALPN_HTTP1_1,ALPN_HTTP1_0:_M.default.ALPN_HTTP1_0},{fetch:jvo,context:wyt,reset:Gvo,noCache:Vvo,h1:zvo,keepAlive:Yvo,h1NoCache:Kvo,keepAliveNoCache:Jvo,cacheStats:Xvo,clearCache:Zvo,offPush:exo,onPush:txo,createUrl:rxo,timeoutSignal:nxo,Body:ixo,Headers:Syt,Request:oxo,Response:sxo,AbortController:axo,AbortError:Cce,AbortSignal:cxo,FetchBaseError:lxo,FetchError:uxo,ALPN_HTTP2:dxo,ALPN_HTTP2C:fxo,ALPN_HTTP1_1:pxo,ALPN_HTTP1_0:mxo}=_M.default;var Ryt=require("crypto"),kyt=require("http"),Pyt=require("stream"),Dyt=require("util"),kM=Ne(IA());var pTr=9e4,mTr=new kM.ProtocolRequestType("copilot/fetch"),hTr=new kM.ProtocolRequestType("copilot/fetchCancel"),gTr=new kM.ProgressType,ATr=new kM.ProtocolRequestType("copilot/fetchDisconnectAll"),X1=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},RM=class extends $r{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(Io).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Dr).connection.sendRequest(ATr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(Dr).connection,a=(0,Ryt.randomUUID)(),c=new vn.CancellationTokenSource,l=new Pyt.PassThrough,u=s(()=>{o.sendRequest(hTr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new Cce("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new X1("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Cce("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(gTr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),m.error&&l.emit("error",new X1(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new X1("Request timed out from lsp server"))},n.timeout??pTr),A=s(()=>{h(new Cce("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",A),o.sendRequest(mTr,CTr(r,a,n),c.token).then(m).catch(y=>{let E="EditorFetcher request failed";y&&typeof y=="object"&&"message"in y&&(E+=`: ${String(y.message)}`),y&&typeof y=="object"&&"data"in y&&(E+=`: ${(0,Dyt.inspect)(y.data)}`),h(new X1(E))}).finally(()=>{i?.removeEventListener("abort",A),clearTimeout(g)})});if(!p.status)throw new X1("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new FI(p.status,kyt.STATUS_CODES[p.status]??"",new Syt(p.headers),()=>yTr(l),()=>l)}};function yTr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(yTr,"consumeStream");function CTr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(CTr,"convertOptionsToParams");var vTr=x.Object({url:x.String(),headers:x.Optional(x.Record(x.String(),x.String())),body:x.Optional(x.String()),timeout:x.Optional(x.Number()),method:x.Optional(x.Union([x.Literal("GET"),x.Literal("POST"),x.Literal("DELETE")])),cancelBeforeRequest:x.Optional(x.Boolean()),cancelAfterRequest:x.Optional(x.Boolean()),cancelAfterFirstChunk:x.Optional(x.Boolean())});async function xTr(t,e,r){let n=new RM(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let m;try{m=await p}catch(A){return[{error:`Fetch stream error: ${A instanceof X1?A.message:String(A)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let y=m.body();for await(let E of y){let b=E.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let A=await m.text();return[{status:h,headers:g,body:A},null]}catch(A){return[{error:`Fetch stream error: ${A instanceof X1?A.message:String(A)}`},null]}}s(xTr,"handleTestingFetchChecked");var Byt=Ze(vTr,xTr);d();var ETr=x.Object({});async function bTr(t,e,r){return await t.get(Jc).flush(),["OK",null]}s(bTr,"handleTestingFlushPromiseQueueChecked");var Nyt=Ze(ETr,bTr);d();var ITr=x.Object({filePath:x.String(),code:x.String(),offset:x.Number(),languageId:x.String(),timeout:x.Optional(x.Number()),waitForContext:x.Optional(x.Boolean())});async function TTr(t,e,r){try{await t.get(P1).start();let n=t.get(cP),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,LX,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(TTr,"handleTestingGetContextChecked");var Myt=Ze(ITr,TTr);d();var wTr=x.Object({uri:x.String()});async function STr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(STr,"handleGetDocumentChecked");var Lyt=Ze(wTr,STr);d();var _Tr=x.Object({options:x.Optional(x.Object({}))});async function RTr(t,e,r){t.get(Yi).setTransientSession({}),t.get(Br).resetToken();try{await t.get(Br).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(RTr,"handleTestingNeverAuthChecked");var Fyt=Ze(_Tr,RTr);d();d();d();var Wke=class extends ml{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},Oyt=s(t=>new Wke(t),"createTestCertificateReader");function Gke(t,e,r){let n=new jke;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new FI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Gke,"createFakeResponse");function Qyt(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Gke(t,n,Object.assign({"content-type":"application/json"},r))}s(Qyt,"createFakeJsonResponse");var nH=class extends $r{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var vce=class extends nH{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var jke=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var Vke=class extends nH{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Qyt(200,this.fullConfig)):Promise.resolve(Gke(404,""))}},xce=class extends Vke{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var kTr=x.Object({expFlags:x.Record(x.String(),x.Union([x.String(),x.Number(),x.Boolean()]))});function PTr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet($r,new xce(n,t.get($r)))}return["OK",null]}s(PTr,"handleTestingOverrideExpFlagsChecked");var Uyt=Ze(kTr,PTr);d();var DTr=x.Object({rules:lve});function BTr(t,e,r){return t.get(ll).setTestingRules(r.rules),["OK",null]}s(BTr,"handleTestingSetContentExclusionRulesChecked");var qyt=Ze(DTr,BTr);d();var NTr=x.Object({workDoneToken:x.Union([x.String(),x.Number()]),chunks:x.Array(x.String()),followUp:x.Optional(x.String()),suggestedTitle:x.Optional(x.String()),skills:x.Optional(x.Array(x.String())),references:x.Optional(x.Array(fM)),options:x.Optional(x.Object({}))});function MTr(t,e,r){return t.get(LE).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(MTr,"handleTestingSetSyntheticTurnsChecked");var Hyt=Ze(NTr,MTr);d();var LTr=x.Object({});async function FTr(t,e,r){let n=t.get(rc),i=t.get(Kc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(FTr,"handleTriggerShowMessageChecked");var $yt=Ze(LTr,FTr);d();d();d();d();var Wyt=Ne(require("tls"));var Ece=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(ml)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=Wyt.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var PM=class extends $r{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new Ece(r),this.proxySocketFactory=r.get(g1),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(kc).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(kc).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(Io),o=this.proxySocketTimeoutForTesting;return wyt({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new c6(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new FI(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var iH=require("fs"),jyt=require("path");var DM=class extends Mi{static{s(this,"LocalFileSystem")}async readFileString(e){return(await iH.promises.readFile(nc(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(nc(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=nc(e),n=await iH.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,jyt.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await iH.promises.lstat(e);if(r.isSymbolicLink())try{let n=await iH.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var bce=class extends hy{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var Ice=class extends Cl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();var Tce=class extends $p{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};d();function OTr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(OTr,"fakeChatModelConfiguration");function QTr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(QTr,"fakeEmbeddingModelConfiguration");var wce=class extends Xa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(OTr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(QTr(e))}};d();var Sce=class extends qu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new _h}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},_ce=class extends rc{constructor(){super();this.sentMessages=[];this.warningPromises=[];this.informationPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}showInformationMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.informationPromises.push(i),i}async waitForMessages(){await Promise.all(this.warningPromises),await Promise.all(this.informationPromises)}};d();function Gyt(t,e,r,n){return bx.create($G(t),e,r,n,e)}s(Gyt,"createTextDocument");var zke=class extends Cr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new ja;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new ja;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new ja;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new ja;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Pi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=Gyt(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=Gyt(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},Rce=class extends zke{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var Yke=class extends Kc{static{s(this,"NullLog")}logIt(...e){}},Kke=class extends Yi{static{s(this,"TestAuthManager")}constructor(e,r){super(e,{}),this.transientSession=r&&Promise.resolve(r)}getPersistedSession(){return Promise.resolve(void 0)}};function UTr(t){let e=new o3;e.set(kc,t),e.set(uR,t);let r=new Kke(e,{accessToken:"",login:"user"});return e.set(Yi,r),e.set(Io,new Io),e.set(Fm,new Fm({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(ml,Oyt([])),e.set(g1,Kre(e)),e.set(pC,new pC),e.set(dA,new JG),e.set(lA,new lA),e.set(eC,new eC),e.set(Nu,new Nu(e,"tid=test",!0)),e.set(Uu,new Uu),e.set(rc,new _ce),e.set(qu,new Sce),e.set(Xy,new Q3),e.set(Kc,new Yke),e.set(lf,new lf),e.set(Ds,new Ds("test-session","test-machine")),e.set(uf,new d8(e)),e.set(Pd,new Pd(e,"copilot-test")),e.set(Mt,new Mt(e)),e.set(RA,new RA),e.set(xA,new DB),e.set(Br,new bM(e)),e.set(So,new KG),e.set(Jc,new Jc),e.set(UC,new UC(e)),e.set($p,new Tce),e.set(NA,new NA(e)),e.set(Lx,nee(e)),e.set(Zu,new Zu),e.set(S0,new S0),e.set(Fx,Fx.default),e.set(em,new em),e.set(uh,new uh(e,!1)),e.set(ru,new ru),e.set(En,new En(e)),e.set(Sf,new ZJ),e.set(ul,new ul),e.set(Oc,UX(e,(n,i,o)=>i.find(a=>a==="*")?1:i.find(a=>typeof a!="string"&&a.language===o.languageId)?10:0)),e.set(I0,new I0(e)),qTr(e),e.set(E0,new E0(e)),e.set(Cs,new Cs),e.set(jC,new N8),e.set(Rh,new Rh),e.set(q0,new q0),e.set(T1,new T1(e)),e}s(UTr,"_createBaselineContext");function qTr(t){t.set(eo,new eo(t)),t.set(pa,new pa(t)),t.set(ud,new ud(t)),t.set(Ql,new Ql),t.set(Iu,new Iu),t.set(Cl,new Ice),t.set(dg,new dg(t,[])),t.set(Xa,new wce),t.set(hy,new bce),t.set(Q1,new Q1(t)),t.set(gS,new gS),t.set(Ac,new Ac(t)),t.set(ld,new ld),t.set(dm,new dm)}s(qTr,"registerConversation");function Vyt(){let t=UTr(new uR(new BB,new Map));return t.set($r,new vce),t.set(mn,new Jke),t.set(Cr,new Rce(t)),t.set(Mi,new DM),t.set(ll,new ll(t)),t.set(Al,new Al(t)),t.set(od,new vne(t)),t.set(Th,new Th(t)),t.set(HC,new A3),t.set(ZA,new Vne),uoe(t),t}s(Vyt,"createLibTestingContext");var Jke=class extends mn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var Yyt=Ne(require("fs"));var zyt=`${process.env.HOME}/.copilot-testing-gh-token`,kce,Pce;function Kyt(t){let e=Jyt(),r=new rce(t,HTr);return t.forceSet(Br,r),t.get(Yi).setTransientSession(e),r}s(Kyt,"setIntegrationTokenManager");var HTr=s(async()=>{if(Pce)return Pce;let t=await Jyt(),e=Vyt(),r=new PM(e);return e.forceSet($r,r),Pce=GG(e,t).then(n=>{if(n.kind==="success")return{token:n.copilotToken.token,refresh_in:n.copilotToken.envelope.refresh_in};throw new xa('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Pce},"getEnvelope");async function Jyt(){let t=lme(process.env);if(t)return t;try{kce??=(await Yyt.promises.readFile(zyt)).toString().trim()}catch{kce??=process.env.GITHUB_TOKEN??""}if(!kce)throw new Error(`Tests: either GH_COPILOT_TOKEN, GITHUB_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${zyt}. Run "npm run get_token" to get one.`);return{...Cp({}),accessToken:kce,login:"copilot-client tests"}}s(Jyt,"getTestingGitHubSession");var $Tr=x.Object({options:x.Optional(x.Object({})),githubAppId:x.Optional(x.String())});async function WTr(t,e,r){return Kyt(t),await t.get(Br).primeToken(),["OK",null]}s(WTr,"handleTestingUseTestingTokenChecked");var Xyt=Ze($Tr,WTr);d();var jTr=x.Object({});async function GTr(t,e,r){return await new F8().uninstall(t),["OK",null]}s(GTr,"handleUninstallChecked");var Zyt=Ze(jTr,GTr);d();var VTr=wKe;function zTr(t,e,r){let n=t.get(Oc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(zTr,"unregisterContextProviders");var eCt=Ze(VTr,zTr);d();var Xke=Ne(require("os"));var YTr=x.Object({expectedCertificate:x.String()});async function KTr(t,e,r){let i=(await Yre(t).getAllRootCAs()).map(EM),o=EM(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${uke(o)}. Only found those installed on the system:${Xke.EOL}${i.map(a=>"- "+uke(a)).join(Xke.EOL)}`},null]}s(KTr,"handleVerifyCertificateChecked");var tCt=Ze(YTr,KTr);d();var JTr=x.Object({});async function XTr(){return[{status:!!await new KQ().load()},null]}s(XTr,"handleVerifyKerberosChecked");var rCt=Ze(JTr,XTr);d();var ZTr=x.Object({source:x.String(),version:x.Number(),uri:x.String()});async function ewr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(ewr,"handleVerifyStateChecked");var nCt=Ze(ZTr,ewr);d();var twr=x.Object({});function rwr(t,e,r){return[t.get(Cr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(rwr,"handleVerifyWorkspaceStateChecked");var iCt=Ze(twr,rwr);var DP=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function oCt(){let t=new Map;return t.set(zgt.method,Ygt),t.set(Kgt.method,Jgt),t.set("getCompletions",Ugt),t.set("getCompletionsCycling",qgt),t.set("getPanelCompletions",Wgt),t.set(bgt.method,Igt),t.set("getVersion",jgt),t.set("setEditorInfo",hAt),t.set("checkStatus",Cpt),t.set("checkQuota",ypt),t.set("checkFileStatus",gpt),t.set("signInInitiate",pke),t.set("signIn",pke),t.set("signInConfirm",gAt),t.set("signInWithGithubToken",AAt),t.set("signOut",yAt),t.set("notifyShown",uAt),t.set("notifyAccepted",cAt),t.set("notifyRejected",lAt),t.set("telemetry/exception",CAt),t.set("textDocument/copilotInlineEdit",aAt),t.set("testing/overrideExpFlags",Uyt),t.set("testing/alwaysAuth",vAt),t.set("testing/neverAuth",Fyt),t.set("testing/useTestingToken",Xyt),t.set("testing/setCompletionDocuments",Lgt),t.set("testing/setPanelCompletionDocuments",xgt),t.set("testing/triggerShowMessageRequest",$yt),t.set("testing/flushPromiseQueue",Nyt),t.set("testing/getDocument",Lyt),t.set("testing/chatml",xAt),t.set("testing/setSyntheticTurns",Hyt),t.set("testing/fetch",Byt),t.set("testing/setContentExclusionRules",qyt),t.set("testing/setCopilotEditsResponse",lgt),t.set("testing/getContext",Myt),t.set("uninstall",Zyt),t.set("debug/diagnostics",Rgt),t.set("debug/listCertificates",Xgt),t.set("debug/verifyState",nCt),t.set("debug/verifyCertificate",tCt),t.set("debug/verifyKerberos",rCt),t.set("debug/verifyWorkspaceState",iCt),t.set("context/registerProviders",dAt),t.set("context/unregisterProviders",eCt),t.set("conversation/preconditions",egt),t.set("conversation/persistence",Zht),t.set("conversation/create",Kht),t.set("conversation/turn",igt),t.set("conversation/turnDelete",ogt),t.set("conversation/destroy",Jht),t.set("conversation/rating",tgt),t.set("conversation/copyCode",Iht),t.set("conversation/insertCode",Tht),t.set("conversation/templates",ngt),t.set("conversation/agents",bht),t.set("conversation/registerTools",rgt),t.set("conversation/unregisterTools",sgt),t.set("conversation/notifyCodeAcceptance",Xht),t.set("copilot/models",ggt),t.set("copilot/byok/saveModel",hpt),t.set("copilot/byok/deleteModel",R0t),t.set("copilot/byok/listModels",ppt),t.set("copilot/byok/saveApiKey",mpt),t.set("copilot/byok/deleteApiKey",_0t),t.set("copilot/byok/listApiKeys",k0t),t.set("copilot/setModelPolicy",Agt),t.set("copilot/codeReview",agt),t.set("copilot/codeReview/reviewChanges",cgt),t.set("git/commitGenerate",Ggt),t.set("editConversation/create",ugt),t.set("editConversation/turn",fgt),t.set("editConversation/turnDelete",pgt),t.set("editConversation/destroy",dgt),t.set("mcp/getTools",mgt),t.set("mcp/updateToolsStatus",hgt),t.set("mcp/registry/listServers",oAt),t.set("mcp/registry/getServer",sAt),new DP(t)}s(oCt,"getAllMethods");d();d();d();var sCt=Ne(IA());var Z1=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new sCt.NotificationType(this.name)}};var nwr=new Ct("agentCopilotTokenManager");function ePe(t){try{let e=new URL(t||"https://api.github.com");if(e.protocol==="https:"&&e.hostname.startsWith("api."))return`${e.origin}/`}catch{}}s(ePe,"tokenEndpointToApiUrl");function iwr(t,e){if(!e.tokenEndpoint)return Cp(e);let r=ePe(e.tokenEndpoint);return r||nwr.warn(t,`Invalid token endpoint URL <${e.tokenEndpoint}>`),Cp({apiUrl:r})}s(iwr,"getUrlsFromParams");var Zke=class extends Z1{constructor(){super(...arguments);this.name=Wpe.method;this.params=t6e}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Yi),i=iwr(this.ctx,r);this.ctx.get(uf).setConfiguredUrls(this.ctx,i);let o=r.handle||r.login;o&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:o,githubAppId:r.githubAppId,...i}):n.setTransientSession({githubAppId:r.githubAppId,...i})}},aCt=[Zke];d();var tPe=class extends Z1{constructor(){super(...arguments);this.name=Ype.method;this.params=l6e}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get($s).get(n);o&&OXe(this.ctx,o)}},rPe=class extends Z1{constructor(){super(...arguments);this.name=Xpe.method;this.params=m6e}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(ly).handleShown(n)}},nPe=class extends Z1{constructor(){super(...arguments);this.name=Kpe.method;this.params=u6e}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get($s),a=o.get(n);a&&(i>=a.insertText.length?(o.delete(n),F3(this.ctx,a)):pee(this.ctx,a,i,void 0,void 0,"cumulative"))}},cCt=[tPe,rPe,nPe];d();var Dce=class extends Z1{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=x.Object({token:x.Union([x.String(),x.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Uf).cancel(r.token)}};var owr=[...aCt,...cCt,Dce];function lCt(t,e){for(let r of owr){let n=new r(t),i=Xs.Compile(n.params);e.onNotification(n.type,eu(t,async o=>{bE(o),i.Check(o)?await n.handle(o):Tu.error(t,`Notification ${n.name}:`,new ad(i.Errors(o)))},`Notification ${n.name}`))}}s(lCt,"registerNotifications");d();var Bce=Ne(cl());var uCt=new Ct("AgentTextDocumentConfiguration"),iPe=class{constructor(e){this.ctx=e;this.#e=new ja;this.onDidChange=this.#e.event}static{s(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,i){try{return bx.create(e,r,n,i)}catch(o){throw uCt.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Bce.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.#e.fire(o),bx.withChanges(e,r,n)}catch(i){throw uCt.exception(this.ctx,i,".update"),i}}},kS=class extends Cr{constructor(){super(...arguments);this.#e=new ja;this.onDidOpenTextDocument=this.#e.event;this.#t=new ja;this.onDidCloseTextDocument=this.#t.event;this.#i=new ja;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new iPe(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new Bce.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[]}static{s(this,"AgentTextDocumentManager")}#e;#t;#i;get connection(){return this.ctx.get(Dr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(kl(i.uri),o),this.#e.fire({document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=kl(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=kl(n.textDocument.uri);this._documents.delete(i),this.#t.fire({document:{uri:i}})}),this.connection.onNotification(Vpe.type,n=>{let i=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in i?{document:i}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(kl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var dCt=Xs.Compile(s6e);function bE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=bE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=bE(e[r])}return t}}s(bE,"purgeNulls");var fCt=["github.copilot",...Yq],Dr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.deactivated=!1;this.handleDidChangeConfiguration=s(async e=>{try{if(this.#t?.workspace?.configuration&&e&&typeof e=="object"&&!("settings"in e)){let n=await this.connection.workspace.getConfiguration(fCt.map(o=>({section:o}))),i={github:{copilot:n.shift()}};for(let o of Yq)i[o]=n.shift();e.settings=i}return tce(this.ctx,bE(e))}catch(r){Tu.exception(this.ctx,r,"didChangeConfiguration")}},"handleDidChangeConfiguration");this.#i=this.ctx.get(Kc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),lCt(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(Io).getDisplayVersion(),nodeVersion:process.versions.node};function i(a){try{e.get(kS).didChangeWorkspaceFolders(a),e.get(em).emit(a)}catch(c){Tu.exception(e,c,"didChangeWorkspaceFolders")}}s(i,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:a,uri:c})=>i({added:[{uri:c,name:a??c}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:a,uri:c})=>i({added:[],removed:[{uri:c,name:a??c}]})),r.onInitialize(a=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=a.capabilities;let c=a.capabilities.copilot,l=bE(a.initializationOptions);if(l){if(!dCt.Check(l))throw new ad(dCt.Errors(l));let m=l,h=e.get(mn);m.editorPluginInfo?h.setEditorAndPluginInfo({version:"unknown",...m.editorPluginInfo},m.editorInfo&&{version:"unknown",...m.editorInfo},m.relatedPluginInfo??[]):Tu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),m.copilotIntegrationId&&h.setCopilotIntegrationId(m.copilotIntegrationId),m.githubAppId&&(e.get(ru).githubAppId=m.githubAppId),m.copilotCapabilities&&(c=m.copilotCapabilities)}let u=a.capabilities.workspace?.workspaceFolders??!1;e.get(kS).init(a.workspaceFolders??[]),wJe(this.ctx),e.get(em).emit({added:a.workspaceFolders??[],removed:[]}),c&&(e.get(Cs).setCapabilities(c),"openURL"in c&&Roe(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let p=s(async()=>{this.initialized||(this.initialized=!0,Tu.info(e,`${n.name} ${n.version} initialized`),e.get(Br).primeToken(),u&&r.workspace.onDidChangeWorkspaceFolders(i),a.capabilities.workspace?.didChangeConfiguration?.dynamicRegistration&&await r.client.register(mm.DidChangeConfigurationNotification.type,{section:fCt}),a.capabilities.workspace?.configuration?await this.handleDidChangeConfiguration({}):await Promise.race([this.ctx.get(ig).requireReady().then(()=>!0),new Promise(g=>setTimeout(()=>g(!1),200))])||ece(e),!this.deactivated&&new F8().startup(e).catch(()=>{}))},"onInitialized");return r.onInitialized(eu(e,p,"onInitialized")),e.get(L1).init(),c?.token&&e.get(Yi).setTransientSession({}),c?.redirectedTelemetry&&S0t(e),pCt.lt(process.versions.node,"20.8.0")&&Tu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:mm.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:u,changeNotifications:u}},executeCommandProvider:{commands:b0t(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(a=>void this.handleDidChangeConfiguration(a)),r.listen();let o=new Doe;this.ctx.forceSet(Kc,o)}async messageHandler(e,r,n){let i=this.ctx.get(DP).handlers.get(e);if(!i)return new mm.ResponseError(tr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new mm.ResponseError(tr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new mm.ResponseError(tr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!T0t(this.ctx.get(mn)))throw new mm.ResponseError(tr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),bE(r);try{let[o,a]=await i(this.ctx,n,r);return a?new mm.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new mm.ResponseError(tr.RequestCancelled,"Request was canceled");if(o instanceof xa)return new mm.ResponseError(tr.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof mm.ResponseError||Tu.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(dy).dispose()}catch(e){Tu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Kc,this.#i),await(this.#e??=this.deactivate())}markDeactivated(){this.deactivated=!0,this.ctx.get(ig).markReady()}async deactivate(){let e=this.ctx;this.markDeactivated(),Bxe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Jc).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Uu).deactivate()])}dispose(){this.markDeactivated(),this.connection.dispose()}},Tu=new Ct("lsp");var Nce=class t extends YR{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Dr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),Ll.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){Ll.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(Cs).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return Ll.debug(this.context,"`copilot/related` not supported"),_Je;try{let a=await this.service.connection.sendRequest(Zpe.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){Ll.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){Ll.exception(r,o,"copilotRelated")}}};d();d();d();var Mce=new Ct("OAuth Code Flow");function oPe(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(oPe,"arrayEquals");function mCt(t){return t===BP.providerId?{client_id:vp,client_secret:tje}:null}s(mCt,"getClientInfoFromAuthServer");var sPe=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var BP=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{s(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,i=e?.sort()||[];return i.length?n.filter(a=>oPe([...a.scopes].sort(),i)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(Ai).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),i=await this._sessionsPromise,o=await this.tokenToSession(r,e);this.afterSessionLoad(o);let a=i.findIndex(l=>l.account.id===o.account.id&&oPe([...l.scopes].sort(),n)),c=new Array;return a>-1?c.push(...i.splice(a,1,o)):i.push(o),await this.storeSessions(i),o}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(Ai).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((i,o)=>i+=o.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get($r).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(i){return Mce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}if(n.ok)try{let i=await n.json();return{id:`${i.id}`,accountName:i.login}}catch(i){return Mce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}else{let i=n.statusText;try{let o=await n.json();o.message&&(i=o.message)}catch{}return Mce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(i=>i.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:i}=await this.getUserInfo(r);return!n||!i}};var Lce=class extends uy{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{s(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(i=>i===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===BP.providerId){let n=new BP(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,i,o=!1){let a=this._authenticationProviders.get(r);if(a){if(i?.authorizationServer){let c=i.authorizationServer;if(!a.authorizationServers?.some(l=>l===c))throw new Error(`The authorization server '${c}' is not supported by the authentication provider '${r}'.`)}return await a.getSessions(n,{...i})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};d();var hCt=Ne(cl());var aPe=new Ct("agentCopilotTokenManager"),swr={type:new hCt.ProtocolRequestType("copilot/token")},oH=class extends Br{static{s(this,"AgentCopilotTokenManager")}async fetchCopilotToken(e){let r=this.ctx;if(!r.get(Cs).getCapabilities().token)return super.fetchCopilotToken(e);let n=r.get(Dr).connection;try{this.didChangeToken??=n.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let i=await n.sendRequest(swr.type,{force:!1,session:e});if(!i?.envelope)throw aPe.debug(r,"Envelope missing from copilot/token response"),new df({reason:"NotSignedIn",message:"Editor did not return a token"});let{envelope:o,tokenEndpoint:a}=i;if(aPe.debug(r,"Retrieved envelope from copilot/token"),o.expires_at*1e3<Date.now())throw new xa("Expired token in copilot/token response");a!==void 0&&ePe(a)!==e.apiUrl&&aPe.exception(r,new Error(`Token endpoint ${a} does not match API URL ${e.apiUrl}`),".fetchCopilotToken");let c=new a2(o,void 0);return a6(r,c),c}catch(i){throw i instanceof Error?new xa(i.message,i):i}}};d();var awr=new Ct("Public Code References"),Fce=class extends Sf{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");awr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(Cs).getCapabilities().ipCodeCitation===!0&&await e.get(Dr).connection.sendNotification(jpe.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function gCt(t){cwr(t)}s(gCt,"activateExtensibilityPlatformFeature");function cwr(t){t.set(hy,new xae(t)),t.set(Q1,new Q1(t))}s(cwr,"registerContextDependencies");d();var ACt=x.String(),cPe=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Qce,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Qce="build-logs",Oce=class extends Eu{static{s(this,"BuildLogsSkill")}constructor(e){super(Qce,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new cPe(r))}};d();var lPe=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await Bae(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Ut(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Ut([o]),1]);return new Ut(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},uPe=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},lwr="directory-references",Uce=class{constructor(){this.id=lwr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new uPe}processor(e){return new lPe(e)}};d();var uwr=x.Object({uri:x.String(),visibleRange:x.Optional(Pc),openedAt:x.Optional(x.String()),activeAt:x.Optional(x.String())}),yCt=x.Object({files:x.Array(uwr)}),dwr=3,dPe=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=yS(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(En),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=oa(a);if(await this.turnContext.collectFile(Hce,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===dwr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(En).getRelativePath(n),a=new U1(n,void 0,i.visibleRange);return new Ut([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Jo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},Hce="recent-files",qce=class extends Eu{static{s(this,"RecentFilesSkill")}constructor(e){super(Hce,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new dPe(r))}};d();var CCt=x.String(),fPe=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Wce,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},Wce="runtime-logs",$ce=class extends Eu{static{s(this,"RuntimeLogsSkill")}constructor(e){super(Wce,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new fPe(r))}};d();var jce=Ne(IA());var Gce=class extends Cl{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return hj(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Dr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/documentDiff"),r)}};d();var vCt=Ne(cl());var sH=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(dg).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Dr).connection.sendNotification(new vCt.NotificationType(this.notificationEndpoint),e)}};function xCt(t){fwr(t),pwr(t),gCt(t)}s(xCt,"activateConversationFeature");function fwr(t){t.set(eo,new eo(t)),t.set(Iu,new Iu),t.set(ud,new ud(t)),t.set(Xa,new yne(t)),t.set(LE,new LE),t.set(pa,new pa(t)),t.set(dg,new dg(t)),t.set(sH,new sH(t)),t.set(xf,new qY(t,new UY(t))),t.set(FE,new FE),t.set(gS,new gS),t.set(Cl,new Gce(t)),t.set(Ac,new Ac(t)),t.set(ld,new ld),t.set(dm,new dm)}s(fwr,"registerContextDependencies");function pwr(t){let e=new Ql;e.registerSkill(new _se(new Sse(t))),e.registerSkill(new eae(new Qf(t,G1,fht))),e.registerSkill(new kse(new Qf(t,py,imt))),e.registerSkill(new fse(new Qf(t,Yd,wpt))),e.registerSkill(new tae),e.registerSkill(new Uce),e.registerSkill(new qce(new Qf(t,Hce,yCt))),e.registerSkill(new pse(new Qf(t,q1,_pt))),e.registerSkill(new Dse(new Qf(t,CS,mmt))),e.registerSkill(new $ce(new Qf(t,Wce,CCt))),e.registerSkill(new Oce(new Qf(t,Qce,ACt))),e.registerSkill(new Nse(new Qf(t,my,hmt))),e.registerSkill(new Mse(new Qf(t,AP,Amt))),t.set(Ql,e)}s(pwr,"registerSkills");d();var ECt=Ne(pi());var Vce=class extends od{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(Dr).connection.sendProgress(new ECt.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var bCt=Ne(cl()),ICt=Ne(IA());var zce=class extends y1{constructor(){super(...arguments);this.requestType=new bCt.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Xs.Compile(i0t)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(Dr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new ICt.ResponseError(l.code,l.message,l.data);throw en.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new ad(this.typeCheck.Errors(o));return o}};d();var TCt=Ne(cl()),wCt=Ne(IA());var Yce=class extends Bw{constructor(){super(...arguments);this.requestType=new TCt.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Xs.Compile(n0t)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(Dr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new wCt.ResponseError(l.code,l.message,l.data);throw en.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new ad(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Li(i.value):new iP(i.value));return new go(n,r.status??"success")}};d();d();function SCt(t,e,r){try{let n=t.get(Mt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return un.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(SCt,"fillInJavaActiveExperiments");var pPe=Ne(IA());var mwr={type:new pPe.NotificationType("featureFlagsNotification")},hwr={type:new pPe.NotificationType("copilot/didChangeFeatureFlags")},aH=class{constructor(e){this.ctx=e;Ps(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Mt).updateExPValuesAndAssignments(),o={};r.get(Mt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Sve(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;gKe(r,a,c,i),MX(r,c,i),SCt(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(Cs),u=r.get(Dr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(hwr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(f.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(f.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(mwr.type,f)}}};d();var Kce=class extends So{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(Dr).connection.sendNotification(eme.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(Dr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var _Ct=new DM;d();d();d();var gi=new Ct("CopilotMCP");async function mPe(t,e){await t.get(ZA).notifyLog(e)}s(mPe,"notifyMCPRuntimeLog");async function hm(t,e){await mPe(t,{...e,level:"error"})}s(hm,"notifyMCPRuntimeError");async function NP(t,e){await mPe(t,{...e,level:"warning"})}s(NP,"notifyMCPRuntimeWarning");async function ql(t,e){await mPe(t,{...e,level:"info"})}s(ql,"notifyMCPRuntimeInfo");d();d();var No;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(No||(No={}));var gPe;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gPe||(gPe={}));var Sr=No.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$E=s(t=>{switch(typeof t){case"undefined":return Sr.undefined;case"string":return Sr.string;case"number":return isNaN(t)?Sr.nan:Sr.number;case"boolean":return Sr.boolean;case"function":return Sr.function;case"bigint":return Sr.bigint;case"symbol":return Sr.symbol;case"object":return Array.isArray(t)?Sr.array:t===null?Sr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Sr.promise:typeof Map<"u"&&t instanceof Map?Sr.map:typeof Set<"u"&&t instanceof Set?Sr.set:typeof Date<"u"&&t instanceof Date?Sr.date:Sr.object;default:return Sr.unknown}},"getParsedType"),Ot=No.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),gwr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),gm=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,No.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};gm.create=t=>new gm(t);var MM=s((t,e)=>{let r;switch(t.code){case Ot.invalid_type:t.received===Sr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ot.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,No.jsonStringifyReplacer)}`;break;case Ot.unrecognized_keys:r=`Unrecognized key(s) in object: ${No.joinValues(t.keys,", ")}`;break;case Ot.invalid_union:r="Invalid input";break;case Ot.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${No.joinValues(t.options)}`;break;case Ot.invalid_enum_value:r=`Invalid enum value. Expected ${No.joinValues(t.options)}, received '${t.received}'`;break;case Ot.invalid_arguments:r="Invalid function arguments";break;case Ot.invalid_return_type:r="Invalid function return type";break;case Ot.invalid_date:r="Invalid date";break;case Ot.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:No.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ot.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ot.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ot.custom:r="Invalid input";break;case Ot.invalid_intersection_types:r="Intersection results could not be merged";break;case Ot.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ot.not_finite:r="Number must be finite";break;default:r=e.defaultError,No.assertNever(t)}return{message:r}},"errorMap"),DCt=MM;function Awr(t){DCt=t}s(Awr,"setErrorMap");function Jce(){return DCt}s(Jce,"getErrorMap");var Xce=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),ywr=[];function mr(t,e){let r=Jce(),n=Xce({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===MM?void 0:MM].filter(i=>!!i)});t.common.issues.push(n)}s(mr,"addIssueToContext");var Zd=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return zn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return zn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},zn=Object.freeze({status:"aborted"}),NM=s(t=>({status:"dirty",value:t}),"DIRTY"),qf=s(t=>({status:"valid",value:t}),"OK"),APe=s(t=>t.status==="aborted","isAborted"),yPe=s(t=>t.status==="dirty","isDirty"),MP=s(t=>t.status==="valid","isValid"),uH=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Zce(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Zce,"__classPrivateFieldGet");function BCt(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(BCt,"__classPrivateFieldSet");var Zr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Zr||(Zr={}));var cH,lH,mg=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},RCt=s((t,e)=>{if(MP(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new gm(t.common.issues);return this._error=r,this._error}}},"handleResult");function yi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(yi,"processCreateParams");var Ci=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return $E(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:$E(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zd,ctx:{common:e.parent.common,data:e.data,parsedType:$E(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(uH(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$E(e)},o=this._parseSync({data:e,path:i.path,parent:i});return RCt(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$E(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return MP(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>MP(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$E(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(uH(i)?i:Promise.resolve(i));return RCt(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Ot.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Am({schema:this,typeName:$n.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return pg.create(this,this._def)}nullable(){return tv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jE.create(this)}promise(){return BS.create(this,this._def)}or(e){return HP.create([this,e],this._def)}and(e){return $P.create(this,e,this._def)}transform(e){return new Am({...yi(this._def),schema:this,typeName:$n.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new zP({...yi(this._def),innerType:this,defaultValue:r,typeName:$n.ZodDefault})}brand(){return new dH({typeName:$n.ZodBranded,type:this,...yi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new YP({...yi(this._def),innerType:this,catchValue:r,typeName:$n.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return fH.create(this,e)}readonly(){return KP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Cwr=/^c[^\s-]{8,}$/i,vwr=/^[0-9a-z]+$/,xwr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ewr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bwr=/^[a-z0-9_-]{21}$/i,Iwr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Twr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wwr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Swr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",hPe,_wr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rwr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,kwr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Pwr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dwr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bwr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NCt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Nwr=new RegExp(`^${NCt}$`);function MCt(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(MCt,"timeRegexSource");function Mwr(t){return new RegExp(`^${MCt(t)}$`)}s(Mwr,"timeRegex");function LCt(t){let e=`${NCt}T${MCt(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(LCt,"datetimeRegex");function Lwr(t,e){return!!((e==="v4"||!e)&&_wr.test(t)||(e==="v6"||!e)&&kwr.test(t))}s(Lwr,"isValidIP");function Fwr(t,e){if(!Iwr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(Fwr,"isValidJWT");function Owr(t,e){return!!((e==="v4"||!e)&&Rwr.test(t)||(e==="v6"||!e)&&Pwr.test(t))}s(Owr,"isValidCidr");var PS=class t extends Ci{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Sr.string){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.string,received:o.parsedType}),zn}let n=new Zd,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?mr(i,{code:Ot.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&mr(i,{code:Ot.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")wwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"email",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")hPe||(hPe=new RegExp(Swr,"u")),hPe.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"emoji",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Ewr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"uuid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")bwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"nanoid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Cwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cuid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")vwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cuid2",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")xwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"ulid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),mr(i,{validation:"url",code:Ot.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"regex",code:Ot.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?LCt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Nwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Mwr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Twr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"duration",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Lwr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"ip",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?Fwr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"jwt",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Owr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cidr",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Dwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"base64",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Bwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"base64url",code:Ot.invalid_string,message:o.message}),n.dirty()):No.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ot.invalid_string,...Zr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Zr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Zr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Zr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Zr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Zr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Zr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Zr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Zr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Zr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Zr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Zr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Zr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Zr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Zr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Zr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Zr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Zr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Zr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Zr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Zr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Zr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Zr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Zr.errToObj(r)})}nonempty(e){return this.min(1,Zr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};PS.create=t=>{var e;return new PS({checks:[],typeName:$n.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...yi(t)})};function Qwr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(Qwr,"floatSafeRemainder");var LP=class t extends Ci{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Sr.number){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.number,received:o.parsedType}),zn}let n,i=new Zd;for(let o of this._def.checks)o.kind==="int"?No.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Qwr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_finite,message:o.message}),i.dirty()):No.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Zr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Zr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Zr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Zr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Zr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&No.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};LP.create=t=>new LP({checks:[],typeName:$n.ZodNumber,coerce:t?.coerce||!1,...yi(t)});var FP=class t extends Ci{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Sr.bigint)return this._getInvalidInput(e);let n,i=new Zd;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):No.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return mr(r,{code:Ot.invalid_type,expected:Sr.bigint,received:r.parsedType}),zn}gte(e,r){return this.setLimit("min",e,!0,Zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Zr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};FP.create=t=>{var e;return new FP({checks:[],typeName:$n.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...yi(t)})};var OP=class extends Ci{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Sr.boolean){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.boolean,received:n.parsedType}),zn}return qf(e.data)}};OP.create=t=>new OP({typeName:$n.ZodBoolean,coerce:t?.coerce||!1,...yi(t)});var QP=class t extends Ci{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Sr.date){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.date,received:o.parsedType}),zn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_date}),zn}let n=new Zd,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):No.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Zr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Zr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};QP.create=t=>new QP({checks:[],coerce:t?.coerce||!1,typeName:$n.ZodDate,...yi(t)});var LM=class extends Ci{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Sr.symbol){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.symbol,received:n.parsedType}),zn}return qf(e.data)}};LM.create=t=>new LM({typeName:$n.ZodSymbol,...yi(t)});var UP=class extends Ci{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Sr.undefined){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.undefined,received:n.parsedType}),zn}return qf(e.data)}};UP.create=t=>new UP({typeName:$n.ZodUndefined,...yi(t)});var qP=class extends Ci{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Sr.null){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.null,received:n.parsedType}),zn}return qf(e.data)}};qP.create=t=>new qP({typeName:$n.ZodNull,...yi(t)});var DS=class extends Ci{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return qf(e.data)}};DS.create=t=>new DS({typeName:$n.ZodAny,...yi(t)});var WE=class extends Ci{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return qf(e.data)}};WE.create=t=>new WE({typeName:$n.ZodUnknown,...yi(t)});var vy=class extends Ci{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return mr(r,{code:Ot.invalid_type,expected:Sr.never,received:r.parsedType}),zn}};vy.create=t=>new vy({typeName:$n.ZodNever,...yi(t)});var FM=class extends Ci{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Sr.undefined){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.void,received:n.parsedType}),zn}return qf(e.data)}};FM.create=t=>new FM({typeName:$n.ZodVoid,...yi(t)});var jE=class t extends Ci{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Sr.array)return mr(r,{code:Ot.invalid_type,expected:Sr.array,received:r.parsedType}),zn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(mr(r,{code:a?Ot.too_big:Ot.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(mr(r,{code:Ot.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(mr(r,{code:Ot.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new mg(r,a,r.path,c)))).then(a=>Zd.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new mg(r,a,r.path,c)));return Zd.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Zr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Zr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Zr.toString(r)}})}nonempty(e){return this.min(1,e)}};jE.create=(t,e)=>new jE({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$n.ZodArray,...yi(e)});function BM(t){if(t instanceof z0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=pg.create(BM(n))}return new z0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof jE?new jE({...t._def,type:BM(t.element)}):t instanceof pg?pg.create(BM(t.unwrap())):t instanceof tv?tv.create(BM(t.unwrap())):t instanceof ev?ev.create(t.items.map(e=>BM(e))):t}s(BM,"deepPartialify");var z0=class t extends Ci{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=No.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Sr.object){let u=this._getOrReturnCtx(e);return mr(u,{code:Ot.invalid_type,expected:Sr.object,received:u.parsedType}),zn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof vy&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new mg(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof vy){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(mr(i,{code:Ot.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new mg(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>Zd.mergeObjectSync(n,u)):Zd.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Zr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Zr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:$n.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return No.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return No.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return BM(this)}partial(e){let r={};return No.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return No.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof pg;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return FCt(No.objectKeys(this.shape))}};z0.create=(t,e)=>new z0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:vy.create(),typeName:$n.ZodObject,...yi(e)});z0.strictCreate=(t,e)=>new z0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:vy.create(),typeName:$n.ZodObject,...yi(e)});z0.lazycreate=(t,e)=>new z0({shape:t,unknownKeys:"strip",catchall:vy.create(),typeName:$n.ZodObject,...yi(e)});var HP=class extends Ci{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new gm(c.ctx.common.issues));return mr(r,{code:Ot.invalid_union,unionErrors:a}),zn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new gm(l));return mr(r,{code:Ot.invalid_union,unionErrors:c}),zn}}get options(){return this._def.options}};HP.create=(t,e)=>new HP({options:t,typeName:$n.ZodUnion,...yi(e)});var HE=s(t=>t instanceof WP?HE(t.schema):t instanceof Am?HE(t.innerType()):t instanceof jP?[t.value]:t instanceof GP?t.options:t instanceof VP?No.objectValues(t.enum):t instanceof zP?HE(t._def.innerType):t instanceof UP?[void 0]:t instanceof qP?[null]:t instanceof pg?[void 0,...HE(t.unwrap())]:t instanceof tv?[null,...HE(t.unwrap())]:t instanceof dH||t instanceof KP?HE(t.unwrap()):t instanceof YP?HE(t._def.innerType):[],"getDiscriminator"),ele=class t extends Ci{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.object)return mr(r,{code:Ot.invalid_type,expected:Sr.object,received:r.parsedType}),zn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(mr(r,{code:Ot.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),zn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=HE(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:$n.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...yi(n)})}};function CPe(t,e){let r=$E(t),n=$E(e);if(t===e)return{valid:!0,data:t};if(r===Sr.object&&n===Sr.object){let i=No.objectKeys(e),o=No.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=CPe(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Sr.array&&n===Sr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=CPe(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Sr.date&&n===Sr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(CPe,"mergeValues");var $P=class extends Ci{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(APe(o)||APe(a))return zn;let c=CPe(o.value,a.value);return c.valid?((yPe(o)||yPe(a))&&r.dirty(),{status:r.value,value:c.data}):(mr(n,{code:Ot.invalid_intersection_types}),zn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};$P.create=(t,e,r)=>new $P({left:t,right:e,typeName:$n.ZodIntersection,...yi(r)});var ev=class t extends Ci{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.array)return mr(n,{code:Ot.invalid_type,expected:Sr.array,received:n.parsedType}),zn;if(n.data.length<this._def.items.length)return mr(n,{code:Ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),zn;!this._def.rest&&n.data.length>this._def.items.length&&(mr(n,{code:Ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new mg(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Zd.mergeArray(r,a)):Zd.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ev.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ev({items:t,typeName:$n.ZodTuple,rest:null,...yi(e)})};var tle=class t extends Ci{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.object)return mr(n,{code:Ot.invalid_type,expected:Sr.object,received:n.parsedType}),zn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new mg(n,c,n.path,c)),value:a._parse(new mg(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Zd.mergeObjectAsync(r,i):Zd.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ci?new t({keyType:e,valueType:r,typeName:$n.ZodRecord,...yi(n)}):new t({keyType:PS.create(),valueType:e,typeName:$n.ZodRecord,...yi(r)})}},OM=class extends Ci{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.map)return mr(n,{code:Ot.invalid_type,expected:Sr.map,received:n.parsedType}),zn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new mg(n,c,n.path,[u,"key"])),value:o._parse(new mg(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return zn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return zn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};OM.create=(t,e,r)=>new OM({valueType:e,keyType:t,typeName:$n.ZodMap,...yi(r)});var QM=class t extends Ci{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.set)return mr(n,{code:Ot.invalid_type,expected:Sr.set,received:n.parsedType}),zn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(mr(n,{code:Ot.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(mr(n,{code:Ot.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return zn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new mg(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Zr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Zr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};QM.create=(t,e)=>new QM({valueType:t,minSize:null,maxSize:null,typeName:$n.ZodSet,...yi(e)});var rle=class t extends Ci{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.function)return mr(r,{code:Ot.invalid_type,expected:Sr.function,received:r.parsedType}),zn;function n(c,l){return Xce({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jce(),MM].filter(u=>!!u),issueData:{code:Ot.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return Xce({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jce(),MM].filter(u=>!!u),issueData:{code:Ot.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof BS){let c=this;return qf(async function(...l){let u=new gm([]),f=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return qf(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new gm([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new gm([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ev.create(e).rest(WE.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ev.create([]).rest(WE.create()),returns:r||WE.create(),typeName:$n.ZodFunction,...yi(n)})}},WP=class extends Ci{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};WP.create=(t,e)=>new WP({getter:t,typeName:$n.ZodLazy,...yi(e)});var jP=class extends Ci{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return mr(r,{received:r.data,code:Ot.invalid_literal,expected:this._def.value}),zn}return{status:"valid",value:e.data}}get value(){return this._def.value}};jP.create=(t,e)=>new jP({value:t,typeName:$n.ZodLiteral,...yi(e)});function FCt(t,e){return new GP({values:t,typeName:$n.ZodEnum,...yi(e)})}s(FCt,"createZodEnum");var GP=class t extends Ci{static{s(this,"ZodEnum")}constructor(){super(...arguments),cH.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return mr(r,{expected:No.joinValues(n),received:r.parsedType,code:Ot.invalid_type}),zn}if(Zce(this,cH,"f")||BCt(this,cH,new Set(this._def.values),"f"),!Zce(this,cH,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return mr(r,{received:r.data,code:Ot.invalid_enum_value,options:n}),zn}return qf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};cH=new WeakMap;GP.create=FCt;var VP=class extends Ci{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),lH.set(this,void 0)}_parse(e){let r=No.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Sr.string&&n.parsedType!==Sr.number){let i=No.objectValues(r);return mr(n,{expected:No.joinValues(i),received:n.parsedType,code:Ot.invalid_type}),zn}if(Zce(this,lH,"f")||BCt(this,lH,new Set(No.getValidEnumValues(this._def.values)),"f"),!Zce(this,lH,"f").has(e.data)){let i=No.objectValues(r);return mr(n,{received:n.data,code:Ot.invalid_enum_value,options:i}),zn}return qf(e.data)}get enum(){return this._def.values}};lH=new WeakMap;VP.create=(t,e)=>new VP({values:t,typeName:$n.ZodNativeEnum,...yi(e)});var BS=class extends Ci{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.promise&&r.common.async===!1)return mr(r,{code:Ot.invalid_type,expected:Sr.promise,received:r.parsedType}),zn;let n=r.parsedType===Sr.promise?r.data:Promise.resolve(r.data);return qf(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};BS.create=(t,e)=>new BS({type:t,typeName:$n.ZodPromise,...yi(e)});var Am=class extends Ci{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$n.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{mr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return zn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?zn:l.status==="dirty"||r.value==="dirty"?NM(l.value):l});{if(r.value==="aborted")return zn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?zn:c.status==="dirty"||r.value==="dirty"?NM(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?zn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?zn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!MP(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>MP(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);No.assertNever(i)}};Am.create=(t,e,r)=>new Am({schema:t,typeName:$n.ZodEffects,effect:e,...yi(r)});Am.createWithPreprocess=(t,e,r)=>new Am({schema:e,effect:{type:"preprocess",transform:t},typeName:$n.ZodEffects,...yi(r)});var pg=class extends Ci{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Sr.undefined?qf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};pg.create=(t,e)=>new pg({innerType:t,typeName:$n.ZodOptional,...yi(e)});var tv=class extends Ci{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Sr.null?qf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tv.create=(t,e)=>new tv({innerType:t,typeName:$n.ZodNullable,...yi(e)});var zP=class extends Ci{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Sr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};zP.create=(t,e)=>new zP({innerType:t,typeName:$n.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...yi(e)});var YP=class extends Ci{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return uH(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new gm(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gm(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};YP.create=(t,e)=>new YP({innerType:t,typeName:$n.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...yi(e)});var UM=class extends Ci{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Sr.nan){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.nan,received:n.parsedType}),zn}return{status:"valid",value:e.data}}};UM.create=t=>new UM({typeName:$n.ZodNaN,...yi(t)});var Uwr=Symbol("zod_brand"),dH=class extends Ci{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},fH=class t extends Ci{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?zn:o.status==="dirty"?(r.dirty(),NM(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?zn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:$n.ZodPipeline})}},KP=class extends Ci{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(MP(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return uH(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};KP.create=(t,e)=>new KP({innerType:t,typeName:$n.ZodReadonly,...yi(e)});function kCt(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(kCt,"cleanParams");function OCt(t,e={},r){return t?DS.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=kCt(e,n),m=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=kCt(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):DS.create()}s(OCt,"custom");var qwr={object:z0.lazycreate},$n;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($n||($n={}));var Hwr=s((t,e={message:`Input not instance of ${t.name}`})=>OCt(r=>r instanceof t,e),"instanceOfType"),QCt=PS.create,UCt=LP.create,$wr=UM.create,Wwr=FP.create,qCt=OP.create,jwr=QP.create,Gwr=LM.create,Vwr=UP.create,zwr=qP.create,Ywr=DS.create,Kwr=WE.create,Jwr=vy.create,Xwr=FM.create,Zwr=jE.create,eSr=z0.create,tSr=z0.strictCreate,rSr=HP.create,nSr=ele.create,iSr=$P.create,oSr=ev.create,sSr=tle.create,aSr=OM.create,cSr=QM.create,lSr=rle.create,uSr=WP.create,dSr=jP.create,fSr=GP.create,pSr=VP.create,mSr=BS.create,PCt=Am.create,hSr=pg.create,gSr=tv.create,ASr=Am.createWithPreprocess,ySr=fH.create,CSr=s(()=>QCt().optional(),"ostring"),vSr=s(()=>UCt().optional(),"onumber"),xSr=s(()=>qCt().optional(),"oboolean"),ESr={string:s(t=>PS.create({...t,coerce:!0}),"string"),number:s(t=>LP.create({...t,coerce:!0}),"number"),boolean:s(t=>OP.create({...t,coerce:!0}),"boolean"),bigint:s(t=>FP.create({...t,coerce:!0}),"bigint"),date:s(t=>QP.create({...t,coerce:!0}),"date")},bSr=zn,_=Object.freeze({__proto__:null,defaultErrorMap:MM,setErrorMap:Awr,getErrorMap:Jce,makeIssue:Xce,EMPTY_PATH:ywr,addIssueToContext:mr,ParseStatus:Zd,INVALID:zn,DIRTY:NM,OK:qf,isAborted:APe,isDirty:yPe,isValid:MP,isAsync:uH,get util(){return No},get objectUtil(){return gPe},ZodParsedType:Sr,getParsedType:$E,ZodType:Ci,datetimeRegex:LCt,ZodString:PS,ZodNumber:LP,ZodBigInt:FP,ZodBoolean:OP,ZodDate:QP,ZodSymbol:LM,ZodUndefined:UP,ZodNull:qP,ZodAny:DS,ZodUnknown:WE,ZodNever:vy,ZodVoid:FM,ZodArray:jE,ZodObject:z0,ZodUnion:HP,ZodDiscriminatedUnion:ele,ZodIntersection:$P,ZodTuple:ev,ZodRecord:tle,ZodMap:OM,ZodSet:QM,ZodFunction:rle,ZodLazy:WP,ZodLiteral:jP,ZodEnum:GP,ZodNativeEnum:VP,ZodPromise:BS,ZodEffects:Am,ZodTransformer:Am,ZodOptional:pg,ZodNullable:tv,ZodDefault:zP,ZodCatch:YP,ZodNaN:UM,BRAND:Uwr,ZodBranded:dH,ZodPipeline:fH,ZodReadonly:KP,custom:OCt,Schema:Ci,ZodSchema:Ci,late:qwr,get ZodFirstPartyTypeKind(){return $n},coerce:ESr,any:Ywr,array:Zwr,bigint:Wwr,boolean:qCt,date:jwr,discriminatedUnion:nSr,effect:PCt,enum:fSr,function:lSr,instanceof:Hwr,intersection:iSr,lazy:uSr,literal:dSr,map:aSr,nan:$wr,nativeEnum:pSr,never:Jwr,null:zwr,nullable:gSr,number:UCt,object:eSr,oboolean:xSr,onumber:vSr,optional:hSr,ostring:CSr,pipeline:ySr,preprocess:ASr,promise:mSr,record:sSr,set:cSr,strictObject:tSr,string:QCt,symbol:Gwr,transformer:PCt,tuple:oSr,undefined:Vwr,union:rSr,unknown:Kwr,void:Xwr,NEVER:bSr,ZodIssueCode:Ot,quotelessJson:gwr,ZodError:gm});var nle="2025-06-18";var ile="2.0",HCt=_.union([_.string(),_.number().int()]),$Ct=_.string(),ISr=_.object({progressToken:_.optional(HCt)}).passthrough(),hg=_.object({_meta:_.optional(ISr)}).passthrough(),Y0=_.object({method:_.string(),params:_.optional(hg)}),pH=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),rv=_.object({method:_.string(),params:_.optional(pH)}),gg=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),ole=_.union([_.string(),_.number().int()]),TSr=_.object({jsonrpc:_.literal(ile),id:ole}).merge(Y0).strict();var wSr=_.object({jsonrpc:_.literal(ile)}).merge(rv).strict();var SSr=_.object({jsonrpc:_.literal(ile),id:ole,result:gg}).strict();var _Sr=_.object({jsonrpc:_.literal(ile),id:ole,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict();var e4o=_.union([TSr,wSr,SSr,_Sr]),WCt=gg.strict(),jCt=rv.extend({method:_.literal("notifications/cancelled"),params:pH.extend({requestId:ole,reason:_.string().optional()})}),mH=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),GCt=mH.extend({version:_.string()}),RSr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),kSr=Y0.extend({method:_.literal("initialize"),params:hg.extend({protocolVersion:_.string(),capabilities:RSr,clientInfo:GCt})});var PSr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),DSr=gg.extend({protocolVersion:_.string(),capabilities:PSr,serverInfo:GCt,instructions:_.optional(_.string())}),BSr=rv.extend({method:_.literal("notifications/initialized")});var VCt=Y0.extend({method:_.literal("ping")}),NSr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),zCt=rv.extend({method:_.literal("notifications/progress"),params:pH.merge(NSr).extend({progressToken:HCt})}),sle=Y0.extend({params:hg.extend({cursor:_.optional($Ct)}).optional()}),ale=gg.extend({nextCursor:_.optional($Ct)}),YCt=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),KCt=YCt.extend({text:_.string()}),JCt=YCt.extend({blob:_.string().base64()}),XCt=mH.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),MSr=mH.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),LSr=sle.extend({method:_.literal("resources/list")}),FSr=ale.extend({resources:_.array(XCt)}),OSr=sle.extend({method:_.literal("resources/templates/list")}),QSr=ale.extend({resourceTemplates:_.array(MSr)}),USr=Y0.extend({method:_.literal("resources/read"),params:hg.extend({uri:_.string()})}),qSr=gg.extend({contents:_.array(_.union([KCt,JCt]))}),HSr=rv.extend({method:_.literal("notifications/resources/list_changed")}),$Sr=Y0.extend({method:_.literal("resources/subscribe"),params:hg.extend({uri:_.string()})}),WSr=Y0.extend({method:_.literal("resources/unsubscribe"),params:hg.extend({uri:_.string()})}),jSr=rv.extend({method:_.literal("notifications/resources/updated"),params:pH.extend({uri:_.string()})}),GSr=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),VSr=mH.extend({description:_.optional(_.string()),arguments:_.optional(_.array(GSr)),_meta:_.optional(_.object({}).passthrough())}),zSr=sle.extend({method:_.literal("prompts/list")}),YSr=ale.extend({prompts:_.array(VSr)}),KSr=Y0.extend({method:_.literal("prompts/get"),params:hg.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),vPe=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),xPe=_.object({type:_.literal("image"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),EPe=_.object({type:_.literal("audio"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),JSr=_.object({type:_.literal("resource"),resource:_.union([KCt,JCt]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),XSr=XCt.extend({type:_.literal("resource_link")}),ZCt=_.union([vPe,xPe,EPe,XSr,JSr]),ZSr=_.object({role:_.enum(["user","assistant"]),content:ZCt}).passthrough(),e_r=gg.extend({description:_.optional(_.string()),messages:_.array(ZSr)}),t_r=rv.extend({method:_.literal("notifications/prompts/list_changed")}),r_r=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),n_r=mH.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(r_r),_meta:_.optional(_.object({}).passthrough())}),i_r=sle.extend({method:_.literal("tools/list")}),o_r=ale.extend({tools:_.array(n_r)}),e1t=gg.extend({content:_.array(ZCt).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),t4o=e1t.or(gg.extend({toolResult:_.unknown()})),s_r=Y0.extend({method:_.literal("tools/call"),params:hg.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),a_r=rv.extend({method:_.literal("notifications/tools/list_changed")}),t1t=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),c_r=Y0.extend({method:_.literal("logging/setLevel"),params:hg.extend({level:t1t})}),l_r=rv.extend({method:_.literal("notifications/message"),params:pH.extend({level:t1t,logger:_.optional(_.string()),data:_.unknown()})}),u_r=_.object({name:_.string().optional()}).passthrough(),d_r=_.object({hints:_.optional(_.array(u_r)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),f_r=_.object({role:_.enum(["user","assistant"]),content:_.union([vPe,xPe,EPe])}).passthrough(),p_r=Y0.extend({method:_.literal("sampling/createMessage"),params:hg.extend({messages:_.array(f_r),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(d_r)})}),m_r=gg.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[vPe,xPe,EPe])}),h_r=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),g_r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),A_r=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),y_r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),C_r=_.union([h_r,g_r,A_r,y_r]),v_r=Y0.extend({method:_.literal("elicitation/create"),params:hg.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),C_r),required:_.optional(_.array(_.string()))}).passthrough()})}),x_r=gg.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),E_r=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var b_r=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),I_r=Y0.extend({method:_.literal("completion/complete"),params:hg.extend({ref:_.union([b_r,E_r]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),T_r=gg.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),w_r=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),S_r=Y0.extend({method:_.literal("roots/list")}),__r=gg.extend({roots:_.array(w_r)}),R_r=rv.extend({method:_.literal("notifications/roots/list_changed")}),r4o=_.union([VCt,kSr,I_r,c_r,KSr,zSr,LSr,OSr,USr,$Sr,WSr,s_r,i_r]),n4o=_.union([jCt,zCt,BSr,R_r]),i4o=_.union([WCt,m_r,x_r,__r]),o4o=_.union([VCt,p_r,v_r,S_r]),s4o=_.union([jCt,zCt,l_r,jSr,HSr,a_r,t_r]),a4o=_.union([WCt,DSr,T_r,e_r,YSr,FSr,QSr,qSr,e1t,o_r]);d();async function JP(t,e,r,n,i){return await t.get($r).fetch(new URL(e).href,{method:r,headers:n,body:i})}s(JP,"fetchOauthServer");async function bPe(t){try{return await t.text()}catch{return t.statusText}}s(bPe,"getErrText");d();var r1t="/.well-known",IPe=`${r1t}/oauth-protected-resource`,n1t=`${r1t}/oauth-authorization-server`;function i1t(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}s(i1t,"isAuthorizationProtectedResourceMetadata");function o1t(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}s(o1t,"isAuthorizationServerMetadata");function s1t(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(o=>{let[a,c]=o.split("=").map(l=>l.trim().replace(/"/g,""));n[a]=c}),{scheme:r,params:n}}s(s1t,"parseWWWAuthenticateHeader");function a1t(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}s(a1t,"getMetadataWithDefaultValues");function c1t(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}s(c1t,"getDefaultMetadataForUrl");function l1t(t){let e=new URL(t);if(!e.pathname.startsWith(IPe))throw new Error(`Invalid discovery URL: expected path to start with ${IPe}`);let r=e.pathname.substring(IPe.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}s(l1t,"getResourceServerBaseUrlFromDiscoveryUrl");var TPe=class{static{s(this,"AuthMetadata")}},cle=class extends TPe{static{s(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),i,o,a,c=await this.getResourceMetadata(n,{url:e,headers:r??{}});c.resource&&(i=c.authorization_servers?.[0],o=c.scopes_supported,a=c);let l=new URL(e).origin,u={};i||(i=l,u=r??{});let f;try{let m=await this.getAuthorizationServerMetadata(i,u),h=a1t(m);return f={authorizationServer:i,serverMetadata:h,resourceMetadata:a},gi.info(this.ctx,"authMetadata",f),f}catch(m){gi.warn(this.ctx,`Error populating auth metadata: ${String(m)}`)}let p=c1t(new URL(l));return p.scopes_supported=o??p.scopes_supported??[],f={authorizationServer:i,serverMetadata:p,resourceMetadata:a},f}async getResourceMetadataChallenge(e){let r=await JP(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let i=r.headers.get("WWW-Authenticate"),{scheme:o,params:a}=s1t(i);o==="Bearer"&&a.resource_metadata&&(n=a.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),i=new URL(r.url),o={};n.origin===i.origin&&(o=r.headers);let a=await JP(this.ctx,e,"GET",{...o,Accept:"application/json","MCP-Protocol-Version":nle});if(a.status!==200)throw new Error(`Failed to fetch resource metadata: ${a.status} ${await bPe(a)}`);let c=await a.json();if(i1t(c)){let l=l1t(e);if(c.resource!==l)throw new Error(`Protected Resource Metadata resource "${c.resource}" does not match MCP server resolved resource "${l}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return c}else throw new Error(`Invalid resource metadata: ${JSON.stringify(c)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),i=n.pathname==="/"?"":n.pathname,o=new URL(n1t,e).toString()+i,a=await JP(this.ctx,o,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":nle});if(a.status!==200&&(a=await JP(this.ctx,Vi(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":nle}),a.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${a.status} ${await bPe(a)}`);let c=await a.json();if(o1t(c))return c;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(c)}`)}};d();d();d();d();d();var NS=class{static{s(this,"MCPNotificationHandler")}constructor(e,r){this.ctx=e,this.serverName=r}};var hH=class extends NS{static{s(this,"LoggingMessageNotificationHandler")}constructor(e,r){super(e,r)}handle(e){let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":gi.info(this.ctx,`MCP server ${this.serverName} log:`,r),ql(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"warning":gi.warn(this.ctx,`MCP server ${this.serverName} log:`,r),NP(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"error":case"critical":case"alert":case"emergency":gi.error(this.ctx,`MCP server ${this.serverName} log:`,r),hm(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;default:gi.info(this.ctx,`MCP server ${this.serverName} log:`,r),ql(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break}}};d();var gH=class extends NS{static{s(this,"PromptListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){gi.info(this.ctx,"Prompts list changed, refreshing tools..."),ql(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Uk)}};d();var AH=class extends NS{static{s(this,"ToolListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){gi.info(this.ctx,"Tool list changed, refreshing tools..."),ql(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Uk)}};d();var wPe=/[^a-z0-9_-]/gi;var k_r=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function u1t(){let t={};for(let e of k_r){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(u1t,"getDefaultEnvironment");async function d1t(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;gi.warn(t,n),await NP(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(wPe.lastIndex=0,wPe.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;gi.warn(t,n),await NP(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(wPe,"_")}else e._nameForModel=e.name;return e}s(d1t,"normalizeTool");var lle=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();d();var qM="2025-06-18";var f1t=[qM,"2025-03-26","2024-11-05","2024-10-07"],ule="2.0",p1t=_.union([_.string(),_.number().int()]),m1t=_.string(),P_r=_.object({progressToken:_.optional(p1t)}).passthrough(),Cg=_.object({_meta:_.optional(P_r)}).passthrough(),K0=_.object({method:_.string(),params:_.optional(Cg)}),yH=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),nv=_.object({method:_.string(),params:_.optional(yH)}),vg=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),dle=_.union([_.string(),_.number().int()]),h1t=_.object({jsonrpc:_.literal(ule),id:dle}).merge(K0).strict(),fle=s(t=>h1t.safeParse(t).success,"isJSONRPCRequest"),g1t=_.object({jsonrpc:_.literal(ule)}).merge(nv).strict(),A1t=s(t=>g1t.safeParse(t).success,"isJSONRPCNotification"),y1t=_.object({jsonrpc:_.literal(ule),id:dle,result:vg}).strict(),CH=s(t=>y1t.safeParse(t).success,"isJSONRPCResponse"),Ag;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Ag||(Ag={}));var C1t=_.object({jsonrpc:_.literal(ule),id:dle,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict(),v1t=s(t=>C1t.safeParse(t).success,"isJSONRPCError"),MS=_.union([h1t,g1t,y1t,C1t]),XP=vg.strict(),ple=nv.extend({method:_.literal("notifications/cancelled"),params:yH.extend({requestId:dle,reason:_.string().optional()})}),vH=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),x1t=vH.extend({version:_.string()}),D_r=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),B_r=K0.extend({method:_.literal("initialize"),params:Cg.extend({protocolVersion:_.string(),capabilities:D_r,clientInfo:x1t})});var N_r=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),SPe=vg.extend({protocolVersion:_.string(),capabilities:N_r,serverInfo:x1t,instructions:_.optional(_.string())}),E1t=nv.extend({method:_.literal("notifications/initialized")}),b1t=s(t=>E1t.safeParse(t).success,"isInitializedNotification"),mle=K0.extend({method:_.literal("ping")}),M_r=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),hle=nv.extend({method:_.literal("notifications/progress"),params:yH.merge(M_r).extend({progressToken:p1t})}),gle=K0.extend({params:Cg.extend({cursor:_.optional(m1t)}).optional()}),Ale=vg.extend({nextCursor:_.optional(m1t)}),I1t=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),T1t=I1t.extend({text:_.string()}),_Pe=_.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),w1t=I1t.extend({blob:_Pe}),S1t=vH.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),L_r=vH.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),F_r=gle.extend({method:_.literal("resources/list")}),RPe=Ale.extend({resources:_.array(S1t)}),O_r=gle.extend({method:_.literal("resources/templates/list")}),kPe=Ale.extend({resourceTemplates:_.array(L_r)}),Q_r=K0.extend({method:_.literal("resources/read"),params:Cg.extend({uri:_.string()})}),PPe=vg.extend({contents:_.array(_.union([T1t,w1t]))}),U_r=nv.extend({method:_.literal("notifications/resources/list_changed")}),q_r=K0.extend({method:_.literal("resources/subscribe"),params:Cg.extend({uri:_.string()})}),H_r=K0.extend({method:_.literal("resources/unsubscribe"),params:Cg.extend({uri:_.string()})}),$_r=nv.extend({method:_.literal("notifications/resources/updated"),params:yH.extend({uri:_.string()})}),W_r=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),j_r=vH.extend({description:_.optional(_.string()),arguments:_.optional(_.array(W_r)),_meta:_.optional(_.object({}).passthrough())}),G_r=gle.extend({method:_.literal("prompts/list")}),DPe=Ale.extend({prompts:_.array(j_r)}),V_r=K0.extend({method:_.literal("prompts/get"),params:Cg.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),BPe=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),NPe=_.object({type:_.literal("image"),data:_Pe,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),MPe=_.object({type:_.literal("audio"),data:_Pe,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),z_r=_.object({type:_.literal("resource"),resource:_.union([T1t,w1t]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Y_r=S1t.extend({type:_.literal("resource_link")}),_1t=_.union([BPe,NPe,MPe,Y_r,z_r]),K_r=_.object({role:_.enum(["user","assistant"]),content:_1t}).passthrough(),LPe=vg.extend({description:_.optional(_.string()),messages:_.array(K_r)}),FPe=nv.extend({method:_.literal("notifications/prompts/list_changed")}),J_r=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),X_r=vH.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(J_r),_meta:_.optional(_.object({}).passthrough())}),Z_r=gle.extend({method:_.literal("tools/list")}),OPe=Ale.extend({tools:_.array(X_r)}),HM=vg.extend({content:_.array(_1t).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),oDo=HM.or(vg.extend({toolResult:_.unknown()})),e2r=K0.extend({method:_.literal("tools/call"),params:Cg.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),QPe=nv.extend({method:_.literal("notifications/tools/list_changed")}),R1t=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),t2r=K0.extend({method:_.literal("logging/setLevel"),params:Cg.extend({level:R1t})}),UPe=nv.extend({method:_.literal("notifications/message"),params:yH.extend({level:R1t,logger:_.optional(_.string()),data:_.unknown()})}),r2r=_.object({name:_.string().optional()}).passthrough(),n2r=_.object({hints:_.optional(_.array(r2r)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),i2r=_.object({role:_.enum(["user","assistant"]),content:_.union([BPe,NPe,MPe])}).passthrough(),o2r=K0.extend({method:_.literal("sampling/createMessage"),params:Cg.extend({messages:_.array(i2r),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(n2r)})}),s2r=vg.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[BPe,NPe,MPe])}),a2r=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),c2r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),l2r=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),u2r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),d2r=_.union([a2r,c2r,l2r,u2r]),f2r=K0.extend({method:_.literal("elicitation/create"),params:Cg.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),d2r),required:_.optional(_.array(_.string()))}).passthrough()})}),p2r=vg.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),m2r=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var h2r=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),g2r=K0.extend({method:_.literal("completion/complete"),params:Cg.extend({ref:_.union([h2r,m2r]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),qPe=vg.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),A2r=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),y2r=K0.extend({method:_.literal("roots/list")}),C2r=vg.extend({roots:_.array(A2r)}),v2r=nv.extend({method:_.literal("notifications/roots/list_changed")}),sDo=_.union([mle,B_r,g2r,t2r,V_r,G_r,F_r,O_r,Q_r,q_r,H_r,e2r,Z_r]),aDo=_.union([ple,hle,E1t,v2r]),cDo=_.union([XP,s2r,p2r,C2r]),lDo=_.union([mle,o2r,f2r,y2r]),uDo=_.union([ple,hle,UPe,$_r,U_r,QPe,FPe]),dDo=_.union([XP,SPe,qPe,LPe,DPe,RPe,kPe,PPe,HM,OPe]),yg=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var x2r=6e4,yle=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(ple,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(hle,r=>{this._onprogress(r)}),this.setRequestHandler(mle,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new yg(Ag.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,i;this._transport=e;let o=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let a=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=l=>{a?.(l),this._onerror(l)};let c=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,u)=>{c?.(l,u),CH(l)||v1t(l)?this._onresponse(l):fle(l)?this._onrequest(l,u):A1t(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new yg(Ag.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Ag.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,m)=>this.request(f,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:Ag.InternalError,message:(m=f.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),CH(e))n(e);else{let i=new yg(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,m,h,g;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let A=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:A};n?.onprogress&&(this._progressHandlers.set(A,n.onprogress),y.params={...e.params,_meta:{...((p=e.params)===null||p===void 0?void 0:p._meta)||{},progressToken:A}});let E=s(R=>{var B;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(B=this._transport)===null||B===void 0||B.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(R)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(L=>this._onerror(new Error(`Failed to send cancellation: ${L}`))),l(R)},"cancel");this._responseHandlers.set(A,R=>{var B;if(!(!((B=n?.signal)===null||B===void 0)&&B.aborted)){if(R instanceof Error)return l(R);try{let L=r.parse(R.result);c(L)}catch(L){l(L)}}}),(m=n?.signal)===null||m===void 0||m.addEventListener("abort",()=>{var R;E((R=n?.signal)===null||R===void 0?void 0:R.reason)});let b=(h=n?.timeout)!==null&&h!==void 0?h:x2r,S=s(()=>E(new yg(Ag.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(A,b,n?.maxTotalTimeout,S,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(R=>{this._cleanupTimeout(A),l(R)})})}async notification(e,r){var n,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((i=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(f=>this._onerror(f))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function k1t(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(k1t,"mergeCapabilities");var Dxt=Ne(Pxt(),1);var Fle=class extends yle{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new Dxt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=k1t(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:qM,capabilities:this._capabilities,clientInfo:this._clientInfo}},SPe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!f1t.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},XP,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},qPe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},XP,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},LPe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},DPe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},RPe,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},kPe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},PPe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},XP,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},XP,r)}async callTool(e,r=HM,n){let i=await this.request({method:"tools/call",params:e},r,n),o=this.getToolOutputValidator(e.name);if(o){if(!i.structuredContent&&!i.isError)throw new yg(Ag.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(i.structuredContent)try{if(!o(i.structuredContent))throw new yg(Ag.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(o.errors)}`)}catch(a){throw a instanceof yg?a:new yg(Ag.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return i}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},OPe,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var Bxt=Ne(require("events"));var US=class{constructor(e,r,n){this.transport=null;this.emitter=new Bxt.default;this.ctx=e,this.mcp=new Fle({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw gi.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw gi.error(this.ctx,"Connection failed:",r),await hm(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await d1t(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;ql(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r,n){let i=new go([],"error"),o=Ow(),a=new AbortController;n.onCancellationRequested(()=>{a.abort()});try{let c=await this.mcp.callTool({name:e,arguments:r,_meta:{progressToken:o}},HM,{onprogress:s(l=>{gi.info(this.ctx,`${e} calling progress`,l),ql(this.ctx,{message:`${e} calling progress:`+JSON.stringify(l),server:this.name})},"onprogress"),resetTimeoutOnProgress:!0,signal:a.signal});if(c&&typeof c=="object"){if(c.content)return this.formatToolResult(c);{let l=`Error calling tool ${e}: `+JSON.stringify(c);gi.error(this.ctx,l),await hm(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}}else{let l=`Error calling tool ${e}: `+JSON.stringify(c);gi.error(this.ctx,l),await hm(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}}catch(c){let l=`Error calling tool ${e}: `+(c instanceof Error?c.message:String(c));gi.error(this.ctx,l),await hm(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}return i}addListeners(){this.mcp.onclose=()=>{gi.info(this.ctx,`MCP server ${this.name} connection closed.`),ql(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{gi.error(this.ctx,`MCP server ${this.name} error:`,e),hm(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(UPe,e=>new hH(this.ctx,this.name).handle(e)),this.mcp.setNotificationHandler(QPe,e=>new AH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(FPe,e=>new gH(this.ctx,this.name,this.emitter).handle(e))}formatToolResult(e){let r=new go([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Li(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new nP({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();function ekr(t){return s(async(r,n)=>{let i=r instanceof URL?r.toString():r,o;if(n?.headers)if(n.headers instanceof Headers){o={};for(let[f,p]of n.headers.entries())o[f]=p}else if(Array.isArray(n.headers)){o={};for(let[f,p]of n.headers)o[f]=p}else o=n.headers;let a={method:n?.method||"GET",headers:o,body:n?.body,signal:n?.signal||void 0},c=await t.fetch(i,a),l=c.body(),u=null;if(l)u=new ReadableStream({start(f){let p=s(A=>{f.enqueue(new Uint8Array(A))},"onData"),m=s(()=>{f.close(),g()},"onEnd"),h=s(A=>{f.error(A),g()},"onError"),g=s(()=>{l.off("data",p),l.off("end",m),l.off("error",h)},"cleanup");l.on("data",p),l.on("end",m),l.on("error",h)},cancel(){l&&"destroy"in l&&typeof l.destroy=="function"&&l.destroy()}});else{let f=await c.text();u=new ReadableStream({start(p){p.enqueue(new TextEncoder().encode(f)),p.close()}})}return new globalThis.Response(u,{status:c.status,statusText:c.statusText,headers:new Headers(c.headers)})},"fetchLike")}s(ekr,"createFetchAdapter");function Ole(t,e){let r=t.get($r),n=ekr(r);return{...e,fetch:n}}s(Ole,"createConfigWithFetch");d();d();d();var Qle=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function f5e(t){}s(f5e,"noop");function Ule(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=f5e,onError:r=f5e,onRetry:n=f5e,onComment:i}=t,o="",a=!0,c,l="",u="";function f(A){let y=a?A.replace(/^\xEF\xBB\xBF/,""):A,[E,b]=tkr(`${o}${y}`);for(let S of E)p(S);o=b,a=!1}s(f,"feed");function p(A){if(A===""){h();return}if(A.startsWith(":")){i&&i(A.slice(A.startsWith(": ")?2:1));return}let y=A.indexOf(":");if(y!==-1){let E=A.slice(0,y),b=A[y+1]===" "?2:1,S=A.slice(y+b);m(E,S,A);return}m(A,"",A)}s(p,"parseLine");function m(A,y,E){switch(A){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":c=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new Qle(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:E}));break;default:r(new Qle(`Unknown field "${A.length>20?`${A.slice(0,20)}\u2026`:A}"`,{type:"unknown-field",field:A,value:y,line:E}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(A={}){o&&A.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(Ule,"createParser");function tkr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(tkr,"splitLines");var Hle=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(Nxt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(Nxt(this),r)}};function rkr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(rkr,"syntaxError");function p5e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(p5e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${p5e(t.cause)}`:t.message:`${t}`}s(p5e,"flattenError");function Nxt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(Nxt,"inspectableError");var Lxt=s(t=>{throw TypeError(t)},"__typeError"),x5e=s((t,e,r)=>e.has(t)||Lxt("Cannot "+r),"__accessCheck"),to=s((t,e,r)=>(x5e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Hl=s((t,e,r)=>e.has(t)?Lxt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Da=s((t,e,r,n)=>(x5e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),GE=s((t,e,r)=>(x5e(t,e,"access private method"),r),"__privateMethod"),J0,t5,$M,qle,$le,IH,GM,TH,qS,WM,VM,jM,EH,xy,m5e,h5e,g5e,Mxt,A5e,y5e,bH,C5e,v5e,r5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),Hl(this,xy),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Hl(this,J0),Hl(this,t5),Hl(this,$M),Hl(this,qle),Hl(this,$le),Hl(this,IH),Hl(this,GM),Hl(this,TH,null),Hl(this,qS),Hl(this,WM),Hl(this,VM,null),Hl(this,jM,null),Hl(this,EH,null),Hl(this,h5e,async o=>{var a;to(this,WM).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){GE(this,xy,bH).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?Da(this,$M,new URL(o.url)):Da(this,$M,void 0),u!==200){GE(this,xy,bH).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){GE(this,xy,bH).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(to(this,J0)===this.CLOSED)return;Da(this,J0,this.OPEN);let p=new Event("open");if((a=to(this,EH))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){GE(this,xy,bH).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:A,value:y}=await h.read();y&&to(this,WM).feed(m.decode(y,{stream:!A})),A&&(g=!1,to(this,WM).reset(),GE(this,xy,C5e).call(this))}while(g)}),Hl(this,g5e,o=>{Da(this,qS,void 0),!(o.name==="AbortError"||o.type==="aborted")&&GE(this,xy,C5e).call(this,p5e(o))}),Hl(this,A5e,o=>{typeof o.id=="string"&&Da(this,TH,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:to(this,$M)?to(this,$M).origin:to(this,t5).origin,lastEventId:o.id||""});to(this,jM)&&(!o.event||o.event==="message")&&to(this,jM).call(this,a),this.dispatchEvent(a)}),Hl(this,y5e,o=>{Da(this,IH,o)}),Hl(this,v5e,()=>{Da(this,GM,void 0),to(this,J0)===this.CONNECTING&&GE(this,xy,m5e).call(this)});try{if(e instanceof URL)Da(this,t5,e);else if(typeof e=="string")Da(this,t5,new URL(e,nkr()));else throw new Error("Invalid URL")}catch{throw rkr("An invalid or illegal string was specified")}Da(this,WM,Ule({onEvent:to(this,A5e),onRetry:to(this,y5e)})),Da(this,J0,this.CONNECTING),Da(this,IH,3e3),Da(this,$le,(n=r?.fetch)!=null?n:globalThis.fetch),Da(this,qle,(i=r?.withCredentials)!=null?i:!1),GE(this,xy,m5e).call(this)}get readyState(){return to(this,J0)}get url(){return to(this,t5).href}get withCredentials(){return to(this,qle)}get onerror(){return to(this,VM)}set onerror(e){Da(this,VM,e)}get onmessage(){return to(this,jM)}set onmessage(e){Da(this,jM,e)}get onopen(){return to(this,EH)}set onopen(e){Da(this,EH,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){to(this,GM)&&clearTimeout(to(this,GM)),to(this,J0)!==this.CLOSED&&(to(this,qS)&&to(this,qS).abort(),Da(this,J0,this.CLOSED),Da(this,qS,void 0))}};J0=new WeakMap,t5=new WeakMap,$M=new WeakMap,qle=new WeakMap,$le=new WeakMap,IH=new WeakMap,GM=new WeakMap,TH=new WeakMap,qS=new WeakMap,WM=new WeakMap,VM=new WeakMap,jM=new WeakMap,EH=new WeakMap,xy=new WeakSet,m5e=s(function(){Da(this,J0,this.CONNECTING),Da(this,qS,new AbortController),to(this,$le)(to(this,t5),GE(this,xy,Mxt).call(this)).then(to(this,h5e)).catch(to(this,g5e))},"connect_fn"),h5e=new WeakMap,g5e=new WeakMap,Mxt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...to(this,TH)?{"Last-Event-ID":to(this,TH)}:void 0},cache:"no-store",signal:(t=to(this,qS))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),A5e=new WeakMap,y5e=new WeakMap,bH=s(function(t,e){var r;to(this,J0)!==this.CLOSED&&Da(this,J0,this.CLOSED);let n=new Hle("error",{code:e,message:t});(r=to(this,VM))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),C5e=s(function(t,e){var r;if(to(this,J0)===this.CLOSED)return;Da(this,J0,this.CONNECTING);let n=new Hle("error",{code:e,message:t});(r=to(this,VM))==null||r.call(this,n),this.dispatchEvent(n),Da(this,GM,setTimeout(to(this,v5e),to(this,IH)))},"scheduleReconnect_fn"),v5e=new WeakMap,r5.CONNECTING=0,r5.OPEN=1,r5.CLOSED=2;function nkr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(nkr,"getBaseURL");d();d();var E5e;E5e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function ikr(t){return(await E5e).getRandomValues(new Uint8Array(t))}s(ikr,"getRandomValues");async function okr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await ikr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(okr,"random");async function skr(t){return await okr(t)}s(skr,"generateVerifier");async function akr(t){let e=await(await E5e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(akr,"generateChallenge");async function b5e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await skr(t),r=await akr(e);return{code_verifier:e,code_challenge:r}}s(b5e,"pkceChallenge");d();var Fxt=_.object({resource:_.string().url(),authorization_servers:_.array(_.string().url()).optional(),jwks_uri:_.string().url().optional(),scopes_supported:_.array(_.string()).optional(),bearer_methods_supported:_.array(_.string()).optional(),resource_signing_alg_values_supported:_.array(_.string()).optional(),resource_name:_.string().optional(),resource_documentation:_.string().optional(),resource_policy_uri:_.string().url().optional(),resource_tos_uri:_.string().url().optional(),tls_client_certificate_bound_access_tokens:_.boolean().optional(),authorization_details_types_supported:_.array(_.string()).optional(),dpop_signing_alg_values_supported:_.array(_.string()).optional(),dpop_bound_access_tokens_required:_.boolean().optional()}).passthrough(),I5e=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),revocation_endpoint:_.string().optional(),revocation_endpoint_auth_methods_supported:_.array(_.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),introspection_endpoint:_.string().optional(),introspection_endpoint_auth_methods_supported:_.array(_.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),code_challenge_methods_supported:_.array(_.string()).optional()}).passthrough(),ckr=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),userinfo_endpoint:_.string().optional(),jwks_uri:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),acr_values_supported:_.array(_.string()).optional(),subject_types_supported:_.array(_.string()),id_token_signing_alg_values_supported:_.array(_.string()),id_token_encryption_alg_values_supported:_.array(_.string()).optional(),id_token_encryption_enc_values_supported:_.array(_.string()).optional(),userinfo_signing_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_enc_values_supported:_.array(_.string()).optional(),request_object_signing_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_enc_values_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),display_values_supported:_.array(_.string()).optional(),claim_types_supported:_.array(_.string()).optional(),claims_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),claims_locales_supported:_.array(_.string()).optional(),ui_locales_supported:_.array(_.string()).optional(),claims_parameter_supported:_.boolean().optional(),request_parameter_supported:_.boolean().optional(),request_uri_parameter_supported:_.boolean().optional(),require_request_uri_registration:_.boolean().optional(),op_policy_uri:_.string().optional(),op_tos_uri:_.string().optional()}).passthrough(),Oxt=ckr.merge(I5e.pick({code_challenge_methods_supported:!0})),T5e=_.object({access_token:_.string(),id_token:_.string().optional(),token_type:_.string(),expires_in:_.number().optional(),scope:_.string().optional(),refresh_token:_.string().optional()}).strip(),Qxt=_.object({error:_.string(),error_description:_.string().optional(),error_uri:_.string().optional()}),lkr=_.object({redirect_uris:_.array(_.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:_.string().optional(),grant_types:_.array(_.string()).optional(),response_types:_.array(_.string()).optional(),client_name:_.string().optional(),client_uri:_.string().optional(),logo_uri:_.string().optional(),scope:_.string().optional(),contacts:_.array(_.string()).optional(),tos_uri:_.string().optional(),policy_uri:_.string().optional(),jwks_uri:_.string().optional(),jwks:_.any().optional(),software_id:_.string().optional(),software_version:_.string().optional(),software_statement:_.string().optional()}).strip(),ukr=_.object({client_id:_.string(),client_secret:_.string().optional(),client_id_issued_at:_.number().optional(),client_secret_expires_at:_.number().optional()}).strip(),Uxt=lkr.merge(ukr),INo=_.object({error:_.string(),error_description:_.string().optional()}).strip(),TNo=_.object({token:_.string(),token_type_hint:_.string().optional()}).strip();d();function qxt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}s(qxt,"resourceUrlFromServerUrl");function Hxt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return i.startsWith(o)}s(Hxt,"checkResourceAllowed");d();var El=class extends Error{static{s(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},wH=class extends El{static{s(this,"InvalidRequestError")}};wH.errorCode="invalid_request";var n5=class extends El{static{s(this,"InvalidClientError")}};n5.errorCode="invalid_client";var i5=class extends El{static{s(this,"InvalidGrantError")}};i5.errorCode="invalid_grant";var o5=class extends El{static{s(this,"UnauthorizedClientError")}};o5.errorCode="unauthorized_client";var SH=class extends El{static{s(this,"UnsupportedGrantTypeError")}};SH.errorCode="unsupported_grant_type";var _H=class extends El{static{s(this,"InvalidScopeError")}};_H.errorCode="invalid_scope";var RH=class extends El{static{s(this,"AccessDeniedError")}};RH.errorCode="access_denied";var VE=class extends El{static{s(this,"ServerError")}};VE.errorCode="server_error";var kH=class extends El{static{s(this,"TemporarilyUnavailableError")}};kH.errorCode="temporarily_unavailable";var PH=class extends El{static{s(this,"UnsupportedResponseTypeError")}};PH.errorCode="unsupported_response_type";var DH=class extends El{static{s(this,"UnsupportedTokenTypeError")}};DH.errorCode="unsupported_token_type";var BH=class extends El{static{s(this,"InvalidTokenError")}};BH.errorCode="invalid_token";var NH=class extends El{static{s(this,"MethodNotAllowedError")}};NH.errorCode="method_not_allowed";var MH=class extends El{static{s(this,"TooManyRequestsError")}};MH.errorCode="too_many_requests";var LH=class extends El{static{s(this,"InvalidClientMetadataError")}};LH.errorCode="invalid_client_metadata";var FH=class extends El{static{s(this,"InsufficientScopeError")}};FH.errorCode="insufficient_scope";var $xt={[wH.errorCode]:wH,[n5.errorCode]:n5,[i5.errorCode]:i5,[o5.errorCode]:o5,[SH.errorCode]:SH,[_H.errorCode]:_H,[RH.errorCode]:RH,[VE.errorCode]:VE,[kH.errorCode]:kH,[PH.errorCode]:PH,[DH.errorCode]:DH,[BH.errorCode]:BH,[NH.errorCode]:NH,[MH.errorCode]:MH,[LH.errorCode]:LH,[FH.errorCode]:FH};var X0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function jxt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}s(jxt,"selectClientAuthMethod");function Gxt(t,e,r,n){let{client_id:i,client_secret:o}=e;switch(t){case"client_secret_basic":dkr(i,o,r);return;case"client_secret_post":fkr(i,o,n);return;case"none":pkr(i,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}s(Gxt,"applyClientAuthentication");function dkr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}s(dkr,"applyBasicAuth");function fkr(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}s(fkr,"applyPostAuth");function pkr(t,e){e.set("client_id",t)}s(pkr,"applyPublicAuth");async function S5e(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=Qxt.parse(JSON.parse(r)),{error:i,error_description:o,error_uri:a}=n,c=$xt[i]||VE;return new c(o||"",a)}catch(n){let i=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new VE(i)}}s(S5e,"parseErrorResponse");async function HS(t,e){var r,n;try{return await w5e(t,e)}catch(i){if(i instanceof n5||i instanceof o5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await w5e(t,e);if(i instanceof i5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await w5e(t,e);throw i}}s(HS,"auth");async function w5e(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:i,fetchFn:o}){let a,c;try{a=await hkr(e,{resourceMetadataUrl:i},o),a.authorization_servers&&a.authorization_servers.length>0&&(c=a.authorization_servers[0])}catch{}c||(c=e);let l=await mkr(e,t,a),u=await vkr(c,{fetchFn:o}),f=await Promise.resolve(t.clientInformation());if(!f){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let A=await Ikr(c,{metadata:u,clientMetadata:t.clientMetadata});await t.saveClientInformation(A),f=A}if(r!==void 0){let A=await t.codeVerifier(),y=await Ekr(c,{metadata:u,clientInformation:f,authorizationCode:r,codeVerifier:A,redirectUri:t.redirectUrl,resource:l,addClientAuthentication:t.addClientAuthentication,fetchFn:o});return await t.saveTokens(y),"AUTHORIZED"}let p=await t.tokens();if(p?.refresh_token)try{let A=await bkr(c,{metadata:u,clientInformation:f,refreshToken:p.refresh_token,resource:l,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof El)||A instanceof VE))throw A}let m=t.state?await t.state():void 0,{authorizationUrl:h,codeVerifier:g}=await xkr(c,{metadata:u,clientInformation:f,state:m,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:l});return await t.saveCodeVerifier(g),await t.redirectToAuthorization(h),"REDIRECT"}s(w5e,"authInternal");async function mkr(t,e,r){let n=qxt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!Hxt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}s(mkr,"selectResourceURL");function OH(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}s(OH,"extractResourceMetadataUrl");async function hkr(t,e,r=fetch){let n=await ykr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return Fxt.parse(await n.json())}s(hkr,"discoverOAuthProtectedResourceMetadata");async function _5e(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?_5e(t,void 0,r):void 0;throw n}}s(_5e,"fetchWithCorsRetry");function gkr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}s(gkr,"buildWellKnownPath");async function Wxt(t,e,r=fetch){return await _5e(t,{"MCP-Protocol-Version":e},r)}s(Wxt,"tryMetadataDiscovery");function Akr(t,e){return!t||t.status===404&&e!=="/"}s(Akr,"shouldAttemptFallback");async function ykr(t,e,r,n){var i,o;let a=new URL(t),c=(i=n?.protocolVersion)!==null&&i!==void 0?i:qM,l;if(n?.metadataUrl)l=new URL(n.metadataUrl);else{let f=gkr(e,a.pathname);l=new URL(f,(o=n?.metadataServerUrl)!==null&&o!==void 0?o:a),l.search=a.search}let u=await Wxt(l,c,r);if(!n?.metadataUrl&&Akr(u,a.pathname)){let f=new URL(`/.well-known/${e}`,a);u=await Wxt(f,c,r)}return u}s(ykr,"discoverMetadataWithFallback");function Ckr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let i=e.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${i}`,e.origin),type:"oidc"}),n.push({url:new URL(`${i}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}s(Ckr,"buildDiscoveryUrls");async function vkr(t,{fetchFn:e=fetch,protocolVersion:r=qM}={}){var n;let i={"MCP-Protocol-Version":r},o=Ckr(t);for(let{url:a,type:c}of o){let l=await _5e(a,i,e);if(!l)throw new Error(`CORS error trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`);if(!l.ok){if(l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`)}if(c==="oauth")return I5e.parse(await l.json());{let u=Oxt.parse(await l.json());if(!(!((n=u.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${a}: does not support S256 code challenge method required by MCP specification`);return u}}}s(vkr,"discoverAuthorizationServerMetadata");async function xkr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:i,state:o,resource:a}){let c="code",l="S256",u;if(e){if(u=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else u=new URL("/authorize",t);let f=await b5e(),p=f.code_verifier,m=f.code_challenge;return u.searchParams.set("response_type",c),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",m),u.searchParams.set("code_challenge_method",l),u.searchParams.set("redirect_uri",String(n)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),a&&u.searchParams.set("resource",a.href),{authorizationUrl:u,codeVerifier:p}}s(xkr,"startAuthorization");async function Ekr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o,resource:a,addClientAuthentication:c,fetchFn:l}){var u;let f="authorization_code",p=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(f))throw new Error(`Incompatible auth server: does not support grant type ${f}`);let m=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),h=new URLSearchParams({grant_type:f,code:n,code_verifier:i,redirect_uri:String(o)});if(c)c(m,h,t,e);else{let A=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=jxt(r,A);Gxt(y,r,m,h)}a&&h.set("resource",a.href);let g=await(l??fetch)(p,{method:"POST",headers:m,body:h});if(!g.ok)throw await S5e(g);return T5e.parse(await g.json())}s(Ekr,"exchangeAuthorization");async function bkr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:i,addClientAuthentication:o,fetchFn:a}){var c;let l="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support grant type ${l}`)}else u=new URL("/token",t);let f=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:l,refresh_token:n});if(o)o(f,p,t,e);else{let h=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],g=jxt(r,h);Gxt(g,r,f,p)}i&&p.set("resource",i.href);let m=await(a??fetch)(u,{method:"POST",headers:f,body:p});if(!m.ok)throw await S5e(m);return T5e.parse({refresh_token:n,...await m.json()})}s(bkr,"refreshAuthorization");async function Ikr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let i;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");i=new URL(e.registration_endpoint)}else i=new URL("/register",t);let o=await(n??fetch)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw await S5e(o);return Uxt.parse(await o.json())}s(Ikr,"registerClient");var R5e=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},Wle=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new X0("No auth provider");let r;try{r=await HS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new X0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let i=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((o,a)=>{this._eventSource=new r5(this._url.href,{...this._eventSourceInit,fetch:s(async(c,l)=>{let u=await this._commonHeaders();u.set("Accept","text/event-stream");let f=await i(c,{...l,headers:u});return f.status===401&&f.headers.has("www-authenticate")&&(this._resourceMetadataUrl=OH(f)),f},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=c=>{var l;if(c.code===401&&this._authProvider){this._authThenStart().then(o,a);return}let u=new R5e(c.code,c.message,c);a(u),(l=this.onerror)===null||l===void 0||l.call(this,u)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",c=>{var l;let u=c;try{if(this._endpoint=new URL(u.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(f){a(f),(l=this.onerror)===null||l===void 0||l.call(this,f),this.close();return}o()}),this._eventSource.onmessage=c=>{var l,u;let f=c,p;try{p=MS.parse(JSON.parse(f.data))}catch(m){(l=this.onerror)===null||l===void 0||l.call(this,m);return}(u=this.onmessage)===null||u===void 0||u.call(this,p)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new X0("No auth provider");if(await HS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new X0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders();o.set("content-type","application/json");let a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,a);if(!c.ok){if(c.status===401&&this._authProvider){if(this._resourceMetadataUrl=OH(c),await HS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new X0;return this.send(e)}let l=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${l}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}};var jle=class extends US{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){let n=Ole(this.ctx,r);return new Wle(new URL(r.url),n)}};d();d();var LEt=Ne(NEt(),1),QH=Ne(require("node:process"),1),FEt=require("node:stream");d();var Vle=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Jkr(r)}clear(){this._buffer=void 0}};function Jkr(t){return MS.parse(JSON.parse(t))}s(Jkr,"deserializeMessage");function MEt(t){return JSON.stringify(t)+`
`}s(MEt,"serializeMessage");var Xkr=QH.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Zkr(){let t={};for(let e of Xkr){let r=QH.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Zkr,"getDefaultEnvironment");var zle=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Vle,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new FEt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c;this._process=(0,LEt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...Zkr(),...this._serverParams.env},stdio:["pipe","pipe",(i=this._serverParams.stderr)!==null&&i!==void 0?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:QH.default.platform==="win32"&&ePr(),cwd:this._serverParams.cwd}),this._process.on("error",l=>{var u,f;if(l.name==="AbortError"){(u=this.onclose)===null||u===void 0||u.call(this);return}r(l),(f=this.onerror)===null||f===void 0||f.call(this,l)}),this._process.on("spawn",()=>{e()}),this._process.on("close",l=>{var u;this._process=void 0,(u=this.onclose)===null||u===void 0||u.call(this)}),(o=this._process.stdin)===null||o===void 0||o.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),(a=this._process.stdout)===null||a===void 0||a.on("data",l=>{this._readBuffer.append(l),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=MEt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function ePr(){return"type"in QH.default}s(ePr,"isElectron");var Q5e=require("child_process"),U5e=require("util");var Yle=class extends US{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...u1t(),...r.env||{}},r.stderr="pipe",new zle(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{NP(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}async cleanup(){if(this.transport){if(process.platform==="win32"){let r=null;"pid"in this.transport&&typeof this.transport.pid=="number"&&(r=this.transport.pid),r&&await this.isUvProcess(r)&&await this.forceKillWindowsProcess(r)}await this.mcp.close()}}async isUvProcess(r){try{let o=(await(0,U5e.promisify)(Q5e.exec)(`tasklist /fi "PID eq ${r}" /fo csv /nh`,{timeout:5e3})).stdout.trim().split(`
`);if(o.length>0){let c=o[0].split(",");if(c.length>0){let l=c[0].replace(/"/g,"").toLowerCase();return l==="uv.exe"||l==="uv"}}return!1}catch(n){return gi.debug(this.ctx,`Failed to get process info for PID ${r}:`,n),!1}}async forceKillWindowsProcess(r){try{let n=(0,U5e.promisify)(Q5e.exec);gi.info(this.ctx,`Force killing Windows process with PID ${r} for MCP server ${this.name}`),ql(this.ctx,{message:`Force killing Windows process with PID ${r}`,server:this.name}),await n(`taskkill /pid ${r} /t /f`,{timeout:1e4}),gi.info(this.ctx,`Successfully force killed process ${r}`)}catch(n){gi.debug(this.ctx,`Failed to kill process ${r} (process may not exist):`,n),hm(this.ctx,{message:`Failed to kill process ${r} (process may not exist): ${n instanceof Error?n.message:String(n)}`,server:this.name})}}};d();d();d();var Kle=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=Ule({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var tPr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},UH=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Jle=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:tPr}async _authThenStart(){var e;if(!this._authProvider)throw new X0("No auth provider");let r;try{r=await HS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new X0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let i=await this._authProvider.tokens();i&&(r.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,i;let{resumptionToken:o}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),o&&a.set("last-event-id",o);let c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:a,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!c.ok){if(c.status===401&&this._authProvider)return await this._authThenStart();if(c.status===405)return;throw new UH(c.status,`Failed to open SSE stream: ${c.statusText}`)}this._handleSseStream(c.body,e,!0)}catch(a){throw(i=this.onerror)===null||i===void 0||i.call(this,a),a}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:i,replayMessageId:o}=r,a;s(async()=>{var l,u,f,p;try{let m=e.pipeThrough(new TextDecoderStream).pipeThrough(new Kle).getReader();for(;;){let{value:h,done:g}=await m.read();if(g)break;if(h.id&&(a=h.id,i?.(h.id)),!h.event||h.event==="message")try{let A=MS.parse(JSON.parse(h.data));o!==void 0&&CH(A)&&(A.id=o),(l=this.onmessage)===null||l===void 0||l.call(this,A)}catch(A){(u=this.onerror)===null||u===void 0||u.call(this,A)}}}catch(m){if((f=this.onerror)===null||f===void 0||f.call(this,new Error(`SSE stream disconnected: ${m}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:i,replayMessageId:o},0)}catch(h){(p=this.onerror)===null||p===void 0||p.call(this,new Error(`Failed to reconnect: ${h instanceof Error?h.message:String(h)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new X0("No auth provider");if(await HS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new X0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o,a;try{let{resumptionToken:c,onresumptiontoken:l}=r||{};if(c){this._startOrAuthSse({resumptionToken:c,replayMessageId:fle(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let u=await this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let f={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},p=await((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,f),m=p.headers.get("mcp-session-id");if(m&&(this._sessionId=m),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=OH(p),await HS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new X0;return this.send(e)}let y=await p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${y}`)}if(p.status===202){b1t(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let g=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,A=p.headers.get("content-type");if(g)if(A?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:l},!1);else if(A?.includes("application/json")){let y=await p.json(),E=Array.isArray(y)?y.map(b=>MS.parse(b)):[MS.parse(y)];for(let b of E)(o=this.onmessage)===null||o===void 0||o.call(this,b)}else throw new UH(-1,`Unexpected content type: ${A}`)}catch(c){throw(a=this.onerror)===null||a===void 0||a.call(this,c),c}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let i=await this._commonHeaders(),o={...this._requestInit,method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},a=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,o);if(!a.ok&&a.status!==405)throw new UH(a.status,`Failed to terminate session: ${a.statusText}`);this._sessionId=void 0}catch(i){throw(n=this.onerror)===null||n===void 0||n.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var Xle=class extends US{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){let n=Ole(this.ctx,r);return new Jle(new URL(r.url),n)}};d();var Zle=class extends sS{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input,n)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new qc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(y1).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var nue=Ne(cl());d();d();NY();var KM=class extends qu{constructor(r,n=new q5e){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(Dr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},q5e=class extends qu{static{s(this,"SpawnUrlOpener")}async open(e){await ZF(e)}};d();var OEt=require("crypto"),QEt=Ne(require("http"));var eue=class{constructor(e){this.nonce=(0,OEt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((i,o)=>r={resolve:i,reject:o});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=QEt.createServer((i,o)=>{let a=new URL(i.url,`http://${i.headers.host}`);switch(a.pathname){case"/signin":{(a.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),o.writeHead(302,{location:this._startingRedirect.toString()}),o.end();break}case"/callback":{let c=a.searchParams.get("code")??void 0,l=a.searchParams.get("state")??void 0,u=new URL(l||"").searchParams.get("nonce")??void 0;if(!c||!l||!u){o.writeHead(400),o.end();return}if(this.state!==l)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),o.end(),new Error("State does not match.");if(this.nonce!==u)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end(),new Error("Nonce does not match.");r.resolve({code:c,state:l}),o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(sPe);break}default:o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(sPe)}})}static{s(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let i=this._server.address();if(typeof i=="string")this.port=parseInt(i);else if(i instanceof Object)this.port=i.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",i=>{r(new Error(`Error listening to server: ${i}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var rPr="Timed out",H5e=class{static{s(this,"CodeFlow")}},tue=class extends H5e{static{s(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let i=mCt(e);if(!i)return"";let{client_id:o,client_secret:a}=i,c=new URLSearchParams([["client_id",o],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),l=r.authorization_endpoint+"?"+c.toString(),u=new eue(l),f=await u.start(),p=`http://127.0.0.1:${f}/signin?nonce=${encodeURIComponent(u.nonce)}`;un.info(this.ctx,"auth url: ",p),await new KM(this.ctx).open(p);let m;try{m=(await Promise.race([u.waitForOAuthResponse(),new Promise((A,y)=>setTimeout(()=>y(new Error(rPr)),3e5))])).code}finally{setTimeout(()=>{u.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${f}/callback`,code:m,client_id:o,client_secret:a})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:i,client_secret:o}){let a=new URLSearchParams([["code",n],["client_id",i],["redirect_uri",r],["client_secret",o]]),c=await JP(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},a.toString());if(c.ok)return(await c.json()).access_token;{let l=await c.text(),u=new Error(l);throw u.name="GitHubTokenExchangeError",u}}};var rue=class t extends eg{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new lle;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,Ps(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(gi.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{s(this,"CLSMCPManager")}static{this.toolsNotificationType=new nue.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new nue.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return gi.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,i){if(!this.isMcpEnabled){gi.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){gi.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(Cu).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i,o){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let a=this.MCPServersMap.get(r);if(a){let{status:c,server:l}=a;if(c==="running"&&l)return await l.callTool(n,i,o)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));gi.error(this.ctx,a),await hm(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await ql(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new jle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Xle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Yle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(Uk,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await ql(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(gi.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;gi.info(this.ctx,c),ql(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}else if(a&&"url"in r&&r.type!=="sse"&&a[1]==="401"){let c=await this.getAuthMetadata(r),l=await this.getToken(r.url,c.authorizationServer,c.serverMetadata,c.resourceMetadata);if(!l){gi.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let u={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${l}`}}};return await this.addServer(u)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await hm(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(rc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(Dr).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;gi.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(Cu).registerTool(new Zle({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},(p,m)=>(gi.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p,m))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(Cu).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await ql(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(Uk),await i.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new cle(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,i,o){let a=await this.ctx.get(uy).getOrActivateProviderIdForServer(n);if(!a){let f=this.ctx.get(uy).createAuthenticationProvider(n);if(!f){gi.error(this.ctx,`No authentication provider found for server: ${n}`),await ql(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}a=f.id}let c=o?.scopes_supported||i.scopes_supported||[],l=await this.ctx.get(uy).getSessions(a,c,{authorizationServer:n},!0);if(l.length)return l[0].accessToken;let u=this.ctx.get(uy).getProvider(a);try{let{confirm:f}=await this.ctx.get(Dr).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:u.label});if(!f){gi.warn(this.ctx,"no confirmation for OAuth request");return}}catch(f){gi.warn(this.ctx,"no confirmation for OAuth request",f);return}try{let f=await new tue(this.ctx).auth(n,i,o),p=await u.createSession(c,f);return this.ctx.get(rc).showInformationMessageOnlyOnce("Authentication successful",`You have already authenticated with ${u.label}.`,{title:"OK"}),p.accessToken}catch(f){this.ctx.get(rc).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${f instanceof Error?f.message:String(f)}`);return}}};d();var UEt=Ne(cl());var iue=class t extends ZA{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new UEt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Dr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var sue=Ne(cl());var nPr=new sue.ProtocolRequestType("copilot/showPanelMessageRequest"),iPr=new sue.ProtocolNotificationType("copilot/showPanelMessage"),oue=class extends f8{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(Dr).connection.sendNotification(iPr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(Dr).connection,i;try{i=await n.sendRequest(nPr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${_x(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var oPr=new Ct("fetcher"),sPr="https://default.exp-tas.com/",aue=class extends $r{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Rd(i)||`${r}/`.startsWith(sPr))throw i;oPr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var qEt=new Ct("fetcher"),cue=class extends $r{constructor(r,n=new PM(r),i=new RM(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.updateFetcher=s(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=zi(this.ctx,Ht.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(qEt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new aue(r,n,i,()=>{qEt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Cs).onDidSetCapabilities(this.updateFetcher),r.get(kc).onDidChangeCopilotSettings(this.updateFetcher)}static{s(this,"AgentDelegatingFetcher")}get fetchStrategy(){return zi(this.ctx,Ht.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(Cs).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var lue=class extends rc{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Dr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}showInformationMessage(r,...n){return this.connection.window.showInformationMessage(r,...n)}};d();d();var HEt=Ne(require("crypto")),$Et=require("os");var aPr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function cPr(t){let e=t.replace(/-/g,":").toLowerCase();return!aPr.has(e)}s(cPr,"validateMacAddress");function lPr(){let t=(0,$Et.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(cPr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(lPr,"getMac");var $5e;function uPr(){try{let t=lPr();return HEt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(uPr,"getMacMachineId");function WEt(){return $5e||($5e=uPr()||Er()),$5e}s(WEt,"getMachineId");var dPr=Er()+Date.now(),jEt=new Ds(dPr,WEt());d();d();var uue=class extends loe{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(L1).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(L1);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.emitFilesDeleted(o.map(a=>({uri:a.uri})))}};var due=class extends Gd{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new uue(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Cs).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function GEt(t){let e=new ig(process.env),r=Dlt(e);r.set(ig,e),r.set($r,new cue(r)),r.set(Ja,new Ja(r)),fke(r,{});let n=sje();r.set(Ai,n);let i=new oH(r);r.set(Br,i),r.set(oH,i);let o=new uA(r,n);r.set(uA,o),r.set(Yi,new YG(r,process.env)),r.set(wf,new wf(r)),r.set(Pd,new Pd(r,"agent")),r.set(Ds,jEt),r.set(mn,new Poe),r.set(DP,oCt()),r.set($s,new $s),r.set(Mi,_Ct),r.set(YR,new Nce(r)),r.set(Gd,new due(r)),r.set(L1,new L1(r)),r.set(ul,new ul),r.set(Oc,UX(r,Bgt)),r.set(I0,new I0(r)),r.set(HC,new A3),e0t(r),uoe(r),A0t(r),rje(r),r.set(Dr,new Dr(r,t)),r.set(rc,new lue(r)),r.set(f8,new oue(r)),r.set(qu,new KM(r)),r.set(So,new Kce(r)),r.set(aH,new aH(r));let a=new kS(r);return r.set(Cr,a),r.set(kS,a),r.set(uf,new d8(r,process.env)),r.set(ll,new ll(r)),xCt(r),Put(r),r.set(Uf,new Uf),r.set(SS,new SS),r.set(Ay,new Ay),r.set(Sf,new Fce),r.set(K1,new K1),r.set(BA,new coe(r)),r.set(jC,new N8),r.set(ly,new ly(r)),r.set(fE,new fE(r)),r.set(Al,new Al(r)),r.set(od,new Vce(r)),r.set(Bw,new Yce(r)),r.set(y1,new zce(r)),r.set(Cu,new Cu(r)),r.set(xE,new xE(r)),r.set(dy,new dy(r)),r.set(rE,new rE(r)),r.set(eg,new rue(r)),r.set(ZA,new iue(r)),r.set(Lk,new Lk),r.set(uy,new Lce(r)),r.set(C1,new C1),r.set(Mk,new Mk),r.set(KA,new KA),r.set(q0,new q0),r.set(T1,new T1(r)),r.set(Zh,new Fne([new doe,new foe])),r.set(mP,new mP(r)),r}s(GEt,"createLanguageServerContext");d();var W5e=require("events"),qH=Ne(require("fs"));NY();var pue=Ne(cl());d();var zEt=Ne(require("fs")),YEt=Ne(require("http")),JM=Ne(require("path"));var fue=class{constructor(e,r){this.port=e;let n;this.server=YEt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{VEt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{VEt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;JM.basename(__dirname)!=="debug"&&(a=JM.dirname(__dirname)),n??=zEt.readFileSync(JM.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function VEt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(VEt,"writeData");var j5e=class extends pue.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},G5e=class extends pue.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function KEt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new W5e.EventEmitter;let c=new fue(i,n).listen();i===0&&await ZF(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=qH.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=qH.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&qH.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new W5e.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new G5e(e,n),r=new j5e(r,n)),[e,r]}s(KEt,"wrapTransports");async function ZEt(){let t=OVe(process.argv.slice(2)).version(new Io().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new xg.IPCMessageReader(process),n=new xg.IPCMessageWriter(process)):e.stdio?(r=new xg.StreamMessageReader(process.stdin),n=new xg.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await zE.mkdtemp(JEt.default.tmpdir()+"/github-copilot-"));try{let c=sCe(),l=JSON.parse(await zE.readFile(HH.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await zE.readFile(HH.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let m=`${p}:${vp}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:vp},f=!0)}f&&await zE.writeFile(HH.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await zE.rm(HH.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,xg.createConnection)(xg.ProposedFeatures.all,...await KEt(process.env,r,n)),o=GEt(i);console=Uje(o);let a=o.get(Dr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),nje(o),a.listen()}s(ZEt,"main");XEt.isMainThread?require.main===module&&ZEt():Oje()&&Qje();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
