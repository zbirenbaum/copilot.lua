"use strict";var I1t=Object.create;var IP=Object.defineProperty;var Ake=Object.getOwnPropertyDescriptor;var T1t=Object.getOwnPropertyNames;var w1t=Object.getPrototypeOf,S1t=Object.prototype.hasOwnProperty;var hke=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),gke=t=>{throw TypeError(t)};var s=(t,e)=>IP(t,"name",{value:e,configurable:!0});var gg=(t,e)=>()=>(t&&(e=t(t=0)),e);var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ma=(t,e)=>{for(var r in e)IP(t,r,{get:e[r],enumerable:!0})},yke=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of T1t(e))!S1t.call(t,i)&&i!==r&&IP(t,i,{get:()=>e[i],enumerable:!(n=Ake(e,i))||n.enumerable});return t};var Fe=(t,e,r)=>(r=t!=null?I1t(w1t(t)):{},yke(e||!t||!t.__esModule?IP(r,"default",{value:t,enumerable:!0}):r,t)),_1t=t=>yke(IP({},"__esModule",{value:!0}),t),Wd=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ake(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&IP(e,r,i),i},ha=(t,e)=>(r,n)=>e(r,n,t);var sle=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&gke("Object expected");var n,i;r&&(n=e[hke("asyncDispose")]),n===void 0&&(n=e[hke("dispose")],r&&(i=n)),typeof n!="function"&&gke("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},ale=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,f=gg(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var vke=q(cle=>{f();var Cke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");cle.encode=function(t){if(0<=t&&t<Cke.length)return Cke[t];throw new TypeError("Must be between 0 and 63: "+t)};cle.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,d=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+d:t==c?62:t==l?63:-1}});var dle=q(ule=>{f();var Eke=vke(),lle=5,xke=1<<lle,bke=xke-1,Ike=xke;function R1t(t){return t<0?(-t<<1)+1:(t<<1)+0}s(R1t,"toVLQSigned");function k1t(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(k1t,"fromVLQSigned");ule.encode=s(function(e){var r="",n,i=R1t(e);do n=i&bke,i>>>=lle,i>0&&(n|=Ike),r+=Eke.encode(n);while(i>0);return r},"base64VLQ_encode");ule.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=Eke.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&Ike),l&=bke,o=o+(l<<a),a+=lle}while(c);n.value=k1t(o),n.rest=r},"base64VLQ_decode")});var SP=q(sd=>{f();function P1t(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(P1t,"getArg");sd.getArg=P1t;var Tke=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,D1t=/^data:.+\,.+$/;function nM(t){var e=t.match(Tke);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(nM,"urlParse");sd.urlParse=nM;function TP(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(TP,"urlGenerate");sd.urlGenerate=TP;function fle(t){var e=t,r=nM(t);if(r){if(!r.path)return t;e=r.path}for(var n=sd.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,TP(r)):e}s(fle,"normalize");sd.normalize=fle;function wke(t,e){t===""&&(t="."),e===""&&(e=".");var r=nM(e),n=nM(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),TP(r);if(r||e.match(D1t))return e;if(n&&!n.host&&!n.path)return n.host=e,TP(n);var i=e.charAt(0)==="/"?e:fle(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,TP(n)):i}s(wke,"join");sd.join=wke;sd.isAbsolute=function(t){return t.charAt(0)==="/"||Tke.test(t)};function B1t(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(B1t,"relative");sd.relative=B1t;var Ske=function(){var t=Object.create(null);return!("__proto__"in t)}();function _ke(t){return t}s(_ke,"identity");function N1t(t){return Rke(t)?"$"+t:t}s(N1t,"toSetString");sd.toSetString=Ske?_ke:N1t;function L1t(t){return Rke(t)?t.slice(1):t}s(L1t,"fromSetString");sd.fromSetString=Ske?_ke:L1t;function Rke(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(Rke,"isProtoString");function M1t(t,e,r){var n=wP(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:wP(t.name,e.name)}s(M1t,"compareByOriginalPositions");sd.compareByOriginalPositions=M1t;function F1t(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=wP(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:wP(t.name,e.name)}s(F1t,"compareByGeneratedPositionsDeflated");sd.compareByGeneratedPositionsDeflated=F1t;function wP(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(wP,"strcmp");function O1t(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=wP(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:wP(t.name,e.name)}s(O1t,"compareByGeneratedPositionsInflated");sd.compareByGeneratedPositionsInflated=O1t;function Q1t(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(Q1t,"parseSourceMapInput");sd.parseSourceMapInput=Q1t;function U1t(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=nM(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=wke(TP(n),e)}return fle(e)}s(U1t,"computeSourceURL");sd.computeSourceURL=U1t});var hle=q(kke=>{f();var ple=SP(),mle=Object.prototype.hasOwnProperty,WS=typeof Map<"u";function J1(){this._array=[],this._set=WS?new Map:Object.create(null)}s(J1,"ArraySet");J1.fromArray=s(function(e,r){for(var n=new J1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");J1.prototype.size=s(function(){return WS?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");J1.prototype.add=s(function(e,r){var n=WS?e:ple.toSetString(e),i=WS?this.has(e):mle.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(WS?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");J1.prototype.has=s(function(e){if(WS)return this._set.has(e);var r=ple.toSetString(e);return mle.call(this._set,r)},"ArraySet_has");J1.prototype.indexOf=s(function(e){if(WS){var r=this._set.get(e);if(r>=0)return r}else{var n=ple.toSetString(e);if(mle.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");J1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");J1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");kke.ArraySet=J1});var Bke=q(Dke=>{f();var Pke=SP();function q1t(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Pke.compareByGeneratedPositionsInflated(t,e)<=0}s(q1t,"generatedPositionAfter");function NH(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(NH,"MappingList");NH.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");NH.prototype.add=s(function(e){q1t(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");NH.prototype.toArray=s(function(){return this._sorted||(this._array.sort(Pke.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Dke.MappingList=NH});var gle=q(Nke=>{f();var iM=dle(),Fc=SP(),LH=hle().ArraySet,H1t=Bke().MappingList;function dm(t){t||(t={}),this._file=Fc.getArg(t,"file",null),this._sourceRoot=Fc.getArg(t,"sourceRoot",null),this._skipValidation=Fc.getArg(t,"skipValidation",!1),this._sources=new LH,this._names=new LH,this._mappings=new H1t,this._sourcesContents=null}s(dm,"SourceMapGenerator");dm.prototype._version=3;dm.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new dm({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Fc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Fc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");dm.prototype.addMapping=s(function(e){var r=Fc.getArg(e,"generated"),n=Fc.getArg(e,"original",null),i=Fc.getArg(e,"source",null),o=Fc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");dm.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Fc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Fc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Fc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");dm.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Fc.relative(o,i));var a=new LH,c=new LH;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=Fc.join(n,l.source)),o!=null&&(l.source=Fc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var d=l.source;d!=null&&!a.has(d)&&a.add(d);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=Fc.join(n,l)),o!=null&&(l=Fc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");dm.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");dm.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!Fc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=iM.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=iM.encode(p-a),a=p,l+=iM.encode(u.originalLine-1-i),i=u.originalLine-1,l+=iM.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),l+=iM.encode(d-o),o=d)),c+=l}return c},"SourceMapGenerator_serializeMappings");dm.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Fc.relative(r,n));var i=Fc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");dm.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");dm.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Nke.SourceMapGenerator=dm});var Lke=q($S=>{f();$S.GREATEST_LOWER_BOUND=1;$S.LEAST_UPPER_BOUND=2;function Ale(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Ale(a,e,r,n,i,o):o==$S.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Ale(t,a,r,n,i,o):o==$S.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Ale,"recursiveSearch");$S.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Ale(-1,r.length,e,r,n,i||$S.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var Fke=q(Mke=>{f();function yle(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(yle,"swap");function W1t(t,e){return Math.round(t+Math.random()*(e-t))}s(W1t,"randomIntInRange");function Cle(t,e,r,n){if(r<n){var i=W1t(r,n),o=r-1;yle(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,yle(t,o,c));yle(t,o+1,c);var l=o+1;Cle(t,e,r,l-1),Cle(t,e,l+1,n)}}s(Cle,"doQuickSort");Mke.quickSort=function(t,e){Cle(t,e,0,t.length-1)}});var Qke=q(MH=>{f();var Mr=SP(),vle=Lke(),_P=hle().ArraySet,$1t=dle(),oM=Fke().quickSort;function Hs(t,e){var r=t;return typeof t=="string"&&(r=Mr.parseSourceMapInput(t)),r.sections!=null?new Ag(r,e):new yu(r,e)}s(Hs,"SourceMapConsumer");Hs.fromSourceMap=function(t,e){return yu.fromSourceMap(t,e)};Hs.prototype._version=3;Hs.prototype.__generatedMappings=null;Object.defineProperty(Hs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Hs.prototype.__originalMappings=null;Object.defineProperty(Hs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Hs.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Hs.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Hs.GENERATED_ORDER=1;Hs.ORIGINAL_ORDER=2;Hs.GREATEST_LOWER_BOUND=1;Hs.LEAST_UPPER_BOUND=2;Hs.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Hs.GENERATED_ORDER,a;switch(o){case Hs.GENERATED_ORDER:a=this._generatedMappings;break;case Hs.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=Mr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Hs.prototype.allGeneratedPositionsFor=s(function(e){var r=Mr.getArg(e,"line"),n={source:Mr.getArg(e,"source"),originalLine:r,originalColumn:Mr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Mr.compareByOriginalPositions,vle.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:Mr.getArg(a,"generatedLine",null),column:Mr.getArg(a,"generatedColumn",null),lastColumn:Mr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:Mr.getArg(a,"generatedLine",null),column:Mr.getArg(a,"generatedColumn",null),lastColumn:Mr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");MH.SourceMapConsumer=Hs;function yu(t,e){var r=t;typeof t=="string"&&(r=Mr.parseSourceMapInput(t));var n=Mr.getArg(r,"version"),i=Mr.getArg(r,"sources"),o=Mr.getArg(r,"names",[]),a=Mr.getArg(r,"sourceRoot",null),c=Mr.getArg(r,"sourcesContent",null),l=Mr.getArg(r,"mappings"),u=Mr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=Mr.normalize(a)),i=i.map(String).map(Mr.normalize).map(function(d){return a&&Mr.isAbsolute(a)&&Mr.isAbsolute(d)?Mr.relative(a,d):d}),this._names=_P.fromArray(o.map(String),!0),this._sources=_P.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return Mr.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(yu,"BasicSourceMapConsumer");yu.prototype=Object.create(Hs.prototype);yu.prototype.consumer=Hs;yu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Mr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};yu.fromSourceMap=s(function(e,r){var n=Object.create(yu.prototype),i=n._names=_P.fromArray(e._names.toArray(),!0),o=n._sources=_P.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return Mr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new Oke;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return oM(n.__originalMappings,Mr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");yu.prototype._version=3;Object.defineProperty(yu.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function Oke(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(Oke,"Mapping");yu.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,d=0,p={},m={},h=[],g=[],A,y,E,b,w;d<u;)if(e.charAt(d)===";")n++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(A=new Oke,A.generatedLine=n,b=d;b<u&&!this._charIsMappingSeparator(e,b);b++);if(y=e.slice(d,b),E=p[y],E)d+=y.length;else{for(E=[];d<b;)$1t.decode(e,d,m),w=m.value,d=m.rest,E.push(w);if(E.length===2)throw new Error("Found a source, but no line and column");if(E.length===3)throw new Error("Found a source and line, but no column");p[y]=E}A.generatedColumn=i+E[0],i=A.generatedColumn,E.length>1&&(A.source=c+E[1],c+=E[1],A.originalLine=o+E[2],o=A.originalLine,A.originalLine+=1,A.originalColumn=a+E[3],a=A.originalColumn,E.length>4&&(A.name=l+E[4],l+=E[4])),g.push(A),typeof A.originalLine=="number"&&h.push(A)}oM(g,Mr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,oM(h,Mr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");yu.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return vle.search(e,r,o,a)},"SourceMapConsumer_findMapping");yu.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");yu.prototype.originalPositionFor=s(function(e){var r={generatedLine:Mr.getArg(e,"line"),generatedColumn:Mr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Mr.compareByGeneratedPositionsDeflated,Mr.getArg(e,"bias",Hs.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Mr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Mr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Mr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Mr.getArg(i,"originalLine",null),column:Mr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");yu.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");yu.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Mr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Mr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");yu.prototype.generatedPositionFor=s(function(e){var r=Mr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Mr.getArg(e,"line"),originalColumn:Mr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Mr.compareByOriginalPositions,Mr.getArg(e,"bias",Hs.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Mr.getArg(o,"generatedLine",null),column:Mr.getArg(o,"generatedColumn",null),lastColumn:Mr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");MH.BasicSourceMapConsumer=yu;function Ag(t,e){var r=t;typeof t=="string"&&(r=Mr.parseSourceMapInput(t));var n=Mr.getArg(r,"version"),i=Mr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new _P,this._names=new _P;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=Mr.getArg(a,"offset"),l=Mr.getArg(c,"line"),u=Mr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Hs(Mr.getArg(a,"map"),e)}})}s(Ag,"IndexedSourceMapConsumer");Ag.prototype=Object.create(Hs.prototype);Ag.prototype.constructor=Hs;Ag.prototype._version=3;Object.defineProperty(Ag.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Ag.prototype.originalPositionFor=s(function(e){var r={generatedLine:Mr.getArg(e,"line"),generatedColumn:Mr.getArg(e,"column")},n=vle.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Ag.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Ag.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Ag.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Mr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Ag.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=Mr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var d={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}oM(this.__generatedMappings,Mr.compareByGeneratedPositionsDeflated),oM(this.__originalMappings,Mr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");MH.IndexedSourceMapConsumer=Ag});var qke=q(Uke=>{f();var j1t=gle().SourceMapGenerator,FH=SP(),G1t=/(\r?\n)/,V1t=10,RP="$$$isSourceNode$$$";function $0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[RP]=!0,n!=null&&this.add(n)}s($0,"SourceNode");$0.fromStringWithSourceMap=s(function(e,r,n){var i=new $0,o=e.split(G1t),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,d=null;return r.eachMapping(function(m){if(d!==null)if(l<m.generatedLine)p(d,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=FH.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?FH.join(n,m.source):m.source;i.add(new $0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");$0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[RP]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");$0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[RP]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");$0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[RP]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");$0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");$0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[RP]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");$0.prototype.setSourceContent=s(function(e,r){this.sourceContents[FH.toSetString(e)]=r},"SourceNode_setSourceContent");$0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][RP]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(FH.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");$0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");$0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new j1t(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,d){r.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||c!==d.column||l!==d.name)&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),o=d.source,a=d.line,c=d.column,l=d.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===V1t?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(u,d){n.setSourceContent(u,d)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");Uke.SourceNode=$0});var Hke=q(OH=>{f();OH.SourceMapGenerator=gle().SourceMapGenerator;OH.SourceMapConsumer=Qke().SourceMapConsumer;OH.SourceNode=qke().SourceNode});var $ke=q((Iwr,Wke)=>{f();var z1t=Object.prototype.toString,Ele=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Y1t(t){return z1t.call(t).slice(8,-1)==="ArrayBuffer"}s(Y1t,"isArrayBuffer");function K1t(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Ele?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(K1t,"fromArrayBuffer");function J1t(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Ele?Buffer.from(t,e):new Buffer(t,e)}s(J1t,"fromString");function X1t(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Y1t(t)?K1t(t,e,r):typeof t=="string"?J1t(t,e):Ele?Buffer.from(t):new Buffer(t)}s(X1t,"bufferFrom");Wke.exports=X1t});var Xke=q((GS,Tle)=>{f();var Z1t=Hke().SourceMapConsumer,xle=require("path"),xy;try{xy=require("fs"),(!xy.existsSync||!xy.readFileSync)&&(xy=null)}catch{}var evt=$ke();function jke(t,e){return t.require(e)}s(jke,"dynamicRequire");var Gke=!1,Vke=!1,ble=!1,sM="auto",jS={},aM={},tvt=/^data:application\/json[^,]+base64,/,Pb=[],Db=[];function wle(){return sM==="browser"?!0:sM==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(wle,"isInBrowser");function rvt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(rvt,"hasGlobalProcessEventEmitter");function nvt(){return typeof process=="object"&&process!==null?process.version:""}s(nvt,"globalProcessVersion");function ivt(){if(typeof process=="object"&&process!==null)return process.stderr}s(ivt,"globalProcessStderr");function ovt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(ovt,"globalProcessExit");function QH(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(QH,"handlerExec");var Sle=QH(Pb);Pb.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in jS)return jS[t];var e="";try{if(xy)xy.existsSync(t)&&(e=xy.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return jS[t]=e});function Ile(t,e){if(!t)return e;var r=xle.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+xle.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+xle.resolve(r.slice(i.length),e)}s(Ile,"supportRelativeURL");function svt(t){var e;if(wle())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Sle(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(svt,"retrieveSourceMapURL");var _le=QH(Db);Db.push(function(t){var e=svt(t);if(!e)return null;var r;if(tvt.test(e)){var n=e.slice(e.indexOf(",")+1);r=evt(n,"base64").toString(),e=t}else e=Ile(t,e),r=Sle(e);return r?{url:e,map:r}:null});function Rle(t){var e=aM[t.source];if(!e){var r=_le(t.source);r?(e=aM[t.source]={url:r.url,map:new Z1t(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=Ile(e.url,i);jS[c]=a}})):e=aM[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=Ile(e.url,n.source),n}return t}s(Rle,"mapSourcePosition");function Yke(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Rle({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Yke(e[2])+")":t}s(Yke,"mapEvalOrigin");function avt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(avt,"CallSiteToString");function zke(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=avt,e}s(zke,"cloneCallSite");function Kke(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(nvt())?0:62;n===1&&i>a&&!wle()&&!t.isEval()&&(i-=a);var c=Rle({source:r,line:n,column:i});e.curPosition=c,t=zke(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=Yke(u),t=zke(t),t.getEvalOrigin=function(){return u}),t}s(Kke,"wrapCallSite");function cvt(t,e){ble&&(jS={},aM={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+Kke(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(cvt,"prepareStackTrace");function Jke(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=jS[r];if(!o&&xy&&xy.existsSync(r))try{o=xy.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(Jke,"getErrorSource");function lvt(t){var e=Jke(t),r=ivt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),ovt(1)}s(lvt,"printErrorAndExit");function uvt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return lvt(arguments[1])}return t.apply(this,arguments)}}s(uvt,"shimEmitUncaughtException");var dvt=Pb.slice(0),fvt=Db.slice(0);GS.wrapCallSite=Kke;GS.getErrorSource=Jke;GS.mapSourcePosition=Rle;GS.retrieveSourceMap=_le;GS.install=function(t){if(t=t||{},t.environment&&(sM=t.environment,["node","browser","auto"].indexOf(sM)===-1))throw new Error("environment "+sM+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Pb.length=0),Pb.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Db.length=0),Db.unshift(t.retrieveSourceMap)),t.hookRequire&&!wle()){var e=jke(Tle,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return jS[a]=o,aM[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(ble||(ble="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Gke||(Gke=!0,Error.prepareStackTrace=cvt),!Vke){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=jke(Tle,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&rvt()&&(Vke=!0,uvt())}};GS.resetRetrieveHandlers=function(){Pb.length=0,Db.length=0,Pb=dvt.slice(0),Db=fvt.slice(0),_le=QH(Db),Sle=QH(Pb)}});var eo=q((qH,t5e)=>{f();(function(t,e){typeof qH=="object"?t5e.exports=qH=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(qH,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function E(){}return s(E,"F"),function(b){var w;return E.prototype=b,w=new E,E.prototype=null,w}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(E){var b=o(this);return E&&b.mixIn(E),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var E=this.extend();return E.init.apply(E,arguments),E},"create"),init:s(function(){},"init"),mixIn:s(function(E){for(var b in E)E.hasOwnProperty(b)&&(this[b]=E[b]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(E,b){E=this.words=E||[],b!=r?this.sigBytes=b:this.sigBytes=E.length*4},"init"),toString:s(function(E){return(E||p).stringify(this)},"toString"),concat:s(function(E){var b=this.words,w=E.words,R=this.sigBytes,D=E.sigBytes;if(this.clamp(),R%4)for(var N=0;N<D;N++){var O=w[N>>>2]>>>24-N%4*8&255;b[R+N>>>2]|=O<<24-(R+N)%4*8}else for(var Y=0;Y<D;Y+=4)b[R+Y>>>2]=w[Y>>>2];return this.sigBytes+=D,this},"concat"),clamp:s(function(){var E=this.words,b=this.sigBytes;E[b>>>2]&=4294967295<<32-b%4*8,E.length=e.ceil(b/4)},"clamp"),clone:s(function(){var E=l.clone.call(this);return E.words=this.words.slice(0),E},"clone"),random:s(function(E){for(var b=[],w=0;w<E;w+=4)b.push(i());return new u.init(b,E)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(E){for(var b=E.words,w=E.sigBytes,R=[],D=0;D<w;D++){var N=b[D>>>2]>>>24-D%4*8&255;R.push((N>>>4).toString(16)),R.push((N&15).toString(16))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,w=[],R=0;R<b;R+=2)w[R>>>3]|=parseInt(E.substr(R,2),16)<<24-R%8*4;return new u.init(w,b/2)},"parse")},m=d.Latin1={stringify:s(function(E){for(var b=E.words,w=E.sigBytes,R=[],D=0;D<w;D++){var N=b[D>>>2]>>>24-D%4*8&255;R.push(String.fromCharCode(N))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,w=[],R=0;R<b;R++)w[R>>>2]|=(E.charCodeAt(R)&255)<<24-R%4*8;return new u.init(w,b)},"parse")},h=d.Utf8={stringify:s(function(E){try{return decodeURIComponent(escape(m.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(E){return m.parse(unescape(encodeURIComponent(E)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(E){typeof E=="string"&&(E=h.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},"_append"),_process:s(function(E){var b,w=this._data,R=w.words,D=w.sigBytes,N=this.blockSize,O=N*4,Y=D/O;E?Y=e.ceil(Y):Y=e.max((Y|0)-this._minBufferSize,0);var ee=Y*N,V=e.min(ee*4,D);if(ee){for(var H=0;H<ee;H+=N)this._doProcessBlock(R,H);b=R.splice(0,ee),w.sigBytes-=V}return new u.init(b,V)},"_process"),clone:s(function(){var E=l.clone.call(this);return E._data=this._data.clone(),E},"clone"),_minBufferSize:0}),A=c.Hasher=g.extend({cfg:l.extend(),init:s(function(E){this.cfg=this.cfg.extend(E),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(E){return this._append(E),this._process(),this},"update"),finalize:s(function(E){E&&this._append(E);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(E){return function(b,w){return new E.init(w).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(E){return function(b,w){return new y.HMAC.init(E,w).finalize(b)}},"_createHmacHelper")}),y=a.algo={};return a}(Math);return t})});var uM=q((HH,r5e)=>{f();(function(t,e){typeof HH=="object"?r5e.exports=HH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(HH,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),l=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var i5e=q((WH,n5e)=>{f();(function(t,e){typeof WH=="object"?n5e.exports=WH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(WH,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var s5e=q(($H,o5e)=>{f();(function(t,e){typeof $H=="object"?o5e.exports=$H=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})($H,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,d=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,d=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=a(c.charCodeAt(d)<<16-d%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Bb=q((jH,a5e)=>{f();(function(t,e){typeof jH=="object"?a5e.exports=jH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(jH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,d=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,A=l[m+2>>>2]>>>24-(m+2)%4*8&255,y=h<<16|g<<8|A,E=0;E<4&&m+E*.75<u;E++)p.push(d.charAt(y>>>6*(3-E)&63));var b=d.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var d=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;d[p>>>2]|=A<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var l5e=q((GH,c5e)=>{f();(function(t,e){typeof GH=="object"?c5e.exports=GH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(GH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,d=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,E=g<<16|A<<8|y,b=0;b<4&&h+b*.75<d;b++)m.push(p.charAt(E>>>6*(3-b)&63));var w=p.charAt(64);if(w)for(;m.length%4;)m.push(w);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,d=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var d=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;d[p>>>2]|=A<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var Nb=q((VH,u5e)=>{f();(function(t,e){typeof VH=="object"?u5e.exports=VH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(VH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var A=0;A<16;A++){var y=g+A,E=h[y];h[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var b=this._hash.words,w=h[g+0],R=h[g+1],D=h[g+2],N=h[g+3],O=h[g+4],Y=h[g+5],ee=h[g+6],V=h[g+7],H=h[g+8],U=h[g+9],X=h[g+10],K=h[g+11],j=h[g+12],W=h[g+13],J=h[g+14],ie=h[g+15],ae=b[0],te=b[1],pe=b[2],Ae=b[3];ae=u(ae,te,pe,Ae,w,7,c[0]),Ae=u(Ae,ae,te,pe,R,12,c[1]),pe=u(pe,Ae,ae,te,D,17,c[2]),te=u(te,pe,Ae,ae,N,22,c[3]),ae=u(ae,te,pe,Ae,O,7,c[4]),Ae=u(Ae,ae,te,pe,Y,12,c[5]),pe=u(pe,Ae,ae,te,ee,17,c[6]),te=u(te,pe,Ae,ae,V,22,c[7]),ae=u(ae,te,pe,Ae,H,7,c[8]),Ae=u(Ae,ae,te,pe,U,12,c[9]),pe=u(pe,Ae,ae,te,X,17,c[10]),te=u(te,pe,Ae,ae,K,22,c[11]),ae=u(ae,te,pe,Ae,j,7,c[12]),Ae=u(Ae,ae,te,pe,W,12,c[13]),pe=u(pe,Ae,ae,te,J,17,c[14]),te=u(te,pe,Ae,ae,ie,22,c[15]),ae=d(ae,te,pe,Ae,R,5,c[16]),Ae=d(Ae,ae,te,pe,ee,9,c[17]),pe=d(pe,Ae,ae,te,K,14,c[18]),te=d(te,pe,Ae,ae,w,20,c[19]),ae=d(ae,te,pe,Ae,Y,5,c[20]),Ae=d(Ae,ae,te,pe,X,9,c[21]),pe=d(pe,Ae,ae,te,ie,14,c[22]),te=d(te,pe,Ae,ae,O,20,c[23]),ae=d(ae,te,pe,Ae,U,5,c[24]),Ae=d(Ae,ae,te,pe,J,9,c[25]),pe=d(pe,Ae,ae,te,N,14,c[26]),te=d(te,pe,Ae,ae,H,20,c[27]),ae=d(ae,te,pe,Ae,W,5,c[28]),Ae=d(Ae,ae,te,pe,D,9,c[29]),pe=d(pe,Ae,ae,te,V,14,c[30]),te=d(te,pe,Ae,ae,j,20,c[31]),ae=p(ae,te,pe,Ae,Y,4,c[32]),Ae=p(Ae,ae,te,pe,H,11,c[33]),pe=p(pe,Ae,ae,te,K,16,c[34]),te=p(te,pe,Ae,ae,J,23,c[35]),ae=p(ae,te,pe,Ae,R,4,c[36]),Ae=p(Ae,ae,te,pe,O,11,c[37]),pe=p(pe,Ae,ae,te,V,16,c[38]),te=p(te,pe,Ae,ae,X,23,c[39]),ae=p(ae,te,pe,Ae,W,4,c[40]),Ae=p(Ae,ae,te,pe,w,11,c[41]),pe=p(pe,Ae,ae,te,N,16,c[42]),te=p(te,pe,Ae,ae,ee,23,c[43]),ae=p(ae,te,pe,Ae,U,4,c[44]),Ae=p(Ae,ae,te,pe,j,11,c[45]),pe=p(pe,Ae,ae,te,ie,16,c[46]),te=p(te,pe,Ae,ae,D,23,c[47]),ae=m(ae,te,pe,Ae,w,6,c[48]),Ae=m(Ae,ae,te,pe,V,10,c[49]),pe=m(pe,Ae,ae,te,J,15,c[50]),te=m(te,pe,Ae,ae,Y,21,c[51]),ae=m(ae,te,pe,Ae,j,6,c[52]),Ae=m(Ae,ae,te,pe,N,10,c[53]),pe=m(pe,Ae,ae,te,X,15,c[54]),te=m(te,pe,Ae,ae,R,21,c[55]),ae=m(ae,te,pe,Ae,H,6,c[56]),Ae=m(Ae,ae,te,pe,ie,10,c[57]),pe=m(pe,Ae,ae,te,ee,15,c[58]),te=m(te,pe,Ae,ae,W,21,c[59]),ae=m(ae,te,pe,Ae,O,6,c[60]),Ae=m(Ae,ae,te,pe,K,10,c[61]),pe=m(pe,Ae,ae,te,D,15,c[62]),te=m(te,pe,Ae,ae,U,21,c[63]),b[0]=b[0]+ae|0,b[1]=b[1]+te|0,b[2]=b[2]+pe|0,b[3]=b[3]+Ae|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32;var E=e.floor(A/4294967296),b=A;g[(y+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var w=this._hash,R=w.words,D=0;D<4;D++){var N=R[D];R[D]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return w},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,A,y,E,b,w){var R=h+(g&A|~g&y)+E+w;return(R<<b|R>>>32-b)+g}s(u,"FF");function d(h,g,A,y,E,b,w){var R=h+(g&y|A&~y)+E+w;return(R<<b|R>>>32-b)+g}s(d,"GG");function p(h,g,A,y,E,b,w){var R=h+(g^A^y)+E+w;return(R<<b|R>>>32-b)+g}s(p,"HH");function m(h,g,A,y,E,b,w){var R=h+(A^(g|~y))+E+w;return(R<<b|R>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var kle=q((zH,d5e)=>{f();(function(t,e){typeof zH=="object"?d5e.exports=zH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(zH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],A=d[4],y=0;y<80;y++){if(y<16)a[y]=l[u+y]|0;else{var E=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=E<<1|E>>>31}var b=(p<<5|p>>>27)+A+a[y];y<20?b+=(m&h|~m&g)+1518500249:y<40?b+=(m^h^g)+1859775393:y<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,A=g,g=h,h=m<<30|m>>>2,m=p,p=b}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+A|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,d=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var KH=q((YH,f5e)=>{f();(function(t,e){typeof YH=="object"?f5e.exports=YH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(YH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(A){for(var y=e.sqrt(A),E=2;E<=y;E++)if(!(A%E))return!1;return!0}s(p,"isPrime");function m(A){return(A-(A|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],A=h[1],y=h[2],E=h[3],b=h[4],w=h[5],R=h[6],D=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var O=u[N-15],Y=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,ee=u[N-2],V=(ee<<15|ee>>>17)^(ee<<13|ee>>>19)^ee>>>10;u[N]=Y+u[N-7]+V+u[N-16]}var H=b&w^~b&R,U=g&A^g&y^A&y,X=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),K=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),j=D+K+H+l[N]+u[N],W=X+U;D=R,R=w,w=b,b=E+j|0,E=y,y=A,A=g,g=j+W|0}h[0]=h[0]+g|0,h[1]=h[1]+A|0,h[2]=h[2]+y|0,h[3]=h[3]+E|0,h[4]=h[4]+b|0,h[5]=h[5]+w|0,h[6]=h[6]+R|0,h[7]=h[7]+D|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(d),r.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var m5e=q((JH,p5e)=>{f();(function(t,e,r){typeof JH=="object"?p5e.exports=JH=e(eo(),KH()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(JH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var Ple=q((XH,h5e)=>{f();(function(t,e,r){typeof XH=="object"?h5e.exports=XH=e(eo(),uM()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(XH,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],E=g[2],b=g[3],w=g[4],R=g[5],D=g[6],N=g[7],O=A.high,Y=A.low,ee=y.high,V=y.low,H=E.high,U=E.low,X=b.high,K=b.low,j=w.high,W=w.low,J=R.high,ie=R.low,ae=D.high,te=D.low,pe=N.high,Ae=N.low,Oe=O,Te=Y,Je=ee,Me=V,lt=H,_t=U,vt=X,ht=K,ue=j,Ue=W,ye=J,We=ie,se=ae,le=te,qe=pe,Be=Ae,xe=0;xe<80;xe++){var je,et,pt=d[xe];if(xe<16)et=pt.high=m[h+xe*2]|0,je=pt.low=m[h+xe*2+1]|0;else{var Mt=d[xe-15],Kt=Mt.high,Ot=Mt.low,Hr=(Kt>>>1|Ot<<31)^(Kt>>>8|Ot<<24)^Kt>>>7,Rr=(Ot>>>1|Kt<<31)^(Ot>>>8|Kt<<24)^(Ot>>>7|Kt<<25),on=d[xe-2],ve=on.high,Ge=on.low,ft=(ve>>>19|Ge<<13)^(ve<<3|Ge>>>29)^ve>>>6,Tt=(Ge>>>19|ve<<13)^(Ge<<3|ve>>>29)^(Ge>>>6|ve<<26),nr=d[xe-7],Xt=nr.high,br=nr.low,cr=d[xe-16],er=cr.high,ar=cr.low;je=Rr+br,et=Hr+Xt+(je>>>0<Rr>>>0?1:0),je=je+Tt,et=et+ft+(je>>>0<Tt>>>0?1:0),je=je+ar,et=et+er+(je>>>0<ar>>>0?1:0),pt.high=et,pt.low=je}var tr=ue&ye^~ue&se,Pr=Ue&We^~Ue&le,Wr=Oe&Je^Oe&lt^Je&lt,en=Te&Me^Te&_t^Me&_t,gn=(Oe>>>28|Te<<4)^(Oe<<30|Te>>>2)^(Oe<<25|Te>>>7),Zn=(Te>>>28|Oe<<4)^(Te<<30|Oe>>>2)^(Te<<25|Oe>>>7),In=(ue>>>14|Ue<<18)^(ue>>>18|Ue<<14)^(ue<<23|Ue>>>9),Jn=(Ue>>>14|ue<<18)^(Ue>>>18|ue<<14)^(Ue<<23|ue>>>9),tn=u[xe],Vn=tn.high,Pe=tn.low,z=Be+Jn,Ce=qe+In+(z>>>0<Be>>>0?1:0),z=z+Pr,Ce=Ce+tr+(z>>>0<Pr>>>0?1:0),z=z+Pe,Ce=Ce+Vn+(z>>>0<Pe>>>0?1:0),z=z+je,Ce=Ce+et+(z>>>0<je>>>0?1:0),Ie=Zn+en,F=gn+Wr+(Ie>>>0<Zn>>>0?1:0);qe=se,Be=le,se=ye,le=We,ye=ue,We=Ue,Ue=ht+z|0,ue=vt+Ce+(Ue>>>0<ht>>>0?1:0)|0,vt=lt,ht=_t,lt=Je,_t=Me,Je=Oe,Me=Te,Te=z+Ie|0,Oe=Ce+F+(Te>>>0<z>>>0?1:0)|0}Y=A.low=Y+Te,A.high=O+Oe+(Y>>>0<Te>>>0?1:0),V=y.low=V+Me,y.high=ee+Je+(V>>>0<Me>>>0?1:0),U=E.low=U+_t,E.high=H+lt+(U>>>0<_t>>>0?1:0),K=b.low=K+ht,b.high=X+vt+(K>>>0<ht>>>0?1:0),W=w.low=W+Ue,w.high=j+ue+(W>>>0<Ue>>>0?1:0),ie=R.low=ie+We,R.high=J+ye+(ie>>>0<We>>>0?1:0),te=D.low=te+le,D.high=ae+se+(te>>>0<le>>>0?1:0),Ae=N.low=Ae+Be,N.high=pe+qe+(Ae>>>0<Be>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;h[A>>>5]|=128<<24-A%32,h[(A+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(A+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var y=this._hash.toX32();return y},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var A5e=q((ZH,g5e)=>{f();(function(t,e,r){typeof ZH=="object"?g5e.exports=ZH=e(eo(),uM(),Ple()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(ZH,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var C5e=q((eW,y5e)=>{f();(function(t,e,r){typeof eW=="object"?y5e.exports=eW=e(eo(),uM()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(eW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],d=[],p=[];(function(){for(var g=1,A=0,y=0;y<24;y++){u[g+5*A]=(y+1)*(y+2)/2%64;var E=A%5,b=(2*g+3*A)%5;g=E,A=b}for(var g=0;g<5;g++)for(var A=0;A<5;A++)d[g+5*A]=A+(2*g+3*A)%5*5;for(var w=1,R=0;R<24;R++){for(var D=0,N=0,O=0;O<7;O++){if(w&1){var Y=(1<<O)-1;Y<32?N^=1<<Y:D^=1<<Y-32}w&128?w=w<<1^113:w<<=1}p[R]=c.create(D,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],A=0;A<25;A++)g[A]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,A){for(var y=this._state,E=this.blockSize/2,b=0;b<E;b++){var w=g[A+2*b],R=g[A+2*b+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var D=y[b];D.high^=R,D.low^=w}for(var N=0;N<24;N++){for(var O=0;O<5;O++){for(var Y=0,ee=0,V=0;V<5;V++){var D=y[O+5*V];Y^=D.high,ee^=D.low}var H=m[O];H.high=Y,H.low=ee}for(var O=0;O<5;O++)for(var U=m[(O+4)%5],X=m[(O+1)%5],K=X.high,j=X.low,Y=U.high^(K<<1|j>>>31),ee=U.low^(j<<1|K>>>31),V=0;V<5;V++){var D=y[O+5*V];D.high^=Y,D.low^=ee}for(var W=1;W<25;W++){var Y,ee,D=y[W],J=D.high,ie=D.low,ae=u[W];ae<32?(Y=J<<ae|ie>>>32-ae,ee=ie<<ae|J>>>32-ae):(Y=ie<<ae-32|J>>>64-ae,ee=J<<ae-32|ie>>>64-ae);var te=m[d[W]];te.high=Y,te.low=ee}var pe=m[0],Ae=y[0];pe.high=Ae.high,pe.low=Ae.low;for(var O=0;O<5;O++)for(var V=0;V<5;V++){var W=O+5*V,D=y[W],Oe=m[W],Te=m[(O+1)%5+5*V],Je=m[(O+2)%5+5*V];D.high=Oe.high^~Te.high&Je.high,D.low=Oe.low^~Te.low&Je.low}var D=y[0],Me=p[N];D.high^=Me.high,D.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,E=g.sigBytes*8,b=this.blockSize*32;A[E>>>5]|=1<<24-E%32,A[(e.ceil((E+1)/b)*b>>>5)-1]|=128,g.sigBytes=A.length*4,this._process();for(var w=this._state,R=this.cfg.outputLength/8,D=R/8,N=[],O=0;O<D;O++){var Y=w[O],ee=Y.high,V=Y.low;ee=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,N.push(V),N.push(ee)}return new i.init(N,R)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),A=g._state=this._state.slice(0),y=0;y<25;y++)A[y]=A[y].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var E5e=q((tW,v5e)=>{f();(function(t,e){typeof tW=="object"?v5e.exports=tW=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(R,D){for(var N=0;N<16;N++){var O=D+N,Y=R[O];R[O]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var ee=this._hash.words,V=p.words,H=m.words,U=c.words,X=l.words,K=u.words,j=d.words,W,J,ie,ae,te,pe,Ae,Oe,Te,Je;pe=W=ee[0],Ae=J=ee[1],Oe=ie=ee[2],Te=ae=ee[3],Je=te=ee[4];for(var Me,N=0;N<80;N+=1)Me=W+R[D+U[N]]|0,N<16?Me+=g(J,ie,ae)+V[0]:N<32?Me+=A(J,ie,ae)+V[1]:N<48?Me+=y(J,ie,ae)+V[2]:N<64?Me+=E(J,ie,ae)+V[3]:Me+=b(J,ie,ae)+V[4],Me=Me|0,Me=w(Me,K[N]),Me=Me+te|0,W=te,te=ae,ae=w(ie,10),ie=J,J=Me,Me=pe+R[D+X[N]]|0,N<16?Me+=b(Ae,Oe,Te)+H[0]:N<32?Me+=E(Ae,Oe,Te)+H[1]:N<48?Me+=y(Ae,Oe,Te)+H[2]:N<64?Me+=A(Ae,Oe,Te)+H[3]:Me+=g(Ae,Oe,Te)+H[4],Me=Me|0,Me=w(Me,j[N]),Me=Me+Je|0,pe=Je,Je=Te,Te=w(Oe,10),Oe=Ae,Ae=Me;Me=ee[1]+ie+Te|0,ee[1]=ee[2]+ae+Je|0,ee[2]=ee[3]+te+pe|0,ee[3]=ee[4]+W+Ae|0,ee[4]=ee[0]+J+Oe|0,ee[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var R=this._data,D=R.words,N=this._nDataBytes*8,O=R.sigBytes*8;D[O>>>5]|=128<<24-O%32,D[(O+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,R.sigBytes=(D.length+1)*4,this._process();for(var Y=this._hash,ee=Y.words,V=0;V<5;V++){var H=ee[V];ee[V]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return Y},"_doFinalize"),clone:s(function(){var R=o.clone.call(this);return R._hash=this._hash.clone(),R},"clone")});function g(R,D,N){return R^D^N}s(g,"f1");function A(R,D,N){return R&D|~R&N}s(A,"f2");function y(R,D,N){return(R|~D)^N}s(y,"f3");function E(R,D,N){return R&N|D&~N}s(E,"f4");function b(R,D,N){return R^(D|~N)}s(b,"f5");function w(R,D){return R<<D|R>>>32-D}s(w,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var nW=q((rW,x5e)=>{f();(function(t,e){typeof rW=="object"?x5e.exports=rW=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(rW,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var d=l.blockSize,p=d*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,A=h.words,y=0;y<d;y++)g[y]^=1549556828,A[y]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,d=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var I5e=q((iW,b5e)=>{f();(function(t,e,r){typeof iW=="object"?b5e.exports=iW=e(eo(),KH(),nW()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(iW,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),A=h.words,y=g.words,E=p.keySize,b=p.iterations;A.length<E;){var w=m.update(d).finalize(g);m.reset();for(var R=w.words,D=R.length,N=w,O=1;O<b;O++){N=m.finalize(N),m.reset();for(var Y=N.words,ee=0;ee<D;ee++)R[ee]^=Y[ee]}h.concat(w),y[0]++}return h.sigBytes=E*4,h},"compute")});e.PBKDF2=function(u,d,p){return l.create(p).compute(u,d)}}(),t.PBKDF2})});var X1=q((oW,T5e)=>{f();(function(t,e,r){typeof oW=="object"?T5e.exports=oW=e(eo(),kle(),nW()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(oW,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,A=p.keySize,y=p.iterations;g.length<A;){d&&m.update(d),d=m.update(l).finalize(u),m.reset();for(var E=1;E<y;E++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=A*4,h},"compute")});e.EvpKDF=function(l,u,d){return c.create(d).compute(l,u)}}(),t.EvpKDF})});var pl=q((sW,w5e)=>{f();(function(t,e,r){typeof sW=="object"?w5e.exports=sW=e(eo(),X1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(sW,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,d=r.algo,p=d.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,U){return this.create(this._ENC_XFORM_MODE,H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.create(this._DEC_XFORM_MODE,H,U)},"createDecryptor"),init:s(function(H,U,X){this.cfg=this.cfg.extend(X),this._xformMode=H,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(U){return typeof U=="string"?V:O}return s(H,"selectCipherStrategy"),function(U){return{encrypt:s(function(X,K,j){return H(K).encrypt(U,X,K,j)},"encrypt"),decrypt:s(function(X,K,j){return H(K).decrypt(U,X,K,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=r.mode={},A=n.BlockCipherMode=i.extend({createEncryptor:s(function(H,U){return this.Encryptor.create(H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.Decryptor.create(H,U)},"createDecryptor"),init:s(function(H,U){this._cipher=H,this._iv=U},"init")}),y=g.CBC=function(){var H=A.extend();H.Encryptor=H.extend({processBlock:s(function(X,K){var j=this._cipher,W=j.blockSize;U.call(this,X,K,W),j.encryptBlock(X,K),this._prevBlock=X.slice(K,K+W)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(X,K){var j=this._cipher,W=j.blockSize,J=X.slice(K,K+W);j.decryptBlock(X,K),U.call(this,X,K,W),this._prevBlock=J},"processBlock")});function U(X,K,j){var W,J=this._iv;J?(W=J,this._iv=e):W=this._prevBlock;for(var ie=0;ie<j;ie++)X[K+ie]^=W[ie]}return s(U,"xorBlock"),H}(),E=r.pad={},b=E.Pkcs7={pad:s(function(H,U){for(var X=U*4,K=X-H.sigBytes%X,j=K<<24|K<<16|K<<8|K,W=[],J=0;J<K;J+=4)W.push(j);var ie=o.create(W,K);H.concat(ie)},"pad"),unpad:s(function(H){var U=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=U},"unpad")},w=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:y,padding:b}),reset:s(function(){var H;m.reset.call(this);var U=this.cfg,X=U.iv,K=U.mode;this._xformMode==this._ENC_XFORM_MODE?H=K.createEncryptor:(H=K.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,X&&X.words):(this._mode=H.call(K,this,X&&X.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,U){this._mode.processBlock(H,U)},"_doProcessBlock"),_doFinalize:s(function(){var H,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),U.unpad(H)),H},"_doFinalize"),blockSize:128/32}),R=n.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),D=r.format={},N=D.OpenSSL={stringify:s(function(H){var U,X=H.ciphertext,K=H.salt;return K?U=o.create([1398893684,1701076831]).concat(K).concat(X):U=X,U.toString(u)},"stringify"),parse:s(function(H){var U,X=u.parse(H),K=X.words;return K[0]==1398893684&&K[1]==1701076831&&(U=o.create(K.slice(2,4)),K.splice(0,4),X.sigBytes-=16),R.create({ciphertext:X,salt:U})},"parse")},O=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,U,X,K){K=this.cfg.extend(K);var j=H.createEncryptor(X,K),W=j.finalize(U),J=j.cfg;return R.create({ciphertext:W,key:X,iv:J.iv,algorithm:H,mode:J.mode,padding:J.padding,blockSize:H.blockSize,formatter:K.format})},"encrypt"),decrypt:s(function(H,U,X,K){K=this.cfg.extend(K),U=this._parse(U,K.format);var j=H.createDecryptor(X,K).finalize(U.ciphertext);return j},"decrypt"),_parse:s(function(H,U){return typeof H=="string"?U.parse(H,this):H},"_parse")}),Y=r.kdf={},ee=Y.OpenSSL={execute:s(function(H,U,X,K,j){if(K||(K=o.random(64/8)),j)var W=p.create({keySize:U+X,hasher:j}).compute(H,K);else var W=p.create({keySize:U+X}).compute(H,K);var J=o.create(W.words.slice(U),X*4);return W.sigBytes=U*4,R.create({key:W,iv:J,salt:K})},"execute")},V=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:ee}),encrypt:s(function(H,U,X,K){K=this.cfg.extend(K);var j=K.kdf.execute(X,H.keySize,H.ivSize,K.salt,K.hasher);K.iv=j.iv;var W=O.encrypt.call(this,H,U,j.key,K);return W.mixIn(j),W},"encrypt"),decrypt:s(function(H,U,X,K){K=this.cfg.extend(K),U=this._parse(U,K.format);var j=K.kdf.execute(X,H.keySize,H.ivSize,U.salt,K.hasher);K.iv=j.iv;var W=O.decrypt.call(this,H,U,j.key,K);return W},"decrypt")})}()})});var _5e=q((aW,S5e)=>{f();(function(t,e,r){typeof aW=="object"?S5e.exports=aW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(aW,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var k5e=q((cW,R5e)=>{f();(function(t,e,r){typeof cW=="object"?R5e.exports=cW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(cW,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var d=0;d<a;d++)n[i+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var D5e=q((lW,P5e)=>{f();(function(t,e,r){typeof lW=="object"?P5e.exports=lW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(lW,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),n(d);var p=d.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var N5e=q((uW,B5e)=>{f();(function(t,e,r){typeof uW=="object"?B5e.exports=uW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(uW,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var M5e=q((dW,L5e)=>{f();(function(t,e,r){typeof dW=="object"?L5e.exports=dW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(dW,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var O5e=q((fW,F5e)=>{f();(function(t,e,r){typeof fW=="object"?F5e.exports=fW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(fW,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var U5e=q((pW,Q5e)=>{f();(function(t,e,r){typeof pW=="object"?Q5e.exports=pW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pW,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var H5e=q((mW,q5e)=>{f();(function(t,e,r){typeof mW=="object"?q5e.exports=mW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mW,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var $5e=q((hW,W5e)=>{f();(function(t,e,r){typeof hW=="object"?W5e.exports=hW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hW,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var G5e=q((gW,j5e)=>{f();(function(t,e,r){typeof gW=="object"?j5e.exports=gW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gW,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var z5e=q((AW,V5e)=>{f();(function(t,e,r){typeof AW=="object"?V5e.exports=AW=e(eo(),pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AW,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var K5e=q((yW,Y5e)=>{f();(function(t,e,r){typeof yW=="object"?Y5e.exports=yW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(yW,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var E=[],b=0;b<256;b++)b<128?E[b]=b<<1:E[b]=b<<1^283;for(var w=0,R=0,b=0;b<256;b++){var D=R^R<<1^R<<2^R<<3^R<<4;D=D>>>8^D&255^99,o[w]=D,a[D]=w;var N=E[w],O=E[N],Y=E[O],ee=E[D]*257^D*16843008;c[w]=ee<<24|ee>>>8,l[w]=ee<<16|ee>>>16,u[w]=ee<<8|ee>>>24,d[w]=ee;var ee=Y*16843009^O*65537^N*257^w*16843008;p[D]=ee<<24|ee>>>8,m[D]=ee<<16|ee>>>16,h[D]=ee<<8|ee>>>24,g[D]=ee,w?(w=N^E[E[E[Y^N]]],R^=E[E[R]]):w=R=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:s(function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,w=b.words,R=b.sigBytes/4,D=this._nRounds=R+6,N=(D+1)*4,O=this._keySchedule=[],Y=0;Y<N;Y++)Y<R?O[Y]=w[Y]:(E=O[Y-1],Y%R?R>6&&Y%R==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=A[Y/R|0]<<24),O[Y]=O[Y-R]^E);for(var ee=this._invKeySchedule=[],V=0;V<N;V++){var Y=N-V;if(V%4)var E=O[Y];else var E=O[Y-4];V<4||Y<=4?ee[V]=E:ee[V]=p[o[E>>>24]]^m[o[E>>>16&255]]^h[o[E>>>8&255]]^g[o[E&255]]}}},"_doReset"),encryptBlock:s(function(E,b){this._doCryptBlock(E,b,this._keySchedule,c,l,u,d,o)},"encryptBlock"),decryptBlock:s(function(E,b){var w=E[b+1];E[b+1]=E[b+3],E[b+3]=w,this._doCryptBlock(E,b,this._invKeySchedule,p,m,h,g,a);var w=E[b+1];E[b+1]=E[b+3],E[b+3]=w},"decryptBlock"),_doCryptBlock:s(function(E,b,w,R,D,N,O,Y){for(var ee=this._nRounds,V=E[b]^w[0],H=E[b+1]^w[1],U=E[b+2]^w[2],X=E[b+3]^w[3],K=4,j=1;j<ee;j++){var W=R[V>>>24]^D[H>>>16&255]^N[U>>>8&255]^O[X&255]^w[K++],J=R[H>>>24]^D[U>>>16&255]^N[X>>>8&255]^O[V&255]^w[K++],ie=R[U>>>24]^D[X>>>16&255]^N[V>>>8&255]^O[H&255]^w[K++],ae=R[X>>>24]^D[V>>>16&255]^N[H>>>8&255]^O[U&255]^w[K++];V=W,H=J,U=ie,X=ae}var W=(Y[V>>>24]<<24|Y[H>>>16&255]<<16|Y[U>>>8&255]<<8|Y[X&255])^w[K++],J=(Y[H>>>24]<<24|Y[U>>>16&255]<<16|Y[X>>>8&255]<<8|Y[V&255])^w[K++],ie=(Y[U>>>24]<<24|Y[X>>>16&255]<<16|Y[V>>>8&255]<<8|Y[H&255])^w[K++],ae=(Y[X>>>24]<<24|Y[V>>>16&255]<<16|Y[H>>>8&255]<<8|Y[U&255])^w[K++];E[b]=W,E[b+1]=J,E[b+2]=ie,E[b+3]=ae},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(y)}(),t.AES})});var X5e=q((CW,J5e)=>{f();(function(t,e,r){typeof CW=="object"?J5e.exports=CW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(CW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var A=this._key,y=A.words,E=[],b=0;b<56;b++){var w=a[b]-1;E[b]=y[w>>>5]>>>31-w%32&1}for(var R=this._subKeys=[],D=0;D<16;D++){for(var N=R[D]=[],O=l[D],b=0;b<24;b++)N[b/6|0]|=E[(c[b]-1+O)%28]<<31-b%6,N[4+(b/6|0)]|=E[28+(c[b+24]-1+O)%28]<<31-b%6;N[0]=N[0]<<1|N[0]>>>31;for(var b=1;b<7;b++)N[b]=N[b]>>>(b-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var Y=this._invSubKeys=[],b=0;b<16;b++)Y[b]=R[15-b]},"_doReset"),encryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._subKeys)},"encryptBlock"),decryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(A,y,E){this._lBlock=A[y],this._rBlock=A[y+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var w=E[b],R=this._lBlock,D=this._rBlock,N=0,O=0;O<8;O++)N|=u[O][((D^w[O])&d[O])>>>0];this._lBlock=D,this._rBlock=R^N}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),A[y]=this._lBlock,A[y+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(A,y){var E=(this._lBlock>>>A^this._rBlock)&y;this._rBlock^=E,this._lBlock^=E<<A}s(m,"exchangeLR");function h(A,y){var E=(this._rBlock>>>A^this._lBlock)&y;this._lBlock^=E,this._rBlock^=E<<A}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var A=this._key,y=A.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=y.slice(0,2),b=y.length<4?y.slice(0,2):y.slice(2,4),w=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(n.create(E)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(w))},"_doReset"),encryptBlock:s(function(A,y){this._des1.encryptBlock(A,y),this._des2.decryptBlock(A,y),this._des3.encryptBlock(A,y)},"encryptBlock"),decryptBlock:s(function(A,y){this._des3.decryptBlock(A,y),this._des2.encryptBlock(A,y),this._des1.decryptBlock(A,y)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var ePe=q((vW,Z5e)=>{f();(function(t,e,r){typeof vW=="object"?Z5e.exports=vW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(vW,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,d=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,A=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+A)%256;var y=p[m];p[m]=p[h],p[h]=y}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+l[u])%256;var h=l[u];l[u]=l[d],l[d]=h,p|=l[(l[u]+l[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var rPe=q((EW,tPe)=>{f();(function(t,e,r){typeof EW=="object"?tPe.exports=EW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(EW,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|w&4294901760,D=w<<16|b&65535;g[0]^=b,g[1]^=R,g[2]^=w,g[3]^=D,g[4]^=b,g[5]^=R,g[6]^=w,g[7]^=D;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var iPe=q((xW,nPe)=>{f();(function(t,e,r){typeof xW=="object"?nPe.exports=xW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(xW,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,w=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|w&4294901760,D=w<<16|b&65535;h[0]^=b,h[1]^=R,h[2]^=w,h[3]^=D,h[4]^=b,h[5]^=R,h[6]^=w,h[7]^=D;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var sPe=q((bW,oPe)=>{f();(function(t,e,r){typeof bW=="object"?oPe.exports=bW=e(eo(),Bb(),Nb(),X1(),pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(bW,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,A){let y=A>>24&255,E=A>>16&255,b=A>>8&255,w=A&255,R=g.sbox[0][y]+g.sbox[1][E];return R=R^g.sbox[2][b],R=R+g.sbox[3][w],R}s(u,"F");function d(g,A,y){let E=A,b=y,w;for(let R=0;R<o;++R)E=E^g.pbox[R],b=u(g,E)^b,w=E,E=b,b=w;return w=E,E=b,b=w,b=b^g.pbox[o],E=E^g.pbox[o+1],{left:E,right:b}}s(d,"BlowFish_Encrypt");function p(g,A,y){let E=A,b=y,w;for(let R=o+1;R>1;--R)E=E^g.pbox[R],b=u(g,E)^b,w=E,E=b,b=w;return w=E,E=b,b=w,b=b^g.pbox[1],E=E^g.pbox[0],{left:E,right:b}}s(p,"BlowFish_Decrypt");function m(g,A,y){for(let D=0;D<4;D++){g.sbox[D]=[];for(let N=0;N<256;N++)g.sbox[D][N]=c[D][N]}let E=0;for(let D=0;D<o+2;D++)g.pbox[D]=a[D]^A[E],E++,E>=y&&(E=0);let b=0,w=0,R=0;for(let D=0;D<o+2;D+=2)R=d(g,b,w),b=R.left,w=R.right,g.pbox[D]=b,g.pbox[D+1]=w;for(let D=0;D<4;D++)for(let N=0;N<256;N+=2)R=d(g,b,w),b=R.left,w=R.right,g.sbox[D][N]=b,g.sbox[D][N+1]=w;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,A=g.words,y=g.sigBytes/4;m(l,A,y)}},"_doReset"),encryptBlock:s(function(g,A){var y=d(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"encryptBlock"),decryptBlock:s(function(g,A){var y=p(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var Lb=q((IW,aPe)=>{f();(function(t,e,r){typeof IW=="object"?aPe.exports=IW=e(eo(),uM(),i5e(),s5e(),Bb(),l5e(),Nb(),kle(),KH(),m5e(),Ple(),A5e(),C5e(),E5e(),nW(),I5e(),X1(),pl(),_5e(),k5e(),D5e(),N5e(),M5e(),O5e(),U5e(),H5e(),$5e(),G5e(),z5e(),K5e(),X5e(),ePe(),rPe(),iPe(),sPe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(IW,function(t){return t})});var o4=q(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.stringArray=fd.array=fd.func=fd.error=fd.number=fd.string=fd.boolean=void 0;function TSt(t){return t===!0||t===!1}s(TSt,"boolean");fd.boolean=TSt;function qDe(t){return typeof t=="string"||t instanceof String}s(qDe,"string");fd.string=qDe;function wSt(t){return typeof t=="number"||t instanceof Number}s(wSt,"number");fd.number=wSt;function SSt(t){return t instanceof Error}s(SSt,"error");fd.error=SSt;function _St(t){return typeof t=="function"}s(_St,"func");fd.func=_St;function HDe(t){return Array.isArray(t)}s(HDe,"array");fd.array=HDe;function RSt(t){return HDe(t)&&t.every(e=>qDe(e))}s(RSt,"stringArray");fd.stringArray=RSt});var nde=q(an=>{"use strict";f();Object.defineProperty(an,"__esModule",{value:!0});an.Message=an.NotificationType9=an.NotificationType8=an.NotificationType7=an.NotificationType6=an.NotificationType5=an.NotificationType4=an.NotificationType3=an.NotificationType2=an.NotificationType1=an.NotificationType0=an.NotificationType=an.RequestType9=an.RequestType8=an.RequestType7=an.RequestType6=an.RequestType5=an.RequestType4=an.RequestType3=an.RequestType2=an.RequestType1=an.RequestType=an.RequestType0=an.AbstractMessageSignature=an.ParameterStructures=an.ResponseError=an.ErrorCodes=void 0;var s_=o4(),Bue;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Bue||(an.ErrorCodes=Bue={}));var Nue=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=s_.number(e)?e:Bue.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};an.ResponseError=Nue;var Uf=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};an.ParameterStructures=Uf;Uf.auto=new Uf("auto");Uf.byPosition=new Uf("byPosition");Uf.byName=new Uf("byName");var Ys=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Uf.auto}};an.AbstractMessageSignature=Ys;var Lue=class extends Ys{static{s(this,"RequestType0")}constructor(e){super(e,0)}};an.RequestType0=Lue;var Mue=class extends Ys{static{s(this,"RequestType")}constructor(e,r=Uf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};an.RequestType=Mue;var Fue=class extends Ys{static{s(this,"RequestType1")}constructor(e,r=Uf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};an.RequestType1=Fue;var Oue=class extends Ys{static{s(this,"RequestType2")}constructor(e){super(e,2)}};an.RequestType2=Oue;var Que=class extends Ys{static{s(this,"RequestType3")}constructor(e){super(e,3)}};an.RequestType3=Que;var Uue=class extends Ys{static{s(this,"RequestType4")}constructor(e){super(e,4)}};an.RequestType4=Uue;var que=class extends Ys{static{s(this,"RequestType5")}constructor(e){super(e,5)}};an.RequestType5=que;var Hue=class extends Ys{static{s(this,"RequestType6")}constructor(e){super(e,6)}};an.RequestType6=Hue;var Wue=class extends Ys{static{s(this,"RequestType7")}constructor(e){super(e,7)}};an.RequestType7=Wue;var $ue=class extends Ys{static{s(this,"RequestType8")}constructor(e){super(e,8)}};an.RequestType8=$ue;var jue=class extends Ys{static{s(this,"RequestType9")}constructor(e){super(e,9)}};an.RequestType9=jue;var Gue=class extends Ys{static{s(this,"NotificationType")}constructor(e,r=Uf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};an.NotificationType=Gue;var Vue=class extends Ys{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};an.NotificationType0=Vue;var zue=class extends Ys{static{s(this,"NotificationType1")}constructor(e,r=Uf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};an.NotificationType1=zue;var Yue=class extends Ys{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};an.NotificationType2=Yue;var Kue=class extends Ys{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};an.NotificationType3=Kue;var Jue=class extends Ys{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};an.NotificationType4=Jue;var Xue=class extends Ys{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};an.NotificationType5=Xue;var Zue=class extends Ys{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};an.NotificationType6=Zue;var ede=class extends Ys{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};an.NotificationType7=ede;var tde=class extends Ys{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};an.NotificationType8=tde;var rde=class extends Ys{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};an.NotificationType9=rde;var WDe;(function(t){function e(i){let o=i;return o&&s_.string(o.method)&&(s_.string(o.id)||s_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&s_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(s_.string(o.id)||s_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(WDe||(an.Message=WDe={}))});var ode=q(Gb=>{"use strict";f();var $De;Object.defineProperty(Gb,"__esModule",{value:!0});Gb.LRUCache=Gb.LinkedMap=Gb.Touch=void 0;var pd;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(pd||(Gb.Touch=pd={}));var a$=class{static{s(this,"LinkedMap")}constructor(){this[$De]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=pd.None){let n=this._map.get(e);if(n)return r!==pd.None&&this.touch(n,r),n.value}set(e,r,n=pd.None){let i=this._map.get(e);if(i)i.value=r,n!==pd.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case pd.None:this.addItemLast(i);break;case pd.First:this.addItemFirst(i);break;case pd.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[($De=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==pd.First&&r!==pd.Last)){if(r===pd.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===pd.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Gb.LinkedMap=a$;var ide=class extends a${static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=pd.AsNew){return super.get(e,r)}peek(e){return super.get(e,pd.None)}set(e,r){return super.set(e,r,pd.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Gb.LRUCache=ide});var GDe=q(c$=>{"use strict";f();Object.defineProperty(c$,"__esModule",{value:!0});c$.Disposable=void 0;var jDe;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(jDe||(c$.Disposable=jDe={}))});var Vb=q(cde=>{"use strict";f();Object.defineProperty(cde,"__esModule",{value:!0});var sde;function ade(){if(sde===void 0)throw new Error("No runtime abstraction layer installed");return sde}s(ade,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");sde=r}s(e,"install"),t.install=e})(ade||(ade={}));cde.default=ade});var a4=q(s4=>{"use strict";f();Object.defineProperty(s4,"__esModule",{value:!0});s4.Emitter=s4.Event=void 0;var kSt=Vb(),VDe;(function(t){let e={dispose(){}};t.None=function(){return e}})(VDe||(s4.Event=VDe={}));var lde=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,kSt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},l$=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new lde),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};s4.Emitter=l$;l$._noop=function(){}});var f$=q(c4=>{"use strict";f();Object.defineProperty(c4,"__esModule",{value:!0});c4.CancellationTokenSource=c4.CancellationToken=void 0;var PSt=Vb(),DSt=o4(),ude=a4(),u$;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ude.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ude.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||DSt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(u$||(c4.CancellationToken=u$={}));var BSt=Object.freeze(function(t,e){let r=(0,PSt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),d$=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?BSt:(this._emitter||(this._emitter=new ude.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},dde=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new d$),this._token}cancel(){this._token?this._token.cancel():this._token=u$.Cancelled}dispose(){this._token?this._token instanceof d$&&this._token.dispose():this._token=u$.None}};c4.CancellationTokenSource=dde});var zDe=q(l4=>{"use strict";f();Object.defineProperty(l4,"__esModule",{value:!0});l4.SharedArrayReceiverStrategy=l4.SharedArraySenderStrategy=void 0;var NSt=f$(),kM;(function(t){t.Continue=0,t.Cancelled=1})(kM||(kM={}));var fde=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=kM.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,kM.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};l4.SharedArraySenderStrategy=fde;var pde=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===kM.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},mde=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new pde(e)}cancel(){}dispose(){}},hde=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new NSt.CancellationTokenSource:new mde(r)}};l4.SharedArrayReceiverStrategy=hde});var Ade=q(p$=>{"use strict";f();Object.defineProperty(p$,"__esModule",{value:!0});p$.Semaphore=void 0;var LSt=Vb(),gde=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,LSt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};p$.Semaphore=gde});var KDe=q(zb=>{"use strict";f();Object.defineProperty(zb,"__esModule",{value:!0});zb.ReadableStreamMessageReader=zb.AbstractMessageReader=zb.MessageReader=void 0;var Cde=Vb(),u4=o4(),yde=a4(),MSt=Ade(),YDe;(function(t){function e(r){let n=r;return n&&u4.func(n.listen)&&u4.func(n.dispose)&&u4.func(n.onError)&&u4.func(n.onClose)&&u4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(YDe||(zb.MessageReader=YDe={}));var m$=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new yde.Emitter,this.closeEmitter=new yde.Emitter,this.partialMessageEmitter=new yde.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${u4.string(e.message)?e.message:"unknown"}`)}};zb.AbstractMessageReader=m$;var vde;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Cde.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(vde||(vde={}));var Ede=class extends m${static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=vde.fromOptions(r),this.buffer=(0,Cde.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new MSt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Cde.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};zb.ReadableStreamMessageReader=Ede});var t3e=q(Yb=>{"use strict";f();Object.defineProperty(Yb,"__esModule",{value:!0});Yb.WriteableStreamMessageWriter=Yb.AbstractMessageWriter=Yb.MessageWriter=void 0;var JDe=Vb(),PM=o4(),FSt=Ade(),XDe=a4(),OSt="Content-Length: ",ZDe=`\r
`,e3e;(function(t){function e(r){let n=r;return n&&PM.func(n.dispose)&&PM.func(n.onClose)&&PM.func(n.onError)&&PM.func(n.write)}s(e,"is"),t.is=e})(e3e||(Yb.MessageWriter=e3e={}));var h$=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new XDe.Emitter,this.closeEmitter=new XDe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${PM.string(e.message)?e.message:"unknown"}`)}};Yb.AbstractMessageWriter=h$;var xde;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,JDe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,JDe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(xde||(xde={}));var bde=class extends h${static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=xde.fromOptions(r),this.errorCount=0,this.writeSemaphore=new FSt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(OSt,n.byteLength.toString(),ZDe),i.push(ZDe),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Yb.WriteableStreamMessageWriter=bde});var r3e=q(g$=>{"use strict";f();Object.defineProperty(g$,"__esModule",{value:!0});g$.AbstractMessageBuffer=void 0;var QSt=13,USt=10,qSt=`\r
`,Ide=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case QSt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case USt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(qSt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let d=l[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};g$.AbstractMessageBuffer=Ide});var a3e=q(ui=>{"use strict";f();Object.defineProperty(ui,"__esModule",{value:!0});ui.createMessageConnection=ui.ConnectionOptions=ui.MessageStrategy=ui.CancellationStrategy=ui.CancellationSenderStrategy=ui.CancellationReceiverStrategy=ui.RequestCancellationReceiverStrategy=ui.IdCancellationReceiverStrategy=ui.ConnectionStrategy=ui.ConnectionError=ui.ConnectionErrors=ui.LogTraceNotification=ui.SetTraceNotification=ui.TraceFormat=ui.TraceValues=ui.Trace=ui.NullLogger=ui.ProgressType=ui.ProgressToken=void 0;var n3e=Vb(),Na=o4(),Mn=nde(),i3e=ode(),DM=a4(),Tde=f$(),LM;(function(t){t.type=new Mn.NotificationType("$/cancelRequest")})(LM||(LM={}));var wde;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(wde||(ui.ProgressToken=wde={}));var BM;(function(t){t.type=new Mn.NotificationType("$/progress")})(BM||(BM={}));var Sde=class{static{s(this,"ProgressType")}constructor(){}};ui.ProgressType=Sde;var _de;(function(t){function e(r){return Na.func(r)}s(e,"is"),t.is=e})(_de||(_de={}));ui.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Wo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Wo||(ui.Trace=Wo={}));var o3e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(o3e||(ui.TraceValues=o3e={}));(function(t){function e(n){if(!Na.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(Wo||(ui.Trace=Wo={}));var Z0;(function(t){t.Text="text",t.JSON="json"})(Z0||(ui.TraceFormat=Z0={}));(function(t){function e(r){return Na.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(Z0||(ui.TraceFormat=Z0={}));var Rde;(function(t){t.type=new Mn.NotificationType("$/setTrace")})(Rde||(ui.SetTraceNotification=Rde={}));var A$;(function(t){t.type=new Mn.NotificationType("$/logTrace")})(A$||(ui.LogTraceNotification=A$={}));var NM;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(NM||(ui.ConnectionErrors=NM={}));var d4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ui.ConnectionError=d4;var kde;(function(t){function e(r){let n=r;return n&&Na.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(kde||(ui.ConnectionStrategy=kde={}));var y$;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Na.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Na.func(n.dispose))}s(e,"is"),t.is=e})(y$||(ui.IdCancellationReceiverStrategy=y$={}));var Pde;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Na.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Na.func(n.dispose))}s(e,"is"),t.is=e})(Pde||(ui.RequestCancellationReceiverStrategy=Pde={}));var C$;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new Tde.CancellationTokenSource}});function e(r){return y$.is(r)||Pde.is(r)}s(e,"is"),t.is=e})(C$||(ui.CancellationReceiverStrategy=C$={}));var v$;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(LM.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Na.func(n.sendCancellation)&&Na.func(n.cleanup)}s(e,"is"),t.is=e})(v$||(ui.CancellationSenderStrategy=v$={}));var E$;(function(t){t.Message=Object.freeze({receiver:C$.Message,sender:v$.Message});function e(r){let n=r;return n&&C$.is(n.receiver)&&v$.is(n.sender)}s(e,"is"),t.is=e})(E$||(ui.CancellationStrategy=E$={}));var x$;(function(t){function e(r){let n=r;return n&&Na.func(n.handleMessage)}s(e,"is"),t.is=e})(x$||(ui.MessageStrategy=x$={}));var s3e;(function(t){function e(r){let n=r;return n&&(E$.is(n.cancellationStrategy)||kde.is(n.connectionStrategy)||x$.is(n.messageStrategy))}s(e,"is"),t.is=e})(s3e||(ui.ConnectionOptions=s3e={}));var Dg;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Dg||(Dg={}));function HSt(t,e,r,n){let i=r!==void 0?r:ui.NullLogger,o=0,a=0,c=0,l="2.0",u,d=new Map,p,m=new Map,h=new Map,g,A=new i3e.LinkedMap,y=new Map,E=new Set,b=new Map,w=Wo.Off,R=Z0.Text,D,N=Dg.New,O=new DM.Emitter,Y=new DM.Emitter,ee=new DM.Emitter,V=new DM.Emitter,H=new DM.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:E$.Message;function X(ve){if(ve===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+ve.toString()}s(X,"createRequestQueueKey");function K(ve){return ve===null?"res-unknown-"+(++c).toString():"res-"+ve.toString()}s(K,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function W(ve,Ge){Mn.Message.isRequest(Ge)?ve.set(X(Ge.id),Ge):Mn.Message.isResponse(Ge)?ve.set(K(Ge.id),Ge):ve.set(j(),Ge)}s(W,"addMessageToQueue");function J(ve){}s(J,"cancelUndispatched");function ie(){return N===Dg.Listening}s(ie,"isListening");function ae(){return N===Dg.Closed}s(ae,"isClosed");function te(){return N===Dg.Disposed}s(te,"isDisposed");function pe(){(N===Dg.New||N===Dg.Listening)&&(N=Dg.Closed,Y.fire(void 0))}s(pe,"closeHandler");function Ae(ve){O.fire([ve,void 0,void 0])}s(Ae,"readErrorHandler");function Oe(ve){O.fire(ve)}s(Oe,"writeErrorHandler"),t.onClose(pe),t.onError(Ae),e.onClose(pe),e.onError(Oe);function Te(){g||A.size===0||(g=(0,n3e.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Te,"triggerMessageQueue");function Je(ve){Mn.Message.isRequest(ve)?_t(ve):Mn.Message.isNotification(ve)?ht(ve):Mn.Message.isResponse(ve)?vt(ve):ue(ve)}s(Je,"handleMessage");function Me(){if(A.size===0)return;let ve=A.shift();try{let Ge=n?.messageStrategy;x$.is(Ge)?Ge.handleMessage(ve,Je):Je(ve)}finally{Te()}}s(Me,"processMessageQueue");let lt=s(ve=>{try{if(Mn.Message.isNotification(ve)&&ve.method===LM.type.method){let Ge=ve.params.id,ft=X(Ge),Tt=A.get(ft);if(Mn.Message.isRequest(Tt)){let Xt=n?.connectionStrategy,br=Xt&&Xt.cancelUndispatched?Xt.cancelUndispatched(Tt,J):void 0;if(br&&(br.error!==void 0||br.result!==void 0)){A.delete(ft),b.delete(Ge),br.id=Tt.id,se(br,ve.method,Date.now()),e.write(br).catch(()=>i.error("Sending response for canceled message failed."));return}}let nr=b.get(Ge);if(nr!==void 0){nr.cancel(),qe(ve);return}else E.add(Ge)}W(A,ve)}finally{Te()}},"callback");function _t(ve){if(te())return;function Ge(er,ar,tr){let Pr={jsonrpc:l,id:ve.id};er instanceof Mn.ResponseError?Pr.error=er.toJson():Pr.result=er===void 0?null:er,se(Pr,ar,tr),e.write(Pr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(er,ar,tr){let Pr={jsonrpc:l,id:ve.id,error:er.toJson()};se(Pr,ar,tr),e.write(Pr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Tt(er,ar,tr){er===void 0&&(er=null);let Pr={jsonrpc:l,id:ve.id,result:er};se(Pr,ar,tr),e.write(Pr).catch(()=>i.error("Sending response failed."))}s(Tt,"replySuccess"),le(ve);let nr=d.get(ve.method),Xt,br;nr&&(Xt=nr.type,br=nr.handler);let cr=Date.now();if(br||u){let er=ve.id??String(Date.now()),ar=y$.is(U.receiver)?U.receiver.createCancellationTokenSource(er):U.receiver.createCancellationTokenSource(ve);ve.id!==null&&E.has(ve.id)&&ar.cancel(),ve.id!==null&&b.set(er,ar);try{let tr;if(br)if(ve.params===void 0){if(Xt!==void 0&&Xt.numberOfParams!==0){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines ${Xt.numberOfParams} params but received none.`),ve.method,cr);return}tr=br(ar.token)}else if(Array.isArray(ve.params)){if(Xt!==void 0&&Xt.parameterStructures===Mn.ParameterStructures.byName){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by name but received parameters by position`),ve.method,cr);return}tr=br(...ve.params,ar.token)}else{if(Xt!==void 0&&Xt.parameterStructures===Mn.ParameterStructures.byPosition){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by position but received parameters by name`),ve.method,cr);return}tr=br(ve.params,ar.token)}else u&&(tr=u(ve.method,ve.params,ar.token));let Pr=tr;tr?Pr.then?Pr.then(Wr=>{b.delete(er),Ge(Wr,ve.method,cr)},Wr=>{b.delete(er),Wr instanceof Mn.ResponseError?ft(Wr,ve.method,cr):Wr&&Na.string(Wr.message)?ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${Wr.message}`),ve.method,cr):ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,cr)}):(b.delete(er),Ge(tr,ve.method,cr)):(b.delete(er),Tt(tr,ve.method,cr))}catch(tr){b.delete(er),tr instanceof Mn.ResponseError?Ge(tr,ve.method,cr):tr&&Na.string(tr.message)?ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${tr.message}`),ve.method,cr):ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,cr)}}else ft(new Mn.ResponseError(Mn.ErrorCodes.MethodNotFound,`Unhandled method ${ve.method}`),ve.method,cr)}s(_t,"handleRequest");function vt(ve){if(!te())if(ve.id===null)ve.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(ve.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=ve.id,ft=y.get(Ge);if(Be(ve,ft),ft!==void 0){y.delete(Ge);try{if(ve.error){let Tt=ve.error;ft.reject(new Mn.ResponseError(Tt.code,Tt.message,Tt.data))}else if(ve.result!==void 0)ft.resolve(ve.result);else throw new Error("Should never happen.")}catch(Tt){Tt.message?i.error(`Response handler '${ft.method}' failed with message: ${Tt.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(vt,"handleResponse");function ht(ve){if(te())return;let Ge,ft;if(ve.method===LM.type.method){let Tt=ve.params.id;E.delete(Tt),qe(ve);return}else{let Tt=m.get(ve.method);Tt&&(ft=Tt.handler,Ge=Tt.type)}if(ft||p)try{if(qe(ve),ft)if(ve.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Mn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(ve.params)){let Tt=ve.params;ve.method===BM.type.method&&Tt.length===2&&wde.is(Tt[0])?ft({token:Tt[0],value:Tt[1]}):(Ge!==void 0&&(Ge.parameterStructures===Mn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==ve.params.length&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received ${Tt.length} arguments`)),ft(...Tt))}else Ge!==void 0&&Ge.parameterStructures===Mn.ParameterStructures.byPosition&&i.error(`Notification ${ve.method} defines parameters by position but received parameters by name`),ft(ve.params);else p&&p(ve.method,ve.params)}catch(Tt){Tt.message?i.error(`Notification handler '${ve.method}' failed with message: ${Tt.message}`):i.error(`Notification handler '${ve.method}' failed unexpectedly.`)}else ee.fire(ve)}s(ht,"handleNotification");function ue(ve){if(!ve){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(ve,null,4)}`);let Ge=ve;if(Na.string(Ge.id)||Na.number(Ge.id)){let ft=Ge.id,Tt=y.get(ft);Tt&&Tt.reject(new Error("The received response has neither a result nor an error property."))}}s(ue,"handleInvalidMessage");function Ue(ve){if(ve!=null)switch(w){case Wo.Verbose:return JSON.stringify(ve,null,4);case Wo.Compact:return JSON.stringify(ve);default:return}}s(Ue,"stringifyTrace");function ye(ve){if(!(w===Wo.Off||!D))if(R===Z0.Text){let Ge;(w===Wo.Verbose||w===Wo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),D.log(`Sending request '${ve.method} - (${ve.id})'.`,Ge)}else xe("send-request",ve)}s(ye,"traceSendingRequest");function We(ve){if(!(w===Wo.Off||!D))if(R===Z0.Text){let Ge;(w===Wo.Verbose||w===Wo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),D.log(`Sending notification '${ve.method}'.`,Ge)}else xe("send-notification",ve)}s(We,"traceSendingNotification");function se(ve,Ge,ft){if(!(w===Wo.Off||!D))if(R===Z0.Text){let Tt;(w===Wo.Verbose||w===Wo.Compact)&&(ve.error&&ve.error.data?Tt=`Error data: ${Ue(ve.error.data)}

`:ve.result?Tt=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(Tt=`No result returned.

`)),D.log(`Sending response '${Ge} - (${ve.id})'. Processing request took ${Date.now()-ft}ms`,Tt)}else xe("send-response",ve)}s(se,"traceSendingResponse");function le(ve){if(!(w===Wo.Off||!D))if(R===Z0.Text){let Ge;(w===Wo.Verbose||w===Wo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),D.log(`Received request '${ve.method} - (${ve.id})'.`,Ge)}else xe("receive-request",ve)}s(le,"traceReceivedRequest");function qe(ve){if(!(w===Wo.Off||!D||ve.method===A$.type.method))if(R===Z0.Text){let Ge;(w===Wo.Verbose||w===Wo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),D.log(`Received notification '${ve.method}'.`,Ge)}else xe("receive-notification",ve)}s(qe,"traceReceivedNotification");function Be(ve,Ge){if(!(w===Wo.Off||!D))if(R===Z0.Text){let ft;if((w===Wo.Verbose||w===Wo.Compact)&&(ve.error&&ve.error.data?ft=`Error data: ${Ue(ve.error.data)}

`:ve.result?ft=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(ft=`No result returned.

`)),Ge){let Tt=ve.error?` Request failed: ${ve.error.message} (${ve.error.code}).`:"";D.log(`Received response '${Ge.method} - (${ve.id})' in ${Date.now()-Ge.timerStart}ms.${Tt}`,ft)}else D.log(`Received response ${ve.id} without active response promise.`,ft)}else xe("receive-response",ve)}s(Be,"traceReceivedResponse");function xe(ve,Ge){if(!D||w===Wo.Off)return;let ft={isLSPMessage:!0,type:ve,message:Ge,timestamp:Date.now()};D.log(ft)}s(xe,"logLSPMessage");function je(){if(ae())throw new d4(NM.Closed,"Connection is closed.");if(te())throw new d4(NM.Disposed,"Connection is disposed.")}s(je,"throwIfClosedOrDisposed");function et(){if(ie())throw new d4(NM.AlreadyListening,"Connection is already listening")}s(et,"throwIfListening");function pt(){if(!ie())throw new Error("Call listen() first.")}s(pt,"throwIfNotListening");function Mt(ve){return ve===void 0?null:ve}s(Mt,"undefinedToNull");function Kt(ve){if(ve!==null)return ve}s(Kt,"nullToUndefined");function Ot(ve){return ve!=null&&!Array.isArray(ve)&&typeof ve=="object"}s(Ot,"isNamedParam");function Hr(ve,Ge){switch(ve){case Mn.ParameterStructures.auto:return Ot(Ge)?Kt(Ge):[Mt(Ge)];case Mn.ParameterStructures.byName:if(!Ot(Ge))throw new Error("Received parameters by name but param is not an object literal.");return Kt(Ge);case Mn.ParameterStructures.byPosition:return[Mt(Ge)];default:throw new Error(`Unknown parameter structure ${ve.toString()}`)}}s(Hr,"computeSingleParam");function Rr(ve,Ge){let ft,Tt=ve.numberOfParams;switch(Tt){case 0:ft=void 0;break;case 1:ft=Hr(ve.parameterStructures,Ge[0]);break;default:ft=[];for(let nr=0;nr<Ge.length&&nr<Tt;nr++)ft.push(Mt(Ge[nr]));if(Ge.length<Tt)for(let nr=Ge.length;nr<Tt;nr++)ft.push(null);break}return ft}s(Rr,"computeMessageParams");let on={sendNotification:s((ve,...Ge)=>{je();let ft,Tt;if(Na.string(ve)){ft=ve;let Xt=Ge[0],br=0,cr=Mn.ParameterStructures.auto;Mn.ParameterStructures.is(Xt)&&(br=1,cr=Xt);let er=Ge.length,ar=er-br;switch(ar){case 0:Tt=void 0;break;case 1:Tt=Hr(cr,Ge[br]);break;default:if(cr===Mn.ParameterStructures.byName)throw new Error(`Received ${ar} parameters for 'by Name' notification parameter structure.`);Tt=Ge.slice(br,er).map(tr=>Mt(tr));break}}else{let Xt=Ge;ft=ve.method,Tt=Rr(ve,Xt)}let nr={jsonrpc:l,method:ft,params:Tt};return We(nr),e.write(nr).catch(Xt=>{throw i.error("Sending notification failed."),Xt})},"sendNotification"),onNotification:s((ve,Ge)=>{je();let ft;return Na.func(ve)?p=ve:Ge&&(Na.string(ve)?(ft=ve,m.set(ve,{type:void 0,handler:Ge})):(ft=ve.method,m.set(ve.method,{type:ve,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((ve,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((ve,Ge,ft)=>on.sendNotification(BM.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:V.event,sendRequest:s((ve,...Ge)=>{je(),pt();let ft,Tt,nr;if(Na.string(ve)){ft=ve;let er=Ge[0],ar=Ge[Ge.length-1],tr=0,Pr=Mn.ParameterStructures.auto;Mn.ParameterStructures.is(er)&&(tr=1,Pr=er);let Wr=Ge.length;Tde.CancellationToken.is(ar)&&(Wr=Wr-1,nr=ar);let en=Wr-tr;switch(en){case 0:Tt=void 0;break;case 1:Tt=Hr(Pr,Ge[tr]);break;default:if(Pr===Mn.ParameterStructures.byName)throw new Error(`Received ${en} parameters for 'by Name' request parameter structure.`);Tt=Ge.slice(tr,Wr).map(gn=>Mt(gn));break}}else{let er=Ge;ft=ve.method,Tt=Rr(ve,er);let ar=ve.numberOfParams;nr=Tde.CancellationToken.is(er[ar])?er[ar]:void 0}let Xt=o++,br;nr&&(br=nr.onCancellationRequested(()=>{let er=U.sender.sendCancellation(on,Xt);return er===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Xt}`),Promise.resolve()):er.catch(()=>{i.log(`Sending cancellation messages for id ${Xt} failed`)})}));let cr={jsonrpc:l,id:Xt,method:ft,params:Tt};return ye(cr),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(cr),new Promise(async(er,ar)=>{let tr=s(en=>{er(en),U.sender.cleanup(Xt),br?.dispose()},"resolveWithCleanup"),Pr=s(en=>{ar(en),U.sender.cleanup(Xt),br?.dispose()},"rejectWithCleanup"),Wr={method:ft,timerStart:Date.now(),resolve:tr,reject:Pr};try{await e.write(cr),y.set(Xt,Wr)}catch(en){throw i.error("Sending request failed."),Wr.reject(new Mn.ResponseError(Mn.ErrorCodes.MessageWriteError,en.message?en.message:"Unknown reason")),en}})},"sendRequest"),onRequest:s((ve,Ge)=>{je();let ft=null;return _de.is(ve)?(ft=void 0,u=ve):Na.string(ve)?(ft=null,Ge!==void 0&&(ft=ve,d.set(ve,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=ve.method,d.set(ve.method,{type:ve,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?d.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>y.size>0,"hasPendingResponse"),trace:s(async(ve,Ge,ft)=>{let Tt=!1,nr=Z0.Text;ft!==void 0&&(Na.boolean(ft)?Tt=ft:(Tt=ft.sendNotification||!1,nr=ft.traceFormat||Z0.Text)),w=ve,R=nr,w===Wo.Off?D=void 0:D=Ge,Tt&&!ae()&&!te()&&await on.sendNotification(Rde.type,{value:Wo.toString(ve)})},"trace"),onError:O.event,onClose:Y.event,onUnhandledNotification:ee.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;N=Dg.Disposed,H.fire(void 0);let ve=new Mn.ResponseError(Mn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of y.values())Ge.reject(ve);y=new Map,b=new Map,E=new Set,A=new i3e.LinkedMap,Na.func(e.dispose)&&e.dispose(),Na.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{je(),et(),N=Dg.Listening,t.listen(lt)},"listen"),inspect:s(()=>{(0,n3e.default)().console.log("inspect")},"inspect")};return on.onNotification(A$.type,ve=>{if(w===Wo.Off||!D)return;let Ge=w===Wo.Verbose||w===Wo.Compact;D.log(ve.message,Ge?ve.verbose:void 0)}),on.onNotification(BM.type,ve=>{let Ge=h.get(ve.token);Ge?Ge(ve.value):V.fire(ve)}),on}s(HSt,"createMessageConnection");ui.createMessageConnection=HSt});var b$=q(At=>{"use strict";f();Object.defineProperty(At,"__esModule",{value:!0});At.ProgressType=At.ProgressToken=At.createMessageConnection=At.NullLogger=At.ConnectionOptions=At.ConnectionStrategy=At.AbstractMessageBuffer=At.WriteableStreamMessageWriter=At.AbstractMessageWriter=At.MessageWriter=At.ReadableStreamMessageReader=At.AbstractMessageReader=At.MessageReader=At.SharedArrayReceiverStrategy=At.SharedArraySenderStrategy=At.CancellationToken=At.CancellationTokenSource=At.Emitter=At.Event=At.Disposable=At.LRUCache=At.Touch=At.LinkedMap=At.ParameterStructures=At.NotificationType9=At.NotificationType8=At.NotificationType7=At.NotificationType6=At.NotificationType5=At.NotificationType4=At.NotificationType3=At.NotificationType2=At.NotificationType1=At.NotificationType0=At.NotificationType=At.ErrorCodes=At.ResponseError=At.RequestType9=At.RequestType8=At.RequestType7=At.RequestType6=At.RequestType5=At.RequestType4=At.RequestType3=At.RequestType2=At.RequestType1=At.RequestType0=At.RequestType=At.Message=At.RAL=void 0;At.MessageStrategy=At.CancellationStrategy=At.CancellationSenderStrategy=At.CancellationReceiverStrategy=At.ConnectionError=At.ConnectionErrors=At.LogTraceNotification=At.SetTraceNotification=At.TraceFormat=At.TraceValues=At.Trace=void 0;var ks=nde();Object.defineProperty(At,"Message",{enumerable:!0,get:s(function(){return ks.Message},"get")});Object.defineProperty(At,"RequestType",{enumerable:!0,get:s(function(){return ks.RequestType},"get")});Object.defineProperty(At,"RequestType0",{enumerable:!0,get:s(function(){return ks.RequestType0},"get")});Object.defineProperty(At,"RequestType1",{enumerable:!0,get:s(function(){return ks.RequestType1},"get")});Object.defineProperty(At,"RequestType2",{enumerable:!0,get:s(function(){return ks.RequestType2},"get")});Object.defineProperty(At,"RequestType3",{enumerable:!0,get:s(function(){return ks.RequestType3},"get")});Object.defineProperty(At,"RequestType4",{enumerable:!0,get:s(function(){return ks.RequestType4},"get")});Object.defineProperty(At,"RequestType5",{enumerable:!0,get:s(function(){return ks.RequestType5},"get")});Object.defineProperty(At,"RequestType6",{enumerable:!0,get:s(function(){return ks.RequestType6},"get")});Object.defineProperty(At,"RequestType7",{enumerable:!0,get:s(function(){return ks.RequestType7},"get")});Object.defineProperty(At,"RequestType8",{enumerable:!0,get:s(function(){return ks.RequestType8},"get")});Object.defineProperty(At,"RequestType9",{enumerable:!0,get:s(function(){return ks.RequestType9},"get")});Object.defineProperty(At,"ResponseError",{enumerable:!0,get:s(function(){return ks.ResponseError},"get")});Object.defineProperty(At,"ErrorCodes",{enumerable:!0,get:s(function(){return ks.ErrorCodes},"get")});Object.defineProperty(At,"NotificationType",{enumerable:!0,get:s(function(){return ks.NotificationType},"get")});Object.defineProperty(At,"NotificationType0",{enumerable:!0,get:s(function(){return ks.NotificationType0},"get")});Object.defineProperty(At,"NotificationType1",{enumerable:!0,get:s(function(){return ks.NotificationType1},"get")});Object.defineProperty(At,"NotificationType2",{enumerable:!0,get:s(function(){return ks.NotificationType2},"get")});Object.defineProperty(At,"NotificationType3",{enumerable:!0,get:s(function(){return ks.NotificationType3},"get")});Object.defineProperty(At,"NotificationType4",{enumerable:!0,get:s(function(){return ks.NotificationType4},"get")});Object.defineProperty(At,"NotificationType5",{enumerable:!0,get:s(function(){return ks.NotificationType5},"get")});Object.defineProperty(At,"NotificationType6",{enumerable:!0,get:s(function(){return ks.NotificationType6},"get")});Object.defineProperty(At,"NotificationType7",{enumerable:!0,get:s(function(){return ks.NotificationType7},"get")});Object.defineProperty(At,"NotificationType8",{enumerable:!0,get:s(function(){return ks.NotificationType8},"get")});Object.defineProperty(At,"NotificationType9",{enumerable:!0,get:s(function(){return ks.NotificationType9},"get")});Object.defineProperty(At,"ParameterStructures",{enumerable:!0,get:s(function(){return ks.ParameterStructures},"get")});var Dde=ode();Object.defineProperty(At,"LinkedMap",{enumerable:!0,get:s(function(){return Dde.LinkedMap},"get")});Object.defineProperty(At,"LRUCache",{enumerable:!0,get:s(function(){return Dde.LRUCache},"get")});Object.defineProperty(At,"Touch",{enumerable:!0,get:s(function(){return Dde.Touch},"get")});var WSt=GDe();Object.defineProperty(At,"Disposable",{enumerable:!0,get:s(function(){return WSt.Disposable},"get")});var c3e=a4();Object.defineProperty(At,"Event",{enumerable:!0,get:s(function(){return c3e.Event},"get")});Object.defineProperty(At,"Emitter",{enumerable:!0,get:s(function(){return c3e.Emitter},"get")});var l3e=f$();Object.defineProperty(At,"CancellationTokenSource",{enumerable:!0,get:s(function(){return l3e.CancellationTokenSource},"get")});Object.defineProperty(At,"CancellationToken",{enumerable:!0,get:s(function(){return l3e.CancellationToken},"get")});var u3e=zDe();Object.defineProperty(At,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return u3e.SharedArraySenderStrategy},"get")});Object.defineProperty(At,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return u3e.SharedArrayReceiverStrategy},"get")});var Bde=KDe();Object.defineProperty(At,"MessageReader",{enumerable:!0,get:s(function(){return Bde.MessageReader},"get")});Object.defineProperty(At,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Bde.AbstractMessageReader},"get")});Object.defineProperty(At,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Bde.ReadableStreamMessageReader},"get")});var Nde=t3e();Object.defineProperty(At,"MessageWriter",{enumerable:!0,get:s(function(){return Nde.MessageWriter},"get")});Object.defineProperty(At,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Nde.AbstractMessageWriter},"get")});Object.defineProperty(At,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Nde.WriteableStreamMessageWriter},"get")});var $St=r3e();Object.defineProperty(At,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return $St.AbstractMessageBuffer},"get")});var Iu=a3e();Object.defineProperty(At,"ConnectionStrategy",{enumerable:!0,get:s(function(){return Iu.ConnectionStrategy},"get")});Object.defineProperty(At,"ConnectionOptions",{enumerable:!0,get:s(function(){return Iu.ConnectionOptions},"get")});Object.defineProperty(At,"NullLogger",{enumerable:!0,get:s(function(){return Iu.NullLogger},"get")});Object.defineProperty(At,"createMessageConnection",{enumerable:!0,get:s(function(){return Iu.createMessageConnection},"get")});Object.defineProperty(At,"ProgressToken",{enumerable:!0,get:s(function(){return Iu.ProgressToken},"get")});Object.defineProperty(At,"ProgressType",{enumerable:!0,get:s(function(){return Iu.ProgressType},"get")});Object.defineProperty(At,"Trace",{enumerable:!0,get:s(function(){return Iu.Trace},"get")});Object.defineProperty(At,"TraceValues",{enumerable:!0,get:s(function(){return Iu.TraceValues},"get")});Object.defineProperty(At,"TraceFormat",{enumerable:!0,get:s(function(){return Iu.TraceFormat},"get")});Object.defineProperty(At,"SetTraceNotification",{enumerable:!0,get:s(function(){return Iu.SetTraceNotification},"get")});Object.defineProperty(At,"LogTraceNotification",{enumerable:!0,get:s(function(){return Iu.LogTraceNotification},"get")});Object.defineProperty(At,"ConnectionErrors",{enumerable:!0,get:s(function(){return Iu.ConnectionErrors},"get")});Object.defineProperty(At,"ConnectionError",{enumerable:!0,get:s(function(){return Iu.ConnectionError},"get")});Object.defineProperty(At,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return Iu.CancellationReceiverStrategy},"get")});Object.defineProperty(At,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return Iu.CancellationSenderStrategy},"get")});Object.defineProperty(At,"CancellationStrategy",{enumerable:!0,get:s(function(){return Iu.CancellationStrategy},"get")});Object.defineProperty(At,"MessageStrategy",{enumerable:!0,get:s(function(){return Iu.MessageStrategy},"get")});var jSt=Vb();At.RAL=jSt.default});var p3e=q(Ode=>{"use strict";f();Object.defineProperty(Ode,"__esModule",{value:!0});var d3e=require("util"),pv=b$(),I$=class t extends pv.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new d3e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};I$.emptyBuffer=Buffer.allocUnsafe(0);var Lde=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),pv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),pv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),pv.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),pv.Disposable.create(()=>this.stream.off("data",e))}},Mde=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),pv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),pv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),pv.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},f3e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new I$(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new d3e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Lde(t),"asReadableStream"),asWritableStream:s(t=>new Mde(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Fde(){return f3e}s(Fde,"RIL");(function(t){function e(){pv.RAL.install(f3e)}s(e,"install"),t.install=e})(Fde||(Fde={}));Ode.default=Fde});var l_=q(mo=>{"use strict";f();var GSt=mo&&mo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VSt=mo&&mo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&GSt(e,t,r)};Object.defineProperty(mo,"__esModule",{value:!0});mo.createMessageConnection=mo.createServerSocketTransport=mo.createClientSocketTransport=mo.createServerPipeTransport=mo.createClientPipeTransport=mo.generateRandomPipeName=mo.StreamMessageWriter=mo.StreamMessageReader=mo.SocketMessageWriter=mo.SocketMessageReader=mo.PortMessageWriter=mo.PortMessageReader=mo.IPCMessageWriter=mo.IPCMessageReader=void 0;var f4=p3e();f4.default.install();var m3e=require("path"),zSt=require("os"),YSt=require("crypto"),S$=require("net"),ep=b$();VSt(b$(),mo);var Qde=class extends ep.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),ep.Disposable.create(()=>this.process.off("message",e))}};mo.IPCMessageReader=Qde;var Ude=class extends ep.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};mo.IPCMessageWriter=Ude;var qde=class extends ep.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new ep.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};mo.PortMessageReader=qde;var Hde=class extends ep.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};mo.PortMessageWriter=Hde;var a_=class extends ep.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,f4.default)().stream.asReadableStream(e),r)}};mo.SocketMessageReader=a_;var c_=class extends ep.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,f4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};mo.SocketMessageWriter=c_;var T$=class extends ep.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,f4.default)().stream.asReadableStream(e),r)}};mo.StreamMessageReader=T$;var w$=class extends ep.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,f4.default)().stream.asWritableStream(e),r)}};mo.StreamMessageWriter=w$;var h3e=process.env.XDG_RUNTIME_DIR,KSt=new Map([["linux",107],["darwin",103]]);function JSt(){let t=(0,YSt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;h3e?e=m3e.join(h3e,`vscode-ipc-${t}.sock`):e=m3e.join(zSt.tmpdir(),`vscode-${t}.sock`);let r=KSt.get(process.platform);return r!==void 0&&e.length>r&&(0,f4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(JSt,"generateRandomPipeName");mo.generateRandomPipeName=JSt;function XSt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,S$.createServer)(c=>{a.close(),r([new a_(c,e),new c_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(XSt,"createClientPipeTransport");mo.createClientPipeTransport=XSt;function ZSt(t,e="utf-8"){let r=(0,S$.createConnection)(t);return[new a_(r,e),new c_(r,e)]}s(ZSt,"createServerPipeTransport");mo.createServerPipeTransport=ZSt;function e_t(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,S$.createServer)(c=>{a.close(),r([new a_(c,e),new c_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(e_t,"createClientSocketTransport");mo.createClientSocketTransport=e_t;function t_t(t,e="utf-8"){let r=(0,S$.createConnection)(t,"127.0.0.1");return[new a_(r,e),new c_(r,e)]}s(t_t,"createServerSocketTransport");mo.createServerSocketTransport=t_t;function r_t(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(r_t,"isReadableStream");function n_t(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(n_t,"isWritableStream");function i_t(t,e,r,n){r||(r=ep.NullLogger);let i=r_t(t)?new T$(t):t,o=n_t(e)?new w$(e):e;return ep.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,ep.createMessageConnection)(i,o,r,n)}s(i_t,"createMessageConnection");mo.createMessageConnection=i_t});var Wde=q((k7r,g3e)=>{"use strict";f();g3e.exports=l_()});var R$=q((A3e,_$)=>{f();(function(t){if(typeof _$=="object"&&typeof _$.exports=="object"){var e=t(require,A3e);e!==void 0&&(_$.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(z){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),z.is=Ce})(r||(e.DocumentUri=r={}));var n;(function(z){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),z.is=Ce})(n||(e.URI=n={}));var i;(function(z){z.MIN_VALUE=-2147483648,z.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&z.MIN_VALUE<=Ie&&Ie<=z.MAX_VALUE}s(Ce,"is"),z.is=Ce})(i||(e.integer=i={}));var o;(function(z){z.MIN_VALUE=0,z.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&z.MIN_VALUE<=Ie&&Ie<=z.MAX_VALUE}s(Ce,"is"),z.is=Ce})(o||(e.uinteger=o={}));var a;(function(z){function Ce(F,B){return F===Number.MAX_VALUE&&(F=o.MAX_VALUE),B===Number.MAX_VALUE&&(B=o.MAX_VALUE),{line:F,character:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&Pe.uinteger(B.line)&&Pe.uinteger(B.character)}s(Ie,"is"),z.is=Ie})(a||(e.Position=a={}));var c;(function(z){function Ce(F,B,Z,ge){if(Pe.uinteger(F)&&Pe.uinteger(B)&&Pe.uinteger(Z)&&Pe.uinteger(ge))return{start:a.create(F,B),end:a.create(Z,ge)};if(a.is(F)&&a.is(B))return{start:F,end:B};throw new Error("Range#create called with invalid arguments[".concat(F,", ").concat(B,", ").concat(Z,", ").concat(ge,"]"))}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&a.is(B.start)&&a.is(B.end)}s(Ie,"is"),z.is=Ie})(c||(e.Range=c={}));var l;(function(z){function Ce(F,B){return{uri:F,range:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&c.is(B.range)&&(Pe.string(B.uri)||Pe.undefined(B.uri))}s(Ie,"is"),z.is=Ie})(l||(e.Location=l={}));var u;(function(z){function Ce(F,B,Z,ge){return{targetUri:F,targetRange:B,targetSelectionRange:Z,originSelectionRange:ge}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&c.is(B.targetRange)&&Pe.string(B.targetUri)&&c.is(B.targetSelectionRange)&&(c.is(B.originSelectionRange)||Pe.undefined(B.originSelectionRange))}s(Ie,"is"),z.is=Ie})(u||(e.LocationLink=u={}));var d;(function(z){function Ce(F,B,Z,ge){return{red:F,green:B,blue:Z,alpha:ge}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&Pe.numberRange(B.red,0,1)&&Pe.numberRange(B.green,0,1)&&Pe.numberRange(B.blue,0,1)&&Pe.numberRange(B.alpha,0,1)}s(Ie,"is"),z.is=Ie})(d||(e.Color=d={}));var p;(function(z){function Ce(F,B){return{range:F,color:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&c.is(B.range)&&d.is(B.color)}s(Ie,"is"),z.is=Ie})(p||(e.ColorInformation=p={}));var m;(function(z){function Ce(F,B,Z){return{label:F,textEdit:B,additionalTextEdits:Z}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&Pe.string(B.label)&&(Pe.undefined(B.textEdit)||D.is(B))&&(Pe.undefined(B.additionalTextEdits)||Pe.typedArray(B.additionalTextEdits,D.is))}s(Ie,"is"),z.is=Ie})(m||(e.ColorPresentation=m={}));var h;(function(z){z.Comment="comment",z.Imports="imports",z.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(z){function Ce(F,B,Z,ge,_e,ut){var St={startLine:F,endLine:B};return Pe.defined(Z)&&(St.startCharacter=Z),Pe.defined(ge)&&(St.endCharacter=ge),Pe.defined(_e)&&(St.kind=_e),Pe.defined(ut)&&(St.collapsedText=ut),St}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&Pe.uinteger(B.startLine)&&Pe.uinteger(B.startLine)&&(Pe.undefined(B.startCharacter)||Pe.uinteger(B.startCharacter))&&(Pe.undefined(B.endCharacter)||Pe.uinteger(B.endCharacter))&&(Pe.undefined(B.kind)||Pe.string(B.kind))}s(Ie,"is"),z.is=Ie})(g||(e.FoldingRange=g={}));var A;(function(z){function Ce(F,B){return{location:F,message:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&l.is(B.location)&&Pe.string(B.message)}s(Ie,"is"),z.is=Ie})(A||(e.DiagnosticRelatedInformation=A={}));var y;(function(z){z.Error=1,z.Warning=2,z.Information=3,z.Hint=4})(y||(e.DiagnosticSeverity=y={}));var E;(function(z){z.Unnecessary=1,z.Deprecated=2})(E||(e.DiagnosticTag=E={}));var b;(function(z){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&Pe.string(F.href)}s(Ce,"is"),z.is=Ce})(b||(e.CodeDescription=b={}));var w;(function(z){function Ce(F,B,Z,ge,_e,ut){var St={range:F,message:B};return Pe.defined(Z)&&(St.severity=Z),Pe.defined(ge)&&(St.code=ge),Pe.defined(_e)&&(St.source=_e),Pe.defined(ut)&&(St.relatedInformation=ut),St}s(Ce,"create"),z.create=Ce;function Ie(F){var B,Z=F;return Pe.defined(Z)&&c.is(Z.range)&&Pe.string(Z.message)&&(Pe.number(Z.severity)||Pe.undefined(Z.severity))&&(Pe.integer(Z.code)||Pe.string(Z.code)||Pe.undefined(Z.code))&&(Pe.undefined(Z.codeDescription)||Pe.string((B=Z.codeDescription)===null||B===void 0?void 0:B.href))&&(Pe.string(Z.source)||Pe.undefined(Z.source))&&(Pe.undefined(Z.relatedInformation)||Pe.typedArray(Z.relatedInformation,A.is))}s(Ie,"is"),z.is=Ie})(w||(e.Diagnostic=w={}));var R;(function(z){function Ce(F,B){for(var Z=[],ge=2;ge<arguments.length;ge++)Z[ge-2]=arguments[ge];var _e={title:F,command:B};return Pe.defined(Z)&&Z.length>0&&(_e.arguments=Z),_e}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.string(B.title)&&Pe.string(B.command)}s(Ie,"is"),z.is=Ie})(R||(e.Command=R={}));var D;(function(z){function Ce(Z,ge){return{range:Z,newText:ge}}s(Ce,"replace"),z.replace=Ce;function Ie(Z,ge){return{range:{start:Z,end:Z},newText:ge}}s(Ie,"insert"),z.insert=Ie;function F(Z){return{range:Z,newText:""}}s(F,"del"),z.del=F;function B(Z){var ge=Z;return Pe.objectLiteral(ge)&&Pe.string(ge.newText)&&c.is(ge.range)}s(B,"is"),z.is=B})(D||(e.TextEdit=D={}));var N;(function(z){function Ce(F,B,Z){var ge={label:F};return B!==void 0&&(ge.needsConfirmation=B),Z!==void 0&&(ge.description=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&Pe.string(B.label)&&(Pe.boolean(B.needsConfirmation)||B.needsConfirmation===void 0)&&(Pe.string(B.description)||B.description===void 0)}s(Ie,"is"),z.is=Ie})(N||(e.ChangeAnnotation=N={}));var O;(function(z){function Ce(Ie){var F=Ie;return Pe.string(F)}s(Ce,"is"),z.is=Ce})(O||(e.ChangeAnnotationIdentifier=O={}));var Y;(function(z){function Ce(Z,ge,_e){return{range:Z,newText:ge,annotationId:_e}}s(Ce,"replace"),z.replace=Ce;function Ie(Z,ge,_e){return{range:{start:Z,end:Z},newText:ge,annotationId:_e}}s(Ie,"insert"),z.insert=Ie;function F(Z,ge){return{range:Z,newText:"",annotationId:ge}}s(F,"del"),z.del=F;function B(Z){var ge=Z;return D.is(ge)&&(N.is(ge.annotationId)||O.is(ge.annotationId))}s(B,"is"),z.is=B})(Y||(e.AnnotatedTextEdit=Y={}));var ee;(function(z){function Ce(F,B){return{textDocument:F,edits:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&ae.is(B.textDocument)&&Array.isArray(B.edits)}s(Ie,"is"),z.is=Ie})(ee||(e.TextDocumentEdit=ee={}));var V;(function(z){function Ce(F,B,Z){var ge={kind:"create",uri:F};return B!==void 0&&(B.overwrite!==void 0||B.ignoreIfExists!==void 0)&&(ge.options=B),Z!==void 0&&(ge.annotationId=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&B.kind==="create"&&Pe.string(B.uri)&&(B.options===void 0||(B.options.overwrite===void 0||Pe.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||Pe.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}s(Ie,"is"),z.is=Ie})(V||(e.CreateFile=V={}));var H;(function(z){function Ce(F,B,Z,ge){var _e={kind:"rename",oldUri:F,newUri:B};return Z!==void 0&&(Z.overwrite!==void 0||Z.ignoreIfExists!==void 0)&&(_e.options=Z),ge!==void 0&&(_e.annotationId=ge),_e}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&B.kind==="rename"&&Pe.string(B.oldUri)&&Pe.string(B.newUri)&&(B.options===void 0||(B.options.overwrite===void 0||Pe.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||Pe.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}s(Ie,"is"),z.is=Ie})(H||(e.RenameFile=H={}));var U;(function(z){function Ce(F,B,Z){var ge={kind:"delete",uri:F};return B!==void 0&&(B.recursive!==void 0||B.ignoreIfNotExists!==void 0)&&(ge.options=B),Z!==void 0&&(ge.annotationId=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&B.kind==="delete"&&Pe.string(B.uri)&&(B.options===void 0||(B.options.recursive===void 0||Pe.boolean(B.options.recursive))&&(B.options.ignoreIfNotExists===void 0||Pe.boolean(B.options.ignoreIfNotExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}s(Ie,"is"),z.is=Ie})(U||(e.DeleteFile=U={}));var X;(function(z){function Ce(Ie){var F=Ie;return F&&(F.changes!==void 0||F.documentChanges!==void 0)&&(F.documentChanges===void 0||F.documentChanges.every(function(B){return Pe.string(B.kind)?V.is(B)||H.is(B)||U.is(B):ee.is(B)}))}s(Ce,"is"),z.is=Ce})(X||(e.WorkspaceEdit=X={}));var K=function(){function z(Ce,Ie){this.edits=Ce,this.changeAnnotations=Ie}return s(z,"TextEditChangeImpl"),z.prototype.insert=function(Ce,Ie,F){var B,Z;if(F===void 0?B=D.insert(Ce,Ie):O.is(F)?(Z=F,B=Y.insert(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),Z=this.changeAnnotations.manage(F),B=Y.insert(Ce,Ie,Z)),this.edits.push(B),Z!==void 0)return Z},z.prototype.replace=function(Ce,Ie,F){var B,Z;if(F===void 0?B=D.replace(Ce,Ie):O.is(F)?(Z=F,B=Y.replace(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),Z=this.changeAnnotations.manage(F),B=Y.replace(Ce,Ie,Z)),this.edits.push(B),Z!==void 0)return Z},z.prototype.delete=function(Ce,Ie){var F,B;if(Ie===void 0?F=D.del(Ce):O.is(Ie)?(B=Ie,F=Y.del(Ce,Ie)):(this.assertChangeAnnotations(this.changeAnnotations),B=this.changeAnnotations.manage(Ie),F=Y.del(Ce,B)),this.edits.push(F),B!==void 0)return B},z.prototype.add=function(Ce){this.edits.push(Ce)},z.prototype.all=function(){return this.edits},z.prototype.clear=function(){this.edits.splice(0,this.edits.length)},z.prototype.assertChangeAnnotations=function(Ce){if(Ce===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},z}(),j=function(){function z(Ce){this._annotations=Ce===void 0?Object.create(null):Ce,this._counter=0,this._size=0}return s(z,"ChangeAnnotations"),z.prototype.all=function(){return this._annotations},Object.defineProperty(z.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),z.prototype.manage=function(Ce,Ie){var F;if(O.is(Ce)?F=Ce:(F=this.nextId(),Ie=Ce),this._annotations[F]!==void 0)throw new Error("Id ".concat(F," is already in use."));if(Ie===void 0)throw new Error("No annotation provided for id ".concat(F));return this._annotations[F]=Ie,this._size++,F},z.prototype.nextId=function(){return this._counter++,this._counter.toString()},z}(),W=function(){function z(Ce){var Ie=this;this._textEditChanges=Object.create(null),Ce!==void 0?(this._workspaceEdit=Ce,Ce.documentChanges?(this._changeAnnotations=new j(Ce.changeAnnotations),Ce.changeAnnotations=this._changeAnnotations.all(),Ce.documentChanges.forEach(function(F){if(ee.is(F)){var B=new K(F.edits,Ie._changeAnnotations);Ie._textEditChanges[F.textDocument.uri]=B}})):Ce.changes&&Object.keys(Ce.changes).forEach(function(F){var B=new K(Ce.changes[F]);Ie._textEditChanges[F]=B})):this._workspaceEdit={}}return s(z,"WorkspaceChange"),Object.defineProperty(z.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),z.prototype.getTextEditChange=function(Ce){if(ae.is(Ce)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Ie={uri:Ce.uri,version:Ce.version},F=this._textEditChanges[Ie.uri];if(!F){var B=[],Z={textDocument:Ie,edits:B};this._workspaceEdit.documentChanges.push(Z),F=new K(B,this._changeAnnotations),this._textEditChanges[Ie.uri]=F}return F}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var F=this._textEditChanges[Ce];if(!F){var B=[];this._workspaceEdit.changes[Ce]=B,F=new K(B),this._textEditChanges[Ce]=F}return F}},z.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},z.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},z.prototype.createFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;N.is(Ie)||O.is(Ie)?B=Ie:F=Ie;var Z,ge;if(B===void 0?Z=V.create(Ce,F):(ge=O.is(B)?B:this._changeAnnotations.manage(B),Z=V.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(Z),ge!==void 0)return ge},z.prototype.renameFile=function(Ce,Ie,F,B){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Z;N.is(F)||O.is(F)?Z=F:B=F;var ge,_e;if(Z===void 0?ge=H.create(Ce,Ie,B):(_e=O.is(Z)?Z:this._changeAnnotations.manage(Z),ge=H.create(Ce,Ie,B,_e)),this._workspaceEdit.documentChanges.push(ge),_e!==void 0)return _e},z.prototype.deleteFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;N.is(Ie)||O.is(Ie)?B=Ie:F=Ie;var Z,ge;if(B===void 0?Z=U.create(Ce,F):(ge=O.is(B)?B:this._changeAnnotations.manage(B),Z=U.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(Z),ge!==void 0)return ge},z}();e.WorkspaceChange=W;var J;(function(z){function Ce(F){return{uri:F}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.string(B.uri)}s(Ie,"is"),z.is=Ie})(J||(e.TextDocumentIdentifier=J={}));var ie;(function(z){function Ce(F,B){return{uri:F,version:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.string(B.uri)&&Pe.integer(B.version)}s(Ie,"is"),z.is=Ie})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ae;(function(z){function Ce(F,B){return{uri:F,version:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.string(B.uri)&&(B.version===null||Pe.integer(B.version))}s(Ie,"is"),z.is=Ie})(ae||(e.OptionalVersionedTextDocumentIdentifier=ae={}));var te;(function(z){function Ce(F,B,Z,ge){return{uri:F,languageId:B,version:Z,text:ge}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.string(B.uri)&&Pe.string(B.languageId)&&Pe.integer(B.version)&&Pe.string(B.text)}s(Ie,"is"),z.is=Ie})(te||(e.TextDocumentItem=te={}));var pe;(function(z){z.PlainText="plaintext",z.Markdown="markdown";function Ce(Ie){var F=Ie;return F===z.PlainText||F===z.Markdown}s(Ce,"is"),z.is=Ce})(pe||(e.MarkupKind=pe={}));var Ae;(function(z){function Ce(Ie){var F=Ie;return Pe.objectLiteral(Ie)&&pe.is(F.kind)&&Pe.string(F.value)}s(Ce,"is"),z.is=Ce})(Ae||(e.MarkupContent=Ae={}));var Oe;(function(z){z.Text=1,z.Method=2,z.Function=3,z.Constructor=4,z.Field=5,z.Variable=6,z.Class=7,z.Interface=8,z.Module=9,z.Property=10,z.Unit=11,z.Value=12,z.Enum=13,z.Keyword=14,z.Snippet=15,z.Color=16,z.File=17,z.Reference=18,z.Folder=19,z.EnumMember=20,z.Constant=21,z.Struct=22,z.Event=23,z.Operator=24,z.TypeParameter=25})(Oe||(e.CompletionItemKind=Oe={}));var Te;(function(z){z.PlainText=1,z.Snippet=2})(Te||(e.InsertTextFormat=Te={}));var Je;(function(z){z.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(z){function Ce(F,B,Z){return{newText:F,insert:B,replace:Z}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&Pe.string(B.newText)&&c.is(B.insert)&&c.is(B.replace)}s(Ie,"is"),z.is=Ie})(Me||(e.InsertReplaceEdit=Me={}));var lt;(function(z){z.asIs=1,z.adjustIndentation=2})(lt||(e.InsertTextMode=lt={}));var _t;(function(z){function Ce(Ie){var F=Ie;return F&&(Pe.string(F.detail)||F.detail===void 0)&&(Pe.string(F.description)||F.description===void 0)}s(Ce,"is"),z.is=Ce})(_t||(e.CompletionItemLabelDetails=_t={}));var vt;(function(z){function Ce(Ie){return{label:Ie}}s(Ce,"create"),z.create=Ce})(vt||(e.CompletionItem=vt={}));var ht;(function(z){function Ce(Ie,F){return{items:Ie||[],isIncomplete:!!F}}s(Ce,"create"),z.create=Ce})(ht||(e.CompletionList=ht={}));var ue;(function(z){function Ce(F){return F.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(Ce,"fromPlainText"),z.fromPlainText=Ce;function Ie(F){var B=F;return Pe.string(B)||Pe.objectLiteral(B)&&Pe.string(B.language)&&Pe.string(B.value)}s(Ie,"is"),z.is=Ie})(ue||(e.MarkedString=ue={}));var Ue;(function(z){function Ce(Ie){var F=Ie;return!!F&&Pe.objectLiteral(F)&&(Ae.is(F.contents)||ue.is(F.contents)||Pe.typedArray(F.contents,ue.is))&&(Ie.range===void 0||c.is(Ie.range))}s(Ce,"is"),z.is=Ce})(Ue||(e.Hover=Ue={}));var ye;(function(z){function Ce(Ie,F){return F?{label:Ie,documentation:F}:{label:Ie}}s(Ce,"create"),z.create=Ce})(ye||(e.ParameterInformation=ye={}));var We;(function(z){function Ce(Ie,F){for(var B=[],Z=2;Z<arguments.length;Z++)B[Z-2]=arguments[Z];var ge={label:Ie};return Pe.defined(F)&&(ge.documentation=F),Pe.defined(B)?ge.parameters=B:ge.parameters=[],ge}s(Ce,"create"),z.create=Ce})(We||(e.SignatureInformation=We={}));var se;(function(z){z.Text=1,z.Read=2,z.Write=3})(se||(e.DocumentHighlightKind=se={}));var le;(function(z){function Ce(Ie,F){var B={range:Ie};return Pe.number(F)&&(B.kind=F),B}s(Ce,"create"),z.create=Ce})(le||(e.DocumentHighlight=le={}));var qe;(function(z){z.File=1,z.Module=2,z.Namespace=3,z.Package=4,z.Class=5,z.Method=6,z.Property=7,z.Field=8,z.Constructor=9,z.Enum=10,z.Interface=11,z.Function=12,z.Variable=13,z.Constant=14,z.String=15,z.Number=16,z.Boolean=17,z.Array=18,z.Object=19,z.Key=20,z.Null=21,z.EnumMember=22,z.Struct=23,z.Event=24,z.Operator=25,z.TypeParameter=26})(qe||(e.SymbolKind=qe={}));var Be;(function(z){z.Deprecated=1})(Be||(e.SymbolTag=Be={}));var xe;(function(z){function Ce(Ie,F,B,Z,ge){var _e={name:Ie,kind:F,location:{uri:Z,range:B}};return ge&&(_e.containerName=ge),_e}s(Ce,"create"),z.create=Ce})(xe||(e.SymbolInformation=xe={}));var je;(function(z){function Ce(Ie,F,B,Z){return Z!==void 0?{name:Ie,kind:F,location:{uri:B,range:Z}}:{name:Ie,kind:F,location:{uri:B}}}s(Ce,"create"),z.create=Ce})(je||(e.WorkspaceSymbol=je={}));var et;(function(z){function Ce(F,B,Z,ge,_e,ut){var St={name:F,detail:B,kind:Z,range:ge,selectionRange:_e};return ut!==void 0&&(St.children=ut),St}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&Pe.string(B.name)&&Pe.number(B.kind)&&c.is(B.range)&&c.is(B.selectionRange)&&(B.detail===void 0||Pe.string(B.detail))&&(B.deprecated===void 0||Pe.boolean(B.deprecated))&&(B.children===void 0||Array.isArray(B.children))&&(B.tags===void 0||Array.isArray(B.tags))}s(Ie,"is"),z.is=Ie})(et||(e.DocumentSymbol=et={}));var pt;(function(z){z.Empty="",z.QuickFix="quickfix",z.Refactor="refactor",z.RefactorExtract="refactor.extract",z.RefactorInline="refactor.inline",z.RefactorRewrite="refactor.rewrite",z.Source="source",z.SourceOrganizeImports="source.organizeImports",z.SourceFixAll="source.fixAll"})(pt||(e.CodeActionKind=pt={}));var Mt;(function(z){z.Invoked=1,z.Automatic=2})(Mt||(e.CodeActionTriggerKind=Mt={}));var Kt;(function(z){function Ce(F,B,Z){var ge={diagnostics:F};return B!=null&&(ge.only=B),Z!=null&&(ge.triggerKind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.typedArray(B.diagnostics,w.is)&&(B.only===void 0||Pe.typedArray(B.only,Pe.string))&&(B.triggerKind===void 0||B.triggerKind===Mt.Invoked||B.triggerKind===Mt.Automatic)}s(Ie,"is"),z.is=Ie})(Kt||(e.CodeActionContext=Kt={}));var Ot;(function(z){function Ce(F,B,Z){var ge={title:F},_e=!0;return typeof B=="string"?(_e=!1,ge.kind=B):R.is(B)?ge.command=B:ge.edit=B,_e&&Z!==void 0&&(ge.kind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B&&Pe.string(B.title)&&(B.diagnostics===void 0||Pe.typedArray(B.diagnostics,w.is))&&(B.kind===void 0||Pe.string(B.kind))&&(B.edit!==void 0||B.command!==void 0)&&(B.command===void 0||R.is(B.command))&&(B.isPreferred===void 0||Pe.boolean(B.isPreferred))&&(B.edit===void 0||X.is(B.edit))}s(Ie,"is"),z.is=Ie})(Ot||(e.CodeAction=Ot={}));var Hr;(function(z){function Ce(F,B){var Z={range:F};return Pe.defined(B)&&(Z.data=B),Z}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&c.is(B.range)&&(Pe.undefined(B.command)||R.is(B.command))}s(Ie,"is"),z.is=Ie})(Hr||(e.CodeLens=Hr={}));var Rr;(function(z){function Ce(F,B){return{tabSize:F,insertSpaces:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&Pe.uinteger(B.tabSize)&&Pe.boolean(B.insertSpaces)}s(Ie,"is"),z.is=Ie})(Rr||(e.FormattingOptions=Rr={}));var on;(function(z){function Ce(F,B,Z){return{range:F,target:B,data:Z}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&c.is(B.range)&&(Pe.undefined(B.target)||Pe.string(B.target))}s(Ie,"is"),z.is=Ie})(on||(e.DocumentLink=on={}));var ve;(function(z){function Ce(F,B){return{range:F,parent:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&c.is(B.range)&&(B.parent===void 0||z.is(B.parent))}s(Ie,"is"),z.is=Ie})(ve||(e.SelectionRange=ve={}));var Ge;(function(z){z.namespace="namespace",z.type="type",z.class="class",z.enum="enum",z.interface="interface",z.struct="struct",z.typeParameter="typeParameter",z.parameter="parameter",z.variable="variable",z.property="property",z.enumMember="enumMember",z.event="event",z.function="function",z.method="method",z.macro="macro",z.keyword="keyword",z.modifier="modifier",z.comment="comment",z.string="string",z.number="number",z.regexp="regexp",z.operator="operator",z.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(z){z.declaration="declaration",z.definition="definition",z.readonly="readonly",z.static="static",z.deprecated="deprecated",z.abstract="abstract",z.async="async",z.modification="modification",z.documentation="documentation",z.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Tt;(function(z){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&(F.resultId===void 0||typeof F.resultId=="string")&&Array.isArray(F.data)&&(F.data.length===0||typeof F.data[0]=="number")}s(Ce,"is"),z.is=Ce})(Tt||(e.SemanticTokens=Tt={}));var nr;(function(z){function Ce(F,B){return{range:F,text:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B!=null&&c.is(B.range)&&Pe.string(B.text)}s(Ie,"is"),z.is=Ie})(nr||(e.InlineValueText=nr={}));var Xt;(function(z){function Ce(F,B,Z){return{range:F,variableName:B,caseSensitiveLookup:Z}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B!=null&&c.is(B.range)&&Pe.boolean(B.caseSensitiveLookup)&&(Pe.string(B.variableName)||B.variableName===void 0)}s(Ie,"is"),z.is=Ie})(Xt||(e.InlineValueVariableLookup=Xt={}));var br;(function(z){function Ce(F,B){return{range:F,expression:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return B!=null&&c.is(B.range)&&(Pe.string(B.expression)||B.expression===void 0)}s(Ie,"is"),z.is=Ie})(br||(e.InlineValueEvaluatableExpression=br={}));var cr;(function(z){function Ce(F,B){return{frameId:F,stoppedLocation:B}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.defined(B)&&c.is(F.stoppedLocation)}s(Ie,"is"),z.is=Ie})(cr||(e.InlineValueContext=cr={}));var er;(function(z){z.Type=1,z.Parameter=2;function Ce(Ie){return Ie===1||Ie===2}s(Ce,"is"),z.is=Ce})(er||(e.InlayHintKind=er={}));var ar;(function(z){function Ce(F){return{value:F}}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&(B.tooltip===void 0||Pe.string(B.tooltip)||Ae.is(B.tooltip))&&(B.location===void 0||l.is(B.location))&&(B.command===void 0||R.is(B.command))}s(Ie,"is"),z.is=Ie})(ar||(e.InlayHintLabelPart=ar={}));var tr;(function(z){function Ce(F,B,Z){var ge={position:F,label:B};return Z!==void 0&&(ge.kind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(F){var B=F;return Pe.objectLiteral(B)&&a.is(B.position)&&(Pe.string(B.label)||Pe.typedArray(B.label,ar.is))&&(B.kind===void 0||er.is(B.kind))&&B.textEdits===void 0||Pe.typedArray(B.textEdits,D.is)&&(B.tooltip===void 0||Pe.string(B.tooltip)||Ae.is(B.tooltip))&&(B.paddingLeft===void 0||Pe.boolean(B.paddingLeft))&&(B.paddingRight===void 0||Pe.boolean(B.paddingRight))}s(Ie,"is"),z.is=Ie})(tr||(e.InlayHint=tr={}));var Pr;(function(z){function Ce(Ie){return{kind:"snippet",value:Ie}}s(Ce,"createSnippet"),z.createSnippet=Ce})(Pr||(e.StringValue=Pr={}));var Wr;(function(z){function Ce(Ie,F,B,Z){return{insertText:Ie,filterText:F,range:B,command:Z}}s(Ce,"create"),z.create=Ce})(Wr||(e.InlineCompletionItem=Wr={}));var en;(function(z){function Ce(Ie){return{items:Ie}}s(Ce,"create"),z.create=Ce})(en||(e.InlineCompletionList=en={}));var gn;(function(z){z.Invoked=0,z.Automatic=1})(gn||(e.InlineCompletionTriggerKind=gn={}));var Zn;(function(z){function Ce(Ie,F){return{range:Ie,text:F}}s(Ce,"create"),z.create=Ce})(Zn||(e.SelectedCompletionInfo=Zn={}));var In;(function(z){function Ce(Ie,F){return{triggerKind:Ie,selectedCompletionInfo:F}}s(Ce,"create"),z.create=Ce})(In||(e.InlineCompletionContext=In={}));var Jn;(function(z){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&n.is(F.uri)&&Pe.string(F.name)}s(Ce,"is"),z.is=Ce})(Jn||(e.WorkspaceFolder=Jn={})),e.EOL=[`
`,`\r
`,"\r"];var tn;(function(z){function Ce(Z,ge,_e,ut){return new Vn(Z,ge,_e,ut)}s(Ce,"create"),z.create=Ce;function Ie(Z){var ge=Z;return!!(Pe.defined(ge)&&Pe.string(ge.uri)&&(Pe.undefined(ge.languageId)||Pe.string(ge.languageId))&&Pe.uinteger(ge.lineCount)&&Pe.func(ge.getText)&&Pe.func(ge.positionAt)&&Pe.func(ge.offsetAt))}s(Ie,"is"),z.is=Ie;function F(Z,ge){for(var _e=Z.getText(),ut=B(ge,function(Ar,si){var Ji=Ar.range.start.line-si.range.start.line;return Ji===0?Ar.range.start.character-si.range.start.character:Ji}),St=_e.length,zt=ut.length-1;zt>=0;zt--){var Zt=ut[zt],Yt=Z.offsetAt(Zt.range.start),xt=Z.offsetAt(Zt.range.end);if(xt<=St)_e=_e.substring(0,Yt)+Zt.newText+_e.substring(xt,_e.length);else throw new Error("Overlapping edit");St=Yt}return _e}s(F,"applyEdits"),z.applyEdits=F;function B(Z,ge){if(Z.length<=1)return Z;var _e=Z.length/2|0,ut=Z.slice(0,_e),St=Z.slice(_e);B(ut,ge),B(St,ge);for(var zt=0,Zt=0,Yt=0;zt<ut.length&&Zt<St.length;){var xt=ge(ut[zt],St[Zt]);xt<=0?Z[Yt++]=ut[zt++]:Z[Yt++]=St[Zt++]}for(;zt<ut.length;)Z[Yt++]=ut[zt++];for(;Zt<St.length;)Z[Yt++]=St[Zt++];return Z}s(B,"mergeSort")})(tn||(e.TextDocument=tn={}));var Vn=function(){function z(Ce,Ie,F,B){this._uri=Ce,this._languageId=Ie,this._version=F,this._content=B,this._lineOffsets=void 0}return s(z,"FullTextDocument"),Object.defineProperty(z.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),z.prototype.getText=function(Ce){if(Ce){var Ie=this.offsetAt(Ce.start),F=this.offsetAt(Ce.end);return this._content.substring(Ie,F)}return this._content},z.prototype.update=function(Ce,Ie){this._content=Ce.text,this._version=Ie,this._lineOffsets=void 0},z.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var Ce=[],Ie=this._content,F=!0,B=0;B<Ie.length;B++){F&&(Ce.push(B),F=!1);var Z=Ie.charAt(B);F=Z==="\r"||Z===`
`,Z==="\r"&&B+1<Ie.length&&Ie.charAt(B+1)===`
`&&B++}F&&Ie.length>0&&Ce.push(Ie.length),this._lineOffsets=Ce}return this._lineOffsets},z.prototype.positionAt=function(Ce){Ce=Math.max(Math.min(Ce,this._content.length),0);var Ie=this.getLineOffsets(),F=0,B=Ie.length;if(B===0)return a.create(0,Ce);for(;F<B;){var Z=Math.floor((F+B)/2);Ie[Z]>Ce?B=Z:F=Z+1}var ge=F-1;return a.create(ge,Ce-Ie[ge])},z.prototype.offsetAt=function(Ce){var Ie=this.getLineOffsets();if(Ce.line>=Ie.length)return this._content.length;if(Ce.line<0)return 0;var F=Ie[Ce.line],B=Ce.line+1<Ie.length?Ie[Ce.line+1]:this._content.length;return Math.max(Math.min(F+Ce.character,B),F)},Object.defineProperty(z.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),z}(),Pe;(function(z){var Ce=Object.prototype.toString;function Ie(xt){return typeof xt<"u"}s(Ie,"defined"),z.defined=Ie;function F(xt){return typeof xt>"u"}s(F,"undefined"),z.undefined=F;function B(xt){return xt===!0||xt===!1}s(B,"boolean"),z.boolean=B;function Z(xt){return Ce.call(xt)==="[object String]"}s(Z,"string"),z.string=Z;function ge(xt){return Ce.call(xt)==="[object Number]"}s(ge,"number"),z.number=ge;function _e(xt,Ar,si){return Ce.call(xt)==="[object Number]"&&Ar<=xt&&xt<=si}s(_e,"numberRange"),z.numberRange=_e;function ut(xt){return Ce.call(xt)==="[object Number]"&&-2147483648<=xt&&xt<=2147483647}s(ut,"integer"),z.integer=ut;function St(xt){return Ce.call(xt)==="[object Number]"&&0<=xt&&xt<=2147483647}s(St,"uinteger"),z.uinteger=St;function zt(xt){return Ce.call(xt)==="[object Function]"}s(zt,"func"),z.func=zt;function Zt(xt){return xt!==null&&typeof xt=="object"}s(Zt,"objectLiteral"),z.objectLiteral=Zt;function Yt(xt,Ar){return Array.isArray(xt)&&xt.every(Ar)}s(Yt,"typedArray"),z.typedArray=Yt})(Pe||(Pe={}))})});var Ca=q(qf=>{"use strict";f();Object.defineProperty(qf,"__esModule",{value:!0});qf.ProtocolNotificationType=qf.ProtocolNotificationType0=qf.ProtocolRequestType=qf.ProtocolRequestType0=qf.RegistrationType=qf.MessageDirection=void 0;var p4=l_(),y3e;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(y3e||(qf.MessageDirection=y3e={}));var $de=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};qf.RegistrationType=$de;var jde=class extends p4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};qf.ProtocolRequestType0=jde;var Gde=class extends p4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,p4.ParameterStructures.byName)}};qf.ProtocolRequestType=Gde;var Vde=class extends p4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};qf.ProtocolNotificationType0=Vde;var zde=class extends p4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,p4.ParameterStructures.byName)}};qf.ProtocolNotificationType=zde});var k$=q(Hc=>{"use strict";f();Object.defineProperty(Hc,"__esModule",{value:!0});Hc.objectLiteral=Hc.typedArray=Hc.stringArray=Hc.array=Hc.func=Hc.error=Hc.number=Hc.string=Hc.boolean=void 0;function o_t(t){return t===!0||t===!1}s(o_t,"boolean");Hc.boolean=o_t;function C3e(t){return typeof t=="string"||t instanceof String}s(C3e,"string");Hc.string=C3e;function s_t(t){return typeof t=="number"||t instanceof Number}s(s_t,"number");Hc.number=s_t;function a_t(t){return t instanceof Error}s(a_t,"error");Hc.error=a_t;function c_t(t){return typeof t=="function"}s(c_t,"func");Hc.func=c_t;function v3e(t){return Array.isArray(t)}s(v3e,"array");Hc.array=v3e;function l_t(t){return v3e(t)&&t.every(e=>C3e(e))}s(l_t,"stringArray");Hc.stringArray=l_t;function u_t(t,e){return Array.isArray(t)&&t.every(e)}s(u_t,"typedArray");Hc.typedArray=u_t;function d_t(t){return t!==null&&typeof t=="object"}s(d_t,"objectLiteral");Hc.objectLiteral=d_t});var b3e=q(P$=>{"use strict";f();Object.defineProperty(P$,"__esModule",{value:!0});P$.ImplementationRequest=void 0;var E3e=Ca(),x3e;(function(t){t.method="textDocument/implementation",t.messageDirection=E3e.MessageDirection.clientToServer,t.type=new E3e.ProtocolRequestType(t.method)})(x3e||(P$.ImplementationRequest=x3e={}))});var w3e=q(D$=>{"use strict";f();Object.defineProperty(D$,"__esModule",{value:!0});D$.TypeDefinitionRequest=void 0;var I3e=Ca(),T3e;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=I3e.MessageDirection.clientToServer,t.type=new I3e.ProtocolRequestType(t.method)})(T3e||(D$.TypeDefinitionRequest=T3e={}))});var R3e=q(m4=>{"use strict";f();Object.defineProperty(m4,"__esModule",{value:!0});m4.DidChangeWorkspaceFoldersNotification=m4.WorkspaceFoldersRequest=void 0;var B$=Ca(),S3e;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=B$.MessageDirection.serverToClient,t.type=new B$.ProtocolRequestType0(t.method)})(S3e||(m4.WorkspaceFoldersRequest=S3e={}));var _3e;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=B$.MessageDirection.clientToServer,t.type=new B$.ProtocolNotificationType(t.method)})(_3e||(m4.DidChangeWorkspaceFoldersNotification=_3e={}))});var D3e=q(N$=>{"use strict";f();Object.defineProperty(N$,"__esModule",{value:!0});N$.ConfigurationRequest=void 0;var k3e=Ca(),P3e;(function(t){t.method="workspace/configuration",t.messageDirection=k3e.MessageDirection.serverToClient,t.type=new k3e.ProtocolRequestType(t.method)})(P3e||(N$.ConfigurationRequest=P3e={}))});var L3e=q(h4=>{"use strict";f();Object.defineProperty(h4,"__esModule",{value:!0});h4.ColorPresentationRequest=h4.DocumentColorRequest=void 0;var L$=Ca(),B3e;(function(t){t.method="textDocument/documentColor",t.messageDirection=L$.MessageDirection.clientToServer,t.type=new L$.ProtocolRequestType(t.method)})(B3e||(h4.DocumentColorRequest=B3e={}));var N3e;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=L$.MessageDirection.clientToServer,t.type=new L$.ProtocolRequestType(t.method)})(N3e||(h4.ColorPresentationRequest=N3e={}))});var O3e=q(g4=>{"use strict";f();Object.defineProperty(g4,"__esModule",{value:!0});g4.FoldingRangeRefreshRequest=g4.FoldingRangeRequest=void 0;var M$=Ca(),M3e;(function(t){t.method="textDocument/foldingRange",t.messageDirection=M$.MessageDirection.clientToServer,t.type=new M$.ProtocolRequestType(t.method)})(M3e||(g4.FoldingRangeRequest=M3e={}));var F3e;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=M$.MessageDirection.serverToClient,t.type=new M$.ProtocolRequestType0(t.method)})(F3e||(g4.FoldingRangeRefreshRequest=F3e={}))});var q3e=q(F$=>{"use strict";f();Object.defineProperty(F$,"__esModule",{value:!0});F$.DeclarationRequest=void 0;var Q3e=Ca(),U3e;(function(t){t.method="textDocument/declaration",t.messageDirection=Q3e.MessageDirection.clientToServer,t.type=new Q3e.ProtocolRequestType(t.method)})(U3e||(F$.DeclarationRequest=U3e={}))});var $3e=q(O$=>{"use strict";f();Object.defineProperty(O$,"__esModule",{value:!0});O$.SelectionRangeRequest=void 0;var H3e=Ca(),W3e;(function(t){t.method="textDocument/selectionRange",t.messageDirection=H3e.MessageDirection.clientToServer,t.type=new H3e.ProtocolRequestType(t.method)})(W3e||(O$.SelectionRangeRequest=W3e={}))});var z3e=q(Kb=>{"use strict";f();Object.defineProperty(Kb,"__esModule",{value:!0});Kb.WorkDoneProgressCancelNotification=Kb.WorkDoneProgressCreateRequest=Kb.WorkDoneProgress=void 0;var f_t=l_(),Q$=Ca(),j3e;(function(t){t.type=new f_t.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(j3e||(Kb.WorkDoneProgress=j3e={}));var G3e;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Q$.MessageDirection.serverToClient,t.type=new Q$.ProtocolRequestType(t.method)})(G3e||(Kb.WorkDoneProgressCreateRequest=G3e={}));var V3e;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Q$.MessageDirection.clientToServer,t.type=new Q$.ProtocolNotificationType(t.method)})(V3e||(Kb.WorkDoneProgressCancelNotification=V3e={}))});var X3e=q(Jb=>{"use strict";f();Object.defineProperty(Jb,"__esModule",{value:!0});Jb.CallHierarchyOutgoingCallsRequest=Jb.CallHierarchyIncomingCallsRequest=Jb.CallHierarchyPrepareRequest=void 0;var A4=Ca(),Y3e;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(Y3e||(Jb.CallHierarchyPrepareRequest=Y3e={}));var K3e;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(K3e||(Jb.CallHierarchyIncomingCallsRequest=K3e={}));var J3e;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(J3e||(Jb.CallHierarchyOutgoingCallsRequest=J3e={}))});var iBe=q(Hf=>{"use strict";f();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.SemanticTokensRefreshRequest=Hf.SemanticTokensRangeRequest=Hf.SemanticTokensDeltaRequest=Hf.SemanticTokensRequest=Hf.SemanticTokensRegistrationType=Hf.TokenFormat=void 0;var mv=Ca(),Z3e;(function(t){t.Relative="relative"})(Z3e||(Hf.TokenFormat=Z3e={}));var MM;(function(t){t.method="textDocument/semanticTokens",t.type=new mv.RegistrationType(t.method)})(MM||(Hf.SemanticTokensRegistrationType=MM={}));var eBe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=mv.MessageDirection.clientToServer,t.type=new mv.ProtocolRequestType(t.method),t.registrationMethod=MM.method})(eBe||(Hf.SemanticTokensRequest=eBe={}));var tBe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=mv.MessageDirection.clientToServer,t.type=new mv.ProtocolRequestType(t.method),t.registrationMethod=MM.method})(tBe||(Hf.SemanticTokensDeltaRequest=tBe={}));var rBe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=mv.MessageDirection.clientToServer,t.type=new mv.ProtocolRequestType(t.method),t.registrationMethod=MM.method})(rBe||(Hf.SemanticTokensRangeRequest=rBe={}));var nBe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=mv.MessageDirection.serverToClient,t.type=new mv.ProtocolRequestType0(t.method)})(nBe||(Hf.SemanticTokensRefreshRequest=nBe={}))});var aBe=q(U$=>{"use strict";f();Object.defineProperty(U$,"__esModule",{value:!0});U$.ShowDocumentRequest=void 0;var oBe=Ca(),sBe;(function(t){t.method="window/showDocument",t.messageDirection=oBe.MessageDirection.serverToClient,t.type=new oBe.ProtocolRequestType(t.method)})(sBe||(U$.ShowDocumentRequest=sBe={}))});var uBe=q(q$=>{"use strict";f();Object.defineProperty(q$,"__esModule",{value:!0});q$.LinkedEditingRangeRequest=void 0;var cBe=Ca(),lBe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=cBe.MessageDirection.clientToServer,t.type=new cBe.ProtocolRequestType(t.method)})(lBe||(q$.LinkedEditingRangeRequest=lBe={}))});var yBe=q(md=>{"use strict";f();Object.defineProperty(md,"__esModule",{value:!0});md.WillDeleteFilesRequest=md.DidDeleteFilesNotification=md.DidRenameFilesNotification=md.WillRenameFilesRequest=md.DidCreateFilesNotification=md.WillCreateFilesRequest=md.FileOperationPatternKind=void 0;var bm=Ca(),dBe;(function(t){t.file="file",t.folder="folder"})(dBe||(md.FileOperationPatternKind=dBe={}));var fBe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolRequestType(t.method)})(fBe||(md.WillCreateFilesRequest=fBe={}));var pBe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolNotificationType(t.method)})(pBe||(md.DidCreateFilesNotification=pBe={}));var mBe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolRequestType(t.method)})(mBe||(md.WillRenameFilesRequest=mBe={}));var hBe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolNotificationType(t.method)})(hBe||(md.DidRenameFilesNotification=hBe={}));var gBe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolNotificationType(t.method)})(gBe||(md.DidDeleteFilesNotification=gBe={}));var ABe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolRequestType(t.method)})(ABe||(md.WillDeleteFilesRequest=ABe={}))});var bBe=q(Xb=>{"use strict";f();Object.defineProperty(Xb,"__esModule",{value:!0});Xb.MonikerRequest=Xb.MonikerKind=Xb.UniquenessLevel=void 0;var CBe=Ca(),vBe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(vBe||(Xb.UniquenessLevel=vBe={}));var EBe;(function(t){t.$import="import",t.$export="export",t.local="local"})(EBe||(Xb.MonikerKind=EBe={}));var xBe;(function(t){t.method="textDocument/moniker",t.messageDirection=CBe.MessageDirection.clientToServer,t.type=new CBe.ProtocolRequestType(t.method)})(xBe||(Xb.MonikerRequest=xBe={}))});var SBe=q(Zb=>{"use strict";f();Object.defineProperty(Zb,"__esModule",{value:!0});Zb.TypeHierarchySubtypesRequest=Zb.TypeHierarchySupertypesRequest=Zb.TypeHierarchyPrepareRequest=void 0;var y4=Ca(),IBe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(IBe||(Zb.TypeHierarchyPrepareRequest=IBe={}));var TBe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(TBe||(Zb.TypeHierarchySupertypesRequest=TBe={}));var wBe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(wBe||(Zb.TypeHierarchySubtypesRequest=wBe={}))});var kBe=q(C4=>{"use strict";f();Object.defineProperty(C4,"__esModule",{value:!0});C4.InlineValueRefreshRequest=C4.InlineValueRequest=void 0;var H$=Ca(),_Be;(function(t){t.method="textDocument/inlineValue",t.messageDirection=H$.MessageDirection.clientToServer,t.type=new H$.ProtocolRequestType(t.method)})(_Be||(C4.InlineValueRequest=_Be={}));var RBe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=H$.MessageDirection.serverToClient,t.type=new H$.ProtocolRequestType0(t.method)})(RBe||(C4.InlineValueRefreshRequest=RBe={}))});var NBe=q(eI=>{"use strict";f();Object.defineProperty(eI,"__esModule",{value:!0});eI.InlayHintRefreshRequest=eI.InlayHintResolveRequest=eI.InlayHintRequest=void 0;var v4=Ca(),PBe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=v4.MessageDirection.clientToServer,t.type=new v4.ProtocolRequestType(t.method)})(PBe||(eI.InlayHintRequest=PBe={}));var DBe;(function(t){t.method="inlayHint/resolve",t.messageDirection=v4.MessageDirection.clientToServer,t.type=new v4.ProtocolRequestType(t.method)})(DBe||(eI.InlayHintResolveRequest=DBe={}));var BBe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=v4.MessageDirection.serverToClient,t.type=new v4.ProtocolRequestType0(t.method)})(BBe||(eI.InlayHintRefreshRequest=BBe={}))});var qBe=q(Im=>{"use strict";f();Object.defineProperty(Im,"__esModule",{value:!0});Im.DiagnosticRefreshRequest=Im.WorkspaceDiagnosticRequest=Im.DocumentDiagnosticRequest=Im.DocumentDiagnosticReportKind=Im.DiagnosticServerCancellationData=void 0;var UBe=l_(),p_t=k$(),E4=Ca(),LBe;(function(t){function e(r){let n=r;return n&&p_t.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(LBe||(Im.DiagnosticServerCancellationData=LBe={}));var MBe;(function(t){t.Full="full",t.Unchanged="unchanged"})(MBe||(Im.DocumentDiagnosticReportKind=MBe={}));var FBe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=E4.MessageDirection.clientToServer,t.type=new E4.ProtocolRequestType(t.method),t.partialResult=new UBe.ProgressType})(FBe||(Im.DocumentDiagnosticRequest=FBe={}));var OBe;(function(t){t.method="workspace/diagnostic",t.messageDirection=E4.MessageDirection.clientToServer,t.type=new E4.ProtocolRequestType(t.method),t.partialResult=new UBe.ProgressType})(OBe||(Im.WorkspaceDiagnosticRequest=OBe={}));var QBe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=E4.MessageDirection.serverToClient,t.type=new E4.ProtocolRequestType0(t.method)})(QBe||(Im.DiagnosticRefreshRequest=QBe={}))});var zBe=q(ja=>{"use strict";f();Object.defineProperty(ja,"__esModule",{value:!0});ja.DidCloseNotebookDocumentNotification=ja.DidSaveNotebookDocumentNotification=ja.DidChangeNotebookDocumentNotification=ja.NotebookCellArrayChange=ja.DidOpenNotebookDocumentNotification=ja.NotebookDocumentSyncRegistrationType=ja.NotebookDocument=ja.NotebookCell=ja.ExecutionSummary=ja.NotebookCellKind=void 0;var FM=R$(),Bg=k$(),Dy=Ca(),Yde;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Yde||(ja.NotebookCellKind=Yde={}));var Kde;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return Bg.objectLiteral(o)&&FM.uinteger.is(o.executionOrder)&&(o.success===void 0||Bg.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Kde||(ja.ExecutionSummary=Kde={}));var W$;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return Bg.objectLiteral(a)&&Yde.is(a.kind)&&FM.DocumentUri.is(a.document)&&(a.metadata===void 0||Bg.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Kde.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Bg.objectLiteral(o)&&Bg.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(W$||(ja.NotebookCell=W$={}));var HBe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Bg.objectLiteral(i)&&Bg.string(i.uri)&&FM.integer.is(i.version)&&Bg.typedArray(i.cells,W$.is)}s(r,"is"),t.is=r})(HBe||(ja.NotebookDocument=HBe={}));var x4;(function(t){t.method="notebookDocument/sync",t.messageDirection=Dy.MessageDirection.clientToServer,t.type=new Dy.RegistrationType(t.method)})(x4||(ja.NotebookDocumentSyncRegistrationType=x4={}));var WBe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Dy.MessageDirection.clientToServer,t.type=new Dy.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(WBe||(ja.DidOpenNotebookDocumentNotification=WBe={}));var $Be;(function(t){function e(n){let i=n;return Bg.objectLiteral(i)&&FM.uinteger.is(i.start)&&FM.uinteger.is(i.deleteCount)&&(i.cells===void 0||Bg.typedArray(i.cells,W$.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})($Be||(ja.NotebookCellArrayChange=$Be={}));var jBe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Dy.MessageDirection.clientToServer,t.type=new Dy.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(jBe||(ja.DidChangeNotebookDocumentNotification=jBe={}));var GBe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Dy.MessageDirection.clientToServer,t.type=new Dy.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(GBe||(ja.DidSaveNotebookDocumentNotification=GBe={}));var VBe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Dy.MessageDirection.clientToServer,t.type=new Dy.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(VBe||(ja.DidCloseNotebookDocumentNotification=VBe={}))});var JBe=q($$=>{"use strict";f();Object.defineProperty($$,"__esModule",{value:!0});$$.InlineCompletionRequest=void 0;var YBe=Ca(),KBe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=YBe.MessageDirection.clientToServer,t.type=new YBe.ProtocolRequestType(t.method)})(KBe||($$.InlineCompletionRequest=KBe={}))});var u8e=q(be=>{"use strict";f();Object.defineProperty(be,"__esModule",{value:!0});be.WorkspaceSymbolRequest=be.CodeActionResolveRequest=be.CodeActionRequest=be.DocumentSymbolRequest=be.DocumentHighlightRequest=be.ReferencesRequest=be.DefinitionRequest=be.SignatureHelpRequest=be.SignatureHelpTriggerKind=be.HoverRequest=be.CompletionResolveRequest=be.CompletionRequest=be.CompletionTriggerKind=be.PublishDiagnosticsNotification=be.WatchKind=be.RelativePattern=be.FileChangeType=be.DidChangeWatchedFilesNotification=be.WillSaveTextDocumentWaitUntilRequest=be.WillSaveTextDocumentNotification=be.TextDocumentSaveReason=be.DidSaveTextDocumentNotification=be.DidCloseTextDocumentNotification=be.DidChangeTextDocumentNotification=be.TextDocumentContentChangeEvent=be.DidOpenTextDocumentNotification=be.TextDocumentSyncKind=be.TelemetryEventNotification=be.LogMessageNotification=be.ShowMessageRequest=be.ShowMessageNotification=be.MessageType=be.DidChangeConfigurationNotification=be.ExitNotification=be.ShutdownRequest=be.InitializedNotification=be.InitializeErrorCodes=be.InitializeRequest=be.WorkDoneProgressOptions=be.TextDocumentRegistrationOptions=be.StaticRegistrationOptions=be.PositionEncodingKind=be.FailureHandlingKind=be.ResourceOperationKind=be.UnregistrationRequest=be.RegistrationRequest=be.DocumentSelector=be.NotebookCellTextDocumentFilter=be.NotebookDocumentFilter=be.TextDocumentFilter=void 0;be.MonikerRequest=be.MonikerKind=be.UniquenessLevel=be.WillDeleteFilesRequest=be.DidDeleteFilesNotification=be.WillRenameFilesRequest=be.DidRenameFilesNotification=be.WillCreateFilesRequest=be.DidCreateFilesNotification=be.FileOperationPatternKind=be.LinkedEditingRangeRequest=be.ShowDocumentRequest=be.SemanticTokensRegistrationType=be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.TokenFormat=be.CallHierarchyPrepareRequest=be.CallHierarchyOutgoingCallsRequest=be.CallHierarchyIncomingCallsRequest=be.WorkDoneProgressCancelNotification=be.WorkDoneProgressCreateRequest=be.WorkDoneProgress=be.SelectionRangeRequest=be.DeclarationRequest=be.FoldingRangeRefreshRequest=be.FoldingRangeRequest=be.ColorPresentationRequest=be.DocumentColorRequest=be.ConfigurationRequest=be.DidChangeWorkspaceFoldersNotification=be.WorkspaceFoldersRequest=be.TypeDefinitionRequest=be.ImplementationRequest=be.ApplyWorkspaceEditRequest=be.ExecuteCommandRequest=be.PrepareRenameRequest=be.RenameRequest=be.PrepareSupportDefaultBehavior=be.DocumentOnTypeFormattingRequest=be.DocumentRangesFormattingRequest=be.DocumentRangeFormattingRequest=be.DocumentFormattingRequest=be.DocumentLinkResolveRequest=be.DocumentLinkRequest=be.CodeLensRefreshRequest=be.CodeLensResolveRequest=be.CodeLensRequest=be.WorkspaceSymbolResolveRequest=void 0;be.InlineCompletionRequest=be.DidCloseNotebookDocumentNotification=be.DidSaveNotebookDocumentNotification=be.DidChangeNotebookDocumentNotification=be.NotebookCellArrayChange=be.DidOpenNotebookDocumentNotification=be.NotebookDocumentSyncRegistrationType=be.NotebookDocument=be.NotebookCell=be.ExecutionSummary=be.NotebookCellKind=be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=be.InlayHintRefreshRequest=be.InlayHintResolveRequest=be.InlayHintRequest=be.InlineValueRefreshRequest=be.InlineValueRequest=be.TypeHierarchySupertypesRequest=be.TypeHierarchySubtypesRequest=be.TypeHierarchyPrepareRequest=void 0;var $t=Ca(),XBe=R$(),$l=k$(),m_t=b3e();Object.defineProperty(be,"ImplementationRequest",{enumerable:!0,get:s(function(){return m_t.ImplementationRequest},"get")});var h_t=w3e();Object.defineProperty(be,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return h_t.TypeDefinitionRequest},"get")});var s8e=R3e();Object.defineProperty(be,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return s8e.WorkspaceFoldersRequest},"get")});Object.defineProperty(be,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return s8e.DidChangeWorkspaceFoldersNotification},"get")});var g_t=D3e();Object.defineProperty(be,"ConfigurationRequest",{enumerable:!0,get:s(function(){return g_t.ConfigurationRequest},"get")});var a8e=L3e();Object.defineProperty(be,"DocumentColorRequest",{enumerable:!0,get:s(function(){return a8e.DocumentColorRequest},"get")});Object.defineProperty(be,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return a8e.ColorPresentationRequest},"get")});var c8e=O3e();Object.defineProperty(be,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return c8e.FoldingRangeRequest},"get")});Object.defineProperty(be,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return c8e.FoldingRangeRefreshRequest},"get")});var A_t=q3e();Object.defineProperty(be,"DeclarationRequest",{enumerable:!0,get:s(function(){return A_t.DeclarationRequest},"get")});var y_t=$3e();Object.defineProperty(be,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return y_t.SelectionRangeRequest},"get")});var tfe=z3e();Object.defineProperty(be,"WorkDoneProgress",{enumerable:!0,get:s(function(){return tfe.WorkDoneProgress},"get")});Object.defineProperty(be,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return tfe.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(be,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return tfe.WorkDoneProgressCancelNotification},"get")});var rfe=X3e();Object.defineProperty(be,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return rfe.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return rfe.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return rfe.CallHierarchyPrepareRequest},"get")});var b4=iBe();Object.defineProperty(be,"TokenFormat",{enumerable:!0,get:s(function(){return b4.TokenFormat},"get")});Object.defineProperty(be,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRequest},"get")});Object.defineProperty(be,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensDeltaRequest},"get")});Object.defineProperty(be,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRangeRequest},"get")});Object.defineProperty(be,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRefreshRequest},"get")});Object.defineProperty(be,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return b4.SemanticTokensRegistrationType},"get")});var C_t=aBe();Object.defineProperty(be,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return C_t.ShowDocumentRequest},"get")});var v_t=uBe();Object.defineProperty(be,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return v_t.LinkedEditingRangeRequest},"get")});var u_=yBe();Object.defineProperty(be,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return u_.FileOperationPatternKind},"get")});Object.defineProperty(be,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return u_.DidCreateFilesNotification},"get")});Object.defineProperty(be,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return u_.WillCreateFilesRequest},"get")});Object.defineProperty(be,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return u_.DidRenameFilesNotification},"get")});Object.defineProperty(be,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return u_.WillRenameFilesRequest},"get")});Object.defineProperty(be,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return u_.DidDeleteFilesNotification},"get")});Object.defineProperty(be,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return u_.WillDeleteFilesRequest},"get")});var nfe=bBe();Object.defineProperty(be,"UniquenessLevel",{enumerable:!0,get:s(function(){return nfe.UniquenessLevel},"get")});Object.defineProperty(be,"MonikerKind",{enumerable:!0,get:s(function(){return nfe.MonikerKind},"get")});Object.defineProperty(be,"MonikerRequest",{enumerable:!0,get:s(function(){return nfe.MonikerRequest},"get")});var ife=SBe();Object.defineProperty(be,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return ife.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(be,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return ife.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(be,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return ife.TypeHierarchySupertypesRequest},"get")});var l8e=kBe();Object.defineProperty(be,"InlineValueRequest",{enumerable:!0,get:s(function(){return l8e.InlineValueRequest},"get")});Object.defineProperty(be,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return l8e.InlineValueRefreshRequest},"get")});var ofe=NBe();Object.defineProperty(be,"InlayHintRequest",{enumerable:!0,get:s(function(){return ofe.InlayHintRequest},"get")});Object.defineProperty(be,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return ofe.InlayHintResolveRequest},"get")});Object.defineProperty(be,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return ofe.InlayHintRefreshRequest},"get")});var OM=qBe();Object.defineProperty(be,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return OM.DiagnosticServerCancellationData},"get")});Object.defineProperty(be,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return OM.DocumentDiagnosticReportKind},"get")});Object.defineProperty(be,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return OM.DocumentDiagnosticRequest},"get")});Object.defineProperty(be,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return OM.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(be,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return OM.DiagnosticRefreshRequest},"get")});var By=zBe();Object.defineProperty(be,"NotebookCellKind",{enumerable:!0,get:s(function(){return By.NotebookCellKind},"get")});Object.defineProperty(be,"ExecutionSummary",{enumerable:!0,get:s(function(){return By.ExecutionSummary},"get")});Object.defineProperty(be,"NotebookCell",{enumerable:!0,get:s(function(){return By.NotebookCell},"get")});Object.defineProperty(be,"NotebookDocument",{enumerable:!0,get:s(function(){return By.NotebookDocument},"get")});Object.defineProperty(be,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return By.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(be,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return By.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(be,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return By.NotebookCellArrayChange},"get")});Object.defineProperty(be,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return By.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return By.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return By.DidCloseNotebookDocumentNotification},"get")});var E_t=JBe();Object.defineProperty(be,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return E_t.InlineCompletionRequest},"get")});var Jde;(function(t){function e(r){let n=r;return $l.string(n)||$l.string(n.language)||$l.string(n.scheme)||$l.string(n.pattern)}s(e,"is"),t.is=e})(Jde||(be.TextDocumentFilter=Jde={}));var Xde;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&($l.string(n.notebookType)||$l.string(n.scheme)||$l.string(n.pattern))}s(e,"is"),t.is=e})(Xde||(be.NotebookDocumentFilter=Xde={}));var Zde;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&($l.string(n.notebook)||Xde.is(n.notebook))&&(n.language===void 0||$l.string(n.language))}s(e,"is"),t.is=e})(Zde||(be.NotebookCellTextDocumentFilter=Zde={}));var efe;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!$l.string(n)&&!Jde.is(n)&&!Zde.is(n))return!1;return!0}s(e,"is"),t.is=e})(efe||(be.DocumentSelector=efe={}));var ZBe;(function(t){t.method="client/registerCapability",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(ZBe||(be.RegistrationRequest=ZBe={}));var eNe;(function(t){t.method="client/unregisterCapability",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(eNe||(be.UnregistrationRequest=eNe={}));var tNe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(tNe||(be.ResourceOperationKind=tNe={}));var rNe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(rNe||(be.FailureHandlingKind=rNe={}));var nNe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(nNe||(be.PositionEncodingKind=nNe={}));var iNe;(function(t){function e(r){let n=r;return n&&$l.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(iNe||(be.StaticRegistrationOptions=iNe={}));var oNe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||efe.is(n.documentSelector))}s(e,"is"),t.is=e})(oNe||(be.TextDocumentRegistrationOptions=oNe={}));var sNe;(function(t){function e(n){let i=n;return $l.objectLiteral(i)&&(i.workDoneProgress===void 0||$l.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&$l.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(sNe||(be.WorkDoneProgressOptions=sNe={}));var aNe;(function(t){t.method="initialize",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(aNe||(be.InitializeRequest=aNe={}));var cNe;(function(t){t.unknownProtocolVersion=1})(cNe||(be.InitializeErrorCodes=cNe={}));var lNe;(function(t){t.method="initialized",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(lNe||(be.InitializedNotification=lNe={}));var uNe;(function(t){t.method="shutdown",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType0(t.method)})(uNe||(be.ShutdownRequest=uNe={}));var dNe;(function(t){t.method="exit",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType0(t.method)})(dNe||(be.ExitNotification=dNe={}));var fNe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(fNe||(be.DidChangeConfigurationNotification=fNe={}));var pNe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(pNe||(be.MessageType=pNe={}));var mNe;(function(t){t.method="window/showMessage",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(mNe||(be.ShowMessageNotification=mNe={}));var hNe;(function(t){t.method="window/showMessageRequest",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(hNe||(be.ShowMessageRequest=hNe={}));var gNe;(function(t){t.method="window/logMessage",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(gNe||(be.LogMessageNotification=gNe={}));var ANe;(function(t){t.method="telemetry/event",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(ANe||(be.TelemetryEventNotification=ANe={}));var yNe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(yNe||(be.TextDocumentSyncKind=yNe={}));var CNe;(function(t){t.method="textDocument/didOpen",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(CNe||(be.DidOpenTextDocumentNotification=CNe={}));var vNe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(vNe||(be.TextDocumentContentChangeEvent=vNe={}));var ENe;(function(t){t.method="textDocument/didChange",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(ENe||(be.DidChangeTextDocumentNotification=ENe={}));var xNe;(function(t){t.method="textDocument/didClose",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(xNe||(be.DidCloseTextDocumentNotification=xNe={}));var bNe;(function(t){t.method="textDocument/didSave",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(bNe||(be.DidSaveTextDocumentNotification=bNe={}));var INe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(INe||(be.TextDocumentSaveReason=INe={}));var TNe;(function(t){t.method="textDocument/willSave",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(TNe||(be.WillSaveTextDocumentNotification=TNe={}));var wNe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(wNe||(be.WillSaveTextDocumentWaitUntilRequest=wNe={}));var SNe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(SNe||(be.DidChangeWatchedFilesNotification=SNe={}));var _Ne;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(_Ne||(be.FileChangeType=_Ne={}));var RNe;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&(XBe.URI.is(n.baseUri)||XBe.WorkspaceFolder.is(n.baseUri))&&$l.string(n.pattern)}s(e,"is"),t.is=e})(RNe||(be.RelativePattern=RNe={}));var kNe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(kNe||(be.WatchKind=kNe={}));var PNe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(PNe||(be.PublishDiagnosticsNotification=PNe={}));var DNe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(DNe||(be.CompletionTriggerKind=DNe={}));var BNe;(function(t){t.method="textDocument/completion",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(BNe||(be.CompletionRequest=BNe={}));var NNe;(function(t){t.method="completionItem/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(NNe||(be.CompletionResolveRequest=NNe={}));var LNe;(function(t){t.method="textDocument/hover",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(LNe||(be.HoverRequest=LNe={}));var MNe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(MNe||(be.SignatureHelpTriggerKind=MNe={}));var FNe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(FNe||(be.SignatureHelpRequest=FNe={}));var ONe;(function(t){t.method="textDocument/definition",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(ONe||(be.DefinitionRequest=ONe={}));var QNe;(function(t){t.method="textDocument/references",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(QNe||(be.ReferencesRequest=QNe={}));var UNe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(UNe||(be.DocumentHighlightRequest=UNe={}));var qNe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(qNe||(be.DocumentSymbolRequest=qNe={}));var HNe;(function(t){t.method="textDocument/codeAction",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(HNe||(be.CodeActionRequest=HNe={}));var WNe;(function(t){t.method="codeAction/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(WNe||(be.CodeActionResolveRequest=WNe={}));var $Ne;(function(t){t.method="workspace/symbol",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})($Ne||(be.WorkspaceSymbolRequest=$Ne={}));var jNe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(jNe||(be.WorkspaceSymbolResolveRequest=jNe={}));var GNe;(function(t){t.method="textDocument/codeLens",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(GNe||(be.CodeLensRequest=GNe={}));var VNe;(function(t){t.method="codeLens/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(VNe||(be.CodeLensResolveRequest=VNe={}));var zNe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType0(t.method)})(zNe||(be.CodeLensRefreshRequest=zNe={}));var YNe;(function(t){t.method="textDocument/documentLink",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(YNe||(be.DocumentLinkRequest=YNe={}));var KNe;(function(t){t.method="documentLink/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(KNe||(be.DocumentLinkResolveRequest=KNe={}));var JNe;(function(t){t.method="textDocument/formatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(JNe||(be.DocumentFormattingRequest=JNe={}));var XNe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(XNe||(be.DocumentRangeFormattingRequest=XNe={}));var ZNe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(ZNe||(be.DocumentRangesFormattingRequest=ZNe={}));var e8e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(e8e||(be.DocumentOnTypeFormattingRequest=e8e={}));var t8e;(function(t){t.Identifier=1})(t8e||(be.PrepareSupportDefaultBehavior=t8e={}));var r8e;(function(t){t.method="textDocument/rename",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(r8e||(be.RenameRequest=r8e={}));var n8e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(n8e||(be.PrepareRenameRequest=n8e={}));var i8e;(function(t){t.method="workspace/executeCommand",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(i8e||(be.ExecuteCommandRequest=i8e={}));var o8e;(function(t){t.method="workspace/applyEdit",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType("workspace/applyEdit")})(o8e||(be.ApplyWorkspaceEditRequest=o8e={}))});var f8e=q(j$=>{"use strict";f();Object.defineProperty(j$,"__esModule",{value:!0});j$.createProtocolConnection=void 0;var d8e=l_();function x_t(t,e,r,n){return d8e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,d8e.createMessageConnection)(t,e,r,n)}s(x_t,"createProtocolConnection");j$.createProtocolConnection=x_t});var m8e=q(Wf=>{"use strict";f();var b_t=Wf&&Wf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),G$=Wf&&Wf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&b_t(e,t,r)};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.LSPErrorCodes=Wf.createProtocolConnection=void 0;G$(l_(),Wf);G$(R$(),Wf);G$(Ca(),Wf);G$(u8e(),Wf);var I_t=f8e();Object.defineProperty(Wf,"createProtocolConnection",{enumerable:!0,get:s(function(){return I_t.createProtocolConnection},"get")});var p8e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(p8e||(Wf.LSPErrorCodes=p8e={}))});var di=q(Ny=>{"use strict";f();var T_t=Ny&&Ny.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h8e=Ny&&Ny.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&T_t(e,t,r)};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.createProtocolConnection=void 0;var w_t=Wde();h8e(Wde(),Ny);h8e(m8e(),Ny);function S_t(t,e,r,n){return(0,w_t.createMessageConnection)(t,e,r,n)}s(S_t,"createProtocolConnection");Ny.createProtocolConnection=S_t});var iLe=q((sj,nLe)=>{f();(function(t,e){typeof sj=="object"&&typeof nLe<"u"?e(sj):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(sj,function(t){"use strict";function e(S,P){return S||P}s(e,"_pureAssign");function r(S,P){return S[P]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),w=r(b,l),R=e(String),D=r(R,l),N=e(Math),O=e(Array),Y=r(O,l),ee=r(Y,"slice");function V(S,P){try{return{v:S.apply(this,P)}}catch(L){return{e:L}}}s(V,"safe");function H(S){return function(P){return typeof P===S}}s(H,"_createIs");function U(S){var P="[object "+S+"]";return function(L){return!!(L&&X(L)===P)}}s(U,"_createObjIs");function X(S){return w[E].call(S)}s(X,"objToString");function K(S){return typeof S===d||S===d}s(K,"isUndefined");function j(S){return!J(S)}s(j,"isStrictUndefined");function W(S){return S===i||K(S)}s(W,"isNullOrUndefined");function J(S){return!!S||S!==n}s(J,"isDefined");var ie=H("string"),ae=H(a);function te(S){return!S&&W(S)?!1:!!S&&typeof S===c}s(te,"isObject");var pe=r(O,"isArray"),Ae=U("Error"),Oe=r(b,"getOwnPropertyDescriptor");function Te(S,P){return!!S&&w.hasOwnProperty[y](S,P)}s(Te,"objHasOwnProperty");var Je=e(r(b,"hasOwn"),Me);function Me(S,P){return Te(S,P)||!!Oe(S,P)}s(Me,"polyObjHasOwn");function lt(S,P,L){if(S&&te(S)){for(var $ in S)if(Je(S,$)&&P[y](L||S,$,S[$])===-1)break}}s(lt,"objForEachKey");var _t={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function vt(S){var P={};if(P[_t.c]=!0,P[_t.e]=!0,S.l){P.get=function(){return S.l.v};var L=Oe(S.l,"v");L&&L.set&&(P.set=function($){S.l.v=$})}return lt(S,function($,de){P[_t[$]]=j(de)?P[_t[$]]:de}),P}s(vt,"_createProp");var ht=r(b,"defineProperty");function ue(S,P,L){return ht(S,P,vt(L))}s(ue,"objDefine");function Ue(S,P,L,$,de){var we={};return lt(S,function(ke,$e){ye(we,ke,P?$e:ke),ye(we,$e,L?$e:ke)}),$?$(we):we}s(Ue,"_createKeyValueMap");function ye(S,P,L,$){ht(S,P,{value:L,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var We=e(R),se="[object Error]";function le(S,P){var L=o,$=w[E][y](S);$===se&&(S={stack:We(S.stack),message:We(S.message),name:We(S.name)});try{L=JSON.stringify(S,i,P?typeof P=="number"?P:4:n),L=(L?L.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||We(S)}catch(de){L=" - "+le(de,P)}return $+": "+L}s(le,"dumpObj");function qe(S){throw new Error(S)}s(qe,"throwError");function Be(S){throw new TypeError(S)}s(Be,"throwTypeError");var xe=r(b,"freeze");function je(S){return S}s(je,"_doNothing");function et(S){return S[u]||i}s(et,"_getProto");var pt=r(b,"assign"),Mt=r(b,"keys"),Kt=e(xe,je),Ot=e(r(b,"getPrototypeOf"),et);function Hr(S){return Ue(S,1,0,Kt)}s(Hr,"createEnum");function Rr(S){var P={};return lt(S,function(L,$){ye(P,L,$[1]),ye(P,$[0],$[1])}),Kt(P)}s(Rr,"createSimpleMap");function on(S){return Rr(S)}s(on,"createTypeMap");var ve="__tsUtils$gblCfg",Ge;function ft(){var S;return typeof globalThis!==d&&(S=globalThis),!S&&typeof self!==d&&(S=self),!S&&typeof window!==d&&(S=window),!S&&typeof global!==d&&(S=global),S}s(ft,"_getGlobalValue");function Tt(){if(!Ge){var S=V(ft).v||{};Ge=S[ve]=S[ve]||{}}return Ge}s(Tt,"_getGlobalConfig");var nr=Xt;function Xt(S,P,L){var $=P?P[S]:i;return function(de){var we=(de?de[S]:i)||$;if(we||L){var ke=arguments;return(we||L).apply(de,we?ee[y](ke,1):ke)}Be('"'+We(S)+'" not defined for '+le(de))}}s(Xt,"_unwrapFunctionWithPoly");var br=r(N,"min"),cr=r(N,"max"),er=nr("slice",D),ar=nr("substring",D),tr=Xt("substr",D,Pr);function Pr(S,P,L){return W(S)&&Be("Invalid "+le(S)),L<0?o:(P=P||0,P<0&&(P=cr(P+S[g],0)),K(L)?er(S,P):er(S,P,P+L))}s(Pr,"polyStrSubstr");function Wr(S,P){return ar(S,0,P)}s(Wr,"strLeft");var en="_urid",gn;function Zn(){if(!gn){var S=Tt();gn=S.gblSym=S.gblSym||{k:{},s:{}}}return gn}s(Zn,"_globalSymbolRegistry");function In(S){var P={description:We(S),toString:s(function(){return m+"("+S+")"},"toString")};return P[h]=!0,P}s(In,"polyNewSymbol");function Jn(S){var P=Zn();if(!Je(P.k,S)){var L=In(S),$=Mt(P.s).length;L[en]=function(){return $+"_"+L[E]()},P.k[S]=L,P.s[L[en]()]=We(S)}return P.k[S]}s(Jn,"polySymbolFor");var tn;function Vn(){tn=Tt()}s(Vn,"_initTestHooks");function Pe(S){return ht({toJSON:s(function(){return S},"toJSON")},"v",{value:S})}s(Pe,"createCachedValue");var z="window",Ce;function Ie(S,P){var L;return function(){return!tn&&Vn(),(!L||tn.lzy)&&(L=Pe(V(S,P).v)),L.v}}s(Ie,"_getGlobalInstFn");function F(S){return!tn&&Vn(),(!Ce||S===!1||tn.lzy)&&(Ce=Pe(V(ft).v||i)),Ce.v}s(F,"getGlobal");function B(S,P){var L;if(!Ce||P===!1?L=F(P):L=Ce.v,L&&L[S])return L[S];if(S===z)try{return window}catch{}return i}s(B,"getInst");var Z=Ie(B,["document"]);function ge(){return!!_e()}s(ge,"hasWindow");var _e=Ie(B,[z]);function ut(){return!!St()}s(ut,"hasNavigator");var St=Ie(B,["navigator"]),zt,Zt;function Yt(){return zt=Pe(V(B,[m]).v),zt}s(Yt,"_initSymbol");function xt(S){var P=(tn.lzy?0:zt)||Yt();return P.v?P.v[S]:n}s(xt,"_getSymbolKey");function Ar(S,P){!tn&&Vn();var L=(tn.lzy?0:zt)||Yt();return L.v?L.v(S):P?i:In(S)}s(Ar,"newSymbol");function si(S){return!tn&&Vn(),Zt=(tn.lzy?0:Zt)||Pe(V(xt,["for"]).v),(Zt.v||Jn)(S)}s(si,"symbolFor");function Ji(S,P,L){return S.apply(P,L)}s(Ji,"fnApply");function xn(S,P,L){if(S)for(var $=S[g]>>>0,de=0;de<$&&!(de in S&&P[y](L||S,S[de],de,S)===-1);de++);}s(xn,"arrForEach");var uo=nr("indexOf",Y),gi=nr("map",Y),Vo=nr("reduce",Y),ua=e(r(b,"create"),cc);function cc(S){if(!S)return{};var P=typeof S;P!==c&&P!==a&&Be("Prototype must be an Object or function: "+le(S));function L(){}return s(L,"tempFunc"),L[l]=S,new L}s(cc,"polyObjCreate");var ko;function Qs(S,P){var L=b.setPrototypeOf||function($,de){var we;!ko&&(ko=Pe((we={},we[u]=[],we instanceof Array))),ko.v?$[u]=de:lt(de,function(ke,$e){return $[ke]=$e})};return L(S,P)}s(Qs,"objSetPrototypeOf");function Xu(S,P,L){V(ue,[P,A,{v:S,c:!0,e:!1}]),P=Qs(P,L);function $(){this[p]=P,V(ue,[this,A,{v:S,c:!0,e:!1}])}return s($,"__"),P[l]=L===i?ua(L):($[l]=L[l],new $),P}s(Xu,"_createCustomError");function lc(S,P){P&&(S[A]=P)}s(lc,"_setName");function Vh(S,P,L){var $=L||Error,de=$[l][A],we=Error.captureStackTrace;return Xu(S,function(){var ke=this,$e=arguments;try{V(lc,[$,S]);var it=Ji($,ke,ee[y]($e))||ke;if(it!==ke){var Et=Ot(ke);Et!==Ot(it)&&Qs(it,Et)}return we&&we(it,ke[p]),P&&P(it,$e),it}finally{V(lc,[$,de])}},$)}s(Vh,"createCustomError");function ll(){return(Date.now||zh)()}s(ll,"utcNow");function zh(){return new Date().getTime()}s(zh,"polyUtcNow");function Yh(S){return s(function(L){return W(L)&&Be("strTrim called ["+le(L)+"]"),L&&L.replace&&(L=L.replace(S,o)),L},"_doTrim")}s(Yh,"_createTrimFn");var mx=Yh(/^\s+|(?=\s)\s+$/g),Sa=Xt("trim",D,mx),du=r(N,"floor"),fu,Zu,Kh;function Nl(S){if(!S||typeof S!==c)return!1;Kh||(Kh=ge()?_e():!0);var P=!1;if(S!==Kh){Zu||(fu=Function[l][E],Zu=fu[y](b));try{var L=Ot(S);P=!L,P||(Te(L,p)&&(L=L[p]),P=!!(L&&typeof L===a&&fu[y](L)===Zu))}catch{}}return P}s(Nl,"isPlainObject");var hx;function w1(){return!tn&&Vn(),(!hx||tn.lzy)&&(hx=Pe(V(B,["performance"]).v)),hx.v}s(w1,"getPerformance");var gx=r(N,"round"),If=Xt("endsWith",D,Tf);function Tf(S,P,L){ie(S)||Be("'"+le(S)+"' is not a string");var $=ie(P)?P:We(P),de=!K(L)&&L<S[g]?L:S[g];return ar(S,de-$[g],de)===$}s(Tf,"polyStrEndsWith");var $r=nr("indexOf",D),uc="ref",Jh="unref",Xh="hasRef",L8="enabled";function Dc(S,P,L){var $=!0,de=S?P(i):i,we;function ke(){return $=!1,de&&de[Jh]&&de[Jh](),we}s(ke,"_unref");function $e(){de&&L(de),de=i}s($e,"_cancel");function it(){return de=P(de),$||ke(),we}s(it,"_refresh");function Et(mr){!mr&&de&&$e(),mr&&!de&&it()}return s(Et,"_setEnabled"),we={cancel:$e,refresh:it},we[Xh]=function(){return de&&de[Xh]?de[Xh]():$},we[uc]=function(){return $=!0,de&&de[uc]&&de[uc](),we},we[Jh]=ke,we=ht(we,L8,{get:s(function(){return!!de},"get"),set:Et}),{h:we,dn:s(function(){de=i},"dn")}}s(Dc,"_createTimerHandler");function VA(S,P,L){var $=pe(P),de=$?P.length:0,we=(de>0?P[0]:$?n:P)||setTimeout,ke=(de>1?P[1]:n)||clearTimeout,$e=L[0];L[0]=function(){it.dn(),Ji($e,n,ee[y](arguments))};var it=Dc(S,function(Et){if(Et){if(Et.refresh)return Et.refresh(),Et;Ji(ke,n,[Et])}return Ji(we,n,L)},function(Et){Ji(ke,n,[Et])});return it.h}s(VA,"_createTimeoutWith");function S1(S,P){return VA(!0,n,ee[y](arguments))}s(S1,"scheduleTimeout");var Kp=Hr,zA=on,Ax="toLowerCase",gs="length",ed="warnToConsole",YA="throwInternal",c5="watch",M8="apply",Xi="push",KA="splice",Zh="logger",l5="cancel",yx="name",td="unload",F8="version",O8="loggingLevelConsole",Q8="messageId",_1="message",U8="diagLog",nq="userAgent",q8="split",Cx="replace",JA="type",iq="evtName",u5="traceFlags",H8="getAttribute",d5;function Dae(S,P){d5||(d5=Vh("AggregationError",function($,de){de[gs]>1&&($.errors=de[1])}));var L=S||"One or more errors occurred.";throw xn(P,function($,de){L+=`
`.concat(de," > ").concat(le($))}),new d5(L,P||[])}s(Dae,"throwAggregationError");var Bae="function",oq="object",Nae="undefined",eg="prototype",f5=Object,W8=f5[eg];(F()||{}).Symbol,(F()||{}).Reflect;var p5="hasOwnProperty",Lae=s(function(S){for(var P,L=1,$=arguments.length;L<$;L++){P=arguments[L];for(var de in P)W8[p5].call(P,de)&&(S[de]=P[de])}return S},"__objAssignFnImpl"),m5=pt||Lae,h5=s(function(S,P){return h5=f5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,$){L.__proto__=$}||function(L,$){for(var de in $)$[p5](de)&&(L[de]=$[de])},h5(S,P)},"extendStaticsFn");function XA(S,P){typeof P!==Bae&&P!==null&&Be("Class extends value "+String(P)+" is not a constructor or null"),h5(S,P);function L(){this.constructor=S}s(L,"__"),S[eg]=P===null?ua(P):(L[eg]=P[eg],new L)}s(XA,"__extendsFn");var g5,R1="constructor",wf="prototype",Sf="function",k1="_dynInstFuncs",vx="_isDynProxy",ZA="_dynClass",Ex="_dynCls$",$8="_dynInstChk",P1=$8,xx="_dfOpts",j8="_unknown_",A5="__proto__",bx="_dyn"+A5,Jw="__dynProto$Gbl",y5="_dynInstProto",Ix="useBaseInst",Tx="setInstFuncs",Xw=Object,D1=Xw.getPrototypeOf,wx=Xw.getOwnPropertyNames,G8=F(),C5=G8[Jw]||(G8[Jw]={o:(g5={},g5[Tx]=!0,g5[Ix]=!0,g5),n:1e3});function Sx(S){return S&&(S===Xw[wf]||S===Array[wf])}s(Sx,"_isObjectOrArrayPrototype");function _x(S){return Sx(S)||S===Function[wf]}s(_x,"_isObjectArrayOrFunctionPrototype");function tg(S){var P;if(S){if(D1)return D1(S);var L=S[A5]||S[wf]||(S[R1]?S[R1][wf]:null);P=S[bx]||L,Te(S,bx)||(delete S[y5],P=S[bx]=S[y5]||S[bx],S[y5]=L)}return P}s(tg,"_getObjProto");function Jp(S,P){var L=[];if(wx)L=wx(S);else for(var $ in S)typeof $=="string"&&Te(S,$)&&L.push($);if(L&&L.length>0)for(var de=0;de<L.length;de++)P(L[de])}s(Jp,"_forEachProp");function Rx(S,P,L){return P!==R1&&typeof S[P]===Sf&&(L||Te(S,P))&&P!==A5&&P!==wf}s(Rx,"_isDynamicCandidate");function kx(S){Be("DynamicProto: "+S)}s(kx,"_throwTypeError");function v5(S){var P=ua(null);return Jp(S,function(L){!P[L]&&Rx(S,L,!1)&&(P[L]=S[L])}),P}s(v5,"_getInstanceFuncs");function V8(S,P){for(var L=S.length-1;L>=0;L--)if(S[L]===P)return!0;return!1}s(V8,"_hasVisited");function z8(S,P,L,$){function de(it,Et,mr){var Bn=Et[mr];if(Bn[vx]&&$){var Xn=it[k1]||{};Xn[P1]!==!1&&(Bn=(Xn[Et[ZA]]||{})[mr]||Bn)}return function(){return Bn.apply(it,arguments)}}s(de,"_instFuncProxy");var we=ua(null);Jp(L,function(it){we[it]=de(P,L,it)});for(var ke=tg(S),$e=[];ke&&!_x(ke)&&!V8($e,ke);)Jp(ke,function(it){!we[it]&&Rx(ke,it,!D1)&&(we[it]=de(P,ke,it))}),$e.push(ke),ke=tg(ke);return we}s(z8,"_getBaseFuncs");function Mae(S,P,L,$){var de=null;if(S&&Te(L,ZA)){var we=S[k1]||ua(null);if(de=(we[L[ZA]]||ua(null))[P],de||kx("Missing ["+P+"] "+Sf),!de[$8]&&we[P1]!==!1){for(var ke=!Te(S,P),$e=tg(S),it=[];ke&&$e&&!_x($e)&&!V8(it,$e);){var Et=$e[P];if(Et){ke=Et===$;break}it.push($e),$e=tg($e)}try{ke&&(S[P]=de),de[$8]=1}catch{we[P1]=!1}}}return de}s(Mae,"_getInstFunc");function Fae(S,P,L){var $=P[S];return $===L&&($=tg(P)[S]),typeof $!==Sf&&kx("["+S+"] is not a "+Sf),$}s(Fae,"_getProtoFunc");function Oae(S,P,L,$,de){function we(it,Et){var mr=s(function(){var Bn=Mae(this,Et,it,mr)||Fae(Et,it,mr);return Bn.apply(this,arguments)},"dynProtoProxy");return mr[vx]=1,mr}if(s(we,"_createDynamicPrototype"),!Sx(S)){var ke=L[k1]=L[k1]||ua(null);if(!Sx(ke)){var $e=ke[P]=ke[P]||ua(null);ke[P1]!==!1&&(ke[P1]=!!de),Sx($e)||Jp(L,function(it){Rx(L,it,!1)&&L[it]!==$[it]&&($e[it]=L[it],delete L[it],(!Te(S,it)||S[it]&&!S[it][vx])&&(S[it]=we(S,it)))})}}}s(Oae,"_populatePrototype");function Qae(S,P){if(D1){for(var L=[],$=tg(P);$&&!_x($)&&!V8(L,$);){if($===S)return!0;L.push($),$=tg($)}return!1}return!0}s(Qae,"_checkPrototype");function Y8(S,P){return Te(S,wf)?S.name||P||j8:((S||{})[R1]||{}).name||P||j8}s(Y8,"_getObjName");function Zw(S,P,L,$){Te(S,wf)||kx("theClass is an invalid class definition.");var de=S[wf];Qae(de,P)||kx("["+Y8(S)+"] not in hierarchy of ["+Y8(P)+"]");var we=null;Te(de,ZA)?we=de[ZA]:(we=Ex+Y8(S,"_")+"$"+C5.n,C5.n++,de[ZA]=we);var ke=Zw[xx],$e=!!ke[Ix];$e&&$&&$[Ix]!==void 0&&($e=!!$[Ix]);var it=v5(P),Et=z8(de,P,it,$e);L(P,Et);var mr=!!D1&&!!ke[Tx];mr&&$&&(mr=!!$[Tx]),Oae(de,we,P,it,mr!==!1)}s(Zw,"dynamicProto"),Zw[xx]=C5.o;var pu=void 0,_a="",sq="Not dynamic - ",aq=/-([a-z])/g,eS=/([^\w\d_$])/g,K8=/^(\d+[\w\d_$])/;function J8(S){return!W(S)}s(J8,"isNotNullOrUndefined");function E5(S){var P=S;return P&&ie(P)&&(P=P[Cx](aq,function(L,$){return $.toUpperCase()}),P=P[Cx](eS,"_"),P=P[Cx](K8,function(L,$){return"_"+$})),P}s(E5,"normalizeJsName");function cq(S,P){return S&&P?$r(S,P)!==-1:!1}s(cq,"strContains");function rg(S){return S&&S.toISOString()||""}s(rg,"toISOString");function ey(S){return Ae(S)?S[yx]:_a}s(ey,"getExceptionName");function tS(S){return function(){function P(){var L=this;S&&lt(S,function($,de){L[$]=de})}return s(P,"class_1"),P}()}s(tS,"createClassFromInterface");var lq="console",x5="JSON",Uae="crypto",ty="msCrypto",Px="msie",ai="trident/",Dx=null,B1=null,ng=null;function b5(){return typeof console!==Nae?console:B(lq)}s(b5,"getConsole");function go(){return!!(typeof JSON===oq&&JSON||B(x5)!==null)}s(go,"hasJSON");function Bx(){return go()?JSON||B(x5):null}s(Bx,"getJSON");function dc(){return B(Uae)}s(dc,"getCrypto");function Nx(){return B(ty)}s(Nx,"getMsCrypto");function rS(){var S=St();if(S&&(S[nq]!==B1||Dx===null)){B1=S[nq];var P=(B1||_a)[Ax]();Dx=cq(P,Px)||cq(P,ai)}return Dx}s(rS,"isIE");function ry(S){return(ng===null||S===!1)&&(ng=ut()&&!!St().sendBeacon),ng}s(ry,"isBeaconsSupported");function nS(S,P){if(S)for(var L=0;L<S[gs];L++){var $=S[L];if($[yx]&&$[yx]===P)return $}return{}}s(nS,"_getNamedValue");function I5(S){var P=Z();return P&&S?nS(P.querySelectorAll("meta"),S).content:null}s(I5,"findMetaTag");function Xp(S){var P,L=w1();if(L){var $=L.getEntriesByType("navigation")||[];P=nS(($[gs]>0?$[0]:{}).serverTiming,S).description}return P}s(Xp,"findNamedServerTiming");var Lx=4294967296,F0=4294967295,Mx=123456789,ny=987654321,Ll=!1,Fx=Mx,Zp=ny;function uq(S){S<0&&(S>>>=0),Fx=Mx+S&F0,Zp=ny-S&F0,Ll=!0}s(uq,"_mwcSeed");function N1(){try{var S=ll()&2147483647;uq((Math.random()*Lx^S)+S)}catch{}}s(N1,"_autoSeedMwc");function T5(S){return S>0?du(Ox()/F0*(S+1))>>>0:0}s(T5,"randomValue");function Ox(S){var P=0,L=dc()||Nx();return L&&L.getRandomValues&&(P=L.getRandomValues(new Uint32Array(1))[0]&F0),P===0&&rS()&&(Ll||N1(),P=dq()&F0),P===0&&(P=du(Lx*Math.random()|0)),S||(P>>>=0),P}s(Ox,"random32");function dq(S){Zp=36969*(Zp&65535)+(Zp>>16)&F0,Fx=18e3*(Fx&65535)+(Fx>>16)&F0;var P=(Zp<<16)+(Fx&65535)>>>0&F0|0;return S||(P>>>=0),P}s(dq,"mwcRandom32");function L1(S){S===void 0&&(S=22);for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=Ox()>>>0,$=0,de=_a;de[gs]<S;)$++,de+=P.charAt(L&63),L>>>=6,$===5&&(L=(Ox()<<2&4294967295|L&3)>>>0,$=0);return de}s(L1,"newId");var em="3.3.6",w5="."+L1(6),M1=0;function tm(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType}s(tm,"_canAcceptData");function S5(S,P){var L=P[S.id];if(!L){L={};try{tm(P)&&ue(P,S.id,{e:!1,v:L})}catch{}}return L}s(S5,"_getCache");function ig(S,P){return P===void 0&&(P=!1),E5(S+M1+++(P?"."+em:_a)+w5)}s(ig,"createUniqueNamespace");function rm(S){var P={id:ig("_aiData-"+(S||_a)+"."+em),accept:s(function(L){return tm(L)},"accept"),get:s(function(L,$,de,we){var ke=L[P.id];return ke?ke[E5($)]:(we&&(ke=S5(P,L),ke[E5($)]=de),de)},"get"),kill:s(function(L,$){if(L&&L[$])try{delete L[$]}catch{}},"kill")};return P}s(rm,"createElmNodeData");function iy(S){return S&&te(S)&&(S.isVal||S.fb||Je(S,"v")||Je(S,"mrg")||Je(S,"ref")||S.set)}s(iy,"_isConfigDefaults");function _5(S,P,L){var $,de=L.dfVal||J;if(P&&L.fb){var we=L.fb;pe(we)||(we=[we]);for(var ke=0;ke<we[gs];ke++){var $e=we[ke],it=P[$e];if(de(it)?$=it:S&&(it=S.cfg[$e],de(it)&&($=it),S.set(S.cfg,We($e),it)),de($))break}}return!de($)&&de(L.v)&&($=L.v),$}s(_5,"_getDefault");function oy(S,P,L){var $=L;if(L&&iy(L)&&($=_5(S,P,L)),$){iy($)&&($=oy(S,P,$));var de;pe($)?(de=[],de[gs]=$[gs]):Nl($)&&(de={}),de&&(lt($,function(we,ke){ke&&iy(ke)&&(ke=oy(S,P,ke)),de[we]=ke}),$=de)}return $}s(oy,"_resolveDefaultValue");function sy(S,P,L,$){var de,we,ke,$e=$,it,Et,mr,Bn;iy($e)?(de=$e.isVal,we=$e.set,mr=$e.rdOnly,Bn=$e.blkVal,it=$e.mrg,Et=$e.ref,!Et&&K(Et)&&(Et=!!it),ke=_5(S,P,$e)):ke=$,Bn&&S.blkVal(P,L);var Xn,vr=!0,Br=P[L];(Br||!W(Br))&&(Xn=Br,vr=!1,de&&Xn!==ke&&!de(Xn)&&(Xn=ke,vr=!0),we&&(Xn=we(Xn,ke,P),vr=Xn===ke)),vr?ke?Xn=oy(S,P,ke):Xn=ke:(Nl(Xn)||pe(ke))&&it&&ke&&(Nl(ke)||pe(ke))&&lt(ke,function(zn,Nn){sy(S,Xn,zn,Nn)}),S.set(P,L,Xn),Et&&S.ref(P,L),mr&&S.rdOnly(P,L)}s(sy,"_applyDefaultValue");var mu=si("[[ai_dynCfg_1]]"),X8=si("[[ai_blkDynCfg_1]]"),iS=si("[[ai_frcDynCfg_1]]");function Z8(S){if(S){var P;if(pe(S)?(P=[],P[gs]=S[gs]):Nl(S)&&(P={}),P)return lt(S,function(L,$){P[L]=Z8($)}),P}return S}s(Z8,"_cfgDeepCopy");function eL(S){if(S){var P=S[mu]||S;if(P.cfg&&(P.cfg===S||P.cfg[mu]===P))return P}return null}s(eL,"getDynamicConfigHandler");function Qx(S){if(S&&(Nl(S)||pe(S)))try{S[X8]=!0}catch{}return S}s(Qx,"blockDynamicConversion");function ay(S,P,L){var $=!1;return L&&!S[P.blkVal]&&($=L[iS],!$&&!L[X8]&&($=Nl(L)||pe(L))),$}s(ay,"_canMakeDynamic");function O0(S){Be("InvalidAccess:"+S)}s(O0,"throwInvalidAccess");var fq=["push","pop","shift","unshift","splice"],og=s(function(S,P,L,$){S&&S[YA](3,108,"".concat(L," [").concat(P,"] failed - ")+le($))},"_throwDynamicError");function tL(S,P,L){pe(P)&&xn(fq,function($){var de=P[$];P[$]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var $e=de[M8](this,we);return F1(S,P,L,"Patching"),$e}})}s(tL,"_patchArray");function sg(S,P){var L=Oe(S,P);return L&&L.get}s(sg,"_getOwnPropGetter");function pq(S,P,L,$){var de={n:L,h:[],trk:s(function(Et){Et&&Et.fn&&(uo(de.h,Et)===-1&&de.h[Xi](Et),S.trk(Et,de))},"trk"),clr:s(function(Et){var mr=uo(de.h,Et);mr!==-1&&de.h[KA](mr,1)},"clr")},we=!0,ke=!1;function $e(){we&&(ke=ke||ay($e,S,$),$&&!$[mu]&&ke&&($=F1(S,$,L,"Converting")),we=!1);var Et=S.act;return Et&&de.trk(Et),$}s($e,"_getProperty"),$e[S.prop]={chng:s(function(){S.add(de)},"chng")};function it(Et){if($!==Et){$e[S.ro]&&!S.upd&&O0("["+L+"] is read-only:"+le(P)),we&&(ke=ke||ay($e,S,$),we=!1);var mr=ke&&$e[S.rf];if(ke)if(mr){lt($,function(Xn){$[Xn]=Et?Et[Xn]:pu});try{lt(Et,function(Xn,vr){Ux(S,$,Xn,vr)}),Et=$}catch(Xn){og((S.hdlr||{})[Zh],L,"Assigning",Xn),ke=!1}}else $&&$[mu]&&lt($,function(Xn){var vr=sg($,Xn);if(vr){var Br=vr[S.prop];Br&&Br.chng()}});if(Et!==$){var Bn=Et&&ay($e,S,Et);!mr&&Bn&&(Et=F1(S,Et,L,"Converting")),$=Et,ke=Bn}S.add(de)}}s(it,"_setProperty"),ue(P,de.n,{g:$e,s:it})}s(pq,"_createDynamicProperty");function Ux(S,P,L,$){if(P){var de=sg(P,L),we=de&&!!de[S.prop];we?P[L]=$:pq(S,P,L,$)}return P}s(Ux,"_setDynamicProperty");function rL(S,P,L,$){if(P){var de=sg(P,L),we=de&&!!de[S.prop],ke=$&&$[0],$e=$&&$[1],it=$&&$[2];if(!we){if(it)try{Qx(P)}catch(Et){og((S.hdlr||{})[Zh],L,"Blocking",Et)}try{Ux(S,P,L,P[L]),de=sg(P,L)}catch(Et){og((S.hdlr||{})[Zh],L,"State",Et)}}ke&&(de[S.rf]=ke),$e&&(de[S.ro]=$e),it&&(de[S.blkVal]=!0)}return P}s(rL,"_setDynamicPropertyState");function F1(S,P,L,$){try{lt(P,function(de,we){Ux(S,P,de,we)}),P[mu]||(ht(P,mu,{get:s(function(){return S.hdlr},"get")}),tL(S,P,L))}catch(de){og((S.hdlr||{})[Zh],L,$,de)}return P}s(F1,"_makeDynamicObject");var O1="[[ai_",_f="]]";function mq(S){var P=Ar(O1+"get"+S.uid+_f),L=Ar(O1+"ro"+S.uid+_f),$=Ar(O1+"rf"+S.uid+_f),de=Ar(O1+"blkVal"+S.uid+_f),we=Ar(O1+"dtl"+S.uid+_f),ke=null,$e=null,it;function Et(vr,Br){var zn=it.act;try{it.act=vr,vr&&vr[we]&&(xn(vr[we],function(ki){ki.clr(vr)}),vr[we]=[]),Br({cfg:S.cfg,set:S.set.bind(S),setDf:S.setDf.bind(S),ref:S.ref.bind(S),rdOnly:S.rdOnly.bind(S)})}catch(ki){var Nn=S[Zh];throw Nn&&Nn[YA](1,107,le(ki)),ki}finally{it.act=zn||null}}s(Et,"_useHandler");function mr(){if(ke){var vr=ke;ke=null,$e&&$e[l5](),$e=null;var Br=[];if(xn(vr,function(zn){if(zn&&(zn[we]&&(xn(zn[we],function(Nn){Nn.clr(zn)}),zn[we]=null),zn.fn))try{Et(zn,zn.fn)}catch(Nn){Br[Xi](Nn)}}),ke)try{mr()}catch(zn){Br[Xi](zn)}Br[gs]>0&&Dae("Watcher error(s): ",Br)}}s(mr,"_notifyWatchers");function Bn(vr){if(vr&&vr.h[gs]>0){ke||(ke=[]),$e||($e=S1(function(){$e=null,mr()},0));for(var Br=0;Br<vr.h[gs];Br++){var zn=vr.h[Br];zn&&uo(ke,zn)===-1&&ke[Xi](zn)}}}s(Bn,"_addWatcher");function Xn(vr,Br){if(vr){var zn=vr[we]=vr[we]||[];uo(zn,Br)===-1&&zn[Xi](Br)}}return s(Xn,"_trackHandler"),it={prop:P,ro:L,rf:$,blkVal:de,hdlr:S,add:Bn,notify:mr,use:Et,trk:Xn},it}s(mq,"_createState");function qae(S,P){var L={fn:P,rm:s(function(){L.fn=null,S=null,P=null},"rm")};return ue(L,"toJSON",{v:s(function(){return"WatcherHandler"+(L.fn?"":"[X]")},"v")}),S.use(L,P),L}s(qae,"_createAndUseHandler");function hq(S,P,L){var $=eL(P);if($)return $;var de=ig("dyncfg",!0),we=P&&L!==!1?P:Z8(P),ke;function $e(){ke.notify()}s($e,"_notifyWatchers");function it(Nn,ki,Po){try{Nn=Ux(ke,Nn,ki,Po)}catch(Zi){og(S,ki,"Setting value",Zi)}return Nn[ki]}s(it,"_setValue");function Et(Nn){return qae(ke,Nn)}s(Et,"_watch");function mr(Nn,ki){ke.use(null,function(Po){var Zi=ke.upd;try{K(ki)||(ke.upd=ki),Nn(Po)}finally{ke.upd=Zi}})}s(mr,"_block");function Bn(Nn,ki){var Po;return rL(ke,Nn,ki,(Po={},Po[0]=!0,Po))[ki]}s(Bn,"_ref");function Xn(Nn,ki){var Po;return rL(ke,Nn,ki,(Po={},Po[1]=!0,Po))[ki]}s(Xn,"_rdOnly");function vr(Nn,ki){var Po;return rL(ke,Nn,ki,(Po={},Po[2]=!0,Po))[ki]}s(vr,"_blkPropValue");function Br(Nn,ki){return ki&&lt(ki,function(Po,Zi){sy(zn,Nn,Po,Zi)}),Nn}s(Br,"_applyDefaults");var zn={uid:null,cfg:we,logger:S,notify:$e,set:it,setDf:Br,watch:Et,ref:Bn,rdOnly:Xn,blkVal:vr,_block:mr};return ue(zn,"uid",{c:!1,e:!1,w:!1,v:de}),ke=mq(zn),F1(ke,we,"config","Creating"),zn}s(hq,"_createDynamicHandler");function gq(S,P){S?(S[ed](P),S[YA](2,108,P)):O0(P)}s(gq,"_logInvalidAccess");function oS(S,P,L,$){var de=hq(L,S||{},$);return P&&de.setDf(de.cfg,P),de}s(oS,"createDynamicConfig");function Aq(S,P,L){var $=S[mu]||S;return $.cfg&&($.cfg===S||$.cfg[mu]===$)?$[c5](P):(gq(L,sq+le(S)),oS(S,null,L)[c5](P))}s(Aq,"onConfigChange");var R5=null;function yq(){var S=B("Microsoft");return S&&(R5=S.ApplicationInsights),R5}s(yq,"_getExtensionNamespace");function Hae(S){var P=R5;return!P&&S.disableDbgExt!==!0&&(P=R5||yq()),P?P.ChromeDbgExt:null}s(Hae,"getDebugExt");var qx,k5="warnToConsole",Cq="AI (Internal): ",vq="AI: ",Wae="AITR_",$ae={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Eq=(qx={},qx[0]=null,qx[1]="errorToConsole",qx[2]=k5,qx[3]="debugToConsole",qx);function xq(S){return S?'"'+S[Cx](/\"/g,_a)+'"':_a}s(xq,"_sanitizeDiagnosticText");function P5(S,P){var L=b5();if(L){var $="log";L[S]&&($=S),ae(L[$])&&L[$](P)}}s(P5,"_logToConsole");var D5=function(){function S(P,L,$,de){$===void 0&&($=!1);var we=this;we[Q8]=P,we[_1]=($?vq:Cq)+P;var ke=_a;go()&&(ke=Bx().stringify(de));var $e=(L?" message:"+xq(L):_a)+(de?" props:"+xq(ke):_a);we[_1]+=$e}return s(S,"_InternalLogMessage"),S.dataType="MessageData",S}();function jae(S,P){return(S||{})[Zh]||new B5(P)}s(jae,"safeGetLogger");var B5=function(){function S(P){this.identifier="DiagnosticLogger",this.queue=[];var L=0,$={},de,we,ke,$e,it;Zw(S,this,function(Et){it=Bn(P||{}),Et.consoleLoggingLevel=function(){return de},Et[YA]=function(Br,zn,Nn,ki,Po){Po===void 0&&(Po=!1);var Zi=new D5(zn,Nn,Po,ki);if($e)throw le(Zi);var Bc=Eq[Br]||k5;if(K(Zi[_1]))vr("throw"+(Br===1?"Critical":"Warning"),Zi);else{if(Po){var yb=+Zi[Q8];!$[yb]&&de>=Br&&(Et[Bc](Zi[_1]),$[yb]=!0)}else de>=Br&&Et[Bc](Zi[_1]);mr(Br,Zi)}},Et.debugToConsole=function(Br){P5("debug",Br),vr("warning",Br)},Et[ed]=function(Br){P5("warn",Br),vr("warning",Br)},Et.errorToConsole=function(Br){P5("error",Br),vr("error",Br)},Et.resetInternalMessageCount=function(){L=0,$={}},Et.logInternalMessage=mr,Et[td]=function(Br){it&&it.rm(),it=null};function mr(Br,zn){if(!Xn()){var Nn=!0,ki=Wae+zn[Q8];if($[ki]?Nn=!1:$[ki]=!0,Nn&&(Br<=we&&(Et.queue[Xi](zn),L++,vr(Br===1?"error":"warn",zn)),L===ke)){var Po="Internal events throttle limit per PageView reached for this app.",Zi=new D5(23,Po,!1);Et.queue[Xi](Zi),Br===1?Et.errorToConsole(Po):Et[ed](Po)}}}s(mr,"_logInternalMessage");function Bn(Br){return Aq(oS(Br,$ae,Et).cfg,function(zn){var Nn=zn.cfg;de=Nn[O8],we=Nn.loggingLevelTelemetry,ke=Nn.maxMessageLimit,$e=Nn.enableDebug})}s(Bn,"_setDefaultsFromConfig");function Xn(){return L>=ke}s(Xn,"_areInternalMessagesThrottled");function vr(Br,zn){var Nn=Hae(P||{});Nn&&Nn[U8]&&Nn[U8](Br,zn)}s(vr,"_debugExtMsg")})}return s(S,"DiagnosticLogger"),S.__ieDyn=1,S}();function N5(S){return S||new B5}s(N5,"_getLogger");function Qd(S,P,L,$,de,we){we===void 0&&(we=!1),N5(S)[YA](P,L,$,de,we)}s(Qd,"_throwInternal");function L5(){for(var S=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],P=_a,L,$=0;$<4;$++)L=Ox(),P+=S[L&15]+S[L>>4&15]+S[L>>8&15]+S[L>>12&15]+S[L>>16&15]+S[L>>20&15]+S[L>>24&15]+S[L>>28&15];var de=S[8+(Ox()&3)|0];return tr(P,0,8)+tr(P,9,4)+"4"+tr(P,13,3)+de+tr(P,16,3)+tr(P,19,12)}s(L5,"generateW3CId");var Hx=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,nL="00",Rf="ff",Ri="00000000000000000000000000000000",ag="0000000000000000",fc=1;function Q0(S,P,L){return S&&S[gs]===P&&S!==L?!!S.match(/^[\da-f]*$/i):!1}s(Q0,"_isValid");function M5(S,P,L){return Q0(S,P)?S:L}s(M5,"_formatValue");function Q1(S){(isNaN(S)||S<0||S>255)&&(S=1);for(var P=S.toString(16);P[gs]<2;)P="0"+P;return P}s(Q1,"_formatFlags");function Wx(S,P,L,$){return{version:Q0($,2,Rf)?$:nL,traceId:$x(S)?S:L5(),spanId:jx(P)?P:Wr(L5(),16),traceFlags:L>=0&&L<=255?L:1}}s(Wx,"createTraceParent");function kf(S,P){if(!S||(pe(S)&&(S=S[0]||""),!S||!ie(S)||S[gs]>8192))return null;if(S.indexOf(",")!==-1){var L=S[q8](",");S=L[P>0&&L[gs]>P?P:0]}var $=Hx.exec(Sa(S));return!$||$[1]===Rf||$[2]===Ri||$[3]===ag?null:{version:($[1]||_a)[Ax](),traceId:($[2]||_a)[Ax](),spanId:($[3]||_a)[Ax](),traceFlags:parseInt($[4],16)}}s(kf,"parseTraceParent");function $x(S){return Q0(S,32,Ri)}s($x,"isValidTraceId");function jx(S){return Q0(S,16,ag)}s(jx,"isValidSpanId");function Gx(S){return!(!S||!Q0(S[F8],2,Rf)||!Q0(S.traceId,32,Ri)||!Q0(S.spanId,16,ag)||!Q0(Q1(S[u5]),2))}s(Gx,"isValidTraceParent");function F5(S){return Gx(S)?(S[u5]&fc)===fc:!1}s(F5,"isSampledFlag");function U1(S){if(S){var P=Q1(S[u5]);Q0(P,2)||(P="01");var L=S[F8]||nL;return L!=="00"&&L!=="ff"&&(L=nL),"".concat(L.toLowerCase(),"-").concat(M5(S.traceId,32,Ri).toLowerCase(),"-").concat(M5(S.spanId,16,ag).toLowerCase(),"-").concat(P.toLowerCase())}return""}s(U1,"formatTraceParent");function iL(S){var P="traceparent",L=kf(I5(P),S);return L||(L=kf(Xp(P),S)),L}s(iL,"findW3cTraceParent");function oL(S){var P=S.getElementsByTagName("script"),L=[];return xn(P,function($){var de=$[H8]("src");if(de){var we=$[H8]("crossorigin"),ke=$.hasAttribute("async")===!0,$e=$.hasAttribute("defer")===!0,it=$[H8]("referrerpolicy"),Et={url:de};we&&(Et.crossOrigin=we),ke&&(Et.async=ke),$e&&(Et.defer=$e),it&&(Et.referrerPolicy=it),L[Xi](Et)}}),L}s(oL,"findAllScripts");var O5="on",sS="attachEvent",Q5="addEventListener",U5="detachEvent",bq="removeEventListener",sL="events";ig("aiEvtPageHide"),ig("aiEvtPageShow");var Gae=/\.[\.]+/g,Vae=/[\.]+$/,q5=1,Vx=rm("events"),Ml=/^([^.]*)(?:\.(.+)|)/;function aS(S){return S&&S[Cx]?S[Cx](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_a):S}s(aS,"_normalizeNamespace");function ul(S,P){if(P){var L=_a;pe(P)?(L=_a,xn(P,function(de){de=aS(de),de&&(de[0]!=="."&&(de="."+de),L+=de)})):L=aS(P),L&&(L[0]!=="."&&(L="."+L),S=(S||_a)+L)}var $=Ml.exec(S||_a)||[];return{type:$[1],ns:($[2]||_a).replace(Gae,".").replace(Vae,_a)[q8](".").sort().join(".")}}s(ul,"_getEvtNamespace");function cy(S,P,L){L===void 0&&(L=!0);var $=Vx.get(S,sL,{},L),de=$[P];return de||(de=$[P]=[]),de}s(cy,"_getRegisteredEvents");function Iq(S,P,L,$){S&&P&&P[JA]&&(S[bq]?S[bq](P[JA],L,$):S[U5]&&S[U5](O5+P[JA],L))}s(Iq,"_doDetach");function zae(S,P,L,$){var de=!1;return S&&P&&P[JA]&&L&&(S[Q5]?(S[Q5](P[JA],L,$),de=!0):S[sS]&&(S[sS](O5+P[JA],L),de=!0)),de}s(zae,"_doAttach");function cS(S,P,L,$){for(var de=P[gs];de--;){var we=P[de];we&&(!L.ns||L.ns===we[iq].ns)&&(!$||$(we))&&(Iq(S,we[iq],we.handler,we.capture),P[KA](de,1))}}s(cS,"_doUnregister");function aL(S,P,L){if(P[JA])cS(S,cy(S,P[JA]),P,L);else{var $=Vx.get(S,sL,{});lt($,function(de,we){cS(S,we,P,L)}),Mt($)[gs]===0&&Vx.kill(S,sL)}}s(aL,"_unregisterEvents");function Yae(S,P){var L;return P?(pe(P)?L=[S].concat(P):L=[S,P],L=ul("xx",L).ns[q8](".")):L=S,L}s(Yae,"mergeEvtNamespace");function cL(S,P,L,$,de){de===void 0&&(de=!1);var we=!1;if(S)try{var ke=ul(P,$);if(we=zae(S,ke,L,de),we&&Vx.accept(S)){var $e={guid:q5++,evtName:ke,handler:L,capture:de};cy(S,ke.type)[Xi]($e)}}catch{}return we}s(cL,"eventOn");function Tq(S,P,L,$,de){if(de===void 0&&(de=!1),S)try{var we=ul(P,$),ke=!1;aL(S,we,function($e){return we.ns&&!L||$e.handler===L?(ke=!0,!0):!1}),ke||Iq(S,we,L,de)}catch{}}s(Tq,"eventOff");var H5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",wq="sampleRate",W5="ProcessLegacy",Sq="http.method",lL="https://dc.services.visualstudio.com",lS="/v2/track",nm="not_specified",uL="iKey",_q=zA({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),ly="split",Dn="length",zx="toLowerCase",q1="ingestionendpoint",H1="toString",dL="removeItem",uS="message",Yx="count",$5="preTriggerDate",fL="getUTCDate",j5="stringify",Kx="pathname",W1="match",pL="correlationHeaderExcludePatterns",Pf="name",Jx="extensionConfig",im="properties",rd="measurements",Xx="sizeInBytes",dS="typeName",Zx="exceptions",fS="severityLevel",eb="problemGroup",Ud="parsedStack",G5="hasFullStack",V5="assembly",U0="fileName",tb="line",uy="aiDataContract",pS="duration";function mL(S,P,L){var $=P[Dn],de=hL(S,P);if(de[Dn]!==$){for(var we=0,ke=de;L[ke]!==void 0;)we++,ke=ar(de,0,147)+Rq(we);de=ke}return de}s(mL,"dataSanitizeKeyAndAddUniqueness");function hL(S,P){var L;return P&&(P=Sa(We(P)),P[Dn]>150&&(L=ar(P,0,150),Qd(S,2,57,"name is too long.  It has been truncated to 150 characters.",{name:P},!0))),L||P}s(hL,"dataSanitizeKey");function dl(S,P,L){L===void 0&&(L=1024);var $;return P&&(L=L||1024,P=Sa(We(P)),P[Dn]>L&&($=ar(P,0,L),Qd(S,2,61,"string value is too long. It has been truncated to "+L+" characters.",{value:P},!0))),$||P}s(dl,"dataSanitizeString");function om(S,P){return AL(S,P,2048,66)}s(om,"dataSanitizeUrl");function z5(S,P){var L;return P&&P[Dn]>32768&&(L=ar(P,0,32768),Qd(S,2,56,"message is too long, it has been truncated to 32768 characters.",{message:P},!0)),L||P}s(z5,"dataSanitizeMessage");function gL(S,P){var L;if(P){var $=""+P;$[Dn]>32768&&(L=ar($,0,32768),Qd(S,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:P},!0))}return L||P}s(gL,"dataSanitizeException");function cg(S,P){if(P){var L={};lt(P,function($,de){if(te(de)&&go())try{de=Bx()[j5](de)}catch(we){Qd(S,2,49,"custom property is not valid",{exception:we},!0)}de=dl(S,de,8192),$=mL(S,$,L),L[$]=de}),P=L}return P}s(cg,"dataSanitizeProperties");function Df(S,P){if(P){var L={};lt(P,function($,de){$=mL(S,$,L),L[$]=de}),P=L}return P}s(Df,"dataSanitizeMeasurements");function rb(S,P){return P&&AL(S,P,128,69)[H1]()}s(rb,"dataSanitizeId");function AL(S,P,L,$){var de;return P&&(P=Sa(We(P)),P[Dn]>L&&(de=ar(P,0,L),Qd(S,2,$,"input is too long, it has been truncated to "+L+" characters.",{data:P},!0))),de||P}s(AL,"dataSanitizeInput");function Rq(S){var P="00"+S;return tr(P,P[Dn]-3)}s(Rq,"dsPadNumber");var yL=Z()||{},kq=0,Kae=[null,null,null,null,null];function nb(S){var P=kq,L=Kae,$=L[P];return yL.createElement?L[P]||($=L[P]=yL.createElement("a")):$={host:Dq(S,!0)},$.href=S,P++,P>=L[Dn]&&(P=0),kq=P,$}s(nb,"urlParseUrl");function Jae(S){var P,L=nb(S);return L&&(P=L.href),P}s(Jae,"urlGetAbsoluteUrl");function Xae(S){var P,L=nb(S);return L&&(P=L[Kx]),P}s(Xae,"urlGetPathName");function Pq(S,P){return S?S.toUpperCase()+" "+P:P}s(Pq,"urlGetCompleteUrl");function Dq(S,P){var L=lg(S,P)||"";if(L){var $=L[W1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[Dn]>3&&ie($[2])&&$[2][Dn]>0)return $[2]+($[3]||"")}return L}s(Dq,"urlParseHost");function lg(S,P){var L=null;if(S){var $=S[W1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[Dn]>2&&ie($[2])&&$[2][Dn]>0&&(L=$[2]||"",P&&$[Dn]>2)){var de=($[1]||"")[zx](),we=$[3]||"";(de==="http"&&we===":80"||de==="https"&&we===":443")&&(we=""),L+=we}}return L}s(lg,"urlParseFullHost");var Bq=[lL+lS,"https://breeze.aimon.applicationinsights.io"+lS,"https://dc-int.services.visualstudio.com"+lS],ib="cid-v1:";function Nq(S){return uo(Bq,S[zx]())!==-1}s(Nq,"isInternalApplicationInsightsEndpoint");function CL(S){ib=S}s(CL,"correlationIdSetPrefix");function vL(){return ib}s(vL,"correlationIdGetPrefix");function dy(S,P,L){if(!P||S&&S.disableCorrelationHeaders)return!1;if(S&&S[pL]){for(var $=0;$<S.correlationHeaderExcludePatterns[Dn];$++)if(S[pL][$].test(P))return!1}var de=nb(P).host[zx]();if(de&&($r(de,":443")!==-1||$r(de,":80")!==-1)&&(de=(lg(P,!0)||"")[zx]()),(!S||!S.enableCorsCorrelation)&&de&&de!==L)return!1;var we=S&&S.correlationHeaderDomains;if(we){var ke;if(xn(we,function(Et){var mr=new RegExp(Et.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));ke=ke||mr.test(de)}),!ke)return!1}var $e=S&&S.correlationHeaderExcludedDomains;if(!$e||$e[Dn]===0)return!0;for(var $=0;$<$e[Dn];$++){var it=new RegExp($e[$].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(it.test(de))return!1}return de&&de[Dn]>0}s(dy,"correlationIdCanIncludeCorrelationHeader");function Lq(S){if(S){var P=Mq(S,_q[1]);if(P&&P!==ib)return P}}s(Lq,"correlationIdGetCorrelationContext");function Mq(S,P){if(S)for(var L=S[ly](","),$=0;$<L[Dn];++$){var de=L[$][ly]("=");if(de[Dn]===2&&de[0]===P)return de[1]}}s(Mq,"correlationIdGetCorrelationContextValue");function Fq(S,P,L,$){var de,we=$,ke=$;if(P&&P[Dn]>0){var $e=nb(P);if(de=$e.host,!we)if($e[Kx]!=null){var it=$e.pathname[Dn]===0?"/":$e[Kx];it.charAt(0)!=="/"&&(it="/"+it),ke=$e[Kx],we=dl(S,L?L+" "+it:it)}else we=dl(S,P)}else de=$,we=$;return{target:de,name:we,data:ke}}s(Fq,"AjaxHelperParseDependencyPath");function Zae(){var S=w1();if(S&&S.now&&S.timing){var P=S.now()+S.timing.navigationStart;if(P>0)return P}return ll()}s(Zae,"dateTimeUtilsNow");function ece(S,P){var L=null;return S!==0&&P!==0&&!W(S)&&!W(P)&&(L=P-S),L}s(ece,"dateTimeUtilsDuration");function EL(S,P){var L=S||{};return{getName:s(function(){return L[Pf]},"getName"),setName:s(function($){P&&P.setName($),L[Pf]=$},"setName"),getTraceId:s(function(){return L.traceID},"getTraceId"),setTraceId:s(function($){P&&P.setTraceId($),$x($)&&(L.traceID=$)},"setTraceId"),getSpanId:s(function(){return L.parentID},"getSpanId"),setSpanId:s(function($){P&&P.setSpanId($),jx($)&&(L.parentID=$)},"setSpanId"),getTraceFlags:s(function(){return L.traceFlags},"getTraceFlags"),setTraceFlags:s(function($){P&&P.setTraceFlags($),L.traceFlags=$},"setTraceFlags")}}s(EL,"createDistributedTraceContextFromTrace");var ob=Kp({LocalStorage:0,SessionStorage:1}),tce=Kp({AI:0,AI_AND_W3C:1,W3C:2}),mS=Kp({Normal:1,Critical:2}),fy=void 0,q0=void 0,Oq="";function sb(){return Y5()?ab(ob.LocalStorage):null}s(sb,"_getLocalStorageObject");function ab(S){try{if(W(F()))return null;var P=new Date()[H1](),L=B(S===ob.LocalStorage?"localStorage":"sessionStorage"),$=Oq+P;L.setItem($,P);var de=L.getItem($)!==P;if(L[dL]($),!de)return L}catch{}return null}s(ab,"_getVerifiedStorageObject");function cb(){return ug()?ab(ob.SessionStorage):null}s(cb,"_getSessionStorageObject");function hS(){fy=!1,q0=!1}s(hS,"utlDisableStorage");function gS(S){Oq=S||""}s(gS,"utlSetStoragePrefix");function rce(){fy=Y5(!0),q0=ug(!0)}s(rce,"utlEnableStorage");function Y5(S){return(S||fy===void 0)&&(fy=!!ab(ob.LocalStorage)),fy}s(Y5,"utlCanUseLocalStorage");function Qq(S,P){var L=sb();if(L!==null)try{return L.getItem(P)}catch($){fy=!1,Qd(S,2,1,"Browser failed read of local storage. "+ey($),{exception:le($)})}return null}s(Qq,"utlGetLocalStorage");function Uq(S,P,L){var $=sb();if($!==null)try{return $.setItem(P,L),!0}catch(de){fy=!1,Qd(S,2,3,"Browser failed write to local storage. "+ey(de),{exception:le(de)})}return!1}s(Uq,"utlSetLocalStorage");function Bf(S,P){var L=sb();if(L!==null)try{return L[dL](P),!0}catch($){fy=!1,Qd(S,2,5,"Browser failed removal of local storage item. "+ey($),{exception:le($)})}return!1}s(Bf,"utlRemoveStorage");function ug(S){return(S||q0===void 0)&&(q0=!!ab(ob.SessionStorage)),q0}s(ug,"utlCanUseSessionStorage");function lb(){var S=[];return ug()&&lt(B("sessionStorage"),function(P){S.push(P)}),S}s(lb,"utlGetSessionStorageKeys");function qq(S,P){var L=cb();if(L!==null)try{return L.getItem(P)}catch($){q0=!1,Qd(S,2,2,"Browser failed read of session storage. "+ey($),{exception:le($)})}return null}s(qq,"utlGetSessionStorage");function nce(S,P,L){var $=cb();if($!==null)try{return $.setItem(P,L),!0}catch(de){q0=!1,Qd(S,2,4,"Browser failed write to session storage. "+ey(de),{exception:le(de)})}return!1}s(nce,"utlSetSessionStorage");function Hq(S,P){var L=cb();if(L!==null)try{return L[dL](P),!0}catch($){q0=!1,Qd(S,2,6,"Browser failed removal of session storage item. "+ey($),{exception:le($)})}return!1}s(Hq,"utlRemoveSessionStorage");var ice="appInsightsThrottle",oce=function(){function S(P,L){var $=this,de,we,ke,$e,it,Et,mr,Bn=!1,Xn=!1;Br(),$._getDbgPlgTargets=function(){return[mr]},$.getConfig=function(){return ke},$.canThrottle=function(Dt){var jr=LL(Dt),An=zn(Dt);return Po(An,de,jr)},$.isTriggered=function(Dt){return oH(Dt)},$.isReady=function(){return Bn},$.flush=function(Dt){try{var jr=sH(Dt);if(jr&&jr[Dn]>0){var An=jr.slice(0);return mr[Dt]=[],xn(An,function(cs){vr(cs.msgID,cs[uS],cs.severity,!1)}),!0}}catch{}return!1},$.flushAll=function(){try{if(mr){var Dt=!0;return lt(mr,function(jr){var An=$.flush(parseInt(jr));Dt=Dt&&An}),Dt}}catch{}return!1},$.onReadyState=function(Dt,jr){return jr===void 0&&(jr=!0),Bn=W(Dt)?!0:Dt,Bn&&jr?$.flushAll():null},$.sendMessage=function(Dt,jr,An){return vr(Dt,jr,An,!0)};function vr(Dt,jr,An,cs){if(Bn){var Nc=bce(Dt);if(!Nc)return;var Ra=zn(Dt),Lc=LL(Dt),j1=Po(Ra,de,Lc),Ay=!1,Cb=0,aH=oH(Dt);try{j1&&!aH?(Cb=br(Ra.limit.maxSendNumber,Lc[Yx]+1),Lc[Yx]=0,Ay=!0,it[Dt]=!0,Lc[$5]=new Date):(it[Dt]=j1,Lc[Yx]+=1);var cH=Zi(Dt);NL(we,cH,Lc);for(var lP=0;lP<Cb;lP++)iH(Dt,we,jr,An)}catch{}return{isThrottled:Ay,throttleNum:Cb}}else if(cs){var Ice=sH(Dt);Ice.push({msgID:Dt,message:jr,severity:An})}return null}s(vr,"_flushMessage");function Br(){we=jae(P),it={},$e={},mr={},ke={},Nn(109),Et=J8(L)?L:"",P.addUnloadHook(Aq(P.config,function(Dt){var jr=Dt.cfg;de=Y5();var An=jr.throttleMgrCfg||{};lt(An,function(cs,Nc){Nn(parseInt(cs),Nc)})}))}s(Br,"_initConfig");function zn(Dt){return ke[Dt]||ke[109]}s(zn,"_getCfgByKey");function Nn(Dt,jr){var An,cs;try{var Nc=jr||{},Ra={};Ra.disabled=!!Nc.disabled;var Lc=Nc.interval||{};Xn=Lc?.daysOfMonth&&Lc?.daysOfMonth[Dn]>0,Ra.interval=ki(Lc);var j1={samplingRate:((An=Nc.limit)===null||An===void 0?void 0:An.samplingRate)||100,maxSendNumber:((cs=Nc.limit)===null||cs===void 0?void 0:cs.maxSendNumber)||1};Ra.limit=j1,ke[Dt]=Ra}catch{}}s(Nn,"_setCfgByKey");function ki(Dt){Dt=Dt||{};var jr=Dt?.monthInterval,An=Dt?.dayInterval;return W(jr)&&W(An)&&(Dt.monthInterval=3,Xn||(Dt.daysOfMonth=[28],Xn=!0)),Dt={monthInterval:Dt?.monthInterval,dayInterval:Dt?.dayInterval,daysOfMonth:Dt?.daysOfMonth},Dt}s(ki,"_getIntervalConfig");function Po(Dt,jr,An){if(Dt&&!Dt.disabled&&jr&&J8(An)){var cs=IS(),Nc=An.date,Ra=Dt.interval,Lc=1;if(Ra?.monthInterval){var j1=(cs.getUTCFullYear()-Nc.getUTCFullYear())*12+cs.getUTCMonth()-Nc.getUTCMonth();Lc=cP(Ra.monthInterval,0,j1)}var Ay=1;if(Xn)Ay=uo(Ra.daysOfMonth,cs[fL]());else if(Ra?.dayInterval){var Cb=du((cs.getTime()-Nc.getTime())/864e5);Ay=cP(Ra.dayInterval,0,Cb)}return Lc>=0&&Ay>=0}return!1}s(Po,"_canThrottle");function Zi(Dt,jr){var An=J8(jr)?jr:"";return Dt?ice+An+"-"+Dt:null}s(Zi,"_getLocalStorageName");function Bc(Dt){try{if(Dt){var jr=new Date;return Dt.getUTCFullYear()===jr.getUTCFullYear()&&Dt.getUTCMonth()===jr.getUTCMonth()&&Dt[fL]()===jr[fL]()}}catch{}return!1}s(Bc,"_isTriggeredOnCurDate");function yb(Dt,jr,An){try{var cs={date:IS(),count:0};if(Dt){var Nc=JSON.parse(Dt),Ra={date:IS(Nc.date)||cs.date,count:Nc[Yx]||cs[Yx],preTriggerDate:Nc.preTriggerDate?IS(Nc[$5]):void 0};return Ra}else return NL(jr,An,cs),cs}catch{}return null}s(yb,"_getLocalStorageObj");function IS(Dt){try{if(Dt){var jr=new Date(Dt);if(!isNaN(jr.getDate()))return jr}else return new Date}catch{}return null}s(IS,"_getThrottleDate");function NL(Dt,jr,An){try{return Uq(Dt,jr,Sa(JSON[j5](An)))}catch{}return!1}s(NL,"_resetLocalStorage");function cP(Dt,jr,An){return Dt<=0?1:An>=jr&&(An-jr)%Dt==0?du((An-jr)/Dt)+1:-1}s(cP,"_checkInterval");function iH(Dt,jr,An,cs){Qd(jr,cs||1,Dt,An)}s(iH,"_sendMessage");function bce(Dt){try{var jr=zn(Dt);return T5(1e6)<=jr.limit.samplingRate}catch{}return!1}s(bce,"_canSampledIn");function LL(Dt){try{var jr=$e[Dt];if(!jr){var An=Zi(Dt,Et);jr=yb(Qq(we,An),we,An),$e[Dt]=jr}return $e[Dt]}catch{}return null}s(LL,"_getLocalStorageObjByKey");function oH(Dt){var jr=it[Dt];if(W(jr)){jr=!1;var An=LL(Dt);An&&(jr=Bc(An[$5])),it[Dt]=jr}return it[Dt]}s(oH,"_isTrigger");function sH(Dt){return mr=mr||{},W(mr[Dt])&&(mr[Dt]=[]),mr[Dt]}s(sH,"_getQueueByKey")}return s(S,"ThrottleMgr"),S}(),xL=";",sm="=";function K5(S){if(!S)return{};var P=S[ly](xL),L=Vo(P,function(de,we){var ke=we[ly](sm);if(ke[Dn]===2){var $e=ke[0][zx](),it=ke[1];de[$e]=it}return de},{});if(Mt(L)[Dn]>0){if(L.endpointsuffix){var $=L.location?L.location+".":"";L[q1]=L[q1]||"https://"+$+"dc."+L.endpointsuffix}L[q1]=L[q1]||lL,If(L[q1],"/")&&(L[q1]=L[q1].slice(0,-1))}return L}s(K5,"parseConnectionString");var J5={parse:K5},X5=function(){function S(P,L,$){var de=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[Pf]=dl(P,$)||nm,we.data=L,we.time=rg(new Date),we[uy]={time:1,iKey:1,name:1,sampleRate:s(function(){return de.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(S,"Envelope"),S}(),sce=function(){function S(P,L,$,de){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[Pf]=dl(P,L)||nm,we[im]=cg(P,$),we[rd]=Df(P,de)}return s(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),ace=58,Wq=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,cce=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,ub=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,$q=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,lce=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,uce=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,dce=/([^\(\s\n]+):([0-9]+)$/,jq="<no_method>",db="error",qd="stack",AS="stackDetails",Z5="errorSrc",yS="message",CS="description",bL=[{re:cce,len:5,m:1,fn:2,ln:3,col:4},{chk:eP,pre:Lr,re:ub,len:4,m:1,fn:2,ln:3},{re:$q,len:3,m:1,fn:2,hdl:TL},{re:lce,len:2,fn:1,hdl:TL}];function Lr(S){return S.replace(/(\(anonymous\))/,"<anonymous>")}s(Lr,"_scrubAnonymous");function eP(S){return $r(S,"[native")<0}s(eP,"_ignoreNative");function vS(S,P){var L=S;return L&&!ie(L)&&(JSON&&JSON[j5]?(L=JSON[j5](S),P&&(!L||L==="{}")&&(ae(S[H1])?L=S[H1]():L=""+S)):L=""+S+" - (Missing JSON.stringify)"),L||""}s(vS,"_stringify");function py(S,P){var L=S;return S&&(L&&!ie(L)&&(L=S[yS]||S[CS]||L),L&&!ie(L)&&(L=vS(L,!0)),S.filename&&(L=L+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),P&&P!=="String"&&P!=="Object"&&P!=="Error"&&$r(L||"",P)===-1&&(L=P+": "+L),L||""}s(py,"_formatMessage");function Gq(S){try{if(te(S))return"hasFullStack"in S&&"typeName"in S}catch{}return!1}s(Gq,"_isExceptionDetailsInternal");function Vq(S){try{if(te(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch{}return!1}s(Vq,"_isExceptionInternal");function tP(S){return S&&S.src&&ie(S.src)&&S.obj&&pe(S.obj)}s(tP,"_isStackDetails");function dg(S){var P=S||"";ie(P)||(ie(P[qd])?P=P[qd]:P=""+P);var L=P[ly](`
`);return{src:P,obj:L}}s(dg,"_convertStackObj");function zq(S){for(var P=[],L=S[ly](`
`),$=0;$<L[Dn];$++){var de=L[$];L[$+1]&&(de+="@"+L[$+1],$++),P.push(de)}return{src:S,obj:P}}s(zq,"_getOperaStack");function rP(S){var P=null;if(S)try{if(S[qd])P=dg(S[qd]);else if(S[db]&&S[db][qd])P=dg(S[db][qd]);else if(S.exception&&S.exception[qd])P=dg(S.exception[qd]);else if(tP(S))P=S;else if(tP(S[AS]))P=S[AS];else if(_e()&&_e().opera&&S[yS])P=zq(S[uS]);else if(S.reason&&S.reason[qd])P=dg(S.reason[qd]);else if(ie(S))P=dg(S);else{var L=S[yS]||S[CS]||"";ie(S[Z5])&&(L&&(L+=`
`),L+=" from "+S[Z5]),L&&(P=dg(L))}}catch($){P=dg($)}return P||{src:"",obj:null}}s(rP,"_getStackFromErrorObj");function Yq(S){var P="";return S&&(S.obj?P=S.obj.join(`
`):P=S.src||""),P}s(Yq,"_formatStackTrace");function nP(S){var P,L=S.obj;if(L&&L[Dn]>0){P=[];var $=0,de=!1,we=0;xn(L,function(zn){if(de||fce(zn)){var Nn=We(zn);de=!0;var ki=pce(Nn,$);ki&&(we+=ki[Xx],P.push(ki),$++)}});var ke=32*1024;if(we>ke)for(var $e=0,it=P[Dn]-1,Et=0,mr=$e,Bn=it;$e<it;){var Xn=P[$e][Xx],vr=P[it][Xx];if(Et+=Xn+vr,Et>ke){var Br=Bn-mr+1;P.splice(mr,Br);break}mr=$e,Bn=it,$e++,it--}}return P}s(nP,"_parseStack");function fb(S){var P="";if(S&&(P=S.typeName||S[Pf]||"",!P))try{var L=/function (.{1,200})\(/,$=L.exec(S.constructor[H1]());P=$&&$[Dn]>1?$[1]:""}catch{}return P}s(fb,"_getErrorType");function iP(S){if(S)try{if(!ie(S)){var P=fb(S),L=vS(S,!1);return(!L||L==="{}")&&(S[db]&&(S=S[db],P=fb(S)),L=vS(S,!0)),$r(L,P)!==0&&P!=="String"?P+":"+L:L}}catch{}return""+(S||"")}s(iP,"_formatErrorCode");var am=function(){function S(P,L,$,de,we,ke){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var $e=this;$e.ver=2,Vq(L)?($e[Zx]=L[Zx]||[],$e[im]=L[im],$e[rd]=L[rd],L[fS]&&($e[fS]=L[fS]),L.id&&($e.id=L.id,L[im].id=L.id),L[eb]&&($e[eb]=L[eb]),W(L.isManual)||($e.isManual=L.isManual)):($||($={}),ke&&($.id=ke),$e[Zx]=[Xq(P,L,$)],$e[im]=cg(P,$),$e[rd]=Df(P,de),we&&($e[fS]=we),ke&&($e.id=ke))}return s(S,"Exception"),S.CreateAutoException=function(P,L,$,de,we,ke,$e,it){var Et=fb(we||ke||P);return{message:py(P,Et),url:L,lineNumber:$,columnNumber:de,error:iP(we||ke||P),evt:iP(ke||P),typeName:Et,stackDetails:rP($e||we||ke),errorSrc:it}},S.CreateFromInterface=function(P,L,$,de){var we=L[Zx]&&gi(L[Zx],function($e){return IL(P,$e)}),ke=new S(P,m5(m5({},L),{exceptions:we}),$,de);return ke},S.prototype.toInterface=function(){var P=this,L=P.exceptions,$=P.properties,de=P.measurements,we=P.severityLevel,ke=P.problemGroup,$e=P.id,it=P.isManual,Et=L instanceof Array&&gi(L,function(mr){return mr.toInterface()})||void 0;return{ver:"4.0",exceptions:Et,severityLevel:we,properties:$,measurements:de,problemGroup:ke,id:$e,isManual:it}},S.CreateSimpleException=function(P,L,$,de,we,ke){var $e;return{exceptions:[($e={},$e[G5]=!0,$e.message=P,$e.stack=we,$e.typeName=L,$e)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=iP,S}(),Kq=Kt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Jq(){var S=this,P=pe(S[Ud])&&gi(S[Ud],function($){return eH($)}),L={id:S.id,outerId:S.outerId,typeName:S[dS],message:S[uS],hasFullStack:S[G5],stack:S[qd],parsedStack:P||void 0};return L}s(Jq,"_toInterface");function Xq(S,P,L){var $,de,we,ke,$e,it,Et,mr;if(Gq(P))ke=P[dS],$e=P[uS],Et=P[qd],mr=P[Ud]||[],it=P[G5];else{var Bn=P,Xn=Bn&&Bn.evt;Ae(Bn)||(Bn=Bn[db]||Xn||Bn),ke=dl(S,fb(Bn))||nm,$e=z5(S,py(P||Bn,ke))||nm;var vr=P[AS]||rP(P);mr=nP(vr),pe(mr)&&gi(mr,function(Br){Br[V5]=dl(S,Br[V5]),Br[U0]=dl(S,Br[U0])}),Et=gL(S,Yq(vr)),it=pe(mr)&&mr[Dn]>0,L&&(L[dS]=L[dS]||ke)}return $={},$[uy]=Kq,$.id=de,$.outerId=we,$.typeName=ke,$.message=$e,$[G5]=it,$.stack=Et,$.parsedStack=mr,$.toInterface=Jq,$}s(Xq,"_createExceptionDetails");function IL(S,P){var L=pe(P[Ud])&&gi(P[Ud],function(de){return Zq(de)})||P[Ud],$=Xq(S,m5(m5({},P),{parsedStack:L}));return $}s(IL,"_createExDetailsFromInterface");function ES(S,P){var L=P[W1](uce);if(L&&L[Dn]>=4)S[U0]=L[1],S[tb]=parseInt(L[2]);else{var $=P[W1](dce);$&&$[Dn]>=3?(S[U0]=$[1],S[tb]=parseInt($[2])):S[U0]=P}}s(ES,"_parseFilename");function TL(S,P,L){var $=S[U0];P.fn&&L&&L[Dn]>P.fn&&(P.ln&&L[Dn]>P.ln?($=Sa(L[P.fn]||""),S[tb]=parseInt(Sa(L[P.ln]||""))||0):$=Sa(L[P.fn]||"")),$&&ES(S,$)}s(TL,"_handleFilename");function fce(S){var P=!1;if(S&&ie(S)){var L=Sa(S);L&&(P=Wq.test(L))}return P}s(fce,"_isStackFrame");var wL=Kt({level:1,method:1,assembly:0,fileName:0,line:0});function pce(S,P){var L,$;if(S&&ie(S)&&Sa(S)){$=(L={},L[uy]=wL,L.level=P,L.assembly=Sa(S),L.method=jq,L.fileName="",L.line=0,L.sizeInBytes=0,L);for(var de=0;de<bL[Dn];){var we=bL[de];if(we.chk&&!we.chk(S))break;we.pre&&(S=we.pre(S));var ke=S[W1](we.re);if(ke&&ke[Dn]>=we.len){we.m&&($.method=Sa(ke[we.m]||jq)),we.hdl?we.hdl($,we,ke):we.fn&&(we.ln?($[U0]=Sa(ke[we.fn]||""),$[tb]=parseInt(Sa(ke[we.ln]||""))||0):ES($,ke[we.fn]||""));break}de++}}return SL($)}s(pce,"_extractStackFrame");function Zq(S){var P,L=(P={},P[uy]=wL,P.level=S.level,P.method=S.method,P.assembly=S[V5],P.fileName=S[U0],P.line=S[tb],P.sizeInBytes=0,P);return SL(L)}s(Zq,"_stackFrameFromInterface");function SL(S){var P=ace;return S&&(P+=S.method[Dn],P+=S.assembly[Dn],P+=S.fileName[Dn],P+=S.level.toString()[Dn],P+=S.line.toString()[Dn],S[Xx]=P),S}s(SL,"_populateFrameSizeInBytes");function eH(S){return{level:S.level,method:S.method,assembly:S[V5],fileName:S[U0],line:S[tb]}}s(eH,"_parsedFrameToInterface");var tH=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(S,"DataPoint"),S}(),mce=function(){function S(P,L,$,de,we,ke,$e,it,Et){this.aiDataContract={ver:1,metrics:1,properties:0};var mr=this;mr.ver=2;var Bn=new tH;Bn[Yx]=de>0?de:void 0,Bn.max=isNaN(ke)||ke===null?void 0:ke,Bn.min=isNaN(we)||we===null?void 0:we,Bn[Pf]=dl(P,L)||nm,Bn.value=$,Bn.stdDev=isNaN($e)||$e===null?void 0:$e,mr.metrics=[Bn],mr[im]=cg(P,it),mr[rd]=Df(P,Et)}return s(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),pb="";function hce(S,P){return P===void 0&&(P=!1),S==null?P:S.toString()[zx]()==="true"}s(hce,"stringToBoolOrDefault");function _L(S){(isNaN(S)||S<0)&&(S=0),S=gx(S);var P=pb+S%1e3,L=pb+du(S/1e3)%60,$=pb+du(S/(1e3*60))%60,de=pb+du(S/(1e3*60*60))%24,we=du(S/(1e3*60*60*24));return P=P[Dn]===1?"00"+P:P[Dn]===2?"0"+P:P,L=L[Dn]<2?"0"+L:L,$=$[Dn]<2?"0"+$:$,de=de[Dn]<2?"0"+de:de,(we>0?we+".":pb)+de+":"+$+":"+L+"."+P}s(_L,"msToTimeSpan");function gce(S,P){var L=null;return xn(S,function($){if($.identifier===P)return L=$,-1}),L}s(gce,"getExtensionByName");function my(S,P,L,$,de){return!de&&ie(S)&&(S==="Script error."||S==="Script error")}s(my,"isCrossOriginError");var Ace=function(){function S(P,L,$,de,we,ke,$e){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var it=this;it.ver=2,it.id=rb(P,$e),it.url=om(P,$),it[Pf]=dl(P,L)||nm,isNaN(de)||(it[pS]=_L(de)),it[im]=cg(P,we),it[rd]=Df(P,ke)}return s(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),mb=function(){function S(P,L,$,de,we,ke,$e,it,Et,mr,Bn,Xn){Et===void 0&&(Et="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var vr=this;vr.ver=2,vr.id=L,vr[pS]=_L(we),vr.success=ke,vr.resultCode=$e+"",vr.type=dl(P,Et);var Br=Fq(P,$,it,de);vr.data=om(P,de)||Br.data,vr.target=dl(P,Br.target),mr&&(vr.target="".concat(vr.target," | ").concat(mr)),vr[Pf]=dl(P,Br[Pf]),vr[im]=cg(P,Bn),vr[rd]=Df(P,Xn)}return s(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),RL=function(){function S(P,L,$,de,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var ke=this;ke.ver=2,L=L||nm,ke[uS]=z5(P,L),ke[im]=cg(P,de),ke[rd]=Df(P,we),$&&(ke[fS]=$)}return s(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),xS=function(){function S(P,L,$,de,we,ke,$e){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var it=this;it.ver=2,it.url=om(P,$),it[Pf]=dl(P,L)||nm,it[im]=cg(P,we),it[rd]=Df(P,ke),$e&&(it.domProcessing=$e.domProcessing,it[pS]=$e[pS],it.networkConnect=$e.networkConnect,it.perfTotal=$e.perfTotal,it.receivedResponse=$e.receivedResponse,it.sentRequest=$e.sentRequest)}return s(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),yce=function(){function S(P,L){this.aiDataContract={baseType:1,baseData:1},this.baseType=P,this.baseData=L}return s(S,"Data"),S}(),oP=Kp({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Cce=function(){function S(){}return s(S,"ConfigurationManager"),S.getConfig=function(P,L,$,de){de===void 0&&(de=!1);var we;return $&&P[Jx]&&P[Jx][$]&&!W(P[Jx][$][L])?we=P[Jx][$][L]:we=P[L],W(we)?de:we},S}();function cm(S){var P="ai."+S+".";return function(L){return P+L}}s(cm,"_aiNameFunc");var hb=cm("application"),pc=cm("device"),sP=cm("location"),gb=cm("operation"),aP=cm("session"),hy=cm("user"),$1=cm("cloud"),bS=cm("internal"),gy=function(S){XA(P,S);function P(){return S.call(this)||this}return s(P,"ContextTagKeys"),P}(tS({applicationVersion:hb("ver"),applicationBuild:hb("build"),applicationTypeId:hb("typeId"),applicationId:hb("applicationId"),applicationLayer:hb("layer"),deviceId:pc("id"),deviceIp:pc("ip"),deviceLanguage:pc("language"),deviceLocale:pc("locale"),deviceModel:pc("model"),deviceFriendlyName:pc("friendlyName"),deviceNetwork:pc("network"),deviceNetworkName:pc("networkName"),deviceOEMName:pc("oemName"),deviceOS:pc("os"),deviceOSVersion:pc("osVersion"),deviceRoleInstance:pc("roleInstance"),deviceRoleName:pc("roleName"),deviceScreenResolution:pc("screenResolution"),deviceType:pc("type"),deviceMachineName:pc("machineName"),deviceVMName:pc("vmName"),deviceBrowser:pc("browser"),deviceBrowserVersion:pc("browserVersion"),locationIp:sP("ip"),locationCountry:sP("country"),locationProvince:sP("province"),locationCity:sP("city"),operationId:gb("id"),operationName:gb("name"),operationParentId:gb("parentId"),operationRootId:gb("rootId"),operationSyntheticSource:gb("syntheticSource"),operationCorrelationVector:gb("correlationVector"),sessionId:aP("id"),sessionIsFirst:aP("isFirst"),sessionIsNew:aP("isNew"),userAccountAcquisitionDate:hy("accountAcquisitionDate"),userAccountId:hy("accountId"),userAgent:hy("userAgent"),userId:hy("id"),userStoreRegion:hy("storeRegion"),userAuthUserId:hy("authUserId"),userAnonymousUserAcquisitionDate:hy("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:hy("authUserAcquisitionDate"),cloudName:$1("name"),cloudRole:$1("role"),cloudRoleVer:$1("roleVer"),cloudRoleInstance:$1("roleInstance"),cloudEnvironment:$1("environment"),cloudLocation:$1("location"),cloudDeploymentUnit:$1("deploymentUnit"),internalNodeName:bS("nodeName"),internalSdkVersion:bS("sdkVersion"),internalAgentVersion:bS("agentVersion"),internalSnippet:bS("snippet"),internalSdkSrc:bS("sdkSrc")}));function kL(S,P,L,$,de,we){L=dl($,L)||nm,(W(S)||W(P)||W(L))&&qe("Input doesn't contain all required fields");var ke="";S[uL]&&(ke=S[uL],delete S[uL]);var $e={name:L,time:rg(new Date),iKey:ke,ext:we||{},tags:[],data:{},baseType:P,baseData:S};return W(de)||lt(de,function(it,Et){$e.data[it]=Et}),$e}s(kL,"createTelemetryItem");var PL=function(){function S(){}return s(S,"TelemetryItemCreator"),S.create=kL,S}(),vce={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Ece=new gy;function rH(S){var P=null;if(ae(Event))P=new Event(S);else{var L=Z();L&&L.createEvent&&(P=L.createEvent("Event"),P.initEvent(S,!0,!0))}return P}s(rH,"createDomEvent");function DL(S,P){Tq(S,null,null,P)}s(DL,"_disableEvents");function nH(S){var P=Z(),L=St(),$=!1,de=[],we=1;L&&!W(L.onLine)&&!L.onLine&&(we=2);var ke=0,$e=Xn(),it=Yae(ig("OfflineListener"),S);try{if(mr(_e())&&($=!0),P){var Et=P.body||P;Et.ononline&&mr(Et)&&($=!0)}}catch{$=!1}function mr(Zi){var Bc=!1;return Zi&&(Bc=cL(Zi,"online",zn,it),Bc&&cL(Zi,"offline",Nn,it)),Bc}s(mr,"_enableEvents");function Bn(){return $e}s(Bn,"_isOnline");function Xn(){return!(ke===2||we===2)}s(Xn,"calCurrentState");function vr(){var Zi=Xn();$e!==Zi&&($e=Zi,xn(de,function(Bc){var yb={isOnline:$e,rState:we,uState:ke};try{Bc(yb)}catch{}}))}s(vr,"listnerNoticeCheck");function Br(Zi){ke=Zi,vr()}s(Br,"setOnlineState");function zn(){we=1,vr()}s(zn,"_setOnline");function Nn(){we=2,vr()}s(Nn,"_setOffline");function ki(){var Zi=_e();if(Zi&&$){if(DL(Zi,it),P){var Bc=P.body||P;K(Bc.ononline)||DL(Bc,it)}$=!1}}s(ki,"_unload");function Po(Zi){return de.push(Zi),{rm:s(function(){var Bc=de.indexOf(Zi);if(Bc>-1)return de.splice(Bc,1)},"rm")}}return s(Po,"addListener"),{isOnline:Bn,isListening:s(function(){return $},"isListening"),unload:ki,addListener:Po,setOnlineState:Br}}s(nH,"createOfflineListener");var xce="AppInsightsPropertiesPlugin",BL="AppInsightsChannelPlugin",Ab="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Ab,t.BreezeChannelIdentifier=BL,t.ConfigurationManager=Cce,t.ConnectionStringParser=J5,t.ContextTagKeys=gy,t.CtxTagKeys=Ece,t.DEFAULT_BREEZE_ENDPOINT=lL,t.DEFAULT_BREEZE_PATH=lS,t.Data=yce,t.DisabledPropertyName=H5,t.DistributedTracingModes=tce,t.Envelope=X5,t.Event=sce,t.EventPersistence=mS,t.Exception=am,t.Extensions=vce,t.HttpMethod=Sq,t.Metric=mce,t.PageView=Ace,t.PageViewPerformance=xS,t.ProcessLegacy=W5,t.PropertiesPluginIdentifier=xce,t.RemoteDependencyData=mb,t.RequestHeaders=_q,t.SampleRate=wq,t.SeverityLevel=oP,t.TelemetryItemCreator=PL,t.ThrottleMgr=oce,t.Trace=RL,t.correlationIdCanIncludeCorrelationHeader=dy,t.correlationIdGetCorrelationContext=Lq,t.correlationIdGetCorrelationContextValue=Mq,t.correlationIdGetPrefix=vL,t.correlationIdSetPrefix=CL,t.createDistributedTraceContextFromTrace=EL,t.createDomEvent=rH,t.createOfflineListener=nH,t.createTelemetryItem=kL,t.createTraceParent=Wx,t.dataSanitizeException=gL,t.dataSanitizeId=rb,t.dataSanitizeInput=AL,t.dataSanitizeKey=hL,t.dataSanitizeKeyAndAddUniqueness=mL,t.dataSanitizeMeasurements=Df,t.dataSanitizeMessage=z5,t.dataSanitizeProperties=cg,t.dataSanitizeString=dl,t.dataSanitizeUrl=om,t.dateTimeUtilsDuration=ece,t.dateTimeUtilsNow=Zae,t.dsPadNumber=Rq,t.findAllScripts=oL,t.findW3cTraceParent=iL,t.formatTraceParent=U1,t.getExtensionByName=gce,t.isBeaconApiSupported=ry,t.isCrossOriginError=my,t.isInternalApplicationInsightsEndpoint=Nq,t.isSampledFlag=F5,t.isValidSpanId=jx,t.isValidTraceId=$x,t.isValidTraceParent=Gx,t.msToTimeSpan=_L,t.parseConnectionString=K5,t.parseTraceParent=kf,t.strNotSpecified=nm,t.stringToBoolOrDefault=hce,t.urlGetAbsoluteUrl=Jae,t.urlGetCompleteUrl=Pq,t.urlGetPathName=Xae,t.urlParseFullHost=lg,t.urlParseHost=Dq,t.urlParseUrl=nb,t.utlCanUseLocalStorage=Y5,t.utlCanUseSessionStorage=ug,t.utlDisableStorage=hS,t.utlEnableStorage=rce,t.utlGetLocalStorage=Qq,t.utlGetSessionStorage=qq,t.utlGetSessionStorageKeys=lb,t.utlRemoveSessionStorage=Hq,t.utlRemoveStorage=Bf,t.utlSetLocalStorage=Uq,t.utlSetSessionStorage=nce,t.utlSetStoragePrefix=gS})});var sLe=q((aj,oLe)=>{f();(function(t,e){typeof aj=="object"&&typeof oLe<"u"?e(aj):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(aj,function(t){"use strict";function e(v,x){return v||x}s(e,"_pureAssign");function r(v,x){return v[x]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),w=r(b,l),R=e(String),D=r(R,l),N=e(Math),O=e(Array),Y=r(O,l),ee=r(Y,"slice");function V(v,x){try{return{v:v.apply(this,x)}}catch(T){return{e:T}}}s(V,"safe");function H(v,x){var T=V(v);return T.e?x:T.v}s(H,"safeGet");var U;function X(v){return function(x){return typeof x===v}}s(X,"_createIs");function K(v){var x="[object "+v+"]";return function(T){return!!(T&&j(T)===x)}}s(K,"_createObjIs");function j(v){return w[E].call(v)}s(j,"objToString");function W(v){return typeof v===d||v===d}s(W,"isUndefined");function J(v){return!te(v)}s(J,"isStrictUndefined");function ie(v){return v===i||W(v)}s(ie,"isNullOrUndefined");function ae(v){return v===i||!te(v)}s(ae,"isStrictNullOrUndefined");function te(v){return!!v||v!==n}s(te,"isDefined");function pe(v){return!U&&(U=["string","number","boolean",d,"symbol","bigint"]),v!==c&&U.indexOf(v)!==-1}s(pe,"isPrimitiveType");var Ae=X("string"),Oe=X(a);function Te(v){return!v&&ie(v)?!1:!!v&&typeof v===c}s(Te,"isObject");var Je=r(O,"isArray"),Me=K("Date"),lt=X("number"),_t=X("boolean"),vt=K("Error");function ht(v){return!!(v&&v.then&&Oe(v.then))}s(ht,"isPromiseLike");function ue(v){return!(!v||H(function(){return!(v&&0+v)},!v))}s(ue,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(v,x){return!!v&&w.hasOwnProperty[y](v,x)}s(ye,"objHasOwnProperty");var We=e(r(b,"hasOwn"),se);function se(v,x){return ye(v,x)||!!Ue(v,x)}s(se,"polyObjHasOwn");function le(v,x,T){if(v&&Te(v)){for(var k in v)if(We(v,k)&&x[y](T||v,k,v[k])===-1)break}}s(le,"objForEachKey");var qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Be(v){var x={};if(x[qe.c]=!0,x[qe.e]=!0,v.l){x.get=function(){return v.l.v};var T=Ue(v.l,"v");T&&T.set&&(x.set=function(k){v.l.v=k})}return le(v,function(k,M){x[qe[k]]=J(M)?x[qe[k]]:M}),x}s(Be,"_createProp");var xe=r(b,"defineProperty");function je(v,x,T){return xe(v,x,Be(T))}s(je,"objDefine");function et(v,x,T,k,M){var Q={};return le(v,function(G,ce){pt(Q,G,x?ce:G),pt(Q,ce,T?ce:G)}),k?k(Q):Q}s(et,"_createKeyValueMap");function pt(v,x,T,k){xe(v,x,{value:T,enumerable:!0,writable:!1})}s(pt,"_assignMapValue");var Mt=e(R),Kt="[object Error]";function Ot(v,x){var T=o,k=w[E][y](v);k===Kt&&(v={stack:Mt(v.stack),message:Mt(v.message),name:Mt(v.name)});try{T=JSON.stringify(v,i,x?typeof x=="number"?x:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Mt(v)}catch(M){T=" - "+Ot(M,x)}return k+": "+T}s(Ot,"dumpObj");function Hr(v){throw new Error(v)}s(Hr,"throwError");function Rr(v){throw new TypeError(v)}s(Rr,"throwTypeError");var on=r(b,"freeze");function ve(v){return v}s(ve,"_doNothing");function Ge(v){return v[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Tt=r(b,"keys");function nr(v){return on&&le(v,function(x,T){(Je(T)||Te(T))&&nr(T)}),Xt(v)}s(nr,"objDeepFreeze");var Xt=e(on,ve),br=e(r(b,"getPrototypeOf"),Ge);function cr(v){return et(v,1,0,Xt)}s(cr,"createEnum");function er(v){return et(v,0,0,Xt)}s(er,"createEnumKeyMap");function ar(v){var x={};return le(v,function(T,k){pt(x,T,k[1]),pt(x,k[0],k[1])}),Xt(x)}s(ar,"createSimpleMap");function tr(v){return ar(v)}s(tr,"createTypeMap");var Pr=er({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Wr="__tsUtils$gblCfg",en;function gn(){var v;return typeof globalThis!==d&&(v=globalThis),!v&&typeof self!==d&&(v=self),!v&&typeof window!==d&&(v=window),!v&&typeof global!==d&&(v=global),v}s(gn,"_getGlobalValue");function Zn(){if(!en){var v=V(gn).v||{};en=v[Wr]=v[Wr]||{}}return en}s(Zn,"_getGlobalConfig");var In=Jn;function Jn(v,x,T){var k=x?x[v]:i;return function(M){var Q=(M?M[v]:i)||k;if(Q||T){var G=arguments;return(Q||T).apply(M,Q?ee[y](G,1):G)}Rr('"'+Mt(v)+'" not defined for '+Ot(M))}}s(Jn,"_unwrapFunctionWithPoly");function tn(v){return function(x){return x[v]}}s(tn,"_unwrapProp");var Vn=r(N,"min"),Pe=r(N,"max"),z=In("slice",D),Ce=In("substring",D),Ie=Jn("substr",D,F);function F(v,x,T){return ie(v)&&Rr("Invalid "+Ot(v)),T<0?o:(x=x||0,x<0&&(x=Pe(x+v[g],0)),W(T)?z(v,x):z(v,x,x+T))}s(F,"polyStrSubstr");function B(v,x){return Ce(v,0,x)}s(B,"strLeft");var Z="_urid",ge;function _e(){if(!ge){var v=Zn();ge=v.gblSym=v.gblSym||{k:{},s:{}}}return ge}s(_e,"_globalSymbolRegistry");var ut;function St(v){var x={description:Mt(v),toString:s(function(){return m+"("+v+")"},"toString")};return x[h]=!0,x}s(St,"polyNewSymbol");function zt(v){var x=_e();if(!We(x.k,v)){var T=St(v),k=Tt(x.s).length;T[Z]=function(){return k+"_"+T[E]()},x.k[v]=T,x.s[T[Z]()]=Mt(v)}return x.k[v]}s(zt,"polySymbolFor");function Zt(v){!ut&&(ut={});var x,T=Pr[v];return T&&(x=ut[T]=ut[T]||St(m+"."+T)),x}s(Zt,"polyGetKnownSymbol");var Yt;function xt(){Yt=Zn()}s(xt,"_initTestHooks");function Ar(v){var x={};return!Yt&&xt(),x.b=Yt.lzy,xe(x,"v",{configurable:!0,get:s(function(){var T=v();return Yt.lzy||xe(x,"v",{value:T}),x.b=Yt.lzy,T},"get")}),x}s(Ar,"getLazy");function si(v){return xe({toJSON:s(function(){return v},"toJSON")},"v",{value:v})}s(si,"createCachedValue");var Ji="window",xn;function uo(v,x){var T;return function(){return!Yt&&xt(),(!T||Yt.lzy)&&(T=si(V(v,x).v)),T.v}}s(uo,"_getGlobalInstFn");function gi(v){return!Yt&&xt(),(!xn||v===!1||Yt.lzy)&&(xn=si(V(gn).v||i)),xn.v}s(gi,"getGlobal");function Vo(v,x){var T;if(!xn||x===!1?T=gi(x):T=xn.v,T&&T[v])return T[v];if(v===Ji)try{return window}catch{}return i}s(Vo,"getInst");function ua(){return!!cc()}s(ua,"hasDocument");var cc=uo(Vo,["document"]);function ko(){return!!Qs()}s(ko,"hasWindow");var Qs=uo(Vo,[Ji]);function Xu(){return!!lc()}s(Xu,"hasNavigator");var lc=uo(Vo,["navigator"]),Vh=uo(function(){return!!V(function(){return process&&(process.versions||{}).node}).v}),ll,zh;function Yh(){return ll=si(V(Vo,[m]).v),ll}s(Yh,"_initSymbol");function mx(v){var x=(Yt.lzy?0:ll)||Yh();return x.v?x.v[v]:n}s(mx,"_getSymbolKey");function Sa(){return!!du()}s(Sa,"hasSymbol");function du(){return!Yt&&xt(),((Yt.lzy?0:ll)||Yh()).v}s(du,"getSymbol");function fu(v,x){var T=Pr[v];!Yt&&xt();var k=(Yt.lzy?0:ll)||Yh();return k.v?k.v[T||v]:x?n:Zt(v)}s(fu,"getKnownSymbol");function Zu(v,x){!Yt&&xt();var T=(Yt.lzy?0:ll)||Yh();return T.v?T.v(v):x?i:St(v)}s(Zu,"newSymbol");function Kh(v){return!Yt&&xt(),zh=(Yt.lzy?0:zh)||si(V(mx,["for"]).v),(zh.v||zt)(v)}s(Kh,"symbolFor");function Nl(v){return!!v&&Oe(v.next)}s(Nl,"isIterator");function hx(v){return!ae(v)&&Oe(v[fu(3)])}s(hx,"isIterable");var w1;function gx(v,x,T){if(v&&(Nl(v)||(!w1&&(w1=si(fu(3))),v=v[w1.v]?v[w1.v]():i),Nl(v))){var k=n,M=n;try{for(var Q=0;!(M=v.next()).done&&x[y](T||v,M.value,Q,v)!==-1;)Q++}catch(G){k={e:G},v.throw&&(M=i,v.throw(k))}finally{try{M&&!M.done&&v.return&&v.return(M)}finally{if(k)throw k.e}}}}s(gx,"iterForOf");function If(v,x,T){return v.apply(x,T)}s(If,"fnApply");function Tf(v,x){return!W(x)&&v&&(Je(x)?If(v.push,v,x):Nl(x)||hx(x)?gx(x,function(T){v.push(T)}):v.push(x)),v}s(Tf,"arrAppend");function $r(v,x,T){if(v)for(var k=v[g]>>>0,M=0;M<k&&!(M in v&&x[y](T||v,v[M],M,v)===-1);M++);}s($r,"arrForEach");var uc=In("indexOf",Y),Jh=In("map",Y);function Xh(v,x,T){return((v?v.slice:i)||ee).apply(v,ee[y](arguments,1))}s(Xh,"arrSlice");var L8=In("reduce",Y),Dc=e(r(b,"create"),VA);function VA(v){if(!v)return{};var x=typeof v;x!==c&&x!==a&&Rr("Prototype must be an Object or function: "+Ot(v));function T(){}return s(T,"tempFunc"),T[l]=v,new T}s(VA,"polyObjCreate");var S1;function Kp(v,x){var T=b.setPrototypeOf||function(k,M){var Q;!S1&&(S1=si((Q={},Q[u]=[],Q instanceof Array))),S1.v?k[u]=M:le(M,function(G,ce){return k[G]=ce})};return T(v,x)}s(Kp,"objSetPrototypeOf");function zA(v,x,T){V(je,[x,A,{v,c:!0,e:!1}]),x=Kp(x,T);function k(){this[p]=x,V(je,[this,A,{v,c:!0,e:!1}])}return s(k,"__"),x[l]=T===i?Dc(T):(k[l]=T[l],new k),x}s(zA,"_createCustomError");function Ax(v,x){x&&(v[A]=x)}s(Ax,"_setName");function gs(v,x,T){var k=T||Error,M=k[l][A],Q=Error.captureStackTrace;return zA(v,function(){var G=this,ce=arguments;try{V(Ax,[k,v]);var fe=If(k,G,ee[y](ce))||G;if(fe!==G){var Ee=br(G);Ee!==br(fe)&&Kp(fe,Ee)}return Q&&Q(fe,G[p]),x&&x(fe,ce),fe}finally{V(Ax,[k,M])}},k)}s(gs,"createCustomError");function ed(){return(Date.now||YA)()}s(ed,"utcNow");function YA(){return new Date().getTime()}s(YA,"polyUtcNow");function c5(v){return s(function(T){return ie(T)&&Rr("strTrim called ["+Ot(T)+"]"),T&&T.replace&&(T=T.replace(v,o)),T},"_doTrim")}s(c5,"_createTrimFn");var M8=c5(/^\s+|(?=\s)\s+$/g),Xi=Jn("trim",D,M8),KA=r(N,"floor"),Zh,l5,yx;function td(v){if(!v||typeof v!==c)return!1;yx||(yx=ko()?Qs():!0);var x=!1;if(v!==yx){l5||(Zh=Function[l][E],l5=Zh[y](b));try{var T=br(v);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&Zh[y](T)===l5))}catch{}}return x}s(td,"isPlainObject");function F8(v){return v.value&&u5(v),!0}s(F8,"_defaultDeepCopyHandler");var O8=[Cx,u5,iq,JA];function Q8(v,x,T,k){var M;return $r(v,function(Q){if(Q.k===x)return M=Q,-1}),M||(M={k:x,v:x},v.push(M),k(M)),M.v}s(Q8,"_getSetVisited");function _1(v,x,T,k){var M=T.handler,Q=T.path?k?T.path.concat(k):T.path:[],G={handler:T.handler,src:T.src,path:Q},ce=typeof x,fe=!1,Ee=x===i;Ee||(x&&ce===c?fe=td(x):Ee=pe(ce));var Re={type:ce,isPrim:Ee,isPlain:fe,value:x,result:x,path:Q,origin:T.src,copy:s(function(Qe,Ze){return _1(v,Qe,Ze?G:T,Ze)},"copy"),copyTo:s(function(Qe,Ze){return U8(v,Qe,Ze,G)},"copyTo")};return Re.isPrim?M&&M[y](T,Re)?Re.result:x:Q8(v,x,Q,function(Qe){je(Re,"result",{g:s(function(){return Qe.v},"g"),s:s(function(Ye){Qe.v=Ye},"s")});for(var Ze=0,He=M;!(He||(Ze<O8.length?O8[Ze++]:F8))[y](T,Re);)He=i})}s(_1,"_deepCopy");function U8(v,x,T,k){if(!ie(T))for(var M in T)x[M]=_1(v,T[M],k,M);return x}s(U8,"_copyProps");function nq(v,x,T){var k={handler:T,src:x,path:[]};return U8([],v,x,k)}s(nq,"objCopyProps");function q8(v,x){var T={handler:x,src:v};return _1([],v,T)}s(q8,"objDeepCopy");function Cx(v){var x=v.value;if(Je(x)){var T=v.result=[];return T.length=x.length,v.copyTo(T,x),!0}return!1}s(Cx,"arrayDeepCopyHandler");function JA(v){var x=v.value;return Me(x)?(v.result=new Date(x.getTime()),!0):!1}s(JA,"dateDeepCopyHandler");function iq(v){return v.type===a}s(iq,"functionDeepCopyHandler");function u5(v){var x=v.value;if(x&&v.isPlain){var T=v.result={};return v.copyTo(T,x),!0}return!1}s(u5,"plainObjDeepCopyHandler");function H8(v,x){return $r(x,function(T){nq(v,T)}),v}s(H8,"_doExtend");function d5(v,x,T,k,M,Q,G){return H8(q8(v)||{},ee[y](arguments))}s(d5,"deepExtend");var Dae=tn(g),Bae=r(N,"round"),oq=Jn("endsWith",D,Nae);function Nae(v,x,T){Ae(v)||Rr("'"+Ot(v)+"' is not a string");var k=Ae(x)?x:Mt(x),M=!W(T)&&T<v[g]?T:v[g];return Ce(v,M-k[g],M)===k}s(Nae,"polyStrEndsWith");var eg=In("indexOf",D),f5="ref",W8="unref",p5="hasRef",Lae="enabled";function m5(v,x,T){var k=!0,M=v?x(i):i,Q;function G(){return k=!1,M&&M[W8]&&M[W8](),Q}s(G,"_unref");function ce(){M&&T(M),M=i}s(ce,"_cancel");function fe(){return M=x(M),k||G(),Q}s(fe,"_refresh");function Ee(Re){!Re&&M&&ce(),Re&&!M&&fe()}return s(Ee,"_setEnabled"),Q={cancel:ce,refresh:fe},Q[p5]=function(){return M&&M[p5]?M[p5]():k},Q[f5]=function(){return k=!0,M&&M[f5]&&M[f5](),Q},Q[W8]=G,Q=xe(Q,Lae,{get:s(function(){return!!M},"get"),set:Ee}),{h:Q,dn:s(function(){M=i},"dn")}}s(m5,"_createTimerHandler");function h5(v,x,T){var k=Je(x),M=k?x.length:0,Q=(M>0?x[0]:k?n:x)||setTimeout,G=(M>1?x[1]:n)||clearTimeout,ce=T[0];T[0]=function(){fe.dn(),If(ce,n,ee[y](arguments))};var fe=m5(v,function(Ee){if(Ee){if(Ee.refresh)return Ee.refresh(),Ee;If(G,n,[Ee])}return If(Q,n,T)},function(Ee){If(G,n,[Ee])});return fe.h}s(h5,"_createTimeoutWith");function XA(v,x){return h5(!0,n,ee[y](arguments))}s(XA,"scheduleTimeout");function g5(v,x){return h5(!1,n,ee[y](arguments))}s(g5,"createTimeout");var R1,wf="constructor",Sf="prototype",k1="function",vx="_dynInstFuncs",ZA="_isDynProxy",Ex="_dynClass",$8="_dynCls$",P1="_dynInstChk",xx=P1,j8="_dfOpts",A5="_unknown_",bx="__proto__",Jw="_dyn"+bx,y5="__dynProto$Gbl",Ix="_dynInstProto",Tx="useBaseInst",Xw="setInstFuncs",D1=Object,wx=D1.getPrototypeOf,G8=D1.getOwnPropertyNames,C5=gi(),Sx=C5[y5]||(C5[y5]={o:(R1={},R1[Xw]=!0,R1[Tx]=!0,R1),n:1e3});function _x(v){return v&&(v===D1[Sf]||v===Array[Sf])}s(_x,"_isObjectOrArrayPrototype");function tg(v){return _x(v)||v===Function[Sf]}s(tg,"_isObjectArrayOrFunctionPrototype");function Jp(v){var x;if(v){if(wx)return wx(v);var T=v[bx]||v[Sf]||(v[wf]?v[wf][Sf]:null);x=v[Jw]||T,ye(v,Jw)||(delete v[Ix],x=v[Jw]=v[Ix]||v[Jw],v[Ix]=T)}return x}s(Jp,"_getObjProto");function Rx(v,x){var T=[];if(G8)T=G8(v);else for(var k in v)typeof k=="string"&&ye(v,k)&&T.push(k);if(T&&T.length>0)for(var M=0;M<T.length;M++)x(T[M])}s(Rx,"_forEachProp");function kx(v,x,T){return x!==wf&&typeof v[x]===k1&&(T||ye(v,x))&&x!==bx&&x!==Sf}s(kx,"_isDynamicCandidate");function v5(v){Rr("DynamicProto: "+v)}s(v5,"_throwTypeError");function V8(v){var x=Dc(null);return Rx(v,function(T){!x[T]&&kx(v,T,!1)&&(x[T]=v[T])}),x}s(V8,"_getInstanceFuncs");function z8(v,x){for(var T=v.length-1;T>=0;T--)if(v[T]===x)return!0;return!1}s(z8,"_hasVisited");function Mae(v,x,T,k){function M(fe,Ee,Re){var Qe=Ee[Re];if(Qe[ZA]&&k){var Ze=fe[vx]||{};Ze[xx]!==!1&&(Qe=(Ze[Ee[Ex]]||{})[Re]||Qe)}return function(){return Qe.apply(fe,arguments)}}s(M,"_instFuncProxy");var Q=Dc(null);Rx(T,function(fe){Q[fe]=M(x,T,fe)});for(var G=Jp(v),ce=[];G&&!tg(G)&&!z8(ce,G);)Rx(G,function(fe){!Q[fe]&&kx(G,fe,!wx)&&(Q[fe]=M(x,G,fe))}),ce.push(G),G=Jp(G);return Q}s(Mae,"_getBaseFuncs");function Fae(v,x,T,k){var M=null;if(v&&ye(T,Ex)){var Q=v[vx]||Dc(null);if(M=(Q[T[Ex]]||Dc(null))[x],M||v5("Missing ["+x+"] "+k1),!M[P1]&&Q[xx]!==!1){for(var G=!ye(v,x),ce=Jp(v),fe=[];G&&ce&&!tg(ce)&&!z8(fe,ce);){var Ee=ce[x];if(Ee){G=Ee===k;break}fe.push(ce),ce=Jp(ce)}try{G&&(v[x]=M),M[P1]=1}catch{Q[xx]=!1}}}return M}s(Fae,"_getInstFunc");function Oae(v,x,T){var k=x[v];return k===T&&(k=Jp(x)[v]),typeof k!==k1&&v5("["+v+"] is not a "+k1),k}s(Oae,"_getProtoFunc");function Qae(v,x,T,k,M){function Q(fe,Ee){var Re=s(function(){var Qe=Fae(this,Ee,fe,Re)||Oae(Ee,fe,Re);return Qe.apply(this,arguments)},"dynProtoProxy");return Re[ZA]=1,Re}if(s(Q,"_createDynamicPrototype"),!_x(v)){var G=T[vx]=T[vx]||Dc(null);if(!_x(G)){var ce=G[x]=G[x]||Dc(null);G[xx]!==!1&&(G[xx]=!!M),_x(ce)||Rx(T,function(fe){kx(T,fe,!1)&&T[fe]!==k[fe]&&(ce[fe]=T[fe],delete T[fe],(!ye(v,fe)||v[fe]&&!v[fe][ZA])&&(v[fe]=Q(v,fe)))})}}}s(Qae,"_populatePrototype");function Y8(v,x){if(wx){for(var T=[],k=Jp(x);k&&!tg(k)&&!z8(T,k);){if(k===v)return!0;T.push(k),k=Jp(k)}return!1}return!0}s(Y8,"_checkPrototype");function Zw(v,x){return ye(v,Sf)?v.name||x||A5:((v||{})[wf]||{}).name||x||A5}s(Zw,"_getObjName");function pu(v,x,T,k){ye(v,Sf)||v5("theClass is an invalid class definition.");var M=v[Sf];Y8(M,x)||v5("["+Zw(v)+"] not in hierarchy of ["+Zw(x)+"]");var Q=null;ye(M,Ex)?Q=M[Ex]:(Q=$8+Zw(v,"_")+"$"+Sx.n,Sx.n++,M[Ex]=Q);var G=pu[j8],ce=!!G[Tx];ce&&k&&k[Tx]!==void 0&&(ce=!!k[Tx]);var fe=V8(x),Ee=Mae(M,x,fe,ce);T(x,Ee);var Re=!!wx&&!!G[Xw];Re&&k&&(Re=!!k[Xw]),Qae(M,Q,x,fe,Re!==!1)}s(pu,"dynamicProto"),pu[j8]=Sx.o;var _a="function",sq="object",aq="undefined",eS="prototype",K8=Object,J8=K8[eS];(gi()||{}).Symbol,(gi()||{}).Reflect;var E5="hasOwnProperty",cq=s(function(v){for(var x,T=1,k=arguments.length;T<k;T++){x=arguments[T];for(var M in x)J8[E5].call(x,M)&&(v[M]=x[M])}return v},"__objAssignFnImpl"),rg=ft||cq,ey=s(function(v,x){return ey=K8.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var M in k)k[E5](M)&&(T[M]=k[M])},ey(v,x)},"extendStaticsFn");function tS(v,x){typeof x!==_a&&x!==null&&Rr("Class extends value "+String(x)+" is not a constructor or null"),ey(v,x);function T(){this.constructor=v}s(T,"__"),v[eS]=x===null?Dc(x):(T[eS]=x[eS],new T)}s(tS,"__extendsFn");function lq(v,x){for(var T=0,k=x.length,M=v.length;T<k;T++,M++)v[M]=x[T];return v}s(lq,"__spreadArrayFn");var x5=cr,Uae=tr,ty=x5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Px="toLowerCase",ai="length",Dx="warnToConsole",B1="throwInternal",ng="watch",b5="apply",go="push",Bx="splice",dc="logger",Nx="cancel",rS="initialize",ry="identifier",nS="removeNotificationListener",I5="addNotificationListener",Xp="isInitialized",Lx="value",F0="getNotifyMgr",Mx="getPlugin",ny="name",Ll="processNext",Fx="getProcessTelContext",Zp="enabled",uq="stopPollingInternalLogs",N1="unload",T5="onComplete",Ox="version",dq="loggingLevelConsole",L1="createNew",em="teardown",w5="messageId",M1="message",tm="diagLog",S5="_doTeardown",ig="update",rm="getNext",iy="setNextPlugin",_5="userAgent",oy="split",sy="replace",mu="type",X8="evtName",iS="status",Z8="getAllResponseHeaders",eL="isChildEvt",Qx="data",ay="getCtx",O0="setCtx",fq="itemsReceived",og="urlString",tL="headers",sg="timeout",pq="traceFlags",Ux;function rL(v,x){Ux||(Ux=gs("AggregationError",function(k,M){M[ai]>1&&(k.errors=M[1])}));var T=v||"One or more errors occurred.";throw $r(x,function(k,M){T+=`
`.concat(M," > ").concat(Ot(k))}),new Ux(T,x||[])}s(rL,"throwAggregationError");var F1="Promise",O1="rejected";function _f(v,x){return mq(v,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:O1,rejected:!0,reason:T}):T})}s(_f,"doAwaitResponse");function mq(v,x,T,k){var M=v;try{if(ht(v))(x||T)&&(M=v.then(x,T));else try{x&&(M=x(v))}catch(Q){if(T)M=T(Q);else throw Q}}finally{k&&qae(M,k)}return M}s(mq,"doAwait");function qae(v,x){var T=v;return x&&(ht(v)?v.finally?T=v.finally(x):T=v.then(function(k){return x(),k},function(k){throw x(),k}):x()),T}s(qae,"doFinally");var hq=["pending","resolving","resolved",O1],gq="dispatchEvent",oS;function Aq(v){var x;return v&&v.createEvent&&(x=v.createEvent("Event")),!!x&&x.initEvent}s(Aq,"_hasInitEventFn");function R5(v,x,T,k){var M=cc();!oS&&(oS=si(!!V(Aq,[M]).v));var Q=oS.v?M.createEvent("Event"):k?new Event(x):{};if(T&&T(Q),oS.v&&Q.initEvent(x,!1,!0),Q&&v[gq])v[gq](Q);else{var G=v["on"+x];if(G)G(Q);else{var ce=Vo("console");ce&&(ce.error||ce.log)(x,Ot(Q))}}}s(R5,"emitEvent");var yq="unhandledRejection",Hae=yq.toLowerCase(),qx=10,k5;function Cq(v){return Oe(v)?v.toString():Ot(v)}s(Cq,"dumpFnObj");function vq(v,x,T){var k=Xh(arguments,3),M=0,Q=!1,G,ce=[],fe=!1,Ee=null,Re;function Qe(ir,wr){try{fe=!0,Ee&&Ee.cancel(),Ee=null;var ei=v(function(Fi,Oi){ce.push(function(){try{var qo=M===2?ir:wr,bn=W(qo)?G:Oe(qo)?qo(G):qo;ht(bn)?bn.then(Fi,Oi):qo?Fi(bn):M===3?Oi(bn):Fi(bn)}catch(Jr){Oi(Jr)}}),Q&&gt()},k);return ei}finally{}}s(Qe,"_then");function Ze(ir){return Qe(void 0,ir)}s(Ze,"_catch");function He(ir){var wr=ir,ei=ir;return Oe(ir)&&(wr=s(function(Fi){return ir&&ir(),Fi},"thenFinally"),ei=s(function(Fi){throw ir&&ir(),Fi},"catchFinally")),Qe(wr,ei)}s(He,"_finally");function Ye(){return hq[M]}s(Ye,"_strState");function gt(){if(ce.length>0){var ir=ce.slice();ce=[],fe=!0,Ee&&Ee.cancel(),Ee=null,x(ir)}}s(gt,"_processQueue");function st(ir,wr){return function(ei){if(M===wr){if(ir===2&&ht(ei)){M=1,ei.then(st(2,1),st(3,1));return}M=ir,Q=!0,G=ei,gt(),!fe&&ir===3&&!Ee&&(Ee=XA(wt,qx))}}}s(st,"_createSettleIfFn");function wt(){if(!fe)if(fe=!0,Vh())process.emit(yq,G,Re);else{var ir=Qs()||gi();!k5&&(k5=si(V(Vo,[F1+"RejectionEvent"]).v)),R5(ir,Hae,function(wr){return je(wr,"promise",{g:s(function(){return Re},"g")}),wr.reason=G,wr},!!k5.v)}}s(wt,"_notifyUnhandledRejection"),Re={then:Qe,catch:Ze,finally:He},xe(Re,"state",{get:Ye}),Sa()&&(Re[fu(11)]="IPromise");function Ht(){return"IPromise "+Ye()+(Q?" - "+Cq(G):"")}return s(Ht,"_toString"),Re.toString=Ht,s(function(){Oe(T)||Rr(F1+": executor is not a function - "+Cq(T));var wr=st(3,0);try{T.call(Re,st(2,0),wr)}catch(ei){wr(ei)}},"_initialize")(),Re}s(vq,"_createPromise");function Wae(v){return function(x){var T=Xh(arguments,1);return v(function(k,M){try{var Q=[],G=1;gx(x,function(ce,fe){ce&&(G++,mq(ce,function(Ee){Q[fe]=Ee,--G===0&&k(Q)},M))}),G--,G===0&&k(Q)}catch(ce){M(ce)}},T)}}s(Wae,"_createAllPromise");function $ae(v){return si(function(x){var T=Xh(arguments,1);return v(function(k,M){var Q=[],G=1;function ce(fe,Ee){G++,_f(fe,function(Re){Re.rejected?Q[Ee]={status:O1,reason:Re.reason}:Q[Ee]={status:"fulfilled",value:Re.value},--G===0&&k(Q)})}s(ce,"processItem");try{Je(x)?$r(x,ce):hx(x)?gx(x,ce):Rr("Input is not an iterable"),G--,G===0&&k(Q)}catch(fe){M(fe)}},T)})}s($ae,"_createAllSettledPromise");function Eq(v){$r(v,function(x){try{x()}catch{}})}s(Eq,"syncItemProcessor");function xq(v){var x=lt(v)?v:0;return function(T){XA(function(){Eq(T)},x)}}s(xq,"timeoutItemProcessor");function P5(v,x){return vq(P5,xq(x),v,x)}s(P5,"createAsyncPromise");var D5;function jae(v,x){!D5&&(D5=si(V(Vo,[F1]).v||null));var T=D5.v;if(!T)return P5(v);Oe(v)||Rr(F1+": executor is not a function - "+Ot(v));var k=0;function M(){return hq[k]}s(M,"_strState");var Q=new T(function(G,ce){function fe(Re){k=2,G(Re)}s(fe,"_resolve");function Ee(Re){k=3,ce(Re)}s(Ee,"_reject"),v(fe,Ee)});return xe(Q,"state",{get:M}),Q}s(jae,"createNativePromise");var B5;function N5(v){return vq(N5,Eq,v)}s(N5,"createSyncPromise");function Qd(v,x){return!B5&&(B5=$ae(N5)),B5.v(v,x)}s(Qd,"createSyncAllSettledPromise");var L5;function Hx(v,x){return!L5&&(L5=si(jae)),L5.v.call(this,v,x)}s(Hx,"createPromise");var nL=Wae(Hx),Rf=void 0,Ri="",ag="channels",fc="core",Q0="createPerfMgr",M5="disabled",Q1="extensionConfig",Wx="extensions",kf="processTelemetry",$x="priority",jx="eventsSent",Gx="eventsDiscarded",F5="eventsSendRequest",U1="perfEvent",iL="offlineEventsStored",oL="offlineBatchSent",O5="offlineBatchDrop",sS="getPerfMgr",Q5="domain",U5="path",bq="Not dynamic - ",sL=/-([a-z])/g,Gae=/([^\w\d_$])/g,Vae=/^(\d+[\w\d_$])/;function q5(v){return!ie(v)}s(q5,"isNotNullOrUndefined");function Vx(v){var x=v;return x&&Ae(x)&&(x=x[sy](sL,function(T,k){return k.toUpperCase()}),x=x[sy](Gae,"_"),x=x[sy](Vae,function(T,k){return"_"+k})),x}s(Vx,"normalizeJsName");function Ml(v,x){return v&&x?eg(v,x)!==-1:!1}s(Ml,"strContains");function aS(v){return v&&v.toISOString()||""}s(aS,"toISOString");function ul(v){return vt(v)?v[ny]:Ri}s(ul,"getExceptionName");function cy(v,x,T,k,M){var Q=T;return v&&(Q=v[x],Q!==T&&(!M||M(Q))&&(!k||k(T))&&(Q=T,v[x]=Q)),Q}s(cy,"setValue");function Iq(v,x,T){var k;return v?(k=v[x],!k&&ie(k)&&(k=W(T)?{}:T,v[x]=k)):k=W(T)?{}:T,k}s(Iq,"getSetValue");function zae(v,x){var T=null,k=null;return Oe(v)?T=v:k=v,function(){var M=arguments;if(T&&(k=T()),k)return k[x][b5](k,M)}}s(zae,"_createProxyFunction");function cS(v,x,T,k,M){v&&x&&T&&(M!==!1||W(v[x]))&&(v[x]=zae(T,k))}s(cS,"proxyFunctionAs");function aL(v,x,T,k){return v&&x&&Te(v)&&Je(T)&&$r(T,function(M){Ae(M)&&cS(v,M,x,M,k)}),v}s(aL,"proxyFunctions");function Yae(v){return function(){function x(){var T=this;v&&le(v,function(k,M){T[k]=M})}return s(x,"class_1"),x}()}s(Yae,"createClassFromInterface");function cL(v){return v&&ft&&(v=K8(ft({},v))),v}s(cL,"optimizeObject");function Tq(v,x,T,k,M,Q){var G=arguments,ce=G[0]||{},fe=G[ai],Ee=!1,Re=1;for(fe>0&&_t(ce)&&(Ee=ce,ce=G[Re]||{},Re++),Te(ce)||(ce={});Re<fe;Re++){var Qe=G[Re],Ze=Je(Qe),He=Te(Qe);for(var Ye in Qe){var gt=Ze&&Ye in Qe||He&&We(Qe,Ye);if(gt){var st=Qe[Ye],wt=void 0;if(Ee&&st&&((wt=Je(st))||td(st))){var Ht=ce[Ye];wt?Je(Ht)||(Ht=[]):td(Ht)||(Ht={}),st=Tq(Ee,Ht,st)}st!==void 0&&(ce[Ye]=st)}}}return ce}s(Tq,"objExtend");function H5(v){try{return v.responseText}catch{}return null}s(H5,"getResponseText");function wq(v,x){return v?"XDomainRequest,Response:"+H5(v)||"":x}s(wq,"formatErrorMessageXdr");function W5(v,x){return v?"XMLHttpRequest,Status:"+v[iS]+",Response:"+H5(v)||v.response||"":x}s(W5,"formatErrorMessageXhr");function Sq(v,x){return x&&(lt(x)?v=[x].concat(v):Je(x)&&(v=x.concat(v))),v}s(Sq,"prependTransports");var lL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lS="withCredentials",nm="timeout";function uL(v,x,T,k,M,Q){k===void 0&&(k=!1),M===void 0&&(M=!1);function G(fe,Ee,Re){try{fe[Ee]=Re}catch{}}s(G,"_wrapSetXhrProp");var ce=new XMLHttpRequest;return k&&G(ce,lL,k),T&&G(ce,lS,T),ce.open(v,x,!M),T&&G(ce,lS,T),!M&&Q&&G(ce,nm,Q),ce}s(uL,"openXhr");function _q(v){var x={};if(Ae(v)){var T=Xi(v)[oy](/[\r\n]+/);$r(T,function(k){if(k){var M=k.indexOf(": ");if(M!==-1){var Q=Xi(k.substring(0,M))[Px](),G=Xi(k.substring(M+1));x[Q]=G}else x[Xi(k)]=1}})}return x}s(_q,"convertAllHeadersToMap");function ly(v,x,T){if(!v[T]&&x&&x.getResponseHeader){var k=x.getResponseHeader(T);k&&(v[T]=Xi(k))}return v}s(ly,"_appendHeader");var Dn="kill-duration",zx="kill-duration-seconds",q1="time-delta-millis";function H1(v,x){var T={};return v[Z8]?T=_q(v[Z8]()):x&&(T=ly(T,v,q1),T=ly(T,v,Dn),T=ly(T,v,zx)),T}s(H1,"_getAllResponseHeaders");var dL="documentMode",uS="location",Yx="console",$5="JSON",fL="crypto",j5="msCrypto",Kx="msie",W1="trident/",pL="XMLHttpRequest",Pf=null,Jx=null,im=!1,rd=null,Xx=null;function dS(v,x){var T=!1;if(v){try{if(T=x in v,!T){var k=v[eS];k&&(T=x in k)}}catch{}if(!T)try{var M=new v;T=!W(M[x])}catch{}}return T}s(dS,"_hasProperty");function Zx(v){if(v&&im){var x=Vo("__mockLocation");if(x)return x}return typeof location===sq&&location?location:Vo(uS)}s(Zx,"getLocation");function fS(){return typeof console!==aq?console:Vo(Yx)}s(fS,"getConsole");function eb(){return!!(typeof JSON===sq&&JSON||Vo($5)!==null)}s(eb,"hasJSON");function Ud(){return eb()?JSON||Vo($5):null}s(Ud,"getJSON");function G5(){return Vo(fL)}s(G5,"getCrypto");function V5(){return Vo(j5)}s(V5,"getMsCrypto");function U0(){var v=lc();if(v&&(v[_5]!==Jx||Pf===null)){Jx=v[_5];var x=(Jx||Ri)[Px]();Pf=Ml(x,Kx)||Ml(x,W1)}return Pf}s(U0,"isIE");function tb(v){if(v===void 0&&(v=null),!v){var x=lc()||{};v=x?(x.userAgent||Ri)[Px]():Ri}var T=(v||Ri)[Px]();if(Ml(T,Kx)){var k=cc()||{};return Pe(parseInt(T[oy](Kx)[1]),k[dL]||0)}else if(Ml(T,W1)){var M=parseInt(T[oy](W1)[1]);if(M)return M+4}return null}s(tb,"getIEVersion");function uy(v){return(Xx===null||v===!1)&&(Xx=Xu()&&!!lc().sendBeacon),Xx}s(uy,"isBeaconsSupported");function pS(v){var x=!1;try{x=!!Vo("fetch");var T=Vo("Request");x&&v&&T&&(x=dS(T,"keepalive"))}catch{}return x}s(pS,"isFetchSupported");function mL(){return rd===null&&(rd=typeof XDomainRequest!==aq,rd&&hL()&&(rd=rd&&!dS(Vo(pL),"withCredentials"))),rd}s(mL,"useXDomainRequest");function hL(){var v=!1;try{var x=Vo(pL);v=!!x}catch{}return v}s(hL,"isXhrSupported");var dl=4294967296,om=4294967295,z5=123456789,gL=987654321,cg=!1,Df=z5,rb=gL;function AL(v){v<0&&(v>>>=0),Df=z5+v&om,rb=gL-v&om,cg=!0}s(AL,"_mwcSeed");function Rq(){try{var v=ed()&2147483647;AL((Math.random()*dl^v)+v)}catch{}}s(Rq,"_autoSeedMwc");function yL(v){var x=0,T=G5()||V5();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&om),x===0&&U0()&&(cg||Rq(),x=kq()&om),x===0&&(x=KA(dl*Math.random()|0)),v||(x>>>=0),x}s(yL,"random32");function kq(v){rb=36969*(rb&65535)+(rb>>16)&om,Df=18e3*(Df&65535)+(Df>>16)&om;var x=(rb<<16)+(Df&65535)>>>0&om|0;return v||(x>>>=0),x}s(kq,"mwcRandom32");function Kae(v){v===void 0&&(v=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=yL()>>>0,k=0,M=Ri;M[ai]<v;)k++,M+=x.charAt(T&63),T>>>=6,k===5&&(T=(yL()<<2&4294967295|T&3)>>>0,k=0);return M}s(Kae,"newId");var nb="3.3.6",Jae="."+Kae(6),Xae=0;function Pq(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}s(Pq,"_canAcceptData");function Dq(v,x){var T=x[v.id];if(!T){T={};try{Pq(x)&&je(x,v.id,{e:!1,v:T})}catch{}}return T}s(Dq,"_getCache");function lg(v,x){return x===void 0&&(x=!1),Vx(v+Xae+++(x?"."+nb:Ri)+Jae)}s(lg,"createUniqueNamespace");function Bq(v){var x={id:lg("_aiData-"+(v||Ri)+"."+nb),accept:s(function(T){return Pq(T)},"accept"),get:s(function(T,k,M,Q){var G=T[x.id];return G?G[Vx(k)]:(Q&&(G=Dq(x,T),G[Vx(k)]=M),M)},"get"),kill:s(function(T,k){if(T&&T[k])try{delete T[k]}catch{}},"kill")};return x}s(Bq,"createElmNodeData");function ib(v){return v&&Te(v)&&(v.isVal||v.fb||We(v,"v")||We(v,"mrg")||We(v,"ref")||v.set)}s(ib,"_isConfigDefaults");function Nq(v,x,T){var k,M=T.dfVal||te;if(x&&T.fb){var Q=T.fb;Je(Q)||(Q=[Q]);for(var G=0;G<Q[ai];G++){var ce=Q[G],fe=x[ce];if(M(fe)?k=fe:v&&(fe=v.cfg[ce],M(fe)&&(k=fe),v.set(v.cfg,Mt(ce),fe)),M(k))break}}return!M(k)&&M(T.v)&&(k=T.v),k}s(Nq,"_getDefault");function CL(v,x,T){var k=T;if(T&&ib(T)&&(k=Nq(v,x,T)),k){ib(k)&&(k=CL(v,x,k));var M;Je(k)?(M=[],M[ai]=k[ai]):td(k)&&(M={}),M&&(le(k,function(Q,G){G&&ib(G)&&(G=CL(v,x,G)),M[Q]=G}),k=M)}return k}s(CL,"_resolveDefaultValue");function vL(v,x,T,k){var M,Q,G,ce=k,fe,Ee,Re,Qe;ib(ce)?(M=ce.isVal,Q=ce.set,Re=ce.rdOnly,Qe=ce.blkVal,fe=ce.mrg,Ee=ce.ref,!Ee&&W(Ee)&&(Ee=!!fe),G=Nq(v,x,ce)):G=k,Qe&&v.blkVal(x,T);var Ze,He=!0,Ye=x[T];(Ye||!ie(Ye))&&(Ze=Ye,He=!1,M&&Ze!==G&&!M(Ze)&&(Ze=G,He=!0),Q&&(Ze=Q(Ze,G,x),He=Ze===G)),He?G?Ze=CL(v,x,G):Ze=G:(td(Ze)||Je(G))&&fe&&G&&(td(G)||Je(G))&&le(G,function(gt,st){vL(v,Ze,gt,st)}),v.set(x,T,Ze),Ee&&v.ref(x,T),Re&&v.rdOnly(x,T)}s(vL,"_applyDefaultValue");var dy=Kh("[[ai_dynCfg_1]]"),Lq=Kh("[[ai_blkDynCfg_1]]"),Mq=Kh("[[ai_frcDynCfg_1]]");function Fq(v){if(v){var x;if(Je(v)?(x=[],x[ai]=v[ai]):td(v)&&(x={}),x)return le(v,function(T,k){x[T]=Fq(k)}),x}return v}s(Fq,"_cfgDeepCopy");function Zae(v){if(v){var x=v[dy]||v;if(x.cfg&&(x.cfg===v||x.cfg[dy]===x))return x}return null}s(Zae,"getDynamicConfigHandler");function ece(v){if(v&&(td(v)||Je(v)))try{v[Lq]=!0}catch{}return v}s(ece,"blockDynamicConversion");function EL(v,x,T){var k=!1;return T&&!v[x.blkVal]&&(k=T[Mq],!k&&!T[Lq]&&(k=td(T)||Je(T))),k}s(EL,"_canMakeDynamic");function ob(v){Rr("InvalidAccess:"+v)}s(ob,"throwInvalidAccess");var tce=["push","pop","shift","unshift","splice"],mS=s(function(v,x,T,k){v&&v[B1](3,108,"".concat(T," [").concat(x,"] failed - ")+Ot(k))},"_throwDynamicError");function fy(v,x,T){Je(x)&&$r(tce,function(k){var M=x[k];x[k]=function(){for(var Q=[],G=0;G<arguments.length;G++)Q[G]=arguments[G];var ce=M[b5](this,Q);return cb(v,x,T,"Patching"),ce}})}s(fy,"_patchArray");function q0(v,x){var T=Ue(v,x);return T&&T.get}s(q0,"_getOwnPropGetter");function Oq(v,x,T,k){var M={n:T,h:[],trk:s(function(Ee){Ee&&Ee.fn&&(uc(M.h,Ee)===-1&&M.h[go](Ee),v.trk(Ee,M))},"trk"),clr:s(function(Ee){var Re=uc(M.h,Ee);Re!==-1&&M.h[Bx](Re,1)},"clr")},Q=!0,G=!1;function ce(){Q&&(G=G||EL(ce,v,k),k&&!k[dy]&&G&&(k=cb(v,k,T,"Converting")),Q=!1);var Ee=v.act;return Ee&&M.trk(Ee),k}s(ce,"_getProperty"),ce[v.prop]={chng:s(function(){v.add(M)},"chng")};function fe(Ee){if(k!==Ee){ce[v.ro]&&!v.upd&&ob("["+T+"] is read-only:"+Ot(x)),Q&&(G=G||EL(ce,v,k),Q=!1);var Re=G&&ce[v.rf];if(G)if(Re){le(k,function(Ze){k[Ze]=Ee?Ee[Ze]:Rf});try{le(Ee,function(Ze,He){sb(v,k,Ze,He)}),Ee=k}catch(Ze){mS((v.hdlr||{})[dc],T,"Assigning",Ze),G=!1}}else k&&k[dy]&&le(k,function(Ze){var He=q0(k,Ze);if(He){var Ye=He[v.prop];Ye&&Ye.chng()}});if(Ee!==k){var Qe=Ee&&EL(ce,v,Ee);!Re&&Qe&&(Ee=cb(v,Ee,T,"Converting")),k=Ee,G=Qe}v.add(M)}}s(fe,"_setProperty"),je(x,M.n,{g:ce,s:fe})}s(Oq,"_createDynamicProperty");function sb(v,x,T,k){if(x){var M=q0(x,T),Q=M&&!!M[v.prop];Q?x[T]=k:Oq(v,x,T,k)}return x}s(sb,"_setDynamicProperty");function ab(v,x,T,k){if(x){var M=q0(x,T),Q=M&&!!M[v.prop],G=k&&k[0],ce=k&&k[1],fe=k&&k[2];if(!Q){if(fe)try{ece(x)}catch(Ee){mS((v.hdlr||{})[dc],T,"Blocking",Ee)}try{sb(v,x,T,x[T]),M=q0(x,T)}catch(Ee){mS((v.hdlr||{})[dc],T,"State",Ee)}}G&&(M[v.rf]=G),ce&&(M[v.ro]=ce),fe&&(M[v.blkVal]=!0)}return x}s(ab,"_setDynamicPropertyState");function cb(v,x,T,k){try{le(x,function(M,Q){sb(v,x,M,Q)}),x[dy]||(xe(x,dy,{get:s(function(){return v.hdlr},"get")}),fy(v,x,T))}catch(M){mS((v.hdlr||{})[dc],T,k,M)}return x}s(cb,"_makeDynamicObject");var hS="[[ai_",gS="]]";function rce(v){var x=Zu(hS+"get"+v.uid+gS),T=Zu(hS+"ro"+v.uid+gS),k=Zu(hS+"rf"+v.uid+gS),M=Zu(hS+"blkVal"+v.uid+gS),Q=Zu(hS+"dtl"+v.uid+gS),G=null,ce=null,fe;function Ee(He,Ye){var gt=fe.act;try{fe.act=He,He&&He[Q]&&($r(He[Q],function(wt){wt.clr(He)}),He[Q]=[]),Ye({cfg:v.cfg,set:v.set.bind(v),setDf:v.setDf.bind(v),ref:v.ref.bind(v),rdOnly:v.rdOnly.bind(v)})}catch(wt){var st=v[dc];throw st&&st[B1](1,107,Ot(wt)),wt}finally{fe.act=gt||null}}s(Ee,"_useHandler");function Re(){if(G){var He=G;G=null,ce&&ce[Nx](),ce=null;var Ye=[];if($r(He,function(gt){if(gt&&(gt[Q]&&($r(gt[Q],function(st){st.clr(gt)}),gt[Q]=null),gt.fn))try{Ee(gt,gt.fn)}catch(st){Ye[go](st)}}),G)try{Re()}catch(gt){Ye[go](gt)}Ye[ai]>0&&rL("Watcher error(s): ",Ye)}}s(Re,"_notifyWatchers");function Qe(He){if(He&&He.h[ai]>0){G||(G=[]),ce||(ce=XA(function(){ce=null,Re()},0));for(var Ye=0;Ye<He.h[ai];Ye++){var gt=He.h[Ye];gt&&uc(G,gt)===-1&&G[go](gt)}}}s(Qe,"_addWatcher");function Ze(He,Ye){if(He){var gt=He[Q]=He[Q]||[];uc(gt,Ye)===-1&&gt[go](Ye)}}return s(Ze,"_trackHandler"),fe={prop:x,ro:T,rf:k,blkVal:M,hdlr:v,add:Qe,notify:Re,use:Ee,trk:Ze},fe}s(rce,"_createState");function Y5(v,x){var T={fn:x,rm:s(function(){T.fn=null,v=null,x=null},"rm")};return je(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),v.use(T,x),T}s(Y5,"_createAndUseHandler");function Qq(v,x,T){var k=Zae(x);if(k)return k;var M=lg("dyncfg",!0),Q=x&&T!==!1?x:Fq(x),G;function ce(){G.notify()}s(ce,"_notifyWatchers");function fe(st,wt,Ht){try{st=sb(G,st,wt,Ht)}catch(ir){mS(v,wt,"Setting value",ir)}return st[wt]}s(fe,"_setValue");function Ee(st){return Y5(G,st)}s(Ee,"_watch");function Re(st,wt){G.use(null,function(Ht){var ir=G.upd;try{W(wt)||(G.upd=wt),st(Ht)}finally{G.upd=ir}})}s(Re,"_block");function Qe(st,wt){var Ht;return ab(G,st,wt,(Ht={},Ht[0]=!0,Ht))[wt]}s(Qe,"_ref");function Ze(st,wt){var Ht;return ab(G,st,wt,(Ht={},Ht[1]=!0,Ht))[wt]}s(Ze,"_rdOnly");function He(st,wt){var Ht;return ab(G,st,wt,(Ht={},Ht[2]=!0,Ht))[wt]}s(He,"_blkPropValue");function Ye(st,wt){return wt&&le(wt,function(Ht,ir){vL(gt,st,Ht,ir)}),st}s(Ye,"_applyDefaults");var gt={uid:null,cfg:Q,logger:v,notify:ce,set:fe,setDf:Ye,watch:Ee,ref:Qe,rdOnly:Ze,blkVal:He,_block:Re};return je(gt,"uid",{c:!1,e:!1,w:!1,v:M}),G=rce(gt),cb(G,Q,"config","Creating"),gt}s(Qq,"_createDynamicHandler");function Uq(v,x){v?(v[Dx](x),v[B1](2,108,x)):ob(x)}s(Uq,"_logInvalidAccess");function Bf(v,x,T,k){var M=Qq(T,v||{},k);return x&&M.setDf(M.cfg,x),M}s(Bf,"createDynamicConfig");function ug(v,x,T){var k=v[dy]||v;return k.cfg&&(k.cfg===v||k.cfg[dy]===k)?k[ng](x):(Uq(T,bq+Ot(v)),Bf(v,null,T)[ng](x))}s(ug,"onConfigChange");function lb(v,x){if(v&&v[N1])return v[N1](x)}s(lb,"runTargetUnload");function qq(v,x,T){var k;return T||(k=Hx(function(M){T=M})),v&&Dae(v)>0?_f(lb(v[0],x),function(){qq(Xh(v,1),x,T)}):T(),k}s(qq,"doUnloadAll");var nce=500,Hq="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function ice(v,x,T){return!v&&ie(v)?x:_t(v)?v:Mt(v)[Px]()==="true"}s(ice,"_stringToBoolOrDefault");function oce(v){return{mrg:!0,v}}s(oce,"cfgDfMerge");function xL(v,x,T){return{fb:T,isVal:v,v:x}}s(xL,"cfgDfValidate");function sm(v,x){return{fb:x,set:ice,v:!!v}}s(sm,"cfgDfBoolean");var K5=[jx,Gx,F5,U1],J5=null,X5;function sce(v,x){return function(){var T=arguments,k=Wq(x);if(k){var M=k.listener;M&&M[v]&&M[v][b5](M,T)}}}s(sce,"_listenerProxyFunc");function ace(){var v=Vo("Microsoft");return v&&(J5=v.ApplicationInsights),J5}s(ace,"_getExtensionNamespace");function Wq(v){var x=J5;return!x&&v.disableDbgExt!==!0&&(x=J5||ace()),x?x.ChromeDbgExt:null}s(Wq,"getDebugExt");function cce(v){if(!X5){X5={};for(var x=0;x<K5[ai];x++)X5[K5[x]]=sce(K5[x],v)}return X5}s(cce,"getDebugListener");var ub,$q="warnToConsole",lce="AI (Internal): ",uce="AI: ",dce="AITR_",jq={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},db=(ub={},ub[0]=null,ub[1]="errorToConsole",ub[2]=$q,ub[3]="debugToConsole",ub);function qd(v){return v?'"'+v[sy](/\"/g,Ri)+'"':Ri}s(qd,"_sanitizeDiagnosticText");function AS(v,x){var T=fS();if(T){var k="log";T[v]&&(k=v),Oe(T[k])&&T[k](x)}}s(AS,"_logToConsole");var Z5=function(){function v(x,T,k,M){k===void 0&&(k=!1);var Q=this;Q[w5]=x,Q[M1]=(k?uce:lce)+x;var G=Ri;eb()&&(G=Ud().stringify(M));var ce=(T?" message:"+qd(T):Ri)+(M?" props:"+qd(G):Ri);Q[M1]+=ce}return s(v,"_InternalLogMessage"),v.dataType="MessageData",v}();function yS(v,x){return(v||{})[dc]||new CS(x)}s(yS,"safeGetLogger");var CS=function(){function v(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,k={},M,Q,G,ce,fe;pu(v,this,function(Ee){fe=Qe(x||{}),Ee.consoleLoggingLevel=function(){return M},Ee[B1]=function(Ye,gt,st,wt,Ht){Ht===void 0&&(Ht=!1);var ir=new Z5(gt,st,Ht,wt);if(ce)throw Ot(ir);var wr=db[Ye]||$q;if(W(ir[M1]))He("throw"+(Ye===1?"Critical":"Warning"),ir);else{if(Ht){var ei=+ir[w5];!k[ei]&&M>=Ye&&(Ee[wr](ir[M1]),k[ei]=!0)}else M>=Ye&&Ee[wr](ir[M1]);Re(Ye,ir)}},Ee.debugToConsole=function(Ye){AS("debug",Ye),He("warning",Ye)},Ee[Dx]=function(Ye){AS("warn",Ye),He("warning",Ye)},Ee.errorToConsole=function(Ye){AS("error",Ye),He("error",Ye)},Ee.resetInternalMessageCount=function(){T=0,k={}},Ee.logInternalMessage=Re,Ee[N1]=function(Ye){fe&&fe.rm(),fe=null};function Re(Ye,gt){if(!Ze()){var st=!0,wt=dce+gt[w5];if(k[wt]?st=!1:k[wt]=!0,st&&(Ye<=Q&&(Ee.queue[go](gt),T++,He(Ye===1?"error":"warn",gt)),T===G)){var Ht="Internal events throttle limit per PageView reached for this app.",ir=new Z5(23,Ht,!1);Ee.queue[go](ir),Ye===1?Ee.errorToConsole(Ht):Ee[Dx](Ht)}}}s(Re,"_logInternalMessage");function Qe(Ye){return ug(Bf(Ye,jq,Ee).cfg,function(gt){var st=gt.cfg;M=st[dq],Q=st.loggingLevelTelemetry,G=st.maxMessageLimit,ce=st.enableDebug})}s(Qe,"_setDefaultsFromConfig");function Ze(){return T>=G}s(Ze,"_areInternalMessagesThrottled");function He(Ye,gt){var st=Wq(x||{});st&&st[tm]&&st[tm](Ye,gt)}s(He,"_debugExtMsg")})}return s(v,"DiagnosticLogger"),v.__ieDyn=1,v}();function bL(v){return v||new CS}s(bL,"_getLogger");function Lr(v,x,T,k,M,Q){Q===void 0&&(Q=!1),bL(v)[B1](x,T,k,M,Q)}s(Lr,"_throwInternal");function eP(v,x){bL(v)[Dx](x)}s(eP,"_warnToConsole");var vS,py,Gq="toGMTString",Vq="toUTCString",tP="cookie",dg="expires",zq="isCookieUseDisabled",rP="disableCookiesUsage",Yq="_ckMgr",nP=null,fb=null,iP=null,am,Kq={},Jq={},Xq=(vS={cookieCfg:oce((py={},py[Q5]={fb:"cookieDomain",dfVal:q5},py.path={fb:"cookiePath",dfVal:q5},py.enabled=Rf,py.ignoreCookies=Rf,py.blockedCookies=Rf,py)),cookieDomain:Rf,cookiePath:Rf},vS[rP]=Rf,vS);function IL(){!am&&(am=Ar(function(){return cc()}))}s(IL,"_getDoc");function ES(v){return v?v.isEnabled():!0}s(ES,"_isMgrEnabled");function TL(v,x){return x&&v&&Je(v.ignoreCookies)?uc(v.ignoreCookies,x)!==-1:!1}s(TL,"_isIgnoredCookie");function fce(v,x){return x&&v&&Je(v.blockedCookies)&&uc(v.blockedCookies,x)!==-1?!0:TL(v,x)}s(fce,"_isBlockedCookie");function wL(v,x){var T=x[Zp];if(ie(T)){var k=void 0;W(v[zq])||(k=!v[zq]),W(v[rP])||(k=!v[rP]),T=k}return T}s(wL,"_isCfgEnabled");function pce(v,x){var T,k,M,Q,G,ce,fe,Ee;v=Bf(v||Jq,null,x).cfg,Q=ug(v,function(Qe){Qe.setDf(Qe.cfg,Xq),T=Qe.ref(Qe.cfg,"cookieCfg"),k=T[U5]||"/",M=T[Q5],G=wL(v,T)!==!1,ce=T.getCookie||mce,fe=T.setCookie||pb,Ee=T.delCookie||pb},x);var Re={isEnabled:s(function(){var Qe=wL(v,T)!==!1&&G&&Zq(x),Ze=Jq[Yq];return Qe&&Ze&&Re!==Ze&&(Qe=ES(Ze)),Qe},"isEnabled"),setEnabled:s(function(Qe){G=Qe!==!1,T[Zp]=Qe},"setEnabled"),set:s(function(Qe,Ze,He,Ye,gt){var st=!1;if(ES(Re)&&!fce(T,Qe)){var wt={},Ht=Xi(Ze||Ri),ir=eg(Ht,";");if(ir!==-1&&(Ht=Xi(B(Ze,ir)),wt=SL(Ce(Ze,ir+1))),cy(wt,Q5,Ye||M,ue,W),!ie(He)){var wr=U0();if(W(wt[dg])){var ei=ed(),Fi=ei+He*1e3;if(Fi>0){var Oi=new Date;Oi.setTime(Fi),cy(wt,dg,eH(Oi,wr?Gq:Vq)||eH(Oi,wr?Gq:Vq)||Ri,ue)}}wr||cy(wt,"max-age",Ri+He,null,W)}var qo=Zx();qo&&qo.protocol==="https:"&&(cy(wt,"secure",null,null,W),fb===null&&(fb=!hce((lc()||{})[_5])),fb&&cy(wt,"SameSite","None",null,W)),cy(wt,U5,gt||k,null,W),fe(Qe,tH(Ht,wt)),st=!0}return st},"set"),get:s(function(Qe){var Ze=Ri;return ES(Re)&&!TL(T,Qe)&&(Ze=ce(Qe)),Ze},"get"),del:s(function(Qe,Ze){var He=!1;return ES(Re)&&(He=Re.purge(Qe,Ze)),He},"del"),purge:s(function(Qe,Ze){var He,Ye=!1;if(Zq(x)){var gt=(He={},He[U5]=Ze||"/",He[dg]="Thu, 01 Jan 1970 00:00:01 GMT",He);U0()||(gt["max-age"]="0"),Ee(Qe,tH(Ri,gt)),Ye=!0}return Ye},"purge"),unload:s(function(Qe){Q&&Q.rm(),Q=null},"unload")};return Re[Yq]=Re,Re}s(pce,"createCookieMgr");function Zq(v){if(nP===null){nP=!1,!am&&IL();try{var x=am.v||{};nP=x[tP]!==void 0}catch(T){Lr(v,2,68,"Cannot access document.cookie - "+ul(T),{exception:Ot(T)})}}return nP}s(Zq,"areCookiesSupported");function SL(v){var x={};if(v&&v[ai]){var T=Xi(v)[oy](";");$r(T,function(k){if(k=Xi(k||Ri),k){var M=eg(k,"=");M===-1?x[k]=null:x[Xi(B(k,M))]=Xi(Ce(k,M+1))}})}return x}s(SL,"_extractParts");function eH(v,x){return Oe(v[x])?v[x]():null}s(eH,"_formatDate");function tH(v,x){var T=v||Ri;return le(x,function(k,M){T+="; "+k+(ie(M)?Ri:"="+M)}),T}s(tH,"_formatCookieValue");function mce(v){var x=Ri;if(!am&&IL(),am.v){var T=am.v[tP]||Ri;iP!==T&&(Kq=SL(T),iP=T),x=Xi(Kq[v]||Ri)}return x}s(mce,"_getCookieValue");function pb(v,x){!am&&IL(),am.v&&(am.v[tP]=v+"="+x)}s(pb,"_setCookieValue");function hce(v){return Ae(v)?!!(Ml(v,"CPU iPhone OS 12")||Ml(v,"iPad; CPU OS 12")||Ml(v,"Macintosh; Intel Mac OS X 10_14")&&Ml(v,"Version/")&&Ml(v,"Safari")||Ml(v,"Macintosh; Intel Mac OS X 10_14")&&oq(v,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Ml(v,"Chrome/5")||Ml(v,"Chrome/6")||Ml(v,"UnrealEngine")&&!Ml(v,"Chrome")||Ml(v,"UCBrowser/12")||Ml(v,"UCBrowser/11")):!1}s(hce,"uaDisallowsSameSiteNone");var _L={perfEvtsSendAll:!1};function gce(v){v.h=null;var x=v.cb;v.cb=[],$r(x,function(T){V(T.fn,[T.arg])})}s(gce,"_runScheduledListeners");function my(v,x,T,k){$r(v,function(M){M&&M[x]&&(T?(T.cb[go]({fn:k,arg:M}),T.h=T.h||XA(gce,0,T)):V(k,[M]))})}s(my,"_runListeners");var Ace=function(){function v(x){this.listeners=[];var T,k,M=[],Q={h:null,cb:[]},G=Bf(x,_L);k=G[ng](function(ce){T=!!ce.cfg.perfEvtsSendAll}),pu(v,this,function(ce){je(ce,"listeners",{g:s(function(){return M},"g")}),ce[I5]=function(fe){M[go](fe)},ce[nS]=function(fe){for(var Ee=uc(M,fe);Ee>-1;)M[Bx](Ee,1),Ee=uc(M,fe)},ce[jx]=function(fe){my(M,jx,Q,function(Ee){Ee[jx](fe)})},ce[Gx]=function(fe,Ee){my(M,Gx,Q,function(Re){Re[Gx](fe,Ee)})},ce[F5]=function(fe,Ee){my(M,F5,Ee?Q:null,function(Re){Re[F5](fe,Ee)})},ce[U1]=function(fe){fe&&(T||!fe[eL]())&&my(M,U1,null,function(Ee){fe.isAsync?XA(function(){return Ee[U1](fe)},0):Ee[U1](fe)})},ce[iL]=function(fe){fe&&fe[ai]&&my(M,iL,Q,function(Ee){Ee[iL](fe)})},ce[oL]=function(fe){fe&&fe[Qx]&&my(M,oL,Q,function(Ee){Ee[oL](fe)})},ce[O5]=function(fe,Ee){if(fe>0){var Re=Ee||0;my(M,O5,Q,function(Qe){Qe[O5](fe,Re)})}},ce[N1]=function(fe){var Ee=s(function(){k&&k.rm(),k=null,M=[],Q.h&&Q.h[Nx](),Q.h=null,Q.cb=[]},"_finishUnload"),Re;if(my(M,"unload",null,function(Qe){var Ze=Qe[N1](fe);Ze&&(Re||(Re=[]),Re[go](Ze))}),Re)return Hx(function(Qe){return _f(nL(Re),function(){Ee(),Qe()})});Ee()}})}return s(v,"NotificationManager"),v.__ieDyn=1,v}(),mb="ctx",RL="ParentContextKey",xS="ChildrenContextKey",yce=null,oP=function(){function v(x,T,k){var M=this;if(M.start=ed(),M[ny]=x,M.isAsync=k,M[eL]=function(){return!1},Oe(T)){var Q;je(M,"payload",{g:s(function(){return!Q&&Oe(T)&&(Q=T(),T=null),Q},"g")})}M[ay]=function(G){return G?G===v[RL]||G===v[xS]?M[G]:(M[mb]||{})[G]:null},M[O0]=function(G,ce){if(G)if(G===v[RL])M[G]||(M[eL]=function(){return!0}),M[G]=ce;else if(G===v[xS])M[G]=ce;else{var fe=M[mb]=M[mb]||{};fe[G]=ce}},M.complete=function(){var G=0,ce=M[ay](v[xS]);if(Je(ce))for(var fe=0;fe<ce[ai];fe++){var Ee=ce[fe];Ee&&(G+=Ee.time)}M.time=ed()-M.start,M.exTime=M.time-G,M.complete=function(){}}}return s(v,"PerfEvent"),v.ParentContextKey="parent",v.ChildrenContextKey="childEvts",v}(),Cce=function(){function v(x){this.ctx={},pu(v,this,function(T){T.create=function(k,M,Q){return new oP(k,M,Q)},T.fire=function(k){k&&(k.complete(),x&&Oe(x[U1])&&x[U1](k))},T[O0]=function(k,M){if(k){var Q=T[mb]=T[mb]||{};Q[k]=M}},T[ay]=function(k){return(T[mb]||{})[k]}})}return s(v,"PerfManager"),v.__ieDyn=1,v}(),cm="CoreUtils.doPerf";function hb(v,x,T,k,M){if(v){var Q=v;if(Q[sS]&&(Q=Q[sS]()),Q){var G=void 0,ce=Q[ay](cm);try{if(G=Q.create(x(),k,M),G){if(ce&&G[O0]&&(G[O0](oP[RL],ce),ce[ay]&&ce[O0])){var fe=ce[ay](oP[xS]);fe||(fe=[],ce[O0](oP[xS],fe)),fe[go](G)}return Q[O0](cm,G),T(G)}}catch(Ee){G&&G[O0]&&G[O0]("exception",Ee)}finally{G&&Q.fire(G),Q[O0](cm,ce)}}}return T()}s(hb,"doPerf");function pc(){return yce}s(pc,"getGblPerfMgr");var sP="00000000000000000000000000000000",gb="0000000000000000";function aP(v,x,T){return v&&v[ai]===x&&v!==T?!!v.match(/^[\da-f]*$/i):!1}s(aP,"_isValid");function hy(v){return aP(v,32,sP)}s(hy,"isValidTraceId");function $1(v){return aP(v,16,gb)}s($1,"isValidSpanId");var bS=Bq("plugin");function gy(v){return bS.get(v,"state",{},!0)}s(gy,"_getPluginState");function kL(v,x){for(var T=[],k=null,M=v[rm](),Q;M;){var G=M[Mx]();if(G){k&&k[iy]&&G[kf]&&k[iy](G),Q=gy(G);var ce=!!Q[Xp];G[Xp]&&(ce=G[Xp]()),ce||T[go](G),k=G,M=M[rm]()}}$r(T,function(fe){var Ee=v[fc]();fe[rS](v.getCfg(),Ee,x,v[rm]()),Q=gy(fe),!fe[fc]&&!Q[fc]&&(Q[fc]=Ee),Q[Xp]=!0,delete Q[em]})}s(kL,"initializePlugins");function PL(v){return v.sort(function(x,T){var k=0;if(T){var M=T[kf];x[kf]?k=M?x[$x]-T[$x]:1:M&&(k=-1)}else k=x?1:-1;return k})}s(PL,"sortPlugins");function vce(v){var x={};return{getName:s(function(){return x[ny]},"getName"),setName:s(function(T){v&&v.setName(T),x[ny]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){v&&v.setTraceId(T),hy(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){v&&v.setSpanId(T),$1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[pq]},"getTraceFlags"),setTraceFlags:s(function(T){v&&v.setTraceFlags(T),x[pq]=T},"setTraceFlags")}}s(vce,"createDistributedTraceContext");var Ece="TelemetryPluginChain",rH="_hasRun",DL="_getTelCtx",nH=0;function xce(v,x,T){for(;v;){if(v[Mx]()===T)return v;v=v[rm]()}return L([T],x.config||{},x)}s(xce,"_getNextProxyStart");function BL(v,x,T,k){var M=null,Q=[];x||(x=Bf({},null,T[dc])),k!==null&&(M=k?xce(v,T,k):v);var G={_next:fe,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return yS(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Re,getConfig:Qe,hasNext:s(function(){return!!M},"hasNext"),getNext:s(function(){return M},"getNext"),setNext:s(function(He){M=He},"setNext"),iterate:Ze,onComplete:ce}};function ce(He,Ye){for(var gt=[],st=2;st<arguments.length;st++)gt[st-2]=arguments[st];He&&Q[go]({func:He,self:W(Ye)?G.ctx:Ye,args:gt})}s(ce,"_addOnComplete");function fe(){var He=M;if(M=He?He[rm]():null,!He){var Ye=Q;Ye&&Ye[ai]>0&&($r(Ye,function(gt){try{gt.func.call(gt.self,gt.args)}catch(st){Lr(T[dc],2,73,"Unexpected Exception during onComplete - "+Ot(st))}}),Q=[])}return He}s(fe,"_moveNext");function Ee(He,Ye){var gt=null,st=x.cfg;if(st&&He){var wt=st[Q1];!wt&&Ye&&(wt={}),st[Q1]=wt,wt=x.ref(st,Q1),wt&&(gt=wt[He],!gt&&Ye&&(gt={}),wt[He]=gt,gt=x.ref(wt,He))}return gt}s(Ee,"_getExtCfg");function Re(He,Ye){var gt=Ee(He,!0);return Ye&&le(Ye,function(st,wt){if(ie(gt[st])){var Ht=x.cfg[st];(Ht||!ie(Ht))&&(gt[st]=Ht)}vL(x,gt,st,wt)}),x.setDf(gt,Ye)}s(Re,"_resolveExtCfg");function Qe(He,Ye,gt){gt===void 0&&(gt=!1);var st,wt=Ee(He,!1),Ht=x.cfg;return wt&&(wt[Ye]||!ie(wt[Ye]))?st=wt[Ye]:(Ht[Ye]||!ie(Ht[Ye]))&&(st=Ht[Ye]),st||!ie(st)?st:gt}s(Qe,"_getConfig");function Ze(He){for(var Ye;Ye=G._next();){var gt=Ye[Mx]();gt&&He(gt)}}return s(Ze,"_iterateChain"),G}s(BL,"_createInternalContext");function Ab(v,x,T,k){var M=Bf(x),Q=BL(v,M,T,k),G=Q.ctx;function ce(Ee){var Re=Q._next();return Re&&Re[kf](Ee,G),!Re}s(ce,"_processNext");function fe(Ee,Re){return Ee===void 0&&(Ee=null),Je(Ee)&&(Ee=L(Ee,M.cfg,T,Re)),Ab(Ee||G[rm](),M.cfg,T,Re)}return s(fe,"_createNew"),G[Ll]=ce,G[L1]=fe,G}s(Ab,"createProcessTelemetryContext");function S(v,x,T){var k=Bf(x.config),M=BL(v,k,x,T),Q=M.ctx;function G(fe){var Ee=M._next();return Ee&&Ee[N1](Q,fe),!Ee}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=L(fe,k.cfg,x,Ee)),S(fe||Q[rm](),x,Ee)}return s(ce,"_createNew"),Q[Ll]=G,Q[L1]=ce,Q}s(S,"createProcessTelemetryUnloadContext");function P(v,x,T){var k=Bf(x.config),M=BL(v,k,x,T),Q=M.ctx;function G(fe){return Q.iterate(function(Ee){Oe(Ee[ig])&&Ee[ig](Q,fe)})}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=L(fe,k.cfg,x,Ee)),P(fe||Q[rm](),x,Ee)}return s(ce,"_createNew"),Q[Ll]=G,Q[L1]=ce,Q}s(P,"createProcessTelemetryUpdateContext");function L(v,x,T,k){var M=null,Q=!k;if(Je(v)&&v[ai]>0){var G=null;$r(v,function(ce){if(!Q&&k===ce&&(Q=!0),Q&&ce&&Oe(ce[kf])){var fe=$(ce,x,T);M||(M=fe),G&&G._setNext(fe),G=fe}})}return k&&!M?L([k],x,T):M}s(L,"createTelemetryProxyChain");function $(v,x,T){var k=null,M=Oe(v[kf]),Q=Oe(v[iy]),G;v?G=v[ry]+"-"+v[$x]+"-"+nH++:G="Unknown-0-"+nH++;var ce={getPlugin:s(function(){return v},"getPlugin"),getNext:s(function(){return k},"getNext"),processTelemetry:Re,unload:Qe,update:Ze,_id:G,_setNext:s(function(He){k=He},"_setNext")};function fe(){var He;return v&&Oe(v[DL])&&(He=v[DL]()),He||(He=Ab(ce,x,T)),He}s(fe,"_getTelCtx");function Ee(He,Ye,gt,st,wt){var Ht=!1,ir=v?v[ry]:Ece,wr=He[rH];return wr||(wr=He[rH]={}),He.setNext(k),v&&hb(He[fc](),function(){return ir+":"+gt},function(){wr[G]=!0;try{var ei=k?k._id:Ri;ei&&(wr[ei]=!1),Ht=Ye(He)}catch(Oi){var Fi=k?wr[k._id]:!0;Fi&&(Ht=!0),(!k||!Fi)&&Lr(He[tm](),1,73,"Plugin ["+ir+"] failed during "+gt+" - "+Ot(Oi)+", run flags: "+Ot(wr))}},st,wt),Ht}s(Ee,"_processChain");function Re(He,Ye){Ye=Ye||fe();function gt(st){if(!v||!M)return!1;var wt=gy(v);return wt[em]||wt[M5]?!1:(Q&&v[iy](k),v[kf](He,st),!0)}s(gt,"_callProcessTelemetry"),Ee(Ye,gt,"processTelemetry",function(){return{item:He}},!He.sync)||Ye[Ll](He)}s(Re,"_processTelemetry");function Qe(He,Ye){function gt(){var st=!1;if(v){var wt=gy(v),Ht=v[fc]||wt[fc];v&&(!Ht||Ht===He.core())&&!wt[em]&&(wt[fc]=null,wt[em]=!0,wt[Xp]=!1,v[em]&&v[em](He,Ye)===!0&&(st=!0))}return st}s(gt,"_callTeardown"),Ee(He,gt,"unload",function(){},Ye.isAsync)||He[Ll](Ye)}s(Qe,"_unloadPlugin");function Ze(He,Ye){function gt(){var st=!1;if(v){var wt=gy(v),Ht=v[fc]||wt[fc];v&&(!Ht||Ht===He.core())&&!wt[em]&&v[ig]&&v[ig](He,Ye)===!0&&(st=!0)}return st}s(gt,"_callUpdate"),Ee(He,gt,"update",function(){},!1)||He[Ll](Ye)}return s(Ze,"_updatePlugin"),Xt(ce)}s($,"createTelemetryPluginProxy");function de(){var v=[];function x(k){k&&v[go](k)}s(x,"_addHandler");function T(k,M){$r(v,function(Q){try{Q(k,M)}catch(G){Lr(k[tm](),2,73,"Unexpected error calling unload handler - "+Ot(G))}}),v=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(de,"createUnloadHandlerContainer");function we(){var v=[];function x(k){var M=v;v=[],$r(M,function(Q){try{(Q.rm||Q.remove).call(Q)}catch(G){Lr(k,2,73,"Unloading:"+Ot(G))}})}s(x,"_doUnload");function T(k){k&&Tf(v,k)}return s(T,"_addHook"),{run:x,add:T}}s(we,"createUnloadHookContainer");var ke,$e="getPlugin",it=(ke={},ke[Q1]={isVal:q5,v:{}},ke),Et=function(){function v(){var x=this,T,k,M,Q,G;Ee(),pu(v,x,function(Re){Re[rS]=function(Qe,Ze,He,Ye){fe(Qe,Ze,Ye),T=!0},Re[em]=function(Qe,Ze){var He=Re[fc];if(!He||Qe&&He!==Qe[fc]())return;var Ye,gt=!1,st=Qe||S(null,He,M&&M[$e]?M[$e]():M),wt=Ze||{reason:0,isAsync:!1};function Ht(){gt||(gt=!0,Q.run(st,Ze),G.run(st[tm]()),Ye===!0&&st[Ll](wt),Ee())}return s(Ht,"_unloadCallback"),!Re[S5]||Re[S5](st,wt,Ht)!==!0?Ht():Ye=!0,Ye},Re[ig]=function(Qe,Ze){var He=Re[fc];if(!He||Qe&&He!==Qe[fc]())return;var Ye,gt=!1,st=Qe||P(null,He,M&&M[$e]?M[$e]():M),wt=Ze||{reason:0};function Ht(){gt||(gt=!0,fe(st.getCfg(),st.core(),st[rm]()))}return s(Ht,"_updateCallback"),!Re._doUpdate||Re._doUpdate(st,wt,Ht)!==!0?Ht():Ye=!0,Ye},cS(Re,"_addUnloadCb",function(){return Q},"add"),cS(Re,"_addHook",function(){return G},"add"),je(Re,"_unloadHooks",{g:s(function(){return G},"g")})}),x[tm]=function(Re){return ce(Re)[tm]()},x[Xp]=function(){return T},x.setInitialized=function(Re){T=Re},x[iy]=function(Re){M=Re},x[Ll]=function(Re,Qe){Qe?Qe[Ll](Re):M&&Oe(M[kf])&&M[kf](Re,null)},x._getTelCtx=ce;function ce(Re){Re===void 0&&(Re=null);var Qe=Re;if(!Qe){var Ze=k||Ab(null,{},x[fc]);M&&M[$e]?Qe=Ze[L1](null,M[$e]):Qe=Ze[L1](null,M)}return Qe}s(ce,"_getTelCtx");function fe(Re,Qe,Ze){Bf(Re,it,yS(Qe)),!Ze&&Qe&&(Ze=Qe[Fx]()[rm]());var He=M;M&&M[$e]&&(He=M[$e]()),x[fc]=Qe,k=Ab(Ze,Re,Qe,He)}s(fe,"_setDefaults");function Ee(){T=!1,x[fc]=null,k=null,M=null,G=we(),Q=de()}s(Ee,"_initDefaults")}return s(v,"BaseTelemetryPlugin"),v.__ieDyn=1,v}();function mr(v,x,T){var k={id:x,fn:T};Tf(v,k);var M={remove:s(function(){$r(v,function(Q,G){if(Q.id===k.id)return v[Bx](G,1),-1})},"remove")};return M}s(mr,"_addInitializer");function Bn(v,x,T){for(var k=!1,M=v[ai],Q=0;Q<M;++Q){var G=v[Q];if(G)try{if(G.fn[b5](null,[x])===!1){k=!0;break}}catch(ce){Lr(T,2,64,"Telemetry initializer failed: "+ul(ce),{exception:Ot(ce)},!0)}}return!k}s(Bn,"_runInitializers");var Xn=function(v){tS(x,v);function x(){var T=v.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var k,M;Q(),pu(x,T,function(G,ce){G.addTelemetryInitializer=function(fe){return mr(M,k++,fe)},G[kf]=function(fe,Ee){Bn(M,fe,Ee?Ee[tm]():G[tm]())&&G[Ll](fe,Ee)},G[S5]=function(){Q()}});function Q(){k=0,M=[]}return s(Q,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(Et),vr,Br="Plugins must provide initialize method",zn="_notificationManager",Nn="SDK is still unloading...",ki="SDK is not initialized",Po=100,Zi=5e4,Bc=nr((vr={cookieCfg:{}},vr[Wx]={rdOnly:!0,ref:!0,v:[]},vr[ag]={rdOnly:!0,ref:!0,v:[]},vr[Q1]={ref:!0,v:{}},vr[Q0]=Rf,vr.loggingLevelConsole=0,vr.diagnosticLogInterval=Rf,vr));function yb(v,x){return new Cce(x)}s(yb,"_createPerfManager");function IS(v,x,T){var k=[],M=[],Q={};return $r(T,function(G){(ie(G)||ie(G[rS]))&&Hr(Br);var ce=G[$x],fe=G[ry];G&&ce&&(ie(Q[ce])?Q[ce]=fe:eP(v,"Two extensions have same priority #"+ce+" - "+Q[ce]+", "+fe)),!ce||ce<x?k[go](G):M[go](G)}),{core:k,channels:M}}s(IS,"_validateExtensions");function NL(v,x){var T=!1;return $r(x,function(k){if(k===v)return T=!0,-1}),T}s(NL,"_isPluginPresent");function cP(v,x,T,k){T&&le(T,function(M,Q){k&&td(Q)&&td(x[M])&&cP(v,x[M],Q,k),k&&td(Q)&&td(x[M])?cP(v,x[M],Q,k):v.set(x,M,Q)})}s(cP,"_deepMergeConfig");function iH(v,x){var T=null,k=-1;return $r(v,function(M,Q){if(M.w===x)return T=M,k=Q,-1}),{i:k,l:T}}s(iH,"_findWatcher");function bce(v,x){var T=iH(v,x).l;return T||(T={w:x,rm:s(function(){var k=iH(v,x);k.i!==-1&&v[Bx](k.i,1)},"rm")},v[go](T)),T}s(bce,"_addDelayedCfgListener");function LL(v,x,T){$r(x,function(k){var M=ug(v,k.w,T);delete k.w,k.rm=function(){M.rm()}})}s(LL,"_registerDelayedCfgListener");function oH(v,x,T,k){return x.add(v[ng](function(M){var Q=M.cfg.disableDbgExt;Q===!0&&k&&(T[nS](k),k=null),T&&!k&&Q!==!0&&(k=cce(M.cfg),T[I5](k))})),k}s(oH,"_initDebugListener");function sH(v){return je({rm:s(function(){v.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(v)+">"},"v")})}s(sH,"_createUnloadHook");var Dt=function(){function v(){var x,T,k,M,Q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt,st,wt,Ht,ir,wr,ei,Fi,Oi,qo,bn,Jr,Qi,fa,As,Wt,Xr,Do;pu(v,this,function(Pt){dt(),Pt._getDbgPlgTargets=function(){return[Oi,M]},Pt[Xp]=function(){return T},Pt.activeStatus=function(){return Jr},Pt._setPendingStatus=function(){Jr=3},Pt[rS]=function(yt,Ir,Hn,Gr){He&&Hr(Nn),Pt[Xp]()&&Hr("Core cannot be initialized more than once"),x=Bf(yt,Bc,Hn||Pt[dc],!1),yt=x.cfg,gu(x[ng](function(Zo){var qs=Zo.cfg,od=Jr===3;if(!od){fa=qs.initInMemoMaxSize||Po;var Nf=qs.instrumentationKey,mg=qs.endpointUrl;if(ie(Nf)){ei=null,Jr=ty.INACTIVE;var hg="Please provide instrumentation key";T?(Lr(k,1,100,hg),ka()):Hr(hg);return}var EP=[];if(ht(Nf)?(EP[go](Nf),ei=null):ei=Nf,ht(mg)?(EP[go](mg),Qi=null):Qi=mg,EP[ai]){As=!1,Jr=3;var tM=q5(qs.initTimeOut)?qs.initTimeOut:Zi,tle=Qd(EP);XA(function(){As||Ln()},tM),_f(tle,function(Rb){try{if(As)return;if(!Rb.rejected){var kb=Rb[Lx];if(kb&&kb[ai]){var kH=kb[0];if(ei=kH&&kH[Lx],kb[ai]>1){var PH=kb[1];Qi=PH&&PH[Lx]}}ei&&(yt.instrumentationKey=ei,yt.endpointUrl=Qi)}Ln()}catch{As||Ln()}})}else Ln();var xP=Zo.ref(Zo.cfg,Q1);le(xP,function(Rb){Zo.ref(xP,Rb)})}})),Q=Gr,ir=oH(x,Ht,Q&&Pt[F0](),ir),Sb(),Pt[dc]=Hn;var Wn=yt[Wx];if(Re=[],Re[go].apply(Re,lq(lq([],Ir,!1),Wn)),Qe=yt[ag],Pa(null),(!Ze||Ze[ai]===0)&&Hr("No "+ag+" available"),Qe&&Qe[ai]>1){var zo=Pt[Mx]("TeeChannelController");(!zo||!zo.plugin)&&Lr(k,1,28,"TeeChannel required")}LL(yt,Fi,k),Fi=null,T=!0,Jr===ty.ACTIVE&&ka()},Pt.getChannels=function(){var yt=[];return Ze&&$r(Ze,function(Ir){yt[go](Ir)}),Xt(yt)},Pt.track=function(yt){hb(Pt[sS](),function(){return"AppInsightsCore:track"},function(){yt===null&&(pa(yt),Hr("Invalid telemetry item")),!yt[ny]&&ie(yt[ny])&&(pa(yt),Hr("telemetry name required")),yt.iKey=yt.iKey||ei,yt.time=yt.time||aS(new Date),yt.ver=yt.ver||"4.0",!He&&Pt[Xp]()&&Jr===ty.ACTIVE?Mc()[Ll](yt):Jr!==ty.INACTIVE&&M[ai]<=fa&&M[go](yt)},function(){return{item:yt}},!yt.sync)},Pt[Fx]=Mc,Pt[F0]=function(){return Q||(Q=new Ace(x.cfg),Pt[zn]=Q),Q},Pt[I5]=function(yt){Pt.getNotifyMgr()[I5](yt)},Pt[nS]=function(yt){Q&&Q[nS](yt)},Pt.getCookieMgr=function(){return fe||(fe=pce(x.cfg,Pt[dc])),fe},Pt.setCookieMgr=function(yt){fe!==yt&&(lb(fe,!1),fe=yt)},Pt[sS]=function(){return G||ce||pc()},Pt.setPerfMgr=function(yt){G=yt},Pt.eventCnt=function(){return M[ai]},Pt.releaseQueue=function(){if(T&&M[ai]>0){var yt=M;M=[],Jr===2?$r(yt,function(Ir){Ir.iKey=Ir.iKey||ei,Mc()[Ll](Ir)}):Lr(k,2,20,"core init status is not active")}},Pt.pollInternalLogs=function(yt){return gt=yt||null,Do=!1,Wt&&Wt[Nx](),Ho(!0)};function Ln(){As=!0,ie(ei)?(Jr=ty.INACTIVE,Lr(k,1,112,"ikey can't be resolved from promises")):Jr=ty.ACTIVE,ka()}s(Ln,"_setStatus");function ka(){T&&(Pt.releaseQueue(),Pt.pollInternalLogs())}s(ka,"_releaseQueues");function Ho(yt){if((!Wt||!Wt[Zp])&&!Do){var Ir=yt||k&&k.queue[ai]>0;Ir&&(Xr||(Xr=!0,gu(x[ng](function(Hn){var Gr=Hn.cfg.diagnosticLogInterval;(!Gr||!(Gr>0))&&(Gr=1e4);var Wn=!1;Wt&&(Wn=Wt[Zp],Wt[Nx]()),Wt=g5(wb,Gr),Wt.unref(),Wt[Zp]=Wn}))),Wt[Zp]=!0)}return Wt}s(Ho,"_startLogPoller"),Pt[uq]=function(){Do=!0,Wt&&Wt[Nx](),wb()},aL(Pt,function(){return Ye},["addTelemetryInitializer"]),Pt[N1]=function(yt,Ir,Hn){yt===void 0&&(yt=!0),T||Hr(ki),He&&Hr(Nn);var Gr={reason:50,isAsync:yt,flushComplete:!1},Wn;yt&&!Ir&&(Wn=Hx(function(qs){Ir=qs}));var zo=S(um(),Pt);zo[T5](function(){Ht.run(Pt[dc]),qq([fe,Q,k],yt,function(){dt(),Ir&&Ir(Gr)})},Pt);function Zo(qs){Gr.flushComplete=qs,He=!0,wt.run(zo,Gr),Pt[uq](),zo[Ll](Gr)}return s(Zo,"_doUnload"),wb(),fg(yt,Zo,6,Hn),Wn},Pt[Mx]=Ul,Pt.addPlugin=function(yt,Ir,Hn,Gr){if(!yt){Gr&&Gr(!1),_b(Br);return}var Wn=Ul(yt[ry]);if(Wn&&!Ir){Gr&&Gr(!1),_b("Plugin ["+yt[ry]+"] is already loaded!");return}var zo={reason:16};function Zo(Nf){Re[go](yt),zo.added=[yt],Pa(zo),Gr&&Gr(!0)}if(s(Zo,"_addPlugin"),Wn){var qs=[Wn.plugin],od={reason:2,isAsync:!!Hn};Hd(qs,od,function(Nf){Nf?(zo.removed=qs,zo.reason|=32,Zo()):Gr&&Gr(!1)})}else Zo()},Pt.updateCfg=function(yt,Ir){Ir===void 0&&(Ir=!0);var Hn;if(Pt[Xp]()){Hn={reason:1,cfg:x.cfg,oldCfg:d5({},x.cfg),newConfig:d5({},yt),merge:Ir},yt=Hn.newConfig;var Gr=x.cfg;yt[Wx]=Gr[Wx],yt[ag]=Gr[ag]}x._block(function(Wn){var zo=Wn.cfg;cP(Wn,zo,yt,Ir),Ir||le(zo,function(Zo){We(yt,Zo)||Wn.set(zo,Zo,Rf)}),Wn.setDf(zo,Bc)},!0),x.notify(),Hn&&pg(Hn)},Pt.evtNamespace=function(){return st},Pt.flush=fg,Pt.getTraceCtx=function(yt){return wr||(wr=vce()),wr},Pt.setTraceCtx=function(yt){wr=yt||null},Pt.addUnloadHook=gu,cS(Pt,"addUnloadCb",function(){return wt},"add"),Pt.onCfgChange=function(yt){var Ir;return T?Ir=ug(x.cfg,yt,Pt[dc]):Ir=bce(Fi,yt),sH(Ir)},Pt.getWParam=function(){return ua()||x.cfg.enableWParam?0:-1};function Ql(){var yt={};qo=[];var Ir=s(function(Hn){Hn&&$r(Hn,function(Gr){if(Gr[ry]&&Gr[Ox]&&!yt[Gr.identifier]){var Wn=Gr[ry]+"="+Gr[Ox];qo[go](Wn),yt[Gr.identifier]=Gr}})},"_addPluginVersions");Ir(Ze),Qe&&$r(Qe,function(Hn){Ir(Hn)}),Ir(Re)}s(Ql,"_setPluginVersions");function dt(){T=!1,x=Bf({},Bc,Pt[dc]),x.cfg[dq]=1,je(Pt,"config",{g:s(function(){return x.cfg},"g"),s:s(function(Ir){Pt.updateCfg(Ir,!1)},"s")}),je(Pt,"pluginVersionStringArr",{g:s(function(){return qo||Ql(),qo},"g")}),je(Pt,"pluginVersionString",{g:s(function(){return bn||(qo||Ql(),bn=qo.join(";")),bn||Ri},"g")}),je(Pt,"logger",{g:s(function(){return k||(k=new CS(x.cfg),x[dc]=k),k},"g"),s:s(function(Ir){x[dc]=Ir,k!==Ir&&(lb(k,!1),k=Ir)},"s")}),Pt[dc]=new CS(x.cfg),Oi=[];var yt=Pt.config[Wx]||[];yt.splice(0,yt[ai]),Tf(yt,Oi),Ye=new Xn,M=[],lb(Q,!1),Q=null,G=null,ce=null,lb(fe,!1),fe=null,Ee=null,Re=[],Qe=null,Ze=null,He=!1,gt=null,st=lg("AIBaseCore",!0),wt=de(),wr=null,ei=null,Ht=we(),Fi=[],bn=null,qo=null,Do=!1,Wt=null,Xr=!1,Jr=0,Qi=null,fa=null,As=!1}s(dt,"_initDefaults");function Mc(){var yt=Ab(um(),x.cfg,Pt);return yt[T5](Ho),yt}s(Mc,"_createTelCtx");function Pa(yt){var Ir=IS(Pt[dc],nce,Re);Ee=null,bn=null,qo=null,Ze=(Qe||[])[0]||[],Ze=PL(Tf(Ze,Ir[ag]));var Hn=Tf(PL(Ir[fc]),Ze);Oi=Xt(Hn);var Gr=Pt.config[Wx]||[];Gr.splice(0,Gr[ai]),Tf(Gr,Oi);var Wn=Mc();Ze&&Ze[ai]>0&&kL(Wn[L1](Ze),Hn),kL(Wn,Hn),yt&&pg(yt)}s(Pa,"_initPluginChain");function Ul(yt){var Ir=null,Hn=null,Gr=[];return $r(Oi,function(Wn){if(Wn[ry]===yt&&Wn!==Ye)return Hn=Wn,-1;Wn.getChannel&&Gr[go](Wn)}),!Hn&&Gr[ai]>0&&$r(Gr,function(Wn){if(Hn=Wn.getChannel(yt),!Hn)return-1}),Hn&&(Ir={plugin:Hn,setEnabled:s(function(Wn){gy(Hn)[M5]=!Wn},"setEnabled"),isEnabled:s(function(){var Wn=gy(Hn);return!Wn[em]&&!Wn[M5]},"isEnabled"),remove:s(function(Wn,zo){Wn===void 0&&(Wn=!0);var Zo=[Hn],qs={reason:1,isAsync:Wn};Hd(Zo,qs,function(od){od&&Pa({reason:32,removed:Zo}),zo&&zo(od)})},"remove")}),Ir}s(Ul,"_getPlugin");function um(){if(!Ee){var yt=(Oi||[]).slice();uc(yt,Ye)===-1&&yt[go](Ye),Ee=L(PL(yt),x.cfg,Pt)}return Ee}s(um,"_getPluginChain");function Hd(yt,Ir,Hn){if(yt&&yt[ai]>0){var Gr=L(yt,x.cfg,Pt),Wn=S(Gr,Pt);Wn[T5](function(){var zo=!1,Zo=[];$r(Re,function(od,Nf){NL(od,yt)?zo=!0:Zo[go](od)}),Re=Zo,bn=null,qo=null;var qs=[];Qe&&($r(Qe,function(od,Nf){var mg=[];$r(od,function(hg){NL(hg,yt)?zo=!0:mg[go](hg)}),qs[go](mg)}),Qe=qs),Hn&&Hn(zo),Ho()}),Wn[Ll](Ir)}else Hn(!1)}s(Hd,"_removePlugins");function wb(){if(k&&k.queue){var yt=k.queue.slice(0);k.queue[ai]=0,$r(yt,function(Ir){var Hn={name:gt||"InternalMessageId: "+Ir[w5],iKey:ei,time:aS(new Date),baseType:Z5.dataType,baseData:{message:Ir[M1]}};Pt.track(Hn)})}}s(wb,"_flushInternalLogs");function fg(yt,Ir,Hn,Gr){var Wn=1,zo=!1,Zo=null;Gr=Gr||5e3;function qs(){Wn--,zo&&Wn===0&&(Zo&&Zo[Nx](),Zo=null,Ir&&Ir(zo),Ir=null)}if(s(qs,"doCallback"),Ze&&Ze[ai]>0){var od=Mc()[L1](Ze);od.iterate(function(Nf){if(Nf.flush){Wn++;var mg=!1;Nf.flush(yt,function(){mg=!0,qs()},Hn)||mg||(yt&&Zo==null?Zo=XA(function(){Zo=null,qs()},Gr):qs())}})}return zo=!0,qs(),!0}s(fg,"_flushChannels");function Sb(){var yt;gu(x[ng](function(Ir){var Hn=Ir.cfg.enablePerfMgr;if(Hn){var Gr=Ir.cfg[Q0];(yt!==Gr||!yt)&&(Gr||(Gr=yb),Iq(Ir.cfg,Q0,Gr),yt=Gr,ce=null),!G&&!ce&&Oe(Gr)&&(ce=Gr(Pt,Pt[F0]()))}else ce=null,yt=null}))}s(Sb,"_initPerfManager");function pg(yt){var Ir=P(um(),Pt);Ir[T5](Ho),(!Pt._updateHook||Pt._updateHook(Ir,yt)!==!0)&&Ir[Ll](yt)}s(pg,"_doUpdate");function _b(yt){var Ir=Pt[dc];Ir?(Lr(Ir,2,73,yt),Ho()):Hr(yt)}s(_b,"_logOrThrowError");function pa(yt){var Ir=Pt[F0]();Ir&&Ir[Gx]([yt],2)}s(pa,"_notifyInvalidEvent");function gu(yt){Ht.add(yt)}s(gu,"_addUnloadHook")})}return s(v,"AppInsightsCore"),v.__ieDyn=1,v}();function jr(v,x){try{if(v&&v!==""){var T=Ud().parse(v);if(T&&T[fq]&&T[fq]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ai])return T}}catch(k){Lr(x,1,43,"Cannot parse the response. "+(k[ny]||Ot(k)),{response:v})}return null}s(jr,"parseResponse");var An="",cs="NoResponseBody",Nc="&"+cs+"=true",Ra="POST",Lc=function(){function v(){var x=0,T,k,M,Q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt;pu(v,this,function(st,wt){var Ht=!0;As(),st[rS]=function(Wt,Xr){M=Xr,k&&Lr(M,1,28,"Sender is already initialized"),st.SetConfig(Wt),k=!0},st._getDbgPlgTargets=function(){return[k,Q,ce,T]},st.SetConfig=function(Wt){try{if(G=Wt.senderOnCompleteCallBack||{},ce=!!Wt.disableCredentials,fe=Wt.fetchCredentials,Q=!!Wt.isOneDs,T=!!Wt.enableSendPromise,Re=!!Wt.disableXhr,Qe=!!Wt.disableBeacon,Ze=!!Wt.disableBeaconSync,gt=Wt.timeWrapper,Ye=!!Wt.addNoResponse,He=!!Wt.disableFetchKeepAlive,Ee={sendPOST:Jr},Q||(Ht=!1),ce){var Xr=Zx();Xr&&Xr.protocol&&Xr.protocol[Px]()==="file:"&&(Ht=!1)}return!0}catch{}return!1},st.getSyncFetchPayload=function(){return x},st.getSenderInst=function(Wt,Xr){return Wt&&Wt[ai]?Fi(Wt,Xr):null},st.getFallbackInst=function(){return Ee},st[S5]=function(Wt,Xr){As()};function ir(Wt,Xr){Oi(Xr,200,{},Wt)}s(ir,"_onSuccess");function wr(Wt,Xr){Lr(M,2,26,"Failed to send telemetry.",{message:Wt}),Oi(Xr,400,{})}s(wr,"_onError");function ei(Wt){wr("No endpoint url is provided for the batch",Wt)}s(ei,"_onNoPayloadUrl");function Fi(Wt,Xr){for(var Do=0,Pt=null,Ln=0;Pt==null&&Ln<Wt[ai];)Do=Wt[Ln],!Re&&Do===1?mL()?Pt=fa:hL()&&(Pt=Jr):Do===2&&pS(Xr)&&(!Xr||!He)?Pt=Qi:Do===3&&uy()&&(Xr?!Ze:!Qe)&&(Pt=bn),Ln++;return Pt?{_transport:Do,_isSync:Xr,sendPOST:Pt}:null}s(Fi,"_getSenderInterface");function Oi(Wt,Xr,Do,Pt){try{Wt&&Wt(Xr,Do,Pt)}catch{}}s(Oi,"_doOnComplete");function qo(Wt,Xr){var Do=lc(),Pt=Wt[og];if(!Pt)return ei(Xr),!0;Pt=Wt[og]+(Ye?Nc:An);var Ln=Wt[Qx],ka=Q?Ln:new Blob([Ln],{type:"text/plain;charset=UTF-8"}),Ho=Do.sendBeacon(Pt,ka);return Ho}s(qo,"_doBeaconSend");function bn(Wt,Xr,Do){var Pt=Wt[Qx];try{if(Pt)if(qo(Wt,Xr))ir(An,Xr);else{var Ln=G&&G.beaconOnRetry;Ln&&Oe(Ln)?Ln(Wt,Xr,qo):(Ee&&Ee.sendPOST(Wt,Xr,!0),Lr(M,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ka){Q&&eP(M,"Failed to send telemetry using sendBeacon API. Ex:"+Ot(ka)),Oi(Xr,Q?0:400,{},An)}}s(bn,"_beaconSender");function Jr(Wt,Xr,Do){var Pt,Ln,ka,Ho=Wt[tL]||{};!Do&&T&&(Pt=Hx(function(Pa,Ul){Ln=Pa,ka=Ul})),Q&&Do&&Wt.disableXhrSync&&(Do=!1);var Ql=Wt[og];if(!Ql){ei(Xr),Ln&&Ln(!1);return}var dt=uL(Ra,Ql,Ht,!0,Do,Wt[sg]);Q||dt.setRequestHeader("Content-type","application/json"),$r(Tt(Ho),function(Pa){dt.setRequestHeader(Pa,Ho[Pa])}),dt.onreadystatechange=function(){Q||(Mc(dt),dt.readyState===4&&Ln&&Ln(!0))},dt.onload=function(){Q&&Mc(dt)};function Mc(Pa){var Ul=G&&G.xhrOnComplete,um=Ul&&Oe(Ul);if(um)Ul(Pa,Xr,Wt);else{var Hd=H5(Pa);Oi(Xr,Pa[iS],H1(Pa,Q),Hd)}}return s(Mc,"_doOnReadyFunc"),dt.onerror=function(Pa){Oi(Xr,Q?dt[iS]:400,H1(dt,Q),Q?An:W5(dt)),ka&&ka(Pa)},dt.ontimeout=function(){Oi(Xr,Q?dt[iS]:500,H1(dt,Q),Q?An:W5(dt)),Ln&&Ln(!1)},dt.send(Wt[Qx]),Pt}s(Jr,"_xhrSender");function Qi(Wt,Xr,Do){var Pt,Ln=Wt[og],ka=Wt[Qx],Ho=Q?ka:new Blob([ka],{type:"application/json"}),Ql,dt,Mc,Pa=new Headers,Ul=ka[ai],um=!1,Hd=!1,wb=Wt[tL]||{},fg=(Pt={method:Ra,body:Ho},Pt[Hq]=!0,Pt);Wt.headers&&Tt(Wt.headers)[ai]>0&&($r(Tt(wb),function(pa){Pa.append(pa,wb[pa])}),fg[tL]=Pa),fe?fg.credentials=fe:Ht&&Q&&(fg.credentials="include"),Do&&(fg.keepalive=!0,x+=Ul,Q?Wt._sendReason===2&&(um=!0,Ye&&(Ln+=Nc)):um=!0);var Sb=new Request(Ln,fg);try{Sb[Hq]=!0}catch{}if(!Do&&T&&(Ql=Hx(function(pa,gu){dt=pa,Mc=gu})),!Ln){ei(Xr),dt&&dt(!1);return}function pg(pa){Oi(Xr,Q?0:400,{},Q?An:pa)}s(pg,"_handleError");function _b(pa,gu,yt){var Ir=pa[iS],Hn=G.fetchOnComplete;Hn&&Oe(Hn)?Hn(pa,Xr,yt||An,gu):Oi(Xr,Ir,{},yt||An)}s(_b,"_onFetchComplete");try{_f(fetch(Q?Ln:Sb,Q?fg:null),function(pa){if(Do&&(x-=Ul,Ul=0),!Hd)if(Hd=!0,pa.rejected)pg(pa.reason&&pa.reason[M1]),Mc&&Mc(pa.reason);else{var gu=pa[Lx];try{!Q&&!gu.ok?(pg(gu.statusText),dt&&dt(!1)):Q&&!gu.body?(_b(gu,null,An),dt&&dt(!0)):_f(gu.text(),function(yt){_b(gu,Wt,yt[Lx]),dt&&dt(!0)})}catch(yt){pg(Ot(yt)),Mc&&Mc(yt)}}})}catch(pa){Hd||(pg(Ot(pa)),Mc&&Mc(pa))}return um&&!Hd&&(Hd=!0,Oi(Xr,200,{}),dt&&dt(!0)),Q&&!Hd&&Wt[sg]>0&&gt&&gt.set(function(){Hd||(Hd=!0,Oi(Xr,500,{}),dt&&dt(!0))},Wt[sg]),Ql}s(Qi,"_doFetchSender");function fa(Wt,Xr,Do){var Pt=Qs(),Ln=new XDomainRequest,ka=Wt[Qx];Ln.onload=function(){var Pa=H5(Ln),Ul=G&&G.xdrOnComplete;Ul&&Oe(Ul)?Ul(Ln,Xr,Wt):Oi(Xr,200,{},Pa)},Ln.onerror=function(){Oi(Xr,400,{},Q?An:wq(Ln))},Ln.ontimeout=function(){Oi(Xr,500,{})},Ln.onprogress=function(){};var Ho=Pt&&Pt.location&&Pt.location.protocol||"",Ql=Wt[og];if(!Ql){ei(Xr);return}if(!Q&&Ql.lastIndexOf(Ho,0)!==0){var dt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Lr(M,2,40,". "+dt),wr(dt,Xr);return}var Mc=Q?Ql:Ql[sy](/^(https?:)/,"");Ln.open(Ra,Mc),Wt[sg]&&(Ln[sg]=Wt[sg]),Ln.send(ka),Q&&Do?gt&&gt.set(function(){Ln.send(ka)},0):Ln.send(ka)}s(fa,"_xdrSender");function As(){x=0,k=!1,T=!1,M=null,Q=null,G=null,ce=null,fe=null,Ee=null,Re=!1,Qe=!1,Ze=!1,He=!1,Ye=!1,gt=null}s(As,"_initDefaults")})}return s(v,"SenderPostManager"),v.__ieDyn=1,v}(),j1="on",Ay="attachEvent",Cb="addEventListener",aH="detachEvent",cH="removeEventListener",lP="events";lg("aiEvtPageHide"),lg("aiEvtPageShow");var Ice=/\.[\.]+/g,gRe=/[\.]+$/,oCt=1,lH=Bq("events"),sCt=/^([^.]*)(?:\.(.+)|)/;function ARe(v){return v&&v[sy]?v[sy](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ri):v}s(ARe,"_normalizeNamespace");function Tce(v,x){if(x){var T=Ri;Je(x)?(T=Ri,$r(x,function(M){M=ARe(M),M&&(M[0]!=="."&&(M="."+M),T+=M)})):T=ARe(x),T&&(T[0]!=="."&&(T="."+T),v=(v||Ri)+T)}var k=sCt.exec(v||Ri)||[];return{type:k[1],ns:(k[2]||Ri).replace(Ice,".").replace(gRe,Ri)[oy](".").sort().join(".")}}s(Tce,"_getEvtNamespace");function yRe(v,x,T){T===void 0&&(T=!0);var k=lH.get(v,lP,{},T),M=k[x];return M||(M=k[x]=[]),M}s(yRe,"_getRegisteredEvents");function CRe(v,x,T,k){v&&x&&x[mu]&&(v[cH]?v[cH](x[mu],T,k):v[aH]&&v[aH](j1+x[mu],T))}s(CRe,"_doDetach");function aCt(v,x,T,k){var M=!1;return v&&x&&x[mu]&&T&&(v[Cb]?(v[Cb](x[mu],T,k),M=!0):v[Ay]&&(v[Ay](j1+x[mu],T),M=!0)),M}s(aCt,"_doAttach");function vRe(v,x,T,k){for(var M=x[ai];M--;){var Q=x[M];Q&&(!T.ns||T.ns===Q[X8].ns)&&(!k||k(Q))&&(CRe(v,Q[X8],Q.handler,Q.capture),x[Bx](M,1))}}s(vRe,"_doUnregister");function cCt(v,x,T){if(x[mu])vRe(v,yRe(v,x[mu]),x,T);else{var k=lH.get(v,lP,{});le(k,function(M,Q){vRe(v,Q,x,T)}),Tt(k)[ai]===0&&lH.kill(v,lP)}}s(cCt,"_unregisterEvents");function ERe(v,x){var T;return x?(Je(x)?T=[v].concat(x):T=[v,x],T=Tce("xx",T).ns[oy](".")):T=v,T}s(ERe,"mergeEvtNamespace");function xRe(v,x,T,k,M){M===void 0&&(M=!1);var Q=!1;if(v)try{var G=Tce(x,k);if(Q=aCt(v,G,T,M),Q&&lH.accept(v)){var ce={guid:oCt++,evtName:G,handler:T,capture:M};yRe(v,G.type)[go](ce)}}catch{}return Q}s(xRe,"eventOn");function lCt(v,x,T,k,M){if(M===void 0&&(M=!1),v)try{var Q=Tce(x,k),G=!1;cCt(v,Q,function(ce){return Q.ns&&!T||ce.handler===T?(G=!0,!0):!1}),G||CRe(v,Q,T,M)}catch{}}s(lCt,"eventOff");var bRe="sampleRate",wce="ProcessLegacy",IRe="http.method",Sce="https://dc.services.visualstudio.com",uP="/v2/track",vb="not_specified",TRe=Uae({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),uH="split",Ti="length",_ce="toLowerCase",TS="ingestionendpoint",ML="toString",wRe="removeItem",dH="message",uCt="count",Rce="stringify",kce="pathname",FL="match",Eb="name",yy="properties",G1="measurements",fH="sizeInBytes",pH="typeName",OL="exceptions",QL="severityLevel",Pce="problemGroup",dP="parsedStack",mH="hasFullStack",hH="assembly",V1="fileName",fP="line",gH="aiDataContract",AH="duration";function SRe(v,x,T){var k=x[Ti],M=dCt(v,x);if(M[Ti]!==k){for(var Q=0,G=M;T[G]!==void 0;)Q++,G=Ce(M,0,147)+mCt(Q);M=G}return M}s(SRe,"dataSanitizeKeyAndAddUniqueness");function dCt(v,x){var T;return x&&(x=Xi(Mt(x)),x[Ti]>150&&(T=Ce(x,0,150),Lr(v,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(dCt,"dataSanitizeKey");function nd(v,x,T){T===void 0&&(T=1024);var k;return x&&(T=T||1024,x=Xi(Mt(x)),x[Ti]>T&&(k=Ce(x,0,T),Lr(v,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),k||x}s(nd,"dataSanitizeString");function Dce(v,x){return RRe(v,x,2048,66)}s(Dce,"dataSanitizeUrl");function _Re(v,x){var T;return x&&x[Ti]>32768&&(T=Ce(x,0,32768),Lr(v,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(_Re,"dataSanitizeMessage");function fCt(v,x){var T;if(x){var k=""+x;k[Ti]>32768&&(T=Ce(k,0,32768),Lr(v,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(fCt,"dataSanitizeException");function wS(v,x){if(x){var T={};le(x,function(k,M){if(Te(M)&&eb())try{M=Ud()[Rce](M)}catch(Q){Lr(v,2,49,"custom property is not valid",{exception:Q},!0)}M=nd(v,M,8192),k=SRe(v,k,T),T[k]=M}),x=T}return x}s(wS,"dataSanitizeProperties");function SS(v,x){if(x){var T={};le(x,function(k,M){k=SRe(v,k,T),T[k]=M}),x=T}return x}s(SS,"dataSanitizeMeasurements");function pCt(v,x){return x&&RRe(v,x,128,69)[ML]()}s(pCt,"dataSanitizeId");function RRe(v,x,T,k){var M;return x&&(x=Xi(Mt(x)),x[Ti]>T&&(M=Ce(x,0,T),Lr(v,2,k,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),M||x}s(RRe,"dataSanitizeInput");function mCt(v){var x="00"+v;return Ie(x,x[Ti]-3)}s(mCt,"dsPadNumber");var kRe=cc()||{},PRe=0,hCt=[null,null,null,null,null];function gCt(v){var x=PRe,T=hCt,k=T[x];return kRe.createElement?T[x]||(k=T[x]=kRe.createElement("a")):k={host:ACt(v,!0)},k.href=v,x++,x>=T[Ti]&&(x=0),PRe=x,k}s(gCt,"urlParseUrl");function ACt(v,x){var T=yCt(v,x)||"";if(T){var k=T[FL](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ti]>3&&Ae(k[2])&&k[2][Ti]>0)return k[2]+(k[3]||"")}return T}s(ACt,"urlParseHost");function yCt(v,x){var T=null;if(v){var k=v[FL](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ti]>2&&Ae(k[2])&&k[2][Ti]>0&&(T=k[2]||"",x&&k[Ti]>2)){var M=(k[1]||"")[_ce](),Q=k[3]||"";(M==="http"&&Q===":80"||M==="https"&&Q===":443")&&(Q=""),T+=Q}}return T}s(yCt,"urlParseFullHost");var CCt=[Sce+uP,"https://breeze.aimon.applicationinsights.io"+uP,"https://dc-int.services.visualstudio.com"+uP];function DRe(v){return uc(CCt,v[_ce]())!==-1}s(DRe,"isInternalApplicationInsightsEndpoint");function vCt(v,x,T,k){var M,Q=k,G=k;if(x&&x[Ti]>0){var ce=gCt(x);if(M=ce.host,!Q)if(ce[kce]!=null){var fe=ce.pathname[Ti]===0?"/":ce[kce];fe.charAt(0)!=="/"&&(fe="/"+fe),G=ce[kce],Q=nd(v,T?T+" "+fe:fe)}else Q=nd(v,x)}else M=k,Q=k;return{target:M,name:Q,data:G}}s(vCt,"AjaxHelperParseDependencyPath");var Bce=x5({LocalStorage:0,SessionStorage:1}),pP=void 0,BRe="";function NRe(v){try{if(ie(gi()))return null;var x=new Date()[ML](),T=Vo(v===Bce.LocalStorage?"localStorage":"sessionStorage"),k=BRe+x;T.setItem(k,x);var M=T.getItem(k)!==x;if(T[wRe](k),!M)return T}catch{}return null}s(NRe,"_getVerifiedStorageObject");function Nce(){return LRe()?NRe(Bce.SessionStorage):null}s(Nce,"_getSessionStorageObject");function ECt(v){BRe=v||""}s(ECt,"utlSetStoragePrefix");function LRe(v){return(v||pP===void 0)&&(pP=!!NRe(Bce.SessionStorage)),pP}s(LRe,"utlCanUseSessionStorage");function xCt(v,x){var T=Nce();if(T!==null)try{return T.getItem(x)}catch(k){pP=!1,Lr(v,2,2,"Browser failed read of session storage. "+ul(k),{exception:Ot(k)})}return null}s(xCt,"utlGetSessionStorage");function bCt(v,x,T){var k=Nce();if(k!==null)try{return k.setItem(x,T),!0}catch(M){pP=!1,Lr(v,2,4,"Browser failed write to session storage. "+ul(M),{exception:Ot(M)})}return!1}s(bCt,"utlSetSessionStorage");function ICt(v,x){var T=Nce();if(T!==null)try{return T[wRe](x),!0}catch(k){pP=!1,Lr(v,2,6,"Browser failed removal of session storage item. "+ul(k),{exception:Ot(k)})}return!1}s(ICt,"utlRemoveSessionStorage");var TCt=";",wCt="=";function Lce(v){if(!v)return{};var x=v[uH](TCt),T=L8(x,function(M,Q){var G=Q[uH](wCt);if(G[Ti]===2){var ce=G[0][_ce](),fe=G[1];M[ce]=fe}return M},{});if(Tt(T)[Ti]>0){if(T.endpointsuffix){var k=T.location?T.location+".":"";T[TS]=T[TS]||"https://"+k+"dc."+T.endpointsuffix}T[TS]=T[TS]||Sce,oq(T[TS],"/")&&(T[TS]=T[TS].slice(0,-1))}return T}s(Lce,"parseConnectionString");var SCt=function(){function v(x,T,k){var M=this,Q=this;Q.ver=1,Q.sampleRate=100,Q.tags={},Q[Eb]=nd(x,k)||vb,Q.data=T,Q.time=aS(new Date),Q[gH]={time:1,iKey:1,name:1,sampleRate:s(function(){return M.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(v,"Envelope"),v}(),mP=function(){function v(x,T,k,M){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Q=this;Q.ver=2,Q[Eb]=nd(x,T)||vb,Q[yy]=wS(x,k),Q[G1]=SS(x,M)}return s(v,"Event"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Event",v.dataType="EventData",v}(),_Ct=58,RCt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,kCt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,PCt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,DCt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,BCt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,NCt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,LCt=/([^\(\s\n]+):([0-9]+)$/,MRe="<no_method>",hP="error",lm="stack",Mce="stackDetails",FRe="errorSrc",Fce="message",ORe="description",QRe=[{re:kCt,len:5,m:1,fn:2,ln:3,col:4},{chk:FCt,pre:MCt,re:PCt,len:4,m:1,fn:2,ln:3},{re:DCt,len:3,m:1,fn:2,hdl:jRe},{re:BCt,len:2,fn:1,hdl:jRe}];function MCt(v){return v.replace(/(\(anonymous\))/,"<anonymous>")}s(MCt,"_scrubAnonymous");function FCt(v){return eg(v,"[native")<0}s(FCt,"_ignoreNative");function Oce(v,x){var T=v;return T&&!Ae(T)&&(JSON&&JSON[Rce]?(T=JSON[Rce](v),x&&(!T||T==="{}")&&(Oe(v[ML])?T=v[ML]():T=""+v)):T=""+v+" - (Missing JSON.stringify)"),T||""}s(Oce,"_stringify");function URe(v,x){var T=v;return v&&(T&&!Ae(T)&&(T=v[Fce]||v[ORe]||T),T&&!Ae(T)&&(T=Oce(T,!0)),v.filename&&(T=T+" @"+(v.filename||"")+":"+(v.lineno||"?")+":"+(v.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&eg(T||"",x)===-1&&(T=x+": "+T),T||""}s(URe,"_formatMessage");function OCt(v){try{if(Te(v))return"hasFullStack"in v&&"typeName"in v}catch{}return!1}s(OCt,"_isExceptionDetailsInternal");function QCt(v){try{if(Te(v))return"ver"in v&&"exceptions"in v&&"properties"in v}catch{}return!1}s(QCt,"_isExceptionInternal");function qRe(v){return v&&v.src&&Ae(v.src)&&v.obj&&Je(v.obj)}s(qRe,"_isStackDetails");function _S(v){var x=v||"";Ae(x)||(Ae(x[lm])?x=x[lm]:x=""+x);var T=x[uH](`
`);return{src:x,obj:T}}s(_S,"_convertStackObj");function UCt(v){for(var x=[],T=v[uH](`
`),k=0;k<T[Ti];k++){var M=T[k];T[k+1]&&(M+="@"+T[k+1],k++),x.push(M)}return{src:v,obj:x}}s(UCt,"_getOperaStack");function HRe(v){var x=null;if(v)try{if(v[lm])x=_S(v[lm]);else if(v[hP]&&v[hP][lm])x=_S(v[hP][lm]);else if(v.exception&&v.exception[lm])x=_S(v.exception[lm]);else if(qRe(v))x=v;else if(qRe(v[Mce]))x=v[Mce];else if(Qs()&&Qs().opera&&v[Fce])x=UCt(v[dH]);else if(v.reason&&v.reason[lm])x=_S(v.reason[lm]);else if(Ae(v))x=_S(v);else{var T=v[Fce]||v[ORe]||"";Ae(v[FRe])&&(T&&(T+=`
`),T+=" from "+v[FRe]),T&&(x=_S(T))}}catch(k){x=_S(k)}return x||{src:"",obj:null}}s(HRe,"_getStackFromErrorObj");function qCt(v){var x="";return v&&(v.obj?x=v.obj.join(`
`):x=v.src||""),x}s(qCt,"_formatStackTrace");function HCt(v){var x,T=v.obj;if(T&&T[Ti]>0){x=[];var k=0,M=!1,Q=0;$r(T,function(gt){if(M||GCt(gt)){var st=Mt(gt);M=!0;var wt=VCt(st,k);wt&&(Q+=wt[fH],x.push(wt),k++)}});var G=32*1024;if(Q>G)for(var ce=0,fe=x[Ti]-1,Ee=0,Re=ce,Qe=fe;ce<fe;){var Ze=x[ce][fH],He=x[fe][fH];if(Ee+=Ze+He,Ee>G){var Ye=Qe-Re+1;x.splice(Re,Ye);break}Re=ce,Qe=fe,ce++,fe--}}return x}s(HCt,"_parseStack");function yH(v){var x="";if(v&&(x=v.typeName||v[Eb]||"",!x))try{var T=/function (.{1,200})\(/,k=T.exec(v.constructor[ML]());x=k&&k[Ti]>1?k[1]:""}catch{}return x}s(yH,"_getErrorType");function Qce(v){if(v)try{if(!Ae(v)){var x=yH(v),T=Oce(v,!1);return(!T||T==="{}")&&(v[hP]&&(v=v[hP],x=yH(v)),T=Oce(v,!0)),eg(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(v||"")}s(Qce,"_formatErrorCode");var CH=function(){function v(x,T,k,M,Q,G){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ce=this;ce.ver=2,QCt(T)?(ce[OL]=T[OL]||[],ce[yy]=T[yy],ce[G1]=T[G1],T[QL]&&(ce[QL]=T[QL]),T.id&&(ce.id=T.id,T[yy].id=T.id),T[Pce]&&(ce[Pce]=T[Pce]),ie(T.isManual)||(ce.isManual=T.isManual)):(k||(k={}),G&&(k.id=G),ce[OL]=[WRe(x,T,k)],ce[yy]=wS(x,k),ce[G1]=SS(x,M),Q&&(ce[QL]=Q),G&&(ce.id=G))}return s(v,"Exception"),v.CreateAutoException=function(x,T,k,M,Q,G,ce,fe){var Ee=yH(Q||G||x);return{message:URe(x,Ee),url:T,lineNumber:k,columnNumber:M,error:Qce(Q||G||x),evt:Qce(G||x),typeName:Ee,stackDetails:HRe(ce||Q||G),errorSrc:fe}},v.CreateFromInterface=function(x,T,k,M){var Q=T[OL]&&Jh(T[OL],function(ce){return jCt(x,ce)}),G=new v(x,rg(rg({},T),{exceptions:Q}),k,M);return G},v.prototype.toInterface=function(){var x=this,T=x.exceptions,k=x.properties,M=x.measurements,Q=x.severityLevel,G=x.problemGroup,ce=x.id,fe=x.isManual,Ee=T instanceof Array&&Jh(T,function(Re){return Re.toInterface()})||void 0;return{ver:"4.0",exceptions:Ee,severityLevel:Q,properties:k,measurements:M,problemGroup:G,id:ce,isManual:fe}},v.CreateSimpleException=function(x,T,k,M,Q,G){var ce;return{exceptions:[(ce={},ce[mH]=!0,ce.message=x,ce.stack=Q,ce.typeName=T,ce)]}},v.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",v.dataType="ExceptionData",v.formatError=Qce,v}(),WCt=Xt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function $Ct(){var v=this,x=Je(v[dP])&&Jh(v[dP],function(k){return YCt(k)}),T={id:v.id,outerId:v.outerId,typeName:v[pH],message:v[dH],hasFullStack:v[mH],stack:v[lm],parsedStack:x||void 0};return T}s($Ct,"_toInterface");function WRe(v,x,T){var k,M,Q,G,ce,fe,Ee,Re;if(OCt(x))G=x[pH],ce=x[dH],Ee=x[lm],Re=x[dP]||[],fe=x[mH];else{var Qe=x,Ze=Qe&&Qe.evt;vt(Qe)||(Qe=Qe[hP]||Ze||Qe),G=nd(v,yH(Qe))||vb,ce=_Re(v,URe(x||Qe,G))||vb;var He=x[Mce]||HRe(x);Re=HCt(He),Je(Re)&&Jh(Re,function(Ye){Ye[hH]=nd(v,Ye[hH]),Ye[V1]=nd(v,Ye[V1])}),Ee=fCt(v,qCt(He)),fe=Je(Re)&&Re[Ti]>0,T&&(T[pH]=T[pH]||G)}return k={},k[gH]=WCt,k.id=M,k.outerId=Q,k.typeName=G,k.message=ce,k[mH]=fe,k.stack=Ee,k.parsedStack=Re,k.toInterface=$Ct,k}s(WRe,"_createExceptionDetails");function jCt(v,x){var T=Je(x[dP])&&Jh(x[dP],function(M){return zCt(M)})||x[dP],k=WRe(v,rg(rg({},x),{parsedStack:T}));return k}s(jCt,"_createExDetailsFromInterface");function $Re(v,x){var T=x[FL](NCt);if(T&&T[Ti]>=4)v[V1]=T[1],v[fP]=parseInt(T[2]);else{var k=x[FL](LCt);k&&k[Ti]>=3?(v[V1]=k[1],v[fP]=parseInt(k[2])):v[V1]=x}}s($Re,"_parseFilename");function jRe(v,x,T){var k=v[V1];x.fn&&T&&T[Ti]>x.fn&&(x.ln&&T[Ti]>x.ln?(k=Xi(T[x.fn]||""),v[fP]=parseInt(Xi(T[x.ln]||""))||0):k=Xi(T[x.fn]||"")),k&&$Re(v,k)}s(jRe,"_handleFilename");function GCt(v){var x=!1;if(v&&Ae(v)){var T=Xi(v);T&&(x=RCt.test(T))}return x}s(GCt,"_isStackFrame");var GRe=Xt({level:1,method:1,assembly:0,fileName:0,line:0});function VCt(v,x){var T,k;if(v&&Ae(v)&&Xi(v)){k=(T={},T[gH]=GRe,T.level=x,T.assembly=Xi(v),T.method=MRe,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var M=0;M<QRe[Ti];){var Q=QRe[M];if(Q.chk&&!Q.chk(v))break;Q.pre&&(v=Q.pre(v));var G=v[FL](Q.re);if(G&&G[Ti]>=Q.len){Q.m&&(k.method=Xi(G[Q.m]||MRe)),Q.hdl?Q.hdl(k,Q,G):Q.fn&&(Q.ln?(k[V1]=Xi(G[Q.fn]||""),k[fP]=parseInt(Xi(G[Q.ln]||""))||0):$Re(k,G[Q.fn]||""));break}M++}}return VRe(k)}s(VCt,"_extractStackFrame");function zCt(v){var x,T=(x={},x[gH]=GRe,x.level=v.level,x.method=v.method,x.assembly=v[hH],x.fileName=v[V1],x.line=v[fP],x.sizeInBytes=0,x);return VRe(T)}s(zCt,"_stackFrameFromInterface");function VRe(v){var x=_Ct;return v&&(x+=v.method[Ti],x+=v.assembly[Ti],x+=v.fileName[Ti],x+=v.level.toString()[Ti],x+=v.line.toString()[Ti],v[fH]=x),v}s(VRe,"_populateFrameSizeInBytes");function YCt(v){return{level:v.level,method:v.method,assembly:v[hH],fileName:v[V1],line:v[fP]}}s(YCt,"_parsedFrameToInterface");var KCt=function(){function v(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(v,"DataPoint"),v}(),UL=function(){function v(x,T,k,M,Q,G,ce,fe,Ee){this.aiDataContract={ver:1,metrics:1,properties:0};var Re=this;Re.ver=2;var Qe=new KCt;Qe[uCt]=M>0?M:void 0,Qe.max=isNaN(G)||G===null?void 0:G,Qe.min=isNaN(Q)||Q===null?void 0:Q,Qe[Eb]=nd(x,T)||vb,Qe.value=k,Qe.stdDev=isNaN(ce)||ce===null?void 0:ce,Re.metrics=[Qe],Re[yy]=wS(x,fe),Re[G1]=SS(x,Ee)}return s(v,"Metric"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",v.dataType="MetricData",v}(),qL="";function zRe(v){(isNaN(v)||v<0)&&(v=0),v=Bae(v);var x=qL+v%1e3,T=qL+KA(v/1e3)%60,k=qL+KA(v/(1e3*60))%60,M=qL+KA(v/(1e3*60*60))%24,Q=KA(v/(1e3*60*60*24));return x=x[Ti]===1?"00"+x:x[Ti]===2?"0"+x:x,T=T[Ti]<2?"0"+T:T,k=k[Ti]<2?"0"+k:k,M=M[Ti]<2?"0"+M:M,(Q>0?Q+".":qL)+M+":"+k+":"+T+"."+x}s(zRe,"msToTimeSpan");var vH=function(){function v(x,T,k,M,Q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var fe=this;fe.ver=2,fe.id=pCt(x,ce),fe.url=Dce(x,k),fe[Eb]=nd(x,T)||vb,isNaN(M)||(fe[AH]=zRe(M)),fe[yy]=wS(x,Q),fe[G1]=SS(x,G)}return s(v,"PageView"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",v.dataType="PageviewData",v}(),EH=function(){function v(x,T,k,M,Q,G,ce,fe,Ee,Re,Qe,Ze){Ee===void 0&&(Ee="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var He=this;He.ver=2,He.id=T,He[AH]=zRe(Q),He.success=G,He.resultCode=ce+"",He.type=nd(x,Ee);var Ye=vCt(x,k,fe,M);He.data=Dce(x,M)||Ye.data,He.target=nd(x,Ye.target),Re&&(He.target="".concat(He.target," | ").concat(Re)),He[Eb]=nd(x,Ye[Eb]),He[yy]=wS(x,Qe),He[G1]=SS(x,Ze)}return s(v,"RemoteDependencyData"),v.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",v.dataType="RemoteDependencyData",v}(),xH=function(){function v(x,T,k,M,Q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var G=this;G.ver=2,T=T||vb,G[dH]=_Re(x,T),G[yy]=wS(x,M),G[G1]=SS(x,Q),k&&(G[QL]=k)}return s(v,"Trace"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Message",v.dataType="MessageData",v}(),bH=function(){function v(x,T,k,M,Q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var fe=this;fe.ver=2,fe.url=Dce(x,k),fe[Eb]=nd(x,T)||vb,fe[yy]=wS(x,Q),fe[G1]=SS(x,G),ce&&(fe.domProcessing=ce.domProcessing,fe[AH]=ce[AH],fe.networkConnect=ce.networkConnect,fe.perfTotal=ce.perfTotal,fe.receivedResponse=ce.receivedResponse,fe.sentRequest=ce.sentRequest)}return s(v,"PageViewPerformance"),v.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",v.dataType="PageviewPerformanceData",v}(),RS=function(){function v(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(v,"Data"),v}(),JCt=x5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function xb(v){var x="ai."+v+".";return function(T){return x+T}}s(xb,"_aiNameFunc");var HL=xb("application"),fl=xb("device"),IH=xb("location"),gP=xb("operation"),Uce=xb("session"),bb=xb("user"),kS=xb("cloud"),WL=xb("internal"),YRe=function(v){tS(x,v);function x(){return v.call(this)||this}return s(x,"ContextTagKeys"),x}(Yae({applicationVersion:HL("ver"),applicationBuild:HL("build"),applicationTypeId:HL("typeId"),applicationId:HL("applicationId"),applicationLayer:HL("layer"),deviceId:fl("id"),deviceIp:fl("ip"),deviceLanguage:fl("language"),deviceLocale:fl("locale"),deviceModel:fl("model"),deviceFriendlyName:fl("friendlyName"),deviceNetwork:fl("network"),deviceNetworkName:fl("networkName"),deviceOEMName:fl("oemName"),deviceOS:fl("os"),deviceOSVersion:fl("osVersion"),deviceRoleInstance:fl("roleInstance"),deviceRoleName:fl("roleName"),deviceScreenResolution:fl("screenResolution"),deviceType:fl("type"),deviceMachineName:fl("machineName"),deviceVMName:fl("vmName"),deviceBrowser:fl("browser"),deviceBrowserVersion:fl("browserVersion"),locationIp:IH("ip"),locationCountry:IH("country"),locationProvince:IH("province"),locationCity:IH("city"),operationId:gP("id"),operationName:gP("name"),operationParentId:gP("parentId"),operationRootId:gP("rootId"),operationSyntheticSource:gP("syntheticSource"),operationCorrelationVector:gP("correlationVector"),sessionId:Uce("id"),sessionIsFirst:Uce("isFirst"),sessionIsNew:Uce("isNew"),userAccountAcquisitionDate:bb("accountAcquisitionDate"),userAccountId:bb("accountId"),userAgent:bb("userAgent"),userId:bb("id"),userStoreRegion:bb("storeRegion"),userAuthUserId:bb("authUserId"),userAnonymousUserAcquisitionDate:bb("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:bb("authUserAcquisitionDate"),cloudName:kS("name"),cloudRole:kS("role"),cloudRoleVer:kS("roleVer"),cloudRoleInstance:kS("roleInstance"),cloudEnvironment:kS("environment"),cloudLocation:kS("location"),cloudDeploymentUnit:kS("deploymentUnit"),internalNodeName:WL("nodeName"),internalSdkVersion:WL("sdkVersion"),internalAgentVersion:WL("agentVersion"),internalSnippet:WL("snippet"),internalSdkSrc:WL("sdkSrc")})),Fl=new YRe;function KRe(v,x){lCt(v,null,null,x)}s(KRe,"_disableEvents");function XCt(v){var x=cc(),T=lc(),k=!1,M=[],Q=1;T&&!ie(T.onLine)&&!T.onLine&&(Q=2);var G=0,ce=Ze(),fe=ERe(lg("OfflineListener"),v);try{if(Re(Qs())&&(k=!0),x){var Ee=x.body||x;Ee.ononline&&Re(Ee)&&(k=!0)}}catch{k=!1}function Re(ir){var wr=!1;return ir&&(wr=xRe(ir,"online",gt,fe),wr&&xRe(ir,"offline",st,fe)),wr}s(Re,"_enableEvents");function Qe(){return ce}s(Qe,"_isOnline");function Ze(){return!(G===2||Q===2)}s(Ze,"calCurrentState");function He(){var ir=Ze();ce!==ir&&(ce=ir,$r(M,function(wr){var ei={isOnline:ce,rState:Q,uState:G};try{wr(ei)}catch{}}))}s(He,"listnerNoticeCheck");function Ye(ir){G=ir,He()}s(Ye,"setOnlineState");function gt(){Q=1,He()}s(gt,"_setOnline");function st(){Q=2,He()}s(st,"_setOffline");function wt(){var ir=Qs();if(ir&&k){if(KRe(ir,fe),x){var wr=x.body||x;W(wr.ononline)||KRe(wr,fe)}k=!1}}s(wt,"_unload");function Ht(ir){return M.push(ir),{rm:s(function(){var wr=M.indexOf(ir);if(wr>-1)return M.splice(wr,1)},"rm")}}return s(Ht,"addListener"),{isOnline:Qe,isListening:s(function(){return k},"isListening"),unload:wt,addListener:Ht,setOnlineState:Ye}}s(XCt,"createOfflineListener");var ZCt="AppInsightsChannelPlugin",PS="duration",hu="tags",qce="deviceType",H0="data",z1="name",$L="traceID",Pi="length",jL="stringify",DS="measurements",Cy="dataType",BS="envelopeType",NS="toString",LS="enqueue",MS="count",Y1="push",Hce="emitLineDelimitedJson",AP="clear",TH="markAsSent",GL="clearSent",Wce="bufferOverride",VL="BUFFER_KEY",Ib="SENT_BUFFER_KEY",yP="concat",zL="MAX_BUFFER_SIZE",YL="triggerSend",id="diagLog",$ce="initialize",KL="_sender",JL="endpointUrl",XL="instrumentationKey",jce="customHeaders",JRe="maxBatchSizeInBytes",Gce="onunloadDisableBeacon",Vce="isBeaconApiDisabled",XRe="alwaysUseXhrOverride",ZRe="enableSessionStorageBuffer",vy="_buffer",eke="onunloadDisableFetch",tke="disableSendBeaconSplit",wH="getSenderInst",OS="_onError",zce="_onPartialSuccess",SH="_onSuccess",Yce="itemsReceived",Kce="itemsAccepted",Jce="baseType",_H="sampleRate",e1t="getHashCodeScore",Xce="baseType",da="baseData",Ol="properties",rke="true";function mc(v,x,T){return cy(v,x,T,ue)}s(mc,"_setValueIf");function t1t(v,x,T){var k=T[hu]=T[hu]||{},M=x.ext=x.ext||{},Q=x[hu]=x[hu]||[],G=M.user;G&&(mc(k,Fl.userAuthUserId,G.authId),mc(k,Fl.userId,G.id||G.localId));var ce=M.app;ce&&mc(k,Fl.sessionId,ce.sesId);var fe=M.device;fe&&(mc(k,Fl.deviceId,fe.id||fe.localId),mc(k,Fl[qce],fe.deviceClass),mc(k,Fl.deviceIp,fe.ip),mc(k,Fl.deviceModel,fe.model),mc(k,Fl[qce],fe[qce]));var Ee=x.ext.web;if(Ee){mc(k,Fl.deviceLanguage,Ee.browserLang),mc(k,Fl.deviceBrowserVersion,Ee.browserVer),mc(k,Fl.deviceBrowser,Ee.browser);var Re=T[H0]=T[H0]||{},Qe=Re[da]=Re[da]||{},Ze=Qe[Ol]=Qe[Ol]||{};mc(Ze,"domain",Ee.domain),mc(Ze,"isManual",Ee.isManual?rke:null),mc(Ze,"screenRes",Ee.screenRes),mc(Ze,"userConsent",Ee.userConsent?rke:null)}var He=M.os;He&&(mc(k,Fl.deviceOS,He[z1]),mc(k,Fl.deviceOSVersion,He.osVer));var Ye=M.trace;Ye&&(mc(k,Fl.operationParentId,Ye.parentID),mc(k,Fl.operationName,nd(v,Ye[z1])),mc(k,Fl.operationId,Ye[$L]));for(var gt={},st=Q[Pi]-1;st>=0;st--){var wt=Q[st];le(wt,function(ir,wr){gt[ir]=wr}),Q.splice(st,1)}le(Q,function(ir,wr){gt[ir]=wr});var Ht=rg(rg({},k),gt);Ht[Fl.internalSdkVersion]||(Ht[Fl.internalSdkVersion]=nd(v,"javascript:".concat(r1t.Version),64)),T[hu]=cL(Ht)}s(t1t,"_extractPartAExtensions");function Tb(v,x,T){ie(v)||le(v,function(k,M){lt(M)?T[k]=M:Ae(M)?x[k]=M:eb()&&(x[k]=Ud()[jL](M))})}s(Tb,"_extractPropsAndMeasurements");function QS(v,x){ie(v)||le(v,function(T,k){v[T]=k||x})}s(QS,"_convertPropsUndefinedToCustomDefinedValue");function US(v,x,T,k){var M=new SCt(v,k,x);mc(M,"sampleRate",T[bRe]),(T[da]||{}).startTime&&(M.time=aS(T[da].startTime)),M.iKey=T.iKey;var Q=T.iKey.replace(/-/g,"");return M[z1]=M[z1].replace("{0}",Q),t1t(v,T,M),T[hu]=T[hu]||[],cL(M)}s(US,"_createEnvelope");function qS(v,x){ie(x[da])&&Lr(v,1,46,"telemetryItem.baseData cannot be null.")}s(qS,"EnvelopeCreatorInit");var r1t={Version:"3.3.6"};function n1t(v,x,T){qS(v,x);var k=x[da][DS]||{},M=x[da][Ol]||{};Tb(x[H0],M,k),ie(T)||QS(M,T);var Q=x[da];if(ie(Q))return eP(v,"Invalid input for dependency data"),null;var G=Q[Ol]&&Q[Ol][IRe]?Q[Ol][IRe]:"GET",ce=new EH(v,Q.id,Q.target,Q[z1],Q[PS],Q.success,Q.responseCode,G,Q.type,Q.correlationContext,M,k),fe=new RS(EH[Cy],ce);return US(v,EH[BS],x,fe)}s(n1t,"DependencyEnvelopeCreator");function nke(v,x,T){qS(v,x);var k={},M={};x[Xce]!==mP[Cy]&&(k.baseTypeSource=x[Xce]),x[Xce]===mP[Cy]?(k=x[da][Ol]||{},M=x[da][DS]||{}):x[da]&&Tb(x[da],k,M),Tb(x[H0],k,M),ie(T)||QS(k,T);var Q=x[da][z1],G=new mP(v,Q,k,M),ce=new RS(mP[Cy],G);return US(v,mP[BS],x,ce)}s(nke,"EventEnvelopeCreator");function i1t(v,x,T){qS(v,x);var k=x[da][DS]||{},M=x[da][Ol]||{};Tb(x[H0],M,k),ie(T)||QS(M,T);var Q=x[da],G=CH.CreateFromInterface(v,Q,M,k),ce=new RS(CH[Cy],G);return US(v,CH[BS],x,ce)}s(i1t,"ExceptionEnvelopeCreator");function o1t(v,x,T){qS(v,x);var k=x[da],M=k[Ol]||{},Q=k[DS]||{};Tb(x[H0],M,Q),ie(T)||QS(M,T);var G=new UL(v,k[z1],k.average,k.sampleCount,k.min,k.max,k.stdDev,M,Q),ce=new RS(UL[Cy],G);return US(v,UL[BS],x,ce)}s(o1t,"MetricEnvelopeCreator");function s1t(v,x,T){qS(v,x);var k,M=x[da];!ie(M)&&!ie(M[Ol])&&!ie(M[Ol][PS])?(k=M[Ol][PS],delete M[Ol][PS]):!ie(x[H0])&&!ie(x[H0][PS])&&(k=x[H0][PS],delete x[H0][PS]);var Q=x[da],G;((x.ext||{}).trace||{})[$L]&&(G=x.ext.trace[$L]);var ce=Q.id||G,fe=Q[z1],Ee=Q.uri,Re=Q[Ol]||{},Qe=Q[DS]||{};if(ie(Q.refUri)||(Re.refUri=Q.refUri),ie(Q.pageType)||(Re.pageType=Q.pageType),ie(Q.isLoggedIn)||(Re.isLoggedIn=Q.isLoggedIn[NS]()),!ie(Q[Ol])){var Ze=Q[Ol];le(Ze,function(gt,st){Re[gt]=st})}Tb(x[H0],Re,Qe),ie(T)||QS(Re,T);var He=new vH(v,fe,Ee,k,Re,Qe,ce),Ye=new RS(vH[Cy],He);return US(v,vH[BS],x,Ye)}s(s1t,"PageViewEnvelopeCreator");function a1t(v,x,T){qS(v,x);var k=x[da],M=k[z1],Q=k.uri||k.url,G=k[Ol]||{},ce=k[DS]||{};Tb(x[H0],G,ce),ie(T)||QS(G,T);var fe=new bH(v,M,Q,void 0,G,ce,k),Ee=new RS(bH[Cy],fe);return US(v,bH[BS],x,Ee)}s(a1t,"PageViewPerformanceEnvelopeCreator");function c1t(v,x,T){qS(v,x);var k=x[da].message,M=x[da].severityLevel,Q=x[da][Ol]||{},G=x[da][DS]||{};Tb(x[H0],Q,G),ie(T)||QS(Q,T);var ce=new xH(v,k,M,Q,G),fe=new RS(xH[Cy],ce);return US(v,xH[BS],x,fe)}s(c1t,"TraceEnvelopeCreator");var ike=function(){function v(x,T){var k=[],M=!1,Q=T.maxRetryCnt;this._get=function(){return k},this._set=function(G){return k=G,k},pu(v,this,function(G){G[LS]=function(ce){if(G[MS]()>=T.eventsLimitInMem){M||(Lr(x,2,105,"Maximum in-memory buffer size reached: "+G[MS](),!0),M=!0);return}ce.cnt=ce.cnt||0,!(!ie(Q)&&ce.cnt>Q)&&k[Y1](ce)},G[MS]=function(){return k[Pi]},G.size=function(){for(var ce=k[Pi],fe=0;fe<k[Pi];fe++)ce+=k[fe].item[Pi];return T[Hce]||(ce+=2),ce},G[AP]=function(){k=[],M=!1},G.getItems=function(){return k.slice(0)},G.batchPayloads=function(ce){if(ce&&ce[Pi]>0){var fe=[];$r(ce,function(Re){fe[Y1](Re.item)});var Ee=T[Hce]?fe.join(`
`):"["+fe.join(",")+"]";return Ee}return null},G.createNew=function(ce,fe,Ee){var Re=k.slice(0);ce=ce||x,fe=fe||{};var Qe=Ee?new oke(ce,fe):new Zce(ce,fe);return $r(Re,function(Ze){Qe[LS](Ze)}),Qe}})}return s(v,"BaseSendBuffer"),v.__ieDyn=1,v}(),Zce=function(v){tS(x,v);function x(T,k){var M=v.call(this,T,k)||this;return pu(x,M,function(Q,G){Q[TH]=function(ce){G[AP]()},Q[GL]=function(ce){}}),M}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(ike),l1t=["AI_buffer","AI_sentBuffer"],oke=function(v){tS(x,v);function x(k,M){var Q=v.call(this,k,M)||this,G=!1,ce=M?.namePrefix,fe=M[Wce]||{getItem:xCt,setItem:bCt},Ee=fe.getItem,Re=fe.setItem,Qe=M.maxRetryCnt;return pu(x,Q,function(Ze,He){var Ye=wr(x[VL]),gt=wr(x[Ib]),st=Oi(),wt=gt[yP](st),Ht=Ze._set(Ye[yP](wt));Ht[Pi]>x[zL]&&(Ht[Pi]=x[zL]),Fi(x[Ib],[]),Fi(x[VL],Ht),Ze[LS]=function(bn){if(Ze[MS]()>=x[zL]){G||(Lr(k,2,67,"Maximum buffer size reached: "+Ze[MS](),!0),G=!0);return}bn.cnt=bn.cnt||0,!(!ie(Qe)&&bn.cnt>Qe)&&(He[LS](bn),Fi(x[VL],Ze._get()))},Ze[AP]=function(){He[AP](),Fi(x[VL],Ze._get()),Fi(x[Ib],[]),G=!1},Ze[TH]=function(bn){Fi(x[VL],Ze._set(ir(bn,Ze._get())));var Jr=wr(x[Ib]);Jr instanceof Array&&bn instanceof Array&&(Jr=Jr[yP](bn),Jr[Pi]>x[zL]&&(Lr(k,1,67,"Sent buffer reached its maximum size: "+Jr[Pi],!0),Jr[Pi]=x[zL]),Fi(x[Ib],Jr))},Ze[GL]=function(bn){var Jr=wr(x[Ib]);Jr=ir(bn,Jr),Fi(x[Ib],Jr)},Ze.createNew=function(bn,Jr,Qi){Qi=!!Qi;var fa=Ze._get().slice(0),As=wr(x[Ib]).slice(0);bn=bn||k,Jr=Jr||{},Ze[AP]();var Wt=Qi?new x(bn,Jr):new Zce(bn,Jr);return $r(fa,function(Xr){Wt[LS](Xr)}),Qi&&Wt[TH](As),Wt};function ir(bn,Jr){var Qi=[],fa=[];return $r(bn,function(As){fa[Y1](As.item)}),$r(Jr,function(As){!Oe(As)&&uc(fa,As.item)===-1&&Qi[Y1](As)}),Qi}s(ir,"_removePayloadsFromBuffer");function wr(bn){var Jr=bn;return Jr=ce?ce+"_"+Jr:Jr,ei(Jr)}s(wr,"_getBuffer");function ei(bn){try{var Jr=Ee(k,bn);if(Jr){var Qi=Ud().parse(Jr);if(Ae(Qi)&&(Qi=Ud().parse(Qi)),Qi&&Je(Qi))return Qi}}catch(fa){Lr(k,1,42," storage key: "+bn+", "+ul(fa),{exception:Ot(fa)})}return[]}s(ei,"_getBufferBase");function Fi(bn,Jr){var Qi=bn;try{Qi=ce?ce+"_"+Qi:Qi;var fa=JSON[jL](Jr);Re(k,Qi,fa)}catch(As){Re(k,Qi,JSON[jL]([])),Lr(k,2,41," storage key: "+Qi+", "+ul(As)+". Buffer cleared",{exception:Ot(As)})}}s(Fi,"_setBuffer");function Oi(){var bn=[];try{return $r(l1t,function(Jr){var Qi=qo(Jr);if(bn=bn[yP](Qi),ce){var fa=ce+"_"+Jr,As=qo(fa);bn=bn[yP](As)}}),bn}catch(Jr){Lr(k,2,41,"Transfer events from previous buffers: "+ul(Jr)+". previous Buffer items can not be removed",{exception:Ot(Jr)})}return[]}s(Oi,"_getPreviousEvents");function qo(bn){try{var Jr=ei(bn),Qi=[];return $r(Jr,function(fa){var As={item:fa,cnt:0};Qi[Y1](As)}),ICt(k,bn),Qi}catch{}return[]}s(qo,"_getItemsFromPreviousKey")}),Q}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(ike),u1t=function(){function v(x){pu(v,this,function(T){T.serialize=function(G){var ce=k(G,"root");try{return Ud()[jL](ce)}catch(fe){Lr(x,1,48,fe&&Oe(fe[NS])?fe[NS]():"Error serializing object",null,!0)}};function k(G,ce){var fe="__aiCircularRefCheck",Ee={};if(!G)return Lr(x,1,48,"cannot serialize object because it is null or undefined",{name:ce},!0),Ee;if(G[fe])return Lr(x,2,50,"Circular reference detected while serializing object",{name:ce},!0),Ee;if(!G.aiDataContract){if(ce==="measurements")Ee=Q(G,"number",ce);else if(ce==="properties")Ee=Q(G,"string",ce);else if(ce==="tags")Ee=Q(G,"string",ce);else if(Je(G))Ee=M(G,ce);else{Lr(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ce},!0);try{Ud()[jL](G),Ee=G}catch(Re){Lr(x,1,48,Re&&Oe(Re[NS])?Re[NS]():"Error serializing object",null,!0)}}return Ee}return G[fe]=!0,le(G.aiDataContract,function(Re,Qe){var Ze=Oe(Qe)?Qe()&1:Qe&1,He=Oe(Qe)?Qe()&4:Qe&4,Ye=Qe&2,gt=G[Re]!==void 0,st=Te(G[Re])&&G[Re]!==null;if(Ze&&!gt&&!Ye)Lr(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Re,name:ce});else if(!He){var wt=void 0;st?Ye?wt=M(G[Re],Re):wt=k(G[Re],Re):wt=G[Re],wt!==void 0&&(Ee[Re]=wt)}}),delete G[fe],Ee}s(k,"_serializeObject");function M(G,ce){var fe;if(G)if(!Je(G))Lr(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ce},!0);else{fe=[];for(var Ee=0;Ee<G[Pi];Ee++){var Re=G[Ee],Qe=k(Re,ce+"["+Ee+"]");fe[Y1](Qe)}}return fe}s(M,"_serializeArray");function Q(G,ce,fe){var Ee;return G&&(Ee={},le(G,function(Re,Qe){if(ce==="string")Qe===void 0?Ee[Re]="undefined":Qe===null?Ee[Re]="null":Qe[NS]?Ee[Re]=Qe[NS]():Ee[Re]="invalid field: toString() is not defined.";else if(ce==="number")if(Qe===void 0)Ee[Re]="undefined";else if(Qe===null)Ee[Re]="null";else{var Ze=parseFloat(Qe);Ee[Re]=Ze}else Ee[Re]="invalid field: "+fe+" is of unknown type.",Lr(x,1,Ee[Re],null,!0)})),Ee}s(Q,"_serializeStringMap")})}return s(v,"Serializer"),v.__ieDyn=1,v}(),d1t=8,f1t=function(){function v(){}return s(v,"HashCodeScoreGenerator"),v.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/v.INT_MAX_VALUE;return T*100},v.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[Pi]<d1t;)x=x[yP](x);for(var T=5381,k=0;k<x[Pi];++k)T=(T<<5)+T+x.charCodeAt(k),T=T&T;return Math.abs(T)},v.INT_MAX_VALUE=2147483647,v}(),p1t=function(){function v(){var x=this,T=new f1t,k=new YRe;x.getSamplingScore=function(M){var Q=0;return M[hu]&&M[hu][k.userId]?Q=T.getHashCodeScore(M[hu][k.userId]):M.ext&&M.ext.user&&M.ext.user.id?Q=T[e1t](M.ext.user.id):M[hu]&&M[hu][k.operationId]?Q=T.getHashCodeScore(M[hu][k.operationId]):M.ext&&M.ext.telemetryTrace&&M.ext.telemetryTrace[$L]?Q=T.getHashCodeScore(M.ext.telemetryTrace[$L]):Q=Math.random()*100,Q}}return s(v,"SamplingScoreGenerator"),v}(),m1t=function(){function v(x,T){this.INT_MAX_VALUE=2147483647;var k=T||yS(null);(x>100||x<0)&&(k.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[_H]=x,this.samplingScoreGenerator=new p1t}return s(v,"Sample"),v.prototype.isSampledIn=function(x){var T=this[_H],k=!1;return T==null||T>=100||x.baseType===UL[Cy]?!0:(k=this.samplingScoreGenerator.getSamplingScore(x)<T,k)},v}(),Us,K1,Ey=void 0,ske="",h1t=65e3;function ake(v){try{return v.responseText}catch{}return null}s(ake,"_getResponseText");function g1t(v){return v&&v.sendPOST}s(g1t,"isOverrideFn");var cke=nr((Us={endpointUrl:xL(ue,Sce+uP)},Us[Hce]=sm(),Us.maxBatchInterval=15e3,Us[JRe]=102400,Us.disableTelemetry=sm(),Us[ZRe]=sm(!0),Us.isRetryDisabled=sm(),Us[Vce]=sm(!0),Us[tke]=sm(!0),Us.disableXhr=sm(),Us[eke]=sm(),Us[Gce]=sm(),Us[XL]=Ey,Us.namePrefix=Ey,Us.samplingPercentage=xL(A1t,100),Us[jce]=Ey,Us.convertUndefined=Ey,Us.eventsLimitInMem=1e4,Us[Wce]=!1,Us.httpXHROverride={isVal:g1t,v:Ey},Us[XRe]=sm(),Us.transports=Ey,Us.retryCodes=Ey,Us.maxRetryCnt={isVal:lt,v:10},Us));function A1t(v){return!isNaN(v)&&v>0&&v<=100}s(A1t,"_chkSampling");var y1t=(K1={},K1[mP.dataType]=nke,K1[xH.dataType]=c1t,K1[vH.dataType]=s1t,K1[bH.dataType]=a1t,K1[CH.dataType]=i1t,K1[UL.dataType]=o1t,K1[EH.dataType]=n1t,K1),lke=function(v){tS(x,v);function x(){var T=v.call(this)||this;T.priority=1001,T.identifier=ZCt;var k,M,Q,G,ce,fe,Ee,Re=0,Qe,Ze,He,Ye,gt,st,wt,Ht,ir,wr,ei,Fi,Oi,qo,bn,Jr,Qi,fa,As,Wt,Xr,Do,Pt,Ln,ka,Ho,Ql;return pu(x,T,function(dt,Mc){dke(),dt.pause=function(){Rb(),Q=!0},dt.resume=function(){Q&&(Q=!1,M=null,Zo(),xP())},dt.flush=function(Ve,bt,lr){if(Ve===void 0&&(Ve=!0),!Q){Rb();try{return dt[YL](Ve,null,lr||1)}catch(Qr){Lr(dt[id](),1,22,"flush failed, telemetry will not be collected: "+ul(Qr),{exception:Ot(Qr)})}}},dt.onunloadFlush=function(){if(!Q)if(wt||Wt)try{return dt[YL](!0,Nf,2)}catch(Ve){Lr(dt[id](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ul(Ve),{exception:Ot(Ve)})}else dt.flush(!1)},dt.addHeader=function(Ve,bt){Ee[Ve]=bt},dt[$ce]=function(Ve,bt,lr,Qr){dt.isInitialized()&&Lr(dt[id](),1,28,"Sender is already initialized"),Mc[$ce](Ve,bt,lr,Qr);var $n=dt.identifier;ce=new u1t(bt.logger),k=0,M=null,dt[KL]=null,fe=0;var Tn=dt[id]();He=ERe(lg("Sender"),bt.evtNamespace&&bt.evtNamespace()),Ze=XCt(He),dt._addHook(ug(Ve,function(Ao){var hc=Ao.cfg;hc.storagePrefix&&ECt(hc.storagePrefix);var W0=Ab(null,hc,bt),xi=W0.getExtCfg($n,cke),fke=xi[JL];if(Ye&&fke===Ye){var rle=hc[JL];rle&&rle!==fke&&(xi[JL]=rle)}ht(xi[XL])&&(xi[XL]=hc[XL]),je(dt,"_senderConfig",{g:s(function(){return xi},"g")}),gt!==xi[JL]&&(Ye=gt=xi[JL]),bt.activeStatus()===ty.PENDING?dt.pause():bt.activeStatus()===ty.ACTIVE&&dt.resume(),wr&&wr!==xi[jce]&&$r(wr,function(Au){delete Ee[Au.header]}),st=xi[JRe],wt=(xi[Gce]===!1||xi[Vce]===!1)&&uy(),Ht=xi[Gce]===!1&&uy(),ir=xi[Vce]===!1&&uy(),Wt=xi[XRe],Xr=!!xi.disableXhr,Ql=xi.retryCodes;var nle=xi[Wce],bP=!!xi[ZRe]&&(!!nle||LRe()),pke=xi.namePrefix,x1t=bP!==Jr||bP&&fa!==pke||bP&&Qi!==nle;if(dt[vy]){if(x1t)try{dt[vy]=dt[vy].createNew(Tn,xi,bP)}catch(Au){Lr(dt[id](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+ul(Au),{exception:Ot(Au)})}Zo()}else dt[vy]=bP?new oke(Tn,xi):new Zce(Tn,xi);fa=pke,Jr=bP,Qi=nle,Do=!xi[eke]&&pS(!0),ka=!!xi[tke],dt._sample=new m1t(xi.samplingPercentage,Tn),Fi=xi[XL],!ht(Fi)&&!uke(Fi,hc)&&Lr(Tn,1,100,"Invalid Instrumentation key "+Fi),wr=xi[jce],Ae(Ye)&&!DRe(Ye)&&wr&&wr[Pi]>0?$r(wr,function(Au){T.addHeader(Au.header,Au.value)}):wr=null,As=xi.enableSendPromise;var mke=Ul();Ho?Ho.SetConfig(mke):(Ho=new Lc,Ho[$ce](mke,Tn));var DH=xi.httpXHROverride,BH=null,rM=null,b1t=Sq([3,1,2],xi.transports);BH=Ho&&Ho[wH](b1t,!1);var ile=Ho&&Ho.getFallbackInst();Pt=s(function(Au,HS){return Gr(ile,Au,HS)},"_xhrSend"),Ln=s(function(Au,HS){return Gr(ile,Au,HS,!1)},"_fallbackSend"),BH=Wt?DH:BH||DH||ile,dt[KL]=function(Au,HS){return Gr(BH,Au,HS)},Do&&(Qe=EP);var ole=Sq([3,1],xi.unloadTransports);Do||(ole=ole.filter(function(Au){return Au!==2})),rM=Ho&&Ho[wH](ole,!0),rM=Wt?DH:rM||DH,(Wt||xi.unloadTransports||!Qe)&&rM&&(Qe=s(function(Au,HS){return Gr(rM,Au,HS)},"_syncUnloadSender")),Qe||(Qe=Pt),ei=xi.disableTelemetry,Oi=xi.convertUndefined||Ey,qo=xi.isRetryDisabled,bn=xi.maxBatchInterval}))},dt.processTelemetry=function(Ve,bt){bt=dt._getTelCtx(bt);var lr=bt[id]();try{var Qr=pg(Ve,lr);if(!Qr)return;var $n=_b(Ve,lr);if(!$n)return;var Tn=ce.serialize($n),Ao=dt[vy];Zo(Tn);var hc={item:Tn,cnt:0};Ao[LS](hc),xP()}catch(W0){Lr(lr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ul(W0),{exception:Ot(W0)})}dt.processNext(Ve,bt)},dt.isCompletelyIdle=function(){return!Q&&Re===0&&dt._buffer[MS]()===0},dt.getOfflineListener=function(){return Ze},dt._xhrReadyStateChange=function(Ve,bt,lr){if(!hg(bt))return um(Ve,bt,lr)},dt[YL]=function(Ve,bt,lr){Ve===void 0&&(Ve=!0);var Qr;if(!Q)try{var $n=dt[vy];if(ei)$n[AP]();else if($n[MS]()>0){var Tn=$n.getItems();PH(lr||0,Ve),bt?Qr=bt.call(dt,Tn,Ve):Qr=dt[KL](Tn,Ve)}Rb()}catch(hc){var Ao=tb();(!Ao||Ao>9)&&Lr(dt[id](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+ul(hc),{exception:Ot(hc)})}return Qr},dt.getOfflineSupport=function(){return{getUrl:s(function(){return Ye},"getUrl"),createPayload:yt,serialize:pa,batch:gu,shouldProcess:s(function(Ve){return!!pg(Ve)},"shouldProcess")}},dt._doTeardown=function(Ve,bt){dt.onunloadFlush(),lb(Ze,!1),dke()},dt[OS]=function(Ve,bt,lr){if(!hg(Ve))return Hd(Ve,bt)},dt[zce]=function(Ve,bt){if(!hg(Ve))return wb(Ve,bt)},dt[SH]=function(Ve,bt){if(!hg(Ve))return fg(Ve)},dt._xdrOnLoad=function(Ve,bt){if(!hg(bt))return Pa(Ve,bt)};function Pa(Ve,bt){var lr=ake(Ve);if(Ve&&(lr+""=="200"||lr===""))k=0,dt[SH](bt,0);else{var Qr=jr(lr);Qr&&Qr[Yce]&&Qr[Yce]>Qr[Kce]&&!qo?dt[zce](bt,Qr):dt[OS](bt,wq(Ve))}}s(Pa,"_xdrOnLoad");function Ul(){try{var Ve={xdrOnComplete:s(function(lr,Qr,$n){var Tn=Sb($n);if(Tn)return Pa(lr,Tn)},"xdrOnComplete"),fetchOnComplete:s(function(lr,Qr,$n,Tn){var Ao=Sb(Tn);if(Ao)return qs(lr.status,Ao,lr.url,Ao[Pi],lr.statusText,$n||"")},"fetchOnComplete"),xhrOnComplete:s(function(lr,Qr,$n){var Tn=Sb($n);if(Tn)return um(lr,Tn,Tn[Pi])},"xhrOnComplete"),beaconOnRetry:s(function(lr,Qr,$n){return mg(lr,Qr,$n)},"beaconOnRetry")},bt={enableSendPromise:As,isOneDs:!1,disableCredentials:!1,disableXhr:Xr,disableBeacon:!ir,disableBeaconSync:!Ht,senderOnCompleteCallBack:Ve};return bt}catch{}return null}s(Ul,"_getSendPostMgrConfig");function um(Ve,bt,lr){Ve.readyState===4&&qs(Ve.status,bt,Ve.responseURL,lr,W5(Ve),ake(Ve)||Ve.response)}s(um,"_xhrReadyStateChange");function Hd(Ve,bt,lr){Lr(dt[id](),2,26,"Failed to send telemetry.",{message:bt}),dt._buffer&&dt._buffer[GL](Ve)}s(Hd,"_onError");function wb(Ve,bt){for(var lr=[],Qr=[],$n=bt.errors.reverse(),Tn=0,Ao=$n;Tn<Ao.length;Tn++){var hc=Ao[Tn],W0=Ve.splice(hc.index,1)[0];kb(hc.statusCode)?Qr[Y1](W0):lr[Y1](W0)}Ve[Pi]>0&&dt[SH](Ve,bt[Kce]),lr[Pi]>0&&dt[OS](lr,W5(null,["partial success",bt[Kce],"of",bt.itemsReceived].join(" "))),Qr[Pi]>0&&(tM(Qr),Lr(dt[id](),2,40,"Partial success. Delivered: "+Ve[Pi]+", Failed: "+lr[Pi]+". Will retry to send "+Qr[Pi]+" our of "+bt[Yce]+" items"))}s(wb,"_onPartialSuccess");function fg(Ve,bt){dt._buffer&&dt._buffer[GL](Ve)}s(fg,"_onSuccess");function Sb(Ve){try{if(Ve){var bt=Ve,lr=bt.oriPayload;return lr&&lr[Pi]?lr:null}}catch{}return null}s(Sb,"_getPayloadArr");function pg(Ve,bt){if(ei)return!1;if(!Ve)return bt&&Lr(bt,1,7,"Cannot send empty telemetry"),!1;if(Ve.baseData&&!Ve[Jce])return bt&&Lr(bt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ve[Jce]||(Ve[Jce]="EventData"),!dt[KL])return bt&&Lr(bt,1,28,"Sender was not initialized"),!1;if(Ir(Ve))Ve[bRe]=dt._sample[_H];else return bt&&Lr(bt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:dt._sample[_H]}),!1;return!0}s(pg,"_validate");function _b(Ve,bt){var lr=Ve.iKey||Fi,Qr=x.constructEnvelope(Ve,lr,bt,Oi);if(!Qr){Lr(bt,1,47,"Unable to create an AppInsights envelope");return}var $n=!1;if(Ve[hu]&&Ve[hu][wce]&&($r(Ve[hu][wce],function(Tn){try{Tn&&Tn(Qr)===!1&&($n=!0,eP(bt,"Telemetry processor check returns false"))}catch(Ao){Lr(bt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ul(Ao),{exception:Ot(Ao)},!0)}}),delete Ve[hu][wce]),!$n)return Qr}s(_b,"_getEnvelope");function pa(Ve){var bt=ske,lr=dt[id]();try{var Qr=pg(Ve,lr),$n=null;Qr&&($n=_b(Ve,lr)),$n&&(bt=ce.serialize($n))}catch{}return bt}s(pa,"_serialize");function gu(Ve){var bt=ske;return Ve&&Ve[Pi]&&(bt="["+Ve.join(",")+"]"),bt}s(gu,"_batch");function yt(Ve){var bt=zo();return{urlString:Ye,data:Ve,headers:bt}}s(yt,"_createPayload");function Ir(Ve){return dt._sample.isSampledIn(Ve)}s(Ir,"_isSampledIn");function Hn(Ve,bt,lr,Qr){bt===200&&Ve?dt._onSuccess(Ve,Ve[Pi]):Qr&&dt[OS](Ve,Qr)}s(Hn,"_getOnComplete");function Gr(Ve,bt,lr,Qr){Qr===void 0&&(Qr=!0);var $n=s(function(hc,W0,xi){return Hn(bt,hc,W0,xi)},"onComplete"),Tn=Wn(bt),Ao=Ve&&Ve.sendPOST;return Ao&&Tn?(Qr&&dt._buffer[TH](bt),Ao(Tn,$n,!lr)):null}s(Gr,"_doSend");function Wn(Ve){if(Je(Ve)&&Ve[Pi]>0){var bt=dt[vy].batchPayloads(Ve),lr=zo(),Qr={data:bt,urlString:Ye,headers:lr,disableXhrSync:Xr,disableFetchKeepAlive:!Do,oriPayload:Ve};return Qr}return null}s(Wn,"_getPayload");function zo(){try{var Ve=Ee||{};return DRe(Ye)&&(Ve[TRe[6]]=TRe[7]),Ve}catch{}return null}s(zo,"_getHeaders");function Zo(Ve){var bt=Ve?Ve[Pi]:0;return dt[vy].size()+bt>st?((!Ze||Ze.isOnline())&&dt[YL](!0,null,10),!0):!1}s(Zo,"_checkMaxSize");function qs(Ve,bt,lr,Qr,$n,Tn){var Ao=null;if(dt._appId||(Ao=jr(Tn),Ao&&Ao.appId&&(dt._appId=Ao.appId)),(Ve<200||Ve>=300)&&Ve!==0){if((Ve===301||Ve===307||Ve===308)&&!od(lr)){dt[OS](bt,$n);return}if(Ze&&!Ze.isOnline()){if(!qo){var hc=10;tM(bt,hc),Lr(dt[id](),2,40,". Offline - Response Code: ".concat(Ve,". Offline status: ").concat(!Ze.isOnline(),". Will retry to send ").concat(bt.length," items."))}return}!qo&&kb(Ve)?(tM(bt),Lr(dt[id](),2,40,". Response code "+Ve+". Will retry to send "+bt[Pi]+" items.")):dt[OS](bt,$n)}else od(lr),Ve===206?(Ao||(Ao=jr(Tn)),Ao&&!qo?dt[zce](bt,Ao):dt[OS](bt,$n)):(k=0,dt[SH](bt,Qr))}s(qs,"_checkResponsStatus");function od(Ve){return fe>=10?!1:!ie(Ve)&&Ve!==""&&Ve!==Ye?(Ye=Ve,++fe,!0):!1}s(od,"_checkAndUpdateEndPointUrl");function Nf(Ve,bt){if(Qe)Qe(Ve,!1);else{var lr=Ho&&Ho[wH]([3],!0);return Gr(lr,Ve,bt)}}s(Nf,"_doUnloadSend");function mg(Ve,bt,lr){var Qr=Ve,$n=Qr&&Qr.oriPayload;if(ka)Ln&&Ln($n,!0),Lr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Tn=[],Ao=0;Ao<$n[Pi];Ao++){var hc=$n[Ao],W0=[hc],xi=Wn(W0);lr(xi,bt)?dt._onSuccess(W0,W0[Pi]):Tn[Y1](hc)}Tn[Pi]>0&&(Ln&&Ln(Tn,!0),Lr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(mg,"_onBeaconRetry");function hg(Ve){try{if(Ve&&Ve[Pi])return Ae(Ve[0])}catch{}return null}s(hg,"_isStringArr");function EP(Ve,bt){var lr=null;if(Je(Ve)){for(var Qr=Ve[Pi],$n=0;$n<Ve[Pi];$n++)Qr+=Ve[$n].item[Pi];var Tn=Ho.getSyncFetchPayload();Tn+Qr<=h1t?lr=2:uy()?lr=3:(lr=1,Lr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var Ao=Ho&&Ho[wH]([lr],!0);return Gr(Ao,Ve,bt)}return null}s(EP,"_fetchKeepAliveSender");function tM(Ve,bt){if(bt===void 0&&(bt=1),!(!Ve||Ve[Pi]===0)){var lr=dt[vy];lr[GL](Ve),k++;for(var Qr=0,$n=Ve;Qr<$n.length;Qr++){var Tn=$n[Qr];Tn.cnt=Tn.cnt||0,Tn.cnt++,lr[LS](Tn)}tle(bt),xP()}}s(tM,"_resendPayload");function tle(Ve){var bt=10,lr;if(k<=1)lr=bt;else{var Qr=(Math.pow(2,k)-1)/2,$n=KA(Math.random()*Qr*bt)+1;$n=Ve*$n,lr=Pe(Vn($n,3600),bt)}var Tn=ed()+lr*1e3;M=Tn}s(tle,"_setRetryTime");function xP(){if(!G&&!Q){var Ve=M?Pe(0,M-ed()):0,bt=Pe(bn,Ve);G=XA(function(){G=null,dt[YL](!0,null,1)},bt)}}s(xP,"_setupTimer");function Rb(){G&&G.cancel(),G=null,M=null}s(Rb,"_clearScheduledTimer");function kb(Ve){return ie(Ql)?Ve===401||Ve===408||Ve===429||Ve===500||Ve===502||Ve===503||Ve===504:Ql[Pi]&&Ql.indexOf(Ve)>-1}s(kb,"_isRetriable");function kH(){var Ve="getNotifyMgr";return dt.core[Ve]?dt.core[Ve]():dt.core._notificationManager}s(kH,"_getNotifyMgr");function PH(Ve,bt){var lr=kH();if(lr&&lr.eventsSendRequest)try{lr.eventsSendRequest(Ve,bt)}catch(Qr){Lr(dt[id](),1,74,"send request notification failed: "+ul(Qr),{exception:Ot(Qr)})}}s(PH,"_notifySendRequest");function uke(Ve,bt){var lr=bt.disableInstrumentationKeyValidation,Qr=ie(lr)?!1:lr;if(Qr)return!0;var $n="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Tn=new RegExp($n);return Tn.test(Ve)}s(uke,"_validateInstrumentationKey");function dke(){dt[KL]=null,dt[vy]=null,dt._appId=null,dt._sample=null,Ee={},Ze=null,k=0,M=null,Q=!1,G=null,ce=null,fe=0,Re=0,Qe=null,He=null,Ye=null,gt=null,st=0,wt=!1,wr=null,ei=!1,Fi=null,Oi=Ey,qo=!1,Jr=null,fa=Ey,Xr=!1,Do=!1,ka=!1,Pt=null,Ln=null,Ho=null,je(dt,"_senderConfig",{g:s(function(){return Tq({},cke)},"g")})}s(dke,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,k,M,Q){var G;k!==T.iKey&&!ie(k)?G=rg(rg({},T),{iKey:k}):G=T;var ce=y1t[G.baseType]||nke;return ce(M,G,Q)},x}(Et),CP="instrumentationKey",RH="connectionString",ZL="endpointUrl",eM="userOverrideEndpointUrl",vP,ele=void 0,C1t=(vP={diagnosticLogInterval:xL(v1t,1e4)},vP[RH]=ele,vP.endpointUrl=ele,vP[CP]=ele,vP.extensionConfig={},vP);function v1t(v){return v&&v>0}s(v1t,"_chkDiagLevel");var E1t=function(){function v(x){var T=new Dt,k;(ie(x)||ie(x[CP])&&ie(x[RH]))&&Hr("Invalid input configuration"),pu(v,this,function(Q){je(Q,"config",{g:s(function(){return k},"g")}),G(),Q.initialize=G,Q.track=M,aL(Q,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function G(){var ce=Bf(x||{},C1t);k=ce.cfg,T.addUnloadHook(ug(ce,function(){var fe=k[RH];if(ht(fe)){var Ee=N5(function(He,Ye){_f(fe,function(gt){var st=gt.value,wt=k[CP];if(!gt.rejected&&st){k[RH]=st;var Ht=Lce(st);wt=Ht.instrumentationkey||wt}He(wt)})}),Re=N5(function(He,Ye){_f(fe,function(gt){var st=gt.value,wt=k[ZL];if(!gt.rejected&&st){var Ht=Lce(st),ir=Ht.ingestionendpoint;wt=ir?ir+uP:wt}He(wt)})});k[CP]=Ee,k[ZL]=k[eM]||Re}if(Ae(fe)){var Qe=Lce(fe),Ze=Qe.ingestionendpoint;k[ZL]=k[eM]?k[eM]:Ze+uP,k[CP]=Qe.instrumentationkey||k[CP]}k[ZL]=k[eM]?k[eM]:k[ZL]})),T.initialize(k,[new lke])}s(G,"_initialize")});function M(Q){Q&&(Q.baseData=Q.baseData||{},Q.baseType=Q.baseType||"EventData"),T.track(Q)}s(M,"_track")}return s(v,"ApplicationInsights"),v.__ieDyn=1,v}();t.AppInsightsCore=Dt,t.ApplicationInsights=E1t,t.Sender=lke,t.SeverityLevel=JCt,t.arrForEach=$r,t.isNullOrUndefined=ie,t.proxyFunctions=aL,t.throwError=Hr})});var n0e=q((TVr,AMe)=>{f();var F4=1e3,O4=F4*60,Q4=O4*60,v_=Q4*24,U2t=v_*7,q2t=v_*365.25;AMe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return H2t(t);if(r==="number"&&isFinite(t))return e.long?$2t(t):W2t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function H2t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*q2t;case"weeks":case"week":case"w":return r*U2t;case"days":case"day":case"d":return r*v_;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Q4;case"minutes":case"minute":case"mins":case"min":case"m":return r*O4;case"seconds":case"second":case"secs":case"sec":case"s":return r*F4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(H2t,"parse");function W2t(t){var e=Math.abs(t);return e>=v_?Math.round(t/v_)+"d":e>=Q4?Math.round(t/Q4)+"h":e>=O4?Math.round(t/O4)+"m":e>=F4?Math.round(t/F4)+"s":t+"ms"}s(W2t,"fmtShort");function $2t(t){var e=Math.abs(t);return e>=v_?Oj(t,e,v_,"day"):e>=Q4?Oj(t,e,Q4,"hour"):e>=O4?Oj(t,e,O4,"minute"):e>=F4?Oj(t,e,F4,"second"):t+" ms"}s($2t,"fmtLong");function Oj(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(Oj,"plural")});var i0e=q((_Vr,yMe)=>{f();function j2t(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=n0e(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(d){let p,m=null,h,g;function A(...y){if(!A.enabled)return;let E=A,b=Number(new Date),w=b-(p||b);E.diff=w,E.prev=p,E.curr=b,p=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let R=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(N,O)=>{if(N==="%%")return"%";R++;let Y=r.formatters[O];if(typeof Y=="function"){let ee=y[R];N=Y.call(E,ee),y.splice(R,1),R--}return N}),r.formatArgs.call(E,y),(E.log||r.log).apply(E,y)}return s(A,"debug"),A.namespace=d,A.useColors=r.useColors(),A.color=r.selectColor(d),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),"get"),set:s(y=>{m=y},"set")}),typeof r.init=="function"&&r.init(A),A}s(r,"createDebug");function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(n,"extend");function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(d))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(d))return!0;return!1}s(a,"enabled");function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(d){return d instanceof Error?d.stack||d.message:d}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(j2t,"setup");yMe.exports=j2t});var CMe=q((ap,Qj)=>{f();ap.formatArgs=V2t;ap.save=z2t;ap.load=Y2t;ap.useColors=G2t;ap.storage=K2t();ap.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ap.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function G2t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(G2t,"useColors");function V2t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Qj.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(V2t,"formatArgs");ap.log=console.debug||console.log||(()=>{});function z2t(t){try{t?ap.storage.setItem("debug",t):ap.storage.removeItem("debug")}catch{}}s(z2t,"save");function Y2t(){let t;try{t=ap.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(Y2t,"load");function K2t(){try{return localStorage}catch{}}s(K2t,"localstorage");Qj.exports=i0e()(ap);var{formatters:J2t}=Qj.exports;J2t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var EMe=q((BVr,vMe)=>{"use strict";f();vMe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var IMe=q((LVr,bMe)=>{"use strict";f();var X2t=require("os"),xMe=require("tty"),_m=EMe(),{env:Vl}=process,lI;_m("no-color")||_m("no-colors")||_m("color=false")||_m("color=never")?lI=0:(_m("color")||_m("colors")||_m("color=true")||_m("color=always"))&&(lI=1);"FORCE_COLOR"in Vl&&(Vl.FORCE_COLOR==="true"?lI=1:Vl.FORCE_COLOR==="false"?lI=0:lI=Vl.FORCE_COLOR.length===0?1:Math.min(parseInt(Vl.FORCE_COLOR,10),3));function o0e(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(o0e,"translateLevel");function s0e(t,e){if(lI===0)return 0;if(_m("color=16m")||_m("color=full")||_m("color=truecolor"))return 3;if(_m("color=256"))return 2;if(t&&!e&&lI===void 0)return 0;let r=lI||0;if(Vl.TERM==="dumb")return r;if(process.platform==="win32"){let n=X2t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Vl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Vl)||Vl.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Vl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Vl.TEAMCITY_VERSION)?1:0;if(Vl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Vl){let n=parseInt((Vl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Vl.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Vl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Vl.TERM)||"COLORTERM"in Vl?1:r}s(s0e,"supportsColor");function Z2t(t){let e=s0e(t,t&&t.isTTY);return o0e(e)}s(Z2t,"getSupportLevel");bMe.exports={supportsColor:Z2t,stdout:o0e(s0e(!0,xMe.isatty(1))),stderr:o0e(s0e(!0,xMe.isatty(2)))}});var wMe=q((Ru,qj)=>{f();var eRt=require("tty"),Uj=require("util");Ru.init=aRt;Ru.log=iRt;Ru.formatArgs=rRt;Ru.save=oRt;Ru.load=sRt;Ru.useColors=tRt;Ru.destroy=Uj.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ru.colors=[6,2,3,4,5,1];try{let t=IMe();t&&(t.stderr||t).level>=2&&(Ru.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ru.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function tRt(){return"colors"in Ru.inspectOpts?!!Ru.inspectOpts.colors:eRt.isatty(process.stderr.fd)}s(tRt,"useColors");function rRt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+qj.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=nRt()+e+" "+t[0]}s(rRt,"formatArgs");function nRt(){return Ru.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(nRt,"getDate");function iRt(...t){return process.stderr.write(Uj.format(...t)+`
`)}s(iRt,"log");function oRt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(oRt,"save");function sRt(){return process.env.DEBUG}s(sRt,"load");function aRt(t){t.inspectOpts={};let e=Object.keys(Ru.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ru.inspectOpts[e[r]]}s(aRt,"init");qj.exports=i0e()(Ru);var{formatters:TMe}=qj.exports;TMe.o=function(t){return this.inspectOpts.colors=this.useColors,Uj.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};TMe.O=function(t){return this.inspectOpts.colors=this.useColors,Uj.inspect(t,this.inspectOpts)}});var Wy=q((UVr,a0e)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?a0e.exports=CMe():a0e.exports=wMe()});var RMe=q(Gf=>{"use strict";f();var cRt=Gf&&Gf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lRt=Gf&&Gf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SMe=Gf&&Gf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cRt(e,t,r);return lRt(e,t),e};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.req=Gf.json=Gf.toBuffer=void 0;var uRt=SMe(require("http")),dRt=SMe(require("https"));async function _Me(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(_Me,"toBuffer");Gf.toBuffer=_Me;async function fRt(t){let r=(await _Me(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(fRt,"json");Gf.json=fRt;function pRt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?dRt:uRt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(pRt,"req");Gf.req=pRt});var l0e=q(cp=>{"use strict";f();var PMe=cp&&cp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mRt=cp&&cp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DMe=cp&&cp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PMe(e,t,r);return mRt(e,t),e},hRt=cp&&cp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PMe(e,t,r)};Object.defineProperty(cp,"__esModule",{value:!0});cp.Agent=void 0;var gRt=DMe(require("net")),kMe=DMe(require("http")),ARt=require("https");hRt(RMe(),cp);var $y=Symbol("AgentBaseInternalState"),c0e=class extends kMe.Agent{static{s(this,"Agent")}constructor(e){super(e),this[$y]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new gRt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?ARt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof kMe.Agent)return c.addRequest(e,i);this[$y].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[$y].currentSocket;if(this[$y].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[$y].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[$y]&&(this[$y].defaultPort=e)}get protocol(){return this[$y].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[$y]&&(this[$y].protocol=e)}};cp.Agent=c0e});var BMe=q(U4=>{"use strict";f();var yRt=U4&&U4.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U4,"__esModule",{value:!0});U4.parseProxyResponse=void 0;var CRt=yRt(Wy()),Hj=(0,CRt.default)("https-proxy-agent:parse-proxy-response");function vRt(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?u(d):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),Hj("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(d){a(),Hj("onerror %o",d),r(d)}s(l,"onerror");function u(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){Hj("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=g.split(" "),y=+A[1],E=A.slice(2).join(" "),b={};for(let w of h){if(!w)continue;let R=w.indexOf(":");if(R===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${w}"`));let D=w.slice(0,R).toLowerCase(),N=w.slice(R+1).trimStart(),O=b[D];typeof O=="string"?b[D]=[O,N]:Array.isArray(O)?O.push(N):b[D]=N}Hj("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:y,statusText:E,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(vRt,"parseProxyResponse");U4.parseProxyResponse=vRt});var OMe=q(Rm=>{"use strict";f();var ERt=Rm&&Rm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xRt=Rm&&Rm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MMe=Rm&&Rm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ERt(e,t,r);return xRt(e,t),e},FMe=Rm&&Rm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.HttpsProxyAgent=void 0;var u0e=MMe(require("net")),NMe=MMe(require("tls")),bRt=FMe(require("assert")),IRt=FMe(Wy()),TRt=l0e(),wRt=require("url"),SRt=BMe(),i9=(0,IRt.default)("https-proxy-agent"),Wj=class extends TRt.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new wRt.URL(e):e,this.proxyHeaders=r?.headers??{},i9("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?LMe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){i9("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=NMe.connect({...this.connectOpts,servername:m})}else i9("Creating `net.Socket`: %o",this.connectOpts),i=u0e.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=u0e.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,SRt.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:d}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",_Rt),r.secureEndpoint){i9("Upgrading socket connection to TLS");let m=r.servername||r.host;return NMe.connect({...LMe(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new u0e.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{i9("Replaying proxy buffer for failed request"),(0,bRt.default)(m.listenerCount("data")>0),m.push(d),m.push(null)}),p}};Wj.protocols=["http","https"];Rm.HttpsProxyAgent=Wj;function _Rt(t){t.resume()}s(_Rt,"resume");function LMe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(LMe,"omit")});var qMe=q(km=>{"use strict";f();var RRt=km&&km.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kRt=km&&km.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UMe=km&&km.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RRt(e,t,r);return kRt(e,t),e},PRt=km&&km.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(km,"__esModule",{value:!0});km.HttpProxyAgent=void 0;var DRt=UMe(require("net")),BRt=UMe(require("tls")),NRt=PRt(Wy()),LRt=require("events"),MRt=l0e(),QMe=require("url"),q4=(0,NRt.default)("http-proxy-agent"),$j=class extends MRt.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new QMe.URL(e):e,this.proxyHeaders=r?.headers??{},q4("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?FRt(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new QMe.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let d=l[u];d&&e.setHeader(u,d)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;q4("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(q4("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),q4("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(q4("Creating `tls.Socket`: %o",this.connectOpts),o=BRt.connect(this.connectOpts)):(q4("Creating `net.Socket`: %o",this.connectOpts),o=DRt.connect(this.connectOpts)),await(0,LRt.once)(o,"connect"),o}};$j.protocols=["http","https"];km.HttpProxyAgent=$j;function FRt(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(FRt,"omit")});var l9e=q(oG=>{"use strict";f();Object.defineProperty(oG,"__esModule",{value:!0});oG.state=void 0;oG.state={instrumenterImplementation:void 0}});var A9e=q(uG=>{"use strict";f();Object.defineProperty(uG,"__esModule",{value:!0});uG.state=void 0;uG.state={operationRequestMap:new WeakMap}});var dD=q((dme,E6e)=>{f();var rV=require("buffer"),tC=rV.Buffer;function v6e(t,e){for(var r in t)e[r]=t[r]}s(v6e,"copyProps");tC.from&&tC.alloc&&tC.allocUnsafe&&tC.allocUnsafeSlow?E6e.exports=rV:(v6e(rV,dme),dme.Buffer=l2);function l2(t,e,r){return tC(t,e,r)}s(l2,"SafeBuffer");l2.prototype=Object.create(tC.prototype);v6e(tC,l2);l2.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return tC(t,e,r)};l2.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=tC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};l2.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return tC(t)};l2.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return rV.SlowBuffer(t)}});var fme=q((ppn,x6e)=>{f();var nV=dD().Buffer,hPt=require("stream"),gPt=require("util");function iV(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=nV.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=nV.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(iV,"DataStream");gPt.inherits(iV,hPt);iV.prototype.write=s(function(e){this.buffer=nV.concat([this.buffer,nV.from(e)]),this.emit("data",e)},"write");iV.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");x6e.exports=iV});var I6e=q((gpn,b6e)=>{"use strict";f();function pme(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(pme,"getParamSize");var APt={ES256:pme(256),ES384:pme(384),ES512:pme(521)};function yPt(t){var e=APt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(yPt,"getParamBytesForAlg");b6e.exports=yPt});var P6e=q((Cpn,k6e)=>{"use strict";f();var oV=dD().Buffer,w6e=I6e(),sV=128,S6e=0,CPt=32,vPt=16,EPt=2,_6e=vPt|CPt|S6e<<6,aV=EPt|S6e<<6;function xPt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(xPt,"base64Url");function R6e(t){if(oV.isBuffer(t))return t;if(typeof t=="string")return oV.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(R6e,"signatureAsBuffer");function bPt(t,e){t=R6e(t);var r=w6e(e),n=r+1,i=t.length,o=0;if(t[o++]!==_6e)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(sV|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==aV)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==aV)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var d=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=oV.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,d+Math.max(-m,0),d+u),h=h.toString("base64"),h=xPt(h),h}s(bPt,"derToJose");function T6e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=sV;return i&&--n,n}s(T6e,"countPadding");function IPt(t,e){t=R6e(t);var r=w6e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=T6e(t,0,r),o=T6e(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<sV,d=oV.allocUnsafe((u?2:3)+l),p=0;return d[p++]=_6e,u?d[p++]=l:(d[p++]=sV|1,d[p++]=l&255),d[p++]=aV,d[p++]=a,i<0?(d[p++]=0,p+=t.copy(d,p,0,r)):p+=t.copy(d,p,i,r),d[p++]=aV,d[p++]=c,o<0?(d[p++]=0,t.copy(d,p,r)):t.copy(d,p,r+o),d}s(IPt,"joseToDer");k6e.exports={derToJose:bPt,joseToDer:IPt}});var B6e=q((xpn,D6e)=>{"use strict";f();var g6=require("buffer").Buffer,mme=require("buffer").SlowBuffer;D6e.exports=cV;function cV(t,e){if(!g6.isBuffer(t)||!g6.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(cV,"bufferEq");cV.install=function(){g6.prototype.equal=mme.prototype.equal=s(function(e){return cV(this,e)},"equal")};var TPt=g6.prototype.equal,wPt=mme.prototype.equal;cV.restore=function(){g6.prototype.equal=TPt,mme.prototype.equal=wPt}});var yme=q((Tpn,H6e)=>{f();var pD=dD().Buffer,Bm=require("crypto"),L6e=P6e(),N6e=require("util"),SPt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,A6="secret must be a string or buffer",fD="key must be a string or a buffer",_Pt="key must be a string, a buffer or an object",gme=typeof Bm.createPublicKey=="function";gme&&(fD+=" or a KeyObject",A6+="or a KeyObject");function M6e(t){if(!pD.isBuffer(t)&&typeof t!="string"&&(!gme||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Hg(fD)}s(M6e,"checkIsPublicKey");function F6e(t){if(!pD.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Hg(_Pt)}s(F6e,"checkIsPrivateKey");function RPt(t){if(!pD.isBuffer(t)){if(typeof t=="string")return t;if(!gme||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Hg(A6)}}s(RPt,"checkIsSecretKey");function Ame(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Ame,"fromBase64");function O6e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(O6e,"toBase64");function Hg(t){var e=[].slice.call(arguments,1),r=N6e.format.bind(N6e,t).apply(null,e);return new TypeError(r)}s(Hg,"typeError");function kPt(t){return pD.isBuffer(t)||typeof t=="string"}s(kPt,"bufferOrString");function y6(t){return kPt(t)||(t=JSON.stringify(t)),t}s(y6,"normalizeInput");function Q6e(t){return s(function(r,n){RPt(n),r=y6(r);var i=Bm.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return Ame(o)},"sign")}s(Q6e,"createHmacSigner");var hme,PPt="timingSafeEqual"in Bm?s(function(e,r){return e.byteLength!==r.byteLength?!1:Bm.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return hme||(hme=B6e()),hme(e,r)},"timingSafeEqual");function DPt(t){return s(function(r,n,i){var o=Q6e(t)(r,i);return PPt(pD.from(n),pD.from(o))},"verify")}s(DPt,"createHmacVerifier");function U6e(t){return s(function(r,n){F6e(n),r=y6(r);var i=Bm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return Ame(o)},"sign")}s(U6e,"createKeySigner");function q6e(t){return s(function(r,n,i){M6e(i),r=y6(r),n=O6e(n);var o=Bm.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(q6e,"createKeyVerifier");function BPt(t){return s(function(r,n){F6e(n),r=y6(r);var i=Bm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:Bm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Bm.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ame(o)},"sign")}s(BPt,"createPSSKeySigner");function NPt(t){return s(function(r,n,i){M6e(i),r=y6(r),n=O6e(n);var o=Bm.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:Bm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Bm.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(NPt,"createPSSKeyVerifier");function LPt(t){var e=U6e(t);return s(function(){var n=e.apply(null,arguments);return n=L6e.derToJose(n,"ES"+t),n},"sign")}s(LPt,"createECDSASigner");function MPt(t){var e=q6e(t);return s(function(n,i,o){i=L6e.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(MPt,"createECDSAVerifer");function FPt(){return s(function(){return""},"sign")}s(FPt,"createNoneSigner");function OPt(){return s(function(e,r){return r===""},"verify")}s(OPt,"createNoneVerifier");H6e.exports=s(function(e){var r={hs:Q6e,rs:U6e,ps:BPt,es:LPt,none:FPt},n={hs:DPt,rs:q6e,ps:NPt,es:MPt,none:OPt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Hg(SPt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var Cme=q((_pn,W6e)=>{f();var QPt=require("buffer").Buffer;W6e.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||QPt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var Y6e=q((Ppn,z6e)=>{f();var UPt=dD().Buffer,$6e=fme(),qPt=yme(),HPt=require("stream"),j6e=Cme(),vme=require("util");function G6e(t,e){return UPt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(G6e,"base64url");function WPt(t,e,r){r=r||"utf8";var n=G6e(j6e(t),"binary"),i=G6e(j6e(e),r);return vme.format("%s.%s",n,i)}s(WPt,"jwsSecuredInput");function V6e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=qPt(e.alg),a=WPt(e,r,i),c=o.sign(a,n);return vme.format("%s.%s",a,c)}s(V6e,"jwsSign");function lV(t){var e=t.secret||t.privateKey||t.key,r=new $6e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new $6e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(lV,"SignStream");vme.inherits(lV,HPt);lV.prototype.sign=s(function(){try{var e=V6e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");lV.sign=V6e;z6e.exports=lV});var oFe=q((Npn,iFe)=>{f();var J6e=dD().Buffer,K6e=fme(),$Pt=yme(),jPt=require("stream"),X6e=Cme(),GPt=require("util"),VPt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function zPt(t){return Object.prototype.toString.call(t)==="[object Object]"}s(zPt,"isObject");function YPt(t){if(zPt(t))return t;try{return JSON.parse(t)}catch{return}}s(YPt,"safeJsonParse");function Z6e(t){var e=t.split(".",1)[0];return YPt(J6e.from(e,"base64").toString("binary"))}s(Z6e,"headerFromJWS");function KPt(t){return t.split(".",2).join(".")}s(KPt,"securedInputFromJWS");function eFe(t){return t.split(".")[2]}s(eFe,"signatureFromJWS");function JPt(t,e){e=e||"utf8";var r=t.split(".")[1];return J6e.from(r,"base64").toString(e)}s(JPt,"payloadFromJWS");function tFe(t){return VPt.test(t)&&!!Z6e(t)}s(tFe,"isValidJws");function rFe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=X6e(t);var i=eFe(t),o=KPt(t),a=$Pt(e);return a.verify(o,i,r)}s(rFe,"jwsVerify");function nFe(t,e){if(e=e||{},t=X6e(t),!tFe(t))return null;var r=Z6e(t);if(!r)return null;var n=JPt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:eFe(t)}}s(nFe,"jwsDecode");function mD(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new K6e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new K6e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(mD,"VerifyStream");GPt.inherits(mD,jPt);mD.prototype.verify=s(function(){try{var e=rFe(this.signature.buffer,this.algorithm,this.key.buffer),r=nFe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");mD.decode=nFe;mD.isValid=tFe;mD.verify=rFe;iFe.exports=mD});var dV=q(kI=>{f();var sFe=Y6e(),uV=oFe(),XPt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];kI.ALGORITHMS=XPt;kI.sign=sFe.sign;kI.verify=uV.verify;kI.decode=uV.decode;kI.isValid=uV.isValid;kI.createSign=s(function(e){return new sFe(e)},"createSign");kI.createVerify=s(function(e){return new uV(e)},"createVerify")});var Eme=q((Upn,aFe)=>{f();var ZPt=dV();aFe.exports=function(t,e){e=e||{};var r=ZPt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var C6=q((Hpn,cFe)=>{f();var fV=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");fV.prototype=Object.create(Error.prototype);fV.prototype.constructor=fV;cFe.exports=fV});var xme=q((jpn,uFe)=>{f();var lFe=C6(),pV=s(function(t,e){lFe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");pV.prototype=Object.create(lFe.prototype);pV.prototype.constructor=pV;uFe.exports=pV});var bme=q((zpn,fFe)=>{f();var dFe=C6(),mV=s(function(t,e){dFe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");mV.prototype=Object.create(dFe.prototype);mV.prototype.constructor=mV;fFe.exports=mV});var Ime=q((Jpn,pFe)=>{f();var e4t=n0e();pFe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=e4t(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var v6=q((Zpn,mFe)=>{"use strict";f();var t4t="2.0.0",r4t=Number.MAX_SAFE_INTEGER||9007199254740991,n4t=16,i4t=250,o4t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];mFe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:n4t,MAX_SAFE_BUILD_LENGTH:i4t,MAX_SAFE_INTEGER:r4t,RELEASE_TYPES:o4t,SEMVER_SPEC_VERSION:t4t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var E6=q((tmn,hFe)=>{"use strict";f();var s4t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};hFe.exports=s4t});var hD=q((rC,gFe)=>{"use strict";f();var{MAX_SAFE_COMPONENT_LENGTH:Tme,MAX_SAFE_BUILD_LENGTH:a4t,MAX_LENGTH:c4t}=v6(),l4t=E6();rC=gFe.exports={};var u4t=rC.re=[],d4t=rC.safeRe=[],Sr=rC.src=[],f4t=rC.safeSrc=[],_r=rC.t={},p4t=0,wme="[a-zA-Z0-9-]",m4t=[["\\s",1],["\\d",c4t],[wme,a4t]],h4t=s(t=>{for(let[e,r]of m4t)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),fi=s((t,e,r)=>{let n=h4t(e),i=p4t++;l4t(t,i,e),_r[t]=i,Sr[i]=e,f4t[i]=n,u4t[i]=new RegExp(e,r?"g":void 0),d4t[i]=new RegExp(n,r?"g":void 0)},"createToken");fi("NUMERICIDENTIFIER","0|[1-9]\\d*");fi("NUMERICIDENTIFIERLOOSE","\\d+");fi("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wme}*`);fi("MAINVERSION",`(${Sr[_r.NUMERICIDENTIFIER]})\\.(${Sr[_r.NUMERICIDENTIFIER]})\\.(${Sr[_r.NUMERICIDENTIFIER]})`);fi("MAINVERSIONLOOSE",`(${Sr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${Sr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${Sr[_r.NUMERICIDENTIFIERLOOSE]})`);fi("PRERELEASEIDENTIFIER",`(?:${Sr[_r.NONNUMERICIDENTIFIER]}|${Sr[_r.NUMERICIDENTIFIER]})`);fi("PRERELEASEIDENTIFIERLOOSE",`(?:${Sr[_r.NONNUMERICIDENTIFIER]}|${Sr[_r.NUMERICIDENTIFIERLOOSE]})`);fi("PRERELEASE",`(?:-(${Sr[_r.PRERELEASEIDENTIFIER]}(?:\\.${Sr[_r.PRERELEASEIDENTIFIER]})*))`);fi("PRERELEASELOOSE",`(?:-?(${Sr[_r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Sr[_r.PRERELEASEIDENTIFIERLOOSE]})*))`);fi("BUILDIDENTIFIER",`${wme}+`);fi("BUILD",`(?:\\+(${Sr[_r.BUILDIDENTIFIER]}(?:\\.${Sr[_r.BUILDIDENTIFIER]})*))`);fi("FULLPLAIN",`v?${Sr[_r.MAINVERSION]}${Sr[_r.PRERELEASE]}?${Sr[_r.BUILD]}?`);fi("FULL",`^${Sr[_r.FULLPLAIN]}$`);fi("LOOSEPLAIN",`[v=\\s]*${Sr[_r.MAINVERSIONLOOSE]}${Sr[_r.PRERELEASELOOSE]}?${Sr[_r.BUILD]}?`);fi("LOOSE",`^${Sr[_r.LOOSEPLAIN]}$`);fi("GTLT","((?:<|>)?=?)");fi("XRANGEIDENTIFIERLOOSE",`${Sr[_r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);fi("XRANGEIDENTIFIER",`${Sr[_r.NUMERICIDENTIFIER]}|x|X|\\*`);fi("XRANGEPLAIN",`[v=\\s]*(${Sr[_r.XRANGEIDENTIFIER]})(?:\\.(${Sr[_r.XRANGEIDENTIFIER]})(?:\\.(${Sr[_r.XRANGEIDENTIFIER]})(?:${Sr[_r.PRERELEASE]})?${Sr[_r.BUILD]}?)?)?`);fi("XRANGEPLAINLOOSE",`[v=\\s]*(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:${Sr[_r.PRERELEASELOOSE]})?${Sr[_r.BUILD]}?)?)?`);fi("XRANGE",`^${Sr[_r.GTLT]}\\s*${Sr[_r.XRANGEPLAIN]}$`);fi("XRANGELOOSE",`^${Sr[_r.GTLT]}\\s*${Sr[_r.XRANGEPLAINLOOSE]}$`);fi("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Tme}})(?:\\.(\\d{1,${Tme}}))?(?:\\.(\\d{1,${Tme}}))?`);fi("COERCE",`${Sr[_r.COERCEPLAIN]}(?:$|[^\\d])`);fi("COERCEFULL",Sr[_r.COERCEPLAIN]+`(?:${Sr[_r.PRERELEASE]})?(?:${Sr[_r.BUILD]})?(?:$|[^\\d])`);fi("COERCERTL",Sr[_r.COERCE],!0);fi("COERCERTLFULL",Sr[_r.COERCEFULL],!0);fi("LONETILDE","(?:~>?)");fi("TILDETRIM",`(\\s*)${Sr[_r.LONETILDE]}\\s+`,!0);rC.tildeTrimReplace="$1~";fi("TILDE",`^${Sr[_r.LONETILDE]}${Sr[_r.XRANGEPLAIN]}$`);fi("TILDELOOSE",`^${Sr[_r.LONETILDE]}${Sr[_r.XRANGEPLAINLOOSE]}$`);fi("LONECARET","(?:\\^)");fi("CARETTRIM",`(\\s*)${Sr[_r.LONECARET]}\\s+`,!0);rC.caretTrimReplace="$1^";fi("CARET",`^${Sr[_r.LONECARET]}${Sr[_r.XRANGEPLAIN]}$`);fi("CARETLOOSE",`^${Sr[_r.LONECARET]}${Sr[_r.XRANGEPLAINLOOSE]}$`);fi("COMPARATORLOOSE",`^${Sr[_r.GTLT]}\\s*(${Sr[_r.LOOSEPLAIN]})$|^$`);fi("COMPARATOR",`^${Sr[_r.GTLT]}\\s*(${Sr[_r.FULLPLAIN]})$|^$`);fi("COMPARATORTRIM",`(\\s*)${Sr[_r.GTLT]}\\s*(${Sr[_r.LOOSEPLAIN]}|${Sr[_r.XRANGEPLAIN]})`,!0);rC.comparatorTrimReplace="$1$2$3";fi("HYPHENRANGE",`^\\s*(${Sr[_r.XRANGEPLAIN]})\\s+-\\s+(${Sr[_r.XRANGEPLAIN]})\\s*$`);fi("HYPHENRANGELOOSE",`^\\s*(${Sr[_r.XRANGEPLAINLOOSE]})\\s+-\\s+(${Sr[_r.XRANGEPLAINLOOSE]})\\s*$`);fi("STAR","(<|>)?=?\\s*\\*");fi("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");fi("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var hV=q((omn,AFe)=>{"use strict";f();var g4t=Object.freeze({loose:!0}),A4t=Object.freeze({}),y4t=s(t=>t?typeof t!="object"?g4t:t:A4t,"parseOptions");AFe.exports=y4t});var Sme=q((cmn,vFe)=>{"use strict";f();var yFe=/^[0-9]+$/,CFe=s((t,e)=>{let r=yFe.test(t),n=yFe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),C4t=s((t,e)=>CFe(e,t),"rcompareIdentifiers");vFe.exports={compareIdentifiers:CFe,rcompareIdentifiers:C4t}});var Cd=q((dmn,xFe)=>{"use strict";f();var gV=E6(),{MAX_LENGTH:EFe,MAX_SAFE_INTEGER:AV}=v6(),{safeRe:yV,t:CV}=hD(),v4t=hV(),{compareIdentifiers:gD}=Sme(),_me=class t{static{s(this,"SemVer")}constructor(e,r){if(r=v4t(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>EFe)throw new TypeError(`version is longer than ${EFe} characters`);gV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?yV[CV.LOOSE]:yV[CV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>AV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>AV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>AV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<AV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(gV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),gD(this.major,e.major)||gD(this.minor,e.minor)||gD(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(gV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return gD(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(gV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return gD(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?yV[CV.PRERELEASELOOSE]:yV[CV.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),gD(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};xFe.exports=_me});var u2=q((mmn,IFe)=>{"use strict";f();var bFe=Cd(),E4t=s((t,e,r=!1)=>{if(t instanceof bFe)return t;try{return new bFe(t,e)}catch(n){if(!r)return null;throw n}},"parse");IFe.exports=E4t});var wFe=q((Amn,TFe)=>{"use strict";f();var x4t=u2(),b4t=s((t,e)=>{let r=x4t(t,e);return r?r.version:null},"valid");TFe.exports=b4t});var _Fe=q((vmn,SFe)=>{"use strict";f();var I4t=u2(),T4t=s((t,e)=>{let r=I4t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");SFe.exports=T4t});var PFe=q((bmn,kFe)=>{"use strict";f();var RFe=Cd(),w4t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new RFe(t instanceof RFe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");kFe.exports=w4t});var NFe=q((wmn,BFe)=>{"use strict";f();var DFe=u2(),S4t=s((t,e)=>{let r=DFe(t,null,!0),n=DFe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let d=l?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"},"diff");BFe.exports=S4t});var MFe=q((Rmn,LFe)=>{"use strict";f();var _4t=Cd(),R4t=s((t,e)=>new _4t(t,e).major,"major");LFe.exports=R4t});var OFe=q((Dmn,FFe)=>{"use strict";f();var k4t=Cd(),P4t=s((t,e)=>new k4t(t,e).minor,"minor");FFe.exports=P4t});var UFe=q((Lmn,QFe)=>{"use strict";f();var D4t=Cd(),B4t=s((t,e)=>new D4t(t,e).patch,"patch");QFe.exports=B4t});var HFe=q((Omn,qFe)=>{"use strict";f();var N4t=u2(),L4t=s((t,e)=>{let r=N4t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");qFe.exports=L4t});var Nm=q((qmn,$Fe)=>{"use strict";f();var WFe=Cd(),M4t=s((t,e,r)=>new WFe(t,r).compare(new WFe(e,r)),"compare");$Fe.exports=M4t});var GFe=q(($mn,jFe)=>{"use strict";f();var F4t=Nm(),O4t=s((t,e,r)=>F4t(e,t,r),"rcompare");jFe.exports=O4t});var zFe=q((Vmn,VFe)=>{"use strict";f();var Q4t=Nm(),U4t=s((t,e)=>Q4t(t,e,!0),"compareLoose");VFe.exports=U4t});var vV=q((Kmn,KFe)=>{"use strict";f();var YFe=Cd(),q4t=s((t,e,r)=>{let n=new YFe(t,r),i=new YFe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");KFe.exports=q4t});var XFe=q((Zmn,JFe)=>{"use strict";f();var H4t=vV(),W4t=s((t,e)=>t.sort((r,n)=>H4t(r,n,e)),"sort");JFe.exports=W4t});var eOe=q((rhn,ZFe)=>{"use strict";f();var $4t=vV(),j4t=s((t,e)=>t.sort((r,n)=>$4t(n,r,e)),"rsort");ZFe.exports=j4t});var x6=q((ohn,tOe)=>{"use strict";f();var G4t=Nm(),V4t=s((t,e,r)=>G4t(t,e,r)>0,"gt");tOe.exports=V4t});var EV=q((chn,rOe)=>{"use strict";f();var z4t=Nm(),Y4t=s((t,e,r)=>z4t(t,e,r)<0,"lt");rOe.exports=Y4t});var Rme=q((dhn,nOe)=>{"use strict";f();var K4t=Nm(),J4t=s((t,e,r)=>K4t(t,e,r)===0,"eq");nOe.exports=J4t});var kme=q((mhn,iOe)=>{"use strict";f();var X4t=Nm(),Z4t=s((t,e,r)=>X4t(t,e,r)!==0,"neq");iOe.exports=Z4t});var xV=q((Ahn,oOe)=>{"use strict";f();var eDt=Nm(),tDt=s((t,e,r)=>eDt(t,e,r)>=0,"gte");oOe.exports=tDt});var bV=q((vhn,sOe)=>{"use strict";f();var rDt=Nm(),nDt=s((t,e,r)=>rDt(t,e,r)<=0,"lte");sOe.exports=nDt});var Pme=q((bhn,aOe)=>{"use strict";f();var iDt=Rme(),oDt=kme(),sDt=x6(),aDt=xV(),cDt=EV(),lDt=bV(),uDt=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return iDt(t,r,n);case"!=":return oDt(t,r,n);case">":return sDt(t,r,n);case">=":return aDt(t,r,n);case"<":return cDt(t,r,n);case"<=":return lDt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");aOe.exports=uDt});var lOe=q((whn,cOe)=>{"use strict";f();var dDt=Cd(),fDt=u2(),{safeRe:IV,t:TV}=hD(),pDt=s((t,e)=>{if(t instanceof dDt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?IV[TV.COERCEFULL]:IV[TV.COERCE]);else{let l=e.includePrerelease?IV[TV.COERCERTLFULL]:IV[TV.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return fDt(`${n}.${i}.${o}${a}${c}`,e)},"coerce");cOe.exports=pDt});var dOe=q((Rhn,uOe)=>{"use strict";f();var Dme=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};uOe.exports=Dme});var Lm=q((Dhn,hOe)=>{"use strict";f();var mDt=/\s+/g,Bme=class t{static{s(this,"Range")}constructor(e,r){if(r=gDt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Nme)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(mDt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!pOe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&bDt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&EDt)|(this.options.loose&&xDt))+":"+e,i=fOe.get(n);if(i)return i;let o=this.options.loose,a=o?Xf[ef.HYPHENRANGELOOSE]:Xf[ef.HYPHENRANGE];e=e.replace(a,BDt(this.options.includePrerelease)),Xs("hyphen replace",e),e=e.replace(Xf[ef.COMPARATORTRIM],yDt),Xs("comparator trim",e),e=e.replace(Xf[ef.TILDETRIM],CDt),Xs("tilde trim",e),e=e.replace(Xf[ef.CARETTRIM],vDt),Xs("caret trim",e);let c=e.split(" ").map(p=>IDt(p,this.options)).join(" ").split(/\s+/).map(p=>DDt(p,this.options));o&&(c=c.filter(p=>(Xs("loose invalid filter",p,this.options),!!p.match(Xf[ef.COMPARATORLOOSE])))),Xs("range list",c);let l=new Map,u=c.map(p=>new Nme(p,this.options));for(let p of u){if(pOe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let d=[...l.values()];return fOe.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>mOe(n,r)&&e.set.some(i=>mOe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ADt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(NDt(this.set[r],e,this.options))return!0;return!1}};hOe.exports=Bme;var hDt=dOe(),fOe=new hDt,gDt=hV(),Nme=b6(),Xs=E6(),ADt=Cd(),{safeRe:Xf,t:ef,comparatorTrimReplace:yDt,tildeTrimReplace:CDt,caretTrimReplace:vDt}=hD(),{FLAG_INCLUDE_PRERELEASE:EDt,FLAG_LOOSE:xDt}=v6(),pOe=s(t=>t.value==="<0.0.0-0","isNullSet"),bDt=s(t=>t.value==="","isAny"),mOe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),IDt=s((t,e)=>(Xs("comp",t,e),t=SDt(t,e),Xs("caret",t),t=TDt(t,e),Xs("tildes",t),t=RDt(t,e),Xs("xrange",t),t=PDt(t,e),Xs("stars",t),t),"parseComparator"),tf=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),TDt=s((t,e)=>t.trim().split(/\s+/).map(r=>wDt(r,e)).join(" "),"replaceTildes"),wDt=s((t,e)=>{let r=e.loose?Xf[ef.TILDELOOSE]:Xf[ef.TILDE];return t.replace(r,(n,i,o,a,c)=>{Xs("tilde",t,n,i,o,a,c);let l;return tf(i)?l="":tf(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:tf(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(Xs("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Xs("tilde return",l),l})},"replaceTilde"),SDt=s((t,e)=>t.trim().split(/\s+/).map(r=>_Dt(r,e)).join(" "),"replaceCarets"),_Dt=s((t,e)=>{Xs("caret",t,e);let r=e.loose?Xf[ef.CARETLOOSE]:Xf[ef.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{Xs("caret",t,i,o,a,c,l);let u;return tf(o)?u="":tf(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:tf(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(Xs("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(Xs("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),Xs("caret return",u),u})},"replaceCaret"),RDt=s((t,e)=>(Xs("replaceXRanges",t,e),t.split(/\s+/).map(r=>kDt(r,e)).join(" ")),"replaceXRanges"),kDt=s((t,e)=>{t=t.trim();let r=e.loose?Xf[ef.XRANGELOOSE]:Xf[ef.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{Xs("xRange",t,n,i,o,a,c,l);let u=tf(o),d=u||tf(a),p=d||tf(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(a=0),c=0,i===">"?(i=">=",d?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):d?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),Xs("xRange return",n),n})},"replaceXRange"),PDt=s((t,e)=>(Xs("replaceStars",t,e),t.trim().replace(Xf[ef.STAR],"")),"replaceStars"),DDt=s((t,e)=>(Xs("replaceGTE0",t,e),t.trim().replace(Xf[e.includePrerelease?ef.GTE0PRE:ef.GTE0],"")),"replaceGTE0"),BDt=s(t=>(e,r,n,i,o,a,c,l,u,d,p,m)=>(tf(n)?r="":tf(i)?r=`>=${n}.0.0${t?"-0":""}`:tf(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,tf(u)?l="":tf(d)?l=`<${+u+1}.0.0-0`:tf(p)?l=`<${u}.${+d+1}.0-0`:m?l=`<=${u}.${d}.${p}-${m}`:t?l=`<${u}.${d}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),NDt=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Xs(t[n].semver),t[n].semver!==Nme.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var b6=q((Lhn,EOe)=>{"use strict";f();var I6=Symbol("SemVer ANY"),Fme=class t{static{s(this,"Comparator")}static get ANY(){return I6}constructor(e,r){if(r=gOe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Mme("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===I6?this.value="":this.value=this.operator+this.semver.version,Mme("comp",this)}parse(e){let r=this.options.loose?AOe[yOe.COMPARATORLOOSE]:AOe[yOe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new COe(n[2],this.options.loose):this.semver=I6}toString(){return this.value}test(e){if(Mme("Comparator.test",e,this.options.loose),this.semver===I6||e===I6)return!0;if(typeof e=="string")try{e=new COe(e,this.options)}catch{return!1}return Lme(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new vOe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new vOe(this.value,r).test(e.semver):(r=gOe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Lme(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Lme(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};EOe.exports=Fme;var gOe=hV(),{safeRe:AOe,t:yOe}=hD(),Lme=Pme(),Mme=E6(),COe=Cd(),vOe=Lm()});var T6=q((Ohn,xOe)=>{"use strict";f();var LDt=Lm(),MDt=s((t,e,r)=>{try{e=new LDt(e,r)}catch{return!1}return e.test(t)},"satisfies");xOe.exports=MDt});var IOe=q((qhn,bOe)=>{"use strict";f();var FDt=Lm(),ODt=s((t,e)=>new FDt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");bOe.exports=ODt});var wOe=q(($hn,TOe)=>{"use strict";f();var QDt=Cd(),UDt=Lm(),qDt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new UDt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new QDt(n,r))}),n},"maxSatisfying");TOe.exports=qDt});var _Oe=q((Vhn,SOe)=>{"use strict";f();var HDt=Cd(),WDt=Lm(),$Dt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new WDt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new HDt(n,r))}),n},"minSatisfying");SOe.exports=$Dt});var POe=q((Khn,kOe)=>{"use strict";f();var Ome=Cd(),jDt=Lm(),ROe=x6(),GDt=s((t,e)=>{t=new jDt(t,e);let r=new Ome("0.0.0");if(t.test(r)||(r=new Ome("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new Ome(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||ROe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||ROe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");kOe.exports=GDt});var BOe=q((Zhn,DOe)=>{"use strict";f();var VDt=Lm(),zDt=s((t,e)=>{try{return new VDt(t,e).range||"*"}catch{return null}},"validRange");DOe.exports=zDt});var wV=q((rgn,FOe)=>{"use strict";f();var YDt=Cd(),MOe=b6(),{ANY:KDt}=MOe,JDt=Lm(),XDt=T6(),NOe=x6(),LOe=EV(),ZDt=bV(),e3t=xV(),t3t=s((t,e,r,n)=>{t=new YDt(t,n),e=new JDt(e,n);let i,o,a,c,l;switch(r){case">":i=NOe,o=ZDt,a=LOe,c=">",l=">=";break;case"<":i=LOe,o=e3t,a=NOe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(XDt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===KDt&&(h=new MOe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");FOe.exports=t3t});var QOe=q((ogn,OOe)=>{"use strict";f();var r3t=wV(),n3t=s((t,e,r)=>r3t(t,e,">",r),"gtr");OOe.exports=n3t});var qOe=q((cgn,UOe)=>{"use strict";f();var i3t=wV(),o3t=s((t,e,r)=>i3t(t,e,"<",r),"ltr");UOe.exports=o3t});var $Oe=q((dgn,WOe)=>{"use strict";f();var HOe=Lm(),s3t=s((t,e,r)=>(t=new HOe(t,r),e=new HOe(e,r),t.intersects(e,r)),"intersects");WOe.exports=s3t});var GOe=q((mgn,jOe)=>{"use strict";f();var a3t=T6(),c3t=Nm();jOe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((d,p)=>c3t(d,p,r));for(let d of a)a3t(d,e,r)?(o=d,i||(i=d)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[d,p]of n)d===p?c.push(d):!p&&d===a[0]?c.push("*"):p?d===a[0]?c.push(`<=${p}`):c.push(`${d} - ${p}`):c.push(`>=${d}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var XOe=q((ggn,JOe)=>{"use strict";f();var VOe=Lm(),Ume=b6(),{ANY:Qme}=Ume,w6=T6(),qme=Nm(),l3t=s((t,e,r={})=>{if(t===e)return!0;t=new VOe(t,r),e=new VOe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=d3t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),u3t=[new Ume(">=0.0.0-0")],zOe=[new Ume(">=0.0.0")],d3t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Qme){if(e.length===1&&e[0].semver===Qme)return!0;r.includePrerelease?t=u3t:t=zOe}if(e.length===1&&e[0].semver===Qme){if(r.includePrerelease)return!0;e=zOe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=YOe(i,h,r):h.operator==="<"||h.operator==="<="?o=KOe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=qme(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!w6(h,String(i),r)||o&&!w6(h,String(o),r))return null;for(let g of e)if(!w6(h,String(g),r))return!1;return!0}let c,l,u,d,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=YOe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!w6(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=KOe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!w6(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),YOe=s((t,e,r)=>{if(!t)return e;let n=qme(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),KOe=s((t,e,r)=>{if(!t)return e;let n=qme(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");JOe.exports=l3t});var AD=q((Cgn,t7e)=>{"use strict";f();var Hme=hD(),ZOe=v6(),f3t=Cd(),e7e=Sme(),p3t=u2(),m3t=wFe(),h3t=_Fe(),g3t=PFe(),A3t=NFe(),y3t=MFe(),C3t=OFe(),v3t=UFe(),E3t=HFe(),x3t=Nm(),b3t=GFe(),I3t=zFe(),T3t=vV(),w3t=XFe(),S3t=eOe(),_3t=x6(),R3t=EV(),k3t=Rme(),P3t=kme(),D3t=xV(),B3t=bV(),N3t=Pme(),L3t=lOe(),M3t=b6(),F3t=Lm(),O3t=T6(),Q3t=IOe(),U3t=wOe(),q3t=_Oe(),H3t=POe(),W3t=BOe(),$3t=wV(),j3t=QOe(),G3t=qOe(),V3t=$Oe(),z3t=GOe(),Y3t=XOe();t7e.exports={parse:p3t,valid:m3t,clean:h3t,inc:g3t,diff:A3t,major:y3t,minor:C3t,patch:v3t,prerelease:E3t,compare:x3t,rcompare:b3t,compareLoose:I3t,compareBuild:T3t,sort:w3t,rsort:S3t,gt:_3t,lt:R3t,eq:k3t,neq:P3t,gte:D3t,lte:B3t,cmp:N3t,coerce:L3t,Comparator:M3t,Range:F3t,satisfies:O3t,toComparators:Q3t,maxSatisfying:U3t,minSatisfying:q3t,minVersion:H3t,validRange:W3t,outside:$3t,gtr:j3t,ltr:G3t,intersects:V3t,simplifyRange:z3t,subset:Y3t,SemVer:f3t,re:Hme.re,src:Hme.src,tokens:Hme.t,SEMVER_SPEC_VERSION:ZOe.SEMVER_SPEC_VERSION,RELEASE_TYPES:ZOe.RELEASE_TYPES,compareIdentifiers:e7e.compareIdentifiers,rcompareIdentifiers:e7e.rcompareIdentifiers}});var n7e=q((Egn,r7e)=>{f();var K3t=AD();r7e.exports=K3t.satisfies(process.version,">=15.7.0")});var o7e=q((bgn,i7e)=>{f();var J3t=AD();i7e.exports=J3t.satisfies(process.version,">=16.9.0")});var Wme=q((Tgn,s7e)=>{f();var X3t=n7e(),Z3t=o7e(),eBt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},tBt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};s7e.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=eBt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(X3t)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=tBt[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(Z3t){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var $me=q((Sgn,a7e)=>{f();var rBt=AD();a7e.exports=rBt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var u7e=q((Rgn,l7e)=>{f();var Ds=C6(),nBt=xme(),c7e=bme(),iBt=Eme(),oBt=Ime(),sBt=Wme(),aBt=$me(),cBt=dV(),{KeyObject:lBt,createSecretKey:uBt,createPublicKey:dBt}=require("crypto"),jme=["RS256","RS384","RS512"],fBt=["ES256","ES384","ES512"],Gme=["RS256","RS384","RS512"],pBt=["HS256","HS384","HS512"];aBt&&(jme.splice(jme.length,0,"PS256","PS384","PS512"),Gme.splice(Gme.length,0,"PS256","PS384","PS512"));l7e.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(d,p){if(d)throw d;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new Ds("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new Ds("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new Ds("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new Ds("jwt must be provided"));if(typeof t!="string")return i(new Ds("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new Ds("jwt malformed"));let c;try{c=iBt(t,{complete:!0})}catch(d){return i(d)}if(!c)return i(new Ds("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new Ds("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(d,p){return p(null,e)},"getSecret");return u(l,function(d,p){if(d)return i(new Ds("error in secret or public key callback: "+d.message));let m=a[2].trim()!=="";if(!m&&p)return i(new Ds("jwt signature is required"));if(m&&!p)return i(new Ds("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new Ds('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof lBt))try{p=dBt(p)}catch{try{p=uBt(typeof p=="string"?Buffer.from(p):p)}catch{return i(new Ds("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=pBt:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=Gme:p.asymmetricKeyType==="ec"?r.algorithms=fBt:r.algorithms=jme),r.algorithms.indexOf(c.header.alg)===-1)return i(new Ds("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new Ds(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new Ds(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{sBt(l.alg,p)}catch(A){return i(A)}let h;try{h=cBt.verify(t,c.header.alg,p)}catch(A){return i(A)}if(!h)return i(new Ds("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new Ds("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new nBt("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new Ds("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new c7e("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let A=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return A.some(function(w){return w instanceof RegExp?w.test(b):w===b})}))return i(new Ds("jwt audience invalid. expected: "+A.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new Ds("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new Ds("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new Ds("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new Ds("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new Ds("iat required when maxAge is specified"));let A=oBt(r.maxAge,g.iat);if(typeof A>"u")return i(new Ds('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(r.clockTolerance||0))return i(new c7e("maxAge exceeded",new Date(A*1e3)))}if(r.complete===!0){let A=c.signature;return i(null,{header:l,payload:g,signature:A})}return i(null,g)})}});var g7e=q((Dgn,h7e)=>{f();var d7e=1/0,p7e=9007199254740991,mBt=17976931348623157e292,f7e=NaN,hBt="[object Arguments]",gBt="[object Function]",ABt="[object GeneratorFunction]",yBt="[object String]",CBt="[object Symbol]",vBt=/^\s+|\s+$/g,EBt=/^[-+]0x[0-9a-f]+$/i,xBt=/^0b[01]+$/i,bBt=/^0o[0-7]+$/i,IBt=/^(?:0|[1-9]\d*)$/,TBt=parseInt;function wBt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(wBt,"arrayMap");function SBt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(SBt,"baseFindIndex");function _Bt(t,e,r){if(e!==e)return SBt(t,RBt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(_Bt,"baseIndexOf");function RBt(t){return t!==t}s(RBt,"baseIsNaN");function kBt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(kBt,"baseTimes");function PBt(t,e){return wBt(e,function(r){return t[r]})}s(PBt,"baseValues");function DBt(t,e){return function(r){return t(e(r))}}s(DBt,"overArg");var SV=Object.prototype,zme=SV.hasOwnProperty,_V=SV.toString,BBt=SV.propertyIsEnumerable,NBt=DBt(Object.keys,Object),LBt=Math.max;function MBt(t,e){var r=m7e(t)||qBt(t)?kBt(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||zme.call(t,o))&&!(i&&(o=="length"||OBt(o,n)))&&r.push(o);return r}s(MBt,"arrayLikeKeys");function FBt(t){if(!QBt(t))return NBt(t);var e=[];for(var r in Object(t))zme.call(t,r)&&r!="constructor"&&e.push(r);return e}s(FBt,"baseKeys");function OBt(t,e){return e=e??p7e,!!e&&(typeof t=="number"||IBt.test(t))&&t>-1&&t%1==0&&t<e}s(OBt,"isIndex");function QBt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||SV;return t===r}s(QBt,"isPrototype");function UBt(t,e,r,n){t=Yme(t)?t:JBt(t),r=r&&!n?zBt(r):0;var i=t.length;return r<0&&(r=LBt(i+r,0)),jBt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&_Bt(t,e,r)>-1}s(UBt,"includes");function qBt(t){return HBt(t)&&zme.call(t,"callee")&&(!BBt.call(t,"callee")||_V.call(t)==hBt)}s(qBt,"isArguments");var m7e=Array.isArray;function Yme(t){return t!=null&&$Bt(t.length)&&!WBt(t)}s(Yme,"isArrayLike");function HBt(t){return Kme(t)&&Yme(t)}s(HBt,"isArrayLikeObject");function WBt(t){var e=Vme(t)?_V.call(t):"";return e==gBt||e==ABt}s(WBt,"isFunction");function $Bt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=p7e}s($Bt,"isLength");function Vme(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(Vme,"isObject");function Kme(t){return!!t&&typeof t=="object"}s(Kme,"isObjectLike");function jBt(t){return typeof t=="string"||!m7e(t)&&Kme(t)&&_V.call(t)==yBt}s(jBt,"isString");function GBt(t){return typeof t=="symbol"||Kme(t)&&_V.call(t)==CBt}s(GBt,"isSymbol");function VBt(t){if(!t)return t===0?t:0;if(t=YBt(t),t===d7e||t===-d7e){var e=t<0?-1:1;return e*mBt}return t===t?t:0}s(VBt,"toFinite");function zBt(t){var e=VBt(t),r=e%1;return e===e?r?e-r:e:0}s(zBt,"toInteger");function YBt(t){if(typeof t=="number")return t;if(GBt(t))return f7e;if(Vme(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vme(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(vBt,"");var r=xBt.test(t);return r||bBt.test(t)?TBt(t.slice(2),r?2:8):EBt.test(t)?f7e:+t}s(YBt,"toNumber");function KBt(t){return Yme(t)?MBt(t):FBt(t)}s(KBt,"keys");function JBt(t){return t?PBt(t,KBt(t)):[]}s(JBt,"values");h7e.exports=UBt});var y7e=q((Lgn,A7e)=>{f();var XBt="[object Boolean]",ZBt=Object.prototype,eNt=ZBt.toString;function tNt(t){return t===!0||t===!1||rNt(t)&&eNt.call(t)==XBt}s(tNt,"isBoolean");function rNt(t){return!!t&&typeof t=="object"}s(rNt,"isObjectLike");A7e.exports=tNt});var b7e=q((Ogn,x7e)=>{f();var C7e=1/0,nNt=17976931348623157e292,v7e=NaN,iNt="[object Symbol]",oNt=/^\s+|\s+$/g,sNt=/^[-+]0x[0-9a-f]+$/i,aNt=/^0b[01]+$/i,cNt=/^0o[0-7]+$/i,lNt=parseInt,uNt=Object.prototype,dNt=uNt.toString;function fNt(t){return typeof t=="number"&&t==gNt(t)}s(fNt,"isInteger");function E7e(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(E7e,"isObject");function pNt(t){return!!t&&typeof t=="object"}s(pNt,"isObjectLike");function mNt(t){return typeof t=="symbol"||pNt(t)&&dNt.call(t)==iNt}s(mNt,"isSymbol");function hNt(t){if(!t)return t===0?t:0;if(t=ANt(t),t===C7e||t===-C7e){var e=t<0?-1:1;return e*nNt}return t===t?t:0}s(hNt,"toFinite");function gNt(t){var e=hNt(t),r=e%1;return e===e?r?e-r:e:0}s(gNt,"toInteger");function ANt(t){if(typeof t=="number")return t;if(mNt(t))return v7e;if(E7e(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=E7e(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(oNt,"");var r=aNt.test(t);return r||cNt.test(t)?lNt(t.slice(2),r?2:8):sNt.test(t)?v7e:+t}s(ANt,"toNumber");x7e.exports=fNt});var T7e=q((qgn,I7e)=>{f();var yNt="[object Number]",CNt=Object.prototype,vNt=CNt.toString;function ENt(t){return!!t&&typeof t=="object"}s(ENt,"isObjectLike");function xNt(t){return typeof t=="number"||ENt(t)&&vNt.call(t)==yNt}s(xNt,"isNumber");I7e.exports=xNt});var R7e=q(($gn,_7e)=>{f();var bNt="[object Object]";function INt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(INt,"isHostObject");function TNt(t,e){return function(r){return t(e(r))}}s(TNt,"overArg");var wNt=Function.prototype,w7e=Object.prototype,S7e=wNt.toString,SNt=w7e.hasOwnProperty,_Nt=S7e.call(Object),RNt=w7e.toString,kNt=TNt(Object.getPrototypeOf,Object);function PNt(t){return!!t&&typeof t=="object"}s(PNt,"isObjectLike");function DNt(t){if(!PNt(t)||RNt.call(t)!=bNt||INt(t))return!1;var e=kNt(t);if(e===null)return!0;var r=SNt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&S7e.call(r)==_Nt}s(DNt,"isPlainObject");_7e.exports=DNt});var P7e=q((Vgn,k7e)=>{f();var BNt="[object String]",NNt=Object.prototype,LNt=NNt.toString,MNt=Array.isArray;function FNt(t){return!!t&&typeof t=="object"}s(FNt,"isObjectLike");function ONt(t){return typeof t=="string"||!MNt(t)&&FNt(t)&&LNt.call(t)==BNt}s(ONt,"isString");k7e.exports=ONt});var M7e=q((Kgn,L7e)=>{f();var QNt="Expected a function",D7e=1/0,UNt=17976931348623157e292,B7e=NaN,qNt="[object Symbol]",HNt=/^\s+|\s+$/g,WNt=/^[-+]0x[0-9a-f]+$/i,$Nt=/^0b[01]+$/i,jNt=/^0o[0-7]+$/i,GNt=parseInt,VNt=Object.prototype,zNt=VNt.toString;function YNt(t,e){var r;if(typeof e!="function")throw new TypeError(QNt);return t=e8t(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(YNt,"before");function KNt(t){return YNt(2,t)}s(KNt,"once");function N7e(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(N7e,"isObject");function JNt(t){return!!t&&typeof t=="object"}s(JNt,"isObjectLike");function XNt(t){return typeof t=="symbol"||JNt(t)&&zNt.call(t)==qNt}s(XNt,"isSymbol");function ZNt(t){if(!t)return t===0?t:0;if(t=t8t(t),t===D7e||t===-D7e){var e=t<0?-1:1;return e*UNt}return t===t?t:0}s(ZNt,"toFinite");function e8t(t){var e=ZNt(t),r=e%1;return e===e?r?e-r:e:0}s(e8t,"toInteger");function t8t(t){if(typeof t=="number")return t;if(XNt(t))return B7e;if(N7e(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=N7e(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(HNt,"");var r=$Nt.test(t);return r||jNt.test(t)?GNt(t.slice(2),r?2:8):WNt.test(t)?B7e:+t}s(t8t,"toNumber");L7e.exports=KNt});var j7e=q((Zgn,$7e)=>{f();var F7e=Ime(),r8t=$me(),n8t=Wme(),O7e=dV(),i8t=g7e(),RV=y7e(),Q7e=b7e(),Jme=T7e(),q7e=R7e(),PI=P7e(),o8t=M7e(),{KeyObject:s8t,createSecretKey:a8t,createPrivateKey:c8t}=require("crypto"),H7e=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];r8t&&H7e.splice(3,0,"PS256","PS384","PS512");var l8t={expiresIn:{isValid:s(function(t){return Q7e(t)||PI(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return Q7e(t)||PI(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return PI(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:i8t.bind(null,H7e),message:'"algorithm" must be a valid string enum value'},header:{isValid:q7e,message:'"header" must be an object'},encoding:{isValid:PI,message:'"encoding" must be a string'},issuer:{isValid:PI,message:'"issuer" must be a string'},subject:{isValid:PI,message:'"subject" must be a string'},jwtid:{isValid:PI,message:'"jwtid" must be a string'},noTimestamp:{isValid:RV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:PI,message:'"keyid" must be a string'},mutatePayload:{isValid:RV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:RV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:RV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},u8t={iat:{isValid:Jme,message:'"iat" should be a number of seconds'},exp:{isValid:Jme,message:'"exp" should be a number of seconds'},nbf:{isValid:Jme,message:'"nbf" should be a number of seconds'}};function W7e(t,e,r,n){if(!q7e(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(W7e,"validate");function d8t(t){return W7e(l8t,!1,t,"options")}s(d8t,"validateOptions");function f8t(t){return W7e(u8t,!0,t,"payload")}s(f8t,"validatePayload");var U7e={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},p8t=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];$7e.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof s8t))try{e=c8t(e)}catch{try{e=a8t(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{f8t(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=p8t.filter(function(d){return typeof r[d]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{d8t(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{n8t(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=F7e(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=F7e(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(U7e).forEach(function(u){let d=U7e[u];if(typeof r[u]<"u"){if(typeof t[d]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+d+'" property.'));t[d]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&o8t(n),O7e.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=O7e.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var V7e=q((rAn,G7e)=>{f();G7e.exports={decode:Eme(),verify:u7e(),sign:j7e(),JsonWebTokenError:C6(),NotBeforeError:xme(),TokenExpiredError:bme()}});function O8t(){try{return rhe.default.statSync("/.dockerenv"),!0}catch{return!1}}function Q8t(){try{return rhe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function nhe(){return the===void 0&&(the=O8t()||Q8t()),the}var rhe,the,cQe=gg(()=>{f();rhe=Fe(require("node:fs"),1);s(O8t,"hasDockerEnv");s(Q8t,"hasDockerCGroup");s(nhe,"isDocker")});function TD(){return ihe===void 0&&(ihe=U8t()||nhe()),ihe}var lQe,ihe,U8t,ohe=gg(()=>{f();lQe=Fe(require("node:fs"),1);cQe();U8t=s(()=>{try{return lQe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(TD,"isInsideContainer")});var she,dQe,fQe,uQe,wD,pQe=gg(()=>{f();she=Fe(require("node:process"),1),dQe=Fe(require("node:os"),1),fQe=Fe(require("node:fs"),1);ohe();uQe=s(()=>{if(she.default.platform!=="linux")return!1;if(dQe.default.release().toLowerCase().includes("microsoft"))return!TD();try{return fQe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!TD():!1}catch{return!1}},"isWsl"),wD=she.default.env.__IS_WSL_TEST__?uQe:uQe()});function m2(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var mQe=gg(()=>{f();s(m2,"defineLazyProperty")});async function ahe(){if(gQe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await q8t("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var hQe,gQe,AQe,q8t,yQe=gg(()=>{f();hQe=require("node:util"),gQe=Fe(require("node:process"),1),AQe=require("node:child_process"),q8t=(0,hQe.promisify)(AQe.execFile);s(ahe,"defaultBrowserId")});async function EQe(t,{humanReadableOutput:e=!0}={}){if(CQe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await H8t("osascript",["-e",t,r]);return n.trim()}var CQe,vQe,che,H8t,xQe=gg(()=>{f();CQe=Fe(require("node:process"),1),vQe=require("node:util"),che=require("node:child_process"),H8t=(0,vQe.promisify)(che.execFile);s(EQe,"runAppleScript")});async function lhe(t){return EQe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var bQe=gg(()=>{f();xQe();s(lhe,"bundleName")});async function uhe(t=W8t){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new HV(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=$8t[n];if(!i)throw new HV(`Unknown browser ID: ${n}`);return i}var IQe,TQe,W8t,$8t,HV,wQe=gg(()=>{f();IQe=require("node:util"),TQe=require("node:child_process"),W8t=(0,IQe.promisify)(TQe.execFile),$8t={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},HV=class extends Error{static{s(this,"UnknownBrowserError")}};s(uhe,"defaultBrowser")});async function dhe(){if(WV.default.platform==="darwin"){let t=await ahe();return{name:await lhe(t),id:t}}if(WV.default.platform==="linux"){let{stdout:t}=await j8t("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:G8t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(WV.default.platform==="win32")return uhe();throw new Error("Only macOS, Linux, and Windows are supported")}var SQe,WV,_Qe,j8t,G8t,RQe=gg(()=>{f();SQe=require("node:util"),WV=Fe(require("node:process"),1),_Qe=require("node:child_process");yQe();bQe();wQe();j8t=(0,SQe.promisify)(_Qe.execFile),G8t=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(dhe,"defaultBrowser")});var FQe={};ma(FQe,{apps:()=>g2,default:()=>M6,openApp:()=>J8t});async function Y8t(){let t=await MQe(),r=phe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await V8t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function BQe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[PQe]:e}=t;if(!e)throw new Error(`${PQe} is not supported`);return e}function ghe({[SD]:t},{wsl:e}){if(e&&wD)return BQe(e);if(!t)throw new Error(`${SD} is not supported`);return BQe(t)}var N6,phe,mhe,NQe,LQe,hhe,h2,V8t,fhe,kQe,SD,PQe,z8t,MQe,DQe,L6,K8t,J8t,g2,M6,$V=gg(()=>{f();N6=Fe(require("node:process"),1),phe=require("node:buffer"),mhe=Fe(require("node:path"),1),NQe=require("node:url"),LQe=Fe(require("node:util"),1),hhe=Fe(require("node:child_process"),1),h2=Fe(require("node:fs/promises"),1);pQe();mQe();RQe();ohe();V8t=LQe.default.promisify(hhe.default.execFile),fhe=mhe.default.dirname((0,NQe.fileURLToPath)(importMetaUrlShim)),kQe=mhe.default.join(fhe,"xdg-open"),{platform:SD,arch:PQe}=N6.default,z8t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await h2.default.access(r,h2.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await h2.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),MQe=s(async()=>`${await z8t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(Y8t,"getWindowsDefaultBrowserFromWsl");DQe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),L6=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return DQe(t.app,c=>L6({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return DQe(e,c=>L6({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=wD?await Y8t():await dhe();if(u.id in c){let d=c[u.id];return e==="browserPrivate"&&r.push(l[d]),L6({...t,app:{name:g2[d],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(SD==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(SD==="win32"||wD&&!TD()&&!e){n=wD?await MQe():`${N6.default.env.SYSTEMROOT||N6.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),wD||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=phe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!fhe||fhe==="/",l=!1;try{await h2.default.access(kQe,h2.constants.X_OK),l=!0}catch{}n=N6.default.versions.electron??(SD==="android"||c||!l)?"xdg-open":kQe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}SD==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=hhe.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),K8t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return L6({...e,target:t})},"open"),J8t=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return L6({...e,app:{name:t,arguments:r}})},"openApp");s(BQe,"detectArchBinary");s(ghe,"detectPlatformBinary");g2={};m2(g2,"chrome",()=>ghe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));m2(g2,"firefox",()=>ghe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));m2(g2,"edge",()=>ghe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));m2(g2,"browser",()=>"browser");m2(g2,"browserPrivate",()=>"browserPrivate");M6=K8t});var aUe=q(iC=>{"use strict";f();Object.defineProperty(iC,"__esModule",{value:!0});iC.bytePairEncode=iC.BinaryMap=iC.binaryMapKey=void 0;var ELt=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");iC.binaryMapKey=ELt;var The=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,iC.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,iC.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};iC.BinaryMap=The;var nC=new Int32Array(128),of=new Int32Array(128);function xLt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;nC.length<r*2;)of=new Int32Array(of.length*2),nC=new Int32Array(nC.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),of[l]=l,nC[l]=u}of[r-1]=r-1,nC[r-1]=2147483647,of[r]=r,nC[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let d=e.get(t,of[l],of[l+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");n!==2147483647;){nC[of[i]]=a(i,1),i>0&&(nC[of[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)of[l]=of[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=nC[of[l]];nC[of[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,of[l],of[l+1]));return c}s(xLt,"bytePairEncode");iC.bytePairEncode=xLt});var cUe=q(ZV=>{"use strict";f();Object.defineProperty(ZV,"__esModule",{value:!0});ZV.makeTextEncoder=void 0;var whe=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},She=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},bLt=s(()=>typeof Buffer<"u"?new She:new whe,"makeTextEncoder");ZV.makeTextEncoder=bLt});var lUe=q(ez=>{"use strict";f();Object.defineProperty(ez,"__esModule",{value:!0});ez.LRUCache=void 0;var _he=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Rhe(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};ez.LRUCache=_he;var Rhe=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Phe=q(rz=>{"use strict";f();Object.defineProperty(rz,"__esModule",{value:!0});rz.TikTokenizer=void 0;var tz=aUe(),ILt=cUe(),TLt=lUe();function wLt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(wLt,"loadTikTokenBpe");function SLt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(SLt,"escapeRegExp");var khe=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,ILt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new TLt.LRUCache(i);let o=typeof e=="string"?wLt(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new tz.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>SLt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let d=(0,tz.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of d)r.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let d=l[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,c+=d.length,r.push(...p);else{let m=o-a;a+=m,c+=d.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,c+=d.length,r.push(h);else break;else{let g=(0,tz.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,c+=d.length;for(let A of g)r.push(A)}else{let A=o-a;a+=A,c+=d.length;for(let y=0;y<A;y++)r.push(g[y]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,n),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,A=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(A);){let y=g[0],E=this.cache.get(y);if(E)a+=E.length,c+=y.length,i.push(...E),l.set(a,c);else{let b=this.textEncoder.encode(y),w=this.encoder.get(b);if(w!==void 0)this.cache.set(y,[w]),a++,c+=y.length,i.push(w),l.set(a,c);else{let R=(0,tz.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(y,R),a+=R.length,c+=y.length;for(let D of R)i.push(D);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,d=0,p=0;for(let[m,h]of l)if(m>=u){d=m,p=h;break}if(d>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};rz.TikTokenizer=khe});var CUe=q(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.createTokenizer=Gc.createByEncoderName=Gc.createByModelName=Gc.getRegexByModel=Gc.getRegexByEncoder=Gc.getSpecialTokensByModel=Gc.getSpecialTokensByEncoder=Gc.MODEL_TO_ENCODING=void 0;var _Lt=Phe(),RLt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Gc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var nz="<|endoftext|>",uUe="<|fim_prefix|>",dUe="<|fim_middle|>",fUe="<|fim_suffix|>",pUe="<|endofprompt|>",z6="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",mUe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",kLt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],hUe=kLt.join("|");function Dhe(t){let e="";if(Gc.MODEL_TO_ENCODING.has(t))e=Gc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of RLt)if(t.startsWith(r)){e=n;break}return e}s(Dhe,"getEncoderFromModelName");async function PLt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(PLt,"fetchAndSaveFile");function Bhe(t){let e=new Map([[nz,50256]]);switch(t){case"o200k_base":e=new Map([[nz,199999],[pUe,200018]]);break;case"cl100k_base":e=new Map([[nz,100257],[uUe,100258],[dUe,100259],[fUe,100260],[pUe,100276]]);break;case"p50k_edit":e=new Map([[nz,50256],[uUe,50281],[dUe,50282],[fUe,50283]]);break;default:break}return e}s(Bhe,"getSpecialTokensByEncoder");Gc.getSpecialTokensByEncoder=Bhe;function DLt(t){let e=Dhe(t);return Bhe(e)}s(DLt,"getSpecialTokensByModel");Gc.getSpecialTokensByModel=DLt;function gUe(t){switch(t){case"o200k_base":return hUe;case"cl100k_base":return mUe;default:break}return z6}s(gUe,"getRegexByEncoder");Gc.getRegexByEncoder=gUe;function BLt(t){let e=Dhe(t);return gUe(e)}s(BLt,"getRegexByModel");Gc.getRegexByModel=BLt;async function NLt(t,e=null){return AUe(Dhe(t),e)}s(NLt,"createByModelName");Gc.createByModelName=NLt;async function AUe(t,e=null){let r,n,i=Bhe(t);switch(t){case"o200k_base":r=hUe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=mUe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=z6,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=z6,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=z6,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=z6,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await PLt(n,u),console.log(`Saved file to ${u}`)),yUe(u,i,r)}s(AUe,"createByEncoderName");Gc.createByEncoderName=AUe;function yUe(t,e,r,n=8192){return new _Lt.TikTokenizer(t,e,r,n)}s(yUe,"createTokenizer");Gc.createTokenizer=yUe});var vUe=q(Vc=>{"use strict";f();Object.defineProperty(Vc,"__esModule",{value:!0});Vc.createTokenizer=Vc.createByEncoderName=Vc.createByModelName=Vc.getSpecialTokensByModel=Vc.getSpecialTokensByEncoder=Vc.getRegexByModel=Vc.getRegexByEncoder=Vc.MODEL_TO_ENCODING=Vc.TikTokenizer=void 0;var LLt=Phe();Object.defineProperty(Vc,"TikTokenizer",{enumerable:!0,get:s(function(){return LLt.TikTokenizer},"get")});var FI=CUe();Object.defineProperty(Vc,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return FI.MODEL_TO_ENCODING},"get")});Object.defineProperty(Vc,"getRegexByEncoder",{enumerable:!0,get:s(function(){return FI.getRegexByEncoder},"get")});Object.defineProperty(Vc,"getRegexByModel",{enumerable:!0,get:s(function(){return FI.getRegexByModel},"get")});Object.defineProperty(Vc,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return FI.getSpecialTokensByEncoder},"get")});Object.defineProperty(Vc,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return FI.getSpecialTokensByModel},"get")});Object.defineProperty(Vc,"createByModelName",{enumerable:!0,get:s(function(){return FI.createByModelName},"get")});Object.defineProperty(Vc,"createByEncoderName",{enumerable:!0,get:s(function(){return FI.createByEncoderName},"get")});Object.defineProperty(Vc,"createTokenizer",{enumerable:!0,get:s(function(){return FI.createTokenizer},"get")})});var Hhe=q((I2n,WUe)=>{"use strict";f();WUe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var jUe=q((S2n,$Ue)=>{"use strict";f();var p6t=Hhe();function m6t(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=p6t(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(m6t,"parsePath");$Ue.exports=m6t});var JUe=q((k2n,KUe)=>{"use strict";f();var h6t=jUe();function g6t(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(g6t,"_interopDefaultLegacy");var A6t=g6t(h6t);function y6t(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(y6t,"getAugmentedNamespace");var VUe={},C6t="text/plain",v6t="us-ascii",GUe=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),E6t=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===v6t)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&d.push("base64"),(d.length>0||l&&l!==C6t)&&d.unshift(l),`data:${d.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function x6t(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return E6t(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];GUe(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])GUe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(x6t,"normalizeUrl");var b6t=Object.freeze({__proto__:null,default:x6t}),I6t=y6t(b6t);Object.defineProperty(VUe,"__esModule",{value:!0});var T6t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w6t=I6t,S6t=zUe(w6t),_6t=A6t.default,R6t=zUe(_6t);function zUe(t){return t&&t.__esModule?t:{default:t}}s(zUe,"_interopRequireDefault");var YUe=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":T6t(r))!=="object"&&(r={stripHash:!1}),e=(0,S6t.default)(e,r));var o=(0,R6t.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");YUe.MAX_INPUT_LENGTH=2048;var k6t=VUe.default=YUe;KUe.exports=k6t});var eqe=q((B2n,ZUe)=>{"use strict";f();var P6t=Hhe();function XUe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=P6t(t);if(t=t.substring(t.indexOf("://")+3),XUe(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(XUe,"isSsh");ZUe.exports=XUe});var nqe=q((M2n,rqe)=>{"use strict";f();var D6t=JUe(),tqe=eqe();function B6t(t){let e=D6t(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),tqe(e.protocols)||e.protocols.length===0&&tqe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(B6t,"gitUp");rqe.exports=B6t});var oqe=q((Q2n,iqe)=>{"use strict";f();var N6t=nqe();function Whe(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=N6t(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return Whe.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],d&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var A=o.length>a&&o[a+1]==="-"?a+1:a;o.length>A+2&&["raw","src","blob","tree","edit"].indexOf(o[A+1])>=0&&(n.filepathtype=o[A+1],n.ref=o[A+2],o.length>A+3&&(n.filepath=o.slice(A+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var y=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,E=y.exec(n.pathname);return E!=null&&(n.source="bitbucket-server",E[1]==="users"?n.owner="~"+E[2]:n.owner=E[2],n.organization=n.owner,n.name=E[3],o=E[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=F6t(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Whe,"gitUrlParse");Whe.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?L6t(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+M6t(t)+i;default:return t.href}};function L6t(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(L6t,"buildToken");function M6t(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(M6t,"buildPath");function F6t(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(F6t,"findLongestMatchingSubstring");iqe.exports=Whe});var xz=q((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var E=0,b=1;;){var w=t[e++];if(E+=(127&w)*b,b*=128,!(128&w))break}return E}s(n,"_");function i(){var E=n();return UTF8ArrayToString(t,(e+=E)-E,E)}s(i,"n");function o(E,b){if(E)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var d=n(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(d=n(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var A=n();A--;){var y=i();256&n()&&u.tlsExports.add(y)}else if(h===4)for(A=n();A--;)i(),y=i(),(3&n())==1&&u.weakImports.add(y);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,d){readAsync(c,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,d)=>e.slice(l,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let d=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let A=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),y=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,E=e.substr(y,100).split(`
`)[0],b,w=E.match(QUERY_WORD_REGEX)[0];switch(A){case 2:b=new RangeError(`Bad node name '${w}'`);break;case 3:b=new RangeError(`Bad field name '${w}'`);break;case 4:b=new RangeError(`Bad capture name @${w}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${y}: '${E}'...`),w="";break;default:b=new SyntaxError(`Bad syntax at offset ${y}: '${E}'...`),w=""}throw b.index=y,b.length=w.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let A=0;A<a;A++){let y=C._ts_query_capture_name_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");l[A]=UTF8ToString(y,E)}for(let A=0;A<o;A++){let y=C._ts_query_string_value_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");u[A]=UTF8ToString(y,E)}let d=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let A=0;A<c;A++){let y=C._ts_query_predicates_for_pattern(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");h[A]=[],g[A]=[];let b=[],w=y;for(let R=0;R<E;R++){let D=getValue(w,"i32");w+=SIZE_OF_INT;let N=getValue(w,"i32");if(w+=SIZE_OF_INT,D===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[N]});else if(D===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[N]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=b[0].value,Y=!0;switch(O){case"not-eq?":Y=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let U=b[1].name,X=b[2].name;g[A].push(function(K){let j,W;for(let J of K)J.name===U&&(j=J.node),J.name===X&&(W=J.node);return j===void 0||W===void 0||j.text===W.text===Y})}else{let U=b[1].name,X=b[2].value;g[A].push(function(K){for(let j of K)if(j.name===U)return j.node.text===X===Y;return!0})}break;case"not-match?":Y=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let ee=b[1].name,V=new RegExp(b[2].value);g[A].push(function(U){for(let X of U)if(X.name===ee)return V.test(X.node.text)===Y;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[A]||(d[A]={}),d[A][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let H=O==="is?"?p:m;H[A]||(H[A]={}),H[A][b[1].value]=b[2]?b[2].value:null;break;default:h[A].push({operator:O,operands:b.slice(1)})}b.length=0}}Object.freeze(d[A]),Object.freeze(p[A]),Object.freeze(m[A])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let d=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,A),this.textPredicates[h].every(y=>y(A))){u[d++]={pattern:h,captures:A};let y=this.setProperties[h];y&&(u[m].setProperties=y);let E=this.assertedProperties[h];E&&(u[m].assertedProperties=E);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=d,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let d=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(y=>y(d))){let y=d[A],E=this.setProperties[h];E&&(y.setProperties=E);let b=this.assertedProperties[h];b&&(y.assertedProperties=b);let w=this.refutedProperties[h];w&&(y.refutedProperties=w),u.push(y)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Rge=q((U4n,Gqe)=>{f();var _ge=require("fs"),Kz=require("path"),CF=Kz.join,yOt=Kz.dirname,$qe=_ge.accessSync&&function(t){try{_ge.accessSync(t)}catch{return!1}return!0}||_ge.existsSync||Kz.existsSync,jqe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function COt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(jqe).map(function(l){l in t||(t[l]=jqe[l])}),t.module_root||(t.module_root=vOt(__filename)),Kz.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=CF.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(COt,"bindings");Gqe.exports=COt;function vOt(t){for(var e=yOt(t),r;;){if(e==="."&&(e=process.cwd()),$qe(CF(e,"dist")))return CF(e,"dist");if($qe(CF(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=CF(e,"..")}}s(vOt,"getRoot")});var zqe=q((W4n,Vqe)=>{f();Vqe.exports=Rge()("node_sqlite3.node")});var Jqe=q(Kqe=>{f();var EOt=require("util");function xOt(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return EOt.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=Yqe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+Yqe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(xOt,"extendTrace");Kqe.extendTrace=xOt;function Yqe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(Yqe,"filter")});var tHe=q((Zqe,eHe)=>{f();var bOt=require("path"),Wm=zqe(),HD=require("events").EventEmitter;eHe.exports=Zqe=Wm;function WD(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new Jz(this,e,r);return t.call(this,i,n)}}s(WD,"normalizeMethod");function Pge(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(Pge,"inherits");Wm.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new af(t,e,r);let n;if(t=bOt.resolve(t),!Wm.cached.objects[t])n=Wm.cached.objects[t]=new af(t,e,r);else{n=Wm.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var af=Wm.Database,Jz=Wm.Statement,kge=Wm.Backup;Pge(af,HD);Pge(Jz,HD);Pge(kge,HD);af.prototype.prepare=WD(function(t,e){return e.length?t.bind.apply(t,e):t});af.prototype.run=WD(function(t,e){return t.run.apply(t,e).finalize(),this});af.prototype.get=WD(function(t,e){return t.get.apply(t,e).finalize(),this});af.prototype.all=WD(function(t,e){return t.all.apply(t,e).finalize(),this});af.prototype.each=WD(function(t,e){return t.each.apply(t,e).finalize(),this});af.prototype.map=WD(function(t,e){return t.map.apply(t,e).finalize(),this});af.prototype.backup=function(){let t;return arguments.length<=2?t=new kge(this,arguments[0],"main","main",!0,arguments[1]):t=new kge(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Wm.BUSY,Wm.LOCKED],t};Jz.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var Xqe=!1,Dge=["trace","profile","change"];af.prototype.addListener=af.prototype.on=function(t){let e=HD.prototype.addListener.apply(this,arguments);return Dge.indexOf(t)>=0&&this.configure(t,!0),e};af.prototype.removeListener=function(t){let e=HD.prototype.removeListener.apply(this,arguments);return Dge.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};af.prototype.removeAllListeners=function(t){let e=HD.prototype.removeAllListeners.apply(this,arguments);return Dge.indexOf(t)>=0&&this.configure(t,!1),e};Wm.verbose=function(){if(!Xqe){let t=Jqe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(af.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(Jz.prototype,e)}),Xqe=!0}return Wm}});var uY=q(Kc=>{"use strict";f();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.thenable=Kc.typedArray=Kc.stringArray=Kc.array=Kc.func=Kc.error=Kc.number=Kc.string=Kc.boolean=void 0;function TOt(t){return t===!0||t===!1}s(TOt,"boolean");Kc.boolean=TOt;function sHe(t){return typeof t=="string"||t instanceof String}s(sHe,"string");Kc.string=sHe;function wOt(t){return typeof t=="number"||t instanceof Number}s(wOt,"number");Kc.number=wOt;function SOt(t){return t instanceof Error}s(SOt,"error");Kc.error=SOt;function aHe(t){return typeof t=="function"}s(aHe,"func");Kc.func=aHe;function cHe(t){return Array.isArray(t)}s(cHe,"array");Kc.array=cHe;function _Ot(t){return cHe(t)&&t.every(e=>sHe(e))}s(_Ot,"stringArray");Kc.stringArray=_Ot;function ROt(t,e){return Array.isArray(t)&&t.every(e)}s(ROt,"typedArray");Kc.typedArray=ROt;function kOt(t){return t&&aHe(t.then)}s(kOt,"thenable");Kc.thenable=kOt});var Lge=q($m=>{"use strict";f();Object.defineProperty($m,"__esModule",{value:!0});$m.generateUuid=$m.parse=$m.isUUID=$m.v4=$m.empty=void 0;var xF=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},bF=class t extends xF{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};bF._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];bF._timeHighBits=["8","9","a","b"];$m.empty=new xF("00000000-0000-0000-0000-000000000000");function lHe(){return new bF}s(lHe,"v4");$m.v4=lHe;var POt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function uHe(t){return POt.test(t)}s(uHe,"isUUID");$m.isUUID=uHe;function DOt(t){if(!uHe(t))throw new Error("invalid uuid");return new xF(t)}s(DOt,"parse");$m.parse=DOt;function BOt(){return lHe().asHex()}s(BOt,"generateUuid");$m.generateUuid=BOt});var dHe=q(VI=>{"use strict";f();Object.defineProperty(VI,"__esModule",{value:!0});VI.attachPartialResult=VI.ProgressFeature=VI.attachWorkDone=void 0;var GI=di(),NOt=Lge(),P2=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(GI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(GI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(GI.WorkDoneProgress.type,this._token,{kind:"end"})}};P2.Instances=new Map;var dY=class extends P2{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new GI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},IF=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},fY=class extends IF{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new GI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function LOt(t,e){if(e===void 0||e.workDoneToken===void 0)return new IF;let r=e.workDoneToken;return delete e.workDoneToken,new P2(t,r)}s(LOt,"attachWorkDone");VI.attachWorkDone=LOt;var MOt=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(GI.WorkDoneProgressCancelNotification.type,r=>{let n=P2.Instances.get(r.token);(n instanceof dY||n instanceof fY)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new IF:new P2(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,NOt.generateUuid)();return this.connection.sendRequest(GI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new dY(this.connection,e))}else return Promise.resolve(new fY)}},"ProgressFeature");VI.ProgressFeature=MOt;var Mge;(function(t){t.type=new GI.ProgressType})(Mge||(Mge={}));var Fge=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Mge.type,this._token,e)}};function FOt(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Fge(t,r)}s(FOt,"attachPartialResult");VI.attachPartialResult=FOt});var fHe=q(pY=>{"use strict";f();Object.defineProperty(pY,"__esModule",{value:!0});pY.ConfigurationFeature=void 0;var OOt=di(),QOt=uY(),UOt=s(t=>class extends t{getConfiguration(e){return e?QOt.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(OOt.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");pY.ConfigurationFeature=UOt});var pHe=q(hY=>{"use strict";f();Object.defineProperty(hY,"__esModule",{value:!0});hY.WorkspaceFoldersFeature=void 0;var mY=di(),qOt=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new mY.Emitter,this.connection.onNotification(mY.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(mY.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(mY.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");hY.WorkspaceFoldersFeature=qOt});var mHe=q(gY=>{"use strict";f();Object.defineProperty(gY,"__esModule",{value:!0});gY.CallHierarchyFeature=void 0;var Oge=di(),HOt=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Oge.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Oge.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Oge.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");gY.CallHierarchyFeature=HOt});var Uge=q(zI=>{"use strict";f();Object.defineProperty(zI,"__esModule",{value:!0});zI.SemanticTokensBuilder=zI.SemanticTokensDiff=zI.SemanticTokensFeature=void 0;var AY=di(),WOt=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(AY.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=AY.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=AY.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=AY.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");zI.SemanticTokensFeature=WOt;var yY=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};zI.SemanticTokensDiff=yY;var Qge=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new yY(this._prevData,this._data).computeDiff()}:this.build()}};zI.SemanticTokensBuilder=Qge});var hHe=q(CY=>{"use strict";f();Object.defineProperty(CY,"__esModule",{value:!0});CY.ShowDocumentFeature=void 0;var $Ot=di(),jOt=s(t=>class extends t{showDocument(e){return this.connection.sendRequest($Ot.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");CY.ShowDocumentFeature=jOt});var gHe=q(vY=>{"use strict";f();Object.defineProperty(vY,"__esModule",{value:!0});vY.FileOperationsFeature=void 0;var jD=di(),GOt=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(jD.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(jD.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(jD.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(jD.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(jD.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(jD.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");vY.FileOperationsFeature=GOt});var AHe=q(EY=>{"use strict";f();Object.defineProperty(EY,"__esModule",{value:!0});EY.LinkedEditingRangeFeature=void 0;var VOt=di(),zOt=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(VOt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");EY.LinkedEditingRangeFeature=zOt});var yHe=q(xY=>{"use strict";f();Object.defineProperty(xY,"__esModule",{value:!0});xY.TypeHierarchyFeature=void 0;var qge=di(),YOt=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(qge.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=qge.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=qge.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");xY.TypeHierarchyFeature=YOt});var vHe=q(bY=>{"use strict";f();Object.defineProperty(bY,"__esModule",{value:!0});bY.InlineValueFeature=void 0;var CHe=di(),KOt=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(CHe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(CHe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");bY.InlineValueFeature=KOt});var xHe=q(IY=>{"use strict";f();Object.defineProperty(IY,"__esModule",{value:!0});IY.FoldingRangeFeature=void 0;var EHe=di(),JOt=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(EHe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=EHe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");IY.FoldingRangeFeature=JOt});var bHe=q(TY=>{"use strict";f();Object.defineProperty(TY,"__esModule",{value:!0});TY.InlayHintFeature=void 0;var Hge=di(),XOt=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Hge.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Hge.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Hge.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");TY.InlayHintFeature=XOt});var IHe=q(wY=>{"use strict";f();Object.defineProperty(wY,"__esModule",{value:!0});wY.DiagnosticFeature=void 0;var TF=di(),ZOt=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(TF.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(TF.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(TF.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(TF.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(TF.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");wY.DiagnosticFeature=ZOt});var $ge=q(SY=>{"use strict";f();Object.defineProperty(SY,"__esModule",{value:!0});SY.TextDocuments=void 0;var D2=di(),Wge=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new D2.Emitter,this._onDidOpen=new D2.Emitter,this._onDidClose=new D2.Emitter,this._onDidSave=new D2.Emitter,this._onWillSave=new D2.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=D2.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),D2.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};SY.TextDocuments=Wge});var Gge=q(GD=>{"use strict";f();Object.defineProperty(GD,"__esModule",{value:!0});GD.NotebookDocuments=GD.NotebookSyncFeature=void 0;var jm=di(),THe=$ge(),e7t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(jm.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(jm.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(jm.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(jm.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");GD.NotebookSyncFeature=e7t;var _Y=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,jm.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,jm.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,jm.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};_Y.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var jge=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof THe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new THe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new jm.Emitter,this._onDidChange=new jm.Emitter,this._onDidSave=new jm.Emitter,this._onDidClose=new jm.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new _Y,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],d=[],p=[],m=[];if(l.cells!==void 0){let E=l.cells;if(E.structure!==void 0){let b=E.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),E.structure.didOpen!==void 0)for(let w of E.structure.didOpen)r.openTextDocument({textDocument:w}),u.push(w.uri);if(E.structure.didClose)for(let w of E.structure.didClose)r.closeTextDocument({textDocument:w}),d.push(w.uri)}if(E.data!==void 0){let b=new Map(E.data.map(w=>[w.document,w]));for(let w=0;w<=o.cells.length;w++){let R=b.get(o.cells[w].document);if(R!==void 0){let D=o.cells.splice(w,1,R);if(p.push({old:D[0],new:R}),b.delete(R.document),b.size===0)break}}}if(E.textContent!==void 0)for(let b of E.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let E of u)g.push(this.getNotebookCell(E));let A=[];for(let E of d)A.push(this.getNotebookCell(E));let y=[];for(let E of m)y.push(this.getNotebookCell(E));(g.length>0||A.length>0||p.length>0||y.length>0)&&(h.cells={added:g,removed:A,changed:{data:p,textContent:y}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),jm.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};GD.NotebookDocuments=jge});var wHe=q(RY=>{"use strict";f();Object.defineProperty(RY,"__esModule",{value:!0});RY.MonikerFeature=void 0;var t7t=di(),r7t=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=t7t.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");RY.MonikerFeature=r7t});var Xge=q(Uo=>{"use strict";f();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.createConnection=Uo.combineFeatures=Uo.combineNotebooksFeatures=Uo.combineLanguagesFeatures=Uo.combineWorkspaceFeatures=Uo.combineWindowFeatures=Uo.combineClientFeatures=Uo.combineTracerFeatures=Uo.combineTelemetryFeatures=Uo.combineConsoleFeatures=Uo._NotebooksImpl=Uo._LanguagesImpl=Uo.BulkUnregistration=Uo.BulkRegistration=Uo.ErrorMessageTracker=void 0;var or=di(),Gm=uY(),zge=Lge(),li=dHe(),n7t=fHe(),i7t=pHe(),o7t=mHe(),s7t=Uge(),a7t=hHe(),c7t=gHe(),l7t=AHe(),u7t=yHe(),d7t=vHe(),f7t=xHe(),p7t=bHe(),m7t=IHe(),h7t=Gge(),g7t=wHe();function Vge(t){if(t!==null)return t}s(Vge,"null2Undefined");var Yge=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Uo.ErrorMessageTracker=Yge;var kY=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(or.MessageType.Error,e)}warn(e){this.send(or.MessageType.Warning,e)}info(e){this.send(or.MessageType.Info,e)}log(e){this.send(or.MessageType.Log,e)}debug(e){this.send(or.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(or.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,or.RAL)().console.error("Sending log message failed")})}},Kge=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:or.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(or.ShowMessageRequest.type,n).then(Vge)}showWarningMessage(e,...r){let n={type:or.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(or.ShowMessageRequest.type,n).then(Vge)}showInformationMessage(e,...r){let n={type:or.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(or.ShowMessageRequest.type,n).then(Vge)}},SHe=(0,a7t.ShowDocumentFeature)((0,li.ProgressFeature)(Kge)),_He;(function(t){function e(){return new PY}s(e,"create"),t.create=e})(_He||(Uo.BulkRegistration=_He={}));var PY=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Gm.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=zge.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},RHe;(function(t){function e(){return new wF(void 0,[])}s(e,"create"),t.create=e})(RHe||(Uo.BulkUnregistration=RHe={}));var wF=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(or.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Gm.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(or.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},DY=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof PY?this.registerMany(e):e instanceof wF?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Gm.string(r)?r:r.method,o=zge.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(or.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Gm.string(e)?e:e.method,i=zge.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(or.RegistrationRequest.type,o).then(a=>or.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(or.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(or.RegistrationRequest.type,r).then(()=>new wF(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},Jge=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(or.ApplyWorkspaceEditRequest.type,n)}},kHe=(0,c7t.FileOperationsFeature)((0,i7t.WorkspaceFoldersFeature)((0,n7t.ConfigurationFeature)(Jge))),BY=class{static{s(this,"TracerImpl")}constructor(){this._trace=or.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==or.Trace.Off&&this.connection.sendNotification(or.LogTraceNotification.type,{message:e,verbose:this._trace===or.Trace.Verbose?r:void 0}).catch(()=>{})}},NY=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(or.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},LY=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,li.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,li.attachPartialResult)(this.connection,r)}};Uo._LanguagesImpl=LY;var PHe=(0,f7t.FoldingRangeFeature)((0,g7t.MonikerFeature)((0,m7t.DiagnosticFeature)((0,p7t.InlayHintFeature)((0,d7t.InlineValueFeature)((0,u7t.TypeHierarchyFeature)((0,l7t.LinkedEditingRangeFeature)((0,s7t.SemanticTokensFeature)((0,o7t.CallHierarchyFeature)(LY))))))))),MY=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,li.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,li.attachPartialResult)(this.connection,r)}};Uo._NotebooksImpl=MY;var DHe=(0,h7t.NotebookSyncFeature)(MY);function BHe(t,e){return function(r){return e(t(r))}}s(BHe,"combineConsoleFeatures");Uo.combineConsoleFeatures=BHe;function NHe(t,e){return function(r){return e(t(r))}}s(NHe,"combineTelemetryFeatures");Uo.combineTelemetryFeatures=NHe;function LHe(t,e){return function(r){return e(t(r))}}s(LHe,"combineTracerFeatures");Uo.combineTracerFeatures=LHe;function MHe(t,e){return function(r){return e(t(r))}}s(MHe,"combineClientFeatures");Uo.combineClientFeatures=MHe;function FHe(t,e){return function(r){return e(t(r))}}s(FHe,"combineWindowFeatures");Uo.combineWindowFeatures=FHe;function OHe(t,e){return function(r){return e(t(r))}}s(OHe,"combineWorkspaceFeatures");Uo.combineWorkspaceFeatures=OHe;function QHe(t,e){return function(r){return e(t(r))}}s(QHe,"combineLanguagesFeatures");Uo.combineLanguagesFeatures=QHe;function UHe(t,e){return function(r){return e(t(r))}}s(UHe,"combineNotebooksFeatures");Uo.combineNotebooksFeatures=UHe;function A7t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,BHe),tracer:r(t.tracer,e.tracer,LHe),telemetry:r(t.telemetry,e.telemetry,NHe),client:r(t.client,e.client,MHe),window:r(t.window,e.window,FHe),workspace:r(t.workspace,e.workspace,OHe),languages:r(t.languages,e.languages,QHe),notebooks:r(t.notebooks,e.notebooks,UHe)}}s(A7t,"combineFeatures");Uo.combineFeatures=A7t;function y7t(t,e,r){let n=r&&r.console?new(r.console(kY)):new kY,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(BY)):new BY,a=r&&r.telemetry?new(r.telemetry(NY)):new NY,c=r&&r.client?new(r.client(DY)):new DY,l=r&&r.window?new(r.window(SHe)):new SHe,u=r&&r.workspace?new(r.workspace(kHe)):new kHe,d=r&&r.languages?new(r.languages(PHe)):new PHe,p=r&&r.notebooks?new(r.notebooks(DHe)):new DHe,m=[n,o,a,c,l,u,d,p];function h(b){return b instanceof Promise?b:Gm.thenable(b)?new Promise((w,R)=>{b.then(D=>w(D),D=>R(D))}):Promise.resolve(b)}s(h,"asPromise");let g,A,y,E={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,...w)=>i.sendRequest(Gm.string(b)?b:b.method,...w),"sendRequest"),onRequest:s((b,w)=>i.onRequest(b,w),"onRequest"),sendNotification:s((b,w)=>{let R=Gm.string(b)?b:b.method;return i.sendNotification(R,w)},"sendNotification"),onNotification:s((b,w)=>i.onNotification(b,w),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(A=b,{dispose:s(()=>{A=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(or.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(or.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(or.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(or.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(or.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(or.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(or.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(or.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(or.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(or.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(or.HoverRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(or.CompletionRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(or.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(or.SignatureHelpRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(or.DeclarationRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDeclaration"),onDefinition:s(b=>i.onRequest(or.DefinitionRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(or.TypeDefinitionRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(or.ImplementationRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onImplementation"),onReferences:s(b=>i.onRequest(or.ReferencesRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(or.DocumentHighlightRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(or.DocumentSymbolRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(or.WorkspaceSymbolRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(or.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(or.CodeActionRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(or.CodeActionResolveRequest.type,(w,R)=>b(w,R)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(or.CodeLensRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(or.CodeLensResolveRequest.type,(w,R)=>b(w,R)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(or.DocumentFormattingRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(or.DocumentRangeFormattingRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(or.DocumentOnTypeFormattingRequest.type,(w,R)=>b(w,R)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(or.RenameRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(or.PrepareRenameRequest.type,(w,R)=>b(w,R)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(or.DocumentLinkRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(or.DocumentLinkResolveRequest.type,(w,R)=>b(w,R)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(or.DocumentColorRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(or.ColorPresentationRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(or.FoldingRangeRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(or.SelectionRangeRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),(0,li.attachPartialResult)(i,w))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(or.ExecuteCommandRequest.type,(w,R)=>b(w,R,(0,li.attachWorkDone)(i,w),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(E);return i.onRequest(or.InitializeRequest.type,b=>{e.initialize(b),Gm.string(b.trace)&&(o.trace=or.Trace.fromString(b.trace));for(let w of m)w.initialize(b.capabilities);if(A){let w=A(b,new or.CancellationTokenSource().token,(0,li.attachWorkDone)(i,b),void 0);return h(w).then(R=>{if(R instanceof or.ResponseError)return R;let D=R;D||(D={capabilities:{}});let N=D.capabilities;N||(N={},D.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Gm.number(E.__textDocumentSync)?E.__textDocumentSync:or.TextDocumentSyncKind.None:!Gm.number(N.textDocumentSync)&&!Gm.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Gm.number(E.__textDocumentSync)?E.__textDocumentSync:or.TextDocumentSyncKind.None);for(let O of m)O.fillServerCapabilities(N);return D})}else{let w={capabilities:{textDocumentSync:or.TextDocumentSyncKind.None}};for(let R of m)R.fillServerCapabilities(w.capabilities);return w}}),i.onRequest(or.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new or.CancellationTokenSource().token)}),i.onNotification(or.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(or.SetTraceNotification.type,b=>{o.trace=or.Trace.fromString(b.value)}),E}s(y7t,"createConnection");Uo.createConnection=y7t});var qHe=q(i0=>{"use strict";f();Object.defineProperty(i0,"__esModule",{value:!0});i0.resolveModulePath=i0.FileSystem=i0.resolveGlobalYarnPath=i0.resolveGlobalNodePath=i0.resolve=i0.uriToFilePath=void 0;var C7t=require("url"),Yg=require("path"),Zge=require("fs"),nAe=require("child_process");function v7t(t){let e=C7t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return Yg.normalize(r.join("/"))}s(v7t,"uriToFilePath");i0.uriToFilePath=v7t;function eAe(){return process.platform==="win32"}s(eAe,"isWindows");function FY(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(d=>u[d]=l[d]),e&&Zge.existsSync(e)&&(u[i]?u[i]=e+Yg.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,nAe.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(d.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{c(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){c(d)}})}s(FY,"resolve");i0.resolve=FY;function tAe(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};eAe()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,nAe.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?eAe()?Yg.join(a,"node_modules"):Yg.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(tAe,"resolveGlobalNodePath");i0.resolveGlobalNodePath=tAe;function E7t(t){let e="yarn",r={encoding:"utf8"};eAe()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,nAe.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return Yg.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(E7t,"resolveGlobalYarnPath");i0.resolveGlobalYarnPath=E7t;var rAe;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Zge.existsSync(__filename.toUpperCase())||!Zge.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?Yg.normalize(o).indexOf(Yg.normalize(i))===0:Yg.normalize(o).toLowerCase().indexOf(Yg.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(rAe||(i0.FileSystem=rAe={}));function x7t(t,e,r,n){return r?(Yg.isAbsolute(r)||(r=Yg.join(t,r)),FY(e,r,r,n).then(i=>rAe.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>FY(e,tAe(n),t,n))):FY(e,tAe(n),t,n)}s(x7t,"resolveModulePath");i0.resolveModulePath=x7t});var iAe=q((oBn,HHe)=>{"use strict";f();HHe.exports=di()});var WHe=q(OY=>{"use strict";f();Object.defineProperty(OY,"__esModule",{value:!0});OY.InlineCompletionFeature=void 0;var b7t=di(),I7t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(b7t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");OY.InlineCompletionFeature=I7t});var GHe=q(bd=>{"use strict";f();var T7t=bd&&bd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jHe=bd&&bd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&T7t(e,t,r)};Object.defineProperty(bd,"__esModule",{value:!0});bd.ProposedFeatures=bd.NotebookDocuments=bd.TextDocuments=bd.SemanticTokensBuilder=void 0;var w7t=Uge();Object.defineProperty(bd,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return w7t.SemanticTokensBuilder},"get")});var S7t=WHe();jHe(di(),bd);var _7t=$ge();Object.defineProperty(bd,"TextDocuments",{enumerable:!0,get:s(function(){return _7t.TextDocuments},"get")});var R7t=Gge();Object.defineProperty(bd,"NotebookDocuments",{enumerable:!0,get:s(function(){return R7t.NotebookDocuments},"get")});jHe(Xge(),bd);var $He;(function(t){t.all={__brand:"features",languages:S7t.InlineCompletionFeature}})($He||(bd.ProposedFeatures=$He={}))});var Jc=q(Vm=>{"use strict";f();var k7t=Vm&&Vm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KHe=Vm&&Vm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&k7t(e,t,r)};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.createConnection=Vm.Files=void 0;var VHe=require("node:util"),oAe=uY(),P7t=Xge(),SF=qHe(),B2=iAe();KHe(iAe(),Vm);KHe(GHe(),Vm);var zHe;(function(t){t.uriToFilePath=SF.uriToFilePath,t.resolveGlobalNodePath=SF.resolveGlobalNodePath,t.resolveGlobalYarnPath=SF.resolveGlobalYarnPath,t.resolve=SF.resolve,t.resolveModulePath=SF.resolveModulePath})(zHe||(Vm.Files=zHe={}));var YHe;function QY(){if(YHe!==void 0)try{YHe.end()}catch{}}s(QY,"endProtocolConnection");var VD=!1,JHe;function D7t(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(JHe=setInterval(()=>{try{process.kill(n,0)}catch{QY(),process.exit(VD?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(D7t,"setupExitTimer");D7t();var B7t={initialize:s(t=>{let e=t.processId;oAe.number(e)&&JHe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(VD?0:1)}},3e3)},"initialize"),get shutdownReceived(){return VD},set shutdownReceived(t){VD=t},exit:s(t=>{QY(),process.exit(t)},"exit")};function N7t(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),B2.ConnectionStrategy.is(t)||B2.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),L7t(o,a,c,i)}s(N7t,"createConnection");Vm.createConnection=N7t;function L7t(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new B2.IPCMessageReader(process),e=new B2.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,B2.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,B2.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(oAe.func(t.read)&&oAe.func(t.on)){let l=t;l.on("end",()=>{QY(),process.exit(VD?0:1)}),l.on("close",()=>{QY(),process.exit(VD?0:1)})}let c=s(l=>{let u=(0,B2.createProtocolConnection)(t,e,l,r);return i&&M7t(l),u},"connectionFactory");return(0,P7t.createConnection)(c,B7t,n)}s(L7t,"_createConnection");function M7t(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,VHe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,VHe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(M7t,"patchConsole")});var Kg=q((ABn,XHe)=>{"use strict";f();XHe.exports=Jc()});var qje=q((K9n,Uje)=>{"use strict";f();Uje.exports=Oje;function Oje(t,e,r){t instanceof RegExp&&(t=Fje(t,r)),e instanceof RegExp&&(e=Fje(e,r));var n=Qje(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(Oje,"balanced");function Fje(t,e){var r=e.match(t);return r?r[0]:null}s(Fje,"maybeMatch");Oje.range=Qje;function Qje(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),d=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;d>=0&&!c;)d==l?(n.push(d),l=r.indexOf(t,d+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(Qje,"range")});var Yje=q((Z9n,zje)=>{f();var Hje=qje();zje.exports=_Qt;var Wje="\0SLASH"+Math.random()+"\0",$je="\0OPEN"+Math.random()+"\0",cye="\0CLOSE"+Math.random()+"\0",jje="\0COMMA"+Math.random()+"\0",Gje="\0PERIOD"+Math.random()+"\0";function aye(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(aye,"numeric");function wQt(t){return t.split("\\\\").join(Wje).split("\\{").join($je).split("\\}").join(cye).split("\\,").join(jje).split("\\.").join(Gje)}s(wQt,"escapeBraces");function SQt(t){return t.split(Wje).join("\\").split($je).join("{").split(cye).join("}").split(jje).join(",").split(Gje).join(".")}s(SQt,"unescapeBraces");function Vje(t){if(!t)return[""];var e=[],r=Hje("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=Vje(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(Vje,"parseCommaParts");function _Qt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),OF(wQt(t),!0).map(SQt)):[]}s(_Qt,"expandTop");function RQt(t){return"{"+t+"}"}s(RQt,"embrace");function kQt(t){return/^-?0\d/.test(t)}s(kQt,"isPadded");function PQt(t,e){return t<=e}s(PQt,"lte");function DQt(t,e){return t>=e}s(DQt,"gte");function OF(t,e){var r=[],n=Hje("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?OF(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=l||u,p=n.body.indexOf(",")>=0;if(!d&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+cye+n.post,OF(t)):[t];var m;if(d)m=n.body.split(/\.\./);else if(m=Vje(n.body),m.length===1&&(m=OF(m[0],!1).map(RQt),m.length===1))return o.map(function(V){return n.pre+m[0]+V});var h;if(d){var g=aye(m[0]),A=aye(m[1]),y=Math.max(m[0].length,m[1].length),E=m.length==3?Math.abs(aye(m[2])):1,b=PQt,w=A<g;w&&(E*=-1,b=DQt);var R=m.some(kQt);h=[];for(var D=g;b(D,A);D+=E){var N;if(u)N=String.fromCharCode(D),N==="\\"&&(N="");else if(N=String(D),R){var O=y-N.length;if(O>0){var Y=new Array(O+1).join("0");D<0?N="-"+Y+N.slice(1):N=Y+N}}h.push(N)}}else{h=[];for(var ee=0;ee<m.length;ee++)h.push.apply(h,OF(m[ee],!1))}for(var ee=0;ee<h.length;ee++)for(var a=0;a<o.length;a++){var c=i+h[ee]+o[a];(!e||d||c)&&r.push(c)}}return r}s(OF,"expand")});var ba=q((Yii,pYe)=>{f();pYe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var $o=q((Jii,mYe)=>{"use strict";f();var Ua=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},UCe=class extends Ua{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},qCe=class extends Ua{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},HCe=class extends Ua{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},WCe=class extends Ua{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},$Ce=class extends Ua{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},jCe=class extends Ua{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},GCe=class extends Ua{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},kX=class extends Ua{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},VCe=class extends kX{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},zCe=class extends Ua{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},YCe=class extends Ua{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},KCe=class extends Ua{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},JCe=class extends Ua{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},XCe=class extends Ua{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},ZCe=class extends Ua{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},e1e=class extends Ua{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},t1e=class extends Ua{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},r1e=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},n1e=class extends Ua{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},i1e=class extends Ua{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},o1e=class extends Ua{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},s1e=class extends Ua{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};mYe.exports={AbortError:kX,HTTPParserError:r1e,UndiciError:Ua,HeadersTimeoutError:qCe,HeadersOverflowError:HCe,BodyTimeoutError:WCe,RequestContentLengthMismatchError:YCe,ConnectTimeoutError:UCe,ResponseStatusCodeError:$Ce,InvalidArgumentError:jCe,InvalidReturnValueError:GCe,RequestAbortedError:VCe,ClientDestroyedError:JCe,ClientClosedError:XCe,InformationalError:zCe,SocketError:ZCe,NotSupportedError:e1e,ResponseContentLengthMismatchError:KCe,BalancedPoolMissingUpstreamError:t1e,ResponseExceededMaxSizeError:n1e,RequestRetryError:i1e,ResponseError:o1e,SecureProxyConnectionError:s1e}});var DX=q((eoi,hYe)=>{"use strict";f();var PX={},a1e=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<a1e.length;++t){let e=a1e[t],r=e.toLowerCase();PX[e]=PX[r]=r}Object.setPrototypeOf(PX,null);hYe.exports={wellknownHeaderNames:a1e,headerNameLowerCasedRecord:PX}});var CYe=q((roi,yYe)=>{"use strict";f();var{wellknownHeaderNames:gYe,headerNameLowerCasedRecord:r$t}=DX(),c1e=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},BX=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new c1e(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},AYe=new BX;for(let t=0;t<gYe.length;++t){let e=r$t[gYe[t]];AYe.insert(e,e)}yYe.exports={TernarySearchTree:BX,tree:AYe}});var Ni=q((ooi,LYe)=>{"use strict";f();var gO=require("node:assert"),{kDestroyed:EYe,kBodyUsed:U3,kListeners:l1e,kBody:vYe}=ba(),{IncomingMessage:n$t}=require("node:http"),MX=require("node:stream"),i$t=require("node:net"),{Blob:o$t}=require("node:buffer"),s$t=require("node:util"),{stringify:a$t}=require("node:querystring"),{EventEmitter:c$t}=require("node:events"),{InvalidArgumentError:eu}=$o(),{headerNameLowerCasedRecord:l$t}=DX(),{tree:xYe}=CYe(),[u$t,d$t]=process.versions.node.split(".").map(t=>Number(t)),LX=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[vYe]=e,this[U3]=!1}async*[Symbol.asyncIterator](){gO(!this[U3],"disturbed"),this[U3]=!0,yield*this[vYe]}};function f$t(t){return FX(t)?(SYe(t)===0&&t.on("data",function(){gO(!1)}),typeof t.readableDidRead!="boolean"&&(t[U3]=!1,c$t.prototype.on.call(t,"data",function(){this[U3]=!0})),t):t&&typeof t.pipeTo=="function"?new LX(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&wYe(t)?new LX(t):t}s(f$t,"wrapRequestBody");function p$t(){}s(p$t,"nop");function FX(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(FX,"isStream");function bYe(t){if(t===null)return!1;if(t instanceof o$t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(bYe,"isBlobLike");function m$t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=a$t(e);return r&&(t+="?"+r),t}s(m$t,"buildURL");function IYe(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(IYe,"isValidPort");function NX(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(NX,"isHttpOrHttpsPrefixed");function TYe(t){if(typeof t=="string"){if(t=new URL(t),!NX(t.origin||t.protocol))throw new eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new eu("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&IYe(t.port)===!1)throw new eu("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new eu("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new eu("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new eu("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new eu("Invalid URL origin: the origin must be a string or null/undefined.");if(!NX(t.origin||t.protocol))throw new eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!NX(t.origin||t.protocol))throw new eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(TYe,"parseURL");function h$t(t){if(t=TYe(t),t.pathname!=="/"||t.search||t.hash)throw new eu("invalid url");return t}s(h$t,"parseOrigin");function g$t(t){if(t[0]==="["){let r=t.indexOf("]");return gO(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(g$t,"getHostname");function A$t(t){if(!t)return null;gO(typeof t=="string");let e=g$t(t);return i$t.isIP(e)?"":e}s(A$t,"getServerName");function y$t(t){return JSON.parse(JSON.stringify(t))}s(y$t,"deepClone");function C$t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(C$t,"isAsyncIterable");function wYe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(wYe,"isIterable");function SYe(t){if(t==null)return 0;if(FX(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(bYe(t))return t.size!=null?t.size:null;if(kYe(t))return t.byteLength}return null}s(SYe,"bodyLength");function _Ye(t){return t&&!!(t.destroyed||t[EYe]||MX.isDestroyed?.(t))}s(_Ye,"isDestroyed");function v$t(t,e){t==null||!FX(t)||_Ye(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===n$t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[EYe]=!0))}s(v$t,"destroy");var E$t=/timeout=(\d+)/;function x$t(t){let e=t.toString().match(E$t);return e?parseInt(e[1],10)*1e3:null}s(x$t,"parseKeepAliveTimeout");function RYe(t){return typeof t=="string"?l$t[t]??t.toLowerCase():xYe.lookup(t)??t.toString("latin1").toLowerCase()}s(RYe,"headerNameToString");function b$t(t){return xYe.lookup(t)??t.toString("latin1").toLowerCase()}s(b$t,"bufferToLowerCasedHeaderName");function I$t(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=RYe(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(I$t,"parseHeaders");function T$t(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(T$t,"parseRawHeaders");function kYe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(kYe,"isBuffer");function w$t(t,e,r){if(!t||typeof t!="object")throw new eu("handler must be an object");if(typeof t.onConnect!="function")throw new eu("invalid onConnect method");if(typeof t.onError!="function")throw new eu("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new eu("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new eu("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new eu("invalid onHeaders method");if(typeof t.onData!="function")throw new eu("invalid onData method");if(typeof t.onComplete!="function")throw new eu("invalid onComplete method")}}s(w$t,"validateHandler");function S$t(t){return!!(t&&(MX.isDisturbed(t)||t[U3]))}s(S$t,"isDisturbed");function _$t(t){return!!(t&&MX.isErrored(t))}s(_$t,"isErrored");function R$t(t){return!!(t&&MX.isReadable(t))}s(R$t,"isReadable");function k$t(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(k$t,"getSocketInfo");function P$t(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(P$t,"ReadableStreamFrom");function D$t(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(D$t,"isFormDataLike");function B$t(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(B$t,"addAbortListener");var N$t=typeof String.prototype.toWellFormed=="function",L$t=typeof String.prototype.isWellFormed=="function";function PYe(t){return N$t?`${t}`.toWellFormed():s$t.toUSVString(t)}s(PYe,"toUSVString");function M$t(t){return L$t?`${t}`.isWellFormed():PYe(t)===`${t}`}s(M$t,"isUSVString");function DYe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(DYe,"isTokenCharCode");function F$t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!DYe(t.charCodeAt(e)))return!1;return!0}s(F$t,"isValidHTTPToken");var O$t=/[^\t\x20-\x7e\x80-\xff]/;function Q$t(t){return!O$t.test(t)}s(Q$t,"isValidHeaderValue");function U$t(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(U$t,"parseRangeHeader");function q$t(t,e,r){return(t[l1e]??=[]).push([e,r]),t.on(e,r),t}s(q$t,"addListener");function H$t(t){for(let[e,r]of t[l1e]??[])t.removeListener(e,r);t[l1e]=null}s(H$t,"removeAllListeners");function W$t(t,e,r){try{e.onError(r),gO(e.aborted)}catch(n){t.emit("error",n)}}s(W$t,"errorRequest");var BYe=Object.create(null);BYe.enumerable=!0;var u1e={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},NYe={...u1e,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(u1e,null);Object.setPrototypeOf(NYe,null);LYe.exports={kEnumerableProperty:BYe,nop:p$t,isDisturbed:S$t,isErrored:_$t,isReadable:R$t,toUSVString:PYe,isUSVString:M$t,isBlobLike:bYe,parseOrigin:h$t,parseURL:TYe,getServerName:A$t,isStream:FX,isIterable:wYe,isAsyncIterable:C$t,isDestroyed:_Ye,headerNameToString:RYe,bufferToLowerCasedHeaderName:b$t,addListener:q$t,removeAllListeners:H$t,errorRequest:W$t,parseRawHeaders:T$t,parseHeaders:I$t,parseKeepAliveTimeout:x$t,destroy:v$t,bodyLength:SYe,deepClone:y$t,ReadableStreamFrom:P$t,isBuffer:kYe,validateHandler:w$t,getSocketInfo:k$t,isFormDataLike:D$t,buildURL:m$t,addAbortListener:B$t,isValidHTTPToken:F$t,isValidHeaderValue:Q$t,isTokenCharCode:DYe,parseRangeHeader:U$t,normalizedMethodRecordsBase:u1e,normalizedMethodRecords:NYe,isValidPort:IYe,isHttpOrHttpsPrefixed:NX,nodeMajor:u$t,nodeMinor:d$t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:f$t}});var q3=q((coi,FYe)=>{"use strict";f();var Ko=require("node:diagnostics_channel"),f1e=require("node:util"),OX=f1e.debuglog("undici"),d1e=f1e.debuglog("fetch"),pR=f1e.debuglog("websocket"),MYe=!1,$$t={beforeConnect:Ko.channel("undici:client:beforeConnect"),connected:Ko.channel("undici:client:connected"),connectError:Ko.channel("undici:client:connectError"),sendHeaders:Ko.channel("undici:client:sendHeaders"),create:Ko.channel("undici:request:create"),bodySent:Ko.channel("undici:request:bodySent"),headers:Ko.channel("undici:request:headers"),trailers:Ko.channel("undici:request:trailers"),error:Ko.channel("undici:request:error"),open:Ko.channel("undici:websocket:open"),close:Ko.channel("undici:websocket:close"),socketError:Ko.channel("undici:websocket:socket_error"),ping:Ko.channel("undici:websocket:ping"),pong:Ko.channel("undici:websocket:pong")};if(OX.enabled||d1e.enabled){let t=d1e.enabled?d1e:OX;Ko.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Ko.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Ko.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Ko.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Ko.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Ko.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Ko.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),MYe=!0}if(pR.enabled){if(!MYe){let t=OX.enabled?OX:pR;Ko.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Ko.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Ko.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Ko.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Ko.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;pR("connection opened %s%s",e,r?`:${r}`:"")}),Ko.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;pR("closed connection to %s - %s %s",e.url,r,n)}),Ko.channel("undici:websocket:socket_error").subscribe(t=>{pR("connection errored - %s",t.message)}),Ko.channel("undici:websocket:ping").subscribe(t=>{pR("ping received")}),Ko.channel("undici:websocket:pong").subscribe(t=>{pR("pong received")})}FYe.exports={channels:$$t}});var HYe=q((uoi,qYe)=>{"use strict";f();var{InvalidArgumentError:qa,NotSupportedError:j$t}=$o(),cE=require("node:assert"),{isValidHTTPToken:UYe,isValidHeaderValue:OYe,isStream:G$t,destroy:V$t,isBuffer:z$t,isFormDataLike:Y$t,isIterable:K$t,isBlobLike:J$t,buildURL:X$t,validateHandler:Z$t,getServerName:ejt,normalizedMethodRecords:tjt}=Ni(),{channels:EC}=q3(),{headerNameLowerCasedRecord:QYe}=DX(),rjt=/[^\u0021-\u00ff]/,dh=Symbol("handler"),p1e=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:A},y){if(typeof r!="string")throw new qa("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new qa("path must be an absolute URL or start with a slash");if(rjt.test(r))throw new qa("invalid request path");if(typeof n!="string")throw new qa("method must be a string");if(tjt[n]===void 0&&!UYe(n))throw new qa("invalid request method");if(u&&typeof u!="string")throw new qa("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new qa("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new qa("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new qa("invalid reset");if(g!=null&&typeof g!="boolean")throw new qa("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(G$t(i)){this.body=i;let E=this.body._readableState;(!E||!E.autoDestroy)&&(this.endHandler=s(function(){V$t(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(z$t(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(Y$t(i)||K$t(i)||J$t(i))this.body=i;else throw new qa("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?X$t(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new qa("headers array must be even");for(let E=0;E<o.length;E+=2)QX(this,o[E],o[E+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let E of o){if(!Array.isArray(E)||E.length!==2)throw new qa("headers must be in key-value pair format");QX(this,E[0],E[1])}else{let E=Object.keys(o);for(let b=0;b<E.length;++b)QX(this,E[b],o[E[b]])}else if(o!=null)throw new qa("headers must be an object or an array");Z$t(y,n,u),this.servername=A||ejt(this.host),this[dh]=y,EC.create.hasSubscribers&&EC.create.publish({request:this})}onBodySent(e){if(this[dh].onBodySent)try{return this[dh].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(EC.bodySent.hasSubscribers&&EC.bodySent.publish({request:this}),this[dh].onRequestSent)try{return this[dh].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(cE(!this.aborted),cE(!this.completed),this.error)e(this.error);else return this.abort=e,this[dh].onConnect(e)}onResponseStarted(){return this[dh].onResponseStarted?.()}onHeaders(e,r,n,i){cE(!this.aborted),cE(!this.completed),EC.headers.hasSubscribers&&EC.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[dh].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){cE(!this.aborted),cE(!this.completed);try{return this[dh].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return cE(!this.aborted),cE(!this.completed),this[dh].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),cE(!this.aborted),this.completed=!0,EC.trailers.hasSubscribers&&EC.trailers.publish({request:this,trailers:e});try{return this[dh].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),EC.error.hasSubscribers&&EC.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[dh].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return QX(this,e,r),this}};function QX(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new qa(`invalid ${e} header`);if(r===void 0)return;let n=QYe[e];if(n===void 0&&(n=e.toLowerCase(),QYe[n]===void 0&&!UYe(n)))throw new qa("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!OYe(r[o]))throw new qa(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new qa(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!OYe(r))throw new qa(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new qa("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new qa("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new qa(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new qa("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new j$t("expect header not supported");t.headers.push(e,r)}}}s(QX,"processHeader");qYe.exports=p1e});var AO=q((poi,WYe)=>{"use strict";f();var njt=require("node:events"),UX=class extends njt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new m1e(this,n)}},m1e=class extends UX{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};WYe.exports=UX});var j3=q((goi,$Ye)=>{"use strict";f();var ijt=AO(),{ClientDestroyedError:h1e,ClientClosedError:ojt,InvalidArgumentError:H3}=$o(),{kDestroy:sjt,kClose:ajt,kClosed:yO,kDestroyed:W3,kDispatch:g1e,kInterceptors:mR}=ba(),lE=Symbol("onDestroyed"),$3=Symbol("onClosed"),qX=Symbol("Intercepted Dispatch"),A1e=class extends ijt{static{s(this,"DispatcherBase")}constructor(){super(),this[W3]=!1,this[lE]=null,this[yO]=!1,this[$3]=[]}get destroyed(){return this[W3]}get closed(){return this[yO]}get interceptors(){return this[mR]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[mR][r]!="function")throw new H3("interceptor must be an function")}this[mR]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new H3("invalid callback");if(this[W3]){queueMicrotask(()=>e(new h1e,null));return}if(this[yO]){this[$3]?this[$3].push(e):queueMicrotask(()=>e(null,null));return}this[yO]=!0,this[$3].push(e);let r=s(()=>{let n=this[$3];this[$3]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[ajt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new H3("invalid callback");if(this[W3]){this[lE]?this[lE].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new h1e),this[W3]=!0,this[lE]=this[lE]||[],this[lE].push(r);let n=s(()=>{let i=this[lE];this[lE]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[sjt](e).then(()=>{queueMicrotask(n)})}[qX](e,r){if(!this[mR]||this[mR].length===0)return this[qX]=this[g1e],this[g1e](e,r);let n=this[g1e].bind(this);for(let i=this[mR].length-1;i>=0;i--)n=this[mR][i](n);return this[qX]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new H3("handler must be an object");try{if(!e||typeof e!="object")throw new H3("opts must be an object.");if(this[W3]||this[lE])throw new h1e;if(this[yO])throw new ojt;return this[qX](e,r)}catch(n){if(typeof r.onError!="function")throw new H3("invalid onError method");return r.onError(n),!1}}};$Ye.exports=A1e});var I1e=q((Coi,zYe)=>{"use strict";f();var G3=0,y1e=1e3,C1e=(y1e>>1)-1,uE,v1e=Symbol("kFastTimer"),dE=[],E1e=-2,x1e=-1,GYe=0,jYe=1;function b1e(){G3+=C1e;let t=0,e=dE.length;for(;t<e;){let r=dE[t];r._state===GYe?(r._idleStart=G3-C1e,r._state=jYe):r._state===jYe&&G3>=r._idleStart+r._idleTimeout&&(r._state=x1e,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===x1e?(r._state=E1e,--e!==0&&(dE[t]=dE[e])):++t}dE.length=e,dE.length!==0&&VYe()}s(b1e,"onTick");function VYe(){uE?uE.refresh():(clearTimeout(uE),uE=setTimeout(b1e,C1e),uE.unref&&uE.unref())}s(VYe,"refreshTimeout");var HX=class{static{s(this,"FastTimer")}[v1e]=!0;_state=E1e;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===E1e&&dE.push(this),(!uE||dE.length===1)&&VYe(),this._state=GYe}clear(){this._state=x1e,this._idleStart=-1}};zYe.exports={setTimeout(t,e,r){return e<=y1e?setTimeout(t,e,r):new HX(t,e,r)},clearTimeout(t){t[v1e]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new HX(t,e,r)},clearFastTimeout(t){t.clear()},now(){return G3},tick(t=0){G3+=t-y1e+1,b1e(),b1e()},reset(){G3=0,dE.length=0,clearTimeout(uE),uE=null},kFastTimer:v1e}});var CO=q((Ioi,ZYe)=>{"use strict";f();var cjt=require("node:net"),YYe=require("node:assert"),XYe=Ni(),{InvalidArgumentError:ljt,ConnectTimeoutError:ujt}=$o(),WX=I1e();function KYe(){}s(KYe,"noop");var T1e,w1e;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?w1e=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:w1e=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function djt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new ljt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new w1e(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:A},y){let E;if(p==="https:"){T1e||(T1e=require("node:tls")),h=h||a.servername||XYe.getServerName(d)||null;let w=h||u;YYe(w);let R=i||c.get(w)||null;m=m||443,E=T1e.connect({highWaterMark:16384,...a,servername:h,session:R,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:A,port:m,host:u}),E.on("session",function(D){c.set(w,D)})}else YYe(!A,"httpSocket can only be sent on TLS update"),m=m||80,E=cjt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let w=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;E.setKeepAlive(!0,w)}let b=fjt(new WeakRef(E),{timeout:n,hostname:u,port:m});return E.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),y){let w=y;y=null,w(null,this)}}).on("error",function(w){if(queueMicrotask(b),y){let R=y;y=null,R(w)}}),E},"connect")}s(djt,"buildConnector");var fjt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return KYe;let r=null,n=null,i=WX.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>JYe(t.deref(),e))})},e.timeout);return()=>{WX.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return KYe;let r=null,n=WX.setFastTimeout(()=>{r=setImmediate(()=>{JYe(t.deref(),e)})},e.timeout);return()=>{WX.clearFastTimeout(n),clearImmediate(r)}};function JYe(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,XYe.destroy(t,new ujt(r))}s(JYe,"onConnectTimeout");ZYe.exports=djt});var eKe=q($X=>{"use strict";f();Object.defineProperty($X,"__esModule",{value:!0});$X.enumToMap=void 0;function pjt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(pjt,"enumToMap");$X.enumToMap=pjt});var tKe=q(Vt=>{"use strict";f();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SPECIAL_HEADERS=Vt.HEADER_STATE=Vt.MINOR=Vt.MAJOR=Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS=Vt.TOKEN=Vt.STRICT_TOKEN=Vt.HEX=Vt.URL_CHAR=Vt.STRICT_URL_CHAR=Vt.USERINFO_CHARS=Vt.MARK=Vt.ALPHANUM=Vt.NUM=Vt.HEX_MAP=Vt.NUM_MAP=Vt.ALPHA=Vt.FINISH=Vt.H_METHOD_MAP=Vt.METHOD_MAP=Vt.METHODS_RTSP=Vt.METHODS_ICE=Vt.METHODS_HTTP=Vt.METHODS=Vt.LENIENT_FLAGS=Vt.FLAGS=Vt.TYPE=Vt.ERROR=void 0;var mjt=eKe(),hjt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(hjt=Vt.ERROR||(Vt.ERROR={}));var gjt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(gjt=Vt.TYPE||(Vt.TYPE={}));var Ajt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(Ajt=Vt.FLAGS||(Vt.FLAGS={}));var yjt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(yjt=Vt.LENIENT_FLAGS||(Vt.LENIENT_FLAGS={}));var En;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(En=Vt.METHODS||(Vt.METHODS={}));Vt.METHODS_HTTP=[En.DELETE,En.GET,En.HEAD,En.POST,En.PUT,En.CONNECT,En.OPTIONS,En.TRACE,En.COPY,En.LOCK,En.MKCOL,En.MOVE,En.PROPFIND,En.PROPPATCH,En.SEARCH,En.UNLOCK,En.BIND,En.REBIND,En.UNBIND,En.ACL,En.REPORT,En.MKACTIVITY,En.CHECKOUT,En.MERGE,En["M-SEARCH"],En.NOTIFY,En.SUBSCRIBE,En.UNSUBSCRIBE,En.PATCH,En.PURGE,En.MKCALENDAR,En.LINK,En.UNLINK,En.PRI,En.SOURCE];Vt.METHODS_ICE=[En.SOURCE];Vt.METHODS_RTSP=[En.OPTIONS,En.DESCRIBE,En.ANNOUNCE,En.SETUP,En.PLAY,En.PAUSE,En.TEARDOWN,En.GET_PARAMETER,En.SET_PARAMETER,En.REDIRECT,En.RECORD,En.FLUSH,En.GET,En.POST];Vt.METHOD_MAP=mjt.enumToMap(En);Vt.H_METHOD_MAP={};Object.keys(Vt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Vt.H_METHOD_MAP[t]=Vt.METHOD_MAP[t])});var Cjt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(Cjt=Vt.FINISH||(Vt.FINISH={}));Vt.ALPHA=[];for(let t=65;t<=90;t++)Vt.ALPHA.push(String.fromCharCode(t)),Vt.ALPHA.push(String.fromCharCode(t+32));Vt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Vt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Vt.NUM=["0","1","2","3","4","5","6","7","8","9"];Vt.ALPHANUM=Vt.ALPHA.concat(Vt.NUM);Vt.MARK=["-","_",".","!","~","*","'","(",")"];Vt.USERINFO_CHARS=Vt.ALPHANUM.concat(Vt.MARK).concat(["%",";",":","&","=","+","$",","]);Vt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Vt.ALPHANUM);Vt.URL_CHAR=Vt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Vt.URL_CHAR.push(t);Vt.HEX=Vt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Vt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Vt.ALPHANUM);Vt.TOKEN=Vt.STRICT_TOKEN.concat([" "]);Vt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Vt.HEADER_CHARS.push(t);Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS.filter(t=>t!==44);Vt.MAJOR=Vt.NUM_MAP;Vt.MINOR=Vt.MAJOR;var V3;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(V3=Vt.HEADER_STATE||(Vt.HEADER_STATE={}));Vt.SPECIAL_HEADERS={connection:V3.CONNECTION,"content-length":V3.CONTENT_LENGTH,"proxy-connection":V3.CONNECTION,"transfer-encoding":V3.TRANSFER_ENCODING,upgrade:V3.UPGRADE}});var S1e=q((Doi,rKe)=>{"use strict";f();var{Buffer:vjt}=require("node:buffer");rKe.exports=vjt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var iKe=q((Noi,nKe)=>{"use strict";f();var{Buffer:Ejt}=require("node:buffer");nKe.exports=Ejt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var vO=q((Moi,fKe)=>{"use strict";f();var oKe=["GET","HEAD","POST"],xjt=new Set(oKe),bjt=[101,204,205,304],sKe=[301,302,303,307,308],Ijt=new Set(sKe),aKe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Tjt=new Set(aKe),cKe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],wjt=new Set(cKe),Sjt=["follow","manual","error"],lKe=["GET","HEAD","OPTIONS","TRACE"],_jt=new Set(lKe),Rjt=["navigate","same-origin","no-cors","cors"],kjt=["omit","same-origin","include"],Pjt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],Djt=["content-encoding","content-language","content-location","content-type","content-length"],Bjt=["half"],uKe=["CONNECT","TRACE","TRACK"],Njt=new Set(uKe),dKe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],Ljt=new Set(dKe);fKe.exports={subresource:dKe,forbiddenMethods:uKe,requestBodyHeader:Djt,referrerPolicy:cKe,requestRedirect:Sjt,requestMode:Rjt,requestCredentials:kjt,requestCache:Pjt,redirectStatus:sKe,corsSafeListedMethods:oKe,nullBodyStatus:bjt,safeMethods:lKe,badPorts:aKe,requestDuplex:Bjt,subresourceSet:Ljt,badPortsSet:Tjt,redirectStatusSet:Ijt,corsSafeListedMethodsSet:xjt,safeMethodsSet:_jt,forbiddenMethodsSet:Njt,referrerPolicySet:wjt}});var R1e=q((Ooi,pKe)=>{"use strict";f();var _1e=Symbol.for("undici.globalOrigin.1");function Mjt(){return globalThis[_1e]}s(Mjt,"getGlobalOrigin");function Fjt(t){if(t===void 0){Object.defineProperty(globalThis,_1e,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,_1e,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(Fjt,"setGlobalOrigin");pKe.exports={getGlobalOrigin:Mjt,setGlobalOrigin:Fjt}});var f0=q((qoi,vKe)=>{"use strict";f();var GX=require("node:assert"),Ojt=new TextEncoder,EO=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,Qjt=/[\u000A\u000D\u0009\u0020]/,Ujt=/[\u0009\u000A\u000C\u000D\u0020]/g,qjt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function Hjt(t){GX(t.protocol==="data:");let e=gKe(t,!0);e=e.slice(5);let r={position:0},n=z3(",",e,r),i=n.length;if(n=zjt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=AKe(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=CKe(a);if(a=$jt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=k1e(n);return c==="failure"&&(c=k1e("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(Hjt,"dataURLProcessor");function gKe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(gKe,"URLSerializer");function VX(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(VX,"collectASequenceOfCodePoints");function z3(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(z3,"collectASequenceOfCodePointsFast");function AKe(t){let e=Ojt.encode(t);return Wjt(e)}s(AKe,"stringPercentDecode");function mKe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(mKe,"isHexCharByte");function hKe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(hKe,"hexByteToNumber");function Wjt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(mKe(t[i+1])&&mKe(t[i+2]))?r[n++]=37:(r[n++]=hKe(t[i+1])<<4|hKe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(Wjt,"percentDecode");function k1e(t){t=jX(t,!0,!0);let e={position:0},r=z3("/",t,e);if(r.length===0||!EO.test(r)||e.position>t.length)return"failure";e.position++;let n=z3(";",t,e);if(n=jX(n,!1,!0),n.length===0||!EO.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,VX(u=>Qjt.test(u),t,e);let c=VX(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=yKe(t,e,!0),z3(";",t,e);else if(l=z3(";",t,e),l=jX(l,!1,!0),l.length===0)continue;c.length!==0&&EO.test(c)&&(l.length===0||qjt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(k1e,"parseMIMEType");function $jt(t){t=t.replace(Ujt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s($jt,"forgivingBase64");function yKe(t,e,r){let n=e.position,i="";for(GX(t[e.position]==='"'),e.position++;i+=VX(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{GX(o==='"');break}}return r?i:t.slice(n,e.position)}s(yKe,"collectAnHTTPQuotedString");function jjt(t){GX(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",EO.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(jjt,"serializeAMimeType");function Gjt(t){return t===13||t===10||t===9||t===32}s(Gjt,"isHTTPWhiteSpace");function jX(t,e=!0,r=!0){return P1e(t,e,r,Gjt)}s(jX,"removeHTTPWhitespace");function Vjt(t){return t===13||t===10||t===9||t===12||t===32}s(Vjt,"isASCIIWhitespace");function zjt(t,e=!0,r=!0){return P1e(t,e,r,Vjt)}s(zjt,"removeASCIIWhitespace");function P1e(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(P1e,"removeChars");function CKe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(CKe,"isomorphicDecode");function Yjt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(Yjt,"minimizeSupportedMimeType");vKe.exports={dataURLProcessor:Hjt,URLSerializer:gKe,collectASequenceOfCodePoints:VX,collectASequenceOfCodePointsFast:z3,stringPercentDecode:AKe,parseMIMEType:k1e,collectAnHTTPQuotedString:yKe,serializeAMimeType:jjt,removeChars:P1e,removeHTTPWhitespace:jX,minimizeSupportedMimeType:Yjt,HTTP_TOKEN_CODEPOINTS:EO,isomorphicDecode:CKe}});var Qu=q(($oi,EKe)=>{"use strict";f();var{types:xC,inspect:Kjt}=require("node:util"),{markAsUncloneable:Jjt}=require("node:worker_threads"),{toUSVString:Xjt}=Ni(),Ut={};Ut.converters={};Ut.util={};Ut.errors={};Ut.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Ut.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Ut.errors.exception({header:t.prefix,message:r})};Ut.errors.invalidArgument=function(t){return Ut.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Ut.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Ut.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Ut.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Ut.illegalConstructor=function(){throw Ut.errors.exception({header:"TypeError",message:"Illegal constructor"})};Ut.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Ut.util.markAsUncloneable=Jjt||(()=>{});Ut.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Ut.errors.exception({header:"Integer conversion",message:`Could not convert ${Ut.util.Stringify(t)} to an integer.`});if(a=Ut.util.IntegerPart(a),a<o||a>i)throw Ut.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Ut.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Ut.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Ut.util.Stringify=function(t){switch(Ut.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return Kjt(t);case"String":return`"${t}"`;default:return`${t}`}};Ut.sequenceConverter=function(t){return(e,r,n,i)=>{if(Ut.util.Type(e)!=="Object")throw Ut.errors.exception({header:r,message:`${n} (${Ut.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw Ut.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};Ut.recordConverter=function(t,e){return(r,n,i)=>{if(Ut.util.Type(r)!=="Object")throw Ut.errors.exception({header:n,message:`${i} ("${Ut.util.Type(r)}") is not an Object.`});let o={};if(!xC.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),d=e(r[l],n,i);o[u]=d}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),d=e(r[c],n,i);o[u]=d}return o}};Ut.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Ut.errors.exception({header:r,message:`Expected ${n} ("${Ut.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Ut.dictionaryConverter=function(t){return(e,r,n)=>{let i=Ut.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Ut.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,c))throw Ut.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=d(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw Ut.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};Ut.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Ut.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Ut.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Ut.converters.ByteString=function(t,e,r){let n=Ut.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Ut.converters.USVString=Xjt;Ut.converters.boolean=function(t){return!!t};Ut.converters.any=function(t){return t};Ut.converters["long long"]=function(t,e,r){return Ut.util.ConvertToInt(t,64,"signed",void 0,e,r)};Ut.converters["unsigned long long"]=function(t,e,r){return Ut.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Ut.converters["unsigned long"]=function(t,e,r){return Ut.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Ut.converters["unsigned short"]=function(t,e,r,n){return Ut.util.ConvertToInt(t,16,"unsigned",n,e,r)};Ut.converters.ArrayBuffer=function(t,e,r,n){if(Ut.util.Type(t)!=="Object"||!xC.isAnyArrayBuffer(t))throw Ut.errors.conversionFailed({prefix:e,argument:`${r} ("${Ut.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&xC.isSharedArrayBuffer(t))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.TypedArray=function(t,e,r,n,i){if(Ut.util.Type(t)!=="Object"||!xC.isTypedArray(t)||t.constructor.name!==e.name)throw Ut.errors.conversionFailed({prefix:r,argument:`${n} ("${Ut.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&xC.isSharedArrayBuffer(t.buffer))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.DataView=function(t,e,r,n){if(Ut.util.Type(t)!=="Object"||!xC.isDataView(t))throw Ut.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&xC.isSharedArrayBuffer(t.buffer))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.BufferSource=function(t,e,r,n){if(xC.isAnyArrayBuffer(t))return Ut.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(xC.isTypedArray(t))return Ut.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(xC.isDataView(t))return Ut.converters.DataView(t,e,r,{...n,allowShared:!1});throw Ut.errors.conversionFailed({prefix:e,argument:`${r} ("${Ut.util.Stringify(t)}")`,types:["BufferSource"]})};Ut.converters["sequence<ByteString>"]=Ut.sequenceConverter(Ut.converters.ByteString);Ut.converters["sequence<sequence<ByteString>>"]=Ut.sequenceConverter(Ut.converters["sequence<ByteString>"]);Ut.converters["record<ByteString, ByteString>"]=Ut.recordConverter(Ut.converters.ByteString,Ut.converters.ByteString);EKe.exports={webidl:Ut}});var Sp=q((Goi,LKe)=>{"use strict";f();var{Transform:Zjt}=require("node:stream"),xKe=require("node:zlib"),{redirectStatusSet:eGt,referrerPolicySet:tGt,badPortsSet:rGt}=vO(),{getGlobalOrigin:bKe}=R1e(),{collectASequenceOfCodePoints:hR,collectAnHTTPQuotedString:nGt,removeChars:iGt,parseMIMEType:oGt}=f0(),{performance:sGt}=require("node:perf_hooks"),{isBlobLike:aGt,ReadableStreamFrom:cGt,isValidHTTPToken:IKe,normalizedMethodRecordsBase:lGt}=Ni(),gR=require("node:assert"),{isUint8Array:uGt}=require("node:util/types"),{webidl:xO}=Qu(),TKe=[],YX;try{YX=require("node:crypto");let t=["sha256","sha384","sha512"];TKe=YX.getHashes().filter(e=>t.includes(e))}catch{}function wKe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(wKe,"responseURL");function dGt(t,e){if(!eGt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&_Ke(r)&&(SKe(r)||(r=fGt(r)),r=new URL(r,wKe(t))),r&&!r.hash&&(r.hash=e),r}s(dGt,"responseLocationURL");function SKe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(SKe,"isValidEncodedURL");function fGt(t){return Buffer.from(t,"binary").toString("utf8")}s(fGt,"normalizeBinaryStringToUtf8");function IO(t){return t.urlList[t.urlList.length-1]}s(IO,"requestCurrentURL");function pGt(t){let e=IO(t);return BKe(e)&&rGt.has(e.port)?"blocked":"allowed"}s(pGt,"requestBadPort");function mGt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(mGt,"isErrorLike");function hGt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(hGt,"isValidReasonPhrase");var gGt=IKe;function _Ke(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(_Ke,"isValidHeaderValue");function AGt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(tGt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(AGt,"setRequestReferrerPolicyOnRedirect");function yGt(){return"allowed"}s(yGt,"crossOriginResourcePolicyCheck");function CGt(){return"success"}s(CGt,"corsCheck");function vGt(){return"success"}s(vGt,"TAOCheck");function EGt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(EGt,"appendFetchMetadata");function xGt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&B1e(t.origin)&&!B1e(IO(t))&&(e=null);break;case"same-origin":KX(t,IO(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(xGt,"appendRequestOriginHeader");function Y3(t,e){return t}s(Y3,"coarsenTime");function bGt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:Y3(t.domainLookupStartTime,r),domainLookupEndTime:Y3(t.domainLookupEndTime,r),connectionStartTime:Y3(t.connectionStartTime,r),connectionEndTime:Y3(t.connectionEndTime,r),secureConnectionStartTime:Y3(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(bGt,"clampAndCoarsenConnectionTimingInfo");function IGt(t){return Y3(sGt.now(),t)}s(IGt,"coarsenedSharedCurrentTime");function TGt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(TGt,"createOpaqueTimingInfo");function RKe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(RKe,"makePolicyContainer");function wGt(t){return{referrerPolicy:t.referrerPolicy}}s(wGt,"clonePolicyContainer");function SGt(t){let e=t.referrerPolicy;gR(e);let r=null;if(t.referrer==="client"){let c=bKe();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=D1e(r),i=D1e(r,!0);n.toString().length>4096&&(n=i);let o=KX(t,n),a=bO(n)&&!bO(t.url);switch(e){case"origin":return i??D1e(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=IO(t);return KX(n,c)?n:bO(n)&&!bO(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(SGt,"determineRequestsReferrer");function D1e(t,e){return gR(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(D1e,"stripURLForReferrer");function bO(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(bO,"isURLPotentiallyTrustworthy");function _Gt(t,e){if(YX===void 0)return!0;let r=kKe(e);if(r==="no metadata"||r.length===0)return!0;let n=kGt(r),i=PGt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=YX.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),DGt(l,c))return!0}return!1}s(_Gt,"bytesMatch");var RGt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function kKe(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=RGt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();TKe.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(kKe,"parseMetadata");function kGt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(kGt,"getStrongestMetadata");function PGt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(PGt,"filterMetadataListByAlgorithm");function DGt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(DGt,"compareBase64Mixed");function BGt(t){}s(BGt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function KX(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(KX,"sameOrigin");function NGt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(NGt,"createDeferredPromise");function LGt(t){return t.controller.state==="aborted"}s(LGt,"isAborted");function MGt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(MGt,"isCancelled");function FGt(t){return lGt[t.toLowerCase()]??t}s(FGt,"normalizeMethod");function OGt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return gR(typeof e=="string"),e}s(OGt,"serializeJavascriptValueToJSONString");var QGt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function PKe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:d}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,QGt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(PKe,"createIterator");function UGt(t,e,r,n=0,i=1){let o=PKe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return xO.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return xO.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return xO.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(xO.brandCheck(this,e),xO.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))l.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(UGt,"iteratorMixin");async function qGt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await DKe(o))}catch(a){i(a)}}s(qGt,"fullyReadBody");function HGt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(HGt,"isReadableStreamLike");function WGt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(WGt,"readableStreamClose");var $Gt=/[^\x00-\xFF]/;function zX(t){return gR(!$Gt.test(t)),t}s(zX,"isomorphicEncode");async function DKe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!uGt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(DKe,"readAllBytes");function jGt(t){gR("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(jGt,"urlIsLocal");function B1e(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(B1e,"urlHasHttpsScheme");function BKe(t){gR("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(BKe,"urlIsHttpHttpsScheme");function GGt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&hR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&hR(l=>l==="	"||l===" ",r,n);let i=hR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&hR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&hR(l=>l==="	"||l===" ",r,n);let a=hR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(GGt,"simpleRangeHeaderValue");function VGt(t,e,r){let n="bytes ";return n+=zX(`${t}`),n+="-",n+=zX(`${e}`),n+="/",n+=zX(`${r}`),n}s(VGt,"buildContentRange");var N1e=class extends Zjt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?xKe.createInflate(this.#e):xKe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function zGt(t){return new N1e(t)}s(zGt,"createInflate");function YGt(t){let e=null,r=null,n=null,i=NKe("content-type",t);if(i===null)return"failure";for(let o of i){let a=oGt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(YGt,"extractMimeType");function KGt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=hR(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=nGt(e,r),r.position<e.length)continue}else gR(e.charCodeAt(r.position)===44),r.position++;i=iGt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(KGt,"gettingDecodingSplitting");function NKe(t,e){let r=e.get(t,!0);return r===null?null:KGt(r)}s(NKe,"getDecodeSplit");var JGt=new TextDecoder;function XGt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),JGt.decode(t))}s(XGt,"utf8DecodeBytes");var L1e=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return bKe()}get origin(){return this.baseUrl?.origin}policyContainer=RKe()},M1e=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new L1e},ZGt=new M1e;LKe.exports={isAborted:LGt,isCancelled:MGt,isValidEncodedURL:SKe,createDeferredPromise:NGt,ReadableStreamFrom:cGt,tryUpgradeRequestToAPotentiallyTrustworthyURL:BGt,clampAndCoarsenConnectionTimingInfo:bGt,coarsenedSharedCurrentTime:IGt,determineRequestsReferrer:SGt,makePolicyContainer:RKe,clonePolicyContainer:wGt,appendFetchMetadata:EGt,appendRequestOriginHeader:xGt,TAOCheck:vGt,corsCheck:CGt,crossOriginResourcePolicyCheck:yGt,createOpaqueTimingInfo:TGt,setRequestReferrerPolicyOnRedirect:AGt,isValidHTTPToken:IKe,requestBadPort:pGt,requestCurrentURL:IO,responseURL:wKe,responseLocationURL:dGt,isBlobLike:aGt,isURLPotentiallyTrustworthy:bO,isValidReasonPhrase:hGt,sameOrigin:KX,normalizeMethod:FGt,serializeJavascriptValueToJSONString:OGt,iteratorMixin:UGt,createIterator:PKe,isValidHeaderName:gGt,isValidHeaderValue:_Ke,isErrorLike:mGt,fullyReadBody:qGt,bytesMatch:_Gt,isReadableStreamLike:HGt,readableStreamClose:WGt,isomorphicEncode:zX,urlIsLocal:jGt,urlHasHttpsScheme:B1e,urlIsHttpHttpsScheme:BKe,readAllBytes:DKe,simpleRangeHeaderValue:GGt,buildContentRange:VGt,parseMetadata:kKe,createInflate:zGt,extractMimeType:YGt,getDecodeSplit:NKe,utf8DecodeBytes:XGt,environmentSettingsObject:ZGt}});var vT=q((Yoi,MKe)=>{"use strict";f();MKe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var O1e=q((Joi,FKe)=>{"use strict";f();var{Blob:eVt,File:tVt}=require("node:buffer"),{kState:fE}=vT(),{webidl:bC}=Qu(),F1e=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[fE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return bC.brandCheck(this,t),this[fE].blobLike.stream(...e)}arrayBuffer(...e){return bC.brandCheck(this,t),this[fE].blobLike.arrayBuffer(...e)}slice(...e){return bC.brandCheck(this,t),this[fE].blobLike.slice(...e)}text(...e){return bC.brandCheck(this,t),this[fE].blobLike.text(...e)}get size(){return bC.brandCheck(this,t),this[fE].blobLike.size}get type(){return bC.brandCheck(this,t),this[fE].blobLike.type}get name(){return bC.brandCheck(this,t),this[fE].name}get lastModified(){return bC.brandCheck(this,t),this[fE].lastModified}get[Symbol.toStringTag](){return"File"}};bC.converters.Blob=bC.interfaceConverter(eVt);function rVt(t){return t instanceof tVt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(rVt,"isFileLike");FKe.exports={FileLike:F1e,isFileLike:rVt}});var wO=q((esi,HKe)=>{"use strict";f();var{isBlobLike:JX,iteratorMixin:nVt}=Sp(),{kState:pf}=vT(),{kEnumerableProperty:K3}=Ni(),{FileLike:OKe,isFileLike:iVt}=O1e(),{webidl:Ls}=Qu(),{File:qKe}=require("node:buffer"),QKe=require("node:util"),UKe=globalThis.File??qKe,TO=class t{static{s(this,"FormData")}constructor(e){if(Ls.util.markAsUncloneable(this),e!==void 0)throw Ls.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[pf]=[]}append(e,r,n=void 0){Ls.brandCheck(this,t);let i="FormData.append";if(Ls.argumentLengthCheck(arguments,2,i),arguments.length===3&&!JX(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Ls.converters.USVString(e,i,"name"),r=JX(r)?Ls.converters.Blob(r,i,"value",{strict:!1}):Ls.converters.USVString(r,i,"value"),n=arguments.length===3?Ls.converters.USVString(n,i,"filename"):void 0;let o=Q1e(e,r,n);this[pf].push(o)}delete(e){Ls.brandCheck(this,t);let r="FormData.delete";Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[pf]=this[pf].filter(n=>n.name!==e)}get(e){Ls.brandCheck(this,t);let r="FormData.get";Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name");let n=this[pf].findIndex(i=>i.name===e);return n===-1?null:this[pf][n].value}getAll(e){Ls.brandCheck(this,t);let r="FormData.getAll";return Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[pf].filter(n=>n.name===e).map(n=>n.value)}has(e){Ls.brandCheck(this,t);let r="FormData.has";return Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[pf].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Ls.brandCheck(this,t);let i="FormData.set";if(Ls.argumentLengthCheck(arguments,2,i),arguments.length===3&&!JX(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Ls.converters.USVString(e,i,"name"),r=JX(r)?Ls.converters.Blob(r,i,"name",{strict:!1}):Ls.converters.USVString(r,i,"name"),n=arguments.length===3?Ls.converters.USVString(n,i,"name"):void 0;let o=Q1e(e,r,n),a=this[pf].findIndex(c=>c.name===e);a!==-1?this[pf]=[...this[pf].slice(0,a),o,...this[pf].slice(a+1).filter(c=>c.name!==e)]:this[pf].push(o)}[QKe.inspect.custom](e,r){let n=this[pf].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=QKe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};nVt("FormData",TO,pf,"name","value");Object.defineProperties(TO.prototype,{append:K3,delete:K3,get:K3,getAll:K3,has:K3,set:K3,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Q1e(t,e,r){if(typeof e!="string"){if(iVt(e)||(e=e instanceof Blob?new UKe([e],"blob",{type:e.type}):new OKe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof qKe?new UKe([e],r,n):new OKe(e,r,n)}}return{name:t,value:e}}s(Q1e,"makeEntry");HKe.exports={FormData:TO,makeEntry:Q1e}});var zKe=q((nsi,VKe)=>{"use strict";f();var{isUSVString:WKe,bufferToLowerCasedHeaderName:oVt}=Ni(),{utf8DecodeBytes:sVt}=Sp(),{HTTP_TOKEN_CODEPOINTS:aVt,isomorphicDecode:$Ke}=f0(),{isFileLike:cVt}=O1e(),{makeEntry:lVt}=wO(),XX=require("node:assert"),{File:uVt}=require("node:buffer"),dVt=globalThis.File??uVt,fVt=Buffer.from('form-data; name="'),jKe=Buffer.from("; filename"),pVt=Buffer.from("--"),mVt=Buffer.from(`--\r
`);function hVt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(hVt,"isAsciiString");function gVt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(gVt,"validateBoundary");function AVt(t,e){XX(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&ZX(t,pVt,o)||o.position===t.length-4&&ZX(t,mVt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=yVt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:d,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",hVt(d)||(d=""),h=new dVt([m],u,{type:d})):h=sVt(Buffer.from(m)),XX(WKe(l)),XX(typeof h=="string"&&WKe(h)||cVt(h)),i.push(lVt(l,h,u))}}s(AVt,"multipartFormDataParser");function yVt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=J3(c=>c!==10&&c!==13&&c!==58,t,e);if(a=U1e(a,!0,!0,c=>c===9||c===32),!aVt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,J3(c=>c===32||c===9,t,e),oVt(a)){case"content-disposition":{if(r=n=null,!ZX(t,fVt,e)||(e.position+=17,r=GKe(t,e),r===null))return"failure";if(ZX(t,jKe,e)){let c=e.position+jKe.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=GKe(t,e),n===null))return"failure"}break}case"content-type":{let c=J3(l=>l!==10&&l!==13,t,e);c=U1e(c,!1,!0,l=>l===9||l===32),i=$Ke(c);break}case"content-transfer-encoding":{let c=J3(l=>l!==10&&l!==13,t,e);c=U1e(c,!1,!0,l=>l===9||l===32),o=$Ke(c);break}default:J3(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(yVt,"parseMultipartFormDataHeaders");function GKe(t,e){XX(t[e.position-1]===34);let r=J3(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(GKe,"parseMultipartFormDataName");function J3(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(J3,"collectASequenceOfBytes");function U1e(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(U1e,"removeChars");function ZX(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(ZX,"bufferStartsWith");VKe.exports={multipartFormDataParser:AVt,validateBoundary:gVt}});var eB=q((ssi,rJe)=>{"use strict";f();var SO=Ni(),{ReadableStreamFrom:CVt,isBlobLike:YKe,isReadableStreamLike:vVt,readableStreamClose:EVt,createDeferredPromise:xVt,fullyReadBody:bVt,extractMimeType:IVt,utf8DecodeBytes:XKe}=Sp(),{FormData:KKe}=wO(),{kState:Z3}=vT(),{webidl:TVt}=Qu(),{Blob:wVt}=require("node:buffer"),q1e=require("node:assert"),{isErrored:ZKe,isDisturbed:SVt}=require("node:stream"),{isArrayBuffer:_Vt}=require("node:util/types"),{serializeAMimeType:RVt}=f0(),{multipartFormDataParser:kVt}=zKe(),H1e;try{let t=require("node:crypto");H1e=s(e=>t.randomInt(0,e),"random")}catch{H1e=s(t=>Math.floor(Math.random(t)),"random")}var eZ=new TextEncoder;function PVt(){}s(PVt,"noop");var W1e=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,$1e;W1e&&($1e=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!SVt(e)&&!ZKe(e)&&e.cancel("Response object has been garbage collected").catch(PVt)}));function eJe(t,e=!1){let r=null;t instanceof ReadableStream?r=t:YKe(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?eZ.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>EVt(l))},start(){},type:"bytes"}),q1e(vVt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(_Vt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(SO.isFormDataLike(t)){let l=`----formdata-undici-0${`${H1e(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let d=s(y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(y=>y.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[y,E]of t)if(typeof E=="string"){let b=eZ.encode(u+`; name="${d(p(y))}"\r
\r
${p(E)}\r
`);m.push(b),o+=b.byteLength}else{let b=eZ.encode(`${u}; name="${d(p(y))}"`+(E.name?`; filename="${d(E.name)}"`:"")+`\r
Content-Type: ${E.type||"application/octet-stream"}\r
\r
`);m.push(b,E,h),typeof E.size=="number"?o+=b.byteLength+E.size+h.byteLength:g=!0}let A=eZ.encode(`--${l}--\r
`);m.push(A),o+=A.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let y of m)y.stream?yield*y.stream():yield y},"action"),a=`multipart/form-data; boundary=${l}`}else if(YKe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(SO.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:CVt(t)}if((typeof i=="string"||SO.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!ZKe(r)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(eJe,"extractBody");function DVt(t,e=!1){return t instanceof ReadableStream&&(q1e(!SO.isDisturbed(t),"The body has already been consumed."),q1e(!t.locked,"The stream is locked.")),eJe(t,e)}s(DVt,"safelyExtractBody");function BVt(t,e){let[r,n]=e.stream.tee();return W1e&&$1e.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(BVt,"cloneBody");function NVt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(NVt,"throwIfAborted");function LVt(t){return{blob(){return X3(this,r=>{let n=JKe(this);return n===null?n="":n&&(n=RVt(n)),new wVt([r],{type:n})},t)},arrayBuffer(){return X3(this,r=>new Uint8Array(r).buffer,t)},text(){return X3(this,XKe,t)},json(){return X3(this,FVt,t)},formData(){return X3(this,r=>{let n=JKe(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=kVt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new KKe;return o[Z3]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new KKe;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return X3(this,r=>new Uint8Array(r),t)}}}s(LVt,"bodyMixinMethods");function MVt(t){Object.assign(t.prototype,LVt(t))}s(MVt,"mixinBody");async function X3(t,e,r){if(TVt.brandCheck(t,r),tJe(t))throw new TypeError("Body is unusable: Body has already been read");NVt(t[Z3]);let n=xVt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[Z3].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await bVt(t[Z3].body,o,i),n.promise)}s(X3,"consumeBody");function tJe(t){let e=t[Z3].body;return e!=null&&(e.stream.locked||SO.isDisturbed(e.stream))}s(tJe,"bodyUnusable");function FVt(t){return JSON.parse(XKe(t))}s(FVt,"parseJSONFromBytes");function JKe(t){let e=t[Z3].headersList,r=IVt(e);return r==="failure"?null:r}s(JKe,"bodyMimeType");rJe.exports={extractBody:eJe,safelyExtractBody:DVt,cloneBody:BVt,mixinBody:MVt,streamRegistry:$1e,hasFinalizationRegistry:W1e,bodyUnusable:tJe}});var pJe=q((lsi,fJe)=>{"use strict";f();var Rn=require("node:assert"),oi=Ni(),{channels:nJe}=q3(),j1e=I1e(),{RequestContentLengthMismatchError:AR,ResponseContentLengthMismatchError:OVt,RequestAbortedError:lJe,HeadersTimeoutError:QVt,HeadersOverflowError:UVt,SocketError:sZ,InformationalError:tB,BodyTimeoutError:qVt,HTTPParserError:HVt,ResponseExceededMaxSizeError:WVt}=$o(),{kUrl:uJe,kReset:p0,kClient:Y1e,kParser:ec,kBlocking:kO,kRunning:Td,kPending:$Vt,kSize:iJe,kWriting:xT,kQueue:cA,kNoRef:_O,kKeepAliveDefaultTimeout:jVt,kHostHeader:GVt,kPendingIdx:VVt,kRunningIdx:fh,kError:ph,kPipelining:iZ,kSocket:rB,kKeepAliveTimeoutValue:aZ,kMaxHeadersSize:G1e,kKeepAliveMaxTimeout:zVt,kKeepAliveTimeoutThreshold:YVt,kHeadersTimeout:KVt,kBodyTimeout:JVt,kStrictContentLength:K1e,kMaxRequests:oJe,kCounter:XVt,kMaxResponseSize:ZVt,kOnError:ezt,kResume:ET,kHTTPContext:dJe}=ba(),IC=tKe(),tzt=Buffer.alloc(0),tZ=Buffer[Symbol.species],rZ=oi.addListener,rzt=oi.removeAllListeners,V1e;async function nzt(){let t=process.env.JEST_WORKER_ID?S1e():void 0,e;try{e=await WebAssembly.compile(iKe())}catch{e=await WebAssembly.compile(t||S1e())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Rn(Sl.ptr===r);let o=n-wC+TC.byteOffset;return Sl.onStatus(new tZ(TC.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Rn(Sl.ptr===r),Sl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Rn(Sl.ptr===r);let o=n-wC+TC.byteOffset;return Sl.onHeaderField(new tZ(TC.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Rn(Sl.ptr===r);let o=n-wC+TC.byteOffset;return Sl.onHeaderValue(new tZ(TC.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Rn(Sl.ptr===r),Sl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Rn(Sl.ptr===r);let o=n-wC+TC.byteOffset;return Sl.onBody(new tZ(TC.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Rn(Sl.ptr===r),Sl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(nzt,"lazyllhttp");var z1e=null,J1e=nzt();J1e.catch();var Sl=null,TC=null,nZ=0,wC=null,izt=0,RO=1,nB=2|RO,oZ=4|RO,X1e=8|izt,Z1e=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Rn(Number.isFinite(e[G1e])&&e[G1e]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(IC.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[G1e],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[ZVt]}setTimeout(e,r){e!==this.timeoutValue||r&RO^this.timeoutType&RO?(this.timeout&&(j1e.clearTimeout(this.timeout),this.timeout=null),e&&(r&RO?this.timeout=j1e.setFastTimeout(sJe,e,new WeakRef(this)):(this.timeout=setTimeout(sJe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Rn(this.ptr!=null),Rn(Sl==null),this.llhttp.llhttp_resume(this.ptr),Rn(this.timeoutType===oZ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||tzt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Rn(this.ptr!=null),Rn(Sl==null),Rn(!this.paused);let{socket:r,llhttp:n}=this;e.length>nZ&&(wC&&n.free(wC),nZ=Math.ceil(e.length/4096)*4096,wC=n.malloc(nZ)),new Uint8Array(n.memory.buffer,wC,nZ).set(e);try{let i;try{TC=e,Sl=this,i=n.llhttp_execute(this.ptr,wC,e.length)}catch(a){throw a}finally{Sl=null,TC=null}let o=n.llhttp_get_error_pos(this.ptr)-wC;if(i===IC.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===IC.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==IC.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new HVt(c,IC.ERROR[i],e.slice(o))}}catch(i){oi.destroy(r,i)}}destroy(){Rn(this.ptr!=null),Rn(Sl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&j1e.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[cA][r[fh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=oi.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&oi.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&oi.destroy(this.socket,new UVt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Rn(r),Rn(n[rB]===i),Rn(!i.destroyed),Rn(!this.paused),Rn((o.length&1)===0);let c=n[cA][n[fh]];Rn(c),Rn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[ec].destroy(),i[ec]=null,i[Y1e]=null,i[ph]=null,rzt(i),n[rB]=null,n[dJe]=null,n[cA][n[fh]++]=null,n.emit("disconnect",n[uJe],[n],new tB("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){oi.destroy(i,l)}n[ET]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[cA][i[fh]];if(!l)return-1;if(Rn(!this.upgrade),Rn(this.statusCode<200),e===100)return oi.destroy(o,new sZ("bad response",oi.getSocketInfo(o))),-1;if(r&&!l.upgrade)return oi.destroy(o,new sZ("bad upgrade",oi.getSocketInfo(o))),-1;if(Rn(this.timeoutType===nB),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[p0]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=l.bodyTimeout!=null?l.bodyTimeout:i[JVt];this.setTimeout(d,oZ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Rn(i[Td]===1),this.upgrade=!0,2;if(r)return Rn(i[Td]===1),this.upgrade=!0,2;if(Rn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[iZ]){let d=this.keepAlive?oi.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[YVt],i[zVt]);p<=0?o[p0]=!0:i[aZ]=p}else i[aZ]=i[jVt]}else o[p0]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[kO]&&(o[kO]=!1,i[ET]()),u?IC.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[cA][r[fh]];if(Rn(a),Rn(this.timeoutType===oZ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Rn(i>=200),o>-1&&this.bytesRead+e.length>o)return oi.destroy(n,new WVt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return IC.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Rn(n>=100),Rn((this.headers.length&1)===0);let u=e[cA][e[fh]];if(Rn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return oi.destroy(r,new OVt),-1;if(u.onComplete(o),e[cA][e[fh]++]=null,r[xT])return Rn(e[Td]===0),oi.destroy(r,new tB("reset")),IC.ERROR.PAUSED;if(l){if(r[p0]&&e[Td]===0)return oi.destroy(r,new tB("reset")),IC.ERROR.PAUSED;e[iZ]==null||e[iZ]===1?setImmediate(()=>e[ET]()):e[ET]()}else return oi.destroy(r,new tB("reset")),IC.ERROR.PAUSED}}};function sJe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===nB?(!e[xT]||e.writableNeedDrain||n[Td]>1)&&(Rn(!i,"cannot be paused while waiting for headers"),oi.destroy(e,new QVt)):r===oZ?i||oi.destroy(e,new qVt):r===X1e&&(Rn(n[Td]===0&&n[aZ]),oi.destroy(e,new tB("socket idle timeout")))}s(sJe,"onParserTimeout");async function ozt(t,e){t[rB]=e,z1e||(z1e=await J1e,J1e=null),e[_O]=!1,e[xT]=!1,e[p0]=!1,e[kO]=!1,e[ec]=new Z1e(t,e,z1e),rZ(e,"error",function(n){Rn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[ec];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[ph]=n,this[Y1e][ezt](n)}),rZ(e,"readable",function(){let n=this[ec];n&&n.readMore()}),rZ(e,"end",function(){let n=this[ec];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}oi.destroy(this,new sZ("other side closed",oi.getSocketInfo(this)))}),rZ(e,"close",function(){let n=this[Y1e],i=this[ec];i&&(!this[ph]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[ec].destroy(),this[ec]=null);let o=this[ph]||new sZ("closed",oi.getSocketInfo(this));if(n[rB]=null,n[dJe]=null,n.destroyed){Rn(n[$Vt]===0);let a=n[cA].splice(n[fh]);for(let c=0;c<a.length;c++){let l=a[c];oi.errorRequest(n,l,o)}}else if(n[Td]>0&&o.code!=="UND_ERR_INFO"){let a=n[cA][n[fh]];n[cA][n[fh]++]=null,oi.errorRequest(n,a,o)}n[VVt]=n[fh],Rn(n[Td]===0),n.emit("disconnect",n[uJe],[n],o),n[ET]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return czt(t,...n)},resume(){szt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[xT]||e[p0]||e[kO]||n&&(t[Td]>0&&!n.idempotent||t[Td]>0&&(n.upgrade||n.method==="CONNECT")||t[Td]>0&&oi.bodyLength(n.body)!==0&&(oi.isStream(n.body)||oi.isAsyncIterable(n.body)||oi.isFormDataLike(n.body))))}}}s(ozt,"connectH1");function szt(t){let e=t[rB];if(e&&!e.destroyed){if(t[iJe]===0?!e[_O]&&e.unref&&(e.unref(),e[_O]=!0):e[_O]&&e.ref&&(e.ref(),e[_O]=!1),t[iJe]===0)e[ec].timeoutType!==X1e&&e[ec].setTimeout(t[aZ],X1e);else if(t[Td]>0&&e[ec].statusCode<200&&e[ec].timeoutType!==nB){let r=t[cA][t[fh]],n=r.headersTimeout!=null?r.headersTimeout:t[KVt];e[ec].setTimeout(n,nB)}}}s(szt,"resumeH1");function azt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(azt,"shouldSendContentLength");function czt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:d}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(oi.isFormDataLike(l)){V1e||(V1e=eB().extractBody);let[y,E]=V1e(l);e.contentType==null&&u.push("content-type",E),l=y.stream,d=y.length}else oi.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=oi.bodyLength(l);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),azt(r)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[K1e])return oi.errorRequest(t,e,new AR),!1;process.emitWarning(new AR)}let h=t[rB],g=s(y=>{e.aborted||e.completed||(oi.errorRequest(t,e,y||new lJe),oi.destroy(l),oi.destroy(h,new tB("aborted")))},"abort");try{e.onConnect(g)}catch(y){oi.errorRequest(t,e,y)}if(e.aborted)return!1;r==="HEAD"&&(h[p0]=!0),(o||r==="CONNECT")&&(h[p0]=!0),c!=null&&(h[p0]=c),t[oJe]&&h[XVt]++>=t[oJe]&&(h[p0]=!0),a&&(h[kO]=!0);let A=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?A+=`host: ${i}\r
`:A+=t[GVt],o?A+=`connection: upgrade\r
upgrade: ${o}\r
`:t[iZ]&&!h[p0]?A+=`connection: keep-alive\r
`:A+=`connection: close\r
`,Array.isArray(u))for(let y=0;y<u.length;y+=2){let E=u[y+0],b=u[y+1];if(Array.isArray(b))for(let w=0;w<b.length;w++)A+=`${E}: ${b[w]}\r
`;else A+=`${E}: ${b}\r
`}return nJe.sendHeaders.hasSubscribers&&nJe.sendHeaders.publish({request:e,headers:A,socket:h}),!l||m===0?aJe(g,null,t,e,h,d,A,p):oi.isBuffer(l)?aJe(g,l,t,e,h,d,A,p):oi.isBlobLike(l)?typeof l.stream=="function"?cJe(g,l.stream(),t,e,h,d,A,p):uzt(g,l,t,e,h,d,A,p):oi.isStream(l)?lzt(g,l,t,e,h,d,A,p):oi.isIterable(l)?cJe(g,l,t,e,h,d,A,p):Rn(!1),!0}s(czt,"writeH1");function lzt(t,e,r,n,i,o,a,c){Rn(o!==0||r[Td]===0,"stream body cannot be pipelined");let l=!1,u=new cZ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),d=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(A){oi.destroy(this,A)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new lJe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Rn(i.destroyed||i[xT]&&r[Td]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(A){g=A}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?oi.destroy(e,g):oi.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(lzt,"writeStream");function aJe(t,e,r,n,i,o,a,c){try{e?oi.isBuffer(e)&&(Rn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[p0]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Rn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[ET]()}catch(l){t(l)}}s(aJe,"writeBuffer");async function uzt(t,e,r,n,i,o,a,c){Rn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new AR;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[p0]=!0),r[ET]()}catch(l){t(l)}}s(uzt,"writeBlob");async function cJe(t,e,r,n,i,o,a,c){Rn(o!==0||r[Td]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{Rn(l===null),i[ph]?h(i[ph]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new cZ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[ph])throw i[ph];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(cJe,"writeIterable");var cZ=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[xT]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[ph])throw r[ph];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[K1e])throw new AR;process.emitWarning(new AR)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[p0]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=r.write(e);return r.uncork(),n.onBodySent(e),d||r[ec].timeout&&r[ec].timeoutType===nB&&r[ec].timeout.refresh&&r[ec].timeout.refresh(),d}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[xT]=!1,e[ph])throw e[ph];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[K1e])throw new AR;process.emitWarning(new AR)}e[ec].timeout&&e[ec].timeoutType===nB&&e[ec].timeout.refresh&&e[ec].timeout.refresh(),n[ET]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[xT]=!1,e&&(Rn(n[Td]<=1,"pipeline should only contain this request"),i(e))}};fJe.exports=ozt});var EJe=q((fsi,vJe)=>{"use strict";f();var mh=require("node:assert"),{pipeline:dzt}=require("node:stream"),so=Ni(),{RequestContentLengthMismatchError:eve,RequestAbortedError:mJe,SocketError:PO,InformationalError:tve}=$o(),{kUrl:lZ,kReset:dZ,kClient:iB,kRunning:fZ,kPending:fzt,kQueue:bT,kPendingIdx:rve,kRunningIdx:lA,kError:dA,kSocket:tu,kStrictContentLength:pzt,kOnError:nve,kMaxConcurrentStreams:CJe,kHTTP2Session:uA,kResume:IT,kSize:mzt,kHTTPContext:hzt}=ba(),pE=Symbol("open streams"),hJe,gJe=!1,uZ;try{uZ=require("node:http2")}catch{uZ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:gzt,HTTP2_HEADER_METHOD:Azt,HTTP2_HEADER_PATH:yzt,HTTP2_HEADER_SCHEME:Czt,HTTP2_HEADER_CONTENT_LENGTH:vzt,HTTP2_HEADER_EXPECT:Ezt,HTTP2_HEADER_STATUS:xzt}}=uZ;function bzt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(bzt,"parseH2Headers");async function Izt(t,e){t[tu]=e,gJe||(gJe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=uZ.connect(t[lZ],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[CJe]});r[pE]=0,r[iB]=t,r[tu]=e,so.addListener(r,"error",wzt),so.addListener(r,"frameError",Szt),so.addListener(r,"end",_zt),so.addListener(r,"goaway",Rzt),so.addListener(r,"close",function(){let{[iB]:i}=this,{[tu]:o}=i,a=this[tu][dA]||this[dA]||new PO("closed",so.getSocketInfo(o));if(i[uA]=null,i.destroyed){mh(i[fzt]===0);let c=i[bT].splice(i[lA]);for(let l=0;l<c.length;l++){let u=c[l];so.errorRequest(i,u,a)}}}),r.unref(),t[uA]=r,e[uA]=r,so.addListener(e,"error",function(i){mh(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[dA]=i,this[iB][nve](i)}),so.addListener(e,"end",function(){so.destroy(this,new PO("other side closed",so.getSocketInfo(this)))}),so.addListener(e,"close",function(){let i=this[dA]||new PO("closed",so.getSocketInfo(this));t[tu]=null,this[uA]!=null&&this[uA].destroy(i),t[rve]=t[lA],mh(t[fZ]===0),t.emit("disconnect",t[lZ],[t],i),t[IT]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return Pzt(t,...i)},resume(){Tzt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Izt,"connectH2");function Tzt(t){let e=t[tu];e?.destroyed===!1&&(t[mzt]===0&&t[CJe]===0?(e.unref(),t[uA].unref()):(e.ref(),t[uA].ref()))}s(Tzt,"resumeH2");function wzt(t){mh(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[tu][dA]=t,this[iB][nve](t)}s(wzt,"onHttp2SessionError");function Szt(t,e,r){if(r===0){let n=new tve(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[tu][dA]=n,this[iB][nve](n)}}s(Szt,"onHttp2FrameError");function _zt(){let t=new PO("other side closed",so.getSocketInfo(this[tu]));this.destroy(t),so.destroy(this[tu],t)}s(_zt,"onHttp2SessionEnd");function Rzt(t){let e=this[dA]||new PO(`HTTP/2: "GOAWAY" frame received with code ${t}`,so.getSocketInfo(this)),r=this[iB];if(r[tu]=null,r[hzt]=null,this[uA]!=null&&(this[uA].destroy(e),this[uA]=null),so.destroy(this[tu],e),r[lA]<r[bT].length){let n=r[bT][r[lA]];r[bT][r[lA]++]=null,so.errorRequest(r,n,e),r[rve]=r[lA]}mh(r[fZ]===0),r.emit("disconnect",r[lZ],[r],e),r[IT]()}s(Rzt,"onHTTP2GoAway");function kzt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(kzt,"shouldSendContentLength");function Pzt(t,e){let r=t[uA],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:d}=e;if(a)return so.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let R=0;R<u.length;R+=2){let D=u[R+0],N=u[R+1];if(Array.isArray(N))for(let O=0;O<N.length;O++)p[D]?p[D]+=`,${N[O]}`:p[D]=N[O];else p[D]=N}let m,{hostname:h,port:g}=t[lZ];p[gzt]=o||`${h}${g?`:${g}`:""}`,p[Azt]=n;let A=s(R=>{e.aborted||e.completed||(R=R||new mJe,so.errorRequest(t,e,R),m!=null&&so.destroy(m,R),so.destroy(d,R),t[bT][t[lA]++]=null,t[IT]())},"abort");try{e.onConnect(A)}catch(R){so.errorRequest(t,e,R)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[pE],t[bT][t[lA]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[pE],t[bT][t[lA]++]=null}),m.once("close",()=>{r[pE]-=1,r[pE]===0&&r.unref()}),!0;p[yzt]=i,p[Czt]="https";let y=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let E=so.bodyLength(d);if(so.isFormDataLike(d)){hJe??=eB().extractBody;let[R,D]=hJe(d);p["content-type"]=D,d=R.stream,E=R.length}if(E==null&&(E=e.contentLength),(E===0||!y)&&(E=null),kzt(n)&&E>0&&e.contentLength!=null&&e.contentLength!==E){if(t[pzt])return so.errorRequest(t,e,new eve),!1;process.emitWarning(new eve)}E!=null&&(mh(d,"no body must not have content length"),p[vzt]=`${E}`),r.ref();let b=n==="GET"||n==="HEAD"||d===null;return c?(p[Ezt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",w)):(m=r.request(p,{endStream:b,signal:l}),w()),++r[pE],m.once("response",R=>{let{[xzt]:D,...N}=R;if(e.onResponseStarted(),e.aborted){let O=new mJe;so.errorRequest(t,e,O),so.destroy(m,O);return}e.onHeaders(Number(D),bzt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",O=>{e.onData(O)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[pE]===0&&r.unref(),A(new tve("HTTP/2: stream half-closed (remote)")),t[bT][t[lA]++]=null,t[rve]=t[lA],t[IT]()}),m.once("close",()=>{r[pE]-=1,r[pE]===0&&r.unref()}),m.once("error",function(R){A(R)}),m.once("frameError",(R,D)=>{A(new tve(`HTTP/2: "frameError" received - type ${R}, code ${D}`))}),!0;function w(){!d||E===0?AJe(A,m,null,t,e,t[tu],E,y):so.isBuffer(d)?AJe(A,m,d,t,e,t[tu],E,y):so.isBlobLike(d)?typeof d.stream=="function"?yJe(A,m,d.stream(),t,e,t[tu],E,y):Bzt(A,m,d,t,e,t[tu],E,y):so.isStream(d)?Dzt(A,t[tu],y,m,d,t,e,E):so.isIterable(d)?yJe(A,m,d,t,e,t[tu],E,y):mh(!1)}s(w,"writeBodyH2")}s(Pzt,"writeH2");function AJe(t,e,r,n,i,o,a,c){try{r!=null&&so.isBuffer(r)&&(mh(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[dZ]=!0),i.onRequestSent(),n[IT]()}catch(l){t(l)}}s(AJe,"writeBuffer");function Dzt(t,e,r,n,i,o,a,c){mh(c!==0||o[fZ]===0,"stream body cannot be pipelined");let l=dzt(i,n,d=>{d?(so.destroy(l,d),t(d)):(so.removeAllListeners(l),a.onRequestSent(),r||(e[dZ]=!0),o[IT]())});so.addListener(l,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(Dzt,"writeStream");async function Bzt(t,e,r,n,i,o,a,c){mh(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new eve;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[dZ]=!0),n[IT]()}catch(l){t(l)}}s(Bzt,"writeBlob");async function yJe(t,e,r,n,i,o,a,c){mh(a!==0||n[fZ]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{mh(l===null),o[dA]?m(o[dA]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[dA])throw o[dA];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),c||(o[dZ]=!0),n[IT]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(yJe,"writeIterable");vJe.exports=Izt});var mZ=q((hsi,IJe)=>{"use strict";f();var SC=Ni(),{kBodyUsed:DO}=ba(),ove=require("node:assert"),{InvalidArgumentError:Nzt}=$o(),Lzt=require("node:events"),Mzt=[300,301,302,303,307,308],xJe=Symbol("body"),pZ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[xJe]=e,this[DO]=!1}async*[Symbol.asyncIterator](){ove(!this[DO],"disturbed"),this[DO]=!0,yield*this[xJe]}},ive=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new Nzt("maxRedirections must be a positive number");SC.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,SC.isStream(this.opts.body)?(SC.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){ove(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[DO]=!1,Lzt.prototype.on.call(this.opts.body,"data",function(){this[DO]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new pZ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&SC.isIterable(this.opts.body)&&(this.opts.body=new pZ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||SC.isDisturbed(this.opts.body)?null:Fzt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=SC.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=Ozt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function Fzt(t,e){if(Mzt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&SC.headerNameToString(e[r])==="location")return e[r+1]}s(Fzt,"parseLocation");function bJe(t,e,r){if(t.length===4)return SC.headerNameToString(t)==="host";if(e&&SC.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=SC.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(bJe,"shouldRemoveHeader");function Ozt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)bJe(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))bJe(i,e,r)||n.push(i,t[i]);else ove(t==null,"headers must be an object or an array");return n}s(Ozt,"cleanRequestHeaders");IJe.exports=ive});var hZ=q((ysi,TJe)=>{"use strict";f();var Qzt=mZ();function Uzt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new Qzt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(Uzt,"createRedirectInterceptor");TJe.exports=Uzt});var QO=q((Esi,LJe)=>{"use strict";f();var mE=require("node:assert"),PJe=require("node:net"),qzt=require("node:http"),yR=Ni(),{channels:oB}=q3(),Hzt=HYe(),Wzt=j3(),{InvalidArgumentError:Sc,InformationalError:$zt,ClientDestroyedError:jzt}=$o(),Gzt=CO(),{kUrl:_C,kServerName:TT,kClient:Vzt,kBusy:sve,kConnect:zzt,kResuming:CR,kRunning:FO,kPending:OO,kSize:MO,kQueue:fA,kConnected:Yzt,kConnecting:sB,kNeedDrain:ST,kKeepAliveDefaultTimeout:wJe,kHostHeader:Kzt,kPendingIdx:pA,kRunningIdx:hE,kError:Jzt,kPipelining:gZ,kKeepAliveTimeoutValue:Xzt,kMaxHeadersSize:Zzt,kKeepAliveMaxTimeout:eYt,kKeepAliveTimeoutThreshold:tYt,kHeadersTimeout:rYt,kBodyTimeout:nYt,kStrictContentLength:iYt,kConnector:BO,kMaxRedirections:oYt,kMaxRequests:ave,kCounter:sYt,kClose:aYt,kDestroy:cYt,kDispatch:lYt,kInterceptors:SJe,kLocalAddress:NO,kMaxResponseSize:uYt,kOnError:dYt,kHTTPContext:_c,kMaxConcurrentStreams:fYt,kResume:LO}=ba(),pYt=pJe(),mYt=EJe(),_Je=!1,wT=Symbol("kClosedResolve"),RJe=s(()=>{},"noop");function DJe(t){return t[gZ]??t[_c]?.defaultPipelining??1}s(DJe,"getPipelining");var cve=class extends Wzt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:A,pipelining:y,tls:E,strictContentLength:b,maxCachedSessions:w,maxRedirections:R,connect:D,maxRequestsPerClient:N,localAddress:O,maxResponseSize:Y,autoSelectFamily:ee,autoSelectFamilyAttemptTimeout:V,maxConcurrentStreams:H,allowH2:U}={}){if(super(),d!==void 0)throw new Sc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Sc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Sc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Sc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Sc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Sc("invalid maxHeaderSize");if(A!=null&&typeof A!="string")throw new Sc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new Sc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Sc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Sc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Sc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Sc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new Sc("bodyTimeout must be a positive integer or zero");if(D!=null&&typeof D!="function"&&typeof D!="object")throw new Sc("connect must be a function or an object");if(R!=null&&(!Number.isInteger(R)||R<0))throw new Sc("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Sc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||PJe.isIP(O)===0))throw new Sc("localAddress must be valid string IP address");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new Sc("maxResponseSize must be a positive number");if(V!=null&&(!Number.isInteger(V)||V<-1))throw new Sc("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Sc("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Sc("maxConcurrentStreams must be a positive integer, greater than 0");typeof D!="function"&&(D=Gzt({...E,maxCachedSessions:w,allowH2:U,socketPath:A,timeout:c,...ee?{autoSelectFamily:ee,autoSelectFamilyAttemptTimeout:V}:void 0,...D})),r?.Client&&Array.isArray(r.Client)?(this[SJe]=r.Client,_Je||(_Je=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[SJe]=[hYt({maxRedirections:R})],this[_C]=yR.parseOrigin(e),this[BO]=D,this[gZ]=y??1,this[Zzt]=n||qzt.maxHeaderSize,this[wJe]=p??4e3,this[eYt]=h??6e5,this[tYt]=g??2e3,this[Xzt]=this[wJe],this[TT]=null,this[NO]=O??null,this[CR]=0,this[ST]=0,this[Kzt]=`host: ${this[_C].hostname}${this[_C].port?`:${this[_C].port}`:""}\r
`,this[nYt]=l??3e5,this[rYt]=i??3e5,this[iYt]=b??!0,this[oYt]=R,this[ave]=N,this[wT]=null,this[uYt]=Y>-1?Y:-1,this[fYt]=H??100,this[_c]=null,this[fA]=[],this[hE]=0,this[pA]=0,this[LO]=X=>lve(this,X),this[dYt]=X=>BJe(this,X)}get pipelining(){return this[gZ]}set pipelining(e){this[gZ]=e,this[LO](!0)}get[OO](){return this[fA].length-this[pA]}get[FO](){return this[pA]-this[hE]}get[MO](){return this[fA].length-this[hE]}get[Yzt](){return!!this[_c]&&!this[sB]&&!this[_c].destroyed}get[sve](){return!!(this[_c]?.busy(null)||this[MO]>=(DJe(this)||1)||this[OO]>0)}[zzt](e){NJe(this),this.once("connect",e)}[lYt](e,r){let n=e.origin||this[_C].origin,i=new Hzt(n,e,r);return this[fA].push(i),this[CR]||(yR.bodyLength(i.body)==null&&yR.isIterable(i.body)?(this[CR]=1,queueMicrotask(()=>lve(this))):this[LO](!0)),this[CR]&&this[ST]!==2&&this[sve]&&(this[ST]=2),this[ST]<2}async[aYt](){return new Promise(e=>{this[MO]?this[wT]=e:e(null)})}async[cYt](e){return new Promise(r=>{let n=this[fA].splice(this[pA]);for(let o=0;o<n.length;o++){let a=n[o];yR.errorRequest(this,a,e)}let i=s(()=>{this[wT]&&(this[wT](),this[wT]=null),r(null)},"callback");this[_c]?(this[_c].destroy(e,i),this[_c]=null):queueMicrotask(i),this[LO]()})}},hYt=hZ();function BJe(t,e){if(t[FO]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){mE(t[pA]===t[hE]);let r=t[fA].splice(t[hE]);for(let n=0;n<r.length;n++){let i=r[n];yR.errorRequest(t,i,e)}mE(t[MO]===0)}}s(BJe,"onError");async function NJe(t){mE(!t[sB]),mE(!t[_c]);let{host:e,hostname:r,protocol:n,port:i}=t[_C];if(r[0]==="["){let o=r.indexOf("]");mE(o!==-1);let a=r.substring(1,o);mE(PJe.isIP(a)),r=a}t[sB]=!0,oB.beforeConnect.hasSubscribers&&oB.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[_c]?.version,servername:t[TT],localAddress:t[NO]},connector:t[BO]});try{let o=await new Promise((a,c)=>{t[BO]({host:e,hostname:r,protocol:n,port:i,servername:t[TT],localAddress:t[NO]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){yR.destroy(o.on("error",RJe),new jzt);return}mE(o);try{t[_c]=o.alpnProtocol==="h2"?await mYt(t,o):await pYt(t,o)}catch(a){throw o.destroy().on("error",RJe),a}t[sB]=!1,o[sYt]=0,o[ave]=t[ave],o[Vzt]=t,o[Jzt]=null,oB.connected.hasSubscribers&&oB.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[_c]?.version,servername:t[TT],localAddress:t[NO]},connector:t[BO],socket:o}),t.emit("connect",t[_C],[t])}catch(o){if(t.destroyed)return;if(t[sB]=!1,oB.connectError.hasSubscribers&&oB.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[_c]?.version,servername:t[TT],localAddress:t[NO]},connector:t[BO],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(mE(t[FO]===0);t[OO]>0&&t[fA][t[pA]].servername===t[TT];){let a=t[fA][t[pA]++];yR.errorRequest(t,a,o)}else BJe(t,o);t.emit("connectionError",t[_C],[t],o)}t[LO]()}s(NJe,"connect");function kJe(t){t[ST]=0,t.emit("drain",t[_C],[t])}s(kJe,"emitDrain");function lve(t,e){t[CR]!==2&&(t[CR]=2,gYt(t,e),t[CR]=0,t[hE]>256&&(t[fA].splice(0,t[hE]),t[pA]-=t[hE],t[hE]=0))}s(lve,"resume");function gYt(t,e){for(;;){if(t.destroyed){mE(t[OO]===0);return}if(t[wT]&&!t[MO]){t[wT](),t[wT]=null;return}if(t[_c]&&t[_c].resume(),t[sve])t[ST]=2;else if(t[ST]===2){e?(t[ST]=1,queueMicrotask(()=>kJe(t))):kJe(t);continue}if(t[OO]===0||t[FO]>=(DJe(t)||1))return;let r=t[fA][t[pA]];if(t[_C].protocol==="https:"&&t[TT]!==r.servername){if(t[FO]>0)return;t[TT]=r.servername,t[_c]?.destroy(new $zt("servername changed"),()=>{t[_c]=null,lve(t)})}if(t[sB])return;if(!t[_c]){NJe(t);return}if(t[_c].destroyed||t[_c].busy(r))return;!r.aborted&&t[_c].write(r)?t[pA]++:t[fA].splice(t[pA],1)}}s(gYt,"_resume");LJe.exports=cve});var uve=q((Tsi,MJe)=>{"use strict";f();var AZ=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};MJe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new AZ}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new AZ),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var OJe=q((_si,FJe)=>{f();var{kFree:AYt,kConnected:yYt,kPending:CYt,kQueued:vYt,kRunning:EYt,kSize:xYt}=ba(),vR=Symbol("pool"),dve=class{static{s(this,"PoolStats")}constructor(e){this[vR]=e}get connected(){return this[vR][yYt]}get free(){return this[vR][AYt]}get pending(){return this[vR][CYt]}get queued(){return this[vR][vYt]}get running(){return this[vR][EYt]}get size(){return this[vR][xYt]}};FJe.exports=dve});var Ave=q((Psi,zJe)=>{"use strict";f();var bYt=j3(),IYt=uve(),{kConnected:fve,kSize:QJe,kRunning:UJe,kPending:qJe,kQueued:UO,kBusy:TYt,kFree:wYt,kUrl:SYt,kClose:_Yt,kDestroy:RYt,kDispatch:kYt}=ba(),PYt=OJe(),m0=Symbol("clients"),mf=Symbol("needDrain"),qO=Symbol("queue"),pve=Symbol("closed resolve"),mve=Symbol("onDrain"),HJe=Symbol("onConnect"),WJe=Symbol("onDisconnect"),$Je=Symbol("onConnectionError"),hve=Symbol("get dispatcher"),GJe=Symbol("add client"),VJe=Symbol("remove client"),jJe=Symbol("stats"),gve=class extends bYt{static{s(this,"PoolBase")}constructor(){super(),this[qO]=new IYt,this[m0]=[],this[UO]=0;let e=this;this[mve]=s(function(n,i){let o=e[qO],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[UO]--,a=!this.dispatch(c.opts,c.handler)}this[mf]=a,!this[mf]&&e[mf]&&(e[mf]=!1,e.emit("drain",n,[e,...i])),e[pve]&&o.isEmpty()&&Promise.all(e[m0].map(c=>c.close())).then(e[pve])},"onDrain"),this[HJe]=(r,n)=>{e.emit("connect",r,[e,...n])},this[WJe]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[$Je]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[jJe]=new PYt(this)}get[TYt](){return this[mf]}get[fve](){return this[m0].filter(e=>e[fve]).length}get[wYt](){return this[m0].filter(e=>e[fve]&&!e[mf]).length}get[qJe](){let e=this[UO];for(let{[qJe]:r}of this[m0])e+=r;return e}get[UJe](){let e=0;for(let{[UJe]:r}of this[m0])e+=r;return e}get[QJe](){let e=this[UO];for(let{[QJe]:r}of this[m0])e+=r;return e}get stats(){return this[jJe]}async[_Yt](){this[qO].isEmpty()?await Promise.all(this[m0].map(e=>e.close())):await new Promise(e=>{this[pve]=e})}async[RYt](e){for(;;){let r=this[qO].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[m0].map(r=>r.destroy(e)))}[kYt](e,r){let n=this[hve]();return n?n.dispatch(e,r)||(n[mf]=!0,this[mf]=!this[hve]()):(this[mf]=!0,this[qO].push({opts:e,handler:r}),this[UO]++),!this[mf]}[GJe](e){return e.on("drain",this[mve]).on("connect",this[HJe]).on("disconnect",this[WJe]).on("connectionError",this[$Je]),this[m0].push(e),this[mf]&&queueMicrotask(()=>{this[mf]&&this[mve](e[SYt],[this,e])}),this}[VJe](e){e.close(()=>{let r=this[m0].indexOf(e);r!==-1&&this[m0].splice(r,1)}),this[mf]=this[m0].some(r=>!r[mf]&&r.closed!==!0&&r.destroyed!==!0)}};zJe.exports={PoolBase:gve,kClients:m0,kNeedDrain:mf,kAddClient:GJe,kRemoveClient:VJe,kGetDispatcher:hve}});var aB=q((Nsi,XJe)=>{"use strict";f();var{PoolBase:DYt,kClients:yZ,kNeedDrain:BYt,kAddClient:NYt,kGetDispatcher:LYt}=Ave(),MYt=QO(),{InvalidArgumentError:yve}=$o(),YJe=Ni(),{kUrl:KJe,kInterceptors:FYt}=ba(),OYt=CO(),Cve=Symbol("options"),vve=Symbol("connections"),JJe=Symbol("factory");function QYt(t,e){return new MYt(t,e)}s(QYt,"defaultFactory");var Eve=class extends DYt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=QYt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new yve("invalid connections");if(typeof n!="function")throw new yve("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new yve("connect must be a function or an object");typeof i!="function"&&(i=OYt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[FYt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[vve]=r||null,this[KJe]=YJe.parseOrigin(e),this[Cve]={...YJe.deepClone(m),connect:i,allowH2:p},this[Cve].interceptors=m.interceptors?{...m.interceptors}:void 0,this[JJe]=n,this.on("connectionError",(h,g,A)=>{for(let y of g){let E=this[yZ].indexOf(y);E!==-1&&this[yZ].splice(E,1)}})}[LYt](){for(let e of this[yZ])if(!e[BYt])return e;if(!this[vve]||this[yZ].length<this[vve]){let e=this[JJe](this[KJe],this[Cve]);return this[NYt](e),e}}};XJe.exports=Eve});var nXe=q((Fsi,rXe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:UYt,InvalidArgumentError:qYt}=$o(),{PoolBase:HYt,kClients:wd,kNeedDrain:HO,kAddClient:WYt,kRemoveClient:$Yt,kGetDispatcher:jYt}=Ave(),GYt=aB(),{kUrl:xve,kInterceptors:VYt}=ba(),{parseOrigin:ZJe}=Ni(),eXe=Symbol("factory"),CZ=Symbol("options"),tXe=Symbol("kGreatestCommonDivisor"),ER=Symbol("kCurrentWeight"),xR=Symbol("kIndex"),hh=Symbol("kWeight"),vZ=Symbol("kMaxWeightPerServer"),EZ=Symbol("kErrorPenalty");function zYt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(zYt,"getGreatestCommonDivisor");function YYt(t,e){return new GYt(t,e)}s(YYt,"defaultFactory");var bve=class extends HYt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=YYt,...n}={}){if(super(),this[CZ]=n,this[xR]=-1,this[ER]=0,this[vZ]=this[CZ].maxWeightPerServer||100,this[EZ]=this[CZ].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new qYt("factory must be a function.");this[VYt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[eXe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=ZJe(e).origin;if(this[wd].find(i=>i[xve].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[eXe](r,Object.assign({},this[CZ]));this[WYt](n),n.on("connect",()=>{n[hh]=Math.min(this[vZ],n[hh]+this[EZ])}),n.on("connectionError",()=>{n[hh]=Math.max(1,n[hh]-this[EZ]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[hh]=Math.max(1,n[hh]-this[EZ]),this._updateBalancedPoolStats())});for(let i of this[wd])i[hh]=this[vZ];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[wd].length;r++)e=zYt(this[wd][r][hh],e);this[tXe]=e}removeUpstream(e){let r=ZJe(e).origin,n=this[wd].find(i=>i[xve].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[$Yt](n),this}get upstreams(){return this[wd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[xve].origin)}[jYt](){if(this[wd].length===0)throw new UYt;if(!this[wd].find(o=>!o[HO]&&o.closed!==!0&&o.destroyed!==!0)||this[wd].map(o=>o[HO]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[wd].findIndex(o=>!o[HO]);for(;n++<this[wd].length;){this[xR]=(this[xR]+1)%this[wd].length;let o=this[wd][this[xR]];if(o[hh]>this[wd][i][hh]&&!o[HO]&&(i=this[xR]),this[xR]===0&&(this[ER]=this[ER]-this[tXe],this[ER]<=0&&(this[ER]=this[vZ])),o[hh]>=this[ER]&&!o[HO])return o}return this[ER]=this[wd][i][hh],this[xR]=i,this[wd][i]}};rXe.exports=bve});var cB=q((Usi,uXe)=>{"use strict";f();var{InvalidArgumentError:xZ}=$o(),{kClients:_T,kRunning:iXe,kClose:KYt,kDestroy:JYt,kDispatch:XYt,kInterceptors:ZYt}=ba(),eKt=j3(),tKt=aB(),rKt=QO(),nKt=Ni(),iKt=hZ(),oXe=Symbol("onConnect"),sXe=Symbol("onDisconnect"),aXe=Symbol("onConnectionError"),oKt=Symbol("maxRedirections"),cXe=Symbol("onDrain"),lXe=Symbol("factory"),Ive=Symbol("options");function sKt(t,e){return e&&e.connections===1?new rKt(t,e):new tKt(t,e)}s(sKt,"defaultFactory");var Tve=class extends eKt{static{s(this,"Agent")}constructor({factory:e=sKt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new xZ("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new xZ("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new xZ("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[ZYt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[iKt({maxRedirections:r})],this[Ive]={...nKt.deepClone(i),connect:n},this[Ive].interceptors=i.interceptors?{...i.interceptors}:void 0,this[oKt]=r,this[lXe]=e,this[_T]=new Map,this[cXe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[oXe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[sXe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[aXe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[iXe](){let e=0;for(let r of this[_T].values())e+=r[iXe];return e}[XYt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new xZ("opts.origin must be a non-empty string or URL.");let i=this[_T].get(n);return i||(i=this[lXe](e.origin,this[Ive]).on("drain",this[cXe]).on("connect",this[oXe]).on("disconnect",this[sXe]).on("connectionError",this[aXe]),this[_T].set(n,i)),i.dispatch(e,r)}async[KYt](){let e=[];for(let r of this[_T].values())e.push(r.close());this[_T].clear(),await Promise.all(e)}async[JYt](e){let r=[];for(let n of this[_T].values())r.push(n.destroy(e));this[_T].clear(),await Promise.all(r)}};uXe.exports=Tve});var _ve=q((Wsi,mXe)=>{"use strict";f();var{kProxy:aKt,kClose:cKt,kDestroy:lKt,kInterceptors:uKt}=ba(),{URL:WO}=require("node:url"),dKt=cB(),fKt=aB(),pKt=j3(),{InvalidArgumentError:TZ,RequestAbortedError:mKt,SecureProxyConnectionError:hKt}=$o(),dXe=CO(),bZ=Symbol("proxy agent"),IZ=Symbol("proxy client"),$O=Symbol("proxy headers"),wve=Symbol("request tls settings"),fXe=Symbol("proxy tls settings"),pXe=Symbol("connect endpoint function");function gKt(t){return t==="https:"?443:80}s(gKt,"defaultProtocolPort");function AKt(t,e){return new fKt(t,e)}s(AKt,"defaultFactory");var yKt=s(()=>{},"noop"),Sve=class extends pKt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof WO)&&!e.uri)throw new TZ("Proxy uri is mandatory");let{clientFactory:r=AKt}=e;if(typeof r!="function")throw new TZ("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:d}=n;if(this[aKt]={uri:i,protocol:c},this[uKt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[wve]=e.requestTls,this[fXe]=e.proxyTls,this[$O]=e.headers||{},e.auth&&e.token)throw new TZ("opts.auth cannot be used in combination with opts.token");e.auth?this[$O]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[$O]["proxy-authorization"]=e.token:l&&u&&(this[$O]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=dXe({...e.proxyTls});this[pXe]=dXe({...e.requestTls}),this[IZ]=r(n,{connect:p}),this[bZ]=new dKt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${gKt(m.protocol)}`);try{let{socket:A,statusCode:y}=await this[IZ].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[$O],host:m.host},servername:this[fXe]?.servername||d});if(y!==200&&(A.on("error",yKt).destroy(),h(new mKt(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,A);return}let E;this[wve]?E=this[wve].servername:E=m.servername,this[pXe]({...m,servername:E,httpSocket:A},h)}catch(A){A.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new hKt(A)):h(A)}},"connect")})}dispatch(e,r){let n=CKt(e.headers);if(vKt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new WO(e.origin);n.host=i}return this[bZ].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new WO(e):e instanceof WO?e:new WO(e.uri)}async[cKt](){await this[bZ].close(),await this[IZ].close()}async[lKt](){await this[bZ].destroy(),await this[IZ].destroy()}};function CKt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(CKt,"buildHeaders");function vKt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new TZ("Proxy-Authorization should be sent in ProxyAgent constructor")}s(vKt,"throwIfProxyAuthIsSent");mXe.exports=Sve});var vXe=q((Gsi,CXe)=>{"use strict";f();var EKt=j3(),{kClose:xKt,kDestroy:bKt,kClosed:hXe,kDestroyed:gXe,kDispatch:IKt,kNoProxyAgent:jO,kHttpProxyAgent:RT,kHttpsProxyAgent:bR}=ba(),AXe=_ve(),TKt=cB(),wKt={"http:":80,"https:":443},yXe=!1,Rve=class extends EKt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,yXe||(yXe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[jO]=new TKt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[RT]=new AXe({...o,uri:a}):this[RT]=this[jO];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[bR]=new AXe({...o,uri:c}):this[bR]=this[RT],this.#o()}[IKt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[xKt](){await this[jO].close(),this[RT][hXe]||await this[RT].close(),this[bR][hXe]||await this[bR].close()}async[bKt](e){await this[jO].destroy(e),this[RT][gXe]||await this[RT].destroy(e),this[bR][gXe]||await this[bR].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||wKt[r]||0,this.#r(n,i)?r==="https:"?this[bR]:this[RT]:this[jO]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};CXe.exports=Rve});var wZ=q((Ysi,IXe)=>{"use strict";f();var lB=require("node:assert"),{kRetryHandlerDefaultRetry:EXe}=ba(),{RequestRetryError:GO}=$o(),{isDisturbed:xXe,parseHeaders:SKt,parseRangeHeader:bXe,wrapRequestBody:_Kt}=Ni();function RKt(t){let e=Date.now();return new Date(t).getTime()-e}s(RKt,"calculateRetryAfterHeader");var kve=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:_Kt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[EXe],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[EXe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:A,methods:y}=u,{counter:E}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!A.includes(a)){i(e);return}if(Array.isArray(y)&&!y.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(E>d){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?RKt(b):b*1e3);let w=b>0?Math.min(b,m):Math.min(p*h**(E-1),m);setTimeout(()=>i(null),w)}onHeaders(e,r,n,i){let o=SKt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new GO("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new GO("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=bXe(o["content-range"]);if(!c)return this.abort(new GO("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new GO("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:d=u-1}=c;return lB(this.start===l,"content-range mismatch"),lB(this.end==null||this.end===d,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=bXe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:d=u-1}=c;lB(l!=null&&Number.isFinite(l),"content-range mismatch"),lB(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=l,this.end=d}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return lB(Number.isFinite(this.start)),lB(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new GO("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||xXe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||xXe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};IXe.exports=kve});var wXe=q((Xsi,TXe)=>{"use strict";f();var kKt=AO(),PKt=wZ(),Pve=class extends kKt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new PKt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};TXe.exports=Pve});var Fve=q((tai,LXe)=>{"use strict";f();var PXe=require("node:assert"),{Readable:DKt}=require("node:stream"),{RequestAbortedError:DXe,NotSupportedError:BKt,InvalidArgumentError:NKt,AbortError:Dve}=$o(),BXe=Ni(),{ReadableStreamFrom:LKt}=Ni(),_p=Symbol("kConsume"),VO=Symbol("kReading"),kT=Symbol("kBody"),SXe=Symbol("kAbort"),NXe=Symbol("kContentType"),_Xe=Symbol("kContentLength"),MKt=s(()=>{},"noop"),Bve=class extends DKt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[SXe]=r,this[_p]=null,this[kT]=null,this[NXe]=n,this[_Xe]=i,this[VO]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new DXe),e&&this[SXe](),super.destroy(e)}_destroy(e,r){this[VO]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[VO]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[VO]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[_p]&&e!==null?(Lve(this[_p],e),this[VO]?super.push(e):!0):super.push(e)}async text(){return zO(this,"text")}async json(){return zO(this,"json")}async blob(){return zO(this,"blob")}async bytes(){return zO(this,"bytes")}async arrayBuffer(){return zO(this,"arrayBuffer")}async formData(){throw new BKt}get bodyUsed(){return BXe.isDisturbed(this)}get body(){return this[kT]||(this[kT]=LKt(this),this[_p]&&(this[kT].getReader(),PXe(this[kT].locked))),this[kT]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new NKt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[_Xe]>r&&this.destroy(new Dve);let a=s(()=>{this.destroy(n.reason??new Dve)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new Dve):i(null)}).on("error",MKt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function FKt(t){return t[kT]&&t[kT].locked===!0||t[_p]}s(FKt,"isLocked");function OKt(t){return BXe.isDisturbed(t)||FKt(t)}s(OKt,"isUnusable");async function zO(t,e){return PXe(!t[_p]),new Promise((r,n)=>{if(OKt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[_p]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){Mve(this[_p],i)}).on("close",function(){this[_p].body!==null&&Mve(this[_p],new DXe)}),QKt(t[_p])})})}s(zO,"consume");function QKt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)Lve(t,e.buffer[i])}else for(let r of e.buffer)Lve(t,r);for(e.endEmitted?kXe(this[_p]):t.stream.on("end",function(){kXe(this[_p])}),t.stream.resume();t.stream.read()!=null;);}s(QKt,"consumeStart");function Nve(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(Nve,"chunksDecode");function RXe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(RXe,"chunksConcat");function kXe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(Nve(r,o)):e==="json"?n(JSON.parse(Nve(r,o))):e==="arrayBuffer"?n(RXe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[NXe]})):e==="bytes"&&n(RXe(r,o)),Mve(t)}catch(a){i.destroy(a)}}s(kXe,"consumeEnd");function Lve(t,e){t.length+=e.length,t.body.push(e)}s(Lve,"consumePush");function Mve(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(Mve,"consumeFinish");LXe.exports={Readable:Bve,chunksDecode:Nve}});var Ove=q((iai,UXe)=>{f();var UKt=require("node:assert"),{ResponseStatusCodeError:MXe}=$o(),{chunksDecode:FXe}=Fve(),qKt=128*1024;async function HKt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){UKt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>qKt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new MXe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{OXe(r)?d=JSON.parse(FXe(a,c)):QXe(r)&&(d=FXe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new MXe(l,n,o,d)))}s(HKt,"getResolveErrorBodyCallback");var OXe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),QXe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");UXe.exports={getResolveErrorBodyCallback:HKt,isContentTypeApplicationJson:OXe,isContentTypeText:QXe}});var WXe=q((aai,Qve)=>{"use strict";f();var WKt=require("node:assert"),{Readable:$Kt}=Fve(),{InvalidArgumentError:uB,RequestAbortedError:qXe}=$o(),Rp=Ni(),{getResolveErrorBodyCallback:jKt}=Ove(),{AsyncResource:GKt}=require("node:async_hooks"),SZ=class extends GKt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new uB("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:d}=e;try{if(typeof r!="function")throw new uB("invalid callback");if(d&&(typeof d!="number"||d<0))throw new uB("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new uB("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new uB("invalid method");if(c&&typeof c!="function")throw new uB("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw Rp.isStream(a)&&Rp.destroy(a.on("error",Rp.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=d,this.signal=n,this.reason=null,this.removeAbortListener=null,Rp.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new qXe:this.removeAbortListener=Rp.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new qXe,this.res?Rp.destroy(this.res.on("error",Rp.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}WKt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?Rp.parseRawHeaders(r):Rp.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?Rp.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],A=new $Kt({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&A.on("close",this.removeAbortListener),this.callback=null,this.res=A,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(jKt,null,{callback:o,body:A,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:A,context:l}))}onData(e){return this.res.push(e)}onComplete(e){Rp.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{Rp.destroy(r,e)})),i&&(this.body=null,Rp.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function HXe(t,e){if(e===void 0)return new Promise((r,n)=>{HXe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new SZ(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(HXe,"request");Qve.exports=HXe;Qve.exports.RequestHandler=SZ});var YO=q((uai,GXe)=>{f();var{addAbortListener:VKt}=Ni(),{RequestAbortedError:zKt}=$o(),dB=Symbol("kListener"),RC=Symbol("kSignal");function $Xe(t){t.abort?t.abort(t[RC]?.reason):t.reason=t[RC]?.reason??new zKt,jXe(t)}s($Xe,"abort");function YKt(t,e){if(t.reason=null,t[RC]=null,t[dB]=null,!!e){if(e.aborted){$Xe(t);return}t[RC]=e,t[dB]=()=>{$Xe(t)},VKt(t[RC],t[dB])}}s(YKt,"addSignal");function jXe(t){t[RC]&&("removeEventListener"in t[RC]?t[RC].removeEventListener("abort",t[dB]):t[RC].removeListener("abort",t[dB]),t[RC]=null,t[dB]=null)}s(jXe,"removeSignal");GXe.exports={addSignal:YKt,removeSignal:jXe}});var KXe=q((pai,YXe)=>{"use strict";f();var KKt=require("node:assert"),{finished:JKt,PassThrough:XKt}=require("node:stream"),{InvalidArgumentError:fB,InvalidReturnValueError:ZKt}=$o(),mA=Ni(),{getResolveErrorBodyCallback:eJt}=Ove(),{AsyncResource:tJt}=require("node:async_hooks"),{addSignal:rJt,removeSignal:VXe}=YO(),Uve=class extends tJt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new fB("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:d}=e;try{if(typeof n!="function")throw new fB("invalid callback");if(typeof r!="function")throw new fB("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new fB("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new fB("invalid method");if(l&&typeof l!="function")throw new fB("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw mA.isStream(c)&&mA.destroy(c.on("error",mA.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=d||!1,mA.isStream(c)&&c.on("error",p=>{this.onError(p)}),rJt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}KKt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,d=u==="raw"?mA.parseRawHeaders(r):mA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?mA.parseHeaders(r):d)["content-type"];p=new XKt,this.callback=null,this.runInAsyncScope(eJt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new ZKt("expected Writable");JKt(p,{readable:!1},h=>{let{callback:g,res:A,opaque:y,trailers:E,abort:b}=this;this.res=null,(h||!A.readable)&&mA.destroy(A,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:y,trailers:E}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;VXe(this),r&&(this.trailers=mA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;VXe(this),this.factory=null,r?(this.res=null,mA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,mA.destroy(o,e))}};function zXe(t,e,r){if(r===void 0)return new Promise((n,i)=>{zXe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Uve(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(zXe,"stream");YXe.exports=zXe});var eZe=q((gai,ZXe)=>{"use strict";f();var{Readable:XXe,Duplex:nJt,PassThrough:iJt}=require("node:stream"),{InvalidArgumentError:KO,InvalidReturnValueError:oJt,RequestAbortedError:qve}=$o(),gh=Ni(),{AsyncResource:sJt}=require("node:async_hooks"),{addSignal:aJt,removeSignal:cJt}=YO(),JXe=require("node:assert"),pB=Symbol("resume"),Hve=class extends XXe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[pB]=null}_read(){let{[pB]:e}=this;e&&(this[pB]=null,e())}_destroy(e,r){this._read(),r(e)}},Wve=class extends XXe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[pB]=e}_read(){this[pB]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new qve),r(e)}},$ve=class extends sJt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new KO("invalid opts");if(typeof r!="function")throw new KO("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new KO("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new KO("invalid method");if(a&&typeof a!="function")throw new KO("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new Hve().on("error",gh.nop),this.ret=new nJt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,d)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?d():p[pB]=d},"write"),destroy:s((l,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new qve),g&&l&&g(),gh.destroy(d,l),gh.destroy(p,l),gh.destroy(m,l),cJt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,aJt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}JXe(!i,"pipeline cannot be retried"),JXe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?gh.parseRawHeaders(r):gh.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new Wve(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?gh.parseRawHeaders(r):gh.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",gh.nop),l}if(!c||typeof c.on!="function")throw new oJt("expected Readable");c.on("data",l=>{let{ret:u,body:d}=this;!u.push(l)&&d.pause&&d.pause()}).on("error",l=>{let{ret:u}=this;gh.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||gh.destroy(l,new qve)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,gh.destroy(r,e)}};function lJt(t,e){try{let r=new $ve(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new iJt().destroy(r)}}s(lJt,"pipeline");ZXe.exports=lJt});var sZe=q((Cai,oZe)=>{"use strict";f();var{InvalidArgumentError:jve,SocketError:uJt}=$o(),{AsyncResource:dJt}=require("node:async_hooks"),tZe=Ni(),{addSignal:fJt,removeSignal:rZe}=YO(),nZe=require("node:assert"),Gve=class extends dJt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new jve("invalid opts");if(typeof r!="function")throw new jve("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new jve("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,fJt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}nZe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new uJt("bad upgrade",null)}onUpgrade(e,r,n){nZe(e===101);let{callback:i,opaque:o,context:a}=this;rZe(this),this.callback=null;let c=this.responseHeaders==="raw"?tZe.parseRawHeaders(r):tZe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;rZe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function iZe(t,e){if(e===void 0)return new Promise((r,n)=>{iZe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Gve(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(iZe,"upgrade");oZe.exports=iZe});var dZe=q((xai,uZe)=>{"use strict";f();var pJt=require("node:assert"),{AsyncResource:mJt}=require("node:async_hooks"),{InvalidArgumentError:Vve,SocketError:hJt}=$o(),aZe=Ni(),{addSignal:gJt,removeSignal:cZe}=YO(),zve=class extends mJt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Vve("invalid opts");if(typeof r!="function")throw new Vve("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Vve("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,gJt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}pJt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new hJt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;cZe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?aZe.parseRawHeaders(r):aZe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;cZe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function lZe(t,e){if(e===void 0)return new Promise((r,n)=>{lZe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new zve(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(lZe,"connect");uZe.exports=lZe});var fZe=q((Tai,mB)=>{"use strict";f();mB.exports.request=WXe();mB.exports.stream=KXe();mB.exports.pipeline=eZe();mB.exports.upgrade=sZe();mB.exports.connect=dZe()});var Kve=q((Sai,pZe)=>{"use strict";f();var{UndiciError:AJt}=$o(),Yve=class t extends AJt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};pZe.exports={MockNotMatchedError:Yve}});var hB=q((kai,mZe)=>{"use strict";f();mZe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var JO=q((Dai,TZe)=>{"use strict";f();var{MockNotMatchedError:IR}=Kve(),{kDispatches:_Z,kMockAgent:yJt,kOriginalDispatch:CJt,kOrigin:vJt,kGetNetConnect:EJt}=hB(),{buildURL:xJt}=Ni(),{STATUS_CODES:bJt}=require("node:http"),{types:{isPromise:IJt}}=require("node:util");function gE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(gE,"matchValue");function gZe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(gZe,"lowerCaseEntries");function AZe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):gZe(t)[e.toLocaleLowerCase()]}s(AZe,"getHeaderByName");function Zve(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Zve,"buildHeadersFromArray");function yZe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Zve(e)),t.headers(e?gZe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=AZe(e,r);if(!gE(n,i))return!1}return!0}s(yZe,"matchHeaders");function hZe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(hZe,"safeUrl");function TJt(t,{path:e,method:r,body:n,headers:i}){let o=gE(t.path,e),a=gE(t.method,r),c=typeof t.body<"u"?gE(t.body,n):!0,l=yZe(t,i);return o&&a&&c&&l}s(TJt,"matchKey");function CZe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(CZe,"getResponseData");function vZe(t,e){let r=e.query?xJt(e.path,e.query):e.path,n=typeof r=="string"?hZe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>gE(hZe(o),n));if(i.length===0)throw new IR(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>gE(o,e.method)),i.length===0)throw new IR(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?gE(o,e.body):!0),i.length===0)throw new IR(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>yZe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new IR(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(vZe,"getMockDispatch");function wJt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(wJt,"addMockDispatch");function Jve(t,e){let r=t.findIndex(n=>n.consumed?TJt(n,e):!1);r!==-1&&t.splice(r,1)}s(Jve,"deleteMockDispatch");function EZe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(EZe,"buildKey");function Xve(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Xve,"generateKeyValues");function xZe(t){return bJt[t]||"unknown"}s(xZe,"getStatusText");async function SJt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(SJt,"getResponse");function bZe(t,e){let r=EZe(t),n=vZe(this[_Z],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:d}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!d&&p>=m,n.pending=p<m,l!==null)return Jve(this[_Z],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[_Z])},u):h(this[_Z]);function h(A,y=o){let E=Array.isArray(t.headers)?Zve(t.headers):t.headers,b=typeof y=="function"?y({...t,headers:E}):y;if(IJt(b)){b.then(N=>h(A,N));return}let w=CZe(b),R=Xve(a),D=Xve(c);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,R,g,xZe(i)),e.onData?.(Buffer.from(w)),e.onComplete?.(D),Jve(A,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(bZe,"mockDispatch");function _Jt(){let t=this[yJt],e=this[vJt],r=this[CJt];return s(function(i,o){if(t.isMockActive)try{bZe.call(this,i,o)}catch(a){if(a instanceof IR){let c=t[EJt]();if(c===!1)throw new IR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(IZe(c,e))r.call(this,i,o);else throw new IR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(_Jt,"buildMockDispatch");function IZe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>gE(n,r.host)))}s(IZe,"checkNetConnect");function RJt(t){if(t){let{agent:e,...r}=t;return r}}s(RJt,"buildMockOptions");TZe.exports={getResponseData:CZe,getMockDispatch:vZe,addMockDispatch:wJt,deleteMockDispatch:Jve,buildKey:EZe,generateKeyValues:Xve,matchValue:gE,getResponse:SJt,getStatusText:xZe,mockDispatch:bZe,buildMockDispatch:_Jt,checkNetConnect:IZe,buildMockOptions:RJt,getHeaderByName:AZe,buildHeadersFromArray:Zve}});var sEe=q((Lai,oEe)=>{"use strict";f();var{getResponseData:kJt,buildKey:PJt,addMockDispatch:eEe}=JO(),{kDispatches:RZ,kDispatchKey:kZ,kDefaultHeaders:tEe,kDefaultTrailers:rEe,kContentLength:nEe,kMockDispatch:PZ}=hB(),{InvalidArgumentError:kC}=$o(),{buildURL:DJt}=Ni(),gB=class{static{s(this,"MockScope")}constructor(e){this[PZ]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new kC("waitInMs must be a valid integer > 0");return this[PZ].delay=e,this}persist(){return this[PZ].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new kC("repeatTimes must be a valid integer > 0");return this[PZ].times=e,this}},iEe=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new kC("opts must be an object");if(typeof e.path>"u")throw new kC("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=DJt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[kZ]=PJt(e),this[RZ]=r,this[tEe]={},this[rEe]={},this[nEe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=kJt(r),o=this[nEe]?{"content-length":i.length}:{},a={...this[tEe],...o,...n.headers},c={...this[rEe],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new kC("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new kC("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new kC("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=eEe(this[RZ],this[kZ],o);return new gB(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=eEe(this[RZ],this[kZ],n);return new gB(i)}replyWithError(e){if(typeof e>"u")throw new kC("error must be defined");let r=eEe(this[RZ],this[kZ],{error:e});return new gB(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new kC("headers must be defined");return this[tEe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new kC("trailers must be defined");return this[rEe]=e,this}replyContentLength(){return this[nEe]=!0,this}};oEe.exports.MockInterceptor=iEe;oEe.exports.MockScope=gB});var lEe=q((Oai,DZe)=>{"use strict";f();var{promisify:BJt}=require("node:util"),NJt=QO(),{buildMockDispatch:LJt}=JO(),{kDispatches:wZe,kMockAgent:SZe,kClose:_Ze,kOriginalClose:RZe,kOrigin:kZe,kOriginalDispatch:MJt,kConnected:aEe}=hB(),{MockInterceptor:FJt}=sEe(),PZe=ba(),{InvalidArgumentError:OJt}=$o(),cEe=class extends NJt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new OJt("Argument opts.agent must implement Agent");this[SZe]=r.agent,this[kZe]=e,this[wZe]=[],this[aEe]=1,this[MJt]=this.dispatch,this[RZe]=this.close.bind(this),this.dispatch=LJt.call(this),this.close=this[_Ze]}get[PZe.kConnected](){return this[aEe]}intercept(e){return new FJt(e,this[wZe])}async[_Ze](){await BJt(this[RZe])(),this[aEe]=0,this[SZe][PZe.kClients].delete(this[kZe])}};DZe.exports=cEe});var fEe=q((qai,QZe)=>{"use strict";f();var{promisify:QJt}=require("node:util"),UJt=aB(),{buildMockDispatch:qJt}=JO(),{kDispatches:BZe,kMockAgent:NZe,kClose:LZe,kOriginalClose:MZe,kOrigin:FZe,kOriginalDispatch:HJt,kConnected:uEe}=hB(),{MockInterceptor:WJt}=sEe(),OZe=ba(),{InvalidArgumentError:$Jt}=$o(),dEe=class extends UJt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new $Jt("Argument opts.agent must implement Agent");this[NZe]=r.agent,this[FZe]=e,this[BZe]=[],this[uEe]=1,this[HJt]=this.dispatch,this[MZe]=this.close.bind(this),this.dispatch=qJt.call(this),this.close=this[LZe]}get[OZe.kConnected](){return this[uEe]}intercept(e){return new WJt(e,this[BZe])}async[LZe](){await QJt(this[MZe])(),this[uEe]=0,this[NZe][OZe.kClients].delete(this[FZe])}};QZe.exports=dEe});var qZe=q((jai,UZe)=>{"use strict";f();var jJt={pronoun:"it",is:"is",was:"was",this:"this"},GJt={pronoun:"they",is:"are",was:"were",this:"these"};UZe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?jJt:GJt,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var WZe=q((Yai,HZe)=>{"use strict";f();var{Transform:VJt}=require("node:stream"),{Console:zJt}=require("node:console"),YJt=process.versions.icu?"\u2705":"Y ",KJt=process.versions.icu?"\u274C":"N ";HZe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new VJt({transform(r,n,i){i(null,r)}}),this.logger=new zJt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?YJt:KJt,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var VZe=q((Xai,GZe)=>{"use strict";f();var{kClients:TR}=ba(),JJt=cB(),{kAgent:pEe,kMockAgentSet:DZ,kMockAgentGet:$Ze,kDispatches:mEe,kIsMockActive:BZ,kNetConnect:wR,kGetNetConnect:XJt,kOptions:NZ,kFactory:LZ}=hB(),ZJt=lEe(),eXt=fEe(),{matchValue:tXt,buildMockOptions:rXt}=JO(),{InvalidArgumentError:jZe,UndiciError:nXt}=$o(),iXt=AO(),oXt=qZe(),sXt=WZe(),hEe=class extends iXt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[wR]=!0,this[BZ]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new jZe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new JJt(e);this[pEe]=r,this[TR]=r[TR],this[NZ]=rXt(e)}get(e){let r=this[$Ze](e);return r||(r=this[LZ](e),this[DZ](e,r)),r}dispatch(e,r){return this.get(e.origin),this[pEe].dispatch(e,r)}async close(){await this[pEe].close(),this[TR].clear()}deactivate(){this[BZ]=!1}activate(){this[BZ]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[wR])?this[wR].push(e):this[wR]=[e];else if(typeof e>"u")this[wR]=!0;else throw new jZe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[wR]=!1}get isMockActive(){return this[BZ]}[DZ](e,r){this[TR].set(e,r)}[LZ](e){let r=Object.assign({agent:this},this[NZ]);return this[NZ]&&this[NZ].connections===1?new ZJt(e,r):new eXt(e,r)}[$Ze](e){let r=this[TR].get(e);if(r)return r;if(typeof e!="string"){let n=this[LZ]("http://localhost:9999");return this[DZ](e,n),n}for(let[n,i]of Array.from(this[TR]))if(i&&typeof n!="string"&&tXt(n,e)){let o=this[LZ](e);return this[DZ](e,o),o[mEe]=i[mEe],o}}[XJt](){return this[wR]}pendingInterceptors(){let e=this[TR];return Array.from(e.entries()).flatMap(([r,n])=>n[mEe].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new sXt}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new oXt("interceptor","interceptors").pluralize(r.length);throw new nXt(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};GZe.exports=hEe});var MZ=q((tci,JZe)=>{"use strict";f();var zZe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:aXt}=$o(),cXt=cB();KZe()===void 0&&YZe(new cXt);function YZe(t){if(!t||typeof t.dispatch!="function")throw new aXt("Argument agent must implement Agent");Object.defineProperty(globalThis,zZe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(YZe,"setGlobalDispatcher");function KZe(){return globalThis[zZe]}s(KZe,"getGlobalDispatcher");JZe.exports={setGlobalDispatcher:YZe,getGlobalDispatcher:KZe}});var FZ=q((oci,XZe)=>{"use strict";f();XZe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var eet=q((cci,ZZe)=>{"use strict";f();var lXt=mZ();ZZe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new lXt(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var ret=q((dci,tet)=>{"use strict";f();var uXt=wZ();tet.exports=t=>e=>s(function(n,i){return e(n,new uXt({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var iet=q((mci,net)=>{"use strict";f();var dXt=Ni(),{InvalidArgumentError:fXt,RequestAbortedError:pXt}=$o(),mXt=FZ(),gEe=class extends mXt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new fXt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=dXt.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new pXt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function hXt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new gEe({maxSize:o},i);return e(n,a)},"Intercept")}s(hXt,"createDumpInterceptor");net.exports=hXt});var aet=q((Aci,set)=>{"use strict";f();var{isIP:gXt}=require("node:net"),{lookup:AXt}=require("node:dns"),yXt=FZ(),{InvalidArgumentError:AB,InformationalError:CXt}=$o(),oet=Math.pow(2,31)-1,AEe=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new CXt("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){AXt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===oet?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===oet?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new yEe(this,e,r)}},yEe=class extends yXt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};set.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new AB("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new AB("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new AB("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new AB("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new AB("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new AB("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new AEe(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return gXt(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(d,p)=>{if(d)return l.onError(d);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var SR=q((vci,het)=>{"use strict";f();var{kConstruct:vXt}=ba(),{kEnumerableProperty:yB}=Ni(),{iteratorMixin:EXt,isValidHeaderName:XO,isValidHeaderValue:uet}=Sp(),{webidl:wo}=Qu(),CEe=require("node:assert"),OZ=require("node:util"),el=Symbol("headers map"),kp=Symbol("headers map sorted");function cet(t){return t===10||t===13||t===9||t===32}s(cet,"isHTTPWhiteSpaceCharCode");function det(t){let e=0,r=t.length;for(;r>e&&cet(t.charCodeAt(r-1));)--r;for(;r>e&&cet(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(det,"headerValueNormalize");function fet(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw wo.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});vEe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)vEe(t,r[n],e[r[n]])}else throw wo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(fet,"fill");function vEe(t,e,r){if(r=det(r),XO(e)){if(!uet(r))throw wo.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw wo.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(met(t)==="immutable")throw new TypeError("immutable");return EEe(t).append(e,r,!1)}s(vEe,"appendHeader");function pet(t,e){return t[0]<e[0]?-1:1}s(pet,"compareHeaderName");var QZ=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[el]=new Map(e[el]),this[kp]=e[kp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[el]=new Map(e),this[kp]=null)}contains(e,r){return this[el].has(r?e:e.toLowerCase())}clear(){this[el].clear(),this[kp]=null,this.cookies=null}append(e,r,n){this[kp]=null;let i=n?e:e.toLowerCase(),o=this[el].get(i);if(o){let a=i==="cookie"?"; ":", ";this[el].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[el].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[kp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[el].set(i,{name:e,value:r})}delete(e,r){this[kp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[el].delete(e)}get(e,r){return this[el].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[el])yield[e,r]}get entries(){let e={};if(this[el].size!==0)for(let{name:r,value:n}of this[el].values())e[r]=n;return e}rawValues(){return this[el].values()}get entriesList(){let e=[];if(this[el].size!==0)for(let{0:r,1:{name:n,value:i}}of this[el])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[el].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[el][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],CEe(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,d,p;o<e;++o){for(p=n.next().value,d=r[o]=[p[0],p[1].value],CEe(d[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=d[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=d}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[el])r[n++]=[i,o],CEe(o!==null);return r.sort(pet)}}},hA=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){wo.util.markAsUncloneable(this),e!==vXt&&(this.#t=new QZ,this.#e="none",e!==void 0&&(e=wo.converters.HeadersInit(e,"Headers contructor","init"),fet(this,e)))}append(e,r){wo.brandCheck(this,t),wo.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=wo.converters.ByteString(e,n,"name"),r=wo.converters.ByteString(r,n,"value"),vEe(this,e,r)}delete(e){if(wo.brandCheck(this,t),wo.argumentLengthCheck(arguments,1,"Headers.delete"),e=wo.converters.ByteString(e,"Headers.delete","name"),!XO(e))throw wo.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){wo.brandCheck(this,t),wo.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=wo.converters.ByteString(e,r,"name"),!XO(e))throw wo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){wo.brandCheck(this,t),wo.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=wo.converters.ByteString(e,r,"name"),!XO(e))throw wo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){wo.brandCheck(this,t),wo.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=wo.converters.ByteString(e,n,"name"),r=wo.converters.ByteString(r,n,"value"),r=det(r),XO(e)){if(!uet(r))throw wo.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw wo.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){wo.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[kp](){if(this.#t[kp])return this.#t[kp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[kp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[kp]=e}[OZ.inspect.custom](e,r){return r.depth??=e,`Headers ${OZ.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:met,setHeadersGuard:xXt,getHeadersList:EEe,setHeadersList:bXt}=hA;Reflect.deleteProperty(hA,"getHeadersGuard");Reflect.deleteProperty(hA,"setHeadersGuard");Reflect.deleteProperty(hA,"getHeadersList");Reflect.deleteProperty(hA,"setHeadersList");EXt("Headers",hA,kp,0,1);Object.defineProperties(hA.prototype,{append:yB,delete:yB,get:yB,has:yB,set:yB,getSetCookie:yB,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[OZ.inspect.custom]:{enumerable:!1}});wo.converters.HeadersInit=function(t,e,r){if(wo.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!OZ.types.isProxy(t)&&n===hA.prototype.entries)try{return EEe(t).entriesList}catch{}return typeof n=="function"?wo.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):wo.converters["record<ByteString, ByteString>"](t,e,r)}throw wo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};het.exports={fill:fet,compareHeaderName:pet,Headers:hA,HeadersList:QZ,getHeadersGuard:met,setHeadersGuard:xXt,setHeadersList:bXt,getHeadersList:EEe}});var e7=q((bci,Tet)=>{"use strict";f();var{Headers:Eet,HeadersList:get,fill:IXt,getHeadersGuard:TXt,setHeadersGuard:xet,setHeadersList:bet}=SR(),{extractBody:Aet,cloneBody:wXt,mixinBody:SXt,hasFinalizationRegistry:_Xt,streamRegistry:RXt,bodyUnusable:kXt}=eB(),xEe=Ni(),yet=require("node:util"),{kEnumerableProperty:Pp}=xEe,{isValidReasonPhrase:PXt,isCancelled:DXt,isAborted:BXt,isBlobLike:NXt,serializeJavascriptValueToJSONString:LXt,isErrorLike:MXt,isomorphicEncode:FXt,environmentSettingsObject:OXt}=Sp(),{redirectStatusSet:QXt,nullBodyStatus:UXt}=vO(),{kState:tc,kHeaders:AE}=vT(),{webidl:yi}=Qu(),{FormData:qXt}=wO(),{URLSerializer:Cet}=f0(),{kConstruct:qZ}=ba(),bEe=require("node:assert"),{types:HXt}=require("node:util"),WXt=new TextEncoder("utf-8"),_R=class t{static{s(this,"Response")}static error(){return ZO(HZ(),"immutable")}static json(e,r={}){yi.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=yi.converters.ResponseInit(r));let n=WXt.encode(LXt(e)),i=Aet(n),o=ZO(CB({}),"response");return vet(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){yi.argumentLengthCheck(arguments,1,"Response.redirect"),e=yi.converters.USVString(e),r=yi.converters["unsigned short"](r);let n;try{n=new URL(e,OXt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!QXt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=ZO(CB({}),"immutable");i[tc].status=r;let o=FXt(Cet(n));return i[tc].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(yi.util.markAsUncloneable(this),e===qZ)return;e!==null&&(e=yi.converters.BodyInit(e)),r=yi.converters.ResponseInit(r),this[tc]=CB({}),this[AE]=new Eet(qZ),xet(this[AE],"response"),bet(this[AE],this[tc].headersList);let n=null;if(e!=null){let[i,o]=Aet(e);n={body:i,type:o}}vet(this,r,n)}get type(){return yi.brandCheck(this,t),this[tc].type}get url(){yi.brandCheck(this,t);let e=this[tc].urlList,r=e[e.length-1]??null;return r===null?"":Cet(r,!0)}get redirected(){return yi.brandCheck(this,t),this[tc].urlList.length>1}get status(){return yi.brandCheck(this,t),this[tc].status}get ok(){return yi.brandCheck(this,t),this[tc].status>=200&&this[tc].status<=299}get statusText(){return yi.brandCheck(this,t),this[tc].statusText}get headers(){return yi.brandCheck(this,t),this[AE]}get body(){return yi.brandCheck(this,t),this[tc].body?this[tc].body.stream:null}get bodyUsed(){return yi.brandCheck(this,t),!!this[tc].body&&xEe.isDisturbed(this[tc].body.stream)}clone(){if(yi.brandCheck(this,t),kXt(this))throw yi.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=IEe(this[tc]);return ZO(e,TXt(this[AE]))}[yet.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${yet.formatWithOptions(r,n)}`}};SXt(_R);Object.defineProperties(_R.prototype,{type:Pp,url:Pp,status:Pp,ok:Pp,redirected:Pp,statusText:Pp,headers:Pp,clone:Pp,body:Pp,bodyUsed:Pp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(_R,{json:Pp,redirect:Pp,error:Pp});function IEe(t){if(t.internalResponse)return Iet(IEe(t.internalResponse),t.type);let e=CB({...t,body:null});return t.body!=null&&(e.body=wXt(e,t.body)),e}s(IEe,"cloneResponse");function CB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new get(t?.headersList):new get,urlList:t?.urlList?[...t.urlList]:[]}}s(CB,"makeResponse");function HZ(t){let e=MXt(t);return CB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(HZ,"makeNetworkError");function $Xt(t){return t.type==="error"&&t.status===0}s($Xt,"isNetworkError");function UZ(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return bEe(!(n in e)),r[n]=i,!0}})}s(UZ,"makeFilteredResponse");function Iet(t,e){if(e==="basic")return UZ(t,{type:"basic",headersList:t.headersList});if(e==="cors")return UZ(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return UZ(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return UZ(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});bEe(!1)}s(Iet,"filterResponse");function jXt(t,e=null){return bEe(DXt(t)),BXt(t)?HZ(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):HZ(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(jXt,"makeAppropriateNetworkError");function vet(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!PXt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[tc].status=e.status),"statusText"in e&&e.statusText!=null&&(t[tc].statusText=e.statusText),"headers"in e&&e.headers!=null&&IXt(t[AE],e.headers),r){if(UXt.includes(t.status))throw yi.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[tc].body=r.body,r.type!=null&&!t[tc].headersList.contains("content-type",!0)&&t[tc].headersList.append("content-type",r.type,!0)}}s(vet,"initializeResponse");function ZO(t,e){let r=new _R(qZ);return r[tc]=t,r[AE]=new Eet(qZ),bet(r[AE],t.headersList),xet(r[AE],e),_Xt&&t.body?.stream&&RXt.register(r,new WeakRef(t.body.stream)),r}s(ZO,"fromInnerResponse");yi.converters.ReadableStream=yi.interfaceConverter(ReadableStream);yi.converters.FormData=yi.interfaceConverter(qXt);yi.converters.URLSearchParams=yi.interfaceConverter(URLSearchParams);yi.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?yi.converters.USVString(t,e,r):NXt(t)?yi.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||HXt.isArrayBuffer(t)?yi.converters.BufferSource(t,e,r):xEe.isFormDataLike(t)?yi.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?yi.converters.URLSearchParams(t,e,r):yi.converters.DOMString(t,e,r)};yi.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?yi.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:yi.converters.XMLHttpRequestBodyInit(t,e,r)};yi.converters.ResponseInit=yi.dictionaryConverter([{key:"status",converter:yi.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:yi.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:yi.converters.HeadersInit}]);Tet.exports={isNetworkError:$Xt,makeNetworkError:HZ,makeResponse:CB,makeAppropriateNetworkError:jXt,filterResponse:Iet,Response:_R,cloneResponse:IEe,fromInnerResponse:ZO}});var ket=q((wci,Ret)=>{"use strict";f();var{kConnected:wet,kSize:_et}=ba(),TEe=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[wet]===0&&this.value[_et]===0?void 0:this.value}},wEe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[wet]===0&&e[_et]===0&&this.finalizer(r)})}unregister(e){}};Ret.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:TEe,FinalizationRegistry:wEe}):{WeakRef,FinalizationRegistry}}});var vB=q((Rci,jet)=>{"use strict";f();var{extractBody:GXt,mixinBody:VXt,cloneBody:zXt,bodyUnusable:Pet}=eB(),{Headers:Uet,fill:YXt,HeadersList:GZ,setHeadersGuard:_Ee,getHeadersGuard:KXt,setHeadersList:qet,getHeadersList:Det}=SR(),{FinalizationRegistry:JXt}=ket()(),$Z=Ni(),Bet=require("node:util"),{isValidHTTPToken:XXt,sameOrigin:Net,environmentSettingsObject:WZ}=Sp(),{forbiddenMethodsSet:ZXt,corsSafeListedMethodsSet:eZt,referrerPolicy:tZt,requestRedirect:rZt,requestMode:nZt,requestCredentials:iZt,requestCache:oZt,requestDuplex:sZt}=vO(),{kEnumerableProperty:tl,normalizedMethodRecordsBase:aZt,normalizedMethodRecords:cZt}=$Z,{kHeaders:Dp,kSignal:jZ,kState:na,kDispatcher:SEe}=vT(),{webidl:kn}=Qu(),{URLSerializer:lZt}=f0(),{kConstruct:VZ}=ba(),uZt=require("node:assert"),{getMaxListeners:Let,setMaxListeners:Met,getEventListeners:dZt,defaultMaxListeners:Fet}=require("node:events"),fZt=Symbol("abortController"),Het=new JXt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),zZ=new WeakMap;function Oet(t){return e;function e(){let r=t.deref();if(r!==void 0){Het.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=zZ.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}zZ.delete(r.signal)}}}}s(Oet,"buildAbort");var Qet=!1,PT=class t{static{s(this,"Request")}constructor(e,r={}){if(kn.util.markAsUncloneable(this),e===VZ)return;let n="Request constructor";kn.argumentLengthCheck(arguments,1,n),e=kn.converters.RequestInfo(e,n,"input"),r=kn.converters.RequestInit(r,n,"init");let i=null,o=null,a=WZ.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[SEe]=r.dispatcher;let E;try{E=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(E.username||E.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=YZ({urlList:[E]}),o="cors"}else this[SEe]=r.dispatcher||e[SEe],uZt(e instanceof t),i=e[na],c=e[jZ];let l=WZ.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&Net(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=YZ({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:WZ.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(r).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let E=r.referrer;if(E==="")i.referrer="no-referrer";else{let b;try{b=new URL(E,a)}catch(w){throw new TypeError(`Referrer "${E}" is not a valid URL.`,{cause:w})}b.protocol==="about:"&&b.hostname==="client"||l&&!Net(b,WZ.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw kn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let E=r.method,b=cZt[E];if(b!==void 0)i.method=b;else{if(!XXt(E))throw new TypeError(`'${E}' is not a valid HTTP method.`);let w=E.toUpperCase();if(ZXt.has(w))throw new TypeError(`'${E}' HTTP method is unsupported.`);E=aZt[w]??E,i.method=E}!Qet&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),Qet=!0)}r.signal!==void 0&&(c=r.signal),this[na]=i;let m=new AbortController;if(this[jZ]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[fZt]=m;let E=new WeakRef(m),b=Oet(E);try{(typeof Let=="function"&&Let(c)===Fet||dZt(c,"abort").length>=Fet)&&Met(1500,c)}catch{}$Z.addAbortListener(c,b),Het.register(m,{signal:c,abort:b},b)}}if(this[Dp]=new Uet(VZ),qet(this[Dp],i.headersList),_Ee(this[Dp],"request"),p==="no-cors"){if(!eZt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);_Ee(this[Dp],"request-no-cors")}if(d){let E=Det(this[Dp]),b=r.headers!==void 0?r.headers:new GZ(E);if(E.clear(),b instanceof GZ){for(let{name:w,value:R}of b.rawValues())E.append(w,R,!1);E.cookies=b.cookies}else YXt(this[Dp],b)}let h=e instanceof t?e[na].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[E,b]=GXt(r.body,i.keepalive);g=E,b&&!Det(this[Dp]).contains("content-type",!0)&&this[Dp].append("content-type",b)}let A=g??h;if(A!=null&&A.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let y=A;if(g==null&&h!=null){if(Pet(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let E=new TransformStream;h.stream.pipeThrough(E),y={source:h.source,length:h.length,stream:E.readable}}this[na].body=y}get method(){return kn.brandCheck(this,t),this[na].method}get url(){return kn.brandCheck(this,t),lZt(this[na].url)}get headers(){return kn.brandCheck(this,t),this[Dp]}get destination(){return kn.brandCheck(this,t),this[na].destination}get referrer(){return kn.brandCheck(this,t),this[na].referrer==="no-referrer"?"":this[na].referrer==="client"?"about:client":this[na].referrer.toString()}get referrerPolicy(){return kn.brandCheck(this,t),this[na].referrerPolicy}get mode(){return kn.brandCheck(this,t),this[na].mode}get credentials(){return this[na].credentials}get cache(){return kn.brandCheck(this,t),this[na].cache}get redirect(){return kn.brandCheck(this,t),this[na].redirect}get integrity(){return kn.brandCheck(this,t),this[na].integrity}get keepalive(){return kn.brandCheck(this,t),this[na].keepalive}get isReloadNavigation(){return kn.brandCheck(this,t),this[na].reloadNavigation}get isHistoryNavigation(){return kn.brandCheck(this,t),this[na].historyNavigation}get signal(){return kn.brandCheck(this,t),this[jZ]}get body(){return kn.brandCheck(this,t),this[na].body?this[na].body.stream:null}get bodyUsed(){return kn.brandCheck(this,t),!!this[na].body&&$Z.isDisturbed(this[na].body.stream)}get duplex(){return kn.brandCheck(this,t),"half"}clone(){if(kn.brandCheck(this,t),Pet(this))throw new TypeError("unusable");let e=Wet(this[na]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=zZ.get(this.signal);n===void 0&&(n=new Set,zZ.set(this.signal,n));let i=new WeakRef(r);n.add(i),$Z.addAbortListener(r.signal,Oet(i))}return $et(e,r.signal,KXt(this[Dp]))}[Bet.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${Bet.formatWithOptions(r,n)}`}};VXt(PT);function YZ(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new GZ(t.headersList):new GZ}}s(YZ,"makeRequest");function Wet(t){let e=YZ({...t,body:null});return t.body!=null&&(e.body=zXt(e,t.body)),e}s(Wet,"cloneRequest");function $et(t,e,r){let n=new PT(VZ);return n[na]=t,n[jZ]=e,n[Dp]=new Uet(VZ),qet(n[Dp],t.headersList),_Ee(n[Dp],r),n}s($et,"fromInnerRequest");Object.defineProperties(PT.prototype,{method:tl,url:tl,headers:tl,redirect:tl,clone:tl,signal:tl,duplex:tl,destination:tl,body:tl,bodyUsed:tl,isHistoryNavigation:tl,isReloadNavigation:tl,keepalive:tl,integrity:tl,cache:tl,credentials:tl,attribute:tl,referrerPolicy:tl,referrer:tl,mode:tl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});kn.converters.Request=kn.interfaceConverter(PT);kn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?kn.converters.USVString(t,e,r):t instanceof PT?kn.converters.Request(t,e,r):kn.converters.USVString(t,e,r)};kn.converters.AbortSignal=kn.interfaceConverter(AbortSignal);kn.converters.RequestInit=kn.dictionaryConverter([{key:"method",converter:kn.converters.ByteString},{key:"headers",converter:kn.converters.HeadersInit},{key:"body",converter:kn.nullableConverter(kn.converters.BodyInit)},{key:"referrer",converter:kn.converters.USVString},{key:"referrerPolicy",converter:kn.converters.DOMString,allowedValues:tZt},{key:"mode",converter:kn.converters.DOMString,allowedValues:nZt},{key:"credentials",converter:kn.converters.DOMString,allowedValues:iZt},{key:"cache",converter:kn.converters.DOMString,allowedValues:oZt},{key:"redirect",converter:kn.converters.DOMString,allowedValues:rZt},{key:"integrity",converter:kn.converters.DOMString},{key:"keepalive",converter:kn.converters.boolean},{key:"signal",converter:kn.nullableConverter(t=>kn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:kn.converters.any},{key:"duplex",converter:kn.converters.DOMString,allowedValues:sZt},{key:"dispatcher",converter:kn.converters.any}]);jet.exports={Request:PT,makeRequest:YZ,fromInnerRequest:$et,cloneRequest:Wet}});var r7=q((Dci,stt)=>{"use strict";f();var{makeNetworkError:os,makeAppropriateNetworkError:KZ,filterResponse:REe,makeResponse:JZ,fromInnerResponse:pZt}=e7(),{HeadersList:Get}=SR(),{Request:mZt,cloneRequest:hZt}=vB(),DT=require("node:zlib"),{bytesMatch:gZt,makePolicyContainer:AZt,clonePolicyContainer:yZt,requestBadPort:CZt,TAOCheck:vZt,appendRequestOriginHeader:EZt,responseLocationURL:xZt,requestCurrentURL:PC,setRequestReferrerPolicyOnRedirect:bZt,tryUpgradeRequestToAPotentiallyTrustworthyURL:IZt,createOpaqueTimingInfo:NEe,appendFetchMetadata:TZt,corsCheck:wZt,crossOriginResourcePolicyCheck:SZt,determineRequestsReferrer:_Zt,coarsenedSharedCurrentTime:t7,createDeferredPromise:RZt,isBlobLike:kZt,sameOrigin:BEe,isCancelled:RR,isAborted:Vet,isErrorLike:PZt,fullyReadBody:DZt,readableStreamClose:BZt,isomorphicEncode:XZ,urlIsLocal:NZt,urlIsHttpHttpsScheme:LEe,urlHasHttpsScheme:LZt,clampAndCoarsenConnectionTimingInfo:MZt,simpleRangeHeaderValue:FZt,buildContentRange:OZt,createInflate:QZt,extractMimeType:UZt}=Sp(),{kState:Jet,kDispatcher:qZt}=vT(),kR=require("node:assert"),{safelyExtractBody:MEe,extractBody:zet}=eB(),{redirectStatusSet:Xet,nullBodyStatus:Zet,safeMethodsSet:HZt,requestBodyHeader:WZt,subresourceSet:$Zt}=vO(),jZt=require("node:events"),{Readable:GZt,pipeline:VZt,finished:zZt}=require("node:stream"),{addAbortListener:YZt,isErrored:KZt,isReadable:ZZ,bufferToLowerCasedHeaderName:Yet}=Ni(),{dataURLProcessor:JZt,serializeAMimeType:XZt,minimizeSupportedMimeType:ZZt}=f0(),{getGlobalDispatcher:eer}=MZ(),{webidl:ter}=Qu(),{STATUS_CODES:rer}=require("node:http"),ner=["GET","HEAD"],ier=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",kEe,eee=class extends jZt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function oer(t){ett(t,"fetch")}s(oer,"handleFetchDone");function ser(t,e=void 0){ter.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=RZt(),n;try{n=new mZt(t,e)}catch(d){return r.reject(d),r.promise}let i=n[Jet];if(n.signal.aborted)return PEe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return YZt(n.signal,()=>{c=!0,kR(l!=null),l.abort(n.signal.reason);let d=a?.deref();PEe(r,i,d,n.signal.reason)}),l=rtt({request:i,processResponseEndOfBody:oer,processResponse:s(d=>{if(!c){if(d.aborted){PEe(r,i,a,l.serializedAbortReason);return}if(d.type==="error"){r.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(pZt(d,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[qZt]}),r.promise}s(ser,"fetch");function ett(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;LEe(r)&&n!==null&&(t.timingAllowPassed||(n=NEe({startTime:n.startTime}),i=""),n.endTime=t7(),t.timingInfo=n,ttt(n,r.href,e,globalThis,i))}s(ett,"finalizeAndReportTiming");var ttt=performance.markResourceTiming;function PEe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&ZZ(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[Jet];i.body!=null&&ZZ(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(PEe,"abortFetch");function rtt({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=eer()}){kR(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=t7(u),p=NEe({startTime:d}),m={controller:new eee(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return kR(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=yZt(t.client.policyContainer):t.policyContainer=AZt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,$Zt.has(t.destination),ntt(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(rtt,"fetching");async function ntt(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!NZt(PC(r))&&(n=os("local URLs only")),IZt(r),CZt(r)==="blocked"&&(n=os("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=_Zt(r)),n===null&&(n=await(async()=>{let o=PC(r);return BEe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await Ket(t)):r.mode==="same-origin"?os('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?os('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await Ket(t)):LEe(PC(r))?(r.responseTainting="cors",await itt(t)):os("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=REe(n,"basic"):r.responseTainting==="cors"?n=REe(n,"cors"):r.responseTainting==="opaque"?n=REe(n,"opaque"):kR(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=os()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Zet.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>DEe(t,os(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!gZt(c,r.integrity)){o("integrity mismatch");return}n.body=MEe(c)[0],DEe(t,n)},"processBody");await DZt(n.body,a,o)}else DEe(t,n)}s(ntt,"mainFetch");function Ket(t){if(RR(t)&&t.request.redirectCount===0)return Promise.resolve(KZ(t));let{request:e}=t,{protocol:r}=PC(e);switch(r){case"about:":return Promise.resolve(os("about scheme is not supported"));case"blob:":{kEe||(kEe=require("node:buffer").resolveObjectURL);let n=PC(e);if(n.search.length!==0)return Promise.resolve(os("NetworkError when attempting to fetch resource."));let i=kEe(n.toString());if(e.method!=="GET"||!kZt(i))return Promise.resolve(os("invalid method"));let o=JZ(),a=i.size,c=XZ(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=FZt(u,!0);if(d==="failure")return Promise.resolve(os("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(os("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=zet(h);o.body=g[0];let A=XZ(`${h.size}`),y=OZt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",A,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",y,!0)}else{let u=zet(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=PC(e),i=JZt(n);if(i==="failure")return Promise.resolve(os("failed to fetch the data URL"));let o=XZt(i.mimeType);return Promise.resolve(JZ({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:MEe(i.body)[0]}))}case"file:":return Promise.resolve(os("not implemented... yet..."));case"http:":case"https:":return itt(t).catch(n=>os(n));default:return Promise.resolve(os("unknown scheme"))}}s(Ket,"schemeFetch");function aer(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(aer,"finalizeResponse");function DEe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=NEe(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=UZt(e.headersList);d!=="failure"&&(l.contentType=ZZt(d))}t.request.initiatorType!=null&&ttt(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():zZt(i.body.stream,()=>{n()})}s(DEe,"fetchFinale");async function itt(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await ott(t),e.responseTainting==="cors"&&wZt(e,r)==="failure")return os("cors failure");vZt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&SZt(e.origin,e.client,e.destination,n)==="blocked"?os("blocked"):(Xet.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=os("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await cer(t,r):kR(!1)),r.timingInfo=i,r)}s(itt,"httpFetch");function cer(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=xZt(n,PC(r).hash),i==null)return e}catch(a){return Promise.resolve(os(a))}if(!LEe(i))return Promise.resolve(os("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(os("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!BEe(r,i))return Promise.resolve(os('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(os('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(os());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!ner.includes(r.method)){r.method="GET",r.body=null;for(let a of WZt)r.headersList.delete(a)}BEe(PC(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(kR(r.body.source!=null),r.body=MEe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=t7(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),bZt(r,n),ntt(t,!0)}s(cer,"httpRedirectFetch");async function ott(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=hZt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=XZ(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",XZ(o.referrer.href),!0),EZt(o),TZt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",ier),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(LZt(PC(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return os("only if cached");let m=await ler(i,u,r);!HZt.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?os():RR(t)?KZ(t):os("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(RR(t))return KZ(t);t.controller.connection.destroy(),a=await ott(t,e,!0)}return a}s(ott,"httpNetworkOrCacheFetch");async function ler(t,e=!1,r=!1){kR(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,A=!0){this.destroyed||(this.destroyed=!0,A&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(E){RR(t)||(yield E,t.processRequestBodyChunkLength?.(E.byteLength))},"processBodyChunk"),A=s(()=>{RR(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),y=s(E=>{RR(t)||(E.name==="AbortError"?t.controller.abort():t.controller.terminate(E))},"processBodyError");l=async function*(){try{for await(let E of n.body.stream)yield*g(E);A()}catch(E){y(E)}}()}try{let{body:g,status:A,statusText:y,headersList:E,socket:b}=await h({body:l});if(b)i=JZ({status:A,statusText:y,headersList:E,socket:b});else{let w=g[Symbol.asyncIterator]();t.controller.next=()=>w.next(),i=JZ({status:A,statusText:y,headersList:E})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),KZ(t,g)):os(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{RR(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,A;try{let{done:E,value:b}=await t.controller.next();if(Vet(t))break;g=E?void 0:b}catch(E){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=E,A=!0)}if(g===void 0){BZt(t.controller.controller),aer(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,A){t.controller.terminate(g);return}let y=new Uint8Array(g);if(y.byteLength&&t.controller.controller.enqueue(y),KZt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){Vet(t)?(i.aborted=!0,ZZ(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):ZZ(p)&&t.controller.controller.error(new TypeError("terminated",{cause:PZt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let A=PC(n),y=t.controller.dispatcher;return new Promise((E,b)=>y.dispatch({path:A.pathname+A.search,origin:A.origin,method:n.method,body:y.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(w){let{connection:R}=t.controller;o.finalConnectionTimingInfo=MZt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),R.destroyed?w(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",w),this.abort=R.abort=w),o.finalNetworkRequestStartTime=t7(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=t7(t.crossOriginIsolatedCapability)},onHeaders(w,R,D,N){if(w<200)return;let O=[],Y="",ee=new Get;for(let K=0;K<R.length;K+=2)ee.append(Yet(R[K]),R[K+1].toString("latin1"),!0);let V=ee.get("content-encoding",!0);V&&(O=V.toLowerCase().split(",").map(K=>K.trim())),Y=ee.get("location",!0),this.body=new GZt({read:D});let H=[],U=Y&&n.redirect==="follow"&&Xet.has(w);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Zet.includes(w)&&!U)for(let K=O.length-1;K>=0;--K){let j=O[K];if(j==="x-gzip"||j==="gzip")H.push(DT.createGunzip({flush:DT.constants.Z_SYNC_FLUSH,finishFlush:DT.constants.Z_SYNC_FLUSH}));else if(j==="deflate")H.push(QZt({flush:DT.constants.Z_SYNC_FLUSH,finishFlush:DT.constants.Z_SYNC_FLUSH}));else if(j==="br")H.push(DT.createBrotliDecompress({flush:DT.constants.BROTLI_OPERATION_FLUSH,finishFlush:DT.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let X=this.onError.bind(this);return E({status:w,statusText:N,headersList:ee,body:H.length?VZt(this.body,...H,K=>{K&&this.onError(K)}).on("error",X):this.body.on("error",X)}),!0},onData(w){if(t.controller.dump)return;let R=w;return o.encodedBodySize+=R.byteLength,this.body.push(R)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(w){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(w),t.controller.terminate(w),b(w)},onUpgrade(w,R,D){if(w!==101)return;let N=new Get;for(let O=0;O<R.length;O+=2)N.append(Yet(R[O]),R[O+1].toString("latin1"),!0);return E({status:w,statusText:rer[w],headersList:N,socket:D}),!0}}))}s(h,"dispatch")}s(ler,"httpNetworkFetch");stt.exports={fetch:ser,Fetch:eee,fetching:rtt,finalizeAndReportTiming:ett}});var FEe=q((Lci,att)=>{"use strict";f();att.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var ltt=q((Fci,ctt)=>{"use strict";f();var{webidl:Bp}=Qu(),tee=Symbol("ProgressEvent state"),OEe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=Bp.converters.DOMString(e,"ProgressEvent constructor","type"),r=Bp.converters.ProgressEventInit(r??{}),super(e,r),this[tee]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Bp.brandCheck(this,t),this[tee].lengthComputable}get loaded(){return Bp.brandCheck(this,t),this[tee].loaded}get total(){return Bp.brandCheck(this,t),this[tee].total}};Bp.converters.ProgressEventInit=Bp.dictionaryConverter([{key:"lengthComputable",converter:Bp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:Bp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:Bp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:Bp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Bp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Bp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);ctt.exports={ProgressEvent:OEe}});var dtt=q((Uci,utt)=>{"use strict";f();function uer(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(uer,"getEncoding");utt.exports={getEncoding:uer}});var Ctt=q((Wci,ytt)=>{"use strict";f();var{kState:EB,kError:QEe,kResult:ftt,kAborted:n7,kLastProgressEventFired:UEe}=FEe(),{ProgressEvent:der}=ltt(),{getEncoding:ptt}=dtt(),{serializeAMimeType:fer,parseMIMEType:mtt}=f0(),{types:per}=require("node:util"),{StringDecoder:htt}=require("string_decoder"),{btoa:gtt}=require("node:buffer"),mer={enumerable:!0,writable:!1,configurable:!1};function her(t,e,r,n){if(t[EB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[EB]="loading",t[ftt]=null,t[QEe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[n7];)try{let{done:u,value:d}=await c;if(l&&!t[n7]&&queueMicrotask(()=>{BT("loadstart",t)}),l=!1,!u&&per.isUint8Array(d))a.push(d),(t[UEe]===void 0||Date.now()-t[UEe]>=50)&&!t[n7]&&(t[UEe]=Date.now(),queueMicrotask(()=>{BT("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[EB]="done";try{let p=ger(a,r,e.type,n);if(t[n7])return;t[ftt]=p,BT("load",t)}catch(p){t[QEe]=p,BT("error",t)}t[EB]!=="loading"&&BT("loadend",t)});break}}catch(u){if(t[n7])return;queueMicrotask(()=>{t[EB]="done",t[QEe]=u,BT("error",t),t[EB]!=="loading"&&BT("loadend",t)});break}})()}s(her,"readOperation");function BT(t,e){let r=new der(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(BT,"fireAProgressEvent");function ger(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=mtt(r||"application/octet-stream");o!=="failure"&&(i+=fer(o)),i+=";base64,";let a=new htt("latin1");for(let c of t)i+=gtt(a.write(c));return i+=gtt(a.end()),i}case"Text":{let i="failure";if(n&&(i=ptt(n)),i==="failure"&&r){let o=mtt(r);o!=="failure"&&(i=ptt(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Aer(t,i)}case"ArrayBuffer":return Att(t).buffer;case"BinaryString":{let i="",o=new htt("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(ger,"packageData");function Aer(t,e){let r=Att(t),n=yer(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(Aer,"decode");function yer(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(yer,"BOMSniffing");function Att(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(Att,"combineByteSequences");ytt.exports={staticPropertyDescriptors:mer,readOperation:her,fireAProgressEvent:BT}});var btt=q((Gci,xtt)=>{"use strict";f();var{staticPropertyDescriptors:xB,readOperation:ree,fireAProgressEvent:vtt}=Ctt(),{kState:PR,kError:Ett,kResult:nee,kEvents:jo,kAborted:Cer}=FEe(),{webidl:hs}=Qu(),{kEnumerableProperty:h0}=Ni(),gA=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[PR]="empty",this[nee]=null,this[Ett]=null,this[jo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){hs.brandCheck(this,t),hs.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=hs.converters.Blob(e,{strict:!1}),ree(this,e,"ArrayBuffer")}readAsBinaryString(e){hs.brandCheck(this,t),hs.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=hs.converters.Blob(e,{strict:!1}),ree(this,e,"BinaryString")}readAsText(e,r=void 0){hs.brandCheck(this,t),hs.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=hs.converters.Blob(e,{strict:!1}),r!==void 0&&(r=hs.converters.DOMString(r,"FileReader.readAsText","encoding")),ree(this,e,"Text",r)}readAsDataURL(e){hs.brandCheck(this,t),hs.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=hs.converters.Blob(e,{strict:!1}),ree(this,e,"DataURL")}abort(){if(this[PR]==="empty"||this[PR]==="done"){this[nee]=null;return}this[PR]==="loading"&&(this[PR]="done",this[nee]=null),this[Cer]=!0,vtt("abort",this),this[PR]!=="loading"&&vtt("loadend",this)}get readyState(){switch(hs.brandCheck(this,t),this[PR]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return hs.brandCheck(this,t),this[nee]}get error(){return hs.brandCheck(this,t),this[Ett]}get onloadend(){return hs.brandCheck(this,t),this[jo].loadend}set onloadend(e){hs.brandCheck(this,t),this[jo].loadend&&this.removeEventListener("loadend",this[jo].loadend),typeof e=="function"?(this[jo].loadend=e,this.addEventListener("loadend",e)):this[jo].loadend=null}get onerror(){return hs.brandCheck(this,t),this[jo].error}set onerror(e){hs.brandCheck(this,t),this[jo].error&&this.removeEventListener("error",this[jo].error),typeof e=="function"?(this[jo].error=e,this.addEventListener("error",e)):this[jo].error=null}get onloadstart(){return hs.brandCheck(this,t),this[jo].loadstart}set onloadstart(e){hs.brandCheck(this,t),this[jo].loadstart&&this.removeEventListener("loadstart",this[jo].loadstart),typeof e=="function"?(this[jo].loadstart=e,this.addEventListener("loadstart",e)):this[jo].loadstart=null}get onprogress(){return hs.brandCheck(this,t),this[jo].progress}set onprogress(e){hs.brandCheck(this,t),this[jo].progress&&this.removeEventListener("progress",this[jo].progress),typeof e=="function"?(this[jo].progress=e,this.addEventListener("progress",e)):this[jo].progress=null}get onload(){return hs.brandCheck(this,t),this[jo].load}set onload(e){hs.brandCheck(this,t),this[jo].load&&this.removeEventListener("load",this[jo].load),typeof e=="function"?(this[jo].load=e,this.addEventListener("load",e)):this[jo].load=null}get onabort(){return hs.brandCheck(this,t),this[jo].abort}set onabort(e){hs.brandCheck(this,t),this[jo].abort&&this.removeEventListener("abort",this[jo].abort),typeof e=="function"?(this[jo].abort=e,this.addEventListener("abort",e)):this[jo].abort=null}};gA.EMPTY=gA.prototype.EMPTY=0;gA.LOADING=gA.prototype.LOADING=1;gA.DONE=gA.prototype.DONE=2;Object.defineProperties(gA.prototype,{EMPTY:xB,LOADING:xB,DONE:xB,readAsArrayBuffer:h0,readAsBinaryString:h0,readAsText:h0,readAsDataURL:h0,abort:h0,readyState:h0,result:h0,error:h0,onloadstart:h0,onprogress:h0,onload:h0,onabort:h0,onerror:h0,onloadend:h0,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(gA,{EMPTY:xB,LOADING:xB,DONE:xB});xtt.exports={FileReader:gA}});var iee=q((Yci,Itt)=>{"use strict";f();Itt.exports={kConstruct:ba().kConstruct}});var Stt=q((Jci,wtt)=>{"use strict";f();var ver=require("node:assert"),{URLSerializer:Ttt}=f0(),{isValidHeaderName:Eer}=Sp();function xer(t,e,r=!1){let n=Ttt(t,r),i=Ttt(e,r);return n===i}s(xer,"urlEquals");function ber(t){ver(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),Eer(r)&&e.push(r);return e}s(ber,"getFieldValues");wtt.exports={urlEquals:xer,getFieldValues:ber}});var ktt=q((eli,Rtt)=>{"use strict";f();var{kConstruct:Ier}=iee(),{urlEquals:Ter,getFieldValues:qEe}=Stt(),{kEnumerableProperty:DR,isDisturbed:wer}=Ni(),{webidl:pn}=Qu(),{Response:Ser,cloneResponse:_er,fromInnerResponse:Rer}=e7(),{Request:yE,fromInnerRequest:ker}=vB(),{kState:AA}=vT(),{fetching:Per}=r7(),{urlIsHttpHttpsScheme:oee,createDeferredPromise:bB,readAllBytes:Der}=Sp(),HEe=require("node:assert"),see=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==Ier&&pn.illegalConstructor(),pn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){pn.brandCheck(this,t);let n="Cache.match";pn.argumentLengthCheck(arguments,1,n),e=pn.converters.RequestInfo(e,n,"request"),r=pn.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){pn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=pn.converters.RequestInfo(e,n,"request")),r=pn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){pn.brandCheck(this,t);let r="Cache.add";pn.argumentLengthCheck(arguments,1,r),e=pn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){pn.brandCheck(this,t);let r="Cache.addAll";pn.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw pn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=pn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[AA];if(!oee(h.url)||h.method!=="GET")throw pn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new yE(m)[AA];if(!oee(h.url))throw pn.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=bB();o.push(Per({request:h,processResponse(A){if(A.type==="error"||A.status===206||A.status<200||A.status>299)g.reject(pn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(A.headersList.contains("vary")){let y=qEe(A.headersList.get("vary"));for(let E of y)if(E==="*"){g.reject(pn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(A){if(A.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(A)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let d=bB(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,r){pn.brandCheck(this,t);let n="Cache.put";pn.argumentLengthCheck(arguments,2,n),e=pn.converters.RequestInfo(e,n,"request"),r=pn.converters.Response(r,n,"response");let i=null;if(e instanceof yE?i=e[AA]:i=new yE(e)[AA],!oee(i.url)||i.method!=="GET")throw pn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[AA];if(o.status===206)throw pn.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=qEe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw pn.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(wer(o.body.stream)||o.body.stream.locked))throw pn.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=_er(o),c=bB();if(o.body!=null){let g=o.body.stream.getReader();Der(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let d=await c.promise;a.body!=null&&(a.body.source=d);let p=bB(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){pn.brandCheck(this,t);let n="Cache.delete";pn.argumentLengthCheck(arguments,1,n),e=pn.converters.RequestInfo(e,n,"request"),r=pn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof yE){if(i=e[AA],i.method!=="GET"&&!r.ignoreMethod)return!1}else HEe(typeof e=="string"),i=new yE(e)[AA];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=bB(),l=null,u;try{u=this.#t(o)}catch(d){l=d}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){pn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=pn.converters.RequestInfo(e,n,"request")),r=pn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof yE){if(i=e[AA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new yE(e)[AA]);let o=bB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=ker(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);HEe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!oee(l.url))throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw pn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let d=r.indexOf(u);HEe(d!==-1),r.splice(d,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!Ter(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=qEe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),d=e.headersList.get(l);if(u!==d)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof yE){if(i=e[AA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new yE(e)[AA]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=Rer(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(see.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:DR,matchAll:DR,add:DR,addAll:DR,put:DR,delete:DR,keys:DR});var _tt=[{key:"ignoreSearch",converter:pn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:pn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:pn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];pn.converters.CacheQueryOptions=pn.dictionaryConverter(_tt);pn.converters.MultiCacheQueryOptions=pn.dictionaryConverter([..._tt,{key:"cacheName",converter:pn.converters.DOMString}]);pn.converters.Response=pn.interfaceConverter(Ser);pn.converters["sequence<RequestInfo>"]=pn.sequenceConverter(pn.converters.RequestInfo);Rtt.exports={Cache:see}});var Dtt=q((nli,Ptt)=>{"use strict";f();var{kConstruct:i7}=iee(),{Cache:aee}=ktt(),{webidl:Sd}=Qu(),{kEnumerableProperty:o7}=Ni(),cee=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==i7&&Sd.illegalConstructor(),Sd.util.markAsUncloneable(this)}async match(e,r={}){if(Sd.brandCheck(this,t),Sd.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Sd.converters.RequestInfo(e),r=Sd.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new aee(i7,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new aee(i7,n).match(e,r);if(o!==void 0)return o}}async has(e){Sd.brandCheck(this,t);let r="CacheStorage.has";return Sd.argumentLengthCheck(arguments,1,r),e=Sd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){Sd.brandCheck(this,t);let r="CacheStorage.open";if(Sd.argumentLengthCheck(arguments,1,r),e=Sd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new aee(i7,i)}let n=[];return this.#e.set(e,n),new aee(i7,n)}async delete(e){Sd.brandCheck(this,t);let r="CacheStorage.delete";return Sd.argumentLengthCheck(arguments,1,r),e=Sd.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return Sd.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(cee.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:o7,has:o7,open:o7,delete:o7,keys:o7});Ptt.exports={CacheStorage:cee}});var Ntt=q((sli,Btt)=>{"use strict";f();Btt.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var WEe=q((cli,Qtt)=>{"use strict";f();function Ber(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(Ber,"isCTLExcludingHtab");function Ltt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(Ltt,"validateCookieName");function Mtt(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(Mtt,"validateCookieValue");function Ftt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(Ftt,"validateCookiePath");function Ner(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(Ner,"validateCookieDomain");var Ler=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Mer=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],lee=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function Ott(t){return typeof t=="number"&&(t=new Date(t)),`${Ler[t.getUTCDay()]}, ${lee[t.getUTCDate()]} ${Mer[t.getUTCMonth()]} ${t.getUTCFullYear()} ${lee[t.getUTCHours()]}:${lee[t.getUTCMinutes()]}:${lee[t.getUTCSeconds()]} GMT`}s(Ott,"toIMFDate");function Fer(t){if(t<0)throw new Error("Invalid cookie max-age")}s(Fer,"validateCookieMaxAge");function Oer(t){if(t.name.length===0)return null;Ltt(t.name),Mtt(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(Fer(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(Ner(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(Ftt(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${Ott(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(Oer,"stringify");Qtt.exports={isCTLExcludingHtab:Ber,validateCookieName:Ltt,validateCookiePath:Ftt,validateCookieValue:Mtt,toIMFDate:Ott,stringify:Oer}});var qtt=q((dli,Utt)=>{"use strict";f();var{maxNameValuePairSize:Qer,maxAttributeValueSize:Uer}=Ntt(),{isCTLExcludingHtab:qer}=WEe(),{collectASequenceOfCodePointsFast:uee}=f0(),Her=require("node:assert");function Wer(t){if(qer(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=uee(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=uee("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>Qer?null:{name:n,value:i,...IB(r)}}s(Wer,"parseSetCookie");function IB(t,e={}){if(t.length===0)return e;Her(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=uee(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=uee("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>Uer)return IB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return IB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return IB(t,e)}s(IB,"parseUnparsedAttributes");Utt.exports={parseSetCookie:Wer,parseUnparsedAttributes:IB}});var $tt=q((mli,Wtt)=>{"use strict";f();var{parseSetCookie:$er}=qtt(),{stringify:jer}=WEe(),{webidl:ao}=Qu(),{Headers:dee}=SR();function Ger(t){ao.argumentLengthCheck(arguments,1,"getCookies"),ao.brandCheck(t,dee,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(Ger,"getCookies");function Ver(t,e,r){ao.brandCheck(t,dee,{strict:!1});let n="deleteCookie";ao.argumentLengthCheck(arguments,2,n),e=ao.converters.DOMString(e,n,"name"),r=ao.converters.DeleteCookieAttributes(r),Htt(t,{name:e,value:"",expires:new Date(0),...r})}s(Ver,"deleteCookie");function zer(t){ao.argumentLengthCheck(arguments,1,"getSetCookies"),ao.brandCheck(t,dee,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>$er(r)):[]}s(zer,"getSetCookies");function Htt(t,e){ao.argumentLengthCheck(arguments,2,"setCookie"),ao.brandCheck(t,dee,{strict:!1}),e=ao.converters.Cookie(e);let r=jer(e);r&&t.append("Set-Cookie",r)}s(Htt,"setCookie");ao.converters.DeleteCookieAttributes=ao.dictionaryConverter([{converter:ao.nullableConverter(ao.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);ao.converters.Cookie=ao.dictionaryConverter([{converter:ao.converters.DOMString,key:"name"},{converter:ao.converters.DOMString,key:"value"},{converter:ao.nullableConverter(t=>typeof t=="number"?ao.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:ao.nullableConverter(ao.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:ao.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:ao.sequenceConverter(ao.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);Wtt.exports={getCookies:Ger,deleteCookie:Ver,getSetCookies:zer,setCookie:Htt}});var wB=q((Ali,Gtt)=>{"use strict";f();var{webidl:cn}=Qu(),{kEnumerableProperty:g0}=Ni(),{kConstruct:jtt}=ba(),{MessagePort:Yer}=require("node:worker_threads"),TB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===jtt){super(arguments[1],arguments[2]),cn.util.markAsUncloneable(this);return}let n="MessageEvent constructor";cn.argumentLengthCheck(arguments,1,n),e=cn.converters.DOMString(e,n,"type"),r=cn.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,cn.util.markAsUncloneable(this)}get data(){return cn.brandCheck(this,t),this.#e.data}get origin(){return cn.brandCheck(this,t),this.#e.origin}get lastEventId(){return cn.brandCheck(this,t),this.#e.lastEventId}get source(){return cn.brandCheck(this,t),this.#e.source}get ports(){return cn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return cn.brandCheck(this,t),cn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(jtt,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Ker}=TB;delete TB.createFastMessageEvent;var fee=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";cn.argumentLengthCheck(arguments,1,n),e=cn.converters.DOMString(e,n,"type"),r=cn.converters.CloseEventInit(r),super(e,r),this.#e=r,cn.util.markAsUncloneable(this)}get wasClean(){return cn.brandCheck(this,t),this.#e.wasClean}get code(){return cn.brandCheck(this,t),this.#e.code}get reason(){return cn.brandCheck(this,t),this.#e.reason}},pee=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";cn.argumentLengthCheck(arguments,1,n),super(e,r),cn.util.markAsUncloneable(this),e=cn.converters.DOMString(e,n,"type"),r=cn.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return cn.brandCheck(this,t),this.#e.message}get filename(){return cn.brandCheck(this,t),this.#e.filename}get lineno(){return cn.brandCheck(this,t),this.#e.lineno}get colno(){return cn.brandCheck(this,t),this.#e.colno}get error(){return cn.brandCheck(this,t),this.#e.error}};Object.defineProperties(TB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:g0,origin:g0,lastEventId:g0,source:g0,ports:g0,initMessageEvent:g0});Object.defineProperties(fee.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:g0,code:g0,wasClean:g0});Object.defineProperties(pee.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:g0,filename:g0,lineno:g0,colno:g0,error:g0});cn.converters.MessagePort=cn.interfaceConverter(Yer);cn.converters["sequence<MessagePort>"]=cn.sequenceConverter(cn.converters.MessagePort);var $Ee=[{key:"bubbles",converter:cn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:cn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:cn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];cn.converters.MessageEventInit=cn.dictionaryConverter([...$Ee,{key:"data",converter:cn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:cn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:cn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:cn.nullableConverter(cn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:cn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);cn.converters.CloseEventInit=cn.dictionaryConverter([...$Ee,{key:"wasClean",converter:cn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:cn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:cn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);cn.converters.ErrorEventInit=cn.dictionaryConverter([...$Ee,{key:"message",converter:cn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:cn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:cn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:cn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:cn.converters.any}]);Gtt.exports={MessageEvent:TB,CloseEvent:fee,ErrorEvent:pee,createFastMessageEvent:Ker}});var BR=q((vli,Vtt)=>{"use strict";f();var Jer="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Xer={enumerable:!0,writable:!1,configurable:!1},Zer={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},etr={NOT_SENT:0,PROCESSING:1,SENT:2},ttr={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},rtr=2**16-1,ntr={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},itr=Buffer.allocUnsafe(0),otr={string:1,typedArray:2,arrayBuffer:3,blob:4};Vtt.exports={uid:Jer,sentCloseFrameState:etr,staticPropertyDescriptors:Xer,states:Zer,opcodes:ttr,maxUnsigned16Bit:rtr,parserStates:ntr,emptyBuffer:itr,sendHints:otr}});var s7=q((xli,ztt)=>{"use strict";f();ztt.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var l7=q((Ili,nrt)=>{"use strict";f();var{kReadyState:a7,kController:str,kResponse:atr,kBinaryType:ctr,kWebSocketURL:ltr}=s7(),{states:c7,opcodes:NT}=BR(),{ErrorEvent:utr,createFastMessageEvent:dtr}=wB(),{isUtf8:ftr}=require("node:buffer"),{collectASequenceOfCodePointsFast:ptr,removeHTTPWhitespace:Ytt}=f0();function mtr(t){return t[a7]===c7.CONNECTING}s(mtr,"isConnecting");function htr(t){return t[a7]===c7.OPEN}s(htr,"isEstablished");function gtr(t){return t[a7]===c7.CLOSING}s(gtr,"isClosing");function Atr(t){return t[a7]===c7.CLOSED}s(Atr,"isClosed");function jEe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(jEe,"fireEvent");function ytr(t,e,r){if(t[a7]!==c7.OPEN)return;let n;if(e===NT.TEXT)try{n=rrt(r)}catch{Jtt(t,"Received invalid UTF-8 in text frame.");return}else e===NT.BINARY&&(t[ctr]==="blob"?n=new Blob([r]):n=Ctr(r));jEe("message",t,dtr,{origin:t[ltr].origin,data:n})}s(ytr,"websocketMessageReceived");function Ctr(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(Ctr,"toArrayBuffer");function vtr(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(vtr,"isValidSubprotocol");function Etr(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(Etr,"isValidStatusCode");function Jtt(t,e){let{[str]:r,[atr]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&jEe("error",t,(i,o)=>new utr(i,o),{error:new Error(e),message:e})}s(Jtt,"failWebsocketConnection");function Xtt(t){return t===NT.CLOSE||t===NT.PING||t===NT.PONG}s(Xtt,"isControlFrame");function Ztt(t){return t===NT.CONTINUATION}s(Ztt,"isContinuationFrame");function ert(t){return t===NT.TEXT||t===NT.BINARY}s(ert,"isTextBinaryFrame");function xtr(t){return ert(t)||Ztt(t)||Xtt(t)}s(xtr,"isValidOpcode");function btr(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=ptr(";",t,e),[i,o=""]=n.split("=");r.set(Ytt(i,!0,!1),Ytt(o,!1,!0)),e.position++}return r}s(btr,"parseExtensions");function Itr(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(Itr,"isValidClientWindowBits");var trt=typeof process.versions.icu=="string",Ktt=trt?new TextDecoder("utf-8",{fatal:!0}):void 0,rrt=trt?Ktt.decode.bind(Ktt):function(t){if(ftr(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};nrt.exports={isConnecting:mtr,isEstablished:htr,isClosing:gtr,isClosed:Atr,fireEvent:jEe,isValidSubprotocol:vtr,isValidStatusCode:Etr,failWebsocketConnection:Jtt,websocketMessageReceived:ytr,utf8Decode:rrt,isControlFrame:Xtt,isContinuationFrame:Ztt,isTextBinaryFrame:ert,isValidOpcode:xtr,parseExtensions:btr,isValidClientWindowBits:Itr}});var hee=q((Sli,irt)=>{"use strict";f();var{maxUnsigned16Bit:Ttr}=BR(),mee=16386,GEe,u7=null,SB=mee;try{GEe=require("node:crypto")}catch{GEe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function wtr(){return SB===mee&&(SB=0,GEe.randomFillSync(u7??=Buffer.allocUnsafe(mee),0,mee)),[u7[SB++],u7[SB++],u7[SB++],u7[SB++]]}s(wtr,"generateMask");var VEe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=wtr(),i=r?.byteLength??0,o=i,a=6;i>Ttr?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};irt.exports={WebsocketFrameSend:VEe}});var YEe=q((kli,drt)=>{"use strict";f();var{uid:Str,states:d7,sentCloseFrameState:gee,emptyBuffer:_tr,opcodes:Rtr}=BR(),{kReadyState:f7,kSentClose:Aee,kByteParser:srt,kReceivedClose:ort,kResponse:art}=s7(),{fireEvent:ktr,failWebsocketConnection:LT,isClosing:Ptr,isClosed:Dtr,isEstablished:Btr,parseExtensions:Ntr}=l7(),{channels:_B}=q3(),{CloseEvent:Ltr}=wB(),{makeRequest:Mtr}=vB(),{fetching:Ftr}=r7(),{Headers:Otr,getHeadersList:Qtr}=SR(),{getDecodeSplit:Utr}=Sp(),{WebsocketFrameSend:qtr}=hee(),zEe;try{zEe=require("node:crypto")}catch{}function Htr(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=Mtr({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=Qtr(new Otr(o.headers));c.headersList=p}let l=zEe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),Ftr({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){LT(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){LT(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){LT(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){LT(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=zEe.createHash("sha1").update(l+Str).digest("base64");if(m!==h){LT(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),A;if(g!==null&&(A=Ntr(g),!A.has("permessage-deflate"))){LT(n,"Sec-WebSocket-Extensions header does not match.");return}let y=p.headersList.get("Sec-WebSocket-Protocol");if(y!==null&&!Utr("sec-websocket-protocol",c.headersList).includes(y)){LT(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",crt),p.socket.on("close",lrt),p.socket.on("error",urt),_B.open.hasSubscribers&&_B.open.publish({address:p.socket.address(),protocol:y,extensions:g}),i(p,A)}})}s(Htr,"establishWebSocketConnection");function Wtr(t,e,r,n){if(!(Ptr(t)||Dtr(t)))if(!Btr(t))LT(t,"Connection was closed before it was established."),t[f7]=d7.CLOSING;else if(t[Aee]===gee.NOT_SENT){t[Aee]=gee.PROCESSING;let i=new qtr;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=_tr,t[art].socket.write(i.createFrame(Rtr.CLOSE)),t[Aee]=gee.SENT,t[f7]=d7.CLOSING}else t[f7]=d7.CLOSING}s(Wtr,"closeWebSocketConnection");function crt(t){this.ws[srt].write(t)||this.pause()}s(crt,"onSocketData");function lrt(){let{ws:t}=this,{[art]:e}=t;e.socket.off("data",crt),e.socket.off("close",lrt),e.socket.off("error",urt);let r=t[Aee]===gee.SENT&&t[ort],n=1005,i="",o=t[srt].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[ort]||(n=1006),t[f7]=d7.CLOSED,ktr("close",t,(a,c)=>new Ltr(a,c),{wasClean:r,code:n,reason:i}),_B.close.hasSubscribers&&_B.close.publish({websocket:t,code:n,reason:i})}s(lrt,"onSocketClose");function urt(t){let{ws:e}=this;e[f7]=d7.CLOSING,_B.socketError.hasSubscribers&&_B.socketError.publish(t),this.destroy()}s(urt,"onSocketError");drt.exports={establishWebSocketConnection:Htr,closeWebSocketConnection:Wtr}});var prt=q((Bli,frt)=>{"use strict";f();var{createInflateRaw:$tr,Z_DEFAULT_WINDOWBITS:jtr}=require("node:zlib"),{isValidClientWindowBits:Gtr}=l7(),Vtr=Buffer.from([0,0,255,255]),yee=Symbol("kBuffer"),Cee=Symbol("kLength"),KEe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=jtr;if(this.#t.serverMaxWindowBits){if(!Gtr(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=$tr({windowBits:i}),this.#e[yee]=[],this.#e[Cee]=0,this.#e.on("data",o=>{this.#e[yee].push(o),this.#e[Cee]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(Vtr),this.#e.flush(()=>{let i=Buffer.concat(this.#e[yee],this.#e[Cee]);this.#e[yee].length=0,this.#e[Cee]=0,n(null,i)})}};frt.exports={PerMessageDeflate:KEe}});var Irt=q((Mli,brt)=>{"use strict";f();var{Writable:ztr}=require("node:stream"),Ytr=require("node:assert"),{parserStates:A0,opcodes:RB,states:Ktr,emptyBuffer:mrt,sentCloseFrameState:hrt}=BR(),{kReadyState:Jtr,kSentClose:grt,kResponse:Art,kReceivedClose:yrt}=s7(),{channels:vee}=q3(),{isValidStatusCode:Xtr,isValidOpcode:Ztr,failWebsocketConnection:Ah,websocketMessageReceived:Crt,utf8Decode:trr,isControlFrame:vrt,isTextBinaryFrame:JEe,isContinuationFrame:rrr}=l7(),{WebsocketFrameSend:Ert}=hee(),{closeWebSocketConnection:xrt}=YEe(),{PerMessageDeflate:nrr}=prt(),XEe=class extends ztr{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=A0.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new nrr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===A0.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==RB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,d=r[0]&16;if(!Ztr(i))return Ah(this.ws,"Invalid opcode received"),e();if(o)return Ah(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){Ah(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){Ah(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!JEe(i)){Ah(this.ws,"Invalid frame type was fragmented.");return}if(JEe(i)&&this.#o.length>0){Ah(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){Ah(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&vrt(i)){Ah(this.ws,"Control frame either too large or fragmented");return}if(rrr(i)&&this.#o.length===0&&!this.#r.compressed){Ah(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=A0.READ_DATA):c===126?this.#n=A0.PAYLOADLENGTH_16:c===127&&(this.#n=A0.PAYLOADLENGTH_64),JEe(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===A0.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=A0.READ_DATA}else if(this.#n===A0.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Ah(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=A0.READ_DATA}else if(this.#n===A0.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(vrt(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=A0.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){xrt(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=A0.INFO,this.#i=!0,this.run(e);return}Crt(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=A0.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Crt(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=A0.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return mrt;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){Ytr(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!Xtr(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=trr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===RB.CLOSE){if(n===1)return Ah(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return xrt(this.ws,i,o,o.length),Ah(this.ws,o),!1}if(this.ws[grt]!==hrt.SENT){let i=mrt;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new Ert(i);this.ws[Art].socket.write(o.createFrame(RB.CLOSE),a=>{a||(this.ws[grt]=hrt.SENT)})}return this.ws[Jtr]=Ktr.CLOSING,this.ws[yrt]=!0,!1}else if(r===RB.PING){if(!this.ws[yrt]){let i=new Ert(e);this.ws[Art].socket.write(i.createFrame(RB.PONG)),vee.ping.hasSubscribers&&vee.ping.publish({payload:e})}}else r===RB.PONG&&vee.pong.hasSubscribers&&vee.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};brt.exports={ByteParser:XEe}});var Rrt=q((Qli,_rt)=>{"use strict";f();var{WebsocketFrameSend:irr}=hee(),{opcodes:Trt,sendHints:kB}=BR(),orr=uve(),wrt=Buffer[Symbol.species],ZEe=class{static{s(this,"SendQueue")}#e=new orr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==kB.blob){let o=Srt(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=Srt(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function Srt(t,e){return new irr(srr(t,e)).createFrame(e===kB.string?Trt.TEXT:Trt.BINARY)}s(Srt,"createFrame");function srr(t,e){switch(e){case kB.string:return Buffer.from(t);case kB.arrayBuffer:case kB.blob:return new wrt(t);case kB.typedArray:return new wrt(t.buffer,t.byteOffset,t.byteLength)}}s(srr,"toBuffer");_rt.exports={SendQueue:ZEe}});var Ort=q((Hli,Frt)=>{"use strict";f();var{webidl:Kn}=Qu(),{URLSerializer:arr}=f0(),{environmentSettingsObject:krt}=Sp(),{staticPropertyDescriptors:MT,states:p7,sentCloseFrameState:crr,sendHints:Eee}=BR(),{kWebSocketURL:Prt,kReadyState:exe,kController:lrr,kBinaryType:xee,kResponse:Drt,kSentClose:urr,kByteParser:drr}=s7(),{isConnecting:frr,isEstablished:prr,isClosing:mrr,isValidSubprotocol:hrr,fireEvent:Brt}=l7(),{establishWebSocketConnection:grr,closeWebSocketConnection:Nrt}=YEe(),{ByteParser:Arr}=Irt(),{kEnumerableProperty:yh,isBlobLike:Lrt}=Ni(),{getGlobalDispatcher:yrr}=MZ(),{types:Mrt}=require("node:util"),{ErrorEvent:Crr,CloseEvent:vrr}=wB(),{SendQueue:Err}=Rrt(),Np=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Kn.util.markAsUncloneable(this);let n="WebSocket constructor";Kn.argumentLengthCheck(arguments,1,n);let i=Kn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Kn.converters.USVString(e,n,"url"),r=i.protocols;let o=krt.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>hrr(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[Prt]=new URL(a.href);let c=krt.settingsObject;this[lrr]=grr(a,r,c,this,(l,u)=>this.#o(l,u),i),this[exe]=t.CONNECTING,this[urr]=crr.NOT_SENT,this[xee]="blob"}close(e=void 0,r=void 0){Kn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Kn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Kn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");Nrt(this,e,r,i)}send(e){Kn.brandCheck(this,t);let r="WebSocket.send";if(Kn.argumentLengthCheck(arguments,1,r),e=Kn.converters.WebSocketSendData(e,r,"data"),frr(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!prr(this)||mrr(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},Eee.string)}else Mrt.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},Eee.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},Eee.typedArray)):Lrt(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},Eee.blob))}get readyState(){return Kn.brandCheck(this,t),this[exe]}get bufferedAmount(){return Kn.brandCheck(this,t),this.#t}get url(){return Kn.brandCheck(this,t),arr(this[Prt])}get extensions(){return Kn.brandCheck(this,t),this.#n}get protocol(){return Kn.brandCheck(this,t),this.#i}get onopen(){return Kn.brandCheck(this,t),this.#e.open}set onopen(e){Kn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Kn.brandCheck(this,t),this.#e.error}set onerror(e){Kn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Kn.brandCheck(this,t),this.#e.close}set onclose(e){Kn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Kn.brandCheck(this,t),this.#e.message}set onmessage(e){Kn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Kn.brandCheck(this,t),this[xee]}set binaryType(e){Kn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[xee]="blob":this[xee]=e}#o(e,r){this[Drt]=e;let n=new Arr(this,r);n.on("drain",xrr),n.on("error",brr.bind(this)),e.socket.ws=this,this[drr]=n,this.#r=new Err(e.socket),this[exe]=p7.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),Brt("open",this)}};Np.CONNECTING=Np.prototype.CONNECTING=p7.CONNECTING;Np.OPEN=Np.prototype.OPEN=p7.OPEN;Np.CLOSING=Np.prototype.CLOSING=p7.CLOSING;Np.CLOSED=Np.prototype.CLOSED=p7.CLOSED;Object.defineProperties(Np.prototype,{CONNECTING:MT,OPEN:MT,CLOSING:MT,CLOSED:MT,url:yh,readyState:yh,bufferedAmount:yh,onopen:yh,onerror:yh,onclose:yh,close:yh,onmessage:yh,binaryType:yh,send:yh,extensions:yh,protocol:yh,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Np,{CONNECTING:MT,OPEN:MT,CLOSING:MT,CLOSED:MT});Kn.converters["sequence<DOMString>"]=Kn.sequenceConverter(Kn.converters.DOMString);Kn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Kn.util.Type(t)==="Object"&&Symbol.iterator in t?Kn.converters["sequence<DOMString>"](t):Kn.converters.DOMString(t,e,r)};Kn.converters.WebSocketInit=Kn.dictionaryConverter([{key:"protocols",converter:Kn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Kn.converters.any,defaultValue:s(()=>yrr(),"defaultValue")},{key:"headers",converter:Kn.nullableConverter(Kn.converters.HeadersInit)}]);Kn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Kn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Kn.converters.WebSocketInit(t):{protocols:Kn.converters["DOMString or sequence<DOMString>"](t)}};Kn.converters.WebSocketSendData=function(t){if(Kn.util.Type(t)==="Object"){if(Lrt(t))return Kn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||Mrt.isArrayBuffer(t))return Kn.converters.BufferSource(t)}return Kn.converters.USVString(t)};function xrr(){this.ws[Drt].socket.resume()}s(xrr,"onParserDrain");function brr(t){let e,r;t instanceof vrr?(e=t.reason,r=t.code):e=t.message,Brt("error",this,()=>new Crr("error",{error:t,message:e})),Nrt(this,r)}s(brr,"onParserError");Frt.exports={WebSocket:Np}});var txe=q((jli,Qrt)=>{"use strict";f();function Irr(t){return t.indexOf("\0")===-1}s(Irr,"isValidLastEventId");function Trr(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(Trr,"isASCIINumber");function wrr(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(wrr,"delay");Qrt.exports={isValidLastEventId:Irr,isASCIINumber:Trr,delay:wrr}});var Wrt=q((zli,Hrt)=>{"use strict";f();var{Transform:Srr}=require("node:stream"),{isASCIINumber:Urt,isValidLastEventId:qrt}=txe(),CE=[239,187,191],rxe=10,bee=13,_rr=58,Rrr=32,nxe=class extends Srr{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===CE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===CE[0]&&this.buffer[1]===CE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===CE[0]&&this.buffer[1]===CE[1]&&this.buffer[2]===CE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===CE[0]&&this.buffer[1]===CE[1]&&this.buffer[2]===CE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===rxe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===rxe||this.buffer[this.pos]===bee){this.buffer[this.pos]===bee&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===rxe||this.buffer[this.pos]===bee){this.buffer[this.pos]===bee&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(_rr);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===Rrr&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":Urt(o)&&(r[i]=o);break;case"id":qrt(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&Urt(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&qrt(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Hrt.exports={EventSourceStream:nxe}});var Jrt=q((Jli,Krt)=>{"use strict";f();var{pipeline:krr}=require("node:stream"),{fetching:Prr}=r7(),{makeRequest:Drr}=vB(),{webidl:vE}=Qu(),{EventSourceStream:Brr}=Wrt(),{parseMIMEType:Nrr}=f0(),{createFastMessageEvent:Lrr}=wB(),{isNetworkError:$rt}=e7(),{delay:Mrr}=txe(),{kEnumerableProperty:NR}=Ni(),{environmentSettingsObject:jrt}=Sp(),Grt=!1,Vrt=3e3,m7=0,zrt=1,h7=2,Frr="anonymous",Orr="use-credentials",PB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=m7;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),vE.util.markAsUncloneable(this);let n="EventSource constructor";vE.argumentLengthCheck(arguments,1,n),Grt||(Grt=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=vE.converters.USVString(e,n,"url"),r=vE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:Vrt};let i=jrt,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=Frr;r.withCredentials&&(a=Orr,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=jrt.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=Drr(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===h7)return;this.#n=m7;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{$rt(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if($rt(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?Nrr(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=zrt,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new Brr({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(Lrr(l.type,l.options))},"push")});krr(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=Prr(e)}async#l(){this.#n!==h7&&(this.#n=m7,this.dispatchEvent(new Event("error")),await Mrr(this.#a.reconnectionTime),this.#n===m7&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){vE.brandCheck(this,t),this.#n!==h7&&(this.#n=h7,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Yrt={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:m7,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:zrt,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:h7,writable:!1}};Object.defineProperties(PB,Yrt);Object.defineProperties(PB.prototype,Yrt);Object.defineProperties(PB.prototype,{close:NR,onerror:NR,onmessage:NR,onopen:NR,readyState:NR,url:NR,withCredentials:NR});vE.converters.EventSourceInitDict=vE.dictionaryConverter([{key:"withCredentials",converter:vE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:vE.converters.any}]);Krt.exports={EventSource:PB,defaultReconnectionTime:Vrt}});var tnt=q((eui,Un)=>{"use strict";f();var Qrr=QO(),Xrt=AO(),Urr=aB(),qrr=nXe(),Hrr=cB(),Wrr=_ve(),$rr=vXe(),jrr=wXe(),Zrt=$o(),Tee=Ni(),{InvalidArgumentError:Iee}=Zrt,DB=fZe(),Grr=CO(),Vrr=lEe(),zrr=VZe(),Yrr=fEe(),Krr=Kve(),Jrr=wZ(),{getGlobalDispatcher:ent,setGlobalDispatcher:Xrr}=MZ(),Zrr=FZ(),enr=mZ(),tnr=hZ();Object.assign(Xrt.prototype,DB);Un.exports.Dispatcher=Xrt;Un.exports.Client=Qrr;Un.exports.Pool=Urr;Un.exports.BalancedPool=qrr;Un.exports.Agent=Hrr;Un.exports.ProxyAgent=Wrr;Un.exports.EnvHttpProxyAgent=$rr;Un.exports.RetryAgent=jrr;Un.exports.RetryHandler=Jrr;Un.exports.DecoratorHandler=Zrr;Un.exports.RedirectHandler=enr;Un.exports.createRedirectInterceptor=tnr;Un.exports.interceptors={redirect:eet(),retry:ret(),dump:iet(),dns:aet()};Un.exports.buildConnector=Grr;Un.exports.errors=Zrt;Un.exports.util={parseHeaders:Tee.parseHeaders,headerNameToString:Tee.headerNameToString};function g7(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new Iee("invalid url");if(r!=null&&typeof r!="object")throw new Iee("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new Iee("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(Tee.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=Tee.parseURL(e);let{agent:i,dispatcher:o=ent()}=r;if(i)throw new Iee("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(g7,"makeDispatcher");Un.exports.setGlobalDispatcher=Xrr;Un.exports.getGlobalDispatcher=ent;var rnr=r7().fetch;Un.exports.fetch=s(async function(e,r=void 0){try{return await rnr(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Un.exports.Headers=SR().Headers;Un.exports.Response=e7().Response;Un.exports.Request=vB().Request;Un.exports.FormData=wO().FormData;Un.exports.File=globalThis.File??require("node:buffer").File;Un.exports.FileReader=btt().FileReader;var{setGlobalOrigin:nnr,getGlobalOrigin:inr}=R1e();Un.exports.setGlobalOrigin=nnr;Un.exports.getGlobalOrigin=inr;var{CacheStorage:onr}=Dtt(),{kConstruct:snr}=iee();Un.exports.caches=new onr(snr);var{deleteCookie:anr,getCookies:cnr,getSetCookies:lnr,setCookie:unr}=$tt();Un.exports.deleteCookie=anr;Un.exports.getCookies=cnr;Un.exports.getSetCookies=lnr;Un.exports.setCookie=unr;var{parseMIMEType:dnr,serializeAMimeType:fnr}=f0();Un.exports.parseMIMEType=dnr;Un.exports.serializeAMimeType=fnr;var{CloseEvent:pnr,ErrorEvent:mnr,MessageEvent:hnr}=wB();Un.exports.WebSocket=Ort().WebSocket;Un.exports.CloseEvent=pnr;Un.exports.ErrorEvent=mnr;Un.exports.MessageEvent=hnr;Un.exports.request=g7(DB.request);Un.exports.stream=g7(DB.stream);Un.exports.pipeline=g7(DB.pipeline);Un.exports.connect=g7(DB.connect);Un.exports.upgrade=g7(DB.upgrade);Un.exports.MockClient=Vrr;Un.exports.MockPool=Yrr;Un.exports.MockAgent=zrr;Un.exports.mockErrors=Krr;var{EventSource:gnr}=Jrt();Un.exports.EventSource=gnr});var Ii=q((nui,rnt)=>{f();rnt.exports={options:{usePureJavaScript:!1}}});var ont=q((oui,int)=>{f();var ixe={};int.exports=ixe;var nnt={};ixe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Anr(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};ixe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=nnt[e];if(!r){r=nnt[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function Anr(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(Anr,"_encodeWithByteBuffer")});var Fo=q((cui,lnt)=>{f();var snt=Ii(),ant=ont(),Ne=lnt.exports=snt.util=snt.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Ne.nextTick=process.nextTick,typeof setImmediate=="function"?Ne.setImmediate=setImmediate:Ne.setImmediate=Ne.nextTick;return}if(typeof setImmediate=="function"){Ne.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Ne.nextTick=function(c){return setImmediate(c)};return}if(Ne.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Ne.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Ne.setImmediate;Ne.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Ne.nextTick=Ne.setImmediate})();Ne.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Ne.globalScope=function(){return Ne.isNodejs?global:typeof self>"u"?window:self}();Ne.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Ne.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Ne.isArrayBufferView=function(t){return t&&Ne.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function A7(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(A7,"_checkBitsParam");Ne.ByteBuffer=oxe;function oxe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Ne.isArrayBuffer(t)||Ne.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof oxe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(oxe,"ByteStringBuffer");Ne.ByteStringBuffer=oxe;var ynr=4096;Ne.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>ynr&&(this.data.substr(0,1),this._constructedStringLength=0)};Ne.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Ne.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Ne.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Ne.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Ne.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Ne.encodeUtf8(t))};Ne.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Ne.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Ne.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Ne.ByteStringBuffer.prototype.putInt=function(t,e){A7(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Ne.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Ne.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Ne.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt=function(t){A7(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Ne.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Ne.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Ne.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Ne.ByteStringBuffer.prototype.copy=function(){var t=Ne.createBuffer(this.data);return t.read=this.read,t};Ne.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Ne.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Ne.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Ne.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.ByteStringBuffer.prototype.toString=function(){return Ne.decodeUtf8(this.bytes())};function Cnr(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Ne.isArrayBuffer(t),n=Ne.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(Cnr,"DataBuffer");Ne.DataBuffer=Cnr;Ne.DataBuffer.prototype.length=function(){return this.write-this.read};Ne.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Ne.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Ne.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Ne.DataBuffer.prototype.putBytes=function(t,e){if(Ne.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Ne.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Ne.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Ne.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Ne.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Ne.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Ne.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Ne.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Ne.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Ne.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Ne.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Ne.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Ne.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Ne.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Ne.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Ne.DataBuffer.prototype.putInt=function(t,e){A7(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Ne.DataBuffer.prototype.putSignedInt=function(t,e){return A7(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Ne.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Ne.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Ne.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Ne.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Ne.DataBuffer.prototype.getInt=function(t){A7(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Ne.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Ne.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Ne.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Ne.DataBuffer.prototype.copy=function(){return new Ne.DataBuffer(this)};Ne.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Ne.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Ne.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Ne.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Ne.binary.raw.encode(e);if(t==="hex")return Ne.binary.hex.encode(e);if(t==="base64")return Ne.binary.base64.encode(e);if(t==="utf8")return Ne.text.utf8.decode(e);if(t==="utf16")return Ne.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Ne.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Ne.encodeUtf8(t)),new Ne.ByteBuffer(t)};Ne.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Ne.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Ne.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Ne.bytesToHex=function(t){return Ne.createBuffer(t).toHex()};Ne.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var FT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",OT=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],cnt="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ne.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=FT.charAt(i>>2),r+=FT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=FT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":FT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=OT[t.charCodeAt(a++)-43],n=OT[t.charCodeAt(a++)-43],i=OT[t.charCodeAt(a++)-43],o=OT[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Ne.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Ne.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Ne.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:ant.encode,decode:ant.decode}};Ne.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Ne.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.binary.hex.encode=Ne.bytesToHex;Ne.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Ne.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=FT.charAt(i>>2),r+=FT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=FT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":FT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=OT[t.charCodeAt(l++)-43],o=OT[t.charCodeAt(l++)-43],a=OT[t.charCodeAt(l++)-43],c=OT[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Ne.binary.base58.encode=function(t,e){return Ne.binary.baseN.encode(t,cnt,e)};Ne.binary.base58.decode=function(t,e){return Ne.binary.baseN.decode(t,cnt,e)};Ne.text={utf8:{},utf16:{}};Ne.text.utf8.encode=function(t,e,r){t=Ne.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.text.utf8.decode=function(t){return Ne.decodeUtf8(String.fromCharCode.apply(null,t))};Ne.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Ne.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Ne.deflate=function(t,e,r){if(e=Ne.decode64(t.deflate(Ne.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Ne.inflate=function(t,e,r){var n=t.inflate(Ne.encode64(e)).rval;return n===null?null:Ne.decode64(n)};var sxe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Ne.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),axe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Ne.decode64(r))),r},"_getStorageObject"),vnr=s(function(t,e,r,n){var i=axe(t,e);i===null&&(i={}),i[r]=n,sxe(t,e,i)},"_setItem"),Enr=s(function(t,e,r){var n=axe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),xnr=s(function(t,e,r){var n=axe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),sxe(t,e,n)}},"_removeItem"),bnr=s(function(t,e){sxe(t,e,null)},"_clearItems"),wee=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Ne.setItem=function(t,e,r,n,i){wee(vnr,arguments,i)};Ne.getItem=function(t,e,r,n){return wee(Enr,arguments,n)};Ne.removeItem=function(t,e,r,n){wee(xnr,arguments,n)};Ne.clearItems=function(t,e,r){wee(bnr,arguments,r)};Ne.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Ne.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Ne.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return l+(d?u.substr(0,d)+c:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Ne.formatSize=function(t){return t>=1073741824?t=Ne.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Ne.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Ne.formatNumber(t/1024,0)+" KiB":t=Ne.formatNumber(t,0)+" bytes",t};Ne.bytesFromIP=function(t){return t.indexOf(".")!==-1?Ne.bytesFromIPv4(t):t.indexOf(":")!==-1?Ne.bytesFromIPv6(t):null};Ne.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Ne.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Ne.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Ne.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Ne.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Ne.bytesToIP=function(t){return t.length===4?Ne.bytesToIPv4(t):t.length===16?Ne.bytesToIPv6(t):null};Ne.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Ne.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Ne.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Ne.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Ne&&!t.update)return e(null,Ne.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Ne.cores=navigator.hardwareConcurrency,e(null,Ne.cores);if(typeof Worker>"u")return Ne.cores=1,e(null,Ne.cores);if(typeof Blob>"u")return Ne.cores=2,e(null,Ne.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Ne.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Ne.cores)}i(l,function(d,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],d=0;d<a;++d){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var d=0;d<a;++d)l[d].postMessage(d)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var d=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}s(o,"reduce")}});var See=q((dui,unt)=>{f();var ru=Ii();Fo();unt.exports=ru.cipher=ru.cipher||{};ru.cipher.algorithms=ru.cipher.algorithms||{};ru.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ru.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ru.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};ru.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ru.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ru.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};ru.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),ru.cipher.algorithms[t]=e};ru.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in ru.cipher.algorithms?ru.cipher.algorithms[t]:null};var cxe=ru.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};cxe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=ru.util.createBuffer(),this.output=t.output||ru.util.createBuffer(),this.mode.start(e)};cxe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};cxe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var uxe=q((pui,dnt)=>{f();var nu=Ii();Fo();nu.cipher=nu.cipher||{};var ji=dnt.exports=nu.cipher.modes=nu.cipher.modes||{};ji.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ji.ecb.prototype.start=function(t){};ji.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ji.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ji.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ji.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ji.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ji.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=_ee(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ji.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};ji.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ji.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ji.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ji.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=nu.util.createBuffer(),this._partialBytes=0};ji.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_ee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=nu.util.createBuffer(),this._partialBytes=0};ji.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_ee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.ofb.prototype.decrypt=ji.ofb.prototype.encrypt;ji.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=nu.util.createBuffer(),this._partialBytes=0};ji.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_ee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ree(this._inBlock)};ji.ctr.prototype.decrypt=ji.ctr.prototype.encrypt;ji.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=nu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ji.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=nu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=nu.util.createBuffer(t.additionalData):r=nu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=nu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(lxe(n*8)))}this._inBlock=this._j0.slice(0),Ree(this._inBlock),this._partialBytes=0,r=nu.util.createBuffer(r),this._aDataLength=lxe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ji.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ree(this._inBlock)};ji.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ree(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ji.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=nu.util.createBuffer();var n=this._aDataLength.concat(lxe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ji.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ji.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};ji.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};ji.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};ji.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};ji.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function _ee(t,e){if(typeof t=="string"&&(t=nu.util.createBuffer(t)),nu.util.isArray(t)&&t.length>4){var r=t;t=nu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!nu.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(_ee,"transformIV");function Ree(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(Ree,"inc32");function lxe(t){return[t/4294967296|0,t&4294967295]}s(lxe,"from64To32")});var QT=q((gui,hnt)=>{f();var Ms=Ii();See();uxe();Fo();hnt.exports=Ms.aes=Ms.aes||{};Ms.aes.startEncrypting=function(t,e,r,n){var i=kee({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ms.aes.createEncryptionCipher=function(t,e){return kee({key:t,output:null,decrypt:!1,mode:e})};Ms.aes.startDecrypting=function(t,e,r,n){var i=kee({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ms.aes.createDecryptionCipher=function(t,e){return kee({key:t,output:null,decrypt:!0,mode:e})};Ms.aes.Algorithm=function(t,e){pxe||pnt();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return fxe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return fxe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};Ms.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ms.util.createBuffer(e);else if(Ms.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ms.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ms.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ms.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=mnt(e,t.decrypt&&!a),this._init=!0}};Ms.aes._expandKey=function(t,e){return pxe||pnt(),mnt(t,e)};Ms.aes._updateBlock=fxe;NB("AES-ECB",Ms.cipher.modes.ecb);NB("AES-CBC",Ms.cipher.modes.cbc);NB("AES-CFB",Ms.cipher.modes.cfb);NB("AES-OFB",Ms.cipher.modes.ofb);NB("AES-CTR",Ms.cipher.modes.ctr);NB("AES-GCM",Ms.cipher.modes.gcm);function NB(t,e){var r=s(function(){return new Ms.aes.Algorithm(t,e)},"factory");Ms.cipher.registerAlgorithm(t,r)}s(NB,"registerAlgorithm");var pxe=!1,BB=4,hf,dxe,fnt,LR,yA;function pnt(){pxe=!0,fnt=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;hf=new Array(256),dxe=new Array(256),LR=new Array(4),yA=new Array(4);for(var e=0;e<4;++e)LR[e]=new Array(256),yA[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,d,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,hf[r]=c,dxe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),d=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)LR[p][r]=u,yA[p][c]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(pnt,"initialize");function mnt(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=BB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=hf[n>>>16&255]<<24^hf[n>>>8&255]<<16^hf[n&255]<<8^hf[n>>>24]^fnt[i]<<24,i++):o>6&&l%o===4&&(n=hf[n>>>24]<<24^hf[n>>>16&255]<<16^hf[n>>>8&255]<<8^hf[n&255]),r[l]=r[l-o]^n;if(e){var u,d=yA[0],p=yA[1],m=yA[2],h=yA[3],g=r.slice(0);c=r.length;for(var l=0,A=c-BB;l<c;l+=BB,A-=BB)if(l===0||l===c-BB)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var y=0;y<BB;++y)u=r[A+y],g[l+(3&-y)]=d[hf[u>>>24]]^p[hf[u>>>16&255]]^m[hf[u>>>8&255]]^h[hf[u&255]];r=g}return r}s(mnt,"_expandKey");function fxe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=yA[0],a=yA[1],c=yA[2],l=yA[3],u=dxe):(o=LR[0],a=LR[1],c=LR[2],l=LR[3],u=hf);var d,p,m,h,g,A,y;d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var E=3,b=1;b<i;++b)g=o[d>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++E],A=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[d&255]^t[++E],y=o[m>>>24]^a[h>>>16&255]^c[d>>>8&255]^l[p&255]^t[++E],h=o[h>>>24]^a[d>>>16&255]^c[p>>>8&255]^l[m&255]^t[++E],d=g,p=A,m=y;r[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++E],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++E],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++E],r[n?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++E]}s(fxe,"_updateBlock");function kee(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ms.cipher.createDecipher(r,t.key):n=Ms.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ms.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(kee,"_createCipher")});var UT=q((Cui,gnt)=>{f();var y7=Ii();y7.pki=y7.pki||{};var mxe=gnt.exports=y7.pki.oids=y7.oids=y7.oids||{};function Lt(t,e){mxe[t]=e,mxe[e]=t}s(Lt,"_IN");function Jo(t,e){mxe[t]=e}s(Jo,"_I_");Lt("1.2.840.113549.1.1.1","rsaEncryption");Lt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Lt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Lt("1.2.840.113549.1.1.7","RSAES-OAEP");Lt("1.2.840.113549.1.1.8","mgf1");Lt("1.2.840.113549.1.1.9","pSpecified");Lt("1.2.840.113549.1.1.10","RSASSA-PSS");Lt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Lt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Lt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Lt("1.3.101.112","EdDSA25519");Lt("1.2.840.10040.4.3","dsa-with-sha1");Lt("1.3.14.3.2.7","desCBC");Lt("1.3.14.3.2.26","sha1");Lt("1.3.14.3.2.29","sha1WithRSASignature");Lt("2.16.840.1.101.3.4.2.1","sha256");Lt("2.16.840.1.101.3.4.2.2","sha384");Lt("2.16.840.1.101.3.4.2.3","sha512");Lt("2.16.840.1.101.3.4.2.4","sha224");Lt("2.16.840.1.101.3.4.2.5","sha512-224");Lt("2.16.840.1.101.3.4.2.6","sha512-256");Lt("1.2.840.113549.2.2","md2");Lt("1.2.840.113549.2.5","md5");Lt("1.2.840.113549.1.7.1","data");Lt("1.2.840.113549.1.7.2","signedData");Lt("1.2.840.113549.1.7.3","envelopedData");Lt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Lt("1.2.840.113549.1.7.5","digestedData");Lt("1.2.840.113549.1.7.6","encryptedData");Lt("1.2.840.113549.1.9.1","emailAddress");Lt("1.2.840.113549.1.9.2","unstructuredName");Lt("1.2.840.113549.1.9.3","contentType");Lt("1.2.840.113549.1.9.4","messageDigest");Lt("1.2.840.113549.1.9.5","signingTime");Lt("1.2.840.113549.1.9.6","counterSignature");Lt("1.2.840.113549.1.9.7","challengePassword");Lt("1.2.840.113549.1.9.8","unstructuredAddress");Lt("1.2.840.113549.1.9.14","extensionRequest");Lt("1.2.840.113549.1.9.20","friendlyName");Lt("1.2.840.113549.1.9.21","localKeyId");Lt("1.2.840.113549.1.9.22.1","x509Certificate");Lt("1.2.840.113549.1.12.10.1.1","keyBag");Lt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Lt("1.2.840.113549.1.12.10.1.3","certBag");Lt("1.2.840.113549.1.12.10.1.4","crlBag");Lt("1.2.840.113549.1.12.10.1.5","secretBag");Lt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Lt("1.2.840.113549.1.5.13","pkcs5PBES2");Lt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Lt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Lt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Lt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Lt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Lt("1.2.840.113549.2.7","hmacWithSHA1");Lt("1.2.840.113549.2.8","hmacWithSHA224");Lt("1.2.840.113549.2.9","hmacWithSHA256");Lt("1.2.840.113549.2.10","hmacWithSHA384");Lt("1.2.840.113549.2.11","hmacWithSHA512");Lt("1.2.840.113549.3.7","des-EDE3-CBC");Lt("2.16.840.1.101.3.4.1.2","aes128-CBC");Lt("2.16.840.1.101.3.4.1.22","aes192-CBC");Lt("2.16.840.1.101.3.4.1.42","aes256-CBC");Lt("2.5.4.3","commonName");Lt("2.5.4.4","surname");Lt("2.5.4.5","serialNumber");Lt("2.5.4.6","countryName");Lt("2.5.4.7","localityName");Lt("2.5.4.8","stateOrProvinceName");Lt("2.5.4.9","streetAddress");Lt("2.5.4.10","organizationName");Lt("2.5.4.11","organizationalUnitName");Lt("2.5.4.12","title");Lt("2.5.4.13","description");Lt("2.5.4.15","businessCategory");Lt("2.5.4.17","postalCode");Lt("2.5.4.42","givenName");Lt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Lt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Lt("2.16.840.1.113730.1.1","nsCertType");Lt("2.16.840.1.113730.1.13","nsComment");Jo("2.5.29.1","authorityKeyIdentifier");Jo("2.5.29.2","keyAttributes");Jo("2.5.29.3","certificatePolicies");Jo("2.5.29.4","keyUsageRestriction");Jo("2.5.29.5","policyMapping");Jo("2.5.29.6","subtreesConstraint");Jo("2.5.29.7","subjectAltName");Jo("2.5.29.8","issuerAltName");Jo("2.5.29.9","subjectDirectoryAttributes");Jo("2.5.29.10","basicConstraints");Jo("2.5.29.11","nameConstraints");Jo("2.5.29.12","policyConstraints");Jo("2.5.29.13","basicConstraints");Lt("2.5.29.14","subjectKeyIdentifier");Lt("2.5.29.15","keyUsage");Jo("2.5.29.16","privateKeyUsagePeriod");Lt("2.5.29.17","subjectAltName");Lt("2.5.29.18","issuerAltName");Lt("2.5.29.19","basicConstraints");Jo("2.5.29.20","cRLNumber");Jo("2.5.29.21","cRLReason");Jo("2.5.29.22","expirationDate");Jo("2.5.29.23","instructionCode");Jo("2.5.29.24","invalidityDate");Jo("2.5.29.25","cRLDistributionPoints");Jo("2.5.29.26","issuingDistributionPoint");Jo("2.5.29.27","deltaCRLIndicator");Jo("2.5.29.28","issuingDistributionPoint");Jo("2.5.29.29","certificateIssuer");Jo("2.5.29.30","nameConstraints");Lt("2.5.29.31","cRLDistributionPoints");Lt("2.5.29.32","certificatePolicies");Jo("2.5.29.33","policyMappings");Jo("2.5.29.34","policyConstraints");Lt("2.5.29.35","authorityKeyIdentifier");Jo("2.5.29.36","policyConstraints");Lt("2.5.29.37","extKeyUsage");Jo("2.5.29.46","freshestCRL");Jo("2.5.29.54","inhibitAnyPolicy");Lt("1.3.6.1.4.1.11129.2.4.2","timestampList");Lt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Lt("1.3.6.1.5.5.7.3.1","serverAuth");Lt("1.3.6.1.5.5.7.3.2","clientAuth");Lt("1.3.6.1.5.5.7.3.3","codeSigning");Lt("1.3.6.1.5.5.7.3.4","emailProtection");Lt("1.3.6.1.5.5.7.3.8","timeStamping")});var CA=q((xui,ynt)=>{f();var ia=Ii();Fo();UT();var pr=ynt.exports=ia.asn1=ia.asn1||{};pr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};pr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};pr.create=function(t,e,r,n,i){if(ia.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||ia.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=pr.copy(c)),c};pr.copy=function(t,e){var r;if(ia.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(pr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:pr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};pr.equals=function(t,e,r){if(ia.util.isArray(t)){if(!ia.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!pr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&pr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};pr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function C7(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(C7,"_checkBufferLength");var Inr=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;C7(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");pr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=ia.util.createBuffer(t));var r=t.length(),n=Pee(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Pee(t,e,r,n){var i;C7(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=Inr(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var d,p,m=(o&32)===32;if(m)if(d=[],l===void 0)for(;;){if(C7(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(Pee(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),d.push(Pee(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(d===void 0&&a===pr.Class.UNIVERSAL&&c===pr.Type.BITSTRING&&(p=t.bytes(l)),d===void 0&&n.decodeBitStrings&&a===pr.Class.UNIVERSAL&&c===pr.Type.BITSTRING&&l>1){var h=t.read,g=e,A=0;if(c===pr.Type.BITSTRING&&(C7(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},E=Pee(t,e,r+1,y),b=i-t.length();e-=b,c==pr.Type.BITSTRING&&b++;var w=E.tagClass;b===l&&(w===pr.Class.UNIVERSAL||w===pr.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===pr.Type.BMPSTRING)for(d="";l>0;l-=2)C7(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(l),e-=l}var R=p===void 0?null:{bitStringContents:p};return pr.create(a,c,m,d,R)}s(Pee,"_fromDer");pr.toDer=function(t){var e=ia.util.createBuffer(),r=t.tagClass|t.type,n=ia.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=pr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(pr.toDer(t.value[o]))}else if(t.type===pr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===pr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};pr.oidToDer=function(t){var e=t.split("."),r=ia.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};pr.derToOid=function(t){var e;typeof t=="string"&&(t=ia.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};pr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};pr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};pr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};pr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};pr.integerToDer=function(t){var e=ia.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};pr.derToInteger=function(t){typeof t=="string"&&(t=ia.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};pr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&ia.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=pr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Ant=/[^\\u0000-\\u00ff]/;pr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case pr.Class.UNIVERSAL:n+="Universal:";break;case pr.Class.APPLICATION:n+="Application:";break;case pr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case pr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===pr.Class.UNIVERSAL)switch(n+=t.type,t.type){case pr.Type.NONE:n+=" (None)";break;case pr.Type.BOOLEAN:n+=" (Boolean)";break;case pr.Type.INTEGER:n+=" (Integer)";break;case pr.Type.BITSTRING:n+=" (Bit string)";break;case pr.Type.OCTETSTRING:n+=" (Octet string)";break;case pr.Type.NULL:n+=" (Null)";break;case pr.Type.OID:n+=" (Object Identifier)";break;case pr.Type.ODESC:n+=" (Object Descriptor)";break;case pr.Type.EXTERNAL:n+=" (External or Instance of)";break;case pr.Type.REAL:n+=" (Real)";break;case pr.Type.ENUMERATED:n+=" (Enumerated)";break;case pr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case pr.Type.UTF8:n+=" (UTF8)";break;case pr.Type.ROID:n+=" (Relative Object Identifier)";break;case pr.Type.SEQUENCE:n+=" (Sequence)";break;case pr.Type.SET:n+=" (Set)";break;case pr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case pr.Type.IA5String:n+=" (IA5String (ASCII))";break;case pr.Type.UTCTIME:n+=" (UTC time)";break;case pr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case pr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=pr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===pr.Type.OID){var l=pr.derToOid(t.value);n+=l,ia.pki&&ia.pki.oids&&l in ia.pki.oids&&(n+=" ("+ia.pki.oids[l]+") ")}if(t.type===pr.Type.INTEGER)try{n+=pr.derToInteger(t.value)}catch{n+="0x"+ia.util.bytesToHex(t.value)}else if(t.type===pr.Type.BITSTRING){if(t.value.length>1?n+="0x"+ia.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===pr.Type.OCTETSTRING)Ant.test(t.value)||(n+="("+t.value+") "),n+="0x"+ia.util.bytesToHex(t.value);else if(t.type===pr.Type.UTF8)try{n+=ia.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+ia.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===pr.Type.PRINTABLESTRING||t.type===pr.Type.IA5String?n+=t.value:Ant.test(t.value)?n+="0x"+ia.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var DC=q((Tui,Cnt)=>{f();var Dee=Ii();Cnt.exports=Dee.md=Dee.md||{};Dee.md.algorithms=Dee.md.algorithms||{}});var LB=q((Sui,vnt)=>{f();var EE=Ii();DC();Fo();var Tnr=vnt.exports=EE.hmac=EE.hmac||{};Tnr.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in EE.md.algorithms)e=EE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=EE.util.createBuffer(a);else if(EE.util.isArray(a)){var c=a;a=EE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=EE.util.createBuffer(),n=EE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var Nee=q((Rui,Int)=>{f();var BC=Ii();DC();Fo();var xnt=Int.exports=BC.md5=BC.md5||{};BC.md.md5=BC.md.algorithms.md5=xnt;xnt.create=function(){bnt||wnr();var t=null,e=BC.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=BC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=BC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Ent(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=BC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(hxe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};Ent(d,r,i);var p=BC.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},n};var hxe=null,Bee=null,v7=null,MB=null,bnt=!1;function wnr(){hxe="\x80",hxe+=BC.util.fillString("\0",64),Bee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],v7=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],MB=new Array(64);for(var t=0;t<64;++t)MB[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);bnt=!0}s(wnr,"_init");function Ent(t,e,r){for(var n,i,o,a,c,l,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),l=c^o&(a^c),n=i+l+MB[d]+e[d],u=v7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<32;++d)l=a^c&(o^a),n=i+l+MB[d]+e[Bee[d]],u=v7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<48;++d)l=o^a^c,n=i+l+MB[d]+e[Bee[d]],u=v7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<64;++d)l=a^(o|~c),n=i+l+MB[d]+e[Bee[d]],u=v7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(Ent,"_update")});var MR=q((Dui,wnt)=>{f();var Mee=Ii();Fo();var Tnt=wnt.exports=Mee.pem=Mee.pem||{};Tnt.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Lee(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Lee(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Lee(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Lee(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Mee.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Tnt.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Mee.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var d=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),A=0;A<g.length;++A)h.values.push(Snr(g[A]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Lee(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(Lee,"foldHeader");function Snr(t){return t.replace(/^\s+/,"")}s(Snr,"ltrim")});var E7=q((Lui,_nt)=>{f();var Ia=Ii();See();uxe();Fo();_nt.exports=Ia.des=Ia.des||{};Ia.des.startEncrypting=function(t,e,r,n){var i=Fee({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ia.des.createEncryptionCipher=function(t,e){return Fee({key:t,output:null,decrypt:!1,mode:e})};Ia.des.startDecrypting=function(t,e,r,n){var i=Fee({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ia.des.createDecryptionCipher=function(t,e){return Fee({key:t,output:null,decrypt:!0,mode:e})};Ia.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return Snt(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return Snt(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Ia.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ia.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Mnr(e),this._init=!0}};NC("DES-ECB",Ia.cipher.modes.ecb);NC("DES-CBC",Ia.cipher.modes.cbc);NC("DES-CFB",Ia.cipher.modes.cfb);NC("DES-OFB",Ia.cipher.modes.ofb);NC("DES-CTR",Ia.cipher.modes.ctr);NC("3DES-ECB",Ia.cipher.modes.ecb);NC("3DES-CBC",Ia.cipher.modes.cbc);NC("3DES-CFB",Ia.cipher.modes.cfb);NC("3DES-OFB",Ia.cipher.modes.ofb);NC("3DES-CTR",Ia.cipher.modes.ctr);function NC(t,e){var r=s(function(){return new Ia.des.Algorithm(t,e)},"factory");Ia.cipher.registerAlgorithm(t,r)}s(NC,"registerAlgorithm");var _nr=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Rnr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],knr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Pnr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Dnr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Bnr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Nnr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Lnr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Mnr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,y=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w,R=0;R<A;R++){var D=t.getInt32(),N=t.getInt32();w=(D>>>4^N)&252645135,N^=w,D^=w<<4,w=(N>>>-16^D)&65535,D^=w,N^=w<<-16,w=(D>>>2^N)&858993459,N^=w,D^=w<<2,w=(N>>>-16^D)&65535,D^=w,N^=w<<-16,w=(D>>>1^N)&1431655765,N^=w,D^=w<<1,w=(N>>>8^D)&16711935,D^=w,N^=w<<8,w=(D>>>1^N)&1431655765,N^=w,D^=w<<1,w=D<<8|N>>>20&240,D=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=w;for(var O=0;O<E.length;++O){E[O]?(D=D<<2|D>>>26,N=N<<2|N>>>26):(D=D<<1|D>>>27,N=N<<1|N>>>27),D&=-15,N&=-15;var Y=e[D>>>28]|r[D>>>24&15]|n[D>>>20&15]|i[D>>>16&15]|o[D>>>12&15]|a[D>>>8&15]|c[D>>>4&15],ee=l[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];w=(ee>>>16^Y)&65535,y[b++]=Y^w,y[b++]=ee^w<<16}}return y}s(Mnr,"_createKeys");function Snt(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(Rnr[h>>>24&63]|Pnr[h>>>16&63]|Bnr[h>>>8&63]|Lnr[h&63]|_nr[g>>>24&63]|knr[g>>>16&63]|Dnr[g>>>8&63]|Nnr[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(Snt,"_updateBlock");function Fee(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Ia.cipher.createDecipher(r,t.key):n=Ia.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ia.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(Fee,"_createCipher")});var Oee=q((Oui,Rnt)=>{f();var gf=Ii();LB();DC();Fo();var Fnr=gf.pkcs5=gf.pkcs5||{},xE;gf.util.isNodejs&&!gf.options.usePureJavaScript&&(xE=require("crypto"));Rnt.exports=gf.pbkdf2=Fnr.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),gf.util.isNodejs&&!gf.options.usePureJavaScript&&xE.pbkdf2&&(i===null||typeof i!="object")&&(xE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?xE.pbkdf2Sync.length===4?xE.pbkdf2(t,e,r,n,function(w,R){if(w)return o(w);o(null,R.toString("binary"))}):xE.pbkdf2(t,e,r,n,i,function(w,R){if(w)return o(w);o(null,R.toString("binary"))}):xE.pbkdf2Sync.length===4?xE.pbkdf2Sync(t,e,r,n).toString("binary"):xE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in gf.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=gf.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,d=gf.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var A=1;A<=l;++A){d.start(null,null),d.update(e),d.update(gf.util.int32ToBytes(A)),m=g=d.digest().getBytes();for(var y=2;y<=r;++y)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=gf.util.xorBytes(m,h,a),g=h;p+=A<l?m:m.substr(0,u)}return p}var A=1,y;function E(){if(A>l)return o(null,p);d.start(null,null),d.update(e),d.update(gf.util.int32ToBytes(A)),m=g=d.digest().getBytes(),y=2,b()}s(E,"outer");function b(){if(y<=r)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=gf.util.xorBytes(m,h,a),g=h,++y,gf.util.setImmediate(b);p+=A<l?m:m.substr(0,u),++A,E()}s(b,"inner"),E()}});var Axe=q((qui,Nnt)=>{f();var LC=Ii();DC();Fo();var Pnt=Nnt.exports=LC.sha256=LC.sha256||{};LC.md.sha256=LC.md.algorithms.sha256=Pnt;Pnt.create=function(){Dnt||Onr();var t=null,e=LC.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=LC.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=LC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),knt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=LC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(gxe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)c=n.fullMessageLength[d+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};knt(p,r,i);var m=LC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var gxe=null,Dnt=!1,Bnt=null;function Onr(){gxe="\x80",gxe+=LC.util.fillString("\0",64),Bnt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Dnt=!0}s(Onr,"_init");function knt(t,e,r){for(var n,i,o,a,c,l,u,d,p,m,h,g,A,y,E,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,A=t.h5,y=t.h6,E=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=y^g&(A^y),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),l=d&p|m&(d^p),n=E+a+c+Bnt[u]+e[u],i=o+l,E=y,y=A,A=g,g=h+n>>>0,h=m,m=p,p=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+A|0,t.h6=t.h6+y|0,t.h7=t.h7+E|0,b-=64}}s(knt,"_update")});var yxe=q(($ui,Lnt)=>{f();var MC=Ii();Fo();var Qee=null;MC.util.isNodejs&&!MC.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Qee=require("crypto"));var Qnr=Lnt.exports=MC.prng=MC.prng||{};Qnr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,A=MC.util.createBuffer();e.key=null,y();function y(E){if(E)return d(E);if(A.length()>=u)return d(null,A.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return MC.util.nextTick(function(){o(y)});var b=p(e.key,e.seed);e.generated+=b.length,A.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),MC.util.setImmediate(y)}s(y,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=MC.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var A=d(e.key,e.seed);e.generated+=A.length,g.putBytes(A),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var d=null,p=MC.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(D){return m.getRandomValues(D)},"getRandomValues"));var h=MC.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{d(A);for(var y=0;y<A.length;++y)h.putInt32(A[y])}catch(D){if(!(typeof QuotaExceededError<"u"&&D instanceof QuotaExceededError))throw D}}if(h.length()<u)for(var E,b,w,R=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(R&65535),E=16807*(R>>16),b+=(E&32767)<<16,b+=E>>15,b=(b&2147483647)+(b>>31),R=b&4294967295;for(var y=0;y<3;++y)w=R>>>(y<<3),w^=Math.floor(Math.random()*256),h.putByte(w&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),Qee?(e.seedFile=function(u,d){Qee.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return Qee.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,l(u))}catch(p){d(p)}},e.seedFileSync=l),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",h),m(A.forge.prng.err,A.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var Ch=q((Vui,Cxe)=>{f();var iu=Ii();QT();Axe();yxe();Fo();(function(){if(iu.random&&iu.random.getBytes){Cxe.exports=iu.random;return}(function(t){var e={},r=new Array(4),n=iu.util.createBuffer();e.formatKey=function(p){var m=iu.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),iu.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=iu.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return iu.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=iu.md.sha256;function i(){var p=iu.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=iu.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),iu.options.usePureJavaScript||!iu.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!iu.random)iu.random=o;else for(var d in o)iu.random[d]=o[d];iu.random.createInstance=i,Cxe.exports=iu.random})(typeof jQuery<"u"?jQuery:null)})()});var Exe=q((Kui,Ont)=>{f();var y0=Ii();Fo();var vxe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Mnt=[1,2,3,5],Unr=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),qnr=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Ont.exports=y0.rc2=y0.rc2||{};y0.rc2.expandKey=function(t,e){typeof t=="string"&&(t=y0.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(vxe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,vxe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,vxe[r.at(c+1)^r.at(c+o)]);return r};var Fnt=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,d,p=[];for(t=y0.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=Unr(g[u],Mnt[u]),d++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=qnr(g[u],Mnt[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var A=[];for(u=0;u<4;u++){var y=i.getInt16Le();a!==null&&(r?y^=a.getInt16Le():a.putInt16Le(y)),A.push(y&65535)}d=r?0:63;for(var E=0;E<g.length;E++)for(var b=0;b<g[E][0];b++)g[E][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),o.putInt16Le(A[u])},"runPlan"),h=null;return h={start:s(function(g,A){g&&typeof g=="string"&&(g=y0.util.createBuffer(g)),n=!1,i=y0.util.createBuffer(),o=A||new y0.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(A&&(n=!0,h.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,o,!r);else{var E=o.length(),b=o.at(E-1);b>E?A=!1:o.truncate(b)}return A},"finish")},h},"createCipher");y0.rc2.startEncrypting=function(t,e,r){var n=y0.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};y0.rc2.createEncryptionCipher=function(t,e){return Fnt(t,e,!0)};y0.rc2.startDecrypting=function(t,e,r){var n=y0.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};y0.rc2.createDecryptionCipher=function(t,e){return Fnt(t,e,!1)}});var b7=q((Zui,Gnt)=>{f();var xxe=Ii();Gnt.exports=xxe.jsbn=xxe.jsbn||{};var bE,Hnr=0xdeadbeefcafe,Qnt=(Hnr&16777215)==15715070;function Rt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Rt,"BigInteger");xxe.jsbn.BigInteger=Rt;function Oo(){return new Rt(null)}s(Oo,"nbi");function Wnr(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(Wnr,"am1");function $nr(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,d=c*l+u*a;l=a*l+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(d>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s($nr,"am2");function Unt(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,d=c*l+u*a;l=a*l+((d&16383)<<14)+r.data[n]+i,i=(l>>28)+(d>>14)+c*u,r.data[n++]=l&268435455}return i}s(Unt,"am3");typeof navigator>"u"?(Rt.prototype.am=Unt,bE=28):Qnt&&navigator.appName=="Microsoft Internet Explorer"?(Rt.prototype.am=$nr,bE=30):Qnt&&navigator.appName!="Netscape"?(Rt.prototype.am=Wnr,bE=26):(Rt.prototype.am=Unt,bE=28);Rt.prototype.DB=bE;Rt.prototype.DM=(1<<bE)-1;Rt.prototype.DV=1<<bE;var bxe=52;Rt.prototype.FV=Math.pow(2,bxe);Rt.prototype.F1=bxe-bE;Rt.prototype.F2=2*bE-bxe;var jnr="0123456789abcdefghijklmnopqrstuvwxyz",Uee=new Array,FB,vh;FB=48;for(vh=0;vh<=9;++vh)Uee[FB++]=vh;FB=97;for(vh=10;vh<36;++vh)Uee[FB++]=vh;FB=65;for(vh=10;vh<36;++vh)Uee[FB++]=vh;function qnt(t){return jnr.charAt(t)}s(qnt,"int2char");function Hnt(t,e){var r=Uee[t.charCodeAt(e)];return r??-1}s(Hnt,"intAt");function Gnr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(Gnr,"bnpCopyTo");function Vnr(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(Vnr,"bnpFromInt");function qT(t){var e=Oo();return e.fromInt(t),e}s(qT,"nbv");function znr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Hnt(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Rt.ZERO.subTo(this,this)}s(znr,"bnpFromString");function Ynr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(Ynr,"bnpClamp");function Knr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=qnt(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=qnt(n));return i?o:"0"}s(Knr,"bnToString");function Jnr(){var t=Oo();return Rt.ZERO.subTo(this,t),t}s(Jnr,"bnNegate");function Xnr(){return this.s<0?this.negate():this}s(Xnr,"bnAbs");function Znr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(Znr,"bnCompareTo");function qee(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(qee,"nbits");function eir(){return this.t<=0?0:this.DB*(this.t-1)+qee(this.data[this.t-1]^this.s&this.DM)}s(eir,"bnBitLength");function tir(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(tir,"bnpDLShiftTo");function rir(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(rir,"bnpDRShiftTo");function nir(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(nir,"bnpLShiftTo");function iir(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(iir,"bnpRShiftTo");function oir(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(oir,"bnpSubTo");function sir(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Rt.ZERO.subTo(e,e)}s(sir,"bnpMultiplyTo");function air(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(air,"bnpSquareTo");function cir(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Oo());var o=Oo(),a=this.s,c=t.s,l=this.DB-qee(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,A=r.t,y=A-u,E=e??Oo();for(o.dlShiftTo(y,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),Rt.ONE.dlShiftTo(u,E),E.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var b=r.data[--A]==d?this.DM:Math.floor(r.data[A]*m+(r.data[A-1]+g)*h);if((r.data[A]+=o.am(0,b,r,y,0,u))<b)for(o.dlShiftTo(y,E),r.subTo(E,r);r.data[A]<--b;)r.subTo(E,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&Rt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&Rt.ZERO.subTo(r,r)}}}s(cir,"bnpDivRemTo");function lir(t){var e=Oo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Rt.ZERO)>0&&t.subTo(e,e),e}s(lir,"bnMod");function FR(t){this.m=t}s(FR,"Classic");function uir(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(uir,"cConvert");function dir(t){return t}s(dir,"cRevert");function fir(t){t.divRemTo(this.m,null,t)}s(fir,"cReduce");function pir(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(pir,"cMulTo");function mir(t,e){t.squareTo(e),this.reduce(e)}s(mir,"cSqrTo");FR.prototype.convert=uir;FR.prototype.revert=dir;FR.prototype.reduce=fir;FR.prototype.mulTo=pir;FR.prototype.sqrTo=mir;function hir(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(hir,"bnpInvDigit");function OR(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(OR,"Montgomery");function gir(t){var e=Oo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Rt.ZERO)>0&&this.m.subTo(e,e),e}s(gir,"montConvert");function Air(t){var e=Oo();return t.copyTo(e),this.reduce(e),e}s(Air,"montRevert");function yir(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(yir,"montReduce");function Cir(t,e){t.squareTo(e),this.reduce(e)}s(Cir,"montSqrTo");function vir(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(vir,"montMulTo");OR.prototype.convert=gir;OR.prototype.revert=Air;OR.prototype.reduce=yir;OR.prototype.mulTo=vir;OR.prototype.sqrTo=Cir;function Eir(){return(this.t>0?this.data[0]&1:this.s)==0}s(Eir,"bnpIsEven");function xir(t,e){if(t>4294967295||t<1)return Rt.ONE;var r=Oo(),n=Oo(),i=e.convert(this),o=qee(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(xir,"bnpExp");function bir(t,e){var r;return t<256||e.isEven()?r=new FR(e):r=new OR(e),this.exp(t,r)}s(bir,"bnModPowInt");Rt.prototype.copyTo=Gnr;Rt.prototype.fromInt=Vnr;Rt.prototype.fromString=znr;Rt.prototype.clamp=Ynr;Rt.prototype.dlShiftTo=tir;Rt.prototype.drShiftTo=rir;Rt.prototype.lShiftTo=nir;Rt.prototype.rShiftTo=iir;Rt.prototype.subTo=oir;Rt.prototype.multiplyTo=sir;Rt.prototype.squareTo=air;Rt.prototype.divRemTo=cir;Rt.prototype.invDigit=hir;Rt.prototype.isEven=Eir;Rt.prototype.exp=xir;Rt.prototype.toString=Knr;Rt.prototype.negate=Jnr;Rt.prototype.abs=Xnr;Rt.prototype.compareTo=Znr;Rt.prototype.bitLength=eir;Rt.prototype.mod=lir;Rt.prototype.modPowInt=bir;Rt.ZERO=qT(0);Rt.ONE=qT(1);function Iir(){var t=Oo();return this.copyTo(t),t}s(Iir,"bnClone");function Tir(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(Tir,"bnIntValue");function wir(){return this.t==0?this.s:this.data[0]<<24>>24}s(wir,"bnByteValue");function Sir(){return this.t==0?this.s:this.data[0]<<16>>16}s(Sir,"bnShortValue");function _ir(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(_ir,"bnpChunkSize");function Rir(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(Rir,"bnSigNum");function kir(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=qT(r),i=Oo(),o=Oo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(kir,"bnpToRadix");function Pir(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Hnt(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Rt.ZERO.subTo(this,this)}s(Pir,"bnpFromRadix");function Dir(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Rt.ONE.shiftLeft(t-1),Ixe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Rt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(Dir,"bnpFromNumber");function Bir(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(Bir,"bnToByteArray");function Nir(t){return this.compareTo(t)==0}s(Nir,"bnEquals");function Lir(t){return this.compareTo(t)<0?this:t}s(Lir,"bnMin");function Mir(t){return this.compareTo(t)>0?this:t}s(Mir,"bnMax");function Fir(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(Fir,"bnpBitwiseTo");function Oir(t,e){return t&e}s(Oir,"op_and");function Qir(t){var e=Oo();return this.bitwiseTo(t,Oir,e),e}s(Qir,"bnAnd");function Ixe(t,e){return t|e}s(Ixe,"op_or");function Uir(t){var e=Oo();return this.bitwiseTo(t,Ixe,e),e}s(Uir,"bnOr");function Wnt(t,e){return t^e}s(Wnt,"op_xor");function qir(t){var e=Oo();return this.bitwiseTo(t,Wnt,e),e}s(qir,"bnXor");function $nt(t,e){return t&~e}s($nt,"op_andnot");function Hir(t){var e=Oo();return this.bitwiseTo(t,$nt,e),e}s(Hir,"bnAndNot");function Wir(){for(var t=Oo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(Wir,"bnNot");function $ir(t){var e=Oo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s($ir,"bnShiftLeft");function jir(t){var e=Oo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(jir,"bnShiftRight");function Gir(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(Gir,"lbit");function Vir(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Gir(this.data[t]);return this.s<0?this.t*this.DB:-1}s(Vir,"bnGetLowestSetBit");function zir(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(zir,"cbit");function Yir(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=zir(this.data[r]^e);return t}s(Yir,"bnBitCount");function Kir(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(Kir,"bnTestBit");function Jir(t,e){var r=Rt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(Jir,"bnpChangeBit");function Xir(t){return this.changeBit(t,Ixe)}s(Xir,"bnSetBit");function Zir(t){return this.changeBit(t,$nt)}s(Zir,"bnClearBit");function eor(t){return this.changeBit(t,Wnt)}s(eor,"bnFlipBit");function tor(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(tor,"bnpAddTo");function ror(t){var e=Oo();return this.addTo(t,e),e}s(ror,"bnAdd");function nor(t){var e=Oo();return this.subTo(t,e),e}s(nor,"bnSubtract");function ior(t){var e=Oo();return this.multiplyTo(t,e),e}s(ior,"bnMultiply");function oor(t){var e=Oo();return this.divRemTo(t,e,null),e}s(oor,"bnDivide");function sor(t){var e=Oo();return this.divRemTo(t,null,e),e}s(sor,"bnRemainder");function aor(t){var e=Oo(),r=Oo();return this.divRemTo(t,e,r),new Array(e,r)}s(aor,"bnDivideAndRemainder");function cor(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(cor,"bnpDMultiply");function lor(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(lor,"bnpDAddOffset");function x7(){}s(x7,"NullExp");function jnt(t){return t}s(jnt,"nNop");function uor(t,e,r){t.multiplyTo(e,r)}s(uor,"nMulTo");function dor(t,e){t.squareTo(e)}s(dor,"nSqrTo");x7.prototype.convert=jnt;x7.prototype.revert=jnt;x7.prototype.mulTo=uor;x7.prototype.sqrTo=dor;function por(t){return this.exp(t,new x7)}s(por,"bnPow");function mor(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(mor,"bnpMultiplyLowerTo");function hor(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(hor,"bnpMultiplyUpperTo");function OB(t){this.r2=Oo(),this.q3=Oo(),Rt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(OB,"Barrett");function gor(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Oo();return t.copyTo(e),this.reduce(e),e}s(gor,"barrettConvert");function Aor(t){return t}s(Aor,"barrettRevert");function yor(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(yor,"barrettReduce");function Cor(t,e){t.squareTo(e),this.reduce(e)}s(Cor,"barrettSqrTo");function vor(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(vor,"barrettMulTo");OB.prototype.convert=gor;OB.prototype.revert=Aor;OB.prototype.reduce=yor;OB.prototype.mulTo=vor;OB.prototype.sqrTo=Cor;function Eor(t,e){var r=t.bitLength(),n,i=qT(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new FR(e):e.isEven()?o=new OB(e):o=new OR(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var d=Oo();for(o.sqrTo(a[1],d);c<=u;)a[c]=Oo(),o.mulTo(d,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Oo(),A;for(r=qee(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(A=i,i=g,g=A),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(Eor,"bnModPow");function xor(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(xor,"bnGCD");function bor(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(bor,"bnpModInt");function Ior(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Rt.ZERO;for(var r=t.clone(),n=this.clone(),i=qT(1),o=qT(0),a=qT(0),c=qT(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(Rt.ONE)!=0)return Rt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(Ior,"bnModInverse");var vA=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Tor=(1<<26)/vA[vA.length-1];function wor(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=vA[vA.length-1]){for(e=0;e<vA.length;++e)if(r.data[0]==vA[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<vA.length;){for(var n=vA[e],i=e+1;i<vA.length&&n<Tor;)n*=vA[i++];for(n=r.modInt(n);e<i;)if(n%vA[e++]==0)return!1}return r.millerRabin(t)}s(wor,"bnIsProbablePrime");function Sor(t){var e=this.subtract(Rt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=_or(),o,a=0;a<t;++a){do o=new Rt(this.bitLength(),i);while(o.compareTo(Rt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(Rt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(Rt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(Sor,"bnpMillerRabin");function _or(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(_or,"bnGetPrng");Rt.prototype.chunkSize=_ir;Rt.prototype.toRadix=kir;Rt.prototype.fromRadix=Pir;Rt.prototype.fromNumber=Dir;Rt.prototype.bitwiseTo=Fir;Rt.prototype.changeBit=Jir;Rt.prototype.addTo=tor;Rt.prototype.dMultiply=cor;Rt.prototype.dAddOffset=lor;Rt.prototype.multiplyLowerTo=mor;Rt.prototype.multiplyUpperTo=hor;Rt.prototype.modInt=bor;Rt.prototype.millerRabin=Sor;Rt.prototype.clone=Iir;Rt.prototype.intValue=Tir;Rt.prototype.byteValue=wir;Rt.prototype.shortValue=Sir;Rt.prototype.signum=Rir;Rt.prototype.toByteArray=Bir;Rt.prototype.equals=Nir;Rt.prototype.min=Lir;Rt.prototype.max=Mir;Rt.prototype.and=Qir;Rt.prototype.or=Uir;Rt.prototype.xor=qir;Rt.prototype.andNot=Hir;Rt.prototype.not=Wir;Rt.prototype.shiftLeft=$ir;Rt.prototype.shiftRight=jir;Rt.prototype.getLowestSetBit=Vir;Rt.prototype.bitCount=Yir;Rt.prototype.testBit=Kir;Rt.prototype.setBit=Xir;Rt.prototype.clearBit=Zir;Rt.prototype.flipBit=eor;Rt.prototype.add=ror;Rt.prototype.subtract=nor;Rt.prototype.multiply=ior;Rt.prototype.divide=oor;Rt.prototype.remainder=sor;Rt.prototype.divideAndRemainder=aor;Rt.prototype.modPow=Eor;Rt.prototype.modInverse=Ior;Rt.prototype.pow=por;Rt.prototype.gcd=xor;Rt.prototype.isProbablePrime=wor});var QB=q((rdi,Knt)=>{f();var FC=Ii();DC();Fo();var znt=Knt.exports=FC.sha1=FC.sha1||{};FC.md.sha1=FC.md.algorithms.sha1=znt;znt.create=function(){Ynt||Ror();var t=null,e=FC.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=FC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=FC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Vnt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=FC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(Txe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)c=n.fullMessageLength[d+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Vnt(p,r,i);var m=FC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var Txe=null,Ynt=!1;function Ror(){Txe="\x80",Txe+=FC.util.fillString("\0",64),Ynt=!0}s(Ror,"_init");function Vnt(t,e,r){for(var n,i,o,a,c,l,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(Vnt,"_update")});var wxe=q((odi,Xnt)=>{f();var OC=Ii();Fo();Ch();QB();var Jnt=Xnt.exports=OC.pkcs1=OC.pkcs1||{};Jnt.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=OC.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var d=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=OC.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var A=Hee(i,c-o.digestLength-1,a),y=OC.util.xorBytes(g,A,g.length),E=Hee(y,o.digestLength,a),b=OC.util.xorBytes(i,E,i.length);return"\0"+b+y};Jnt.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=a,y}if(i===void 0?i=OC.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=Hee(d,i.digestLength,o),m=OC.util.xorBytes(u,p,u.length),h=Hee(m,a-i.digestLength-1,o),g=OC.util.xorBytes(d,h,d.length),A=g.substring(0,i.digestLength),y=l!=="\0",E=0;E<i.digestLength;++E)y|=c.charAt(E)!==A.charAt(E);for(var b=1,w=i.digestLength,R=i.digestLength;R<g.length;R++){var D=g.charCodeAt(R),N=D&1^1,O=b?65534:0;y|=D&O,b=b&N,w+=b}if(y||g.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(w+1)};function Hee(t,e,r){r||(r=OC.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(Hee,"rsa_mgf1")});var _xe=q((cdi,Sxe)=>{f();var HT=Ii();Fo();b7();Ch();(function(){if(HT.prime){Sxe.exports=HT.prime;return}var t=Sxe.exports=HT.prime=HT.prime||{},e=HT.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=m.prng||HT.random,y={nextBytes:s(function(E){for(var b=A.getBytesSync(E.length),w=0;w<E.length;++w)E[w]=b.charCodeAt(w)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,y,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var A=u(p,m),y=0,E=d(A.bitLength());"millerRabinTests"in h&&(E=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(A,p,m,y,E,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,A,y,E){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(A))return E(null,p);p.dAddOffset(r[g++%8],0)}while(y<0||+new Date-b<y);HT.util.setImmediate(function(){c(p,m,h,g,A,y,E)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var A=u(p,m),y=h.workers,E=h.workLoad||100,b=E*30/8,w=h.workerScript||"forge/prime.worker.js";if(y===-1)return HT.util.estimateCores(function(D,N){D&&(N=2),y=N-1,R()});R();function R(){y=Math.max(1,y);for(var D=[],N=0;N<y;++N)D[N]=new Worker(w);for(var O=y,N=0;N<y;++N)D[N].addEventListener("message",ee);var Y=!1;function ee(V){if(!Y){--O;var H=V.data;if(H.found){for(var U=0;U<D.length;++U)D[U].terminate();return Y=!0,g(null,new e(H.prime,16))}A.bitLength()>p&&(A=u(p,m));var X=A.toString(16);V.target.postMessage({hex:X,workLoad:E}),A.dAddOffset(b,0)}}s(ee,"workerMessage")}s(R,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var I7=q((ddi,oit)=>{f();var mn=Ii();CA();b7();UT();wxe();_xe();Ch();Fo();typeof So>"u"&&(So=mn.jsbn.BigInteger);var So,Rxe=mn.util.isNodejs?require("crypto"):null,ze=mn.asn1,Eh=mn.util;mn.pki=mn.pki||{};oit.exports=mn.pki.rsa=mn.rsa=mn.rsa||{};var pi=mn.pki,kor=[6,4,2,4,2,4,6,2],Por={name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Dor={name:"RSAPrivateKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Bor={name:"RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Nor=mn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Lor={name:"DigestInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ze.Class.UNIVERSAL,type:ze.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Mor=s(function(t){var e;if(t.algorithm in pi.oids)e=pi.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ze.oidToDer(e).getBytes(),i=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]),o=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]);o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,n)),o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,""));var a=ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),ze.toDer(i).getBytes()},"emsaPkcs1v15encode"),nit=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(So.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(So.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new So(mn.util.bytesToHex(mn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(So.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");pi.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=iit(t,e,r)):(i=mn.util.createBuffer(),i.putBytes(t));for(var a=new So(i.toHex(),16),c=nit(a,e,n),l=c.toString(16),u=mn.util.createBuffer(),d=o-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(mn.util.hexToBytes(l)),u.getBytes()};pi.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new So(mn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=nit(a,e,r),l=c.toString(16),u=mn.util.createBuffer(),d=i-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(mn.util.hexToBytes(l)),n!==!1?Wee(u.getBytes(),e,r):u.getBytes()};pi.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||mn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new So(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};pi.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new So(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new So(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(So.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(Oor(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(kor[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(So.ONE).gcd(t.e).compareTo(So.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(So.ONE),t.q1=t.q.subtract(So.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(So.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:pi.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:pi.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};pi.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!mn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Znt("generateKeyPair"))return Rxe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:pi.privateKeyFromPem(u),publicKey:pi.publicKeyFromPem(l)})});if(eit("generateKey")&&eit("exportKey"))return Eh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rit(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return Eh.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=pi.privateKeyFromAsn1(ze.fromDer(mn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:pi.setRsaPublicKey(l.n,l.e)})}});if(tit("generateKey")&&tit("exportKey")){var i=Eh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rit(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=Eh.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(d){var p=d.target.result,m=pi.privateKeyFromAsn1(ze.fromDer(mn.util.createBuffer(p)));n(null,{privateKey:m,publicKey:pi.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){n(d)}},i.onerror=function(c){n(c)};return}}else if(Znt("generateKeyPairSync")){var o=Rxe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pi.privateKeyFromPem(o.privateKey),publicKey:pi.publicKeyFromPem(o.publicKey)}}}var a=pi.rsa.createKeyPairGenerationState(t,e,r);if(!n)return pi.rsa.stepKeyPairGenerationState(a,0),a.keys;For(a,r,n)};pi.setRsaPublicKey=pi.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return iit(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return mn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return pi.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=Wee(u,r,!0);var d=ze.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!ze.validate(d,Lor,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=ze.derToOid(p.algorithmIdentifier);if(!(g===mn.oids.md2||g===mn.oids.md5||g===mn.oids.sha1||g===mn.oids.sha224||g===mn.oids.sha256||g===mn.oids.sha384||g===mn.oids.sha512||g===mn.oids["sha512-224"]||g===mn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===mn.oids.md2||g===mn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=Wee(u,r,!0),l===u},"verify")});var c=pi.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};pi.setRsaPrivateKey=pi.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=pi.rsa.decrypt(u,l,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:Wee};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return mn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,l,!1)},l.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:Mor},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,l.n.bitLength());return pi.rsa.encrypt(m,l,p)},l};pi.wrapRsaPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(pi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,ze.toDer(t).getBytes())])};pi.privateKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,Por,e,r)&&(t=ze.fromDer(mn.util.createBuffer(e.privateKey))),e={},r=[],!ze.validate(t,Dor,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,d,p;return i=mn.util.createBuffer(e.privateKeyModulus).toHex(),o=mn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=mn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=mn.util.createBuffer(e.privateKeyPrime1).toHex(),l=mn.util.createBuffer(e.privateKeyPrime2).toHex(),u=mn.util.createBuffer(e.privateKeyExponent1).toHex(),d=mn.util.createBuffer(e.privateKeyExponent2).toHex(),p=mn.util.createBuffer(e.privateKeyCoefficient).toHex(),pi.setRsaPrivateKey(new So(i,16),new So(o,16),new So(a,16),new So(c,16),new So(l,16),new So(u,16),new So(d,16),new So(p,16))};pi.privateKeyToAsn1=pi.privateKeyToRSAPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.e)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.d)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.p)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.q)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.dP)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.dQ)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.qInv))])};pi.publicKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,Nor,e,r)){var n=ze.derToOid(e.publicKeyOid);if(n!==pi.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ze.validate(t,Bor,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=mn.util.createBuffer(e.publicKeyModulus).toHex(),a=mn.util.createBuffer(e.publicKeyExponent).toHex();return pi.setRsaPublicKey(new So(o,16),new So(a,16))};pi.publicKeyToAsn1=pi.publicKeyToSubjectPublicKeyInfo=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(pi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.BITSTRING,!1,[pi.publicKeyToRSAPublicKey(t)])])};pi.publicKeyToRSAPublicKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,QC(t.e))])};function iit(t,e,r){var n=mn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,d=mn.random.getBytes(a),l=0;l<a;++l)c=d.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(iit,"_encodePkcs1_v1_5");function Wee(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=mn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var d=o.getByte();if(d!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(Wee,"_decodePkcs1_v1_5");function For(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){mn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(So.ONE).gcd(t.e).compareTo(So.ONE)!==0){t.p=null,i();return}if(t.q.subtract(So.ONE).gcd(t.e).compareTo(So.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(So.ONE),t.q1=t.q.subtract(So.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(So.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:pi.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:pi.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(For,"_generateKeyPair");function QC(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=mn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(QC,"_bnToBytes");function Oor(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(Oor,"_getMillerRabinTests");function Znt(t){return mn.util.isNodejs&&typeof Rxe[t]=="function"}s(Znt,"_detectNodeCrypto");function eit(t){return typeof Eh.globalScope<"u"&&typeof Eh.globalScope.crypto=="object"&&typeof Eh.globalScope.crypto.subtle=="object"&&typeof Eh.globalScope.crypto.subtle[t]=="function"}s(eit,"_detectSubtleCrypto");function tit(t){return typeof Eh.globalScope<"u"&&typeof Eh.globalScope.msCrypto=="object"&&typeof Eh.globalScope.msCrypto.subtle=="object"&&typeof Eh.globalScope.msCrypto.subtle[t]=="function"}s(tit,"_detectSubtleMsCrypto");function rit(t){for(var e=mn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(rit,"_intToUint8Array")});var kxe=q((mdi,uit)=>{f();var Er=Ii();QT();CA();E7();DC();UT();Oee();MR();Ch();Exe();I7();Fo();typeof sit>"u"&&(sit=Er.jsbn.BigInteger);var sit,mt=Er.asn1,Ci=Er.pki=Er.pki||{};uit.exports=Ci.pbe=Er.pbe=Er.pbe||{};var QR=Ci.oids,Qor={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Uor={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},qor={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ci.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Er.random.getBytesSync(r.saltSize),i=r.count,o=mt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,d,p;switch(r.algorithm){case"aes128":a=16,u=16,d=QR["aes128-CBC"],p=Er.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=QR["aes192-CBC"],p=Er.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=QR["aes256-CBC"],p=Er.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=QR.desCBC,p=Er.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=lit(h),A=Er.pkcs5.pbkdf2(e,n,i,a,g),y=Er.random.getBytesSync(u),E=p(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes();var b=Hor(n,o,a,h);c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(QR.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(QR.pkcs5PBKDF2).getBytes()),b]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(d).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){a=24;var w=new Er.util.ByteBuffer(n),A=Ci.pbe.generatePkcs12Key(e,w,1,i,a),y=Ci.pbe.generatePkcs12Key(e,w,2,i,a),E=Er.des.createEncryptionCipher(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes(),c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(QR["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,n),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var R=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[c,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,l)]);return R};Ci.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!mt.validate(t,Qor,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mt.derToOid(n.encryptionOid),c=Ci.pbe.getCipher(a,n.encryptionParams,e),l=Er.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=mt.fromDer(c.output)),r};Ci.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(t).getBytes()};return Er.pem.encode(r,{maxline:e})};Ci.encryptedPrivateKeyFromPem=function(t){var e=Er.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(e.body)};Ci.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ci.wrapRsaPrivateKey(Ci.privateKeyToAsn1(t));return n=Ci.encryptPrivateKeyInfo(n,e,r),Ci.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=Er.random.getBytesSync(8),c=Er.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=Er.random.getBytesSync(8),c=Er.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=Er.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=c(u);d.start(o),d.update(mt.toDer(Ci.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Er.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return Er.pem.encode(p)};Ci.decryptRsaPrivateKey=function(t,e){var r=null,n=Er.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=Er.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=Er.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=Er.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=Er.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=Er.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return Er.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return Er.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return Er.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=Er.util.hexToBytes(n.dekInfo.parameters),l=Er.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(Er.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ci.decryptPrivateKeyInfo(mt.fromDer(r),e):r=mt.fromDer(r),r!==null&&(r=Ci.privateKeyFromAsn1(r)),r};Ci.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in Er.md))throw new Error('"sha1" hash algorithm unavailable.');o=Er.md.sha1.create()}var l=o.digestLength,u=o.blockLength,d=new Er.util.ByteBuffer,p=new Er.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new Er.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(h/u),y=new Er.util.ByteBuffer;for(c=0;c<A;c++)y.putByte(e.at(c%h));var E=u*Math.ceil(m/u),b=new Er.util.ByteBuffer;for(c=0;c<E;c++)b.putByte(p.at(c%m));var w=y;w.putBuffer(b);for(var R=Math.ceil(i/l),D=1;D<=R;D++){var N=new Er.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(w.bytes());for(var O=0;O<n;O++)o.start(),o.update(N.getBytes()),N=o.digest();var Y=new Er.util.ByteBuffer;for(c=0;c<u;c++)Y.putByte(N.at(c%l));var ee=Math.ceil(h/u)+Math.ceil(m/u),V=new Er.util.ByteBuffer;for(a=0;a<ee;a++){var H=new Er.util.ByteBuffer(w.getBytes(u)),U=511;for(c=Y.length()-1;c>=0;c--)U=U>>8,U+=Y.at(c)+H.at(c),H.setAt(c,U&255);V.putBuffer(H)}w=V,d.putBuffer(N)}return d.truncate(d.length()-i),d};Ci.pbe.getCipher=function(t,e,r){switch(t){case Ci.oids.pkcs5PBES2:return Ci.pbe.getCipherForPBES2(t,e,r);case Ci.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ci.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ci.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ci.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!mt.validate(e,Uor,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=mt.derToOid(n.kdfOid),t!==Ci.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=mt.derToOid(n.encOid),t!==Ci.oids["aes128-CBC"]&&t!==Ci.oids["aes192-CBC"]&&t!==Ci.oids["aes256-CBC"]&&t!==Ci.oids["des-EDE3-CBC"]&&t!==Ci.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=Er.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(Ci.oids[t]){case"aes128-CBC":l=16,u=Er.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=Er.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=Er.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=Er.des.createDecryptionCipher;break;case"desCBC":l=8,u=Er.des.createDecryptionCipher;break}var d=cit(n.prfOid),p=Er.pkcs5.pbkdf2(r,a,c,l,d),m=n.encIv,h=u(p);return h.start(m),h};Ci.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!mt.validate(e,qor,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=Er.util.createBuffer(n.salt),c=Er.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,d;switch(t){case Ci.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,d=Er.des.startDecrypting;break;case Ci.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,d=s(function(A,y){var E=Er.rc2.createDecryptionCipher(A,40);return E.start(y,null),E},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=cit(n.prfOid),m=Ci.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=Ci.pbe.generatePkcs12Key(r,a,2,c,u,p);return d(m,h)};Ci.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Er.md))throw new Error('"md5" hash algorithm unavailable.');n=Er.md.md5.create()}e===null&&(e="");for(var i=[ait(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(ait(n,i[a-1]+t+e));return i.join("").substr(0,r)};function ait(t,e){return t.start().update(e).digest().getBytes()}s(ait,"hash");function cit(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ci.oids[mt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return lit(e)}s(cit,"prfOidToMessageDigest");function lit(t){var e=Er.md;switch(t){case"hmacWithSHA224":e=Er.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(lit,"prfAlgorithmToMessageDigest");function Hor(t,e,r,n){var i=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,t),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,Er.util.hexToBytes(r.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Ci.oids[n]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),i}s(Hor,"createPbkdf2Params")});var Pxe=q((Adi,pit)=>{f();var UB=Ii();CA();Fo();var hr=UB.asn1,qB=pit.exports=UB.pkcs7asn1=UB.pkcs7asn1||{};UB.pkcs7=UB.pkcs7||{};UB.pkcs7.asn1=qB;var dit={name:"ContentInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};qB.contentInfoValidator=dit;var fit={name:"EncryptedContentInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};qB.envelopedDataValidator={name:"EnvelopedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(fit)};qB.encryptedDataValidator={name:"EncryptedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"}].concat(fit)};var Wor={name:"SignerInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:hr.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};qB.signedDataValidator={name:"SignedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},dit,{name:"SignedData.Certificates",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:hr.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,capture:"signerInfos",optional:!0,value:[Wor]}]};qB.recipientInfoValidator={name:"RecipientInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Dxe=q((Cdi,mit)=>{f();var UR=Ii();Fo();UR.mgf=UR.mgf||{};var $or=mit.exports=UR.mgf.mgf1=UR.mgf1=UR.mgf1||{};$or.create=function(t){var e={generate:s(function(r,n){for(var i=new UR.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new UR.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var git=q((xdi,hit)=>{f();var $ee=Ii();Dxe();hit.exports=$ee.mgf=$ee.mgf||{};$ee.mgf.mgf1=$ee.mgf1});var jee=q((Idi,Ait)=>{f();var qR=Ii();Ch();Fo();var jor=Ait.exports=qR.pss=qR.pss||{};jor.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=qR.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||qR.random,c={};return c.encode=function(l,u){var d,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var A=new qR.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(h),A.putBytes(g),e.start(),e.update(A.getBytes());var y=e.digest().getBytes(),E=new qR.util.ByteBuffer;E.fillWithByte(0,m-o-n-2),E.putByte(1),E.putBytes(g);var b=E.getBytes(),w=m-n-1,R=r.generate(y,w),D="";for(d=0;d<w;d++)D+=String.fromCharCode(b.charCodeAt(d)^R.charCodeAt(d));var N=65280>>8*m-p&255;return D=String.fromCharCode(D.charCodeAt(0)&~N)+D.substr(1),D+y+"\xBC"},c.verify=function(l,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,A=u.substr(0,g),y=u.substr(g,n),E=65280>>8*h-m&255;if((A.charCodeAt(0)&E)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(y,g),w="";for(p=0;p<g;p++)w+=String.fromCharCode(A.charCodeAt(p)^b.charCodeAt(p));w=String.fromCharCode(w.charCodeAt(0)&~E)+w.substr(1);var R=h-n-o-2;for(p=0;p<R;p++)if(w.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(w.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var D=w.substr(-o),N=new qR.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(l),N.putBytes(D),e.start(),e.update(N.getBytes());var O=e.digest().getBytes();return y===O},c}});var zee=q((wdi,xit)=>{f();var hn=Ii();QT();CA();E7();DC();git();UT();MR();jee();I7();Fo();var re=hn.asn1,Jt=xit.exports=hn.pki=hn.pki||{},_o=Jt.oids,rc={};rc.CN=_o.commonName;rc.commonName="CN";rc.C=_o.countryName;rc.countryName="C";rc.L=_o.localityName;rc.localityName="L";rc.ST=_o.stateOrProvinceName;rc.stateOrProvinceName="ST";rc.O=_o.organizationName;rc.organizationName="O";rc.OU=_o.organizationalUnitName;rc.organizationalUnitName="OU";rc.E=_o.emailAddress;rc.emailAddress="E";var Cit=hn.pki.rsa.publicKeyValidator,Gor={name:"Certificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Cit,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Vor={name:"rsapss",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},zor={name:"CertificationRequestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Cit,{name:"CertificationRequestInfo.attributes",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0}]}]}]},Yor={name:"CertificationRequest",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[zor,{name:"CertificationRequest.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=re.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in _o&&(o.name=_o[o.type],o.name in rc&&(o.shortName=rc[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=re.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in _o&&(c.name=_o[c.type],c.name in rc&&(c.shortName=rc[c.name])),c.type===_o.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(Jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function WT(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(WT,"_getAttribute");var Gee=s(function(t,e,r){var n={};if(t!==_o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:_o.sha1},mgf:{algorithmOid:_o.mgf1,hash:{algorithmOid:_o.sha1}},saltLength:20});var i={},o=[];if(!re.validate(e,Vor,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=re.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=re.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=re.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),Vee=s(function(t){switch(_o[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return hn.md.sha1.create();case"md5WithRSAEncryption":return hn.md.md5.create();case"sha256WithRSAEncryption":return hn.md.sha256.create();case"sha384WithRSAEncryption":return hn.md.sha384.create();case"sha512WithRSAEncryption":return hn.md.sha512.create();case"RSASSA-PSS":return hn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),vit=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case _o.sha1WithRSAEncryption:case _o.sha1WithRSASignature:break;case _o["RSASSA-PSS"]:var n,i;if(n=_o[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||hn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=_o[e.signatureParameters.mgf.algorithmOid],i===void 0||hn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=hn.mgf[i].create(hn.md[n].create()),n=_o[e.signatureParameters.hash.algorithmOid],n===void 0||hn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=hn.pss.create(hn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Jt.certificateFromPem=function(t,e,r){var n=hn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificateFromAsn1(o,e)};Jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:re.toDer(Jt.certificateToAsn1(t)).getBytes()};return hn.pem.encode(r,{maxline:e})};Jt.publicKeyFromPem=function(t){var e=hn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=re.fromDer(e.body);return Jt.publicKeyFromAsn1(n)};Jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:re.toDer(Jt.publicKeyToAsn1(t)).getBytes()};return hn.pem.encode(r,{maxline:e})};Jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes()};return hn.pem.encode(r,{maxline:e})};Jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||hn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=re.toDer(Jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Jt.certificationRequestFromPem=function(t,e,r){var n=hn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificationRequestFromAsn1(o,e)};Jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:re.toDer(Jt.certificationRequestToAsn1(t)).getBytes()};return hn.pem.encode(r,{maxline:e})};Jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return WT(t.issuer,e)},t.issuer.addField=function(e){xh([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return WT(t.subject,e)},t.subject.addField=function(e){xh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){xh(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){xh(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Eit(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||hn.md.sha1.create();var n=_o[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Jt.getTBSCertificate(t);var o=re.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=Vee({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||Jt.getTBSCertificate(e),l=re.toDer(c);a.update(l.getBytes())}return a!==null&&(r=vit({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=_o.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return hn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Gor,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=hn.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=hn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Gee(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=hn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Gee(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=Vee({signatureOid:a.signatureOid,type:"certificate"});var u=re.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=hn.md.sha1.create(),p=re.toDer(r.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return WT(a.issuer,g)},a.issuer.addField=function(g){xh([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=hn.md.sha1.create(),h=re.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return WT(a.subject,g)},a.subject.addField=function(g){xh([g]),a.subject.attributes.push(g)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Jt.certificateExtensionFromAsn1(n.value[i]));return e};Jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=re.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===re.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in _o){if(e.name=_o[e.id],e.name==="keyUsage"){var r=re.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=re.fromDer(e.value);r.value.length>0&&r.value[0].type===re.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===re.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=re.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=re.fromDer(e.value),a=0;a<r.value.length;++a){var c=re.derToOid(r.value[a].value);c in _o?e[_o[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=re.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=re.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var d={type:l.type,value:l.value};switch(e.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=hn.util.bytesToIP(l.value);break;case 8:d.oid=re.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=re.fromDer(e.value);e.subjectKeyIdentifier=hn.util.bytesToHex(r.value)}}return e};Jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Yor,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=hn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Gee(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=hn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Gee(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=Vee({signatureOid:a.signatureOid,type:"certification request"});var c=re.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=hn.md.sha1.create();return a.subject.getField=function(u){return WT(a.subject,u)},a.subject.addField=function(u){xh([u]),a.subject.attributes.push(u)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return WT(a,u)},a.addAttribute=function(u){xh([u]),a.attributes.push(u)},a.attributes=Jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return WT(t.subject,e)},t.subject.addField=function(e){xh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return WT(t,e)},t.addAttribute=function(e){xh([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){xh(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){xh(e),t.attributes=e},t.sign=function(e,r){t.md=r||hn.md.sha1.create();var n=_o[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Jt.getCertificationRequestInfo(t);var o=re.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Vee({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t),i=re.toDer(n);r.update(i.getBytes())}return r!==null&&(e=vit({certificate:t,md:r,signature:t.signature})),e},t};function HB(t){for(var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=re.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===re.Type.UTF8&&(a=hn.util.encodeUtf8(a))),n=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(r.type).getBytes()),re.create(re.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(HB,"_dnToAsn1");function xh(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Jt.oids?e.name=Jt.oids[e.type]:e.shortName&&e.shortName in rc&&(e.name=Jt.oids[rc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Jt.oids)e.type=Jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in rc&&(e.shortName=rc[e.name]),e.type===_o.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=re.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Jt.certificateExtensionToAsn1(Eit(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(xh,"_fillMissingFields");function Eit(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Jt.oids&&(t.name=Jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Jt.oids)t.id=Jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in _o?c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(_o[l]).getBytes())):l.indexOf(".")!==-1&&c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=hn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));t.value.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=re.create(re.Class.UNIVERSAL,re.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[re.create(re.Class.CONTEXT_SPECIFIC,4,!0,[HB(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=hn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var c=t.value.value,A=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),y=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=hn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));y.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[y])),c.push(A)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(Eit,"_fillMissingExtensionFields");function Bxe(t,e){switch(t){case _o["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(e.saltLength).getBytes())])),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,r);default:return re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")}}s(Bxe,"_signatureParametersToAsn1");function Kor(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=re.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===re.Type.UTF8&&(o=hn.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(i.type).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(Kor,"_CRIAttributesToAsn1");var Jor=new Date("1950-01-01T00:00:00Z"),Xor=new Date("2050-01-01T00:00:00Z");function yit(t){return t>=Jor&&t<Xor?re.create(re.Class.UNIVERSAL,re.Type.UTCTIME,!1,re.dateToUtcTime(t)):re.create(re.Class.UNIVERSAL,re.Type.GENERALIZEDTIME,!1,re.dateToGeneralizedTime(t))}s(yit,"_dateToAsn1");Jt.getTBSCertificate=function(t){var e=yit(t.validity.notBefore),r=yit(t.validity.notAfter),n=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,hn.util.hexToBytes(t.serialNumber)),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.siginfo.algorithmOid).getBytes()),Bxe(t.siginfo.algorithmOid,t.siginfo.parameters)]),HB(t.issuer),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,r]),HB(t.subject),Jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Jt.certificateExtensionsToAsn1(t.extensions)),n};Jt.getCertificationRequestInfo=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes()),HB(t.subject),Jt.publicKeyToAsn1(t.publicKey),Kor(t)]);return e};Jt.distinguishedNameToAsn1=function(t){return HB(t)};Jt.certificateToAsn1=function(t){var e=t.tbsCertificate||Jt.getTBSCertificate(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),Bxe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.certificateExtensionsToAsn1=function(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,3,!0,[]),r=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Jt.certificateExtensionToAsn1(t[n]));return e};Jt.certificateExtensionToAsn1=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.id).getBytes())),t.critical&&e.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=re.toDer(r).getBytes()),e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r)),e};Jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),Bxe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=hn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];hn.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=hn.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;hn.util.isArray(c)||(c=[c]);for(var l=re.toDer(Jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var d=re.toDer(Jt.certificateToAsn1(c[u])).getBytes();if(l===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!hn.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=hn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!hn.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=re.toDer(Jt.certificateToAsn1(a)).getBytes(),d=0;d<l.length;++d){var p=re.toDer(Jt.certificateToAsn1(l[d])).getBytes();u===p&&(c=l[d],l.splice(d,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=hn.md.sha1.create();a.attributes=Jt.RDNAttributesAsArray(HB(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,d=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(d=!0,u=l),u){var p=u;hn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Jt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Jt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var y=l.getExtension("basicConstraints"),E=l.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||y===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Jt.certificateError.bad_certificate}),a===null&&y!==null&&!y.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Jt.certificateError.bad_certificate}),a===null&&E!==null&&"pathLenConstraint"in y){var b=c-1;b>y.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Jt.certificateError.bad_certificate})}}var w=a===null?!0:a.error,R=r.verify?r.verify(w,c,n):w;if(R===!0)a=null;else throw w===!0&&(a={message:"The application rejected the certificate.",error:Jt.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!hn.util.isArray(R)?(R.message&&(a.message=R.message),R.error&&(a.error=R.error)):typeof R=="string"&&(a.error=R)),a;o=!1,++c}while(e.length>0);return!0}});var Lxe=q((Rdi,Iit)=>{f();var Fs=Ii();CA();LB();UT();Pxe();kxe();Ch();I7();QB();Fo();zee();var Se=Fs.asn1,Gi=Fs.pki,w7=Iit.exports=Fs.pkcs12=Fs.pkcs12||{},bit={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Zor={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},bit,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},esr={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},tsr={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},rsr={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function T7(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(T7,"_getBagsByAttribute");w7.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Se.validate(t,Zor,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(y){var E={},b;return"localKeyId"in y?b=y.localKeyId:"localKeyIdHex"in y&&(b=Fs.util.hexToBytes(y.localKeyIdHex)),b===void 0&&!("friendlyName"in y)&&"bagType"in y&&(E[y.bagType]=T7(a.safeContents,null,null,y.bagType)),b!==void 0&&(E.localKeyId=T7(a.safeContents,"localKeyId",b,y.bagType)),"friendlyName"in y&&(E.friendlyName=T7(a.safeContents,"friendlyName",y.friendlyName,y.bagType)),E},"getBags"),getBagsByFriendlyName:s(function(y,E){return T7(a.safeContents,"friendlyName",y,E)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(y,E){return T7(a.safeContents,"localKeyId",y,E)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Se.derToOid(n.contentType)!==Gi.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Se.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Se.Class.UNIVERSAL||c.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=Nxe(c),n.mac){var l=null,u=0,d=Se.derToOid(n.macAlgorithm);switch(d){case Gi.oids.sha1:l=Fs.md.sha1.create(),u=20;break;case Gi.oids.sha256:l=Fs.md.sha256.create(),u=32;break;case Gi.oids.sha384:l=Fs.md.sha384.create(),u=48;break;case Gi.oids.sha512:l=Fs.md.sha512.create(),u=64;break;case Gi.oids.md5:l=Fs.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new Fs.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(Fs.util.bytesToHex(n.macIterations),16):1,h=w7.generateKey(r,p,3,m,u,l),g=Fs.hmac.create();g.start(l,h),g.update(c.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return nsr(a,c.value,e,r),a};function Nxe(t){if(t.composed||t.constructed){for(var e=Fs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(Nxe,"_decodePkcs7Data");function nsr(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Se.validate(o,bit,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Se.derToOid(a.contentType)){case Gi.oids.data:if(p.tagClass!==Se.Class.UNIVERSAL||p.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Nxe(p).value;break;case Gi.oids.encryptedData:d=isr(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Se.derToOid(a.contentType),l}u.safeBags=osr(d,r,n),t.safeContents.push(u)}}s(nsr,"_decodeAuthenticatedSafe");function isr(t,e){var r={},n=[];if(!Se.validate(t,Fs.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Se.derToOid(r.contentType);if(o!==Gi.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Se.derToOid(r.encAlgorithm);var a=Gi.pbe.getCipher(o,r.encParameter,e),c=Nxe(r.encryptedContentAsn1),l=Fs.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(isr,"_decryptSafeContents");function osr(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Se.validate(o,esr,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Se.derToOid(a.bagId),attributes:ssr(a.bagAttributes)};n.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case Gi.oids.pkcs8ShroudedKeyBag:if(m=Gi.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Gi.oids.keyBag:try{u.key=Gi.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Gi.oids.certBag:d=rsr,p=s(function(){if(Se.derToOid(a.certId)!==Gi.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Se.derToOid(a.certId),g}var A=Se.fromDer(a.cert,e);try{u.cert=Gi.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(d!==void 0&&!Se.validate(m,d,a,c)){var l=new Error("Cannot read PKCS#12 "+d.name);throw l.errors=c,l}p()}return n}s(osr,"_decodeSafeContents");function ssr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Se.validate(t[r],tsr,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Se.derToOid(n.oid);if(Gi.oids[a]!==void 0){e[Gi.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Gi.oids[a]].push(n.values[c].value)}}return e}s(ssr,"_decodeBagAttributes");w7.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Fs.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=Fs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Gi.certificateFromPem(a));var c=Fs.md.sha1.create();c.update(Se.toDer(Gi.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=Fs.random.getBytes(20);var l=[];i!==null&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,l));var u=[],d=[];e!==null&&(Fs.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=Gi.certificateFromPem(e));var h=m===0?o:void 0,g=Gi.certificateToAsn1(e),A=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(g).getBytes())])])]),h]);p.push(A)}if(p.length>0){var y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,p),E=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(y).getBytes())])]);u.push(E)}var b=null;if(t!==null){var w=Gi.wrapRsaPrivateKey(Gi.privateKeyToAsn1(t));r===null?b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[w]),o]):b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Gi.encryptPrivateKeyInfo(w,r,n)]),o]);var R=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[b]),D=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(R).getBytes())])]);u.push(D)}var N=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,u),O;if(n.useMac){var c=Fs.md.sha1.create(),Y=new Fs.util.ByteBuffer(Fs.random.getBytes(n.saltSize)),ee=n.count,t=w7.generateKey(r,Y,3,ee,20),V=Fs.hmac.create();V.start(c,t),V.update(Se.toDer(N).getBytes());var H=V.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,H.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Y.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(ee).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(N).getBytes())])]),O])};w7.generateKey=Fs.pbe.generatePkcs12Key});var Fxe=q((Ddi,Tit)=>{f();var $T=Ii();CA();UT();kxe();MR();Oee();Lxe();jee();I7();Fo();zee();var Mxe=$T.asn1,WB=Tit.exports=$T.pki=$T.pki||{};WB.pemToDer=function(t){var e=$T.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return $T.util.createBuffer(e.body)};WB.privateKeyFromPem=function(t){var e=$T.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Mxe.fromDer(e.body);return WB.privateKeyFromAsn1(n)};WB.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Mxe.toDer(WB.privateKeyToAsn1(t)).getBytes()};return $T.pem.encode(r,{maxline:e})};WB.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Mxe.toDer(t).getBytes()};return $T.pem.encode(r,{maxline:e})}});var Wxe=q((Ndi,Bit)=>{f();var kt=Ii();CA();LB();Nee();MR();Fxe();Ch();QB();Fo();var Xee=s(function(t,e,r,n){var i=kt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=kt.util.createBuffer(),d=kt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);d.start("MD5",c);var h=kt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",l);var A=kt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),A.putBuffer(d.digest());return i.putBytes(kt.util.xorBytes(h.getBytes(),A.getBytes(),n)),i},"prf_TLS1"),asr=s(function(t,e,r){var n=kt.hmac.create();n.start("SHA1",t);var i=kt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),csr=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),lsr=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),Lp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return kt.util.createBuffer(t.getBytes(r))},"readVector"),bh=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),oe={};oe.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};oe.SupportedVersions=[oe.Versions.TLS_1_1,oe.Versions.TLS_1_0];oe.Version=oe.SupportedVersions[0];oe.MaxFragment=15360;oe.ConnectionEnd={server:0,client:1};oe.PRFAlgorithm={tls_prf_sha256:0};oe.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};oe.CipherType={stream:0,block:1,aead:2};oe.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};oe.CompressionMethod={none:0,deflate:1};oe.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};oe.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};oe.Alert={};oe.Alert.Level={warning:1,fatal:2};oe.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};oe.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};oe.CipherSuites={};oe.getCipherSuite=function(t){var e=null;for(var r in oe.CipherSuites){var n=oe.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};oe.handleUnexpected=function(t,e){var r=!t.open&&t.entity===oe.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})};oe.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(oe.queue(t,oe.createAlert(t,{level:oe.Alert.Level.warning,description:oe.Alert.Description.no_renegotiation})),oe.flush(t)),t.process()};oe.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===oe.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:kt.util.createBuffer(o.getBytes(32)),session_id:Lp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=Lp(o,2),n.compression_methods=Lp(o,1)),a=r-(a-o.length()),a>0){for(var c=Lp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:Lp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var d=Lp(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(Lp(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=oe.getCipherSuite(n.cipher_suite);else for(var m=kt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=oe.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure},cipherSuite:kt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=oe.CompressionMethod.none}return n};oe.createSecurityParameters=function(t,e){var r=t.entity===oe.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:oe.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:oe.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};oe.handleServerHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=_it,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=dsr,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.session.id=i,t.process()}};oe.handleClientHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=kt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<oe.SupportedVersions.length&&(a=oe.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=qxe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?ysr:Uxe,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.open=!0,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHello(t)})),t.session.resuming?(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.pending=oe.createConnectionState(t),t.state.current.write=t.state.pending.write,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))):(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)})),t.fail||(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerKeyExchange(t)})),t.verifyClient!==!1&&oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificateRequest(t)})),oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHelloDone(t)})))),oe.flush(t),t.process()}};oe.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Lp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=Lp(i.certificate_list,3),a=kt.asn1.fromDer(o),o=kt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var l=t.entity===oe.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?wit:Uxe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],oe.verifyCertificateChain(t,c)&&(t.expect=l?wit:Uxe)),t.process()};oe.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});t.expect=fsr,t.process()};oe.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Lp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=kt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=kt.random.getBytes(48)}t.expect=qxe,t.session.clientCertificate!==null&&(t.expect=Csr),t.process()};oe.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Lp(n,1),certificate_authorities:Lp(n,2)};t.session.certificateRequest=i,t.expect=psr,t.process()};oe.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:Lp(n,2).getBytes()},a=kt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure}})}t.expect=qxe,t.process()};oe.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!kt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)}),oe.queue(t,e)),e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createClientKeyExchange(t)}),oe.queue(t,e),t.expect=gsr;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createCertificateVerify(c,l)})),oe.queue(c,oe.createRecord(c,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),c.state.pending=oe.createConnectionState(c),c.state.current.write=c.state.pending.write,oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createFinished(c)})),c.expect=_it,oe.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);oe.getClientSignature(t,a)};oe.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var r=t.entity===oe.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=oe.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?msr:vsr,t.process()};oe.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=kt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===oe.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,d=Xee;if(n=d(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))),t.expect=a?hsr:Esr,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,oe.flush(t),t.isConnected=!0,t.connected(t),t.process()};oe.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case oe.Alert.Description.close_notify:i="Connection closed.";break;case oe.Alert.Description.unexpected_message:i="Unexpected message.";break;case oe.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case oe.Alert.Description.decryption_failed:i="Decryption failed.";break;case oe.Alert.Description.record_overflow:i="Record overflow.";break;case oe.Alert.Description.decompression_failure:i="Decompression failed.";break;case oe.Alert.Description.handshake_failure:i="Handshake failure.";break;case oe.Alert.Description.bad_certificate:i="Bad certificate.";break;case oe.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case oe.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case oe.Alert.Description.certificate_expired:i="Certificate expired.";break;case oe.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case oe.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case oe.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case oe.Alert.Description.access_denied:i="Access denied.";break;case oe.Alert.Description.decode_error:i="Decode error.";break;case oe.Alert.Description.decrypt_error:i="Decrypt error.";break;case oe.Alert.Description.export_restriction:i="Export restriction.";break;case oe.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case oe.Alert.Description.insufficient_security:i="Insufficient security.";break;case oe.Alert.Description.internal_error:i="Internal error.";break;case oe.Alert.Description.user_canceled:i="User canceled.";break;case oe.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===oe.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===oe.ConnectionEnd.client?"server":"client",alert:n}),t.process()};oe.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=kt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in Jee[t.entity][t.expect]?(t.entity===oe.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:kt.md.md5.create(),sha1:kt.md.sha1.create()}),n!==oe.HandshakeType.hello_request&&n!==oe.HandshakeType.certificate_verify&&n!==oe.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),Jee[t.entity][t.expect][n](t,e,i)):oe.handleUnexpected(t,e)};oe.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};oe.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===oe.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();oe.queue(t,oe.createRecord(t,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_response,o)})),oe.flush(t)}else if(n===oe.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,kt.util.createBuffer(o))}t.process()};var usr=0,dsr=1,wit=2,fsr=3,psr=4,_it=5,msr=6,hsr=7,gsr=8,Asr=0,ysr=1,Uxe=2,Csr=3,qxe=4,vsr=5,Esr=6,ne=oe.handleUnexpected,Rit=oe.handleChangeCipherSpec,Uu=oe.handleAlert,Af=oe.handleHandshake,kit=oe.handleApplicationData,qu=oe.handleHeartbeat,Hxe=[];Hxe[oe.ConnectionEnd.client]=[[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[Rit,Uu,ne,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,kit,qu],[ne,Uu,Af,ne,qu]];Hxe[oe.ConnectionEnd.server]=[[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,ne,qu],[Rit,Uu,ne,ne,qu],[ne,Uu,Af,ne,qu],[ne,Uu,Af,kit,qu],[ne,Uu,Af,ne,qu]];var jT=oe.handleHelloRequest,xsr=oe.handleServerHello,Pit=oe.handleCertificate,Sit=oe.handleServerKeyExchange,Oxe=oe.handleCertificateRequest,Yee=oe.handleServerHelloDone,Dit=oe.handleFinished,Jee=[];Jee[oe.ConnectionEnd.client]=[[ne,ne,xsr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Pit,Sit,Oxe,Yee,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Sit,Oxe,Yee,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Oxe,Yee,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Yee,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Dit],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[jT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];var bsr=oe.handleClientHello,Isr=oe.handleClientKeyExchange,Tsr=oe.handleCertificateVerify;Jee[oe.ConnectionEnd.server]=[[ne,bsr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Pit,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Isr,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Tsr,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Dit],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];oe.generateKeys=function(t,e){var r=Xee,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===oe.Versions.TLS_1_0.major&&t.version.minor===oe.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};oe.createConnectionState=function(t){var e=t.entity===oe.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=oe.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case oe.CompressionMethod.none:break;case oe.CompressionMethod.deflate:n.read.compressFunction=lsr,n.write.compressFunction=csr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};oe.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=kt.util.createBuffer();return r.putInt32(e),r.putBytes(kt.random.getBytes(28)),r};oe.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};oe.createAlert=function(t,e){var r=kt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),oe.createRecord(t,{type:oe.ContentType.alert,data:r})};oe.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=kt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=kt.util.createBuffer();o.putByte(oe.CompressionMethod.none);var a=o.length(),c=kt.util.createBuffer();if(t.virtualHost){var l=kt.util.createBuffer();l.putByte(0),l.putByte(0);var u=kt.util.createBuffer();u.putByte(0),bh(u,2,kt.util.createBuffer(t.virtualHost));var d=kt.util.createBuffer();bh(d,2,u),bh(l,2,d),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=kt.util.createBuffer();return g.putByte(oe.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),bh(g,1,kt.util.createBuffer(m)),bh(g,2,e),bh(g,1,o),p>0&&bh(g,2,c),g};oe.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),bh(n,1,kt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};oe.createCertificate=function(t){var e=t.entity===oe.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=kt.util.createBuffer();if(r!==null)try{kt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=kt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=kt.util.createBuffer(c.body);o===null&&(o=kt.asn1.fromDer(u.bytes(),!1));var d=kt.util.createBuffer();bh(d,3,u),i.putBuffer(d)}r=kt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var p=3+i.length(),m=kt.util.createBuffer();return m.putByte(oe.HandshakeType.certificate),m.putInt24(p),bh(m,3,i),m};oe.createClientKeyExchange=function(t){var e=kt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(kt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=kt.util.createBuffer();return o.putByte(oe.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};oe.createServerKeyExchange=function(t){var e=0,r=kt.util.createBuffer();return e>0&&(r.putByte(oe.HandshakeType.server_key_exchange),r.putInt24(e)),r};oe.getClientSignature=function(t,e){var r=kt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=kt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};oe.createCertificateVerify=function(t,e){var r=e.length+2,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};oe.createCertificateRequest=function(t){var e=kt.util.createBuffer();e.putByte(1);var r=kt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=kt.pki.distinguishedNameToAsn1(i.subject),a=kt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=kt.util.createBuffer();return l.putByte(oe.HandshakeType.certificate_request),l.putInt24(c),bh(l,1,e),bh(l,2,r),l};oe.createServerHelloDone=function(t){var e=kt.util.createBuffer();return e.putByte(oe.HandshakeType.server_hello_done),e.putInt24(0),e};oe.createChangeCipherSpec=function(){var t=kt.util.createBuffer();return t.putByte(1),t};oe.createFinished=function(t){var e=kt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===oe.ConnectionEnd.client,n=t.session.sp,i=12,o=Xee,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=kt.util.createBuffer();return c.putByte(oe.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};oe.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=kt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(kt.random.getBytes(o)),n};oe.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===oe.ContentType.handshake||e.type===oe.ContentType.alert||e.type===oe.ContentType.change_cipher_spec))){if(e.type===oe.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=oe.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>oe.MaxFragment;)n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i.slice(0,oe.MaxFragment))})),i=i.slice(oe.MaxFragment);i.length>0&&n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};oe.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Qxe=s(function(t){switch(t){case!0:return!0;case kt.pki.certificateError.bad_certificate:return oe.Alert.Description.bad_certificate;case kt.pki.certificateError.unsupported_certificate:return oe.Alert.Description.unsupported_certificate;case kt.pki.certificateError.certificate_revoked:return oe.Alert.Description.certificate_revoked;case kt.pki.certificateError.certificate_expired:return oe.Alert.Description.certificate_expired;case kt.pki.certificateError.certificate_unknown:return oe.Alert.Description.certificate_unknown;case kt.pki.certificateError.unknown_ca:return oe.Alert.Description.unknown_ca;default:return oe.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),wsr=s(function(t){switch(t){case!0:return!0;case oe.Alert.Description.bad_certificate:return kt.pki.certificateError.bad_certificate;case oe.Alert.Description.unsupported_certificate:return kt.pki.certificateError.unsupported_certificate;case oe.Alert.Description.certificate_revoked:return kt.pki.certificateError.certificate_revoked;case oe.Alert.Description.certificate_expired:return kt.pki.certificateError.certificate_expired;case oe.Alert.Description.certificate_unknown:return kt.pki.certificateError.certificate_unknown;case oe.Alert.Description.unknown_ca:return kt.pki.certificateError.unknown_ca;default:return kt.pki.certificateError.bad_certificate}},"_alertDescToCertError");oe.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=Qxe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!kt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=wsr(u))}return u},kt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||kt.util.isArray(i))&&(i={send:!0,alert:{level:oe.Alert.Level.fatal,description:Qxe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:oe.Alert.Level.fatal,description:Qxe(i.error)}),t.error(t,i)}return!t.fail};oe.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=kt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=kt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};oe.createConnection=function(t){var e=null;t.caStore?kt.util.isArray(t.caStore)?e=kt.pki.createCaStore(t.caStore):e=t.caStore:e=kt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in oe.CipherSuites)r.push(oe.CipherSuites[n])}var i=t.server?oe.ConnectionEnd.server:oe.ConnectionEnd.client,o=t.sessionCache?oe.createSessionCache(t.sessionCache):null,a={version:{major:oe.Version.major,minor:oe.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:kt.util.createBuffer(),tlsData:kt.util.createBuffer(),data:kt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===oe.ConnectionEnd.client?"client":"server"),p.send&&(oe.queue(d,oe.createAlert(d,p.alert)),oe.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:oe.Version.major,minor:oe.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===oe.ConnectionEnd.client?usr:Asr,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=oe.createConnectionState(a)},a.reset();var c=s(function(d,p){var m=p.type-oe.ContentType.change_cipher_spec,h=Hxe[d.entity][d.expect];m in h?h[m](d,p):oe.handleUnexpected(d,p)},"_update"),l=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:kt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==oe.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:kt.md.md5.create(),sha1:kt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=oe.createRandom().getBytes(),a.open=!0,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.handshake,data:oe.createClientHello(a)})),oe.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(d){return oe.queue(a,oe.createRecord(a,{type:oe.ContentType.application_data,data:kt.util.createBuffer(d)})),oe.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof kt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_request,d,p)})),oe.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,oe.queue(a,oe.createAlert(a,{level:oe.Alert.Level.warning,description:oe.Alert.Description.close_notify})),oe.flush(a)),a.closed(a)),a.reset(d)},a};Bit.exports=kt.tls=kt.tls||{};for(Kee in oe)typeof oe[Kee]!="function"&&(kt.tls[Kee]=oe[Kee]);var Kee;kt.tls.prf_tls1=Xee;kt.tls.hmac_sha1=asr;kt.tls.createSessionCache=oe.createSessionCache;kt.tls.createConnection=oe.createConnection});var Mit=q((Fdi,Lit)=>{f();var GT=Ii();QT();Wxe();var Ih=Lit.exports=GT.tls;Ih.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Ih.BulkCipherAlgorithm.aes,t.cipher_type=Ih.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Ih.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Nit};Ih.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Ih.BulkCipherAlgorithm.aes,t.cipher_type=Ih.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Ih.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Nit};function Nit(t,e,r){var n=e.entity===GT.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:GT.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:GT.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=ksr,t.write.cipherFunction=Ssr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Ih.hmac_sha1}s(Nit,"initConnectionState");function Ssr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Ih.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=GT.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Ih.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(_sr)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(Ssr,"encrypt_aes_cbc_sha1");function _sr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(_sr,"encrypt_aes_cbc_sha1_padding");function Rsr(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Rsr,"decrypt_aes_cbc_sha1_padding");function ksr(t,e){var r=!1,n;t.version.minor===Ih.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Rsr);var o=e.macLength,a=GT.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=GT.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Psr(e.macKey,a,l)&&r,r}s(ksr,"decrypt_aes_cbc_sha1");function Psr(t,e,r){var n=GT.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(Psr,"compareMacs")});var Gxe=q((Udi,Uit)=>{f();var oa=Ii();DC();Fo();var S7=Uit.exports=oa.sha512=oa.sha512||{};oa.md.sha512=oa.md.algorithms.sha512=S7;var Oit=oa.sha384=oa.sha512.sha384=oa.sha512.sha384||{};Oit.create=function(){return S7.create("SHA-384")};oa.md.sha384=oa.md.algorithms.sha384=Oit;oa.sha512.sha256=oa.sha512.sha256||{create:s(function(){return S7.create("SHA-512/256")},"create")};oa.md["sha512/256"]=oa.md.algorithms["sha512/256"]=oa.sha512.sha256;oa.sha512.sha224=oa.sha512.sha224||{create:s(function(){return S7.create("SHA-512/224")},"create")};oa.md["sha512/224"]=oa.md.algorithms["sha512/224"]=oa.sha512.sha224;S7.create=function(t){if(Qit||Dsr(),typeof t>"u"&&(t="SHA-512"),!(t in HR))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=HR[t],r=null,n=oa.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=oa.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=oa.util.encodeUtf8(l));var d=l.length;c.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=d[1],d[1]=d[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(l),Fit(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=oa.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,d=u&c.blockLength-1;l.putBytes($xe.substr(0,c.blockLength-d));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);Fit(A,i,l);var y=oa.util.createBuffer(),E;t==="SHA-512"?E=A.length:t==="SHA-384"?E=A.length-2:E=A.length-4;for(var g=0;g<E;++g)y.putInt32(A[g][0]),(g!==E-1||t!=="SHA-512/224")&&y.putInt32(A[g][1]);return y},c};var $xe=null,Qit=!1,jxe=null,HR=null;function Dsr(){$xe="\x80",$xe+=oa.util.fillString("\0",128),jxe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],HR={},HR["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],HR["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],HR["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],HR["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Qit=!0}s(Dsr,"_init");function Fit(t,e,r){for(var n,i,o,a,c,l,u,d,p,m,h,g,A,y,E,b,w,R,D,N,O,Y,ee,V,H,U,X,K,j,W,J,ie,ae,te,pe,Ae=r.length();Ae>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ie=e[j-2],W=ie[0],J=ie[1],n=((W>>>19|J<<13)^(J>>>29|W<<3)^W>>>6)>>>0,i=((W<<13|J>>>19)^(J<<3|W>>>29)^(W<<26|J>>>6))>>>0,te=e[j-15],W=te[0],J=te[1],o=((W>>>1|J<<31)^(W>>>8|J<<24)^W>>>7)>>>0,a=((W<<31|J>>>1)^(W<<24|J>>>8)^(W<<25|J>>>7))>>>0,ae=e[j-7],pe=e[j-16],J=i+ae[1]+a+pe[1],e[j][0]=n+ae[0]+o+pe[0]+(J/4294967296>>>0)>>>0,e[j][1]=J>>>0;for(A=t[0][0],y=t[0][1],E=t[1][0],b=t[1][1],w=t[2][0],R=t[2][1],D=t[3][0],N=t[3][1],O=t[4][0],Y=t[4][1],ee=t[5][0],V=t[5][1],H=t[6][0],U=t[6][1],X=t[7][0],K=t[7][1],j=0;j<80;++j)u=((O>>>14|Y<<18)^(O>>>18|Y<<14)^(Y>>>9|O<<23))>>>0,d=((O<<18|Y>>>14)^(O<<14|Y>>>18)^(Y<<23|O>>>9))>>>0,p=(H^O&(ee^H))>>>0,m=(U^Y&(V^U))>>>0,c=((A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25))>>>0,l=((A<<4|y>>>28)^(y<<30|A>>>2)^(y<<25|A>>>7))>>>0,h=(A&E|w&(A^E))>>>0,g=(y&b|R&(y^b))>>>0,J=K+d+m+jxe[j][1]+e[j][1],n=X+u+p+jxe[j][0]+e[j][0]+(J/4294967296>>>0)>>>0,i=J>>>0,J=l+g,o=c+h+(J/4294967296>>>0)>>>0,a=J>>>0,X=H,K=U,H=ee,U=V,ee=O,V=Y,J=N+i,O=D+n+(J/4294967296>>>0)>>>0,Y=J>>>0,D=w,N=R,w=E,R=b,E=A,b=y,J=i+a,A=n+o+(J/4294967296>>>0)>>>0,y=J>>>0;J=t[0][1]+y,t[0][0]=t[0][0]+A+(J/4294967296>>>0)>>>0,t[0][1]=J>>>0,J=t[1][1]+b,t[1][0]=t[1][0]+E+(J/4294967296>>>0)>>>0,t[1][1]=J>>>0,J=t[2][1]+R,t[2][0]=t[2][0]+w+(J/4294967296>>>0)>>>0,t[2][1]=J>>>0,J=t[3][1]+N,t[3][0]=t[3][0]+D+(J/4294967296>>>0)>>>0,t[3][1]=J>>>0,J=t[4][1]+Y,t[4][0]=t[4][0]+O+(J/4294967296>>>0)>>>0,t[4][1]=J>>>0,J=t[5][1]+V,t[5][0]=t[5][0]+ee+(J/4294967296>>>0)>>>0,t[5][1]=J>>>0,J=t[6][1]+U,t[6][0]=t[6][0]+H+(J/4294967296>>>0)>>>0,t[6][1]=J>>>0,J=t[7][1]+K,t[7][0]=t[7][0]+X+(J/4294967296>>>0)>>>0,t[7][1]=J>>>0,Ae-=128}}s(Fit,"_update")});var qit=q(Vxe=>{f();var Bsr=Ii();CA();var ou=Bsr.asn1;Vxe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:ou.Class.UNIVERSAL,type:ou.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ou.Class.UNIVERSAL,type:ou.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ou.Class.UNIVERSAL,type:ou.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ou.Class.UNIVERSAL,type:ou.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ou.Class.UNIVERSAL,type:ou.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Vxe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ou.Class.UNIVERSAL,type:ou.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ou.Class.UNIVERSAL,type:ou.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ou.Class.UNIVERSAL,type:ou.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:ou.Class.UNIVERSAL,type:ou.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var eot=q((jdi,Zit)=>{f();var Hu=Ii();b7();Ch();Gxe();Fo();var Vit=qit(),Nsr=Vit.publicKeyValidator,Lsr=Vit.privateKeyValidator;typeof Hit>"u"&&(Hit=Hu.jsbn.BigInteger);var Hit,Kxe=Hu.util.ByteBuffer,C0=typeof Buffer>"u"?Uint8Array:Buffer;Hu.pki=Hu.pki||{};Zit.exports=Hu.pki.ed25519=Hu.ed25519=Hu.ed25519||{};var Vi=Hu.ed25519;Vi.constants={};Vi.constants.PUBLIC_KEY_BYTE_LENGTH=32;Vi.constants.PRIVATE_KEY_BYTE_LENGTH=64;Vi.constants.SEED_BYTE_LENGTH=32;Vi.constants.SIGN_BYTE_LENGTH=64;Vi.constants.HASH_BYTE_LENGTH=64;Vi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Hu.random.getBytesSync(Vi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Vi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Vi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=IE({message:e,encoding:"binary"});for(var r=new C0(Vi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new C0(Vi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Qsr(r,n),{publicKey:r,privateKey:n}};Vi.privateKeyFromAsn1=function(t){var e={},r=[],n=Hu.asn1.validate(t,Lsr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Hu.asn1.derToOid(e.privateKeyOid),a=Hu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=IE({message:Hu.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};Vi.publicKeyFromAsn1=function(t){var e={},r=[],n=Hu.asn1.validate(t,Nsr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Hu.asn1.derToOid(e.publicKeyOid),a=Hu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==Vi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return IE({message:c,encoding:"binary"})};Vi.publicKeyFromPrivateKey=function(t){t=t||{};var e=IE({message:t.privateKey,encoding:"binary"});if(e.length!==Vi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Vi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new C0(Vi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Vi.sign=function(t){t=t||{};var e=IE(t),r=IE({message:t.privateKey,encoding:"binary"});if(r.length===Vi.constants.SEED_BYTE_LENGTH){var n=Vi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Vi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Vi.constants.SEED_BYTE_LENGTH+" or "+Vi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new C0(Vi.constants.SIGN_BYTE_LENGTH+e.length);Usr(i,e,e.length,r);for(var o=new C0(Vi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Vi.verify=function(t){t=t||{};var e=IE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=IE({message:t.signature,encoding:"binary"});if(r.length!==Vi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Vi.constants.SIGN_BYTE_LENGTH);var n=IE({message:t.publicKey,encoding:"binary"});if(n.length!==Vi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Vi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new C0(Vi.constants.SIGN_BYTE_LENGTH+e.length),o=new C0(Vi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Vi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Vi.constants.SIGN_BYTE_LENGTH]=e[a];return qsr(o,i,i.length,n)>=0};function IE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof C0)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new Kxe(e,r)}else if(!(e instanceof Kxe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new C0(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(IE,"messageToNativeBuffer");var Jxe=Pn(),Zee=Pn([1]),Msr=Pn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Fsr=Pn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Wit=Pn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$it=Pn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),zxe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Osr=Pn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _7(t,e){var r=Hu.md.sha512.create(),n=new Kxe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new C0(Vi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(_7,"sha512");function Qsr(t,e){var r=[Pn(),Pn(),Pn(),Pn()],n,i=_7(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,tbe(r,i),ebe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(Qsr,"crypto_sign_keypair");function Usr(t,e,r,n){var i,o,a=new Float64Array(64),c=[Pn(),Pn(),Pn(),Pn()],l=_7(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var d=_7(t.subarray(32),r+32);for(Xxe(d),tbe(c,d),ebe(t,c),i=32;i<64;++i)t[i]=n[i];var p=_7(t,r+64);for(Xxe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return zit(t.subarray(32),a),u}s(Usr,"crypto_sign");function qsr(t,e,r,n){var i,o,a=new C0(32),c=[Pn(),Pn(),Pn(),Pn()],l=[Pn(),Pn(),Pn(),Pn()];if(o=-1,r<64||Hsr(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=_7(t,r);if(Xxe(u),Jit(c,l,u),tbe(l,e.subarray(32)),Zxe(c,l),ebe(a,c),r-=64,Yit(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(qsr,"crypto_sign_open");function zit(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*zxe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*zxe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*zxe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(zit,"modL");function Xxe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;zit(t,e)}s(Xxe,"reduce");function Zxe(t,e){var r=Pn(),n=Pn(),i=Pn(),o=Pn(),a=Pn(),c=Pn(),l=Pn(),u=Pn(),d=Pn();jB(r,t[1],t[0]),jB(d,e[1],e[0]),bs(r,r,d),$B(n,t[0],t[1]),$B(d,e[0],e[1]),bs(n,n,d),bs(i,t[3],e[3]),bs(i,i,Fsr),bs(o,t[2],e[2]),$B(o,o,o),jB(a,n,r),jB(c,o,i),$B(l,o,i),$B(u,n,r),bs(t[0],a,c),bs(t[1],u,l),bs(t[2],l,c),bs(t[3],a,u)}s(Zxe,"add");function jit(t,e,r){for(var n=0;n<4;++n)Xit(t[n],e[n],r)}s(jit,"cswap");function ebe(t,e){var r=Pn(),n=Pn(),i=Pn();Gsr(i,e[2]),bs(r,e[0],i),bs(n,e[1],i),ete(t,n),t[31]^=Kit(r)<<7}s(ebe,"pack");function ete(t,e){var r,n,i,o=Pn(),a=Pn();for(r=0;r<16;++r)a[r]=e[r];for(Yxe(a),Yxe(a),Yxe(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Xit(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(ete,"pack25519");function Hsr(t,e){var r=Pn(),n=Pn(),i=Pn(),o=Pn(),a=Pn(),c=Pn(),l=Pn();return VT(t[2],Zee),Wsr(t[1],e),WR(i,t[1]),bs(o,i,Msr),jB(i,i,t[2]),$B(o,t[2],o),WR(a,o),WR(c,a),bs(l,c,a),bs(r,l,i),bs(r,r,o),$sr(r,r),bs(r,r,i),bs(r,r,o),bs(r,r,o),bs(t[0],r,o),WR(n,t[0]),bs(n,n,o),Git(n,i)&&bs(t[0],t[0],Osr),WR(n,t[0]),bs(n,n,o),Git(n,i)?-1:(Kit(t[0])===e[31]>>7&&jB(t[0],Jxe,t[0]),bs(t[3],t[0],t[1]),0)}s(Hsr,"unpackneg");function Wsr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(Wsr,"unpack25519");function $sr(t,e){var r=Pn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)WR(r,r),n!==1&&bs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s($sr,"pow2523");function Git(t,e){var r=new C0(32),n=new C0(32);return ete(r,t),ete(n,e),Yit(r,0,n,0)}s(Git,"neq25519");function Yit(t,e,r,n){return jsr(t,e,r,n,32)}s(Yit,"crypto_verify_32");function jsr(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(jsr,"vn");function Kit(t){var e=new C0(32);return ete(e,t),e[0]&1}s(Kit,"par25519");function Jit(t,e,r){var n,i;for(VT(t[0],Jxe),VT(t[1],Zee),VT(t[2],Zee),VT(t[3],Jxe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,jit(t,e,n),Zxe(e,t),Zxe(t,t),jit(t,e,n)}s(Jit,"scalarmult");function tbe(t,e){var r=[Pn(),Pn(),Pn(),Pn()];VT(r[0],Wit),VT(r[1],$it),VT(r[2],Zee),bs(r[3],Wit,$it),Jit(t,r,e)}s(tbe,"scalarbase");function VT(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(VT,"set25519");function Gsr(t,e){var r=Pn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)WR(r,r),n!==2&&n!==4&&bs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Gsr,"inv25519");function Yxe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Yxe,"car25519");function Xit(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Xit,"sel25519");function Pn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Pn,"gf");function $B(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s($B,"A");function jB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(jB,"Z");function WR(t,e){bs(t,e,e)}s(WR,"S");function bs(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=0,A=0,y=0,E=0,b=0,w=0,R=0,D=0,N=0,O=0,Y=0,ee=0,V=0,H=0,U=0,X=0,K=0,j=0,W=0,J=0,ie=0,ae=0,te=r[0],pe=r[1],Ae=r[2],Oe=r[3],Te=r[4],Je=r[5],Me=r[6],lt=r[7],_t=r[8],vt=r[9],ht=r[10],ue=r[11],Ue=r[12],ye=r[13],We=r[14],se=r[15];n=e[0],o+=n*te,a+=n*pe,c+=n*Ae,l+=n*Oe,u+=n*Te,d+=n*Je,p+=n*Me,m+=n*lt,h+=n*_t,g+=n*vt,A+=n*ht,y+=n*ue,E+=n*Ue,b+=n*ye,w+=n*We,R+=n*se,n=e[1],a+=n*te,c+=n*pe,l+=n*Ae,u+=n*Oe,d+=n*Te,p+=n*Je,m+=n*Me,h+=n*lt,g+=n*_t,A+=n*vt,y+=n*ht,E+=n*ue,b+=n*Ue,w+=n*ye,R+=n*We,D+=n*se,n=e[2],c+=n*te,l+=n*pe,u+=n*Ae,d+=n*Oe,p+=n*Te,m+=n*Je,h+=n*Me,g+=n*lt,A+=n*_t,y+=n*vt,E+=n*ht,b+=n*ue,w+=n*Ue,R+=n*ye,D+=n*We,N+=n*se,n=e[3],l+=n*te,u+=n*pe,d+=n*Ae,p+=n*Oe,m+=n*Te,h+=n*Je,g+=n*Me,A+=n*lt,y+=n*_t,E+=n*vt,b+=n*ht,w+=n*ue,R+=n*Ue,D+=n*ye,N+=n*We,O+=n*se,n=e[4],u+=n*te,d+=n*pe,p+=n*Ae,m+=n*Oe,h+=n*Te,g+=n*Je,A+=n*Me,y+=n*lt,E+=n*_t,b+=n*vt,w+=n*ht,R+=n*ue,D+=n*Ue,N+=n*ye,O+=n*We,Y+=n*se,n=e[5],d+=n*te,p+=n*pe,m+=n*Ae,h+=n*Oe,g+=n*Te,A+=n*Je,y+=n*Me,E+=n*lt,b+=n*_t,w+=n*vt,R+=n*ht,D+=n*ue,N+=n*Ue,O+=n*ye,Y+=n*We,ee+=n*se,n=e[6],p+=n*te,m+=n*pe,h+=n*Ae,g+=n*Oe,A+=n*Te,y+=n*Je,E+=n*Me,b+=n*lt,w+=n*_t,R+=n*vt,D+=n*ht,N+=n*ue,O+=n*Ue,Y+=n*ye,ee+=n*We,V+=n*se,n=e[7],m+=n*te,h+=n*pe,g+=n*Ae,A+=n*Oe,y+=n*Te,E+=n*Je,b+=n*Me,w+=n*lt,R+=n*_t,D+=n*vt,N+=n*ht,O+=n*ue,Y+=n*Ue,ee+=n*ye,V+=n*We,H+=n*se,n=e[8],h+=n*te,g+=n*pe,A+=n*Ae,y+=n*Oe,E+=n*Te,b+=n*Je,w+=n*Me,R+=n*lt,D+=n*_t,N+=n*vt,O+=n*ht,Y+=n*ue,ee+=n*Ue,V+=n*ye,H+=n*We,U+=n*se,n=e[9],g+=n*te,A+=n*pe,y+=n*Ae,E+=n*Oe,b+=n*Te,w+=n*Je,R+=n*Me,D+=n*lt,N+=n*_t,O+=n*vt,Y+=n*ht,ee+=n*ue,V+=n*Ue,H+=n*ye,U+=n*We,X+=n*se,n=e[10],A+=n*te,y+=n*pe,E+=n*Ae,b+=n*Oe,w+=n*Te,R+=n*Je,D+=n*Me,N+=n*lt,O+=n*_t,Y+=n*vt,ee+=n*ht,V+=n*ue,H+=n*Ue,U+=n*ye,X+=n*We,K+=n*se,n=e[11],y+=n*te,E+=n*pe,b+=n*Ae,w+=n*Oe,R+=n*Te,D+=n*Je,N+=n*Me,O+=n*lt,Y+=n*_t,ee+=n*vt,V+=n*ht,H+=n*ue,U+=n*Ue,X+=n*ye,K+=n*We,j+=n*se,n=e[12],E+=n*te,b+=n*pe,w+=n*Ae,R+=n*Oe,D+=n*Te,N+=n*Je,O+=n*Me,Y+=n*lt,ee+=n*_t,V+=n*vt,H+=n*ht,U+=n*ue,X+=n*Ue,K+=n*ye,j+=n*We,W+=n*se,n=e[13],b+=n*te,w+=n*pe,R+=n*Ae,D+=n*Oe,N+=n*Te,O+=n*Je,Y+=n*Me,ee+=n*lt,V+=n*_t,H+=n*vt,U+=n*ht,X+=n*ue,K+=n*Ue,j+=n*ye,W+=n*We,J+=n*se,n=e[14],w+=n*te,R+=n*pe,D+=n*Ae,N+=n*Oe,O+=n*Te,Y+=n*Je,ee+=n*Me,V+=n*lt,H+=n*_t,U+=n*vt,X+=n*ht,K+=n*ue,j+=n*Ue,W+=n*ye,J+=n*We,ie+=n*se,n=e[15],R+=n*te,D+=n*pe,N+=n*Ae,O+=n*Oe,Y+=n*Te,ee+=n*Je,V+=n*Me,H+=n*lt,U+=n*_t,X+=n*vt,K+=n*ht,j+=n*ue,W+=n*Ue,J+=n*ye,ie+=n*We,ae+=n*se,o+=38*D,a+=38*N,c+=38*O,l+=38*Y,u+=38*ee,d+=38*V,p+=38*H,m+=38*U,h+=38*X,g+=38*K,A+=38*j,y+=38*W,E+=38*J,b+=38*ie,w+=38*ae,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=A,t[11]=y,t[12]=E,t[13]=b,t[14]=w,t[15]=R}s(bs,"M")});var iot=q((zdi,not)=>{f();var Mp=Ii();Fo();Ch();b7();not.exports=Mp.kem=Mp.kem||{};var tot=Mp.jsbn.BigInteger;Mp.kem.rsa={};Mp.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Mp.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new tot(Mp.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(tot.ONE)<=0);c=Mp.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=Mp.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),d=t.generate(c,o);return{encapsulation:u,key:d}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};Mp.kem.kdf1=function(t,e){rot(this,t,0,e||t.digestLength)};Mp.kem.kdf2=function(t,e){rot(this,t,1,e||t.digestLength)};function rot(t,e,r,n){t.generate=function(i,o){for(var a=new Mp.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new Mp.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(rot,"_createKDF")});var cot=q((Jdi,aot)=>{f();var co=Ii();Fo();aot.exports=co.log=co.log||{};co.log.levels=["none","error","warning","info","debug","verbose","max"];var tte={},ibe=[],k7=null;co.log.LEVEL_LOCKED=2;co.log.NO_LEVEL_CHECK=4;co.log.INTERPOLATE=8;for(UC=0;UC<co.log.levels.length;++UC)rbe=co.log.levels[UC],tte[rbe]={index:UC,name:rbe.toUpperCase()};var rbe,UC;co.log.logMessage=function(t){for(var e=tte[t.level].index,r=0;r<ibe.length;++r){var n=ibe[r];if(n.flags&co.log.NO_LEVEL_CHECK)n.f(t);else{var i=tte[n.level].index;e<=i&&n.f(n,t)}}};co.log.prepareStandard=function(t){"standard"in t||(t.standard=tte[t.level].name+" ["+t.category+"] "+t.message)};co.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=co.util.format.apply(this,e)}};co.log.prepareStandardFull=function(t){"standardFull"in t||(co.log.prepareStandard(t),t.standardFull=t.standard)};for(nbe=["error","warning","info","debug","verbose"],UC=0;UC<nbe.length;++UC)(function(e){co.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};co.log.logMessage(o)}})(nbe[UC]);var nbe,UC;co.log.makeLogger=function(t){var e={flags:0,f:t};return co.log.setLevel(e,"none"),e};co.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&co.log.LEVEL_LOCKED))for(var n=0;n<co.log.levels.length;++n){var i=co.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};co.log.lock=function(t,e){typeof e>"u"||e?t.flags|=co.log.LEVEL_LOCKED:t.flags&=~co.log.LEVEL_LOCKED};co.log.addLogger=function(t){ibe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(oot={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},P7=s(function(t,e){co.log.prepareStandard(e);var r=oot[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),GB=co.log.makeLogger(P7)):(P7=s(function(e,r){co.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),GB=co.log.makeLogger(P7)),co.log.setLevel(GB,"debug"),co.log.addLogger(GB),k7=GB):console={log:s(function(){},"log")};var GB,oot,P7;k7!==null&&typeof window<"u"&&window.location&&(R7=new URL(window.location.href).searchParams,R7.has("console.level")&&co.log.setLevel(k7,R7.get("console.level").slice(-1)[0]),R7.has("console.lock")&&(sot=R7.get("console.lock").slice(-1)[0],sot=="true"&&co.log.lock(k7)));var R7,sot;co.log.consoleLogger=k7});var uot=q((efi,lot)=>{f();lot.exports=DC();Nee();QB();Axe();Gxe()});var pot=q((rfi,fot)=>{f();var sr=Ii();QT();CA();E7();UT();MR();Pxe();Ch();Fo();zee();var De=sr.asn1,yf=fot.exports=sr.pkcs7=sr.pkcs7||{};yf.messageFromPem=function(t){var e=sr.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=De.fromDer(e.body);return yf.messageFromAsn1(n)};yf.messageToPem=function(t,e){var r={type:"PKCS7",body:De.toDer(t.toAsn1()).getBytes()};return sr.pem.encode(r,{maxline:e})};yf.messageFromAsn1=function(t){var e={},r=[];if(!De.validate(t,yf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=De.derToOid(e.contentType),o;switch(i){case sr.pki.oids.envelopedData:o=yf.createEnvelopedData();break;case sr.pki.oids.encryptedData:o=yf.createEncryptedData();break;case sr.pki.oids.signedData:o=yf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};yf.createSignedData=function(){var t=null;return t={type:sr.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(sbe(t,n,yf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(sr.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(sr.pki.certificateToAsn1(t.certificates[i]));var o=[],a=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.signerInfos)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=sr.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=sr.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||sr.pki.oids.sha1;switch(l){case sr.pki.oids.sha1:case sr.pki.oids.sha256:case sr.pki.oids.sha384:case sr.pki.oids.sha512:case sr.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===sr.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===sr.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:sr.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(sr.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof sr.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=sr.util.encodeUtf8(t.content)),n.detached?t.detachedContent=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=sr.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=sr.md[sr.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=sr.md[sr.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(a).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=De.derToOid(t.contentInfo.value[0].value),a=De.toDer(i);a.getByte(),De.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==sr.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===sr.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===sr.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(obe(h)),d.authenticatedAttributesAsn1.value.push(obe(h))}a=De.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Xsr(t.signers)}s(r,"addSignerInfos")};yf.createEncryptedData=function(){var t=null;return t={type:sr.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:sr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){sbe(t,e,yf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),dot(t)},"decrypt")},t};yf.createEnvelopedData=function(){var t=null;return t={type:sr.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:sr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=sbe(t,e,yf.asn1.envelopedDataValidator);t.recipients=Ysr(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,Ksr(t.recipients)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,Zsr(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case sr.pki.oids.rsaEncryption:case sr.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=sr.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}dot(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:sr.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case sr.pki.oids["aes128-CBC"]:n=16,i=16,o=sr.aes.createEncryptionCipher;break;case sr.pki.oids["aes192-CBC"]:n=24,i=16,o=sr.aes.createEncryptionCipher;break;case sr.pki.oids["aes256-CBC"]:n=32,i=16,o=sr.aes.createEncryptionCipher;break;case sr.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=sr.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=sr.util.createBuffer(sr.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=sr.util.createBuffer(sr.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case sr.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Vsr(t){var e={},r=[];if(!De.validate(t,yf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:sr.pki.RDNAttributesAsArray(e.issuer),serialNumber:sr.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:De.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Vsr,"_recipientFromAsn1");function zsr(t){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[sr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,sr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.encryptedContent.algorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]),De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(zsr,"_recipientToAsn1");function Ysr(t){for(var e=[],r=0;r<t.length;++r)e.push(Vsr(t[r]));return e}s(Ysr,"_recipientsFromAsn1");function Ksr(t){for(var e=[],r=0;r<t.length;++r)e.push(zsr(t[r]));return e}s(Ksr,"_recipientsToAsn1");function Jsr(t){var e=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[sr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,sr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.digestAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.signatureAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=De.create(De.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(obe(i))}e.value.push(r)}return e}s(Jsr,"_signerToAsn1");function Xsr(t){for(var e=[],r=0;r<t.length;++r)e.push(Jsr(t[r]));return e}s(Xsr,"_signersToAsn1");function obe(t){var e;if(t.type===sr.pki.oids.contentType)e=De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.value).getBytes());else if(t.type===sr.pki.oids.messageDigest)e=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===sr.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=De.utcTimeToDate(i):i=De.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=De.create(De.Class.UNIVERSAL,De.Type.UTCTIME,!1,De.dateToUtcTime(i)):e=De.create(De.Class.UNIVERSAL,De.Type.GENERALIZEDTIME,!1,De.dateToGeneralizedTime(i))}return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[e])])}s(obe,"_attributeToAsn1");function Zsr(t){return[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(sr.pki.oids.data).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.algorithm).getBytes()),t.parameter?De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(Zsr,"_encryptedContentToAsn1");function sbe(t,e,r){var n={},i=[];if(!De.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=De.derToOid(n.contentType);if(a!==sr.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(sr.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:De.derToOid(n.encAlgorithm),parameter:sr.util.createBuffer(n.encParameter.value),content:sr.util.createBuffer(c)}}if(n.content){var c="";if(sr.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=sr.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(sbe,"_fromAsn1");function dot(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case sr.pki.oids["aes128-CBC"]:case sr.pki.oids["aes192-CBC"]:case sr.pki.oids["aes256-CBC"]:e=sr.aes.createDecryptionCipher(t.encryptedContent.key);break;case sr.pki.oids.desCBC:case sr.pki.oids["des-EDE3-CBC"]:e=sr.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(dot,"_decryptContent")});var hot=q((ofi,mot)=>{f();var rl=Ii();QT();LB();Nee();QB();Fo();var nte=mot.exports=rl.ssh=rl.ssh||{};nte.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=rl.util.createBuffer();VB(a,n),qC(a,t.e),qC(a,t.n);var c=rl.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=rl.util.createBuffer();qC(u,t.d),qC(u,t.p),qC(u,t.q),qC(u,t.qInv);var d;if(!e)d=rl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=rte(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=rl.util.createBuffer();h.putBuffer(rte("\0\0\0\0",e)),h.putBuffer(rte("\0\0\0",e));var g=rl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(rl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),d=rl.util.encode64(A.bytes(),64)}l=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=d;var y=rte("putty-private-key-file-mac-key",e),E=rl.util.createBuffer();VB(E,n),VB(E,i),VB(E,r),E.putInt32(a.length()),E.putBuffer(a),E.putInt32(u.length()),E.putBuffer(u);var b=rl.hmac.create();return b.start("sha1",y),b.update(E.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};nte.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=rl.util.createBuffer();return VB(n,r),qC(n,t.e),qC(n,t.n),r+" "+rl.util.encode64(n.bytes())+" "+e};nte.privateKeyToOpenSSH=function(t,e){return e?rl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):rl.pki.privateKeyToPem(t)};nte.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||rl.md.md5.create(),n="ssh-rsa",i=rl.util.createBuffer();VB(i,n),qC(i,t.e),qC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function qC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=rl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(qC,"_addBigIntegerToBuffer");function VB(t,e){t.putInt32(e.length),t.putString(e)}s(VB,"_addStringToBuffer");function rte(){for(var t=rl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(rte,"_sha1")});var Aot=q((cfi,got)=>{f();got.exports=Ii();QT();Mit();CA();See();E7();eot();LB();iot();cot();uot();Dxe();Oee();MR();wxe();Lxe();pot();Fxe();_xe();yxe();jee();Ch();Exe();hot();Wxe();Fo()});var vot=q($R=>{"use strict";f();Object.defineProperty($R,"__esModule",{value:!0});$R.convert=$R.Format=void 0;var D7=Aot(),zT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(zT=$R.Format||($R.Format={}));function yot(t){var e=D7.pki.pemToDer(t),r=D7.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(yot,"myASN");function ear(t){var e=yot(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(ear,"txtFormat");function Cot(t,e){switch(e){case zT.der:return D7.pki.pemToDer(t);case zT.pem:return t;case zT.txt:return ear(t);case zT.asn1:return yot(t);case zT.fingerprint:var r=D7.md.sha1.create(),n=Cot(t,zT.der);return r.update(n.getBytes()),r.digest().toHex();case zT.x509:return D7.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(Cot,"convert");$R.convert=Cot});var wot=q(v0=>{"use strict";f();var YT=v0&&v0.__assign||function(){return YT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},YT.apply(this,arguments)},ite=v0&&v0.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(v0,"__esModule",{value:!0});v0.convert=v0.Format=v0.addToGlobalAgent=v0.get=void 0;var abe=require("https"),tar=require("tls"),Eot=require("child_process"),xot=tnt(),TE=vot();Object.defineProperty(v0,"Format",{enumerable:!0,get:s(function(){return TE.Format},"get")});Object.defineProperty(v0,"convert",{enumerable:!0,get:s(function(){return TE.convert},"get")});var bot=process.platform==="darwin",Iot=abe.globalAgent,ste={keychain:"all",unique:!0,excludeBundled:!0,format:TE.Format.pem};function Tot(t){if(t===void 0&&(t=ste),!bot)return[];t=YT(YT({},ste),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,Eot.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=ite(ite([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,Eot.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=ite(ite([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,TE.convert)(u,TE.Format.fingerprint)}),l=t.excludeBundled?tar.rootCertificates.map(function(u){return(0,TE.convert)(u,TE.Format.fingerprint)}):[];n=n.filter(function(u,d){var p=c[d];return!(t.unique&&d!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,TE.convert)(u,t.format)})}s(Tot,"get");v0.get=Tot;var ote=Iot.options.ca,rar=s(function(t){if(t===void 0&&(t=ste),!!bot){var e;Array.isArray(ote)?e=Array.from(ote):e=typeof ote<"u"?[ote]:[],Tot(YT(YT(YT({},ste),t),{format:TE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),Iot.options.ca=e,abe.Agent=function(r){return function(n){var i=typeof n<"u"?YT({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(abe.Agent),(0,xot.setGlobalDispatcher)(new xot.Agent({connect:{ca:e}}))}},"addToGlobalAgent");v0.addToGlobalAgent=rar});var Sot=q((gfi,cbe)=>{f();function nar(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(nar,"all");process.platform!=="win32"?cbe.exports.all=()=>[]:cbe.exports.all=nar});var Lot=q((bfi,Not)=>{"use strict";f();function Bot(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(Bot,"validateParameter");function oar(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(oar,"hasOwnProperty");function sar(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];oar(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),Bot(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(sar,"defineOperation");Not.exports={defineOperation:sar,validateParameter:Bot}});var Abe=q((wfi,Oot)=>{"use strict";f();var KB=Rge()("kerberos"),YB=KB.KerberosClient,Mot=KB.KerberosServer,KT=Lot().defineOperation,aar=1,car=2,lar=4,uar=8,dar=16,far=32,par=64,mar=128,har=256,Fot=0,gar=9,Aar=6;YB.prototype.step=KT(YB.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);YB.prototype.wrap=KT(YB.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);YB.prototype.unwrap=KT(YB.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Mot.prototype.step=KT(Mot.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var yar=KT(KB.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),Car=KT(KB.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),Ear=KT(KB.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:Fot}},{name:"callback",type:"function",required:!1}]),xar=KT(KB.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Oot.exports={initializeClient:Ear,initializeServer:xar,principalDetails:Car,checkPassword:yar,GSS_C_DELEG_FLAG:aar,GSS_C_MUTUAL_FLAG:car,GSS_C_REPLAY_FLAG:lar,GSS_C_SEQUENCE_FLAG:uar,GSS_C_CONF_FLAG:dar,GSS_C_INTEG_FLAG:far,GSS_C_ANON_FLAG:par,GSS_C_PROT_READY_FLAG:mar,GSS_C_TRANS_FLAG:har,GSS_C_NO_OID:Fot,GSS_MECH_OID_KRB5:gar,GSS_MECH_OID_SPNEGO:Aar}});var Qot=q((_fi,bar)=>{bar.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var qot=q((Rfi,Uot)=>{"use strict";f();var Iar=require("dns"),Tar=Abe(),ybe=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=war(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();Iar.resolveCname(c,(u,d)=>{if(u)return l(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Tar.initializeClient(l,c,(u,d)=>{if(u)return n(u,null);i.client=d,n(null,d)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function war(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=Sar(t),r(null,i)})}}s(war,"firstTransition");function Sar(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=_ar(t),r(null,i||"")})}}s(Sar,"secondTransition");function _ar(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=Rar(t),r(null,a)})})}}s(_ar,"thirdTransition");function Rar(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(Rar,"fourthTransition");Uot.exports={MongoAuthProcess:ybe}});var Wot=q((Dfi,B7)=>{"use strict";f();var Hot=Abe();B7.exports=Hot;B7.exports.Kerberos=Hot;B7.exports.version=Qot().version;B7.exports.processes={MongoAuthProcess:qot().MongoAuthProcess}});var Mst=q(Ybe=>{"use strict";f();Object.defineProperty(Ybe,"__esModule",{value:!0});Ybe.assertNever=Wcr;function Wcr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Wcr,"assertNever")});var tQ=q(FE=>{"use strict";f();Object.defineProperty(FE,"__esModule",{value:!0});FE.ChatCompletionContentPartOpaque=FE.ChatCompletionContentPartKind=FE.ChatRole=void 0;var $cr=Mst(),tre;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(tre||(FE.ChatRole=tre={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,$cr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(tre||(FE.ChatRole=tre={}));var Fst;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Fst||(FE.ChatCompletionContentPartKind=Fst={}));var Ost;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(Ost||(FE.ChatCompletionContentPartOpaque=Ost={}))});var Kbe=q(JC=>{"use strict";f();Object.defineProperty(JC,"__esModule",{value:!0});JC.BaseTokensPerName=JC.BaseTokensPerMessage=JC.BaseTokensPerCompletion=JC.ChatRole=void 0;var Qst;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Qst||(JC.ChatRole=Qst={}));JC.BaseTokensPerCompletion=3;JC.BaseTokensPerMessage=3;JC.BaseTokensPerName=1});var qst=q(nre=>{"use strict";f();Object.defineProperty(nre,"__esModule",{value:!0});nre.toOpenAiChatMessage=Ust;nre.toOpenAIChatMessages=Vcr;var OE=tQ(),rre=Kbe(),jcr=ow();function Jbe(t){return t.filter(e=>e.type===OE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Jbe,"onlyStringContent");function Gcr(t){let e=t.map(r=>{if(r.type===OE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===OE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===OE.ChatCompletionContentPartKind.Opaque&&OE.ChatCompletionContentPartOpaque.usableIn(r,jcr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(Gcr,"stringAndImageContent");function Ust(t){switch(t.role){case OE.ChatRole.System:return{role:rre.ChatRole.System,content:Jbe(t.content),name:t.name};case OE.ChatRole.User:return{role:rre.ChatRole.User,content:Gcr(t.content),name:t.name};case OE.ChatRole.Assistant:return{role:rre.ChatRole.Assistant,content:Jbe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case OE.ChatRole.Tool:return{role:rre.ChatRole.Tool,content:Jbe(t.content),tool_call_id:t.toolCallId};default:return}}s(Ust,"toOpenAiChatMessage");function Vcr(t){return t.map(Ust).filter(e=>!!e)}s(Vcr,"toOpenAIChatMessages")});var Wst=q(sre=>{"use strict";f();Object.defineProperty(sre,"__esModule",{value:!0});sre.toVsCodeChatMessage=Hst;sre.toVsCodeChatMessages=zcr;var ore=tQ();function ire(t){return t.filter(e=>e.type===ore.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(ire,"onlyStringContent");var sw;function Hst(t){switch(sw??=require("vscode"),t.role){case ore.ChatRole.Assistant:let e=sw.LanguageModelChatMessage.Assistant(ire(t.content),t.name);return t.toolCalls&&(e.content=[new sw.LanguageModelTextPart(ire(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new sw.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case ore.ChatRole.User:return sw.LanguageModelChatMessage.User(ire(t.content),t.name);case ore.ChatRole.Tool:{let r=sw.LanguageModelChatMessage.User("");return r.content=[new sw.LanguageModelToolResultPart(t.toolCallId,[new sw.LanguageModelTextPart(ire(t.content))])],r}default:return}}s(Hst,"toVsCodeChatMessage");function zcr(t){return t.map(Hst).filter(e=>!!e)}s(zcr,"toVsCodeChatMessages")});var ow=q(IA=>{"use strict";f();Object.defineProperty(IA,"__esModule",{value:!0});IA.OutputMode=IA.Raw=IA.OpenAI=void 0;IA.toMode=Xbe;IA.toVSCode=Ycr;IA.toOpenAI=Kcr;var $st=qst(),jst=Wst();IA.OpenAI=Kbe();IA.Raw=tQ();var ZR;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(ZR||(IA.OutputMode=ZR={}));function Xbe(t,e){switch(t){case ZR.Raw:return e;case ZR.VSCode:return e instanceof Array?(0,jst.toVsCodeChatMessages)(e):(0,jst.toVsCodeChatMessage)(e);case ZR.OpenAI:return e instanceof Array?(0,$st.toOpenAIChatMessages)(e):(0,$st.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Xbe,"toMode");function Ycr(t){return Xbe(ZR.VSCode,t)}s(Ycr,"toVSCode");function Kcr(t){return Xbe(ZR.OpenAI,t)}s(Kcr,"toOpenAI")});var Zbe=q(rQ=>{"use strict";f();Object.defineProperty(rQ,"__esModule",{value:!0});rQ.jsonRetainedProps=void 0;rQ.forEachNode=Gst;rQ.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Gst(t,e){if(e(t),t.type===1)for(let r of t.children)Gst(r,e)}s(Gst,"forEachNode")});var Vst=q(eIe=>{"use strict";f();Object.defineProperty(eIe,"__esModule",{value:!0});eIe.once=Jcr;function Jcr(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(Jcr,"once")});var iIe=q(Pd=>{"use strict";f();Object.defineProperty(Pd,"__esModule",{value:!0});Pd.BudgetExceededError=Pd.MaterializedChatMessageImage=Pd.MaterializedChatMessageBreakpoint=Pd.MaterializedChatMessageOpaque=Pd.MaterializedChatMessage=Pd.MaterializedChatMessageTextChunk=Pd.GenericMaterializedContainer=void 0;var fN=Vst(),qp=ow(),QE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=cw(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return rat(e,this.children,r)}allMetadata(){return tat(this)}findById(e){return nIe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)Xcr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof wA&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof wA||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return rIe(this,e),e}};Pd.GenericMaterializedContainer=QE;var nQ=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,fN.once)(async e=>await e.tokenLength({type:qp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Pd.MaterializedChatMessageTextChunk=nQ;var wA=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=rat(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return rIe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return nIe(e,this)}_tokenCount=(0,fN.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,qp.toMode)(e.mode,r))});_upperBound=(0,fN.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,fN.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===qp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===qp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,qp.toMode)(e.mode,r))});_text=(0,fN.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of Zst(this)){if(r instanceof ek||r instanceof aw){e.push(r);continue}if(r instanceof TA){e.at(-1)instanceof TA?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:qp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof ek)return{type:qp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:nat(r.src),detail:r.detail}};if(r instanceof aw)return r.value;if(r instanceof TA)return r.part;throw new Error("Unexpected element type")});if(this.role===qp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===qp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===qp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===qp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Pd.MaterializedChatMessage=wA;var aw=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&qp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Pd.MaterializedChatMessageOpaque=aw;var TA=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Pd.MaterializedChatMessageBreakpoint=TA;var ek=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,fN.once)(async e=>e.tokenLength({type:qp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:nat(this.src),detail:this.detail}}));isEmpty=!1};Pd.MaterializedChatMessageImage=ek;function cw(t){return t instanceof QE||t instanceof wA}s(cw,"isContainerType");function Xst(t){return t instanceof nQ||t instanceof ek||t instanceof aw||t instanceof TA}s(Xst,"isContentType");function Xcr(t){if(!cw(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(Xcr,"assertContainerOrChatMessage");function*Zst(t,e=!1){for(let r of t.children)r instanceof nQ?(yield{content:r,isTextSibling:e},e=!0):r instanceof ek||r instanceof aw||r instanceof TA?yield{content:r,isTextSibling:!1}:r instanceof aw?yield{content:r,isTextSibling:!0}:(r&&(yield*Zst(r,e)),e=!1)}s(Zst,"contentChunks");function Zcr(t,e){let r;function n(i,o){if(Xst(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");iQ(r.node,e)}s(Zcr,"removeLowestPriorityLegacy");var zst=new WeakMap;function eat(t){let e=zst.get(t);if(e!==void 0)return e;let r=!1;return t instanceof TA?r=!0:t instanceof wA?r=t.children.some(n=>n instanceof TA):t instanceof QE&&(r=t.children.some(eat)),zst.set(t,r),r}s(eat,"hasCachePoint");function elr(t){if(t instanceof wA)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof wA)return!1;return!0}s(elr,"shouldLookForCachePointInNode");function rIe(t,e){let r;if(t instanceof QE&&t.has(1)){Zcr(t,e);return}let n=elr(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&eat(l)&&(r=void 0,l instanceof TA))){if(l instanceof QE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((d,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=Yst(r.value);let u=Yst(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new are(t);Xst(r.value)||r.value instanceof QE&&r.value.has(2)||cw(r.value)&&!r.value.children.length?iQ(r.value,e):rIe(r.value,e)}s(rIe,"removeLowestPriorityChild");var are=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof wA?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Pd.BudgetExceededError=are;function Yst(t){if(!cw(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(Yst,"getLowestPriorityAmongChildren");function*tat(t){yield*t.metadata;for(let e of t.children)cw(e)?yield*tat(e):yield*e.metadata}s(tat,"allMetadata");function rat(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(cw(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(rat,"replaceNode");function*Kst(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,cw(r)&&e.push(...r.children)}}s(Kst,"forEachNode");function tlr(t){let e=t;for(;e.parent;)e=e.parent;return e}s(tlr,"getRoot");function Jst(t){return t instanceof QE&&t.keepWithId!==void 0}s(Jst,"isKeepWith");var tIe=new Set;function rlr(t,e){let r=new Set;for(let n of Kst(t))Jst(n)&&!tIe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)tIe.add(n);try{let n=tlr(t);for(let i of Kst(n))Jst(i)&&r.has(i.keepWithId)?iQ(i,e):i instanceof wA&&i.toolCalls&&(i.toolCalls=nlr(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&iQ(i,e))}finally{for(let n of r)tIe.delete(n)}}s(rlr,"removeOtherKeepWiths");function nIe(t,e){if(e.id===t)return e;for(let r of e.children)if(cw(r)){let n=nIe(t,r);if(n)return n}}s(nIe,"findNodeById");function iQ(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),rlr(t,e),r.isEmpty?iQ(r,e):r.onChunksChange())}s(iQ,"removeNode");function nat(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(nat,"getEncodedBase64");function nlr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(nlr,"filterIfDifferent")});var oat=q(()=>{"use strict";f();function ilr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(ilr,"_vscpp");function iat(){throw new Error("This should not be invoked!")}s(iat,"_vscppf");iat.isFragment=!0;globalThis.vscpp=ilr;globalThis.vscppf=iat});var sIe=q(cre=>{"use strict";f();Object.defineProperty(cre,"__esModule",{value:!0});cre.PromptElement=void 0;oat();var oIe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};cre.PromptElement=oIe});var gIe=q(lo=>{"use strict";f();Object.defineProperty(lo,"__esModule",{value:!0});lo.LogicalWrapper=lo.IfEmpty=lo.AbstractKeepWith=lo.TokenLimit=lo.Expandable=lo.Chunk=lo.LegacyPrioritization=lo.ToolResult=lo.PrioritizedList=lo.Image=lo.TextChunk=lo.ToolMessage=lo.AssistantMessage=lo.UserMessage=lo.SystemMessage=lo.BaseChatMessage=void 0;lo.isChatMessagePromptElement=olr;lo.useKeepWith=llr;var sQ=SA(),kh=sIe();function olr(t){return t instanceof lre||t instanceof ure||t instanceof dre}s(olr,"isChatMessagePromptElement");var tk=class extends kh.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};lo.BaseChatMessage=tk;var lre=class extends tk{static{s(this,"SystemMessage")}constructor(e){e.role=sQ.Raw.ChatRole.System,super(e)}};lo.SystemMessage=lre;var ure=class extends tk{static{s(this,"UserMessage")}constructor(e){e.role=sQ.Raw.ChatRole.User,super(e)}};lo.UserMessage=ure;var dre=class extends tk{static{s(this,"AssistantMessage")}constructor(e){e.role=sQ.Raw.ChatRole.Assistant,super(e)}};lo.AssistantMessage=dre;var slr=/\s+/g,aIe=class extends tk{static{s(this,"ToolMessage")}constructor(e){e.role=sQ.Raw.ChatRole.Tool,super(e)}};lo.ToolMessage=aIe;var fre=class extends kh.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?slr:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await alr(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};lo.TextChunk=fre;async function alr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:sQ.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(alr,"getTextContentBelowBudget");var cIe=class extends kh.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};lo.Image=cIe;var lIe=class extends kh.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(fre,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};lo.PrioritizedList=lIe;var uIe=class extends kh.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};lo.ToolResult=uIe;var dIe=class extends kh.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};lo.LegacyPrioritization=dIe;var fIe=class extends kh.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};lo.Chunk=fIe;var pIe=class extends kh.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};lo.Expandable=pIe;var mIe=class extends kh.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};lo.TokenLimit=mIe;var pre=class extends kh.PromptElement{static{s(this,"AbstractKeepWith")}};lo.AbstractKeepWith=pre;var clr=0;function llr(){let t=clr++;return class extends pre{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(llr,"useKeepWith");var hIe=class extends kh.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(oQ,null,this.props.alt),vscpp(oQ,{flexGrow:1},this.props.children))}};lo.IfEmpty=hIe;var oQ=class extends kh.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};lo.LogicalWrapper=oQ});var aat=q(aQ=>{"use strict";f();Object.defineProperty(aQ,"__esModule",{value:!0});aQ.localize=ulr;aQ.localize2=dlr;aQ.getConfiguredDefaultLocale=flr;function sat(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(sat,"_format");function ulr(t,e,...r){return sat(e,r)}s(ulr,"localize");function dlr(t,e,...r){let n=sat(e,r);return{original:n,value:n}}s(dlr,"localize2");function flr(t){}s(flr,"getConfiguredDefaultLocale")});var vIe=q(jt=>{"use strict";f();Object.defineProperty(jt,"__esModule",{value:!0});jt.isAndroid=jt.isEdge=jt.isSafari=jt.isFirefox=jt.isChrome=jt.OS=jt.setTimeout0=jt.setTimeout0IsFaster=jt.translationsConfigFile=jt.platformLocale=jt.locale=jt.Language=jt.language=jt.userAgent=jt.platform=jt.isCI=jt.isMobile=jt.isIOS=jt.webWorkerOrigin=jt.isWebWorker=jt.isWeb=jt.isElectron=jt.isNative=jt.isLinuxSnap=jt.isLinux=jt.isMacintosh=jt.isWindows=jt.LANGUAGE_DEFAULT=void 0;jt.PlatformToString=mlr;jt.isLittleEndian=hlr;jt.isBigSurOrNewer=glr;var cat=aat();jt.LANGUAGE_DEFAULT="en";var uQ=!1,dQ=!1,lQ=!1,fat=!1,pat=!1,yIe=!1,mat=!1,CIe=!1,hat=!1,gat=!1,cQ,mre=jt.LANGUAGE_DEFAULT,AIe=jt.LANGUAGE_DEFAULT,Aat,UE,qE=globalThis,Hp;typeof qE.vscode<"u"&&typeof qE.vscode.process<"u"?Hp=qE.vscode.process:typeof process<"u"&&(Hp=process);var yat=typeof Hp?.versions?.electron=="string",plr=yat&&Hp?.type==="renderer";if(typeof Hp=="object"){uQ=Hp.platform==="win32",dQ=Hp.platform==="darwin",lQ=Hp.platform==="linux",fat=lQ&&!!Hp.env.SNAP&&!!Hp.env.SNAP_REVISION,mat=yat,hat=!!Hp.env.CI||!!Hp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,cQ=jt.LANGUAGE_DEFAULT,mre=jt.LANGUAGE_DEFAULT;let t=Hp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];cQ=e.locale,AIe=e.osLocale,mre=r||jt.LANGUAGE_DEFAULT,Aat=e._translationsConfigFile}catch{}pat=!0}else typeof navigator=="object"&&!plr?(UE=navigator.userAgent,uQ=UE.indexOf("Windows")>=0,dQ=UE.indexOf("Macintosh")>=0,CIe=(UE.indexOf("Macintosh")>=0||UE.indexOf("iPad")>=0||UE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,lQ=UE.indexOf("Linux")>=0,gat=UE?.indexOf("Mobi")>=0,yIe=!0,cQ=cat.getConfiguredDefaultLocale(cat.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||jt.LANGUAGE_DEFAULT,mre=cQ,AIe=navigator.language):console.error("Unable to resolve platform.");function mlr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(mlr,"PlatformToString");var hre=0;dQ?hre=1:uQ?hre=3:lQ&&(hre=2);jt.isWindows=uQ;jt.isMacintosh=dQ;jt.isLinux=lQ;jt.isLinuxSnap=fat;jt.isNative=pat;jt.isElectron=mat;jt.isWeb=yIe;jt.isWebWorker=yIe&&typeof qE.importScripts=="function";jt.webWorkerOrigin=jt.isWebWorker?qE.origin:void 0;jt.isIOS=CIe;jt.isMobile=gat;jt.isCI=hat;jt.platform=hre;jt.userAgent=UE;jt.language=mre;var lat;(function(t){function e(){return jt.language}s(e,"value"),t.value=e;function r(){return jt.language.length===2?jt.language==="en":jt.language.length>=3?jt.language[0]==="e"&&jt.language[1]==="n"&&jt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return jt.language==="en"}s(n,"isDefault"),t.isDefault=n})(lat||(jt.Language=lat={}));jt.locale=cQ;jt.platformLocale=AIe;jt.translationsConfigFile=Aat;jt.setTimeout0IsFaster=typeof qE.postMessage=="function"&&!qE.importScripts;jt.setTimeout0=(()=>{if(jt.setTimeout0IsFaster){let t=[];qE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),qE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();jt.OS=dQ||CIe?2:uQ?1:3;var uat=!0,dat=!1;function hlr(){if(!dat){dat=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,uat=new Uint16Array(t.buffer)[0]===513}return uat}s(hlr,"isLittleEndian");jt.isChrome=!!(jt.userAgent&&jt.userAgent.indexOf("Chrome")>=0);jt.isFirefox=!!(jt.userAgent&&jt.userAgent.indexOf("Firefox")>=0);jt.isSafari=!!(!jt.isChrome&&jt.userAgent&&jt.userAgent.indexOf("Safari")>=0);jt.isEdge=!!(jt.userAgent&&jt.userAgent.indexOf("Edg/")>=0);jt.isAndroid=!!(jt.userAgent&&jt.userAgent.indexOf("Android")>=0);function glr(t){return parseFloat(t)>=20}s(glr,"isBigSurOrNewer")});var vat=q(XC=>{"use strict";f();Object.defineProperty(XC,"__esModule",{value:!0});XC.arch=XC.platform=XC.env=XC.cwd=void 0;var Cat=vIe(),rk,EIe=globalThis.vscode;if(typeof EIe<"u"&&typeof EIe.process<"u"){let t=EIe.process;rk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?rk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:rk={get platform(){return Cat.isWindows?"win32":Cat.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};XC.cwd=rk.cwd;XC.env=rk.env;XC.platform=rk.platform;XC.arch=rk.arch});var xat=q(Cr=>{"use strict";f();Object.defineProperty(Cr,"__esModule",{value:!0});Cr.delimiter=Cr.sep=Cr.toNamespacedPath=Cr.parse=Cr.format=Cr.extname=Cr.basename=Cr.dirname=Cr.relative=Cr.resolve=Cr.join=Cr.isAbsolute=Cr.normalize=Cr.posix=Cr.win32=void 0;var pN=vat(),Alr=65,ylr=97,Clr=90,vlr=122,dw=46,au=47,T0=92,lw=58,Elr=63,gre=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function xlr(t,e){if(t===null||typeof t!="object")throw new gre(e,"Object",t)}s(xlr,"validateObject");function oc(t,e){if(typeof t!="string")throw new gre(e,"string",t)}s(oc,"validateString");var w0=pN.platform==="win32";function Ei(t){return t===au||t===T0}s(Ei,"isPathSeparator");function xIe(t){return t===au}s(xIe,"isPosixPathSeparator");function uw(t){return t>=Alr&&t<=Clr||t>=ylr&&t<=vlr}s(uw,"isWindowsDeviceRoot");function Are(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=au}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==dw||i.charCodeAt(i.length-2)!==dw){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===dw&&c!==-1?++c:c=-1}return i}s(Are,"normalizeString");function Eat(t,e){xlr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Eat,"_format");Cr.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],oc(o,"path"),o.length===0)continue}else e.length===0?o=pN.cwd():(o=pN.env[`=${e}`]||pN.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===T0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,d=o.charCodeAt(0);if(a===1)Ei(d)&&(c=1,u=!0);else if(Ei(d))if(u=!0,Ei(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ei(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ei(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ei(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else uw(d)&&o.charCodeAt(1)===lw&&(l=o.slice(0,2),c=2,a>2&&Ei(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Are(r,!n,"\\",Ei),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){oc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return xIe(o)?"\\":t;if(Ei(o))if(i=!0,Ei(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ei(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else uw(o)&&t.charCodeAt(1)===lw&&(n=t.slice(0,2),r=2,e>2&&Ei(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Are(t.slice(r),!i,"\\",Ei):"";return a.length===0&&!i&&(a="."),a.length>0&&Ei(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){oc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ei(r)||e>2&&uw(r)&&t.charCodeAt(1)===lw&&Ei(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];oc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ei(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ei(r.charCodeAt(1))&&(++i,o>2&&(Ei(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ei(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Cr.win32.normalize(e)},relative(t,e){if(oc(t,"from"),oc(e,"to"),t===e)return"";let r=Cr.win32.resolve(t),n=Cr.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===T0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===T0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===T0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===T0;)l--;let u=l-c,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===T0&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(c+m)===T0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>d&&(t.charCodeAt(i+m)===T0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===T0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===T0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Cr.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===T0){if(e.charCodeAt(1)===T0){let r=e.charCodeAt(2);if(r!==Elr&&r!==dw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(uw(e.charCodeAt(0))&&e.charCodeAt(1)===lw&&e.charCodeAt(2)===T0)return`\\\\?\\${e}`;return t},dirname(t){oc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ei(i)?t:".";if(Ei(i)){if(r=n=1,Ei(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ei(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else uw(i)&&t.charCodeAt(1)===lw&&(r=e>2&&Ei(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ei(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&oc(e,"ext"),oc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&uw(t.charCodeAt(0))&&t.charCodeAt(1)===lw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ei(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ei(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){oc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===lw&&uw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ei(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===dw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Eat.bind(null,"\\"),parse(t){oc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ei(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ei(i)){if(n=1,Ei(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ei(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ei(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ei(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(uw(i)&&t.charCodeAt(1)===lw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ei(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ei(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===dw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return c!==-1&&(o===-1||d===0||d===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var blr=(()=>{if(w0){let t=/\\/g;return()=>{let e=pN.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>pN.cwd()})();Cr.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:blr();oc(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===au)}return e=Are(e,!r,"/",xIe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(oc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===au,r=t.charCodeAt(t.length-1)===au;return t=Are(t,!e,"/",xIe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return oc(t,"path"),t.length>0&&t.charCodeAt(0)===au},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];oc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Cr.posix.normalize(e)},relative(t,e){if(oc(t,"from"),oc(e,"to"),t===e||(t=Cr.posix.resolve(t),e=Cr.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===au&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===au)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===au?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===au)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(oc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===au,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===au){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&oc(e,"ext"),oc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===au){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===au){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){oc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===au){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===dw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Eat.bind(null,"/"),parse(t){oc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===au,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===au){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===dw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Cr.posix.win32=Cr.win32.win32=Cr.win32;Cr.posix.posix=Cr.win32.posix=Cr.posix;Cr.normalize=w0?Cr.win32.normalize:Cr.posix.normalize;Cr.isAbsolute=w0?Cr.win32.isAbsolute:Cr.posix.isAbsolute;Cr.join=w0?Cr.win32.join:Cr.posix.join;Cr.resolve=w0?Cr.win32.resolve:Cr.posix.resolve;Cr.relative=w0?Cr.win32.relative:Cr.posix.relative;Cr.dirname=w0?Cr.win32.dirname:Cr.posix.dirname;Cr.basename=w0?Cr.win32.basename:Cr.posix.basename;Cr.extname=w0?Cr.win32.extname:Cr.posix.extname;Cr.format=w0?Cr.win32.format:Cr.posix.format;Cr.parse=w0?Cr.win32.parse:Cr.posix.parse;Cr.toNamespacedPath=w0?Cr.win32.toNamespacedPath:Cr.posix.toNamespacedPath;Cr.sep=w0?Cr.win32.sep:Cr.posix.sep;Cr.delimiter=w0?Cr.win32.delimiter:Cr.posix.delimiter});var Rat=q(mN=>{"use strict";f();Object.defineProperty(mN,"__esModule",{value:!0});mN.URI=void 0;mN.isUriComponents=Plr;mN.uriToFsPath=Ere;var bat=xat(),Cre=vIe(),Ilr=/^\w[\w\d+.-]*$/,Tlr=/^\//,wlr=/^\/\//;function Slr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Ilr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Tlr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(wlr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Slr,"_validateUri");function _lr(t,e){return!t&&!e?"file":t}s(_lr,"_schemeFix");function Rlr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==_A&&(e=_A+e):e=_A;break}return e}s(Rlr,"_referenceResolution");var Is="",_A="/",klr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,vre=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Is,this.authority=e.authority||Is,this.path=e.path||Is,this.query=e.query||Is,this.fragment=e.fragment||Is):(this.scheme=_lr(e,a),this.authority=r||Is,this.path=Rlr(this.scheme,n||Is),this.query=i||Is,this.fragment=o||Is,Slr(this,a))}get fsPath(){return Ere(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Is),n===void 0?n=this.authority:n===null&&(n=Is),i===void 0?i=this.path:i===null&&(i=Is),o===void 0?o=this.query:o===null&&(o=Is),a===void 0?a=this.fragment:a===null&&(a=Is),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new fw(r,n,i,o,a)}static parse(e,r=!1){let n=klr.exec(e);return n?new fw(n[2]||Is,yre(n[4]||Is),yre(n[5]||Is),yre(n[7]||Is),yre(n[9]||Is),r):new fw(Is,Is,Is,Is,Is)}static file(e){let r=Is;if(Cre.isWindows&&(e=e.replace(/\\/g,_A)),e[0]===_A&&e[1]===_A){let n=e.indexOf(_A,2);n===-1?(r=e.substring(2),e=_A):(r=e.substring(2,n),e=e.substring(n)||_A)}return new fw("file",r,e,Is,Is)}static from(e,r){return new fw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Cre.isWindows&&e.scheme==="file"?n=t.file(bat.win32.join(Ere(e,!0),...r)).path:n=bat.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return bIe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new fw(e);return r._formatted=e.external??null,r._fsPath=e._sep===wat?e.fsPath??null:null,r}}else return e}};mN.URI=vre;function Plr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Plr,"isUriComponents");var wat=Cre.isWindows?1:void 0,fw=class extends vre{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Ere(this,!1)),this._fsPath}toString(e=!1){return e?bIe(this,!0):(this._formatted||(this._formatted=bIe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=wat),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Sat={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Iat(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Sat[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Iat,"encodeURIComponentFast");function Dlr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Sat[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Dlr,"encodeURIComponentMinimal");function Ere(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Cre.isWindows&&(r=r.replace(/\//g,"\\")),r}s(Ere,"uriToFsPath");function bIe(t,e){let r=e?Dlr:Iat,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=_A,n+=_A),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Iat(l,!1,!1)),n}s(bIe,"_asFormatted");function _at(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+_at(t.substr(3)):t}}s(_at,"decodeURIComponentGraceful");var Tat=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function yre(t){return t.match(Tat)?t.replace(Tat,e=>_at(e)):t}s(yre,"percentDecode")});var wIe=q(pw=>{"use strict";f();Object.defineProperty(pw,"__esModule",{value:!0});pw.PromptReference=pw.ChatResponseReferencePartStatusKind=pw.PromptMetadata=void 0;var fQ=Rat(),IIe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};pw.PromptMetadata=IIe;var kat;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(kat||(pw.ChatResponseReferencePartStatusKind=kat={}));var TIe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?fQ.URI.from(n):{uri:fQ.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?fQ.URI.from(e.iconPath):"light"in e.iconPath?{light:fQ.URI.from(e.iconPath.light),dark:fQ.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};pw.PromptReference=TIe});var LIe=q(gN=>{"use strict";f();Object.defineProperty(gN,"__esModule",{value:!0});gN.PromptRenderer=gN.MetadataMap=void 0;var Blr=Zbe(),pQ=iIe(),hN=ow(),Pc=gIe(),NIe=wIe(),Pat;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(Pat||(gN.MetadataMap=Pat={}));var _Ie=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new bre(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Lat(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Pc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let d=l+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let d=c(l),p=0;for(let{element:y}of u)p+=y.props.flexBasis??1;let m=0,h=u.map(y=>{if(y.tokenLimit===void 0)return!1;let E=y.element.props.flexBasis??1,b=E/p;return Math.floor(e.remainingTokenBudget*b)<y.tokenLimit?!1:(p-=E,m+=y.tokenLimit,!0)}),g=u.map((y,E)=>{let b=(y.element.props.flexBasis??1)/p;return{tokenBudget:h[E]?y.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((w,R)=>this._tokenizer.tokenLength(typeof w=="string"?{type:hN.Raw.ChatCompletionContentPartKind.Text,text:w}:w,R),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((y,E)=>({id:y.element.node.id,tokenBudget:g[E].tokenBudget}))}),await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let w=await Bat(y,()=>E.prepare?.(g[b],n,i));y.node.setState(w)}));let A=await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let w=g[b];return await Bat(y,()=>E.render(y.node.getState(),w,n,i))}));for(let[y,{element:E,promptElementInstance:b}]of u.entries()){let w=g[y],R=A[y];if(!R)continue;let D=await this._processPromptRenderPiece(new nk(w.tokenBudget,this._endpoint),E,b,R,n,i);b instanceof Pc.Expandable&&this._growables.push({initialConsume:D,elem:E.node}),e.consume(D)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=Nat(i),l=new nk(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Nlr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new nk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,hN.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new nk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,d=l.map(m=>{if(!(m instanceof ZC))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Ire),p=i.map(m=>{if(!(m instanceof ZC)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Ire);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:d,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<l.limit&&!await this._grow(u,d,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Pc.Expandable))throw new Error("unreachable: expected growable");let c=new bre(null,0,o.elem.id),l=new nk(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:hN.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=c.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Pc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},xre(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new ZC(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new ZC(l));else this._handleIntrinsic(e,c.name,c.props,xre(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};gN.PromptRenderer=_Ie;async function Nlr(t,e,r,n){let i=0;if((0,Pc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,hN.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:hN.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Nlr,"computeTokensConsumedByLiterals");function Nat(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new PIe(String(t))):Llr(t)?xre(t.children,e):Mlr(t)?xre(t,e):typeof t.ctor=="string"?e.push(new RIe(t.ctor,t.props,t.children)):e.push(new kIe(t.ctor,t.props,t.children)),e)}s(Nat,"flattenAndReduce");function xre(t,e=[]){for(let r of t)Nat(r,e);return e}s(xre,"flattenAndReduceArr");var RIe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},kIe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},PIe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},nk=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},bre=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new ZC(NIe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return mQ.fromJSON(i,a,o);default:}}).filter(Ire),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Pc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Pc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Pc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Pc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Pc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Pc.Chunk&&(this._objFlags|=2),this._obj instanceof Pc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new mQ(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new mQ(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(Ire),props:{},references:this._metadata.filter(r=>r instanceof ZC).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=SIe(this._obj.props,Blr.jsonRetainedProps)),this._obj instanceof Pc.BaseChatMessage)e.ctor=1,Object.assign(e.props,SIe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Pc.Image)return{...e,ctor:3,props:{...e.props,...SIe(this._obj.props,["src","detail"])}};this._obj instanceof Pc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Pc.Image)return new pQ.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Pc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new pQ.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Pc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Pc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new pQ.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Pc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Pc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new DIe({type:hN.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},DIe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new pQ.MaterializedChatMessageBreakpoint(e,this.part)}},mQ=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new ZC(NIe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new pQ.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof ZC).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Llr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Llr,"isFragmentCtor");function Ire(t){return t!==void 0}s(Ire,"isDefined");var BIe=class extends NIe.PromptMetadata{static{s(this,"InternalMetadata")}},ZC=class extends BIe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function Mlr(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(Mlr,"isIterable");function SIe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(SIe,"pickProps");function Lat(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Lat,"atPath");var Dat=new WeakSet;async function Bat(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Dat.has(r)&&r.constructor.name!=="CancellationError"&&(Dat.add(r),r.message+=` (at tsx element ${Lat(t.path)})`),r}}s(Bat,"annotateError")});var Mat=q(Tre=>{"use strict";f();Object.defineProperty(Tre,"__esModule",{value:!0});Tre.VSCodeTokenizer=void 0;var MIe=ow(),FIe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=MIe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==MIe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===MIe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};Tre.VSCodeTokenizer=FIe});var Fat=q(AN=>{"use strict";f();Object.defineProperty(AN,"__esModule",{value:!0});AN.tracerCss=AN.tracerSrc=void 0;AN.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';AN.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Hat=q(Sre=>{"use strict";f();Object.defineProperty(Sre,"__esModule",{value:!0});Sre.HTMLTracer=void 0;var Oat=Fat(),ik=iIe(),Flr=ow(),OIe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return QIe.create({epochs:this.epochs,traceData:Uat(this.traceData)})}serveRouter(e){return new wre({baseAddress:e,epochs:this.epochs,traceData:Uat(this.traceData)})}};Sre.HTMLTracer=OIe;var wre=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Oat.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Qat(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Oat.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Qat(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},QIe=class t extends wre{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Qat(t,e){return{container:await qat(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Qat,"serializeRenderData");async function qat(t,e,r){let n={metadata:e.metadata.map(Qlr),priority:e.priority};if(e instanceof ik.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof ik.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof ik.MaterializedChatMessageOpaque||e instanceof ik.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>qat(t,o,r||e instanceof ik.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof ik.GenericMaterializedContainer)return{...i,type:0};if(e instanceof ik.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Flr.Raw.ChatRole.display(e.role),text:o}}}Olr(e)}s(qat,"serializeMaterialized");function Olr(t){throw new Error("unreachable")}s(Olr,"assertNever");function Qlr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Qlr,"serializeMetadata");var Uat=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var $at=q(Wat=>{"use strict";f();Object.defineProperty(Wat,"__esModule",{value:!0})});var Gat=q(jat=>{"use strict";f();Object.defineProperty(jat,"__esModule",{value:!0})});var zat=q(Vat=>{"use strict";f();Object.defineProperty(Vat,"__esModule",{value:!0})});var SA=q(aa=>{"use strict";f();var Ulr=aa&&aa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ok=aa&&aa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ulr(e,t,r)};Object.defineProperty(aa,"__esModule",{value:!0});aa.contentType=aa.PromptRenderer=aa.MetadataMap=aa.PromptElement=aa.JSONTree=void 0;aa.renderPrompt=Wlr;aa.renderElementJSON=$lr;var UIe=ow(),Yat=LIe(),qlr=Mat();ok(Hat(),aa);aa.JSONTree=Zbe();ok(ow(),aa);ok(gIe(),aa);ok(wIe(),aa);ok($at(),aa);ok(Gat(),aa);ok(zat(),aa);var Hlr=sIe();Object.defineProperty(aa,"PromptElement",{enumerable:!0,get:s(function(){return Hlr.PromptElement},"get")});var Kat=LIe();Object.defineProperty(aa,"MetadataMap",{enumerable:!0,get:s(function(){return Kat.MetadataMap},"get")});Object.defineProperty(aa,"PromptRenderer",{enumerable:!0,get:s(function(){return Kat.PromptRenderer},"get")});async function Wlr(t,e,r,n,i,o,a=UIe.OutputMode.VSCode){let c="countTokens"in n?new qlr.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new Yat.PromptRenderer(r,t,e,c),u=await l.render(i,o),d=l.getUsedContext();return{...u,usedContext:d}}s(Wlr,"renderPrompt");aa.contentType="application/vnd.codechat.prompt+json.1";function $lr(t,e,r,n){return new Yat.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:UIe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===UIe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s($lr,"renderElementJSON")});var jp=q(OQ=>{"use strict";f();Object.defineProperty(OQ,"__esModule",{value:!0});OQ.dedent=void 0;function Glt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+n[l+1]}),a}s(Glt,"dedent");OQ.dedent=Glt;OQ.default=Glt});var eut=q(iwe=>{"use strict";f();Object.defineProperty(iwe,"__esModule",{value:!0});iwe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var aut=q(swe=>{"use strict";f();Object.defineProperty(swe,"__esModule",{value:!0});var tut=require("worker_threads"),zdr=require("v8"),Ydr=require("os"),rut=eut(),qne="ready",nut="spawning",Kdr="busy",Hne="off",iut=Ydr.cpus().length,sut=process.version.replace("v","").split("."),Jdr=parseInt(sut[0]),Xdr=parseInt(sut[1]),owe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=iut,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new tut.Worker(rut.workerFile,{eval:!0});e.status=nut,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=qne,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=Hne,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===Hne).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===qne){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=Kdr;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=zdr.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=Hne,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=qne,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:iut,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new tut.Worker(rut.workerFile,{eval:!0});this.workers.push({status:nut,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=qne,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=Hne,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(Jdr>=12&&Xdr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};swe.default=new owe});var Wne=q(vk=>{"use strict";f();var Zdr=vk&&vk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vk,"__esModule",{value:!0});var QQ=Zdr(aut()),efr=`job needs a function.
Try with:
> job(() => {...}, config)`,tfr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function rfr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(efr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(tfr));QQ.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(rfr,"job");vk.job=rfr;vk.stop=QQ.default.teardown.bind(QQ.default);vk.start=QQ.default.setup.bind(QQ.default)});var Iut=q(Ek=>{"use strict";f();var f1=Ek&&Ek.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},gwe=Ek&&Ek.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},JE,Rw;Object.defineProperty(Ek,"__esModule",{value:!0});var Awe=class{static{s(this,"AwaitLock")}constructor(){JE.set(this,!1),Rw.set(this,new Set)}get acquired(){return f1(this,JE,"f")}acquireAsync({timeout:e}={}){if(!f1(this,JE,"f"))return gwe(this,JE,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{f1(this,Rw,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),f1(this,Rw,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{f1(this,Rw,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return f1(this,JE,"f")?!1:(gwe(this,JE,!0,"f"),!0)}release(){if(!f1(this,JE,"f"))throw new Error("Cannot release an unacquired lock");if(f1(this,Rw,"f").size>0){let[e]=f1(this,Rw,"f");f1(this,Rw,"f").delete(e),e()}else gwe(this,JE,!1,"f")}};Ek.default=Awe;JE=new WeakMap,Rw=new WeakMap});var KSe=q((lso,D0t)=>{f();var dU=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,wAr=typeof AbortController=="function",Coe=wAr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new R0t}abort(){this.signal.dispatchEvent("abort")}},SAr=typeof AbortSignal=="function",_Ar=typeof Coe.AbortSignal=="function",R0t=SAr?AbortSignal:_Ar?Coe.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},zSe=new Set,jSe=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;voe(r)&&YSe(r,`${t} option`,`options.${e}`,l8)},"deprecatedOption"),GSe=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(voe(r)){let{prototype:n}=l8,{get:i}=Object.getOwnPropertyDescriptor(n,t);YSe(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),RAr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(voe(r)){let{prototype:n}=l8,{get:i}=Object.getOwnPropertyDescriptor(n,t);YSe(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),k0t=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),voe=s(t=>!zSe.has(t),"shouldWarn"),YSe=s((t,e,r,n)=>{zSe.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;k0t(i,"DeprecationWarning",t,n)},"warn"),kk=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),P0t=s(t=>kk(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?c8:null:null,"getUintArray"),c8=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},VSe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=P0t(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},l8=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:A,fetchContext:y,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:b}=e,{length:w,maxAge:R,stale:D}=e instanceof t?{}:e;if(r!==0&&!kk(r))throw new TypeError("max option must be a nonnegative integer");let N=r?P0t(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||w,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=y,!this.fetchMethod&&y!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new VSe(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!E,this.maxSize!==0){if(!kk(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!D,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=kk(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||R||0,this.ttl){if(!kk(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";voe(O)&&(zSe.add(O),k0t("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}D&&jSe("stale","allowStale"),R&&jSe("maxAge","ttl"),w&&jSe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new c8(this.max),this.starts=new c8(this.max),this.setItemTTL=(n,i,o=dU.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?dU.now():0};let e=0,r=s(()=>{let n=dU.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new c8(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!kk(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!kk(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return GSe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=dU.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=dU.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let d=this.valList[u];r!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new Coe,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(d).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let A=this.backgroundFetch(e,g,h,p);return A.__returned=A}else{let A=this.valList[g];if(this.isBackgroundFetch(A))return r&&A.__staleWhileFetching!==void 0?A.__staleWhileFetching:A.__returned=A;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),A;let y=this.backgroundFetch(e,g,h,p);return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return GSe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return GSe("reset","clear"),this.clear}get length(){return RAr("length","size"),this.size}static get AbortController(){return Coe}static get AbortSignal(){return R0t}};D0t.exports=l8});var ZSe=q((fso,B0t)=>{"use strict";f();var fU=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},JSe=class extends fU{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},XSe=class extends fU{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};B0t.exports={FetchBaseError:fU,FetchError:JSe,AbortError:XSe}});var nx=q((hso,L0t)=>{"use strict";f();var{constants:{MAX_LENGTH:kAr}}=require("buffer"),{pipeline:Eoe,PassThrough:PAr}=require("stream"),{promisify:DAr}=require("util"),{createGunzip:BAr,createInflate:NAr,createBrotliDecompress:LAr,constants:{Z_SYNC_FLUSH:N0t}}=require("zlib"),MAr=Wy()("helix-fetch:utils"),FAr=DAr(Eoe),OAr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),QAr=s((t,e,r,n)=>{if(!OAr(t,e))return r;let i=s(o=>{o&&(MAr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Eoe(r,BAr({flush:N0t,finishFlush:N0t}),i);case"deflate":case"x-deflate":return Eoe(r,NAr(),i);case"br":return Eoe(r,LAr(),i);default:return r}},"decodeStream"),UAr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),xoe=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?qAr(t,e):HAr(t,e);default:return 0}},"calcSize"),qAr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:xoe(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),HAr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=xoe(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=xoe(t[i],e)}),r},"calcObjectSize"),WAr=s(t=>xoe(t,new WeakSet),"sizeof"),$Ar=s(async t=>{let e=new PAr,r=0,n=[];return e.on("data",i=>{if(r+i.length>kAr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await FAr(t,e),Buffer.concat(n,r)},"streamToBuffer");L0t.exports={decodeStream:QAr,isPlainObject:UAr,sizeof:WAr,streamToBuffer:$Ar}});var Ioe=q((yso,Q0t)=>{"use strict";f();var{PassThrough:M0t,Readable:ix}=require("stream"),{types:{isAnyArrayBuffer:O0t}}=require("util"),{FetchError:jAr,FetchBaseError:GAr}=ZSe(),{streamToBuffer:VAr}=nx(),zAr=Buffer.alloc(0),Fh=Symbol("Body internals"),YAr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),F0t=s(async t=>{if(t[Fh].disturbed)throw new TypeError("Already read");if(t[Fh].error)throw new TypeError(`Stream had error: ${t[Fh].error.message}`);t[Fh].disturbed=!0;let{stream:e}=t[Fh];return e===null?zAr:VAr(e)},"consume"),boe=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=ix.from(e.toString()):e instanceof ix?r=e:Buffer.isBuffer(e)?r=ix.from(e):O0t(e)?r=ix.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=ix.from(e):r=ix.from(String(e)),this[Fh]={stream:r,disturbed:!1,error:null},e instanceof ix&&r.on("error",n=>{let i=n instanceof GAr?n:new jAr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Fh].error=i})}get body(){return this[Fh].stream}get bodyUsed(){return this[Fh].disturbed}async buffer(){return F0t(this)}async arrayBuffer(){return YAr(await this.buffer())}async text(){return(await F0t(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(boe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var KAr=s(t=>{if(t[Fh].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Fh],r=e;if(e instanceof ix){r=new M0t;let n=new M0t;e.pipe(r),e.pipe(n),t[Fh].stream=n}return r},"cloneStream"),JAr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||O0t(t)||t instanceof ix?null:"text/plain; charset=utf-8","guessContentType");Q0t.exports={Body:boe,cloneStream:KAr,guessContentType:JAr}});var u8=q((Eso,W0t)=>{"use strict";f();var{validateHeaderName:U0t,validateHeaderValue:q0t}=require("http"),{isPlainObject:XAr}=nx(),ox=Symbol("Headers internals"),pU=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof U0t=="function")U0t(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),H0t=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof q0t=="function")q0t(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),Toe=class t{static{s(this,"Headers")}constructor(e={}){if(this[ox]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(XAr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[ox].map.set(pU(e),H0t(r,e))}has(e){return this[ox].map.has(pU(e))}get(e){let r=this[ox].map.get(pU(e));return r===void 0?null:r}append(e,r){let n=pU(e),i=H0t(r,e),o=this[ox].map.get(n);this[ox].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[ox].map.delete(pU(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[ox].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[ox].map)}};Object.defineProperties(Toe.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));W0t.exports={Headers:Toe}});var e_e=q((Iso,$0t)=>{"use strict";f();var{EventEmitter:ZAr}=require("events"),HA=Symbol("AbortSignal internals"),d8=class{static{s(this,"AbortSignal")}constructor(){this[HA]={eventEmitter:new ZAr,onabort:null,aborted:!1}}get aborted(){return this[HA].aborted}get onabort(){return this[HA].onabort}set onabort(e){this[HA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[HA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[HA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[HA][n]=="function"&&this[n](r),this[HA].eventEmitter.emit(e,r)}fire(){this[HA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(d8.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Soe=class extends d8{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[HA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[HA].timerId)}};Object.defineProperties(Soe.prototype,{clear:{enumerable:!0}});var woe=Symbol("AbortController internals"),_oe=class{static{s(this,"AbortController")}constructor(){this[woe]={signal:new d8}}get signal(){return this[woe].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[woe].signal.aborted||this[woe].signal.fire()}};Object.defineProperties(_oe.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});$0t.exports={AbortController:_oe,AbortSignal:d8,TimeoutSignal:Soe}});var mU=q((Sso,V0t)=>{"use strict";f();var{randomBytes:eyr}=require("crypto"),{Readable:tyr}=require("stream"),r_e=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),ryr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),j0t=s(t=>`--${t}--\r
\r
`,"getFooter"),G0t=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,r_e(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*nyr(t,e){for(let[r,n]of t)yield G0t(e,r,n),r_e(n)?yield*n.stream():yield n,yield`\r
`;yield j0t(e)}s(nyr,"formDataIterator");var iyr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(G0t(e,n,i)),r+=r_e(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(j0t(e)),r},"getFormDataLength"),t_e=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=eyr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=iyr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return tyr.from(nyr(this.fd,this.boundary))}};V0t.exports={isFormData:ryr,FormDataSerializer:t_e}});var Y0t=q((Pso,z0t)=>{"use strict";f();var{AbortSignal:kso}=e_e(),{Body:oyr,cloneStream:syr,guessContentType:ayr}=Ioe(),{Headers:cyr}=u8(),{isPlainObject:lyr}=nx(),{isFormData:uyr,FormDataSerializer:dyr}=mU(),fyr=20,Ow=Symbol("Request internals"),Roe=class t extends oyr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?syr(n):null),c=new cyr(r.headers||n&&n.headers||{});if(uyr(a)&&!c.has("content-type")){let p=new dyr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(lyr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=ayr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Ow]={init:{...r},method:o,redirect:u,cache:d,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=fyr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Ow].method}get url(){return this[Ow].parsedURL.toString()}get headers(){return this[Ow].headers}get redirect(){return this[Ow].redirect}get cache(){return this[Ow].cache}get signal(){return this[Ow].signal}clone(){return new t(this)}get init(){return this[Ow].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Roe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});z0t.exports={Request:Roe}});var n_e=q((Nso,K0t)=>{"use strict";f();var{Body:pyr,cloneStream:myr,guessContentType:hyr}=Ioe(),{Headers:gyr}=u8(),{isPlainObject:Ayr}=nx(),{isFormData:yyr,FormDataSerializer:Cyr}=mU(),WA=Symbol("Response internals"),koe=class t extends pyr{static{s(this,"Response")}constructor(e=null,r={}){let n=new gyr(r.headers),i=e;if(yyr(i)&&!n.has("content-type")){let o=new Cyr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Ayr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=hyr(i);o&&n.set("content-type",o)}super(i),this[WA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[WA].url||""}get status(){return this[WA].status}get statusText(){return this[WA].statusText}get ok(){return this[WA].status>=200&&this[WA].status<300}get redirected(){return this[WA].counter>0}get headers(){return this[WA].headers}get httpVersion(){return this[WA].httpVersion}get decoded(){return this[WA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(myr(this),{...this[WA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(koe.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});K0t.exports={Response:koe}});var X0t=q((Oso,J0t)=>{"use strict";f();var vyr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Eyr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),xyr=new Set([500,502,503,504]),byr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Iyr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Pk(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(Pk,"toNumberOrZero");function Tyr(t){return t?xyr.has(t.status):!0}s(Tyr,"isErrorResponse");function i_e(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(i_e,"parseCacheControl");function wyr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(wyr,"formatCacheControl");J0t.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=i_e(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=i_e(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":wyr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Eyr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||vyr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=i_e(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)byr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Pk(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Pk(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Pk(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Pk(this._rescc["stale-if-error"]),n=e+Pk(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Pk(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Pk(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Tyr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Iyr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var rpt=q((qso,tpt)=>{"use strict";f();var Syr=X0t(),{Headers:_yr}=u8(),Z0t=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),ept=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),o_e=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Syr(Z0t(e),ept(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Z0t(e))}responseHeaders(e){return new _yr(this.policy.responseHeaders(ept(e)))}timeToLive(){return this.policy.timeToLive()}};tpt.exports=o_e});var opt=q(($so,ipt)=>{"use strict";f();var{Readable:Ryr}=require("stream"),{Headers:npt}=u8(),{Response:kyr}=n_e(),Qw=Symbol("CacheableResponse internals"),Pyr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),s_e=class t extends kyr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new npt(r.headers);this[Qw]={headers:n,bufferedBody:e}}get headers(){return this[Qw].headers}set headers(e){if(e instanceof npt)this[Qw].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Ryr.from(this[Qw].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Qw].bufferedBody}async arrayBuffer(){return Pyr(this[Qw].bufferedBody)}async text(){return this[Qw].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[Qw].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},Dyr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new s_e(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");ipt.exports={cacheableResponse:Dyr}});var Poe=q((Vso,spt)=>{"use strict";f();var a_e=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};spt.exports={RequestAbortedError:a_e}});var dpt=q((Kso,upt)=>{"use strict";f();var cpt=require("http"),lpt=require("https"),{Readable:Byr}=require("stream"),sx=Wy()("helix-fetch:h1"),{RequestAbortedError:apt}=Poe(),{decodeStream:Nyr}=nx(),Lyr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new lpt.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new cpt.Agent(n),r.httpAgent):void 0},"getAgent"),Myr=s(t=>{t.h1={}},"setupContext"),Fyr=s(async({h1:t})=>{t.httpAgent&&(sx("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(sx("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Oyr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?Nyr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Qyr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?lpt:cpt,i=Lyr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{sx(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{sx(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{sx(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(sx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new apt),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new apt);return}p.addEventListener("abort",m)}d=n(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(sx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(Oyr(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(sx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(sx(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),c instanceof Byr?c.pipe(d):(c&&d.write(c),d.end())})},"h1Request");upt.exports={request:Qyr,setupContext:Myr,resetContext:Fyr}});var hpt=q((Zso,mpt)=>{"use strict";f();var{connect:Uyr,constants:qyr}=require("http2"),{Readable:Hyr}=require("stream"),la=Wy()("helix-fetch:h2"),{RequestAbortedError:fpt}=Poe(),{decodeStream:Wyr}=nx(),{NGHTTP2_CANCEL:hU}=qyr,$yr=300*1e3,jyr=5e3,Gyr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Vyr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),la(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),ppt=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?Wyr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),zyr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=jyr}}}=t,u=i[":path"],d=`${e}${u}`;la(`received PUSH_PROMISE: ${d}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{n.close(hU)},"rejectPush")),n.on("push",(p,m)=>{la(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{la(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(hU)}),c&&c(d,i,ppt(p,n,r))}),n.on("aborted",()=>{la(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{la(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{la(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),Yyr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=$yr,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:A,socket:y,body:E,decode:b}=h;return y&&delete h.socket,A.host&&(A[":authority"]=A.host,delete A.host),new Promise((w,R)=>{let D=u[n];if(!D||D.closed||D.destroyed){let V=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),H={...l,rejectUnauthorized:V};y&&!y.inUse&&(H.createConnection=()=>(la(`reusing socket #${y.id} (${y.servername})`),y.inUse=!0,y)),D=Uyr(n,{...H,settings:{enablePush:!!(p||m)}}),D.setMaxListeners(1e3),D.setTimeout(d,()=>{la(`closing session ${n} after ${d} ms of inactivity`),D.close()}),D.once("connect",()=>{la(`session ${n} established`),la(`caching session ${n}`),u[n]=D}),D.on("localSettings",X=>{la(`session ${n} localSettings: ${JSON.stringify(X)}`)}),D.on("remoteSettings",X=>{la(`session ${n} remoteSettings: ${JSON.stringify(X)}`)}),D.once("close",()=>{la(`session ${n} closed`),u[n]===D&&(la(`discarding cached session ${n}`),delete u[n])}),D.once("error",X=>{la(`session ${n} encountered error: ${X}`),u[n]===D&&(la(`discarding cached session ${n}`),delete u[n])}),D.on("frameError",(X,K,j)=>{la(`session ${n} encountered frameError: type: ${X}, code: ${K}, id: ${j}`)}),D.once("goaway",(X,K,j)=>{la(`session ${n} received GOAWAY frame: errorCode: ${X}, lastStreamID: ${K}, opaqueData: ${j?j.toString():void 0}`)}),D.on("stream",(X,K,j)=>{zyr(t,n,b,X,K,j)})}else y&&y.id!==D.socket.id&&!y.inUse&&(la(`discarding redundant socket used for ALPN: #${y.id} ${y.servername}`),y.destroy());la(`${g} ${e.host}${c}`);let N,{signal:O}=h,Y=s(()=>{O.removeEventListener("abort",Y),R(new fpt),N&&N.close(hU)},"onAbortSignal");if(O){if(O.aborted){R(new fpt);return}O.addEventListener("abort",Y)}let ee=s(V=>{la(`session ${n} encountered error during ${h.method} ${e.href}: ${V}`),R(V)},"onSessionError");D.once("error",ee),N=D.request({":method":g,":path":c,...A}),N.once("response",V=>{D.off("error",ee),O&&O.removeEventListener("abort",Y),w(ppt(V,N,h.decode,R))}),N.once("error",V=>{D.off("error",ee),O&&O.removeEventListener("abort",Y),N.rstCode!==hU&&(la(`${h.method} ${e.href} failed with: ${V.message}`),N.close(hU),R(V))}),N.once("frameError",(V,H,U)=>{D.off("error",ee),la(`encountered frameError during ${h.method} ${e.href}: type: ${V}, code: ${H}, id: ${U}`)}),N.on("push",(V,H)=>{la(`received 'push' event: headers: ${JSON.stringify(V)}, flags: ${H}`)}),E instanceof Hyr?E.pipe(N):(E&&N.write(E),N.end())})},"request");mpt.exports={request:Yyr,setupContext:Gyr,resetContext:Vyr}});var Apt=q((rao,gpt)=>{"use strict";f();var{EventEmitter:Kyr}=require("events"),Jyr=s(()=>{let t={},e=new Kyr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");gpt.exports=Jyr});var ypt=q((oao,Xyr)=>{Xyr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var bpt=q((sao,xpt)=>{"use strict";f();var{Readable:Zyr}=require("stream"),eCr=require("tls"),{types:{isAnyArrayBuffer:tCr}}=require("util"),rCr=KSe(),c_e=Wy()("helix-fetch:core"),{RequestAbortedError:Doe}=Poe(),l_e=dpt(),Boe=hpt(),nCr=Apt(),{isPlainObject:iCr}=nx(),{isFormData:oCr,FormDataSerializer:sCr}=mU(),{version:aCr}=ypt(),u_e="h2",d_e="h2c",f_e="http/1.0",Dk="http/1.1",cCr=100,lCr=3600*1e3,uCr=[u_e,Dk,f_e],dCr=`helix-fetch/${aCr}`,fCr={method:"GET",compress:!0,decode:!0},Cpt=0,vpt=nCr(),Ept=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Doe;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Doe);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Doe||(c_e(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=eCr.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),Cpt+=1,o.id=Cpt,o.secureConnecting=!1,c_e(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),pCr=s(async(t,e)=>{let r=await vpt.acquire(t.origin);try{return r||(r=await Ept(t,e)),r}finally{vpt.release(t.origin,r)}},"connect"),mCr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=Dk,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=d_e,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let d=await pCr(e,u);return i=d.alpnProtocol,i||(i=Dk),t.alpnCache.set(n,i),{protocol:i,socket:d}},"determineProtocol"),hCr=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),gCr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let d=await Ept(e,u);return{protocol:d.alpnProtocol||Dk,socket:d}}return{protocol:c.alpnProtocol||Dk,socket:c}},"getProtocolAndSocketFromFactory"),ACr=s(async(t,e,r)=>{let n=new URL(e),i={...fCr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=hCr(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(oCr(i.body)){let u=new sCr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":iCr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):tCr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Zyr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await gCr(t.socketFactory,n,i,t.alpnProtocols):await mCr(t,n,a);switch(c_e(`${n.host} -> ${c}`),c){case u_e:try{return await Boe.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case d_e:return Boe.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case f_e:case Dk:return l_e.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),yCr=s(async t=>(t.alpnCache.clear(),Promise.all([l_e.resetContext(t),Boe.resetContext(t)])),"resetContext"),CCr=s(t=>{let{options:{alpnProtocols:e=uCr,alpnCacheTTL:r=lCr,alpnCacheSize:n=cCr,userAgent:i=dCr,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new rCr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,l_e.setupContext(t),Boe.setupContext(t)},"setupContext");xpt.exports={request:ACr,setupContext:CCr,resetContext:yCr,RequestAbortedError:Doe,ALPN_HTTP2:u_e,ALPN_HTTP2C:d_e,ALPN_HTTP1_1:Dk,ALPN_HTTP1_0:f_e}});var Tpt=q((lao,Ipt)=>{"use strict";f();var vCr=Wy()("helix-fetch:core"),{request:ECr,setupContext:xCr,resetContext:bCr,RequestAbortedError:ICr,ALPN_HTTP2:TCr,ALPN_HTTP2C:wCr,ALPN_HTTP1_1:SCr,ALPN_HTTP1_0:_Cr}=bpt(),p_e=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},xCr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:ICr,ALPN_HTTP2:TCr,ALPN_HTTP2C:wCr,ALPN_HTTP1_1:SCr,ALPN_HTTP1_0:_Cr}}async request(e,r){return ECr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return vCr("resetting context"),bCr(this)}};Ipt.exports=new p_e().api()});var kpt=q((fao,Rpt)=>{"use strict";f();var{EventEmitter:RCr}=require("events"),{Readable:gU}=require("stream"),m_e=Wy()("helix-fetch"),kCr=KSe(),{Body:PCr}=Ioe(),{Headers:y_e}=u8(),{Request:Bk}=Y0t(),{Response:g_e}=n_e(),{FetchBaseError:DCr,FetchError:AU,AbortError:Noe}=ZSe(),{AbortController:BCr,AbortSignal:NCr,TimeoutSignal:LCr}=e_e(),MCr=rpt(),{cacheableResponse:FCr}=opt(),{sizeof:OCr}=nx(),{isFormData:QCr}=mU(),{context:UCr,RequestAbortedError:qCr}=Tpt(),wpt=["GET","HEAD"],HCr=500,WCr=100*1024*1024,h_e="push",Spt=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof Bk&&typeof r>"u"?e:new Bk(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let D=new Noe("The operation was aborted.");throw i.init.body instanceof gU&&i.init.body.destroy(D),D}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof gU)&&!QCr(m)?m:a,compress:l,decode:u,follow:d,redirect:p,signal:c})}catch(D){throw m instanceof gU&&m.destroy(D),D instanceof TypeError?D:D instanceof qCr?new Noe("The operation was aborted."):new AU(D.message,"system",D)}let g=s(()=>{c.removeEventListener("abort",g);let D=new Noe("The operation was aborted.");i.init.body instanceof gU&&i.init.body.destroy(D),h.readable.emit("error",D)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:A,statusText:y,httpVersion:E,headers:b,readable:w,decoded:R}=h;if([301,302,303,307,308].includes(A)){let{location:D}=b,N=D==null?null:new URL(D,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new AU(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new AU(`maximum redirect reached at: ${i.url}`,"max-redirect");let O={headers:new y_e(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(A!==303&&i.body&&i.init.body instanceof gU)throw c&&c.removeEventListener("abort",g),new AU("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(A===303||(A===301||A===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),c&&c.removeEventListener("abort",g),Spt(t,new Bk(N,O))}default:}}return c&&(w.once("end",()=>{c.removeEventListener("abort",g)}),w.once("error",()=>{c.removeEventListener("abort",g)})),new g_e(w,{url:i.url,status:A,statusText:y,headers:b,httpVersion:E,decoded:R,counter:i.counter})},"fetch"),_pt=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!wpt.includes(e.method))return r;let n=new MCr(e,r,{shared:!1});if(n.storable()){let i=await FCr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),$Cr=s(async(t,e,r)=>{let n=new Bk(e,r);if(t.options.maxCacheSize!==0&&wpt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new y_e(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await Spt(t,n);return n.cache!=="no-store"?_pt(t,n,o):o},"cachingFetch"),jCr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),GCr=s(t=>new LCr(t),"timeoutSignal"),A_e=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:WCr,i=HCr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>OCr(c),"sizeCalculation");this.cache=new kCr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new RCr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let d={...l};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(c,d,u)},this.options.h2.pushHandler=(c,l,u)=>{let d={...l};Object.keys(d).filter(E=>E.startsWith(":")).forEach(E=>delete d[E]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:A,decoded:y}=u;this.pushHandler(c,d,new g_e(A,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:y}))}),this.context=UCr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:PCr,Headers:y_e,Request:Bk,Response:g_e,AbortController:BCr,AbortSignal:NCr,FetchBaseError:DCr,FetchError:AU,AbortError:Noe,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:jCr,timeoutSignal:GCr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return $Cr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(h_e,e)}offPush(e){return this.eventEmitter.off(h_e,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){m_e(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new Bk(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(m_e(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){m_e(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await _pt(this,new Bk(e,{headers:r}),n);this.eventEmitter.emit(h_e,e,i)}};Rpt.exports=new A_e().api()});var Dpt=q((hao,Ppt)=>{"use strict";f();Ppt.exports=kpt()});var Fht=q((Fse,Mht)=>{f();(function(t,e){typeof Fse=="object"&&typeof Mht<"u"?e(Fse):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Fse,function(t){"use strict";function e(){for(var F=arguments.length,B=Array(F),Z=0;Z<F;Z++)B[Z]=arguments[Z];if(B.length>1){B[0]=B[0].slice(0,-1);for(var ge=B.length-1,_e=1;_e<ge;++_e)B[_e]=B[_e].slice(1,-1);return B[ge]=B[ge].slice(1),B.join("")}else return B[0]}s(e,"merge");function r(F){return"(?:"+F+")"}s(r,"subexp");function n(F){return F===void 0?"undefined":F===null?"null":Object.prototype.toString.call(F).split(" ").pop().split("]").shift().toLowerCase()}s(n,"typeOf");function i(F){return F.toUpperCase()}s(i,"toUpperCase");function o(F){return F!=null?F instanceof Array?F:typeof F.length!="number"||F.split||F.setInterval||F.call?[F]:Array.prototype.slice.call(F):[]}s(o,"toArray");function a(F,B){var Z=F;if(B)for(var ge in B)Z[ge]=B[ge];return Z}s(a,"assign");function c(F){var B="[A-Za-z]",Z="[\\x0D]",ge="[0-9]",_e="[\\x22]",ut=e(ge,"[A-Fa-f]"),St="[\\x0A]",zt="[\\x20]",Zt=r(r("%[EFef]"+ut+"%"+ut+ut+"%"+ut+ut)+"|"+r("%[89A-Fa-f]"+ut+"%"+ut+ut)+"|"+r("%"+ut+ut)),Yt="[\\:\\/\\?\\#\\[\\]\\@]",xt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ar=e(Yt,xt),si=F?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ji=F?"[\\uE000-\\uF8FF]":"[]",xn=e(B,ge,"[\\-\\.\\_\\~]",si),uo=r(B+e(B,ge,"[\\+\\-\\.]")+"*"),gi=r(r(Zt+"|"+e(xn,xt,"[\\:]"))+"*"),Vo=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("[1-9]"+ge)+"|"+ge),ua=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),cc=r(ua+"\\."+ua+"\\."+ua+"\\."+ua),ko=r(ut+"{1,4}"),Qs=r(r(ko+"\\:"+ko)+"|"+cc),Xu=r(r(ko+"\\:")+"{6}"+Qs),lc=r("\\:\\:"+r(ko+"\\:")+"{5}"+Qs),Vh=r(r(ko)+"?\\:\\:"+r(ko+"\\:")+"{4}"+Qs),ll=r(r(r(ko+"\\:")+"{0,1}"+ko)+"?\\:\\:"+r(ko+"\\:")+"{3}"+Qs),zh=r(r(r(ko+"\\:")+"{0,2}"+ko)+"?\\:\\:"+r(ko+"\\:")+"{2}"+Qs),Yh=r(r(r(ko+"\\:")+"{0,3}"+ko)+"?\\:\\:"+ko+"\\:"+Qs),mx=r(r(r(ko+"\\:")+"{0,4}"+ko)+"?\\:\\:"+Qs),Sa=r(r(r(ko+"\\:")+"{0,5}"+ko)+"?\\:\\:"+ko),du=r(r(r(ko+"\\:")+"{0,6}"+ko)+"?\\:\\:"),fu=r([Xu,lc,Vh,ll,zh,Yh,mx,Sa,du].join("|")),Zu=r(r(xn+"|"+Zt)+"+"),Kh=r(fu+"\\%25"+Zu),Nl=r(fu+r("\\%25|\\%(?!"+ut+"{2})")+Zu),hx=r("[vV]"+ut+"+\\."+e(xn,xt,"[\\:]")+"+"),w1=r("\\["+r(Nl+"|"+fu+"|"+hx)+"\\]"),gx=r(r(Zt+"|"+e(xn,xt))+"*"),If=r(w1+"|"+cc+"(?!"+gx+")|"+gx),Tf=r(ge+"*"),$r=r(r(gi+"@")+"?"+If+r("\\:"+Tf)+"?"),uc=r(Zt+"|"+e(xn,xt,"[\\:\\@]")),Jh=r(uc+"*"),Xh=r(uc+"+"),L8=r(r(Zt+"|"+e(xn,xt,"[\\@]"))+"+"),Dc=r(r("\\/"+Jh)+"*"),VA=r("\\/"+r(Xh+Dc)+"?"),S1=r(L8+Dc),Kp=r(Xh+Dc),zA="(?!"+uc+")",Ax=r(Dc+"|"+VA+"|"+S1+"|"+Kp+"|"+zA),gs=r(r(uc+"|"+e("[\\/\\?]",Ji))+"*"),ed=r(r(uc+"|[\\/\\?]")+"*"),YA=r(r("\\/\\/"+$r+Dc)+"|"+VA+"|"+Kp+"|"+zA),c5=r(uo+"\\:"+YA+r("\\?"+gs)+"?"+r("\\#"+ed)+"?"),M8=r(r("\\/\\/"+$r+Dc)+"|"+VA+"|"+S1+"|"+zA),Xi=r(M8+r("\\?"+gs)+"?"+r("\\#"+ed)+"?"),KA=r(c5+"|"+Xi),Zh=r(uo+"\\:"+YA+r("\\?"+gs)+"?"),l5="^("+uo+")\\:"+r(r("\\/\\/("+r("("+gi+")@")+"?("+If+")"+r("\\:("+Tf+")")+"?)")+"?("+Dc+"|"+VA+"|"+Kp+"|"+zA+")")+r("\\?("+gs+")")+"?"+r("\\#("+ed+")")+"?$",yx="^(){0}"+r(r("\\/\\/("+r("("+gi+")@")+"?("+If+")"+r("\\:("+Tf+")")+"?)")+"?("+Dc+"|"+VA+"|"+S1+"|"+zA+")")+r("\\?("+gs+")")+"?"+r("\\#("+ed+")")+"?$",td="^("+uo+")\\:"+r(r("\\/\\/("+r("("+gi+")@")+"?("+If+")"+r("\\:("+Tf+")")+"?)")+"?("+Dc+"|"+VA+"|"+Kp+"|"+zA+")")+r("\\?("+gs+")")+"?$",F8="^"+r("\\#("+ed+")")+"?$",O8="^"+r("("+gi+")@")+"?("+If+")"+r("\\:("+Tf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",B,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",xn,xt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",xn,xt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",xn,xt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",xn,xt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",xn,xt,"[\\:\\@\\/\\?]",Ji),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",xn,xt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",xn,xt),"g"),UNRESERVED:new RegExp(xn,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",xn,Ar),"g"),PCT_ENCODED:new RegExp(Zt,"g"),IPV4ADDRESS:new RegExp("^("+cc+")$"),IPV6ADDRESS:new RegExp("^\\[?("+fu+")"+r(r("\\%25|\\%(?!"+ut+"{2})")+"("+Zu+")")+"?\\]?$")}}s(c,"buildExps");var l=c(!1),u=c(!0),d=function(){function F(B,Z){var ge=[],_e=!0,ut=!1,St=void 0;try{for(var zt=B[Symbol.iterator](),Zt;!(_e=(Zt=zt.next()).done)&&(ge.push(Zt.value),!(Z&&ge.length===Z));_e=!0);}catch(Yt){ut=!0,St=Yt}finally{try{!_e&&zt.return&&zt.return()}finally{if(ut)throw St}}return ge}return s(F,"sliceIterator"),function(B,Z){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return F(B,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=s(function(F){if(Array.isArray(F)){for(var B=0,Z=Array(F.length);B<F.length;B++)Z[B]=F[B];return Z}else return Array.from(F)},"toConsumableArray"),m=2147483647,h=36,g=1,A=26,y=38,E=700,b=72,w=128,R="-",D=/^xn--/,N=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ee=h-g,V=Math.floor,H=String.fromCharCode;function U(F){throw new RangeError(Y[F])}s(U,"error$1");function X(F,B){for(var Z=[],ge=F.length;ge--;)Z[ge]=B(F[ge]);return Z}s(X,"map");function K(F,B){var Z=F.split("@"),ge="";Z.length>1&&(ge=Z[0]+"@",F=Z[1]),F=F.replace(O,".");var _e=F.split("."),ut=X(_e,B).join(".");return ge+ut}s(K,"mapDomain");function j(F){for(var B=[],Z=0,ge=F.length;Z<ge;){var _e=F.charCodeAt(Z++);if(_e>=55296&&_e<=56319&&Z<ge){var ut=F.charCodeAt(Z++);(ut&64512)==56320?B.push(((_e&1023)<<10)+(ut&1023)+65536):(B.push(_e),Z--)}else B.push(_e)}return B}s(j,"ucs2decode");var W=s(function(B){return String.fromCodePoint.apply(String,p(B))},"ucs2encode"),J=s(function(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:h},"basicToDigit"),ie=s(function(B,Z){return B+22+75*(B<26)-((Z!=0)<<5)},"digitToBasic"),ae=s(function(B,Z,ge){var _e=0;for(B=ge?V(B/E):B>>1,B+=V(B/Z);B>ee*A>>1;_e+=h)B=V(B/ee);return V(_e+(ee+1)*B/(B+y))},"adapt"),te=s(function(B){var Z=[],ge=B.length,_e=0,ut=w,St=b,zt=B.lastIndexOf(R);zt<0&&(zt=0);for(var Zt=0;Zt<zt;++Zt)B.charCodeAt(Zt)>=128&&U("not-basic"),Z.push(B.charCodeAt(Zt));for(var Yt=zt>0?zt+1:0;Yt<ge;){for(var xt=_e,Ar=1,si=h;;si+=h){Yt>=ge&&U("invalid-input");var Ji=J(B.charCodeAt(Yt++));(Ji>=h||Ji>V((m-_e)/Ar))&&U("overflow"),_e+=Ji*Ar;var xn=si<=St?g:si>=St+A?A:si-St;if(Ji<xn)break;var uo=h-xn;Ar>V(m/uo)&&U("overflow"),Ar*=uo}var gi=Z.length+1;St=ae(_e-xt,gi,xt==0),V(_e/gi)>m-ut&&U("overflow"),ut+=V(_e/gi),_e%=gi,Z.splice(_e++,0,ut)}return String.fromCodePoint.apply(String,Z)},"decode"),pe=s(function(B){var Z=[];B=j(B);var ge=B.length,_e=w,ut=0,St=b,zt=!0,Zt=!1,Yt=void 0;try{for(var xt=B[Symbol.iterator](),Ar;!(zt=(Ar=xt.next()).done);zt=!0){var si=Ar.value;si<128&&Z.push(H(si))}}catch(Nl){Zt=!0,Yt=Nl}finally{try{!zt&&xt.return&&xt.return()}finally{if(Zt)throw Yt}}var Ji=Z.length,xn=Ji;for(Ji&&Z.push(R);xn<ge;){var uo=m,gi=!0,Vo=!1,ua=void 0;try{for(var cc=B[Symbol.iterator](),ko;!(gi=(ko=cc.next()).done);gi=!0){var Qs=ko.value;Qs>=_e&&Qs<uo&&(uo=Qs)}}catch(Nl){Vo=!0,ua=Nl}finally{try{!gi&&cc.return&&cc.return()}finally{if(Vo)throw ua}}var Xu=xn+1;uo-_e>V((m-ut)/Xu)&&U("overflow"),ut+=(uo-_e)*Xu,_e=uo;var lc=!0,Vh=!1,ll=void 0;try{for(var zh=B[Symbol.iterator](),Yh;!(lc=(Yh=zh.next()).done);lc=!0){var mx=Yh.value;if(mx<_e&&++ut>m&&U("overflow"),mx==_e){for(var Sa=ut,du=h;;du+=h){var fu=du<=St?g:du>=St+A?A:du-St;if(Sa<fu)break;var Zu=Sa-fu,Kh=h-fu;Z.push(H(ie(fu+Zu%Kh,0))),Sa=V(Zu/Kh)}Z.push(H(ie(Sa,0))),St=ae(ut,Xu,xn==Ji),ut=0,++xn}}}catch(Nl){Vh=!0,ll=Nl}finally{try{!lc&&zh.return&&zh.return()}finally{if(Vh)throw ll}}++ut,++_e}return Z.join("")},"encode"),Ae=s(function(B){return K(B,function(Z){return D.test(Z)?te(Z.slice(4).toLowerCase()):Z})},"toUnicode"),Oe=s(function(B){return K(B,function(Z){return N.test(Z)?"xn--"+pe(Z):Z})},"toASCII"),Te={version:"2.1.0",ucs2:{decode:j,encode:W},decode:te,encode:pe,toASCII:Oe,toUnicode:Ae},Je={};function Me(F){var B=F.charCodeAt(0),Z=void 0;return B<16?Z="%0"+B.toString(16).toUpperCase():B<128?Z="%"+B.toString(16).toUpperCase():B<2048?Z="%"+(B>>6|192).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase():Z="%"+(B>>12|224).toString(16).toUpperCase()+"%"+(B>>6&63|128).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase(),Z}s(Me,"pctEncChar");function lt(F){for(var B="",Z=0,ge=F.length;Z<ge;){var _e=parseInt(F.substr(Z+1,2),16);if(_e<128)B+=String.fromCharCode(_e),Z+=3;else if(_e>=194&&_e<224){if(ge-Z>=6){var ut=parseInt(F.substr(Z+4,2),16);B+=String.fromCharCode((_e&31)<<6|ut&63)}else B+=F.substr(Z,6);Z+=6}else if(_e>=224){if(ge-Z>=9){var St=parseInt(F.substr(Z+4,2),16),zt=parseInt(F.substr(Z+7,2),16);B+=String.fromCharCode((_e&15)<<12|(St&63)<<6|zt&63)}else B+=F.substr(Z,9);Z+=9}else B+=F.substr(Z,3),Z+=3}return B}s(lt,"pctDecChars");function _t(F,B){function Z(ge){var _e=lt(ge);return _e.match(B.UNRESERVED)?_e:ge}return s(Z,"decodeUnreserved"),F.scheme&&(F.scheme=String(F.scheme).replace(B.PCT_ENCODED,Z).toLowerCase().replace(B.NOT_SCHEME,"")),F.userinfo!==void 0&&(F.userinfo=String(F.userinfo).replace(B.PCT_ENCODED,Z).replace(B.NOT_USERINFO,Me).replace(B.PCT_ENCODED,i)),F.host!==void 0&&(F.host=String(F.host).replace(B.PCT_ENCODED,Z).toLowerCase().replace(B.NOT_HOST,Me).replace(B.PCT_ENCODED,i)),F.path!==void 0&&(F.path=String(F.path).replace(B.PCT_ENCODED,Z).replace(F.scheme?B.NOT_PATH:B.NOT_PATH_NOSCHEME,Me).replace(B.PCT_ENCODED,i)),F.query!==void 0&&(F.query=String(F.query).replace(B.PCT_ENCODED,Z).replace(B.NOT_QUERY,Me).replace(B.PCT_ENCODED,i)),F.fragment!==void 0&&(F.fragment=String(F.fragment).replace(B.PCT_ENCODED,Z).replace(B.NOT_FRAGMENT,Me).replace(B.PCT_ENCODED,i)),F}s(_t,"_normalizeComponentEncoding");function vt(F){return F.replace(/^0*(.*)/,"$1")||"0"}s(vt,"_stripLeadingZeros");function ht(F,B){var Z=F.match(B.IPV4ADDRESS)||[],ge=d(Z,2),_e=ge[1];return _e?_e.split(".").map(vt).join("."):F}s(ht,"_normalizeIPv4");function ue(F,B){var Z=F.match(B.IPV6ADDRESS)||[],ge=d(Z,3),_e=ge[1],ut=ge[2];if(_e){for(var St=_e.toLowerCase().split("::").reverse(),zt=d(St,2),Zt=zt[0],Yt=zt[1],xt=Yt?Yt.split(":").map(vt):[],Ar=Zt.split(":").map(vt),si=B.IPV4ADDRESS.test(Ar[Ar.length-1]),Ji=si?7:8,xn=Ar.length-Ji,uo=Array(Ji),gi=0;gi<Ji;++gi)uo[gi]=xt[gi]||Ar[xn+gi]||"";si&&(uo[Ji-1]=ht(uo[Ji-1],B));var Vo=uo.reduce(function(Xu,lc,Vh){if(!lc||lc==="0"){var ll=Xu[Xu.length-1];ll&&ll.index+ll.length===Vh?ll.length++:Xu.push({index:Vh,length:1})}return Xu},[]),ua=Vo.sort(function(Xu,lc){return lc.length-Xu.length})[0],cc=void 0;if(ua&&ua.length>1){var ko=uo.slice(0,ua.index),Qs=uo.slice(ua.index+ua.length);cc=ko.join(":")+"::"+Qs.join(":")}else cc=uo.join(":");return ut&&(cc+="%"+ut),cc}else return F}s(ue,"_normalizeIPv6");var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ye="".match(/(){0}/)[1]===void 0;function We(F){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z={},ge=B.iri!==!1?u:l;B.reference==="suffix"&&(F=(B.scheme?B.scheme+":":"")+"//"+F);var _e=F.match(Ue);if(_e){ye?(Z.scheme=_e[1],Z.userinfo=_e[3],Z.host=_e[4],Z.port=parseInt(_e[5],10),Z.path=_e[6]||"",Z.query=_e[7],Z.fragment=_e[8],isNaN(Z.port)&&(Z.port=_e[5])):(Z.scheme=_e[1]||void 0,Z.userinfo=F.indexOf("@")!==-1?_e[3]:void 0,Z.host=F.indexOf("//")!==-1?_e[4]:void 0,Z.port=parseInt(_e[5],10),Z.path=_e[6]||"",Z.query=F.indexOf("?")!==-1?_e[7]:void 0,Z.fragment=F.indexOf("#")!==-1?_e[8]:void 0,isNaN(Z.port)&&(Z.port=F.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_e[4]:void 0)),Z.host&&(Z.host=ue(ht(Z.host,ge),ge)),Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&!Z.path&&Z.query===void 0?Z.reference="same-document":Z.scheme===void 0?Z.reference="relative":Z.fragment===void 0?Z.reference="absolute":Z.reference="uri",B.reference&&B.reference!=="suffix"&&B.reference!==Z.reference&&(Z.error=Z.error||"URI is not a "+B.reference+" reference.");var ut=Je[(B.scheme||Z.scheme||"").toLowerCase()];if(!B.unicodeSupport&&(!ut||!ut.unicodeSupport)){if(Z.host&&(B.domainHost||ut&&ut.domainHost))try{Z.host=Te.toASCII(Z.host.replace(ge.PCT_ENCODED,lt).toLowerCase())}catch(St){Z.error=Z.error||"Host's domain name can not be converted to ASCII via punycode: "+St}_t(Z,l)}else _t(Z,ge);ut&&ut.parse&&ut.parse(Z,B)}else Z.error=Z.error||"URI can not be parsed.";return Z}s(We,"parse");function se(F,B){var Z=B.iri!==!1?u:l,ge=[];return F.userinfo!==void 0&&(ge.push(F.userinfo),ge.push("@")),F.host!==void 0&&ge.push(ue(ht(String(F.host),Z),Z).replace(Z.IPV6ADDRESS,function(_e,ut,St){return"["+ut+(St?"%25"+St:"")+"]"})),(typeof F.port=="number"||typeof F.port=="string")&&(ge.push(":"),ge.push(String(F.port))),ge.length?ge.join(""):void 0}s(se,"_recomposeAuthority");var le=/^\.\.?\//,qe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,xe=/^\/?(?:.|\n)*?(?=\/|$)/;function je(F){for(var B=[];F.length;)if(F.match(le))F=F.replace(le,"");else if(F.match(qe))F=F.replace(qe,"/");else if(F.match(Be))F=F.replace(Be,"/"),B.pop();else if(F==="."||F==="..")F="";else{var Z=F.match(xe);if(Z){var ge=Z[0];F=F.slice(ge.length),B.push(ge)}else throw new Error("Unexpected dot segment condition")}return B.join("")}s(je,"removeDotSegments");function et(F){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=B.iri?u:l,ge=[],_e=Je[(B.scheme||F.scheme||"").toLowerCase()];if(_e&&_e.serialize&&_e.serialize(F,B),F.host&&!Z.IPV6ADDRESS.test(F.host)){if(B.domainHost||_e&&_e.domainHost)try{F.host=B.iri?Te.toUnicode(F.host):Te.toASCII(F.host.replace(Z.PCT_ENCODED,lt).toLowerCase())}catch(zt){F.error=F.error||"Host's domain name can not be converted to "+(B.iri?"Unicode":"ASCII")+" via punycode: "+zt}}_t(F,Z),B.reference!=="suffix"&&F.scheme&&(ge.push(F.scheme),ge.push(":"));var ut=se(F,B);if(ut!==void 0&&(B.reference!=="suffix"&&ge.push("//"),ge.push(ut),F.path&&F.path.charAt(0)!=="/"&&ge.push("/")),F.path!==void 0){var St=F.path;!B.absolutePath&&(!_e||!_e.absolutePath)&&(St=je(St)),ut===void 0&&(St=St.replace(/^\/\//,"/%2F")),ge.push(St)}return F.query!==void 0&&(ge.push("?"),ge.push(F.query)),F.fragment!==void 0&&(ge.push("#"),ge.push(F.fragment)),ge.join("")}s(et,"serialize");function pt(F,B){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=arguments[3],_e={};return ge||(F=We(et(F,Z),Z),B=We(et(B,Z),Z)),Z=Z||{},!Z.tolerant&&B.scheme?(_e.scheme=B.scheme,_e.userinfo=B.userinfo,_e.host=B.host,_e.port=B.port,_e.path=je(B.path||""),_e.query=B.query):(B.userinfo!==void 0||B.host!==void 0||B.port!==void 0?(_e.userinfo=B.userinfo,_e.host=B.host,_e.port=B.port,_e.path=je(B.path||""),_e.query=B.query):(B.path?(B.path.charAt(0)==="/"?_e.path=je(B.path):((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path?_e.path="/"+B.path:F.path?_e.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+B.path:_e.path=B.path,_e.path=je(_e.path)),_e.query=B.query):(_e.path=F.path,B.query!==void 0?_e.query=B.query:_e.query=F.query),_e.userinfo=F.userinfo,_e.host=F.host,_e.port=F.port),_e.scheme=F.scheme),_e.fragment=B.fragment,_e}s(pt,"resolveComponents");function Mt(F,B,Z){var ge=a({scheme:"null"},Z);return et(pt(We(F,ge),We(B,ge),ge,!0),ge)}s(Mt,"resolve");function Kt(F,B){return typeof F=="string"?F=et(We(F,B),B):n(F)==="object"&&(F=We(et(F,B),B)),F}s(Kt,"normalize");function Ot(F,B,Z){return typeof F=="string"?F=et(We(F,Z),Z):n(F)==="object"&&(F=et(F,Z)),typeof B=="string"?B=et(We(B,Z),Z):n(B)==="object"&&(B=et(B,Z)),F===B}s(Ot,"equal");function Hr(F,B){return F&&F.toString().replace(!B||!B.iri?l.ESCAPE:u.ESCAPE,Me)}s(Hr,"escapeComponent");function Rr(F,B){return F&&F.toString().replace(!B||!B.iri?l.PCT_ENCODED:u.PCT_ENCODED,lt)}s(Rr,"unescapeComponent");var on={scheme:"http",domainHost:!0,parse:s(function(B,Z){return B.host||(B.error=B.error||"HTTP URIs must have a host."),B},"parse"),serialize:s(function(B,Z){var ge=String(B.scheme).toLowerCase()==="https";return(B.port===(ge?443:80)||B.port==="")&&(B.port=void 0),B.path||(B.path="/"),B},"serialize")},ve={scheme:"https",domainHost:on.domainHost,parse:on.parse,serialize:on.serialize};function Ge(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}s(Ge,"isSecure");var ft={scheme:"ws",domainHost:!0,parse:s(function(B,Z){var ge=B;return ge.secure=Ge(ge),ge.resourceName=(ge.path||"/")+(ge.query?"?"+ge.query:""),ge.path=void 0,ge.query=void 0,ge},"parse"),serialize:s(function(B,Z){if((B.port===(Ge(B)?443:80)||B.port==="")&&(B.port=void 0),typeof B.secure=="boolean"&&(B.scheme=B.secure?"wss":"ws",B.secure=void 0),B.resourceName){var ge=B.resourceName.split("?"),_e=d(ge,2),ut=_e[0],St=_e[1];B.path=ut&&ut!=="/"?ut:void 0,B.query=St,B.resourceName=void 0}return B.fragment=void 0,B},"serialize")},Tt={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},nr={},Xt=!0,br="[A-Za-z0-9\\-\\.\\_\\~"+(Xt?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",cr="[0-9A-Fa-f]",er=r(r("%[EFef]"+cr+"%"+cr+cr+"%"+cr+cr)+"|"+r("%[89A-Fa-f]"+cr+"%"+cr+cr)+"|"+r("%"+cr+cr)),ar="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",tr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Pr=e(tr,'[\\"\\\\]'),Wr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",en=new RegExp(br,"g"),gn=new RegExp(er,"g"),Zn=new RegExp(e("[^]",ar,"[\\.]",'[\\"]',Pr),"g"),In=new RegExp(e("[^]",br,Wr),"g"),Jn=In;function tn(F){var B=lt(F);return B.match(en)?B:F}s(tn,"decodeUnreserved");var Vn={scheme:"mailto",parse:s(function(B,Z){var ge=B,_e=ge.to=ge.path?ge.path.split(","):[];if(ge.path=void 0,ge.query){for(var ut=!1,St={},zt=ge.query.split("&"),Zt=0,Yt=zt.length;Zt<Yt;++Zt){var xt=zt[Zt].split("=");switch(xt[0]){case"to":for(var Ar=xt[1].split(","),si=0,Ji=Ar.length;si<Ji;++si)_e.push(Ar[si]);break;case"subject":ge.subject=Rr(xt[1],Z);break;case"body":ge.body=Rr(xt[1],Z);break;default:ut=!0,St[Rr(xt[0],Z)]=Rr(xt[1],Z);break}}ut&&(ge.headers=St)}ge.query=void 0;for(var xn=0,uo=_e.length;xn<uo;++xn){var gi=_e[xn].split("@");if(gi[0]=Rr(gi[0]),Z.unicodeSupport)gi[1]=Rr(gi[1],Z).toLowerCase();else try{gi[1]=Te.toASCII(Rr(gi[1],Z).toLowerCase())}catch(Vo){ge.error=ge.error||"Email address's domain name can not be converted to ASCII via punycode: "+Vo}_e[xn]=gi.join("@")}return ge},"parse$$1"),serialize:s(function(B,Z){var ge=B,_e=o(B.to);if(_e){for(var ut=0,St=_e.length;ut<St;++ut){var zt=String(_e[ut]),Zt=zt.lastIndexOf("@"),Yt=zt.slice(0,Zt).replace(gn,tn).replace(gn,i).replace(Zn,Me),xt=zt.slice(Zt+1);try{xt=Z.iri?Te.toUnicode(xt):Te.toASCII(Rr(xt,Z).toLowerCase())}catch(xn){ge.error=ge.error||"Email address's domain name can not be converted to "+(Z.iri?"Unicode":"ASCII")+" via punycode: "+xn}_e[ut]=Yt+"@"+xt}ge.path=_e.join(",")}var Ar=B.headers=B.headers||{};B.subject&&(Ar.subject=B.subject),B.body&&(Ar.body=B.body);var si=[];for(var Ji in Ar)Ar[Ji]!==nr[Ji]&&si.push(Ji.replace(gn,tn).replace(gn,i).replace(In,Me)+"="+Ar[Ji].replace(gn,tn).replace(gn,i).replace(Jn,Me));return si.length&&(ge.query=si.join("&")),ge},"serialize$$1")},Pe=/^([^\:]+)\:(.*)/,z={scheme:"urn",parse:s(function(B,Z){var ge=B.path&&B.path.match(Pe),_e=B;if(ge){var ut=Z.scheme||_e.scheme||"urn",St=ge[1].toLowerCase(),zt=ge[2],Zt=ut+":"+(Z.nid||St),Yt=Je[Zt];_e.nid=St,_e.nss=zt,_e.path=void 0,Yt&&(_e=Yt.parse(_e,Z))}else _e.error=_e.error||"URN can not be parsed.";return _e},"parse$$1"),serialize:s(function(B,Z){var ge=Z.scheme||B.scheme||"urn",_e=B.nid,ut=ge+":"+(Z.nid||_e),St=Je[ut];St&&(B=St.serialize(B,Z));var zt=B,Zt=B.nss;return zt.path=(_e||Z.nid)+":"+Zt,zt},"serialize$$1")},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:s(function(B,Z){var ge=B;return ge.uuid=ge.nss,ge.nss=void 0,!Z.tolerant&&(!ge.uuid||!ge.uuid.match(Ce))&&(ge.error=ge.error||"UUID is not valid."),ge},"parse"),serialize:s(function(B,Z){var ge=B;return ge.nss=(B.uuid||"").toLowerCase(),ge},"serialize")};Je[on.scheme]=on,Je[ve.scheme]=ve,Je[ft.scheme]=ft,Je[Tt.scheme]=Tt,Je[Vn.scheme]=Vn,Je[z.scheme]=z,Je[Ie.scheme]=Ie,t.SCHEMES=Je,t.pctEncChar=Me,t.pctDecChars=lt,t.parse=We,t.removeDotSegments=je,t.serialize=et,t.resolveComponents=pt,t.resolve=Mt,t.normalize=Kt,t.equal=Ot,t.escapeComponent=Hr,t.unescapeComponent=Rr,Object.defineProperty(t,"__esModule",{value:!0})})});var Ose=q((g1o,Oht)=>{"use strict";f();Oht.exports=s(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},"equal")});var Uht=q((C1o,Qht)=>{"use strict";f();Qht.exports=s(function(e){for(var r=0,n=e.length,i=0,o;i<n;)r++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return r},"ucs2length")});var t5=q((x1o,Wht)=>{"use strict";f();Wht.exports={copy:ebr,checkDataType:p2e,checkDataTypes:tbr,coerceToTypes:rbr,toHash:h2e,getProperty:g2e,escapeQuotes:A2e,equal:Ose(),ucs2length:Uht(),varOccurences:obr,varReplace:sbr,schemaHasRules:abr,schemaHasRulesExcept:cbr,schemaUnknownRules:lbr,toQuotedString:m2e,getPathExpr:ubr,getPath:dbr,getData:mbr,unescapeFragment:hbr,unescapeJsonPointer:C2e,escapeFragment:gbr,escapeJsonPointer:y2e};function ebr(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}s(ebr,"copy");function p2e(t,e,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",a=n?"!":"",c=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+o+"typeof "+e+i+'"object"'+o+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+c+"("+e+" % 1)"+o+e+i+e+(r?o+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+t+'"'+(r?o+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+t+'"'}}s(p2e,"checkDataType");function tbr(t,e,r){switch(t.length){case 1:return p2e(t[0],e,r,!0);default:var n="",i=h2e(t);i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)n+=(n?" && ":"")+p2e(o,e,r,!0);return n}}s(tbr,"checkDataTypes");var qht=h2e(["string","number","integer","boolean","null"]);function rbr(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];(qht[i]||t==="array"&&i==="array")&&(r[r.length]=i)}if(r.length)return r}else{if(qht[e])return[e];if(t==="array"&&e==="array")return["array"]}}s(rbr,"coerceToTypes");function h2e(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}s(h2e,"toHash");var nbr=/^[a-z$_][a-z$_0-9]*$/i,ibr=/'|\\/g;function g2e(t){return typeof t=="number"?"["+t+"]":nbr.test(t)?"."+t:"['"+A2e(t)+"']"}s(g2e,"getProperty");function A2e(t){return t.replace(ibr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}s(A2e,"escapeQuotes");function obr(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}s(obr,"varOccurences");function sbr(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}s(sbr,"varReplace");function abr(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}s(abr,"schemaHasRules");function cbr(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}s(cbr,"schemaHasRulesExcept");function lbr(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}s(lbr,"schemaUnknownRules");function m2e(t){return"'"+A2e(t)+"'"}s(m2e,"toQuotedString");function ubr(t,e,r,n){var i=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Hht(t,i)}s(ubr,"getPathExpr");function dbr(t,e,r){var n=m2e(r?"/"+y2e(e):g2e(e));return Hht(t,n)}s(dbr,"getPath");var fbr=/^\/(?:[^~]|~0|~1)*$/,pbr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function mbr(t,e,r){var n,i,o,a;if(t==="")return"rootData";if(t[0]=="/"){if(!fbr.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,o="rootData"}else{if(a=t.match(pbr),!a)throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],i=a[2],i=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!i)return o}for(var c=o,l=i.split("/"),u=0;u<l.length;u++){var d=l[u];d&&(o+=g2e(C2e(d)),c+=" && "+o)}return c}s(mbr,"getData");function Hht(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}s(Hht,"joinPaths");function hbr(t){return C2e(decodeURIComponent(t))}s(hbr,"unescapeFragment");function gbr(t){return encodeURIComponent(y2e(t))}s(gbr,"escapeFragment");function y2e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(y2e,"escapeJsonPointer");function C2e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}s(C2e,"unescapeJsonPointer")});var v2e=q((T1o,$ht)=>{"use strict";f();var Abr=t5();$ht.exports=ybr;function ybr(t){Abr.copy(t,this)}s(ybr,"SchemaObject")});var Ght=q((_1o,jht)=>{"use strict";f();var jw=jht.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Qse(e,n,i,t,"",t)};jw.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};jw.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};jw.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};jw.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Qse(t,e,r,n,i,o,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,a,c,l,u);for(var d in n){var p=n[d];if(Array.isArray(p)){if(d in jw.arrayKeywords)for(var m=0;m<p.length;m++)Qse(t,e,r,p[m],i+"/"+d+"/"+m,o,i,d,n,m)}else if(d in jw.propsKeywords){if(p&&typeof p=="object")for(var h in p)Qse(t,e,r,p[h],i+"/"+d+"/"+Cbr(h),o,i,d,n,h)}else(d in jw.keywords||t.allKeys&&!(d in jw.skipKeywords))&&Qse(t,e,r,p,i+"/"+d,o,i,d,n)}r(n,i,o,a,c,l,u)}}s(Qse,"_traverse");function Cbr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(Cbr,"escapeJsonPtr")});var jse=q((P1o,Kht)=>{"use strict";f();var LU=Fht(),Vht=Ose(),Wse=t5(),Use=v2e(),vbr=Ght();Kht.exports=Vw;Vw.normalizeId=Gw;Vw.fullPath=qse;Vw.url=Hse;Vw.ids=Tbr;Vw.inlineRef=E2e;Vw.schema=$se;function Vw(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return Vw.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof Use)return E2e(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i=$se.call(this,e,r),o,a,c;return i&&(o=i.schema,e=i.root,c=i.baseId),o instanceof Use?a=o.validate||t.call(this,o.schema,e,void 0,c):o!==void 0&&(a=E2e(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,c)),a}s(Vw,"resolve");function $se(t,e){var r=LU.parse(e),n=Yht(r),i=qse(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==i){var o=Gw(n),a=this._refs[o];if(typeof a=="string")return Ebr.call(this,t,a,r);if(a instanceof Use)a.validate||this._compile(a),t=a;else if(a=this._schemas[o],a instanceof Use){if(a.validate||this._compile(a),o==Gw(e))return{schema:a,root:t,baseId:i};t=a}else return;if(!t.schema)return;i=qse(this._getId(t.schema))}return zht.call(this,r,i,t.schema,t)}s($se,"resolveSchema");function Ebr(t,e,r){var n=$se.call(this,t,e);if(n){var i=n.schema,o=n.baseId;t=n.root;var a=this._getId(i);return a&&(o=Hse(o,a)),zht.call(this,r,o,i,t)}}s(Ebr,"resolveRecursive");var xbr=Wse.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function zht(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=Wse.unescapeFragment(a),r=r[a],r===void 0)break;var c;if(!xbr[a]&&(c=this._getId(r),c&&(e=Hse(e,c)),r.$ref)){var l=Hse(e,r.$ref),u=$se.call(this,n,l);u&&(r=u.schema,n=u.root,e=u.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}s(zht,"getJsonPointer");var bbr=Wse.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function E2e(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return x2e(t);if(e)return b2e(t)<=e}s(E2e,"inlineRef");function x2e(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!x2e(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!x2e(e)))return!1;return!0}s(x2e,"checkNoRef");function b2e(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=b2e(r)),e==1/0)return 1/0}else for(var i in t){if(i=="$ref")return 1/0;if(bbr[i])e++;else if(r=t[i],typeof r=="object"&&(e+=b2e(r)+1),e==1/0)return 1/0}return e}s(b2e,"countKeys");function qse(t,e){e!==!1&&(t=Gw(t));var r=LU.parse(t);return Yht(r)}s(qse,"getFullPath");function Yht(t){return LU.serialize(t).split("#")[0]+"#"}s(Yht,"_getFullPath");var Ibr=/#\/?$/;function Gw(t){return t?t.replace(Ibr,""):""}s(Gw,"normalizeId");function Hse(t,e){return e=Gw(e),LU.resolve(t,e)}s(Hse,"resolveUrl");function Tbr(t){var e=Gw(this._getId(t)),r={"":e},n={"":qse(e,!1)},i={},o=this;return vbr(t,{allKeys:!0},function(a,c,l,u,d,p,m){if(c!==""){var h=o._getId(a),g=r[u],A=n[u]+"/"+d;if(m!==void 0&&(A+="/"+(typeof m=="number"?m:Wse.escapeFragment(m))),typeof h=="string"){h=g=Gw(g?LU.resolve(g,h):h);var y=o._refs[h];if(typeof y=="string"&&(y=o._refs[y]),y&&y.schema){if(!Vht(a,y.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=Gw(A))if(h[0]=="#"){if(i[h]&&!Vht(a,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=a}else o._refs[h]=A}r[c]=g,n[c]=A}}),i}s(Tbr,"resolveIds")});var Gse=q((N1o,Xht)=>{"use strict";f();var I2e=jse();Xht.exports={Validation:Jht(wbr),MissingRef:Jht(T2e)};function wbr(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}s(wbr,"ValidationError");T2e.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function T2e(t,e,r){this.message=r||T2e.message(t,e),this.missingRef=I2e.url(t,e),this.missingSchema=I2e.normalizeId(I2e.fullPath(this.missingRef))}s(T2e,"MissingRefError");function Jht(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}s(Jht,"errorSubclass")});var w2e=q((F1o,Zht)=>{"use strict";f();Zht.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(o){return function(a){return function(c,l){var u={key:c,value:a[c]},d={key:l,value:a[l]};return o(u,d)}}}(e.cmp),i=[];return s(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=o(a[c])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,d=Object.keys(a).sort(n&&n(a));for(l="",c=0;c<d.length;c++){var p=d[c],m=o(a[p]);m&&(l&&(l+=","),l+=JSON.stringify(p)+":"+m)}return i.splice(u,1),"{"+l+"}"}},"stringify")(t)}});var S2e=q((U1o,egt)=>{"use strict";f();egt.exports=s(function(e,r,n){var i="",o=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var r="false schema",d=e.level,p=e.dataLevel,m=e.schema[r],h=e.schemaPath+e.util.getProperty(r),g=e.errSchemaPath+"/"+r,D=!e.opts.allErrors,Y,A="data"+(p||""),R="valid"+d;if(e.schema===!1){e.isTop?D=!0:i+=" var "+R+" = false; ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&D?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+R+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var b=e.isTop,d=e.level=0,p=e.dataLevel=0,A="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var w="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(w);else throw new Error(w)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var d=e.level,p=e.dataLevel,A="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+d+" = errors;"}var R="valid"+d,D=!e.opts.allErrors,N="",O="",Y,ee=e.schema.type,V=Array.isArray(ee);if(ee&&e.opts.nullable&&e.schema.nullable===!0&&(V?ee.indexOf("null")==-1&&(ee=ee.concat("null")):ee!="null"&&(ee=[ee,"null"],V=!0)),V&&ee.length==1&&(ee=ee[0],V=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),ee){if(e.opts.coerceTypes)var H=e.util.coerceToTypes(e.opts.coerceTypes,ee);var U=e.RULES.types[ee];if(H||V||U===!0||U&&!xe(U)){var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",h=e.schemaPath+".type",g=e.errSchemaPath+"/type",X=V?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[X](ee,A,e.opts.strictNumbers,!0)+") { ",H){var K="dataType"+d,j="coerced"+d;i+=" var "+K+" = typeof "+A+"; var "+j+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+K+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+K+" = typeof "+A+"; if ("+e.util.checkDataType(e.schema.type,A,e.opts.strictNumbers)+") "+j+" = "+A+"; } "),i+=" if ("+j+" !== undefined) ; ";var W=H;if(W)for(var J,ie=-1,ae=W.length-1;ie<ae;)J=W[ie+=1],J=="string"?i+=" else if ("+K+" == 'number' || "+K+" == 'boolean') "+j+" = '' + "+A+"; else if ("+A+" === null) "+j+" = ''; ":J=="number"||J=="integer"?(i+=" else if ("+K+" == 'boolean' || "+A+" === null || ("+K+" == 'string' && "+A+" && "+A+" == +"+A+" ",J=="integer"&&(i+=" && !("+A+" % 1)"),i+=")) "+j+" = +"+A+"; "):J=="boolean"?i+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+j+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+j+" = true; ":J=="null"?i+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+j+" = null; ":e.opts.coerceTypes=="array"&&J=="array"&&(i+=" else if ("+K+" == 'string' || "+K+" == 'number' || "+K+" == 'boolean' || "+A+" == null) "+j+" = ["+A+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&D?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+j+" !== undefined) {  ";var te=p?"data"+(p-1||""):"parentData",pe=p?e.dataPathArr[p]:"parentDataProperty";i+=" "+A+" = "+j+"; ",p||(i+="if ("+te+" !== undefined)"),i+=" "+te+"["+pe+"] = "+j+"; } "}else{var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&D?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",D&&(i+=" } if (errors === ",b?i+="0":i+="errs_"+d,i+=") { ",O+="}");else{var Ae=e.RULES;if(Ae){for(var U,Oe=-1,Te=Ae.length-1;Oe<Te;)if(U=Ae[Oe+=1],xe(U)){if(U.type&&(i+=" if ("+e.util.checkDataType(U.type,A,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(U.type=="object"&&e.schema.properties){var m=e.schema.properties,Je=Object.keys(m),Me=Je;if(Me)for(var lt,_t=-1,vt=Me.length-1;_t<vt;){lt=Me[_t+=1];var ht=m[lt];if(ht.default!==void 0){var ue=A+e.util.getProperty(lt);if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(w);else throw new Error(w)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}else if(U.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var ht,ie=-1,ye=Ue.length-1;ie<ye;)if(ht=Ue[ie+=1],ht.default!==void 0){var ue=A+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var w="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(w);else throw new Error(w)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}}var We=U.rules;if(We){for(var se,le=-1,qe=We.length-1;le<qe;)if(se=We[le+=1],je(se)){var Be=se.code(e,se.keyword,U.type);Be&&(i+=" "+Be+" ",D&&(N+="}"))}}if(D&&(i+=" "+N+" ",N=""),U.type&&(i+=" } ",ee&&ee===U.type&&!H)){i+=" else { ";var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&D?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}D&&(i+=" if (errors === ",b?i+="0":i+="errs_"+d,i+=") { ",O+="}")}}}D&&(i+=" "+O+" "),b?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+R+" = errors === errs_"+d+";";function xe(pt){for(var Mt=pt.rules,Kt=0;Kt<Mt.length;Kt++)if(je(Mt[Kt]))return!0}s(xe,"$shouldUseGroup");function je(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&et(pt)}s(je,"$shouldUseRule");function et(pt){for(var Mt=pt.implements,Kt=0;Kt<Mt.length;Kt++)if(e.schema[Mt[Kt]]!==void 0)return!0}return s(et,"$ruleImplementsSomeKeyword"),i},"generate_validate")});var ogt=q((W1o,igt)=>{"use strict";f();var Vse=jse(),Yse=t5(),rgt=Gse(),Sbr=w2e(),tgt=S2e(),_br=Yse.ucs2length,Rbr=Ose(),kbr=rgt.Validation;igt.exports=_2e;function _2e(t,e,r,n){var i=this,o=this._opts,a=[void 0],c={},l=[],u={},d=[],p={},m=[];e=e||{schema:t,refVal:a,refs:c};var h=Pbr.call(this,t,e,n),g=this._compilations[h.index];if(h.compiling)return g.callValidate=w;var A=this._formats,y=this.RULES;try{var E=R(t,e,r,n);g.validate=E;var b=g.callValidate;return b&&(b.schema=E.schema,b.errors=null,b.refs=E.refs,b.refVal=E.refVal,b.root=E.root,b.$async=E.$async,o.sourceCode&&(b.source=E.source)),E}finally{Dbr.call(this,t,e,n)}function w(){var X=g.validate,K=X.apply(this,arguments);return w.errors=X.errors,K}s(w,"callValidate");function R(X,K,j,W){var J=!K||K&&K.schema==X;if(K.schema!=e.schema)return _2e.call(i,X,K,j,W);var ie=X.$async===!0,ae=tgt({isTop:!0,schema:X,isRoot:J,baseId:W,root:K,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:rgt.MissingRef,RULES:y,validate:tgt,util:Yse,resolve:Vse,resolveRef:D,usePattern:V,useDefault:H,useCustomRule:U,opts:o,formats:A,logger:i.logger,self:i});ae=zse(a,Lbr)+zse(l,Bbr)+zse(d,Nbr)+zse(m,Mbr)+ae,o.processCode&&(ae=o.processCode(ae,X));var te;try{var pe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ae);te=pe(i,y,A,e,a,d,m,Rbr,_br,kbr),a[0]=te}catch(Ae){throw i.logger.error("Error compiling schema, function code:",ae),Ae}return te.schema=X,te.errors=null,te.refs=c,te.refVal=a,te.root=J?te:K,ie&&(te.$async=!0),o.sourceCode===!0&&(te.source={code:ae,patterns:l,defaults:d}),te}s(R,"localCompile");function D(X,K,j){K=Vse.url(X,K);var W=c[K],J,ie;if(W!==void 0)return J=a[W],ie="refVal["+W+"]",ee(J,ie);if(!j&&e.refs){var ae=e.refs[K];if(ae!==void 0)return J=e.refVal[ae],ie=N(K,J),ee(J,ie)}ie=N(K);var te=Vse.call(i,R,e,K);if(te===void 0){var pe=r&&r[K];pe&&(te=Vse.inlineRef(pe,o.inlineRefs)?pe:_2e.call(i,pe,e,r,X))}if(te===void 0)O(K);else return Y(K,te),ee(te,ie)}s(D,"resolveRef");function N(X,K){var j=a.length;return a[j]=K,c[X]=j,"refVal"+j}s(N,"addLocalRef");function O(X){delete c[X]}s(O,"removeLocalRef");function Y(X,K){var j=c[X];a[j]=K}s(Y,"replaceLocalRef");function ee(X,K){return typeof X=="object"||typeof X=="boolean"?{code:K,schema:X,inline:!0}:{code:K,$async:X&&!!X.$async}}s(ee,"resolvedRef");function V(X){var K=u[X];return K===void 0&&(K=u[X]=l.length,l[K]=X),"pattern"+K}s(V,"usePattern");function H(X){switch(typeof X){case"boolean":case"number":return""+X;case"string":return Yse.toQuotedString(X);case"object":if(X===null)return"null";var K=Sbr(X),j=p[K];return j===void 0&&(j=p[K]=d.length,d[j]=X),"default"+j}}s(H,"useDefault");function U(X,K,j,W){if(i._opts.validateSchema!==!1){var J=X.definition.dependencies;if(J&&!J.every(function(Me){return Object.prototype.hasOwnProperty.call(j,Me)}))throw new Error("parent schema must have all required keywords: "+J.join(","));var ie=X.definition.validateSchema;if(ie){var ae=ie(K);if(!ae){var te="keyword schema is invalid: "+i.errorsText(ie.errors);if(i._opts.validateSchema=="log")i.logger.error(te);else throw new Error(te)}}}var pe=X.definition.compile,Ae=X.definition.inline,Oe=X.definition.macro,Te;if(pe)Te=pe.call(i,K,j,W);else if(Oe)Te=Oe.call(i,K,j,W),o.validateSchema!==!1&&i.validateSchema(Te,!0);else if(Ae)Te=Ae.call(i,W,X.keyword,K,j);else if(Te=X.definition.validate,!Te)return;if(Te===void 0)throw new Error('custom keyword "'+X.keyword+'"failed to compile');var Je=m.length;return m[Je]=Te,{code:"customRule"+Je,validate:Te}}s(U,"useCustomRule")}s(_2e,"compile");function Pbr(t,e,r){var n=ngt.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}s(Pbr,"checkCompiling");function Dbr(t,e,r){var n=ngt.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}s(Dbr,"endCompiling");function ngt(t,e,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==t&&i.root==e&&i.baseId==r)return n}return-1}s(ngt,"compIndex");function Bbr(t,e){return"var pattern"+t+" = new RegExp("+Yse.toQuotedString(e[t])+");"}s(Bbr,"patternCode");function Nbr(t){return"var default"+t+" = defaults["+t+"];"}s(Nbr,"defaultCode");function Lbr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}s(Lbr,"refValCode");function Mbr(t){return"var customRule"+t+" = customRules["+t+"];"}s(Mbr,"customRuleCode");function zse(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}s(zse,"vars")});var agt=q((G1o,sgt)=>{"use strict";f();var Kse=sgt.exports=s(function(){this._cache={}},"Cache");Kse.prototype.put=s(function(e,r){this._cache[e]=r},"Cache_put");Kse.prototype.get=s(function(e){return this._cache[e]},"Cache_get");Kse.prototype.del=s(function(e){delete this._cache[e]},"Cache_del");Kse.prototype.clear=s(function(){this._cache={}},"Cache_clear")});var Cgt=q((Y1o,ygt)=>{"use strict";f();var Fbr=t5(),Obr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Qbr=[0,31,28,31,30,31,30,31,31,30,31,30,31],Ubr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,cgt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,qbr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Hbr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,lgt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ugt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,dgt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,fgt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,pgt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,mgt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;ygt.exports=Jse;function Jse(t){return t=t=="full"?"full":"fast",Fbr.copy(Jse[t])}s(Jse,"formats");Jse.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":lgt,url:ugt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:cgt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Agt,uuid:dgt,"json-pointer":fgt,"json-pointer-uri-fragment":pgt,"relative-json-pointer":mgt};Jse.full={date:hgt,time:ggt,"date-time":jbr,uri:Vbr,"uri-reference":Hbr,"uri-template":lgt,url:ugt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:cgt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Agt,uuid:dgt,"json-pointer":fgt,"json-pointer-uri-fragment":pgt,"relative-json-pointer":mgt};function Wbr(t){return t%4===0&&(t%100!==0||t%400===0)}s(Wbr,"isLeapYear");function hgt(t){var e=t.match(Obr);if(!e)return!1;var r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&Wbr(r)?29:Qbr[n])}s(hgt,"date");function ggt(t,e){var r=t.match(Ubr);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!e||a)}s(ggt,"time");var $br=/t|\s/i;function jbr(t){var e=t.split($br);return e.length==2&&hgt(e[0])&&ggt(e[1],!0)}s(jbr,"date_time");var Gbr=/\/|:/;function Vbr(t){return Gbr.test(t)&&qbr.test(t)}s(Vbr,"uri");var zbr=/[^\\]\\Z/;function Agt(t){if(zbr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}s(Agt,"regex")});var Egt=q((X1o,vgt)=>{"use strict";f();vgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(a||""),p="valid"+o,m,h;if(c=="#"||c=="#/")e.isRoot?(m=e.async,h="validate"):(m=e.root.schema.$async===!0,h="root.refVal[0]");else{var g=e.resolveRef(e.baseId,c,e.isRoot);if(g===void 0){var A=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(A);var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(A),u&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,A)}else if(g.inline){var b=e.util.copy(e);b.level++;var w="valid"+b.level;b.schema=g.schema,b.schemaPath="",b.errSchemaPath=c;var R=e.validate(b).replace(/validate\.schema/g,g.code);i+=" "+R+" ",u&&(i+=" if ("+w+") { ")}else m=g.$async===!0||e.async&&g.$async!==!1,h=g.code}if(h){var y=y||[];y.push(i),i="",e.opts.passContext?i+=" "+h+".call(this, ":i+=" "+h+"( ",i+=" "+d+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var D=a?"data"+(a-1||""):"parentData",N=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+D+" , "+N+", rootData)  ";var O=i;if(i=y.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+O+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+O+") { if (vErrors === null) vErrors = "+h+".errors; else vErrors = vErrors.concat("+h+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},"generate_ref")});var bgt=q((tvo,xgt)=>{"use strict";f();xgt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),d="";u.level++;var p="valid"+u.level,m=u.baseId,h=!0,g=o;if(g)for(var A,y=-1,E=g.length-1;y<E;)A=g[y+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))&&(h=!1,u.schema=A,u.schemaPath=a+"["+y+"]",u.errSchemaPath=c+"/"+y,i+="  "+e.validate(u)+" ",u.baseId=m,l&&(i+=" if ("+p+") { ",d+="}"));return l&&(h?i+=" if (true) { ":i+=" "+d.slice(0,-1)+" "),i},"generate_allOf")});var Tgt=q((ivo,Igt)=>{"use strict";f();Igt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=c.every(function(Y){return e.opts.strictKeywords?typeof Y=="object"&&Object.keys(Y).length>0||Y===!1:e.util.schemaHasRules(Y,e.RULES.all)});if(E){var b=g.baseId;i+=" var "+h+" = errors; var "+m+" = false;  ";var w=e.compositeRule;e.compositeRule=g.compositeRule=!0;var R=c;if(R)for(var D,N=-1,O=R.length-1;N<O;)D=R[N+=1],g.schema=D,g.schemaPath=l+"["+N+"]",g.errSchemaPath=u+"/"+N,i+="  "+e.validate(g)+" ",g.baseId=b,i+=" "+m+" = "+m+" || "+y+"; if (!"+m+") { ",A+="}";e.compositeRule=g.compositeRule=w,i+=" "+A+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else d&&(i+=" if (true) { ");return i},"generate_anyOf")});var Sgt=q((avo,wgt)=>{"use strict";f();wgt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},"generate_comment")});var Rgt=q((uvo,_gt)=>{"use strict";f();_gt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,h||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+m+" = equal("+p+", schema"+o+"); if (!"+m+") {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",d&&(i+=" else { "),i},"generate_const")});var Pgt=q((pvo,kgt)=>{"use strict";f();kgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,w="data"+b,R=e.baseId,D=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(i+="var "+h+" = errors;var "+m+";",D){var N=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+y+" = false; for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var O=p+"["+E+"]";g.dataPathArr[b]=E;var Y=e.validate(g);g.baseId=R,e.util.varOccurences(Y,w)<2?i+=" "+e.util.varReplace(Y,w,O)+" ":i+=" var "+w+" = "+O+"; "+Y+" ",i+=" if ("+y+") break; }  ",e.compositeRule=g.compositeRule=N,i+=" "+A+" if (!"+y+") {"}else i+=" if ("+p+".length == 0) {";var ee=ee||[];ee.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var V=i;return i=ee.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",D&&(i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},"generate_contains")});var Bgt=q((gvo,Dgt)=>{"use strict";f();Dgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y={},E={},b=e.opts.ownProperties;for(N in c)if(N!="__proto__"){var w=c[N],R=Array.isArray(w)?E:y;R[N]=w}i+="var "+m+" = errors;";var D=e.errorPath;i+="var missing"+o+";";for(var N in E)if(R=E[N],R.length){if(i+=" if ( "+p+e.util.getProperty(N)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(N)+"') "),d){i+=" && ( ";var O=R;if(O)for(var Y,ee=-1,V=O.length-1;ee<V;){Y=O[ee+=1],ee&&(i+=" || ");var H=e.util.getProperty(Y),U=p+H;i+=" ( ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?Y:H)+") ) "}i+=")) {  ";var X="missing"+o,K="' + "+X+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,X,!0):D+" + "+X);var j=j||[];j.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(N)+"', missingProperty: '"+K+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(N)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var W=i;i=j.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+W+"]); ":i+=" validate.errors = ["+W+"]; return false; ":i+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var J=R;if(J)for(var Y,ie=-1,ae=J.length-1;ie<ae;){Y=J[ie+=1];var H=e.util.getProperty(Y),K=e.util.escapeQuotes(Y),U=p+H;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,Y,e.opts.jsonPointers)),i+=" if ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(N)+"', missingProperty: '"+K+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(N)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",d&&(g+="}",i+=" else { ")}e.errorPath=D;var te=h.baseId;for(var N in y){var w=y[N];(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all))&&(i+=" "+A+" = true; if ( "+p+e.util.getProperty(N)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(N)+"') "),i+=") { ",h.schema=w,h.schemaPath=l+e.util.getProperty(N),h.errSchemaPath=u+"/"+e.util.escapeFragment(N),i+="  "+e.validate(h)+" ",h.baseId=te,i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}"))}return d&&(i+="   "+g+" if ("+m+" == errors) {"),i},"generate_dependencies")});var Lgt=q((Cvo,Ngt)=>{"use strict";f();Ngt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="i"+o,y="schema"+o;h||(i+=" var "+y+" = validate.schema"+l+";"),i+="var "+m+";",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=""+m+" = false;for (var "+A+"=0; "+A+"<"+y+".length; "+A+"++) if (equal("+p+", "+y+"["+A+"])) { "+m+" = true; break; }",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;return i=E.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",d&&(i+=" else { "),i},"generate_enum")});var Fgt=q((xvo,Mgt)=>{"use strict";f();Mgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return d&&(i+=" if (true) { "),i;var m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=e.opts.unknownFormats,A=Array.isArray(g);if(m){var y="format"+o,E="isObject"+o,b="formatType"+o;i+=" var "+y+" = formats["+h+"]; var "+E+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+b+" = "+E+" && "+y+".type || 'string'; if ("+E+") { ",e.async&&(i+=" var async"+o+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (",g!="ignore"&&(i+=" ("+h+" && !"+y+" ",A&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+y+" && "+b+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+y+"("+p+") : "+y+"("+p+")) ":i+=" "+y+"("+p+") ",i+=" : "+y+".test("+p+"))))) {"}else{var y=e.formats[c];if(!y){if(g=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),d&&(i+=" if (true) { "),i;if(A&&g.indexOf(c)>=0)return d&&(i+=" if (true) { "),i;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var E=typeof y=="object"&&!(y instanceof RegExp)&&y.validate,b=E&&y.type||"string";if(E){var w=y.async===!0;y=y.validate}if(b!=n)return d&&(i+=" if (true) { "),i;if(w){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(c)+".validate";i+=" if (!(await "+R+"("+p+"))) { "}else{i+=" if (! ";var R="formats"+e.util.getProperty(c);E&&(R+=".validate"),typeof y=="function"?i+=" "+R+"("+p+") ":i+=" "+R+".test("+p+") ",i+=") { "}}var D=D||[];D.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var N=i;return i=D.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+N+"]); ":i+=" validate.errors = ["+N+"]; return false; ":i+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { "),i},"generate_format")});var Qgt=q((Tvo,Ogt)=>{"use strict";f();Ogt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e);g.level++;var A="valid"+g.level,y=e.schema.then,E=e.schema.else,b=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),w=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),R=g.baseId;if(b||w){var D;g.createErrors=!1,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+h+" = errors; var "+m+" = true;  ";var N=e.compositeRule;e.compositeRule=g.compositeRule=!0,i+="  "+e.validate(g)+" ",g.baseId=R,g.createErrors=!0,i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=g.compositeRule=N,b?(i+=" if ("+A+") {  ",g.schema=e.schema.then,g.schemaPath=e.schemaPath+".then",g.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&w?(D="ifClause"+o,i+=" var "+D+" = 'then'; "):D="'then'",i+=" } ",w&&(i+=" else { ")):i+=" if (!"+A+") { ",w&&(g.schema=e.schema.else,g.schemaPath=e.schemaPath+".else",g.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&w?(D="ifClause"+o,i+=" var "+D+" = 'else'; "):D="'else'",i+=" } "),i+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+D+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+D+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i},"generate_if")});var qgt=q((_vo,Ugt)=>{"use strict";f();Ugt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,w="data"+b,R=e.baseId;if(i+="var "+h+" = errors;var "+m+";",Array.isArray(c)){var D=e.schema.additionalItems;if(D===!1){i+=" "+m+" = "+p+".length <= "+c.length+"; ";var N=u;u=e.errSchemaPath+"/additionalItems",i+="  if (!"+m+") {   ";var O=O||[];O.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Y=i;i=O.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+Y+"]); ":i+=" validate.errors = ["+Y+"]; return false; ":i+=" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u=N,d&&(A+="}",i+=" else { ")}var ee=c;if(ee){for(var V,H=-1,U=ee.length-1;H<U;)if(V=ee[H+=1],e.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:e.util.schemaHasRules(V,e.RULES.all)){i+=" "+y+" = true; if ("+p+".length > "+H+") { ";var X=p+"["+H+"]";g.schema=V,g.schemaPath=l+"["+H+"]",g.errSchemaPath=u+"/"+H,g.errorPath=e.util.getPathExpr(e.errorPath,H,e.opts.jsonPointers,!0),g.dataPathArr[b]=H;var K=e.validate(g);g.baseId=R,e.util.varOccurences(K,w)<2?i+=" "+e.util.varReplace(K,w,X)+" ":i+=" var "+w+" = "+X+"; "+K+" ",i+=" }  ",d&&(i+=" if ("+y+") { ",A+="}")}}if(typeof D=="object"&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))){g.schema=D,g.schemaPath=e.schemaPath+".additionalItems",g.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+p+".length > "+c.length+") {  for (var "+E+" = "+c.length+"; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var X=p+"["+E+"]";g.dataPathArr[b]=E;var K=e.validate(g);g.baseId=R,e.util.varOccurences(K,w)<2?i+=" "+e.util.varReplace(K,w,X)+" ":i+=" var "+w+" = "+X+"; "+K+" ",d&&(i+=" if (!"+y+") break; "),i+=" } }  ",d&&(i+=" if ("+y+") { ",A+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+="  for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var X=p+"["+E+"]";g.dataPathArr[b]=E;var K=e.validate(g);g.baseId=R,e.util.varOccurences(K,w)<2?i+=" "+e.util.varReplace(K,w,X)+" ":i+=" var "+w+" = "+X+"; "+K+" ",d&&(i+=" if (!"+y+") break; "),i+=" }"}return d&&(i+=" "+A+" if ("+h+" == errors) {"),i},"generate_items")});var R2e=q((Pvo,Hgt)=>{"use strict";f();Hgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,R,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=r=="maximum",A=g?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[A],E=e.opts.$data&&y&&y.$data,b=g?"<":">",w=g?">":"<",R=void 0;if(!(m||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(E||y===void 0||typeof y=="number"||typeof y=="boolean"))throw new Error(A+" must be number or boolean");if(E){var D=e.util.getData(y.$data,a,e.dataPathArr),N="exclusive"+o,O="exclType"+o,Y="exclIsNumber"+o,ee="op"+o,V="' + "+ee+" + '";i+=" var schemaExcl"+o+" = "+D+"; ",D="schemaExcl"+o,i+=" var "+N+"; var "+O+" = typeof "+D+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var R=A,H=H||[];H.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;i=H.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+O+" == 'number' ? ( ("+N+" = "+h+" === undefined || "+D+" "+b+"= "+h+") ? "+p+" "+w+"= "+D+" : "+p+" "+w+" "+h+" ) : ( ("+N+" = "+D+" === true) ? "+p+" "+w+"= "+h+" : "+p+" "+w+" "+h+" ) || "+p+" !== "+p+") { var op"+o+" = "+N+" ? '"+b+"' : '"+b+"='; ",c===void 0&&(R=A,u=e.errSchemaPath+"/"+A,h=D,m=E)}else{var Y=typeof y=="number",V=b;if(Y&&m){var ee="'"+V+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" ( "+h+" === undefined || "+y+" "+b+"= "+h+" ? "+p+" "+w+"= "+y+" : "+p+" "+w+" "+h+" ) || "+p+" !== "+p+") { "}else{Y&&c===void 0?(N=!0,R=A,u=e.errSchemaPath+"/"+A,h=y,w+="="):(Y&&(h=Math[g?"min":"max"](y,c)),y===(Y?h:!0)?(N=!0,R=A,u=e.errSchemaPath+"/"+A,w+="="):(N=!1,V+="="));var ee="'"+V+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+" "+w+" "+h+" || "+p+" !== "+p+") { "}}R=R||r;var H=H||[];H.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+ee+", limit: "+h+", exclusive: "+N+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+V+" ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;return i=H.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { "),i},"generate__limit")});var k2e=q((Nvo,Wgt)=>{"use strict";f();Wgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxItems"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+".length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxItems"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitItems")});var P2e=q((Fvo,$gt)=>{"use strict";f();$gt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxLength"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),e.opts.unicode===!1?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",r=="maxLength"?i+="longer":i+="shorter",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitLength")});var D2e=q((Uvo,jgt)=>{"use strict";f();jgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxProperties"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" Object.keys("+p+").length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxProperties"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitProperties")});var Vgt=q((Wvo,Ggt)=>{"use strict";f();Ggt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");i+="var division"+o+";if (",m&&(i+=" "+h+" !== undefined && ( typeof "+h+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+h+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",m&&(i+="  )  "),i+=" ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var A=i;return i=g.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate_multipleOf")});var Ygt=q((Gvo,zgt)=>{"use strict";f();zgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e);h.level++;var g="valid"+h.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u,i+=" var "+m+" = errors;  ";var A=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var y;h.opts.allErrors&&(y=h.opts.allErrors,h.opts.allErrors=!1),i+=" "+e.validate(h)+" ",h.createErrors=!0,y&&(h.opts.allErrors=y),e.compositeRule=h.compositeRule=A,i+=" if ("+g+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;i=E.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(i+=" if (false) { ");return i},"generate_not")});var Jgt=q((Yvo,Kgt)=>{"use strict";f();Kgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=g.baseId,b="prevValid"+o,w="passingSchemas"+o;i+="var "+h+" = errors , "+b+" = false , "+m+" = false , "+w+" = null; ";var R=e.compositeRule;e.compositeRule=g.compositeRule=!0;var D=c;if(D)for(var N,O=-1,Y=D.length-1;O<Y;)N=D[O+=1],(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))?(g.schema=N,g.schemaPath=l+"["+O+"]",g.errSchemaPath=u+"/"+O,i+="  "+e.validate(g)+" ",g.baseId=E):i+=" var "+y+" = true; ",O&&(i+=" if ("+y+" && "+b+") { "+m+" = false; "+w+" = ["+w+", "+O+"]; } else { ",A+="}"),i+=" if ("+y+") { "+m+" = "+b+" = true; "+w+" = "+O+"; }";return e.compositeRule=g.compositeRule=R,i+=""+A+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+w+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},"generate_oneOf")});var Zgt=q((Xvo,Xgt)=>{"use strict";f();Xgt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=m?"(new RegExp("+h+"))":e.usePattern(c);i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" !"+g+".test("+p+") ) {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate_pattern")});var tAt=q((tEo,eAt)=>{"use strict";f();eAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y="key"+o,E="idx"+o,b=h.dataLevel=e.dataLevel+1,w="data"+b,R="dataProperties"+o,D=Object.keys(c||{}).filter(ie),N=e.schema.patternProperties||{},O=Object.keys(N).filter(ie),Y=e.schema.additionalProperties,ee=D.length||O.length,V=Y===!1,H=typeof Y=="object"&&Object.keys(Y).length,U=e.opts.removeAdditional,X=V||H||U,K=e.opts.ownProperties,j=e.baseId,W=e.schema.required;if(W&&!(e.opts.$data&&W.$data)&&W.length<e.opts.loopRequired)var J=e.util.toHash(W);function ie(Rr){return Rr!=="__proto__"}if(s(ie,"notProto"),i+="var "+m+" = errors;var "+A+" = true;",K&&(i+=" var "+R+" = undefined;"),X){if(K?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",ee){if(i+=" var isAdditional"+o+" = !(false ",D.length)if(D.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+y+") ";else{var ae=D;if(ae)for(var te,pe=-1,Ae=ae.length-1;pe<Ae;)te=ae[pe+=1],i+=" || "+y+" == "+e.util.toQuotedString(te)+" "}if(O.length){var Oe=O;if(Oe)for(var Te,Je=-1,Me=Oe.length-1;Je<Me;)Te=Oe[Je+=1],i+=" || "+e.usePattern(Te)+".test("+y+") "}i+=" ); if (isAdditional"+o+") { "}if(U=="all")i+=" delete "+p+"["+y+"]; ";else{var lt=e.errorPath,_t="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),V)if(U)i+=" delete "+p+"["+y+"]; ";else{i+=" "+A+" = false; ";var vt=u;u=e.errSchemaPath+"/additionalProperties";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+_t+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=vt,d&&(i+=" break; ")}else if(H)if(U=="failing"){i+=" var "+m+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=Y,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var We=e.validate(h);h.baseId=j,e.util.varOccurences(We,w)<2?i+=" "+e.util.varReplace(We,w,ye)+" ":i+=" var "+w+" = "+ye+"; "+We+" ",i+=" if (!"+A+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+y+"]; }  ",e.compositeRule=h.compositeRule=Ue}else{h.schema=Y,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var We=e.validate(h);h.baseId=j,e.util.varOccurences(We,w)<2?i+=" "+e.util.varReplace(We,w,ye)+" ":i+=" var "+w+" = "+ye+"; "+We+" ",d&&(i+=" if (!"+A+") break; ")}e.errorPath=lt}ee&&(i+=" } "),i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(D.length){var le=D;if(le)for(var te,qe=-1,Be=le.length-1;qe<Be;){te=le[qe+=1];var xe=c[te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){var je=e.util.getProperty(te),ye=p+je,et=se&&xe.default!==void 0;h.schema=xe,h.schemaPath=l+je,h.errSchemaPath=u+"/"+e.util.escapeFragment(te),h.errorPath=e.util.getPath(e.errorPath,te,e.opts.jsonPointers),h.dataPathArr[b]=e.util.toQuotedString(te);var We=e.validate(h);if(h.baseId=j,e.util.varOccurences(We,w)<2){We=e.util.varReplace(We,w,ye);var pt=ye}else{var pt=w;i+=" var "+w+" = "+ye+"; "}if(et)i+=" "+We+" ";else{if(J&&J[te]){i+=" if ( "+pt+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = false; ";var lt=e.errorPath,vt=u,Mt=e.util.escapeQuotes(te);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(lt,te,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Mt+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Mt+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=vt,e.errorPath=lt,i+=" } else { "}else d?(i+=" if ( "+pt+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = true; } else { "):(i+=" if ("+pt+" !== undefined ",K&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+We+" } "}}d&&(i+=" if ("+A+") { ",g+="}")}}if(O.length){var Kt=O;if(Kt)for(var Te,Ot=-1,Hr=Kt.length-1;Ot<Hr;){Te=Kt[Ot+=1];var xe=N[Te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){h.schema=xe,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Te),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Te),K?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" if ("+e.usePattern(Te)+".test("+y+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var We=e.validate(h);h.baseId=j,e.util.varOccurences(We,w)<2?i+=" "+e.util.varReplace(We,w,ye)+" ":i+=" var "+w+" = "+ye+"; "+We+" ",d&&(i+=" if (!"+A+") break; "),i+=" } ",d&&(i+=" else "+A+" = true; "),i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}")}}}return d&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_properties")});var nAt=q((iEo,rAt)=>{"use strict";f();rAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level;if(i+="var "+m+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u;var y="key"+o,E="idx"+o,b="i"+o,w="' + "+y+" + '",R=h.dataLevel=e.dataLevel+1,D="data"+R,N="dataProperties"+o,O=e.opts.ownProperties,Y=e.baseId;O&&(i+=" var "+N+" = undefined; "),O?i+=" "+N+" = "+N+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+N+".length; "+E+"++) { var "+y+" = "+N+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" var startErrs"+o+" = errors; ";var ee=y,V=e.compositeRule;e.compositeRule=h.compositeRule=!0;var H=e.validate(h);h.baseId=Y,e.util.varOccurences(H,D)<2?i+=" "+e.util.varReplace(H,D,ee)+" ":i+=" var "+D+" = "+ee+"; "+H+" ",e.compositeRule=h.compositeRule=V,i+=" if (!"+A+") { for (var "+b+"=startErrs"+o+"; "+b+"<errors; "+b+"++) { vErrors["+b+"].propertyName = "+y+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+w+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+w+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),d&&(i+=" break; "),i+=" } }"}return d&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_propertyNames")});var oAt=q((aEo,iAt)=>{"use strict";f();iAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="schema"+o;if(!h)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],E=c;if(E)for(var b,w=-1,R=E.length-1;w<R;){b=E[w+=1];var D=e.schema.properties[b];D&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))||(y[y.length]=b)}}else var y=c;if(h||y.length){var N=e.errorPath,O=h||y.length>=e.opts.loopRequired,Y=e.opts.ownProperties;if(d)if(i+=" var missing"+o+"; ",O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var ee="i"+o,V="schema"+o+"["+ee+"]",H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(N,V,e.opts.jsonPointers)),i+=" var "+m+" = true; ",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=" for (var "+ee+" = 0; "+ee+" < "+A+".length; "+ee+"++) { "+m+" = "+p+"["+A+"["+ee+"]] !== undefined ",Y&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+A+"["+ee+"]) "),i+="; if (!"+m+") break; } ",h&&(i+="  }  "),i+="  if (!"+m+") {   ";var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var X=i;i=U.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var K=y;if(K)for(var j,ee=-1,W=K.length-1;ee<W;){j=K[ee+=1],ee&&(i+=" || ");var J=e.util.getProperty(j),ie=p+J;i+=" ( ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:J)+") ) "}i+=") {  ";var V="missing"+o,H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(N,V,!0):N+" + "+V);var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var X=i;i=U.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var ee="i"+o,V="schema"+o+"["+ee+"]",H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(N,V,e.opts.jsonPointers)),h&&(i+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),i+=" for (var "+ee+" = 0; "+ee+" < "+A+".length; "+ee+"++) { if ("+p+"["+A+"["+ee+"]] === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+A+"["+ee+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(i+="  }  ")}else{var ae=y;if(ae)for(var j,te=-1,pe=ae.length-1;te<pe;){j=ae[te+=1];var J=e.util.getProperty(j),H=e.util.escapeQuotes(j),ie=p+J;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,j,e.opts.jsonPointers)),i+=" if ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=N}else d&&(i+=" if (true) {");return i},"generate_required")});var aAt=q((uEo,sAt)=>{"use strict";f();sAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,(c||h)&&e.opts.uniqueItems!==!1){h&&(i+=" var "+m+"; if ("+g+" === false || "+g+" === undefined) "+m+" = true; else if (typeof "+g+" != 'boolean') "+m+" = false; else { "),i+=" var i = "+p+".length , "+m+" = true , j; if (i > 1) { ";var A=e.schema.items&&e.schema.items.type,y=Array.isArray(A);if(!A||A=="object"||A=="array"||y&&(A.indexOf("object")>=0||A.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+m+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var E="checkDataType"+(y?"s":"");i+=" if ("+e.util[E](A,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var b=b||[];b.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var w=i;i=b.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+w+"]); ":i+=" validate.errors = ["+w+"]; return false; ":i+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i},"generate_uniqueItems")});var lAt=q((pEo,cAt)=>{"use strict";f();cAt.exports={$ref:Egt(),allOf:bgt(),anyOf:Tgt(),$comment:Sgt(),const:Rgt(),contains:Pgt(),dependencies:Bgt(),enum:Lgt(),format:Fgt(),if:Qgt(),items:qgt(),maximum:R2e(),minimum:R2e(),maxItems:k2e(),minItems:k2e(),maxLength:P2e(),minLength:P2e(),maxProperties:D2e(),minProperties:D2e(),multipleOf:Vgt(),not:Ygt(),oneOf:Jgt(),pattern:Zgt(),properties:tAt(),propertyNames:nAt(),required:oAt(),uniqueItems:aAt(),validate:S2e()}});var fAt=q((hEo,dAt)=>{"use strict";f();var uAt=lAt(),B2e=t5().toHash;dAt.exports=s(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=B2e(r),e.types=B2e(i),e.forEach(function(o){o.rules=o.rules.map(function(a){var c;if(typeof a=="object"){var l=Object.keys(a)[0];c=a[l],a=l,c.forEach(function(d){r.push(d),e.all[d]=!0})}r.push(a);var u=e.all[a]={keyword:a,code:uAt[a],implements:c};return u}),e.all.$comment={keyword:"$comment",code:uAt.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=B2e(r.concat(n)),e.custom={},e},"rules")});var hAt=q((yEo,mAt)=>{"use strict";f();var pAt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];mAt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),i=t,o;for(o=1;o<n.length;o++)i=i[n[o]];for(o=0;o<pAt.length;o++){var a=pAt[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var yAt=q((vEo,AAt)=>{"use strict";f();var Ybr=Gse().MissingRef;AAt.exports=gAt;function gAt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var i=o(t).then(function(){var c=n._addSchema(t,void 0,e);return c.validate||a(c)});return r&&i.then(function(c){r(null,c)},r),i;function o(c){var l=c.$schema;return l&&!n.getSchema(l)?gAt.call(n,{$ref:l},!0):Promise.resolve()}s(o,"loadMetaSchemaOf");function a(c){try{return n._compile(c)}catch(u){if(u instanceof Ybr)return l(u);throw u}function l(u){var d=u.missingSchema;if(h(d))throw new Error("Schema "+d+" is loaded but "+u.missingRef+" cannot be resolved");var p=n._loadingSchemas[d];return p||(p=n._loadingSchemas[d]=n._opts.loadSchema(d),p.then(m,m)),p.then(function(g){if(!h(d))return o(g).then(function(){h(d)||n.addSchema(g,d,void 0,e)})}).then(function(){return a(c)});function m(){delete n._loadingSchemas[d]}s(m,"removePromise");function h(g){return n._refs[g]||n._schemas[g]}s(h,"added")}s(l,"loadMissingSchema")}s(a,"_compileAsync")}s(gAt,"compileAsync")});var vAt=q((bEo,CAt)=>{"use strict";f();CAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p,m="data"+(a||""),h="valid"+o,g="errs__"+o,A=e.opts.$data&&c&&c.$data,y;A?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",y="schema"+o):y=c;var E=this,b="definition"+o,w=E.definition,R="",D,N,O,Y,ee;if(A&&w.$data){ee="keywordValidate"+o;var V=w.validateSchema;i+=" var "+b+" = RULES.custom['"+r+"'].definition; var "+ee+" = "+b+".validate;"}else{if(Y=e.useCustomRule(E,c,e.schema,e),!Y)return;y="validate.schema"+l,ee=Y.code,D=w.compile,N=w.inline,O=w.macro}var H=ee+".errors",U="i"+o,X="ruleErr"+o,K=w.async;if(K&&!e.async)throw new Error("async keyword in sync schema");if(N||O||(i+=""+H+" = null;"),i+="var "+g+" = errors;var "+h+";",A&&w.$data&&(R+="}",i+=" if ("+y+" === undefined) { "+h+" = true; } else { ",V&&(R+="}",i+=" "+h+" = "+b+".validateSchema("+y+"); if ("+h+") { ")),N)w.statements?i+=" "+Y.validate+" ":i+=" "+h+" = "+Y.validate+"; ";else if(O){var j=e.util.copy(e),R="";j.level++;var W="valid"+j.level;j.schema=Y.validate,j.schemaPath="";var J=e.compositeRule;e.compositeRule=j.compositeRule=!0;var ie=e.validate(j).replace(/validate\.schema/g,ee);e.compositeRule=j.compositeRule=J,i+=" "+ie}else{var ae=ae||[];ae.push(i),i="",i+="  "+ee+".call( ",e.opts.passContext?i+="this":i+="self",D||w.schema===!1?i+=" , "+m+" ":i+=" , "+y+" , "+m+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var te=a?"data"+(a-1||""):"parentData",pe=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+te+" , "+pe+" , rootData )  ";var Ae=i;i=ae.pop(),w.errors===!1?(i+=" "+h+" = ",K&&(i+="await "),i+=""+Ae+"; "):K?(H="customErrors"+o,i+=" var "+H+" = null; try { "+h+" = await "+Ae+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+H+" = e.errors; else throw e; } "):i+=" "+H+" = null; "+h+" = "+Ae+"; "}if(w.modifying&&(i+=" if ("+te+") "+m+" = "+te+"["+pe+"];"),i+=""+R,w.valid)d&&(i+=" if (true) { ");else{i+=" if ( ",w.valid===void 0?(i+=" !",O?i+=""+W:i+=""+h):i+=" "+!w.valid+" ",i+=") { ",p=E.keyword;var ae=ae||[];ae.push(i),i="";var ae=ae||[];ae.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";var Oe=i;i=ae.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+Oe+"]); ":i+=" validate.errors = ["+Oe+"]; return false; ":i+=" var err = "+Oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Te=i;i=ae.pop(),N?w.errors?w.errors!="full"&&(i+="  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+X+".schemaPath === undefined) { "+X+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+m+"; "),i+=" } "):w.errors===!1?i+=" "+Te+" ":(i+=" if ("+g+" == errors) { "+Te+" } else {  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+X+".schemaPath === undefined) { "+X+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+m+"; "),i+=" } } "):O?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):w.errors===!1?i+=" "+Te+" ":(i+=" if (Array.isArray("+H+")) { if (vErrors === null) vErrors = "+H+"; else vErrors = vErrors.concat("+H+"); errors = vErrors.length;  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+";  "+X+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+m+"; "),i+=" } } else { "+Te+" } "),i+=" } ",d&&(i+=" else { ")}return i},"generate_custom")});var N2e=q((wEo,Kbr)=>{Kbr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var bAt=q((SEo,xAt)=>{"use strict";f();var EAt=N2e();xAt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:EAt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:EAt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var TAt=q((REo,IAt)=>{"use strict";f();var Jbr=/^[a-z_$][a-z0-9_$-]*$/i,Xbr=vAt(),Zbr=bAt();IAt.exports={add:eIr,get:tIr,remove:rIr,validate:L2e};function eIr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!Jbr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)a(t,n[i],e);else a(t,n,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}r.keywords[t]=r.all[t]=!0;function a(c,l,u){for(var d,p=0;p<r.length;p++){var m=r[p];if(m.type==l){d=m;break}}d||(d={type:l,rules:[]},r.push(d));var h={keyword:c,definition:u,custom:!0,code:Xbr,implements:u.implements};d.rules.push(h),r.custom[c]=h}return s(a,"_addRule"),this}s(eIr,"addKeyword");function tIr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}s(tIr,"getKeyword");function rIr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,i=0;i<n.length;i++)if(n[i].keyword==t){n.splice(i,1);break}return this}s(rIr,"removeKeyword");function L2e(t,e){L2e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Zbr,!0);if(r(t))return!0;if(L2e.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}s(L2e,"validateKeyword")});var wAt=q((DEo,nIr)=>{nIr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var MAt=q((BEo,LAt)=>{"use strict";f();var _At=ogt(),r5=jse(),iIr=agt(),RAt=v2e(),oIr=w2e(),sIr=Cgt(),aIr=fAt(),kAt=hAt(),PAt=t5();LAt.exports=ac;ac.prototype.validate=lIr;ac.prototype.compile=uIr;ac.prototype.addSchema=dIr;ac.prototype.addMetaSchema=fIr;ac.prototype.validateSchema=pIr;ac.prototype.getSchema=hIr;ac.prototype.removeSchema=AIr;ac.prototype.addFormat=TIr;ac.prototype.errorsText=IIr;ac.prototype._addSchema=yIr;ac.prototype._compile=CIr;ac.prototype.compileAsync=yAt();var eae=TAt();ac.prototype.addKeyword=eae.add;ac.prototype.getKeyword=eae.get;ac.prototype.removeKeyword=eae.remove;ac.prototype.validateKeyword=eae.validate;var DAt=Gse();ac.ValidationError=DAt.Validation;ac.MissingRefError=DAt.MissingRef;ac.$dataMetaSchema=kAt;var Zse="http://json-schema.org/draft-07/schema",SAt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],cIr=["/properties"];function ac(t){if(!(this instanceof ac))return new ac(t);t=this._opts=PAt.copy(t)||{},PIr(this),this._schemas={},this._refs={},this._fragments={},this._formats=sIr(t.format),this._cache=t.cache||new iIr,this._loadingSchemas={},this._compilations=[],this.RULES=aIr(),this._getId=vIr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=oIr),this._metaOpts=kIr(this),t.formats&&_Ir(this),t.keywords&&RIr(this),wIr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),SIr(this)}s(ac,"Ajv");function lIr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var i=r(e);return r.$async!==!0&&(this.errors=r.errors),i}s(lIr,"validate");function uIr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}s(uIr,"compile");function dIr(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.addSchema(t[i],void 0,r,n);return this}var o=this._getId(t);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=r5.normalizeId(e||o),NAt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}s(dIr,"addSchema");function fIr(t,e,r){return this.addSchema(t,e,r,!0),this}s(fIr,"addMetaSchema");function pIr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||mIr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return n}s(pIr,"validateSchema");function mIr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(Zse)?Zse:void 0,t._opts.defaultMeta}s(mIr,"defaultMeta");function hIr(t){var e=BAt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return gIr(this,t)}}s(hIr,"getSchema");function gIr(t,e){var r=r5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,i=r.root,o=r.baseId,a=_At.call(t,n,i,void 0,o);return t._fragments[e]=new RAt({ref:e,fragment:!0,schema:n,root:i,baseId:o,validate:a}),a}}s(gIr,"_getSchemaFragment");function BAt(t,e){return e=r5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}s(BAt,"_getSchemaObj");function AIr(t){if(t instanceof RegExp)return Xse(this,this._schemas,t),Xse(this,this._refs,t),this;switch(typeof t){case"undefined":return Xse(this,this._schemas),Xse(this,this._refs),this._cache.clear(),this;case"string":var e=BAt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var i=this._getId(t);i&&(i=r5.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}s(AIr,"removeSchema");function Xse(t,e,r){for(var n in e){var i=e[n];!i.meta&&(!r||r.test(n))&&(t._cache.del(i.cacheKey),delete e[n])}}s(Xse,"_removeAllSchemas");function yIr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(t):t,a=this._cache.get(o);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var c=r5.normalizeId(this._getId(t));c&&n&&NAt(this,c);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=c&&c==r5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var d=r5.ids.call(this,t),p=new RAt({id:c,schema:t,localRefs:d,cacheKey:o,meta:r});return c[0]!="#"&&n&&(this._refs[c]=p),this._cache.put(o,p),l&&u&&this.validateSchema(t,!0),p}s(yIr,"_addSchema");function CIr(t,e){if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e||i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=_At.call(this,t.schema,e,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function i(){var o=t.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}s(i,"callValidate")}s(CIr,"_compile");function vIr(t){switch(t.schemaId){case"auto":return bIr;case"id":return EIr;default:return xIr}}s(vIr,"chooseGetId");function EIr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}s(EIr,"_getId");function xIr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}s(xIr,"_get$Id");function bIr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}s(bIr,"_get$IdOrId");function IIr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<t.length;o++){var a=t[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)}s(IIr,"errorsText");function TIr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}s(TIr,"addFormat");function wIr(t){var e;if(t._opts.$data&&(e=wAt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=N2e();t._opts.$data&&(r=kAt(r,cIr)),t.addMetaSchema(r,Zse,!0),t._refs["http://json-schema.org/schema"]=Zse}}s(wIr,"addDefaultMetaSchema");function SIr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}s(SIr,"addInitialSchemas");function _Ir(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}s(_Ir,"addInitialFormats");function RIr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}s(RIr,"addInitialKeywords");function NAt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}s(NAt,"checkUnique");function kIr(t){for(var e=PAt.copy(t._opts),r=0;r<SAt.length;r++)delete e[SAt[r]];return e}s(kIr,"getMetaSchemaOptions");function PIr(t){var e=t._opts.logger;if(e===!1)t.logger={log:M2e,warn:M2e,error:M2e};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}s(PIr,"setLogger");function M2e(){}s(M2e,"noop")});var ryt=q((Jxo,tyt)=>{f();tyt.exports=eyt;eyt.sync=iTr;var XAt=require("fs");function nTr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(nTr,"checkPathExt");function ZAt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:nTr(e,r)}s(ZAt,"checkStat");function eyt(t,e,r){XAt.stat(t,function(n,i){r(n,n?!1:ZAt(i,t,e))})}s(eyt,"isexe");function iTr(t,e){return ZAt(XAt.statSync(t),t,e)}s(iTr,"sync")});var ayt=q((ebo,syt)=>{f();syt.exports=iyt;iyt.sync=oTr;var nyt=require("fs");function iyt(t,e,r){nyt.stat(t,function(n,i){r(n,n?!1:oyt(i,e))})}s(iyt,"isexe");function oTr(t,e){return oyt(nyt.statSync(t),e)}s(oTr,"sync");function oyt(t,e){return t.isFile()&&sTr(t,e)}s(oyt,"checkStat");function sTr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),d=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&d&&o===0;return p}s(sTr,"checkMode")});var lyt=q((ibo,cyt)=>{f();var nbo=require("fs"),uae;process.platform==="win32"||global.TESTING_WINDOWS?uae=ryt():uae=ayt();cyt.exports=tRe;tRe.sync=aTr;function tRe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){tRe(t,e||{},function(o,a){o?i(o):n(a)})})}uae(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(tRe,"isexe");function aTr(t,e){try{return uae.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(aTr,"sync")});var gyt=q((abo,hyt)=>{f();var P8=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",uyt=require("path"),cTr=P8?";":":",dyt=lyt(),fyt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),pyt=s((t,e)=>{let r=e.colon||cTr,n=t.match(/\//)||P8&&t.match(/\\/)?[""]:[...P8?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=P8?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=P8?i.split(r):[""];return P8&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),myt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=pyt(t,e),a=[],c=s(u=>new Promise((d,p)=>{if(u===n.length)return e.all&&a.length?d(a):p(fyt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=uyt.join(h,t),A=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(l(A,u,0))}),"step"),l=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(d+1));let g=i[p];dyt(u+g,{pathExt:o},(A,y)=>{if(!A&&y)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,d,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),lTr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=pyt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=uyt.join(l,t),d=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=d+n[p];try{if(dyt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw fyt(t)},"whichSync");hyt.exports=myt;myt.sync=lTr});var yyt=q((ubo,rRe)=>{"use strict";f();var Ayt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");rRe.exports=Ayt;rRe.exports.default=Ayt});var xyt=q((pbo,Eyt)=>{"use strict";f();var Cyt=require("path"),uTr=gyt(),dTr=yyt();function vyt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=uTr.sync(t.command,{path:r[dTr({env:r})],pathExt:e?Cyt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=Cyt.resolve(i?t.options.cwd:"",a)),a}s(vyt,"resolveCommandAttempt");function fTr(t){return vyt(t)||vyt(t,!0)}s(fTr,"resolveCommand");Eyt.exports=fTr});var byt=q((gbo,iRe)=>{"use strict";f();var nRe=/([()\][%!^"`<>&|;, *?])/g;function pTr(t){return t=t.replace(nRe,"^$1"),t}s(pTr,"escapeCommand");function mTr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(nRe,"^$1"),e&&(t=t.replace(nRe,"^$1")),t}s(mTr,"escapeArgument");iRe.exports.command=pTr;iRe.exports.argument=mTr});var Tyt=q((Cbo,Iyt)=>{"use strict";f();Iyt.exports=/^#!(.*)/});var Syt=q((Ebo,wyt)=>{"use strict";f();var hTr=Tyt();wyt.exports=(t="")=>{let e=t.match(hTr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Ryt=q((bbo,_yt)=>{"use strict";f();var oRe=require("fs"),gTr=Syt();function ATr(t){let r=Buffer.alloc(150),n;try{n=oRe.openSync(t,"r"),oRe.readSync(n,r,0,150,0),oRe.closeSync(n)}catch{}return gTr(r.toString())}s(ATr,"readShebang");_yt.exports=ATr});var Byt=q((wbo,Dyt)=>{"use strict";f();var yTr=require("path"),kyt=xyt(),Pyt=byt(),CTr=Ryt(),vTr=process.platform==="win32",ETr=/\.(?:com|exe)$/i,xTr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function bTr(t){t.file=kyt(t);let e=t.file&&CTr(t.file);return e?(t.args.unshift(t.file),t.command=e,kyt(t)):t.file}s(bTr,"detectShebang");function ITr(t){if(!vTr)return t;let e=bTr(t),r=!ETr.test(e);if(t.options.forceShell||r){let n=xTr.test(e);t.command=yTr.normalize(t.command),t.command=Pyt.command(t.command),t.args=t.args.map(o=>Pyt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(ITr,"parseNonShell");function TTr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:ITr(n)}s(TTr,"parse");Dyt.exports=TTr});var Myt=q((Rbo,Lyt)=>{"use strict";f();var sRe=process.platform==="win32";function aRe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(aRe,"notFoundError");function wTr(t,e){if(!sRe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=Nyt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(wTr,"hookChildProcess");function Nyt(t,e){return sRe&&t===1&&!e.file?aRe(e.original,"spawn"):null}s(Nyt,"verifyENOENT");function STr(t,e){return sRe&&t===1&&!e.file?aRe(e.original,"spawnSync"):null}s(STr,"verifyENOENTSync");Lyt.exports={hookChildProcess:wTr,verifyENOENT:Nyt,verifyENOENTSync:STr,notFoundError:aRe}});var Qyt=q((Dbo,D8)=>{"use strict";f();var Fyt=require("child_process"),cRe=Byt(),lRe=Myt();function Oyt(t,e,r){let n=cRe(t,e,r),i=Fyt.spawn(n.command,n.args,n.options);return lRe.hookChildProcess(i,n),i}s(Oyt,"spawn");function _Tr(t,e,r){let n=cRe(t,e,r),i=Fyt.spawnSync(n.command,n.args,n.options);return i.error=i.error||lRe.verifyENOENTSync(i.status,n),i}s(_Tr,"spawnSync");D8.exports=Oyt;D8.exports.spawn=Oyt;D8.exports.sync=_Tr;D8.exports._parse=cRe;D8.exports._enoent=lRe});var $Tr={};ma($Tr,{getTokenizer:()=>$i,getTokenizerAsync:()=>xUe,main:()=>iCt});module.exports=_1t($Tr);f();f();Xke().install();f();f();f();var VS=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(VS||{}),Oc=class{static{s(this,"LogTarget")}},by=class{static{s(this,"TelemetryLogSender")}},It=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Oc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(by).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(by).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},sn=new It("default");f();f();f();var cM="github.copilot",Zke="github-enterprise";f();f();f();f();f();f();var Ws=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();var fm=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return UH(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var pm="X-Copilot-RelatedPluginVersion-",lM=(W=>(W.Market="X-MSEdge-Market",W.CorpNet="X-FD-Corpnet",W.Build="X-VSCode-Build",W.ApplicationVersion="X-VSCode-AppVersion",W.TargetPopulation="X-VSCode-TargetPopulation",W.ClientId="X-MSEdge-ClientId",W.ExtensionName="X-VSCode-ExtensionName",W.ExtensionVersion="X-VSCode-ExtensionVersion",W.ExtensionRelease="X-VSCode-ExtensionRelease",W.Language="X-VSCode-Language",W.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",W.CopilotEngine="X-Copilot-Engine",W.CopilotOverrideEngine="X-Copilot-OverrideEngine",W.CopilotRepository="X-Copilot-Repository",W.CopilotFileType="X-Copilot-FileType",W.CopilotUserKind="X-Copilot-UserKind",W.CopilotDogfood="X-Copilot-Dogfood",W.CopilotCustomModel="X-Copilot-CustomModel",W.CopilotOrgs="X-Copilot-Orgs",W.CopilotCustomModelNames="X-Copilot-CustomModelNames",W.CopilotTrackingId="X-Copilot-CopilotTrackingId",W.CopilotClientVersion="X-Copilot-ClientVersion",W.CopilotRelatedPluginVersionCppTools=pm+"msvscodecpptools",W.CopilotRelatedPluginVersionCMakeTools=pm+"msvscodecmaketools",W.CopilotRelatedPluginVersionMakefileTools=pm+"msvscodemakefiletools",W.CopilotRelatedPluginVersionCSharpDevKit=pm+"msdotnettoolscsdevkit",W.CopilotRelatedPluginVersionPython=pm+"mspythonpython",W.CopilotRelatedPluginVersionPylance=pm+"mspythonvscodepylance",W.CopilotRelatedPluginVersionJavaPack=pm+"vscjavavscodejavapack",W.CopilotRelatedPluginVersionTypescript=pm+"vscodetypescriptlanguagefeatures",W.CopilotRelatedPluginVersionTypescriptNext=pm+"msvscodevscodetypescriptnext",W.CopilotRelatedPluginVersionCSharp=pm+"msdotnettoolscsharp",W))(lM||{});var pvt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},zS=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=pvt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();f();var Cu=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ws(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var TW=Fe(Lb()),wW=Fe(require("os"));var mvt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function hvt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(mvt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(hvt,"buildExceptionDetail");function Dle(t,e){let r=t.get(dn),n=r.getEditorInfo(),i=t.get(Cu),o={"#editor":n.devName??n.name,"#editor_version":Iy({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":Iy(r.getEditorPluginInfo()),"#session_id":t.get(Ss).sessionId,"#machine_id":t.get(Ss).machineId,"#architecture":wW.arch(),"#os_platform":wW.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(Dle,"buildContext");function cPe(t,e){let r=t.get(yo),n=t.get(dn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Dle(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let d=hvt(l);o.exception_detail.unshift(d),a.unshift([l,d]),c+=1,l=l.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,TW.SHA256)(TW.enc.Utf16.parse(u.join(`
`))).toString()),o}s(cPe,"buildPayload");f();var dM=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var uPe=Fe(Lb());var Ur=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},YS=class extends Ur{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},kP=class extends Ur{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var Ty=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Ur}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var mm=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:fPe(r,n),verboseLogging:Avt(r,n),testMode:e,simulation:gvt(n)})}};function yg(t){return t.get(mm).flags.testMode}s(yg,"isRunningInTest");function PP(t){return yg(t)}s(PP,"shouldFailForDebugPurposes");function fM(t){return t.get(mm).flags.debug}s(fM,"isDebugEnabled");function dPe(t){return t.get(mm).flags.verboseLogging}s(dPe,"isVerboseLoggingEnabled");function fPe(t,e){return t.includes("--debug")||Ble(e,"DEBUG")}s(fPe,"determineDebugFlag");function gvt(t){return Ble(t,"SIMULATION")}s(gvt,"determineSimulationFlag");function _W(t){return t.get(mm).flags.simulation}s(_W,"isRunningInSimulation");function Avt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||Ble(e,"VERBOSE")||fPe(t,e)}s(Avt,"determineVerboseLoggingEnabled");function Ble(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(Ble,"determineEnvFlagEnabled");f();var Qc=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var hPe=require("os"),gPe=Fe(require("path"));function pM(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(pM,"redactPaths");var yvt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),Cvt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function Lle(t){if(yvt.has(t))return t;for(let e of Cvt)if(e.test(t))return t;return pM(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(Lle,"redactMessage");function RW(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(RW,"escapeForRegExp");var vvt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+RW((0,hPe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function Nle(t){return t.replace(vvt,"~")}s(Nle,"redactHomeDir");var APe="[\\\\/]?([^:)]*)(?=:\\d)",pPe=new RegExp(RW(gPe.sep),"g"),mPe=new RegExp(RW(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+APe,"gi");function Mle(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(mPe.test(c))i.stack+=`
${pM(c.replace(mPe,(l,u)=>"./"+u.replace(pPe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${pM(c)}`;else{let l=!1;for(let{prefix:u,path:d}of n){let p=new RegExp(RW(d.replace(/[\\/]$/,""))+APe,"gi");if(p.test(c)){i.stack+=`
${pM(c.replace(p,(m,h)=>u+h.replace(pPe,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${Nle(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=Nle(o));return t.cause instanceof Error&&(i.cause=Mle(t.cause,e,r,n)),i}s(Mle,"cloneError");function yPe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(yPe,"errorMessageWithoutPath");function CPe(t,e){return Mle(t,s(function(n){return Nle(yPe(n))},"prepareMessage"),!0,e)}s(CPe,"prepareErrorForRestrictedTelemetry");function vPe(t,e,r=!1){return Mle(t,s(function(i){if(r)return Lle(yPe(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=pM(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(vPe,"redactError");f();f();var ad={};ma(ad,{HasPropertyKey:()=>kW,IsArray:()=>gc,IsAsyncIterator:()=>Fle,IsBigInt:()=>mM,IsBoolean:()=>Z1,IsDate:()=>KS,IsFunction:()=>Ole,IsIterator:()=>Qle,IsNull:()=>Ule,IsNumber:()=>j0,IsObject:()=>es,IsRegExp:()=>hM,IsString:()=>ys,IsSymbol:()=>qle,IsUint8Array:()=>ev,IsUndefined:()=>Ac});f();function kW(t,e){return e in t}s(kW,"HasPropertyKey");function Fle(t){return es(t)&&!gc(t)&&!ev(t)&&Symbol.asyncIterator in t}s(Fle,"IsAsyncIterator");function gc(t){return Array.isArray(t)}s(gc,"IsArray");function mM(t){return typeof t=="bigint"}s(mM,"IsBigInt");function Z1(t){return typeof t=="boolean"}s(Z1,"IsBoolean");function KS(t){return t instanceof globalThis.Date}s(KS,"IsDate");function Ole(t){return typeof t=="function"}s(Ole,"IsFunction");function Qle(t){return es(t)&&!gc(t)&&!ev(t)&&Symbol.iterator in t}s(Qle,"IsIterator");function Ule(t){return t===null}s(Ule,"IsNull");function j0(t){return typeof t=="number"}s(j0,"IsNumber");function es(t){return typeof t=="object"&&t!==null}s(es,"IsObject");function hM(t){return t instanceof globalThis.RegExp}s(hM,"IsRegExp");function ys(t){return typeof t=="string"}s(ys,"IsString");function qle(t){return typeof t=="symbol"}s(qle,"IsSymbol");function ev(t){return t instanceof globalThis.Uint8Array}s(ev,"IsUint8Array");function Ac(t){return t===void 0}s(Ac,"IsUndefined");function Evt(t){return t.map(e=>PW(e))}s(Evt,"ArrayType");function xvt(t){return new Date(t.getTime())}s(xvt,"DateType");function bvt(t){return new Uint8Array(t)}s(bvt,"Uint8ArrayType");function Ivt(t){return new RegExp(t.source,t.flags)}s(Ivt,"RegExpType");function Tvt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=PW(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=PW(t[r]);return e}s(Tvt,"ObjectType");function PW(t){return gc(t)?Evt(t):KS(t)?xvt(t):ev(t)?bvt(t):hM(t)?Ivt(t):es(t)?Tvt(t):t}s(PW,"Visit");function $s(t){return PW(t)}s($s,"Clone");function DP(t,e){return e===void 0?$s(t):$s({...e,...t})}s(DP,"CloneType");f();f();f();function DW(t){return bi(t)&&globalThis.Symbol.asyncIterator in t}s(DW,"IsAsyncIterator");function BW(t){return bi(t)&&globalThis.Symbol.iterator in t}s(BW,"IsIterator");function Hle(t){return bi(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(Hle,"IsStandardObject");function NW(t){return t instanceof globalThis.Promise}s(NW,"IsPromise");function $d(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s($d,"IsDate");function EPe(t){return t instanceof globalThis.Map}s(EPe,"IsMap");function xPe(t){return t instanceof globalThis.Set}s(xPe,"IsSet");function hm(t){return globalThis.ArrayBuffer.isView(t)}s(hm,"IsTypedArray");function BP(t){return t instanceof globalThis.Uint8Array}s(BP,"IsUint8Array");function wn(t,e){return e in t}s(wn,"HasPropertyKey");function bi(t){return t!==null&&typeof t=="object"}s(bi,"IsObject");function Sn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Sn,"IsArray");function js(t){return t===void 0}s(js,"IsUndefined");function tv(t){return t===null}s(tv,"IsNull");function wy(t){return typeof t=="boolean"}s(wy,"IsBoolean");function rn(t){return typeof t=="number"}s(rn,"IsNumber");function LW(t){return globalThis.Number.isInteger(t)}s(LW,"IsInteger");function vu(t){return typeof t=="bigint"}s(vu,"IsBigInt");function fo(t){return typeof t=="string"}s(fo,"IsString");function Mb(t){return typeof t=="function"}s(Mb,"IsFunction");function rv(t){return typeof t=="symbol"}s(rv,"IsSymbol");function G0(t){return vu(t)||wy(t)||tv(t)||rn(t)||fo(t)||rv(t)||js(t)}s(G0,"IsValueType");var _s;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=bi(a);return t.AllowArrayObject?c:c&&!Sn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?rn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=js(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(_s||(_s={}));f();function wvt(t){return globalThis.Object.freeze(t).map(e=>gM(e))}s(wvt,"ImmutableArray");function Svt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=gM(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=gM(t[r]);return globalThis.Object.freeze(e)}s(Svt,"ImmutableObject");function gM(t){return gc(t)?wvt(t):KS(t)?t:ev(t)?t:hM(t)?t:es(t)?Svt(t):t}s(gM,"Immutable");function at(t,e){let r=e!==void 0?{...e,...t}:t;switch(_s.InstanceMode){case"freeze":return gM(r);case"clone":return $s(r);default:return r}}s(at,"CreateType");f();var _n=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var ga=Symbol.for("TypeBox.Transform"),Cg=Symbol.for("TypeBox.Readonly"),Eu=Symbol.for("TypeBox.Optional"),gm=Symbol.for("TypeBox.Hint"),ot=Symbol.for("TypeBox.Kind");function NP(t){return es(t)&&t[Cg]==="Readonly"}s(NP,"IsReadonly");function Lf(t){return es(t)&&t[Eu]==="Optional"}s(Lf,"IsOptional");function Wle(t){return to(t,"Any")}s(Wle,"IsAny");function $le(t){return to(t,"Argument")}s($le,"IsArgument");function vg(t){return to(t,"Array")}s(vg,"IsArray");function JS(t){return to(t,"AsyncIterator")}s(JS,"IsAsyncIterator");function XS(t){return to(t,"BigInt")}s(XS,"IsBigInt");function nv(t){return to(t,"Boolean")}s(nv,"IsBoolean");function Eg(t){return to(t,"Computed")}s(Eg,"IsComputed");function xg(t){return to(t,"Constructor")}s(xg,"IsConstructor");function _vt(t){return to(t,"Date")}s(_vt,"IsDate");function bg(t){return to(t,"Function")}s(bg,"IsFunction");function Ig(t){return to(t,"Integer")}s(Ig,"IsInteger");function Da(t){return to(t,"Intersect")}s(Da,"IsIntersect");function ZS(t){return to(t,"Iterator")}s(ZS,"IsIterator");function to(t,e){return es(t)&&ot in t&&t[ot]===e}s(to,"IsKindOf");function MW(t){return Z1(t)||j0(t)||ys(t)}s(MW,"IsLiteralValue");function V0(t){return to(t,"Literal")}s(V0,"IsLiteral");function z0(t){return to(t,"MappedKey")}s(z0,"IsMappedKey");function Gs(t){return to(t,"MappedResult")}s(Gs,"IsMappedResult");function Fb(t){return to(t,"Never")}s(Fb,"IsNever");function Rvt(t){return to(t,"Not")}s(Rvt,"IsNot");function AM(t){return to(t,"Null")}s(AM,"IsNull");function Tg(t){return to(t,"Number")}s(Tg,"IsNumber");function yc(t){return to(t,"Object")}s(yc,"IsObject");function e_(t){return to(t,"Promise")}s(e_,"IsPromise");function t_(t){return to(t,"Record")}s(t_,"IsRecord");function $a(t){return to(t,"Ref")}s($a,"IsRef");function jle(t){return to(t,"RegExp")}s(jle,"IsRegExp");function iv(t){return to(t,"String")}s(iv,"IsString");function yM(t){return to(t,"Symbol")}s(yM,"IsSymbol");function Y0(t){return to(t,"TemplateLiteral")}s(Y0,"IsTemplateLiteral");function kvt(t){return to(t,"This")}s(kvt,"IsThis");function Bo(t){return es(t)&&ga in t}s(Bo,"IsTransform");function K0(t){return to(t,"Tuple")}s(K0,"IsTuple");function ov(t){return to(t,"Undefined")}s(ov,"IsUndefined");function po(t){return to(t,"Union")}s(po,"IsUnion");function Pvt(t){return to(t,"Uint8Array")}s(Pvt,"IsUint8Array");function Dvt(t){return to(t,"Unknown")}s(Dvt,"IsUnknown");function Bvt(t){return to(t,"Unsafe")}s(Bvt,"IsUnsafe");function Nvt(t){return to(t,"Void")}s(Nvt,"IsVoid");function Ob(t){return es(t)&&ot in t&&ys(t[ot])}s(Ob,"IsKind");function Aa(t){return Wle(t)||$le(t)||vg(t)||nv(t)||XS(t)||JS(t)||Eg(t)||xg(t)||_vt(t)||bg(t)||Ig(t)||Da(t)||ZS(t)||V0(t)||z0(t)||Gs(t)||Fb(t)||Rvt(t)||AM(t)||Tg(t)||yc(t)||e_(t)||t_(t)||$a(t)||jle(t)||iv(t)||yM(t)||Y0(t)||kvt(t)||K0(t)||ov(t)||po(t)||Pvt(t)||Dvt(t)||Bvt(t)||Nvt(t)||Ob(t)}s(Aa,"IsSchema");var Le={};ma(Le,{IsAny:()=>wPe,IsArgument:()=>SPe,IsArray:()=>_Pe,IsAsyncIterator:()=>RPe,IsBigInt:()=>kPe,IsBoolean:()=>PPe,IsComputed:()=>DPe,IsConstructor:()=>BPe,IsDate:()=>NPe,IsFunction:()=>LPe,IsImport:()=>Uvt,IsInteger:()=>MPe,IsIntersect:()=>FPe,IsIterator:()=>OPe,IsKind:()=>u4e,IsKindOf:()=>Di,IsLiteral:()=>vM,IsLiteralBoolean:()=>qvt,IsLiteralNumber:()=>UPe,IsLiteralString:()=>QPe,IsLiteralValue:()=>qPe,IsMappedKey:()=>HPe,IsMappedResult:()=>WPe,IsNever:()=>$Pe,IsNot:()=>jPe,IsNull:()=>GPe,IsNumber:()=>VPe,IsObject:()=>zPe,IsOptional:()=>Qvt,IsPromise:()=>YPe,IsProperties:()=>FW,IsReadonly:()=>Ovt,IsRecord:()=>KPe,IsRecursive:()=>Hvt,IsRef:()=>JPe,IsRegExp:()=>XPe,IsSchema:()=>Vs,IsString:()=>ZPe,IsSymbol:()=>e4e,IsTemplateLiteral:()=>t4e,IsThis:()=>r4e,IsTransform:()=>n4e,IsTuple:()=>i4e,IsUint8Array:()=>s4e,IsUndefined:()=>o4e,IsUnion:()=>Yle,IsUnionLiteral:()=>Wvt,IsUnknown:()=>a4e,IsUnsafe:()=>c4e,IsVoid:()=>l4e,TypeGuardUnknownTypeError:()=>Gle});f();var Gle=class extends _n{static{s(this,"TypeGuardUnknownTypeError")}},Lvt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function bPe(t){try{return new RegExp(t),!0}catch{return!1}}s(bPe,"IsPattern");function Vle(t){if(!ys(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(Vle,"IsControlCharacterFree");function IPe(t){return zle(t)||Vs(t)}s(IPe,"IsAdditionalProperties");function CM(t){return Ac(t)||mM(t)}s(CM,"IsOptionalBigInt");function Cs(t){return Ac(t)||j0(t)}s(Cs,"IsOptionalNumber");function zle(t){return Ac(t)||Z1(t)}s(zle,"IsOptionalBoolean");function ts(t){return Ac(t)||ys(t)}s(ts,"IsOptionalString");function Mvt(t){return Ac(t)||ys(t)&&Vle(t)&&bPe(t)}s(Mvt,"IsOptionalPattern");function Fvt(t){return Ac(t)||ys(t)&&Vle(t)}s(Fvt,"IsOptionalFormat");function TPe(t){return Ac(t)||Vs(t)}s(TPe,"IsOptionalSchema");function Ovt(t){return es(t)&&t[Cg]==="Readonly"}s(Ovt,"IsReadonly");function Qvt(t){return es(t)&&t[Eu]==="Optional"}s(Qvt,"IsOptional");function wPe(t){return Di(t,"Any")&&ts(t.$id)}s(wPe,"IsAny");function SPe(t){return Di(t,"Argument")&&j0(t.index)}s(SPe,"IsArgument");function _Pe(t){return Di(t,"Array")&&t.type==="array"&&ts(t.$id)&&Vs(t.items)&&Cs(t.minItems)&&Cs(t.maxItems)&&zle(t.uniqueItems)&&TPe(t.contains)&&Cs(t.minContains)&&Cs(t.maxContains)}s(_Pe,"IsArray");function RPe(t){return Di(t,"AsyncIterator")&&t.type==="AsyncIterator"&&ts(t.$id)&&Vs(t.items)}s(RPe,"IsAsyncIterator");function kPe(t){return Di(t,"BigInt")&&t.type==="bigint"&&ts(t.$id)&&CM(t.exclusiveMaximum)&&CM(t.exclusiveMinimum)&&CM(t.maximum)&&CM(t.minimum)&&CM(t.multipleOf)}s(kPe,"IsBigInt");function PPe(t){return Di(t,"Boolean")&&t.type==="boolean"&&ts(t.$id)}s(PPe,"IsBoolean");function DPe(t){return Di(t,"Computed")&&ys(t.target)&&gc(t.parameters)&&t.parameters.every(e=>Vs(e))}s(DPe,"IsComputed");function BPe(t){return Di(t,"Constructor")&&t.type==="Constructor"&&ts(t.$id)&&gc(t.parameters)&&t.parameters.every(e=>Vs(e))&&Vs(t.returns)}s(BPe,"IsConstructor");function NPe(t){return Di(t,"Date")&&t.type==="Date"&&ts(t.$id)&&Cs(t.exclusiveMaximumTimestamp)&&Cs(t.exclusiveMinimumTimestamp)&&Cs(t.maximumTimestamp)&&Cs(t.minimumTimestamp)&&Cs(t.multipleOfTimestamp)}s(NPe,"IsDate");function LPe(t){return Di(t,"Function")&&t.type==="Function"&&ts(t.$id)&&gc(t.parameters)&&t.parameters.every(e=>Vs(e))&&Vs(t.returns)}s(LPe,"IsFunction");function Uvt(t){return Di(t,"Import")&&kW(t,"$defs")&&es(t.$defs)&&FW(t.$defs)&&kW(t,"$ref")&&ys(t.$ref)&&t.$ref in t.$defs}s(Uvt,"IsImport");function MPe(t){return Di(t,"Integer")&&t.type==="integer"&&ts(t.$id)&&Cs(t.exclusiveMaximum)&&Cs(t.exclusiveMinimum)&&Cs(t.maximum)&&Cs(t.minimum)&&Cs(t.multipleOf)}s(MPe,"IsInteger");function FW(t){return es(t)&&Object.entries(t).every(([e,r])=>Vle(e)&&Vs(r))}s(FW,"IsProperties");function FPe(t){return Di(t,"Intersect")&&!(ys(t.type)&&t.type!=="object")&&gc(t.allOf)&&t.allOf.every(e=>Vs(e)&&!n4e(e))&&ts(t.type)&&(zle(t.unevaluatedProperties)||TPe(t.unevaluatedProperties))&&ts(t.$id)}s(FPe,"IsIntersect");function OPe(t){return Di(t,"Iterator")&&t.type==="Iterator"&&ts(t.$id)&&Vs(t.items)}s(OPe,"IsIterator");function Di(t,e){return es(t)&&ot in t&&t[ot]===e}s(Di,"IsKindOf");function QPe(t){return vM(t)&&ys(t.const)}s(QPe,"IsLiteralString");function UPe(t){return vM(t)&&j0(t.const)}s(UPe,"IsLiteralNumber");function qvt(t){return vM(t)&&Z1(t.const)}s(qvt,"IsLiteralBoolean");function vM(t){return Di(t,"Literal")&&ts(t.$id)&&qPe(t.const)}s(vM,"IsLiteral");function qPe(t){return Z1(t)||j0(t)||ys(t)}s(qPe,"IsLiteralValue");function HPe(t){return Di(t,"MappedKey")&&gc(t.keys)&&t.keys.every(e=>j0(e)||ys(e))}s(HPe,"IsMappedKey");function WPe(t){return Di(t,"MappedResult")&&FW(t.properties)}s(WPe,"IsMappedResult");function $Pe(t){return Di(t,"Never")&&es(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s($Pe,"IsNever");function jPe(t){return Di(t,"Not")&&Vs(t.not)}s(jPe,"IsNot");function GPe(t){return Di(t,"Null")&&t.type==="null"&&ts(t.$id)}s(GPe,"IsNull");function VPe(t){return Di(t,"Number")&&t.type==="number"&&ts(t.$id)&&Cs(t.exclusiveMaximum)&&Cs(t.exclusiveMinimum)&&Cs(t.maximum)&&Cs(t.minimum)&&Cs(t.multipleOf)}s(VPe,"IsNumber");function zPe(t){return Di(t,"Object")&&t.type==="object"&&ts(t.$id)&&FW(t.properties)&&IPe(t.additionalProperties)&&Cs(t.minProperties)&&Cs(t.maxProperties)}s(zPe,"IsObject");function YPe(t){return Di(t,"Promise")&&t.type==="Promise"&&ts(t.$id)&&Vs(t.item)}s(YPe,"IsPromise");function KPe(t){return Di(t,"Record")&&t.type==="object"&&ts(t.$id)&&IPe(t.additionalProperties)&&es(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&bPe(r[0])&&es(e.patternProperties)&&Vs(e.patternProperties[r[0]])})(t)}s(KPe,"IsRecord");function Hvt(t){return es(t)&&gm in t&&t[gm]==="Recursive"}s(Hvt,"IsRecursive");function JPe(t){return Di(t,"Ref")&&ts(t.$id)&&ys(t.$ref)}s(JPe,"IsRef");function XPe(t){return Di(t,"RegExp")&&ts(t.$id)&&ys(t.source)&&ys(t.flags)&&Cs(t.maxLength)&&Cs(t.minLength)}s(XPe,"IsRegExp");function ZPe(t){return Di(t,"String")&&t.type==="string"&&ts(t.$id)&&Cs(t.minLength)&&Cs(t.maxLength)&&Mvt(t.pattern)&&Fvt(t.format)}s(ZPe,"IsString");function e4e(t){return Di(t,"Symbol")&&t.type==="symbol"&&ts(t.$id)}s(e4e,"IsSymbol");function t4e(t){return Di(t,"TemplateLiteral")&&t.type==="string"&&ys(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(t4e,"IsTemplateLiteral");function r4e(t){return Di(t,"This")&&ts(t.$id)&&ys(t.$ref)}s(r4e,"IsThis");function n4e(t){return es(t)&&ga in t}s(n4e,"IsTransform");function i4e(t){return Di(t,"Tuple")&&t.type==="array"&&ts(t.$id)&&j0(t.minItems)&&j0(t.maxItems)&&t.minItems===t.maxItems&&(Ac(t.items)&&Ac(t.additionalItems)&&t.minItems===0||gc(t.items)&&t.items.every(e=>Vs(e)))}s(i4e,"IsTuple");function o4e(t){return Di(t,"Undefined")&&t.type==="undefined"&&ts(t.$id)}s(o4e,"IsUndefined");function Wvt(t){return Yle(t)&&t.anyOf.every(e=>QPe(e)||UPe(e))}s(Wvt,"IsUnionLiteral");function Yle(t){return Di(t,"Union")&&ts(t.$id)&&es(t)&&gc(t.anyOf)&&t.anyOf.every(e=>Vs(e))}s(Yle,"IsUnion");function s4e(t){return Di(t,"Uint8Array")&&t.type==="Uint8Array"&&ts(t.$id)&&Cs(t.minByteLength)&&Cs(t.maxByteLength)}s(s4e,"IsUint8Array");function a4e(t){return Di(t,"Unknown")&&ts(t.$id)}s(a4e,"IsUnknown");function c4e(t){return Di(t,"Unsafe")}s(c4e,"IsUnsafe");function l4e(t){return Di(t,"Void")&&t.type==="void"&&ts(t.$id)}s(l4e,"IsVoid");function u4e(t){return es(t)&&ot in t&&ys(t[ot])&&!Lvt.includes(t[ot])}s(u4e,"IsKind");function Vs(t){return es(t)&&(wPe(t)||SPe(t)||_Pe(t)||PPe(t)||kPe(t)||RPe(t)||DPe(t)||BPe(t)||NPe(t)||LPe(t)||MPe(t)||FPe(t)||OPe(t)||vM(t)||HPe(t)||WPe(t)||$Pe(t)||jPe(t)||GPe(t)||VPe(t)||zPe(t)||YPe(t)||KPe(t)||JPe(t)||XPe(t)||ZPe(t)||e4e(t)||t4e(t)||r4e(t)||i4e(t)||o4e(t)||Yle(t)||s4e(t)||a4e(t)||c4e(t)||l4e(t)||u4e(t))}s(Vs,"IsSchema");f();var Kle="(true|false)",EM="(0|[1-9][0-9]*)",Jle="(.*)",$vt="(?!.*)",b2r=`^${Kle}$`,Sy=`^${EM}$`,_y=`^${Jle}$`,d4e=`^${$vt}$`;f();var wg={};ma(wg,{Clear:()=>Gvt,Delete:()=>Vvt,Entries:()=>jvt,Get:()=>Kvt,Has:()=>zvt,Set:()=>Yvt});f();var LP=new Map;function jvt(){return new Map(LP)}s(jvt,"Entries");function Gvt(){return LP.clear()}s(Gvt,"Clear");function Vvt(t){return LP.delete(t)}s(Vvt,"Delete");function zvt(t){return LP.has(t)}s(zvt,"Has");function Yvt(t,e){LP.set(t,e)}s(Yvt,"Set");function Kvt(t){return LP.get(t)}s(Kvt,"Get");var jd={};ma(jd,{Clear:()=>Xvt,Delete:()=>Zvt,Entries:()=>Jvt,Get:()=>rEt,Has:()=>eEt,Set:()=>tEt});f();var MP=new Map;function Jvt(){return new Map(MP)}s(Jvt,"Entries");function Xvt(){return MP.clear()}s(Xvt,"Clear");function Zvt(t){return MP.delete(t)}s(Zvt,"Delete");function eEt(t){return MP.has(t)}s(eEt,"Has");function tEt(t,e){MP.set(t,e)}s(tEt,"Set");function rEt(t){return MP.get(t)}s(rEt,"Get");f();function f4e(t,e){return t.includes(e)}s(f4e,"SetIncludes");function p4e(t){return[...new Set(t)]}s(p4e,"SetDistinct");function nEt(t,e){return t.filter(r=>e.includes(r))}s(nEt,"SetIntersect");function iEt(t,e){return t.reduce((r,n)=>nEt(r,n),e)}s(iEt,"SetIntersectManyResolve");function m4e(t){return t.length===1?t[0]:t.length>1?iEt(t.slice(1),t[0]):[]}s(m4e,"SetIntersectMany");function h4e(t){let e=[];for(let r of t)e.push(...r);return e}s(h4e,"SetUnionMany");f();function Qb(t){return at({[ot]:"Any"},t)}s(Qb,"Any");f();function FP(t,e){return at({[ot]:"Array",type:"array",items:t},e)}s(FP,"Array");f();function g4e(t){return at({[ot]:"Argument",index:t})}s(g4e,"Argument");f();function OP(t,e){return at({[ot]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(OP,"AsyncIterator");f();f();function Rs(t,e,r){return at({[ot]:"Computed",target:t,parameters:e},r)}s(Rs,"Computed");f();f();function oEt(t,e){let{[e]:r,...n}=t;return n}s(oEt,"DiscardKey");function Ba(t,e){return e.reduce((r,n)=>oEt(r,n),t)}s(Ba,"Discard");f();function Ai(t){return at({[ot]:"Never",not:{}},t)}s(Ai,"Never");f();f();function Co(t){return at({[ot]:"MappedResult",properties:t})}s(Co,"MappedResult");f();f();function QP(t,e,r){return at({[ot]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(QP,"Constructor");f();function Ry(t,e,r){return at({[ot]:"Function",type:"Function",parameters:t,returns:e},r)}s(Ry,"Function");f();f();f();f();function xM(t,e){return at({[ot]:"Union",anyOf:t},e)}s(xM,"UnionCreate");function sEt(t){return t.some(e=>Lf(e))}s(sEt,"IsUnionOptional");function A4e(t){return t.map(e=>Lf(e)?aEt(e):e)}s(A4e,"RemoveOptionalFromRest");function aEt(t){return Ba(t,[Eu])}s(aEt,"RemoveOptionalFromType");function cEt(t,e){return sEt(t)?cd(xM(A4e(t),e)):xM(A4e(t),e)}s(cEt,"ResolveUnion");function ky(t,e){return t.length===1?at(t[0],e):t.length===0?Ai(e):cEt(t,e)}s(ky,"UnionEvaluated");f();function No(t,e){return t.length===0?Ai(e):t.length===1?at(t[0],e):xM(t,e)}s(No,"Union");f();f();f();var OW=class extends _n{static{s(this,"TemplateLiteralParserError")}};function lEt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(lEt,"Unescape");function Xle(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(Xle,"IsNonEscaped");function av(t,e){return Xle(t,e,"(")}s(av,"IsOpenParen");function bM(t,e){return Xle(t,e,")")}s(bM,"IsCloseParen");function y4e(t,e){return Xle(t,e,"|")}s(y4e,"IsSeparator");function uEt(t){if(!(av(t,0)&&bM(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(av(t,r)&&(e+=1),bM(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(uEt,"IsGroup");function dEt(t){return t.slice(1,t.length-1)}s(dEt,"InGroup");function fEt(t){let e=0;for(let r=0;r<t.length;r++)if(av(t,r)&&(e+=1),bM(t,r)&&(e-=1),y4e(t,r)&&e===0)return!0;return!1}s(fEt,"IsPrecedenceOr");function pEt(t){for(let e=0;e<t.length;e++)if(av(t,e))return!0;return!1}s(pEt,"IsPrecedenceAnd");function mEt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(av(t,o)&&(e+=1),bM(t,o)&&(e-=1),y4e(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(UP(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(UP(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(mEt,"Or");function hEt(t){function e(i,o){if(!av(i,o))throw new OW("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(av(i,c)&&(a+=1),bM(i,c)&&(a-=1),a===0)return[o,c];throw new OW("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(av(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(av(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(UP(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(UP(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(hEt,"And");function UP(t){return uEt(t)?UP(dEt(t)):fEt(t)?mEt(t):pEt(t)?hEt(t):{type:"const",const:lEt(t)}}s(UP,"TemplateLiteralParse");function qP(t){return UP(t.slice(1,t.length-1))}s(qP,"TemplateLiteralParseExact");var Zle=class extends _n{static{s(this,"TemplateLiteralFiniteError")}};function gEt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(gEt,"IsNumberExpression");function AEt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(AEt,"IsBooleanExpression");function yEt(t){return t.type==="const"&&t.const===".*"}s(yEt,"IsStringExpression");function r_(t){return gEt(t)||yEt(t)?!1:AEt(t)?!0:t.type==="and"?t.expr.every(e=>r_(e)):t.type==="or"?t.expr.every(e=>r_(e)):t.type==="const"?!0:(()=>{throw new Zle("Unknown expression type")})()}s(r_,"IsTemplateLiteralExpressionFinite");function QW(t){let e=qP(t.pattern);return r_(e)}s(QW,"IsTemplateLiteralFinite");f();var eue=class extends _n{static{s(this,"TemplateLiteralGenerateError")}};function*C4e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of C4e(t.slice(1)))yield`${e}${r}`}s(C4e,"GenerateReduce");function*CEt(t){return yield*C4e(t.expr.map(e=>[...IM(e)]))}s(CEt,"GenerateAnd");function*vEt(t){for(let e of t.expr)yield*IM(e)}s(vEt,"GenerateOr");function*EEt(t){return yield t.const}s(EEt,"GenerateConst");function*IM(t){return t.type==="and"?yield*CEt(t):t.type==="or"?yield*vEt(t):t.type==="const"?yield*EEt(t):(()=>{throw new eue("Unknown expression")})()}s(IM,"TemplateLiteralExpressionGenerate");function HP(t){let e=qP(t.pattern);return r_(e)?[...IM(e)]:[]}s(HP,"TemplateLiteralGenerate");f();f();function ro(t,e){return at({[ot]:"Literal",const:t,type:typeof t},e)}s(ro,"Literal");f();function UW(t){return at({[ot]:"Boolean",type:"boolean"},t)}s(UW,"Boolean");f();function WP(t){return at({[ot]:"BigInt",type:"bigint"},t)}s(WP,"BigInt");f();function Am(t){return at({[ot]:"Number",type:"number"},t)}s(Am,"Number");f();function Gd(t){return at({[ot]:"String",type:"string"},t)}s(Gd,"String");function*xEt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield UW():e==="number"?yield Am():e==="bigint"?yield WP():e==="string"?yield Gd():yield(()=>{let r=e.split("|").map(n=>ro(n.trim()));return r.length===0?Ai():r.length===1?r[0]:ky(r)})()}s(xEt,"FromUnion");function*bEt(t){if(t[1]!=="{"){let e=ro("$"),r=tue(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=xEt(t.slice(2,e)),n=tue(t.slice(e+1));return yield*[...r,...n]}yield ro(t)}s(bEt,"FromTerminal");function*tue(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=ro(t.slice(0,e)),n=bEt(t.slice(e));return yield*[r,...n]}yield ro(t)}s(tue,"FromSyntax");function v4e(t){return[...tue(t)]}s(v4e,"TemplateLiteralSyntax");f();var rue=class extends _n{static{s(this,"TemplateLiteralPatternError")}};function IEt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(IEt,"Escape");function E4e(t,e){return Y0(t)?t.pattern.slice(1,t.pattern.length-1):po(t)?`(${t.anyOf.map(r=>E4e(r,e)).join("|")})`:Tg(t)?`${e}${EM}`:Ig(t)?`${e}${EM}`:XS(t)?`${e}${EM}`:iv(t)?`${e}${Jle}`:V0(t)?`${e}${IEt(t.const.toString())}`:nv(t)?`${e}${Kle}`:(()=>{throw new rue(`Unexpected Kind '${t[ot]}'`)})()}s(E4e,"Visit");function nue(t){return`^${t.map(e=>E4e(e,"")).join("")}$`}s(nue,"TemplateLiteralPattern");f();function n_(t){let r=HP(t).map(n=>ro(n));return ky(r)}s(n_,"TemplateLiteralToUnion");f();function qW(t,e){let r=ys(t)?nue(v4e(t)):nue(t);return at({[ot]:"TemplateLiteral",type:"string",pattern:r},e)}s(qW,"TemplateLiteral");function TEt(t){return HP(t).map(r=>r.toString())}s(TEt,"FromTemplateLiteral");function wEt(t){let e=[];for(let r of t)e.push(...Mf(r));return e}s(wEt,"FromUnion");function SEt(t){return[t.toString()]}s(SEt,"FromLiteral");function Mf(t){return[...new Set(Y0(t)?TEt(t):po(t)?wEt(t.anyOf):V0(t)?SEt(t.const):Tg(t)?["[number]"]:Ig(t)?["[number]"]:[])]}s(Mf,"IndexPropertyKeys");f();function _Et(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=Ub(t,Mf(e[i]),r);return n}s(_Et,"FromProperties");function REt(t,e,r){return _Et(t,e.properties,r)}s(REt,"FromMappedResult");function x4e(t,e,r){let n=REt(t,e,r);return Co(n)}s(x4e,"IndexFromMappedResult");function I4e(t,e){return t.map(r=>T4e(r,e))}s(I4e,"FromRest");function kEt(t){return t.filter(e=>!Fb(e))}s(kEt,"FromIntersectRest");function PEt(t,e){return HW(kEt(I4e(t,e)))}s(PEt,"FromIntersect");function DEt(t){return t.some(e=>Fb(e))?[]:t}s(DEt,"FromUnionRest");function BEt(t,e){return ky(DEt(I4e(t,e)))}s(BEt,"FromUnion");function NEt(t,e){return e in t?t[e]:e==="[number]"?ky(t):Ai()}s(NEt,"FromTuple");function LEt(t,e){return e==="[number]"?t:Ai()}s(LEt,"FromArray");function MEt(t,e){return e in t?t[e]:Ai()}s(MEt,"FromProperty");function T4e(t,e){return Da(t)?PEt(t.allOf,e):po(t)?BEt(t.anyOf,e):K0(t)?NEt(t.items??[],e):vg(t)?LEt(t.items,e):yc(t)?MEt(t.properties,e):Ai()}s(T4e,"IndexFromPropertyKey");function TM(t,e){return e.map(r=>T4e(t,r))}s(TM,"IndexFromPropertyKeys");function b4e(t,e){return ky(TM(t,e))}s(b4e,"FromSchema");function Ub(t,e,r){if($a(t)||$a(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Aa(t)||!Aa(e))throw new _n(n);return Rs("Index",[t,e])}return Gs(e)?x4e(t,e,r):z0(e)?w4e(t,e,r):at(Aa(e)?b4e(t,Mf(e)):b4e(t,e),r)}s(Ub,"Index");function FEt(t,e,r){return{[e]:Ub(t,[e],$s(r))}}s(FEt,"MappedIndexPropertyKey");function OEt(t,e,r){return e.reduce((n,i)=>({...n,...FEt(t,i,r)}),{})}s(OEt,"MappedIndexPropertyKeys");function QEt(t,e,r){return OEt(t,e.keys,r)}s(QEt,"MappedIndexProperties");function w4e(t,e,r){let n=QEt(t,e,r);return Co(n)}s(w4e,"IndexFromMappedKey");f();function $P(t,e){return at({[ot]:"Iterator",type:"Iterator",items:t},e)}s($P,"Iterator");f();function UEt(t){let e=[];for(let r in t)Lf(t[r])||e.push(r);return e}s(UEt,"RequiredKeys");function qEt(t,e){let r=UEt(t),n=r.length>0?{[ot]:"Object",type:"object",properties:t,required:r}:{[ot]:"Object",type:"object",properties:t};return at(n,e)}s(qEt,"_Object");var Lo=qEt;f();function WW(t,e){return at({[ot]:"Promise",type:"Promise",item:t},e)}s(WW,"Promise");f();f();function HEt(t){return at(Ba(t,[Cg]))}s(HEt,"RemoveReadonly");function WEt(t){return at({...t,[Cg]:"Readonly"})}s(WEt,"AddReadonly");function $Et(t,e){return e===!1?HEt(t):WEt(t)}s($Et,"ReadonlyWithFlag");function Ff(t,e){let r=e??!0;return Gs(t)?S4e(t,r):$Et(t,r)}s(Ff,"Readonly");function jEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Ff(t[n],e);return r}s(jEt,"FromProperties");function GEt(t,e){return jEt(t.properties,e)}s(GEt,"FromMappedResult");function S4e(t,e){let r=GEt(t,e);return Co(r)}s(S4e,"ReadonlyFromMappedResult");f();function ym(t,e){return at(t.length>0?{[ot]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[ot]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(ym,"Tuple");function _4e(t,e){return t in e?Cm(t,e[t]):Co(e)}s(_4e,"FromMappedResult");function VEt(t){return{[t]:ro(t)}}s(VEt,"MappedKeyToKnownMappedResultProperties");function zEt(t){let e={};for(let r of t)e[r]=ro(r);return e}s(zEt,"MappedKeyToUnknownMappedResultProperties");function YEt(t,e){return f4e(e,t)?VEt(t):zEt(e)}s(YEt,"MappedKeyToMappedResultProperties");function KEt(t,e){let r=YEt(t,e);return _4e(t,r)}s(KEt,"FromMappedKey");function wM(t,e){return e.map(r=>Cm(t,r))}s(wM,"FromRest");function JEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Cm(t,e[n]);return r}s(JEt,"FromProperties");function Cm(t,e){let r={...e};return Lf(e)?cd(Cm(t,Ba(e,[Eu]))):NP(e)?Ff(Cm(t,Ba(e,[Cg]))):Gs(e)?_4e(t,e.properties):z0(e)?KEt(t,e.keys):xg(e)?QP(wM(t,e.parameters),Cm(t,e.returns),r):bg(e)?Ry(wM(t,e.parameters),Cm(t,e.returns),r):JS(e)?OP(Cm(t,e.items),r):ZS(e)?$P(Cm(t,e.items),r):Da(e)?ld(wM(t,e.allOf),r):po(e)?No(wM(t,e.anyOf),r):K0(e)?ym(wM(t,e.items??[]),r):yc(e)?Lo(JEt(t,e.properties),r):vg(e)?FP(Cm(t,e.items),r):e_(e)?WW(Cm(t,e.item),r):e}s(Cm,"FromSchemaType");function XEt(t,e){let r={};for(let n of t)r[n]=Cm(n,e);return r}s(XEt,"MappedFunctionReturnType");function R4e(t,e,r){let n=Aa(t)?Mf(t):t,i=e({[ot]:"MappedKey",keys:n}),o=XEt(n,i);return Lo(o,r)}s(R4e,"Mapped");f();function ZEt(t){return at(Ba(t,[Eu]))}s(ZEt,"RemoveOptional");function ext(t){return at({...t,[Eu]:"Optional"})}s(ext,"AddOptional");function txt(t,e){return e===!1?ZEt(t):ext(t)}s(txt,"OptionalWithFlag");function cd(t,e){let r=e??!0;return Gs(t)?k4e(t,r):txt(t,r)}s(cd,"Optional");function rxt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=cd(t[n],e);return r}s(rxt,"FromProperties");function nxt(t,e){return rxt(t.properties,e)}s(nxt,"FromMappedResult");function k4e(t,e){let r=nxt(t,e);return Co(r)}s(k4e,"OptionalFromMappedResult");f();function SM(t,e={}){let r=t.every(i=>yc(i)),n=Aa(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return at(e.unevaluatedProperties===!1||Aa(e.unevaluatedProperties)||r?{...n,[ot]:"Intersect",type:"object",allOf:t}:{...n,[ot]:"Intersect",allOf:t},e)}s(SM,"IntersectCreate");function ixt(t){return t.every(e=>Lf(e))}s(ixt,"IsIntersectOptional");function oxt(t){return Ba(t,[Eu])}s(oxt,"RemoveOptionalFromType");function P4e(t){return t.map(e=>Lf(e)?oxt(e):e)}s(P4e,"RemoveOptionalFromRest");function sxt(t,e){return ixt(t)?cd(SM(P4e(t),e)):SM(P4e(t),e)}s(sxt,"ResolveIntersect");function HW(t,e={}){if(t.length===1)return at(t[0],e);if(t.length===0)return Ai(e);if(t.some(r=>Bo(r)))throw new Error("Cannot intersect transform types");return sxt(t,e)}s(HW,"IntersectEvaluated");f();function ld(t,e){if(t.length===1)return at(t[0],e);if(t.length===0)return Ai(e);if(t.some(r=>Bo(r)))throw new Error("Cannot intersect transform types");return SM(t,e)}s(ld,"Intersect");f();function vm(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new _n("Ref: $ref must be a string");return at({[ot]:"Ref",$ref:e},r)}s(vm,"Ref");function axt(t,e){return Rs("Awaited",[Rs(t,e)])}s(axt,"FromComputed");function cxt(t){return Rs("Awaited",[vm(t)])}s(cxt,"FromRef");function lxt(t){return ld(D4e(t))}s(lxt,"FromIntersect");function uxt(t){return No(D4e(t))}s(uxt,"FromUnion");function dxt(t){return jP(t)}s(dxt,"FromPromise");function D4e(t){return t.map(e=>jP(e))}s(D4e,"FromRest");function jP(t,e){return at(Eg(t)?axt(t.target,t.parameters):Da(t)?lxt(t.allOf):po(t)?uxt(t.anyOf):e_(t)?dxt(t.item):$a(t)?cxt(t.$ref):t,e)}s(jP,"Awaited");f();f();f();f();function B4e(t){let e=[];for(let r of t)e.push(Of(r));return e}s(B4e,"FromRest");function fxt(t){let e=B4e(t);return h4e(e)}s(fxt,"FromIntersect");function pxt(t){let e=B4e(t);return m4e(e)}s(pxt,"FromUnion");function mxt(t){return t.map((e,r)=>r.toString())}s(mxt,"FromTuple");function hxt(t){return["[number]"]}s(hxt,"FromArray");function gxt(t){return globalThis.Object.getOwnPropertyNames(t)}s(gxt,"FromProperties");function Axt(t){return iue?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(Axt,"FromPatternProperties");function Of(t){return Da(t)?fxt(t.allOf):po(t)?pxt(t.anyOf):K0(t)?mxt(t.items??[]):vg(t)?hxt(t.items):yc(t)?gxt(t.properties):t_(t)?Axt(t.patternProperties):[]}s(Of,"KeyOfPropertyKeys");var iue=!1;function cv(t){iue=!0;let e=Of(t);return iue=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(cv,"KeyOfPattern");function yxt(t,e){return Rs("KeyOf",[Rs(t,e)])}s(yxt,"FromComputed");function Cxt(t){return Rs("KeyOf",[vm(t)])}s(Cxt,"FromRef");function vxt(t,e){let r=Of(t),n=Ext(r),i=ky(n);return at(i,e)}s(vxt,"KeyOfFromType");function Ext(t){return t.map(e=>e==="[number]"?Am():ro(e))}s(Ext,"KeyOfPropertyKeysToRest");function GP(t,e){return Eg(t)?yxt(t.target,t.parameters):$a(t)?Cxt(t.$ref):Gs(t)?N4e(t,e):vxt(t,e)}s(GP,"KeyOf");function xxt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=GP(t[n],$s(e));return r}s(xxt,"FromProperties");function bxt(t,e){return xxt(t.properties,e)}s(bxt,"FromMappedResult");function N4e(t,e){let r=bxt(t,e);return Co(r)}s(N4e,"KeyOfFromMappedResult");f();function $W(t){let e=Of(t),r=TM(t,e);return e.map((n,i)=>[e[i],r[i]])}s($W,"KeyOfPropertyEntries");function Ixt(t){let e=[];for(let r of t)e.push(...Of(r));return p4e(e)}s(Ixt,"CompositeKeys");function Txt(t){return t.filter(e=>!Fb(e))}s(Txt,"FilterNever");function wxt(t,e){let r=[];for(let n of t)r.push(...TM(n,[e]));return Txt(r)}s(wxt,"CompositeProperty");function Sxt(t,e){let r={};for(let n of e)r[n]=HW(wxt(t,n));return r}s(Sxt,"CompositeProperties");function L4e(t,e){let r=Ixt(t),n=Sxt(t,r);return Lo(n,e)}s(L4e,"Composite");f();f();function jW(t){return at({[ot]:"Date",type:"Date"},t)}s(jW,"Date");f();function GW(t){return at({[ot]:"Null",type:"null"},t)}s(GW,"Null");f();function VW(t){return at({[ot]:"Symbol",type:"symbol"},t)}s(VW,"Symbol");f();function zW(t){return at({[ot]:"Undefined",type:"undefined"},t)}s(zW,"Undefined");f();function YW(t){return at({[ot]:"Uint8Array",type:"Uint8Array"},t)}s(YW,"Uint8Array");f();function Sg(t){return at({[ot]:"Unknown"},t)}s(Sg,"Unknown");function _xt(t){return t.map(e=>oue(e,!1))}s(_xt,"FromArray");function Rxt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ff(oue(t[r],!1));return e}s(Rxt,"FromProperties");function KW(t,e){return e===!0?t:Ff(t)}s(KW,"ConditionalReadonly");function oue(t,e){return Fle(t)?KW(Qb(),e):Qle(t)?KW(Qb(),e):gc(t)?Ff(ym(_xt(t))):ev(t)?YW():KS(t)?jW():es(t)?KW(Lo(Rxt(t)),e):Ole(t)?KW(Ry([],Sg()),e):Ac(t)?zW():Ule(t)?GW():qle(t)?VW():mM(t)?WP():j0(t)?ro(t):Z1(t)?ro(t):ys(t)?ro(t):Lo({})}s(oue,"FromValue");function M4e(t,e){return at(oue(t,!0),e)}s(M4e,"Const");f();function F4e(t,e){return xg(t)?ym(t.parameters,e):Ai(e)}s(F4e,"ConstructorParameters");f();function O4e(t,e){if(Ac(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>ro(o));return No(i,{...e,[gm]:"Enum"})}s(O4e,"Enum");f();f();f();var aue=class extends _n{static{s(this,"ExtendsResolverError")}},ct;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ct||(ct={}));function Em(t){return t===ct.False?t:ct.True}s(Em,"IntoBooleanResult");function VP(t){throw new aue(t)}s(VP,"Throw");function Uc(t){return Le.IsNever(t)||Le.IsIntersect(t)||Le.IsUnion(t)||Le.IsUnknown(t)||Le.IsAny(t)}s(Uc,"IsStructuralRight");function qc(t,e){return Le.IsNever(e)?j4e(t,e):Le.IsIntersect(e)?JW(t,e):Le.IsUnion(e)?due(t,e):Le.IsUnknown(e)?Y4e(t,e):Le.IsAny(e)?uue(t,e):VP("StructuralRight")}s(qc,"StructuralRight");function uue(t,e){return ct.True}s(uue,"FromAnyRight");function kxt(t,e){return Le.IsIntersect(e)?JW(t,e):Le.IsUnion(e)&&e.anyOf.some(r=>Le.IsAny(r)||Le.IsUnknown(r))?ct.True:Le.IsUnion(e)?ct.Union:Le.IsUnknown(e)||Le.IsAny(e)?ct.True:ct.Union}s(kxt,"FromAny");function Pxt(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)?ct.True:ct.False}s(Pxt,"FromArrayRight");function Dxt(t,e){return Le.IsObject(e)&&XW(e)?ct.True:Uc(e)?qc(t,e):Le.IsArray(e)?Em(rs(t.items,e.items)):ct.False}s(Dxt,"FromArray");function Bxt(t,e){return Uc(e)?qc(t,e):Le.IsAsyncIterator(e)?Em(rs(t.items,e.items)):ct.False}s(Bxt,"FromAsyncIterator");function Nxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsBigInt(e)?ct.True:ct.False}s(Nxt,"FromBigInt");function W4e(t,e){return Le.IsLiteralBoolean(t)||Le.IsBoolean(t)?ct.True:ct.False}s(W4e,"FromBooleanRight");function Lxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsBoolean(e)?ct.True:ct.False}s(Lxt,"FromBoolean");function Mxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsConstructor(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Em(rs(e.parameters[n],r))===ct.True)?Em(rs(t.returns,e.returns)):ct.False:ct.False}s(Mxt,"FromConstructor");function Fxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsDate(e)?ct.True:ct.False}s(Fxt,"FromDate");function Oxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsFunction(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Em(rs(e.parameters[n],r))===ct.True)?Em(rs(t.returns,e.returns)):ct.False:ct.False}s(Oxt,"FromFunction");function $4e(t,e){return Le.IsLiteral(t)&&ad.IsNumber(t.const)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s($4e,"FromIntegerRight");function Qxt(t,e){return Le.IsInteger(e)||Le.IsNumber(e)?ct.True:Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):ct.False}s(Qxt,"FromInteger");function JW(t,e){return e.allOf.every(r=>rs(t,r)===ct.True)?ct.True:ct.False}s(JW,"FromIntersectRight");function Uxt(t,e){return t.allOf.some(r=>rs(r,e)===ct.True)?ct.True:ct.False}s(Uxt,"FromIntersect");function qxt(t,e){return Uc(e)?qc(t,e):Le.IsIterator(e)?Em(rs(t.items,e.items)):ct.False}s(qxt,"FromIterator");function Hxt(t,e){return Le.IsLiteral(e)&&e.const===t.const?ct.True:Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsString(e)?z4e(t,e):Le.IsNumber(e)?G4e(t,e):Le.IsInteger(e)?$4e(t,e):Le.IsBoolean(e)?W4e(t,e):ct.False}s(Hxt,"FromLiteral");function j4e(t,e){return ct.False}s(j4e,"FromNeverRight");function Wxt(t,e){return ct.True}s(Wxt,"FromNever");function Q4e(t){let[e,r]=[t,0];for(;Le.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Sg()}s(Q4e,"UnwrapTNot");function $xt(t,e){return Le.IsNot(t)?rs(Q4e(t),e):Le.IsNot(e)?rs(t,Q4e(e)):VP("Invalid fallthrough for Not")}s($xt,"FromNot");function jxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsNull(e)?ct.True:ct.False}s(jxt,"FromNull");function G4e(t,e){return Le.IsLiteralNumber(t)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(G4e,"FromNumberRight");function Gxt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsInteger(e)||Le.IsNumber(e)?ct.True:ct.False}s(Gxt,"FromNumber");function Qf(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(Qf,"IsObjectPropertyCount");function U4e(t){return XW(t)}s(U4e,"IsObjectStringLike");function q4e(t){return Qf(t,0)||Qf(t,1)&&"description"in t.properties&&Le.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Le.IsString(t.properties.description.anyOf[0])&&Le.IsUndefined(t.properties.description.anyOf[1])||Le.IsString(t.properties.description.anyOf[1])&&Le.IsUndefined(t.properties.description.anyOf[0]))}s(q4e,"IsObjectSymbolLike");function sue(t){return Qf(t,0)}s(sue,"IsObjectNumberLike");function H4e(t){return Qf(t,0)}s(H4e,"IsObjectBooleanLike");function Vxt(t){return Qf(t,0)}s(Vxt,"IsObjectBigIntLike");function zxt(t){return Qf(t,0)}s(zxt,"IsObjectDateLike");function Yxt(t){return XW(t)}s(Yxt,"IsObjectUint8ArrayLike");function Kxt(t){let e=Am();return Qf(t,0)||Qf(t,1)&&"length"in t.properties&&Em(rs(t.properties.length,e))===ct.True}s(Kxt,"IsObjectFunctionLike");function Jxt(t){return Qf(t,0)}s(Jxt,"IsObjectConstructorLike");function XW(t){let e=Am();return Qf(t,0)||Qf(t,1)&&"length"in t.properties&&Em(rs(t.properties.length,e))===ct.True}s(XW,"IsObjectArrayLike");function Xxt(t){let e=Ry([Qb()],Qb());return Qf(t,0)||Qf(t,1)&&"then"in t.properties&&Em(rs(t.properties.then,e))===ct.True}s(Xxt,"IsObjectPromiseLike");function V4e(t,e){return rs(t,e)===ct.False||Le.IsOptional(t)&&!Le.IsOptional(e)?ct.False:ct.True}s(V4e,"Property");function ud(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)||Le.IsLiteralString(t)&&U4e(e)||Le.IsLiteralNumber(t)&&sue(e)||Le.IsLiteralBoolean(t)&&H4e(e)||Le.IsSymbol(t)&&q4e(e)||Le.IsBigInt(t)&&Vxt(e)||Le.IsString(t)&&U4e(e)||Le.IsSymbol(t)&&q4e(e)||Le.IsNumber(t)&&sue(e)||Le.IsInteger(t)&&sue(e)||Le.IsBoolean(t)&&H4e(e)||Le.IsUint8Array(t)&&Yxt(e)||Le.IsDate(t)&&zxt(e)||Le.IsConstructor(t)&&Jxt(e)||Le.IsFunction(t)&&Kxt(e)?ct.True:Le.IsRecord(t)&&Le.IsString(cue(t))?e[gm]==="Record"?ct.True:ct.False:Le.IsRecord(t)&&Le.IsNumber(cue(t))?Qf(e,0)?ct.True:ct.False:ct.False}s(ud,"FromObjectRight");function Zxt(t,e){return Uc(e)?qc(t,e):Le.IsRecord(e)?xm(t,e):Le.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Le.IsOptional(e.properties[r]))return ct.False;if(Le.IsOptional(e.properties[r]))return ct.True;if(V4e(t.properties[r],e.properties[r])===ct.False)return ct.False}return ct.True})():ct.False}s(Zxt,"FromObject");function ebt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)&&Xxt(e)?ct.True:Le.IsPromise(e)?Em(rs(t.item,e.item)):ct.False}s(ebt,"FromPromise");function cue(t){return Sy in t.patternProperties?Am():_y in t.patternProperties?Gd():VP("Unknown record key pattern")}s(cue,"RecordKey");function lue(t){return Sy in t.patternProperties?t.patternProperties[Sy]:_y in t.patternProperties?t.patternProperties[_y]:VP("Unable to get record value schema")}s(lue,"RecordValue");function xm(t,e){let[r,n]=[cue(e),lue(e)];return Le.IsLiteralString(t)&&Le.IsNumber(r)&&Em(rs(t,n))===ct.True?ct.True:Le.IsUint8Array(t)&&Le.IsNumber(r)||Le.IsString(t)&&Le.IsNumber(r)||Le.IsArray(t)&&Le.IsNumber(r)?rs(t,n):Le.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(V4e(n,t.properties[i])===ct.False)return ct.False;return ct.True})():ct.False}s(xm,"FromRecordRight");function tbt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?rs(lue(t),lue(e)):ct.False}s(tbt,"FromRecord");function rbt(t,e){let r=Le.IsRegExp(t)?Gd():t,n=Le.IsRegExp(e)?Gd():e;return rs(r,n)}s(rbt,"FromRegExp");function z4e(t,e){return Le.IsLiteral(t)&&ad.IsString(t.const)||Le.IsString(t)?ct.True:ct.False}s(z4e,"FromStringRight");function nbt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsString(e)?ct.True:ct.False}s(nbt,"FromString");function ibt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsSymbol(e)?ct.True:ct.False}s(ibt,"FromSymbol");function obt(t,e){return Le.IsTemplateLiteral(t)?rs(n_(t),e):Le.IsTemplateLiteral(e)?rs(t,n_(e)):VP("Invalid fallthrough for TemplateLiteral")}s(obt,"FromTemplateLiteral");function sbt(t,e){return Le.IsArray(e)&&t.items!==void 0&&t.items.every(r=>rs(r,e.items)===ct.True)}s(sbt,"IsArrayOfTuple");function abt(t,e){return Le.IsNever(t)?ct.True:Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:ct.False}s(abt,"FromTupleRight");function cbt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)&&XW(e)||Le.IsArray(e)&&sbt(t,e)?ct.True:Le.IsTuple(e)?ad.IsUndefined(t.items)&&!ad.IsUndefined(e.items)||!ad.IsUndefined(t.items)&&ad.IsUndefined(e.items)?ct.False:ad.IsUndefined(t.items)&&!ad.IsUndefined(e.items)||t.items.every((r,n)=>rs(r,e.items[n])===ct.True)?ct.True:ct.False:ct.False}s(cbt,"FromTuple");function lbt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsUint8Array(e)?ct.True:ct.False}s(lbt,"FromUint8Array");function ubt(t,e){return Uc(e)?qc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?xm(t,e):Le.IsVoid(e)?pbt(t,e):Le.IsUndefined(e)?ct.True:ct.False}s(ubt,"FromUndefined");function due(t,e){return e.anyOf.some(r=>rs(t,r)===ct.True)?ct.True:ct.False}s(due,"FromUnionRight");function dbt(t,e){return t.anyOf.every(r=>rs(r,e)===ct.True)?ct.True:ct.False}s(dbt,"FromUnion");function Y4e(t,e){return ct.True}s(Y4e,"FromUnknownRight");function fbt(t,e){return Le.IsNever(e)?j4e(t,e):Le.IsIntersect(e)?JW(t,e):Le.IsUnion(e)?due(t,e):Le.IsAny(e)?uue(t,e):Le.IsString(e)?z4e(t,e):Le.IsNumber(e)?G4e(t,e):Le.IsInteger(e)?$4e(t,e):Le.IsBoolean(e)?W4e(t,e):Le.IsArray(e)?Pxt(t,e):Le.IsTuple(e)?abt(t,e):Le.IsObject(e)?ud(t,e):Le.IsUnknown(e)?ct.True:ct.False}s(fbt,"FromUnknown");function pbt(t,e){return Le.IsUndefined(t)||Le.IsUndefined(t)?ct.True:ct.False}s(pbt,"FromVoidRight");function mbt(t,e){return Le.IsIntersect(e)?JW(t,e):Le.IsUnion(e)?due(t,e):Le.IsUnknown(e)?Y4e(t,e):Le.IsAny(e)?uue(t,e):Le.IsObject(e)?ud(t,e):Le.IsVoid(e)?ct.True:ct.False}s(mbt,"FromVoid");function rs(t,e){return Le.IsTemplateLiteral(t)||Le.IsTemplateLiteral(e)?obt(t,e):Le.IsRegExp(t)||Le.IsRegExp(e)?rbt(t,e):Le.IsNot(t)||Le.IsNot(e)?$xt(t,e):Le.IsAny(t)?kxt(t,e):Le.IsArray(t)?Dxt(t,e):Le.IsBigInt(t)?Nxt(t,e):Le.IsBoolean(t)?Lxt(t,e):Le.IsAsyncIterator(t)?Bxt(t,e):Le.IsConstructor(t)?Mxt(t,e):Le.IsDate(t)?Fxt(t,e):Le.IsFunction(t)?Oxt(t,e):Le.IsInteger(t)?Qxt(t,e):Le.IsIntersect(t)?Uxt(t,e):Le.IsIterator(t)?qxt(t,e):Le.IsLiteral(t)?Hxt(t,e):Le.IsNever(t)?Wxt(t,e):Le.IsNull(t)?jxt(t,e):Le.IsNumber(t)?Gxt(t,e):Le.IsObject(t)?Zxt(t,e):Le.IsRecord(t)?tbt(t,e):Le.IsString(t)?nbt(t,e):Le.IsSymbol(t)?ibt(t,e):Le.IsTuple(t)?cbt(t,e):Le.IsPromise(t)?ebt(t,e):Le.IsUint8Array(t)?lbt(t,e):Le.IsUndefined(t)?ubt(t,e):Le.IsUnion(t)?dbt(t,e):Le.IsUnknown(t)?fbt(t,e):Le.IsVoid(t)?mbt(t,e):VP(`Unknown left type operand '${t[ot]}'`)}s(rs,"Visit");function qb(t,e){return rs(t,e)}s(qb,"ExtendsCheck");f();f();f();function hbt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=zP(t[a],e,r,n,$s(i));return o}s(hbt,"FromProperties");function gbt(t,e,r,n,i){return hbt(t.properties,e,r,n,i)}s(gbt,"FromMappedResult");function K4e(t,e,r,n,i){let o=gbt(t,e,r,n,i);return Co(o)}s(K4e,"ExtendsFromMappedResult");function Abt(t,e,r,n){let i=qb(t,e);return i===ct.Union?No([r,n]):i===ct.True?r:n}s(Abt,"ExtendsResolve");function zP(t,e,r,n,i){return Gs(t)?K4e(t,e,r,n,i):z0(t)?at(J4e(t,e,r,n,i)):at(Abt(t,e,r,n),i)}s(zP,"Extends");function ybt(t,e,r,n,i){return{[t]:zP(ro(t),e,r,n,$s(i))}}s(ybt,"FromPropertyKey");function Cbt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...ybt(a,e,r,n,i)}),{})}s(Cbt,"FromPropertyKeys");function vbt(t,e,r,n,i){return Cbt(t.keys,e,r,n,i)}s(vbt,"FromMappedKey");function J4e(t,e,r,n,i){let o=vbt(t,e,r,n,i);return Co(o)}s(J4e,"ExtendsFromMappedKey");f();function Ebt(t){return t.allOf.every(e=>lv(e))}s(Ebt,"Intersect");function xbt(t){return t.anyOf.some(e=>lv(e))}s(xbt,"Union");function bbt(t){return!lv(t.not)}s(bbt,"Not");function lv(t){return t[ot]==="Intersect"?Ebt(t):t[ot]==="Union"?xbt(t):t[ot]==="Not"?bbt(t):t[ot]==="Undefined"}s(lv,"ExtendsUndefinedCheck");f();function X4e(t,e){return YP(n_(t),e)}s(X4e,"ExcludeFromTemplateLiteral");function Ibt(t,e){let r=t.filter(n=>qb(n,e)===ct.False);return r.length===1?r[0]:No(r)}s(Ibt,"ExcludeRest");function YP(t,e,r={}){return Y0(t)?at(X4e(t,e),r):Gs(t)?at(Z4e(t,e),r):at(po(t)?Ibt(t.anyOf,e):qb(t,e)!==ct.False?Ai():t,r)}s(YP,"Exclude");function Tbt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=YP(t[n],e);return r}s(Tbt,"FromProperties");function wbt(t,e){return Tbt(t.properties,e)}s(wbt,"FromMappedResult");function Z4e(t,e){let r=wbt(t,e);return Co(r)}s(Z4e,"ExcludeFromMappedResult");f();f();f();function eDe(t,e){return KP(n_(t),e)}s(eDe,"ExtractFromTemplateLiteral");function Sbt(t,e){let r=t.filter(n=>qb(n,e)!==ct.False);return r.length===1?r[0]:No(r)}s(Sbt,"ExtractRest");function KP(t,e,r){return Y0(t)?at(eDe(t,e),r):Gs(t)?at(tDe(t,e),r):at(po(t)?Sbt(t.anyOf,e):qb(t,e)!==ct.False?t:Ai(),r)}s(KP,"Extract");function _bt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=KP(t[n],e);return r}s(_bt,"FromProperties");function Rbt(t,e){return _bt(t.properties,e)}s(Rbt,"FromMappedResult");function tDe(t,e){let r=Rbt(t,e);return Co(r)}s(tDe,"ExtractFromMappedResult");f();function rDe(t,e){return xg(t)?at(t.returns,e):Ai(e)}s(rDe,"InstanceType");f();f();function ZW(t){return Ff(cd(t))}s(ZW,"ReadonlyOptional");f();function i_(t,e,r){return at({[ot]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(i_,"RecordCreateFromPattern");function fue(t,e,r){let n={};for(let i of t)n[i]=e;return Lo(n,{...r,[gm]:"Record"})}s(fue,"RecordCreateFromKeys");function kbt(t,e,r){return QW(t)?fue(Mf(t),e,r):i_(t.pattern,e,r)}s(kbt,"FromTemplateLiteralKey");function Pbt(t,e,r){return fue(Mf(No(t)),e,r)}s(Pbt,"FromUnionKey");function Dbt(t,e,r){return fue([t.toString()],e,r)}s(Dbt,"FromLiteralKey");function Bbt(t,e,r){return i_(t.source,e,r)}s(Bbt,"FromRegExpKey");function Nbt(t,e,r){let n=Ac(t.pattern)?_y:t.pattern;return i_(n,e,r)}s(Nbt,"FromStringKey");function Lbt(t,e,r){return i_(_y,e,r)}s(Lbt,"FromAnyKey");function Mbt(t,e,r){return i_(d4e,e,r)}s(Mbt,"FromNeverKey");function Fbt(t,e,r){return Lo({true:e,false:e},r)}s(Fbt,"FromBooleanKey");function Obt(t,e,r){return i_(Sy,e,r)}s(Obt,"FromIntegerKey");function Qbt(t,e,r){return i_(Sy,e,r)}s(Qbt,"FromNumberKey");function e$(t,e,r={}){return po(t)?Pbt(t.anyOf,e,r):Y0(t)?kbt(t,e,r):V0(t)?Dbt(t.const,e,r):nv(t)?Fbt(t,e,r):Ig(t)?Obt(t,e,r):Tg(t)?Qbt(t,e,r):jle(t)?Bbt(t,e,r):iv(t)?Nbt(t,e,r):Wle(t)?Lbt(t,e,r):Fb(t)?Mbt(t,e,r):Ai(r)}s(e$,"Record");function t$(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(t$,"RecordPattern");function nDe(t){let e=t$(t);return e===_y?Gd():e===Sy?Am():Gd({pattern:e})}s(nDe,"RecordKey");function r$(t){return t.patternProperties[t$(t)]}s(r$,"RecordValue");function Ubt(t,e){return e.parameters=_M(t,e.parameters),e.returns=_g(t,e.returns),e}s(Ubt,"FromConstructor");function qbt(t,e){return e.parameters=_M(t,e.parameters),e.returns=_g(t,e.returns),e}s(qbt,"FromFunction");function Hbt(t,e){return e.allOf=_M(t,e.allOf),e}s(Hbt,"FromIntersect");function Wbt(t,e){return e.anyOf=_M(t,e.anyOf),e}s(Wbt,"FromUnion");function $bt(t,e){return Ac(e.items)||(e.items=_M(t,e.items)),e}s($bt,"FromTuple");function jbt(t,e){return e.items=_g(t,e.items),e}s(jbt,"FromArray");function Gbt(t,e){return e.items=_g(t,e.items),e}s(Gbt,"FromAsyncIterator");function Vbt(t,e){return e.items=_g(t,e.items),e}s(Vbt,"FromIterator");function zbt(t,e){return e.item=_g(t,e.item),e}s(zbt,"FromPromise");function Ybt(t,e){let r=Zbt(t,e.properties);return{...e,...Lo(r)}}s(Ybt,"FromObject");function Kbt(t,e){let r=_g(t,nDe(e)),n=_g(t,r$(e)),i=e$(r,n);return{...e,...i}}s(Kbt,"FromRecord");function Jbt(t,e){return e.index in t?t[e.index]:Sg()}s(Jbt,"FromArgument");function Xbt(t,e){let r=NP(e),n=Lf(e),i=_g(t,e);return r&&n?ZW(i):r&&!n?Ff(i):!r&&n?cd(i):i}s(Xbt,"FromProperty");function Zbt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:Xbt(t,e[n])}),{})}s(Zbt,"FromProperties");function _M(t,e){return e.map(r=>_g(t,r))}s(_M,"FromTypes");function _g(t,e){return xg(e)?Ubt(t,e):bg(e)?qbt(t,e):Da(e)?Hbt(t,e):po(e)?Wbt(t,e):K0(e)?$bt(t,e):vg(e)?jbt(t,e):JS(e)?Gbt(t,e):ZS(e)?Vbt(t,e):e_(e)?zbt(t,e):yc(e)?Ybt(t,e):t_(e)?Kbt(t,e):$le(e)?Jbt(t,e):e}s(_g,"FromType");function iDe(t,e){return _g(e,DP(t))}s(iDe,"Instantiate");f();function oDe(t){return at({[ot]:"Integer",type:"integer"},t)}s(oDe,"Integer");f();f();f();function eIt(t,e,r){return{[t]:Rg(ro(t),e,$s(r))}}s(eIt,"MappedIntrinsicPropertyKey");function tIt(t,e,r){return t.reduce((i,o)=>({...i,...eIt(o,e,r)}),{})}s(tIt,"MappedIntrinsicPropertyKeys");function rIt(t,e,r){return tIt(t.keys,e,r)}s(rIt,"MappedIntrinsicProperties");function sDe(t,e,r){let n=rIt(t,e,r);return Co(n)}s(sDe,"IntrinsicFromMappedKey");function nIt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(nIt,"ApplyUncapitalize");function iIt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(iIt,"ApplyCapitalize");function oIt(t){return t.toUpperCase()}s(oIt,"ApplyUppercase");function sIt(t){return t.toLowerCase()}s(sIt,"ApplyLowercase");function aIt(t,e,r){let n=qP(t.pattern);if(!r_(n))return{...t,pattern:aDe(t.pattern,e)};let a=[...IM(n)].map(u=>ro(u)),c=cDe(a,e),l=No(c);return qW([l],r)}s(aIt,"FromTemplateLiteral");function aDe(t,e){return typeof t=="string"?e==="Uncapitalize"?nIt(t):e==="Capitalize"?iIt(t):e==="Uppercase"?oIt(t):e==="Lowercase"?sIt(t):t:t.toString()}s(aDe,"FromLiteralValue");function cDe(t,e){return t.map(r=>Rg(r,e))}s(cDe,"FromRest");function Rg(t,e,r={}){return z0(t)?sDe(t,e,r):Y0(t)?aIt(t,e,r):po(t)?No(cDe(t.anyOf,e),r):V0(t)?ro(aDe(t.const,e),r):at(t,r)}s(Rg,"Intrinsic");function lDe(t,e={}){return Rg(t,"Capitalize",e)}s(lDe,"Capitalize");f();function uDe(t,e={}){return Rg(t,"Lowercase",e)}s(uDe,"Lowercase");f();function dDe(t,e={}){return Rg(t,"Uncapitalize",e)}s(dDe,"Uncapitalize");f();function fDe(t,e={}){return Rg(t,"Uppercase",e)}s(fDe,"Uppercase");f();f();f();f();f();function cIt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Hb(t[i],e,$s(r));return n}s(cIt,"FromProperties");function lIt(t,e,r){return cIt(t.properties,e,r)}s(lIt,"FromMappedResult");function pDe(t,e,r){let n=lIt(t,e,r);return Co(n)}s(pDe,"OmitFromMappedResult");function uIt(t,e){return t.map(r=>pue(r,e))}s(uIt,"FromIntersect");function dIt(t,e){return t.map(r=>pue(r,e))}s(dIt,"FromUnion");function fIt(t,e){let{[e]:r,...n}=t;return n}s(fIt,"FromProperty");function pIt(t,e){return e.reduce((r,n)=>fIt(r,n),t)}s(pIt,"FromProperties");function mIt(t,e){let r=Ba(t,[ga,"$id","required","properties"]),n=pIt(t.properties,e);return Lo(n,r)}s(mIt,"FromObject");function hIt(t){let e=t.reduce((r,n)=>MW(n)?[...r,ro(n)]:r,[]);return No(e)}s(hIt,"UnionFromPropertyKeys");function pue(t,e){return Da(t)?ld(uIt(t.allOf,e)):po(t)?No(dIt(t.anyOf,e)):yc(t)?mIt(t,e):Lo({})}s(pue,"OmitResolve");function Hb(t,e,r){let n=gc(e)?hIt(e):e,i=Aa(e)?Mf(e):e,o=$a(t),a=$a(e);return Gs(t)?pDe(t,i,r):z0(e)?mDe(t,e,r):o&&a?Rs("Omit",[t,n],r):!o&&a?Rs("Omit",[t,n],r):o&&!a?Rs("Omit",[t,n],r):at({...pue(t,i),...r})}s(Hb,"Omit");function gIt(t,e,r){return{[e]:Hb(t,[e],$s(r))}}s(gIt,"FromPropertyKey");function AIt(t,e,r){return e.reduce((n,i)=>({...n,...gIt(t,i,r)}),{})}s(AIt,"FromPropertyKeys");function yIt(t,e,r){return AIt(t,e.keys,r)}s(yIt,"FromMappedKey");function mDe(t,e,r){let n=yIt(t,e,r);return Co(n)}s(mDe,"OmitFromMappedKey");f();f();f();function CIt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Wb(t[i],e,$s(r));return n}s(CIt,"FromProperties");function vIt(t,e,r){return CIt(t.properties,e,r)}s(vIt,"FromMappedResult");function hDe(t,e,r){let n=vIt(t,e,r);return Co(n)}s(hDe,"PickFromMappedResult");function EIt(t,e){return t.map(r=>mue(r,e))}s(EIt,"FromIntersect");function xIt(t,e){return t.map(r=>mue(r,e))}s(xIt,"FromUnion");function bIt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(bIt,"FromProperties");function IIt(t,e){let r=Ba(t,[ga,"$id","required","properties"]),n=bIt(t.properties,e);return Lo(n,r)}s(IIt,"FromObject");function TIt(t){let e=t.reduce((r,n)=>MW(n)?[...r,ro(n)]:r,[]);return No(e)}s(TIt,"UnionFromPropertyKeys");function mue(t,e){return Da(t)?ld(EIt(t.allOf,e)):po(t)?No(xIt(t.anyOf,e)):yc(t)?IIt(t,e):Lo({})}s(mue,"PickResolve");function Wb(t,e,r){let n=gc(e)?TIt(e):e,i=Aa(e)?Mf(e):e,o=$a(t),a=$a(e);return Gs(t)?hDe(t,i,r):z0(e)?gDe(t,e,r):o&&a?Rs("Pick",[t,n],r):!o&&a?Rs("Pick",[t,n],r):o&&!a?Rs("Pick",[t,n],r):at({...mue(t,i),...r})}s(Wb,"Pick");function wIt(t,e,r){return{[e]:Wb(t,[e],$s(r))}}s(wIt,"FromPropertyKey");function SIt(t,e,r){return e.reduce((n,i)=>({...n,...wIt(t,i,r)}),{})}s(SIt,"FromPropertyKeys");function _It(t,e,r){return SIt(t,e.keys,r)}s(_It,"FromMappedKey");function gDe(t,e,r){let n=_It(t,e,r);return Co(n)}s(gDe,"PickFromMappedKey");f();f();function RIt(t,e){return Rs("Partial",[Rs(t,e)])}s(RIt,"FromComputed");function kIt(t){return Rs("Partial",[vm(t)])}s(kIt,"FromRef");function PIt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=cd(t[r]);return e}s(PIt,"FromProperties");function DIt(t){let e=Ba(t,[ga,"$id","required","properties"]),r=PIt(t.properties);return Lo(r,e)}s(DIt,"FromObject");function ADe(t){return t.map(e=>yDe(e))}s(ADe,"FromRest");function yDe(t){return Eg(t)?RIt(t.target,t.parameters):$a(t)?kIt(t.$ref):Da(t)?ld(ADe(t.allOf)):po(t)?No(ADe(t.anyOf)):yc(t)?DIt(t):XS(t)||nv(t)||Ig(t)||V0(t)||AM(t)||Tg(t)||iv(t)||yM(t)||ov(t)?t:Lo({})}s(yDe,"PartialResolve");function JP(t,e){return Gs(t)?CDe(t,e):at({...yDe(t),...e})}s(JP,"Partial");function BIt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=JP(t[n],$s(e));return r}s(BIt,"FromProperties");function NIt(t,e){return BIt(t.properties,e)}s(NIt,"FromMappedResult");function CDe(t,e){let r=NIt(t,e);return Co(r)}s(CDe,"PartialFromMappedResult");f();f();function LIt(t,e){return Rs("Required",[Rs(t,e)])}s(LIt,"FromComputed");function MIt(t){return Rs("Required",[vm(t)])}s(MIt,"FromRef");function FIt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ba(t[r],[Eu]);return e}s(FIt,"FromProperties");function OIt(t){let e=Ba(t,[ga,"$id","required","properties"]),r=FIt(t.properties);return Lo(r,e)}s(OIt,"FromObject");function vDe(t){return t.map(e=>EDe(e))}s(vDe,"FromRest");function EDe(t){return Eg(t)?LIt(t.target,t.parameters):$a(t)?MIt(t.$ref):Da(t)?ld(vDe(t.allOf)):po(t)?No(vDe(t.anyOf)):yc(t)?OIt(t):XS(t)||nv(t)||Ig(t)||V0(t)||AM(t)||Tg(t)||iv(t)||yM(t)||ov(t)?t:Lo({})}s(EDe,"RequiredResolve");function XP(t,e){return Gs(t)?xDe(t,e):at({...EDe(t),...e})}s(XP,"Required");function QIt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=XP(t[n],e);return r}s(QIt,"FromProperties");function UIt(t,e){return QIt(t.properties,e)}s(UIt,"FromMappedResult");function xDe(t,e){let r=UIt(t,e);return Co(r)}s(xDe,"RequiredFromMappedResult");function qIt(t,e){return e.map(r=>$a(r)?hue(t,r.$ref):J0(t,r))}s(qIt,"DereferenceParameters");function hue(t,e){return e in t?$a(t[e])?hue(t,t[e].$ref):J0(t,t[e]):Ai()}s(hue,"Dereference");function HIt(t){return jP(t[0])}s(HIt,"FromAwaited");function WIt(t){return Ub(t[0],t[1])}s(WIt,"FromIndex");function $It(t){return GP(t[0])}s($It,"FromKeyOf");function jIt(t){return JP(t[0])}s(jIt,"FromPartial");function GIt(t){return Hb(t[0],t[1])}s(GIt,"FromOmit");function VIt(t){return Wb(t[0],t[1])}s(VIt,"FromPick");function zIt(t){return XP(t[0])}s(zIt,"FromRequired");function YIt(t,e,r){let n=qIt(t,r);return e==="Awaited"?HIt(n):e==="Index"?WIt(n):e==="KeyOf"?$It(n):e==="Partial"?jIt(n):e==="Omit"?GIt(n):e==="Pick"?VIt(n):e==="Required"?zIt(n):Ai()}s(YIt,"FromComputed");function KIt(t,e){return FP(J0(t,e))}s(KIt,"FromArray");function JIt(t,e){return OP(J0(t,e))}s(JIt,"FromAsyncIterator");function XIt(t,e,r){return QP(RM(t,e),J0(t,r))}s(XIt,"FromConstructor");function ZIt(t,e,r){return Ry(RM(t,e),J0(t,r))}s(ZIt,"FromFunction");function eTt(t,e){return ld(RM(t,e))}s(eTt,"FromIntersect");function tTt(t,e){return $P(J0(t,e))}s(tTt,"FromIterator");function rTt(t,e){return Lo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:J0(t,e[n])}),{}))}s(rTt,"FromObject");function nTt(t,e){let[r,n]=[J0(t,r$(e)),t$(e)],i=DP(e);return i.patternProperties[n]=r,i}s(nTt,"FromRecord");function iTt(t,e){return $a(e)?{...hue(t,e.$ref),[ga]:e[ga]}:e}s(iTt,"FromTransform");function oTt(t,e){return ym(RM(t,e))}s(oTt,"FromTuple");function sTt(t,e){return No(RM(t,e))}s(sTt,"FromUnion");function RM(t,e){return e.map(r=>J0(t,r))}s(RM,"FromTypes");function J0(t,e){return Lf(e)?at(J0(t,Ba(e,[Eu])),e):NP(e)?at(J0(t,Ba(e,[Cg])),e):Bo(e)?at(iTt(t,e),e):vg(e)?at(KIt(t,e.items),e):JS(e)?at(JIt(t,e.items),e):Eg(e)?at(YIt(t,e.target,e.parameters)):xg(e)?at(XIt(t,e.parameters,e.returns),e):bg(e)?at(ZIt(t,e.parameters,e.returns),e):Da(e)?at(eTt(t,e.allOf),e):ZS(e)?at(tTt(t,e.items),e):yc(e)?at(rTt(t,e.properties),e):t_(e)?at(nTt(t,e)):K0(e)?at(oTt(t,e.items||[]),e):po(e)?at(sTt(t,e.anyOf),e):e}s(J0,"FromType");function aTt(t,e){return e in t?J0(t,t[e]):Ai()}s(aTt,"ComputeType");function bDe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:aTt(t,r)}),{})}s(bDe,"ComputeModuleProperties");var gue=class{static{s(this,"TModule")}constructor(e){let r=bDe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:at(this.$defs[e],r)};return at({[ot]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function IDe(t){return new gue(t)}s(IDe,"Module");f();function TDe(t,e){return at({[ot]:"Not",not:t},e)}s(TDe,"Not");f();function wDe(t,e){return bg(t)?ym(t.parameters,e):Ai()}s(wDe,"Parameters");f();var cTt=0;function SDe(t,e={}){Ac(e.$id)&&(e.$id=`T${cTt++}`);let r=DP(t({[ot]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,at({[gm]:"Recursive",...r},e)}s(SDe,"Recursive");f();function _De(t,e){let r=ys(t)?new globalThis.RegExp(t):t;return at({[ot]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(_De,"RegExp");f();function lTt(t){return Da(t)?t.allOf:po(t)?t.anyOf:K0(t)?t.items??[]:[]}s(lTt,"RestResolve");function RDe(t){return lTt(t)}s(RDe,"Rest");f();function kDe(t,e){return bg(t)?at(t.returns,e):Ai(e)}s(kDe,"ReturnType");f();var Aue=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new yue(this.schema,e)}},yue=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[ga].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[ga].Decode(a)),"Decode")};return{...r,[ga]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[ga]:n}}Encode(e){return Bo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function PDe(t){return new Aue(t)}s(PDe,"Transform");f();function DDe(t={}){return at({[ot]:t[ot]??"Unsafe"},t)}s(DDe,"Unsafe");f();function BDe(t){return at({[ot]:"Void",type:"void"},t)}s(BDe,"Void");f();var Cue={};ma(Cue,{Any:()=>Qb,Argument:()=>g4e,Array:()=>FP,AsyncIterator:()=>OP,Awaited:()=>jP,BigInt:()=>WP,Boolean:()=>UW,Capitalize:()=>lDe,Composite:()=>L4e,Const:()=>M4e,Constructor:()=>QP,ConstructorParameters:()=>F4e,Date:()=>jW,Enum:()=>O4e,Exclude:()=>YP,Extends:()=>zP,Extract:()=>KP,Function:()=>Ry,Index:()=>Ub,InstanceType:()=>rDe,Instantiate:()=>iDe,Integer:()=>oDe,Intersect:()=>ld,Iterator:()=>$P,KeyOf:()=>GP,Literal:()=>ro,Lowercase:()=>uDe,Mapped:()=>R4e,Module:()=>IDe,Never:()=>Ai,Not:()=>TDe,Null:()=>GW,Number:()=>Am,Object:()=>Lo,Omit:()=>Hb,Optional:()=>cd,Parameters:()=>wDe,Partial:()=>JP,Pick:()=>Wb,Promise:()=>WW,Readonly:()=>Ff,ReadonlyOptional:()=>ZW,Record:()=>e$,Recursive:()=>SDe,Ref:()=>vm,RegExp:()=>_De,Required:()=>XP,Rest:()=>RDe,ReturnType:()=>kDe,String:()=>Gd,Symbol:()=>VW,TemplateLiteral:()=>qW,Transform:()=>PDe,Tuple:()=>ym,Uint8Array:()=>YW,Uncapitalize:()=>dDe,Undefined:()=>zW,Union:()=>No,Unknown:()=>Sg,Unsafe:()=>DDe,Uppercase:()=>fDe,Void:()=>BDe});f();var I=Cue;f();f();function uTt(t){switch(t.errorType){case nt.ArrayContains:return"Expected array to contain at least one matching value";case nt.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case nt.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case nt.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case nt.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case nt.ArrayUniqueItems:return"Expected array elements to be unique";case nt.Array:return"Expected array";case nt.AsyncIterator:return"Expected AsyncIterator";case nt.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case nt.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case nt.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case nt.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case nt.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case nt.BigInt:return"Expected bigint";case nt.Boolean:return"Expected boolean";case nt.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case nt.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case nt.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case nt.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case nt.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case nt.Date:return"Expected Date";case nt.Function:return"Expected function";case nt.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case nt.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case nt.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case nt.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case nt.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case nt.Integer:return"Expected integer";case nt.IntersectUnevaluatedProperties:return"Unexpected property";case nt.Intersect:return"Expected all values to match";case nt.Iterator:return"Expected Iterator";case nt.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case nt.Never:return"Never";case nt.Not:return"Value should not match";case nt.Null:return"Expected null";case nt.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case nt.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case nt.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case nt.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case nt.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case nt.Number:return"Expected number";case nt.Object:return"Expected object";case nt.ObjectAdditionalProperties:return"Unexpected property";case nt.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case nt.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case nt.ObjectRequiredProperty:return"Expected required property";case nt.Promise:return"Expected Promise";case nt.RegExp:return"Expected string to match regular expression";case nt.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case nt.StringFormat:return`Expected string to match '${t.schema.format}' format`;case nt.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case nt.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case nt.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case nt.String:return"Expected string";case nt.Symbol:return"Expected symbol";case nt.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case nt.Tuple:return"Expected tuple";case nt.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case nt.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case nt.Uint8Array:return"Expected Uint8Array";case nt.Undefined:return"Expected undefined";case nt.Union:return"Expected union value";case nt.Void:return"Expected void";case nt.Kind:return`Expected kind '${t.schema[ot]}'`;default:return"Unknown error type"}}s(uTt,"DefaultErrorFunction");var dTt=uTt;function NDe(){return dTt}s(NDe,"GetErrorFunction");f();var vue=class extends _n{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function fTt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new vue(t);return vo(r,e)}s(fTt,"Resolve");function ql(t,e){return!fo(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(ql,"Pushref");function vo(t,e){return t[ot]==="This"||t[ot]==="Ref"?fTt(t,e):t}s(vo,"Deref");f();var Eue=class extends _n{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},X0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(X0||(X0={}));var ZP=BigInt("14695981039346656037"),[pTt,mTt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],hTt=Array.from({length:256}).map((t,e)=>BigInt(e)),LDe=new Float64Array(1),MDe=new DataView(LDe.buffer),FDe=new Uint8Array(LDe.buffer);function*gTt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(gTt,"NumberToBytes");function ATt(t){dd(X0.Array);for(let e of t)e4(e)}s(ATt,"ArrayType");function yTt(t){dd(X0.Boolean),dd(t?1:0)}s(yTt,"BooleanType");function CTt(t){dd(X0.BigInt),MDe.setBigInt64(0,t);for(let e of FDe)dd(e)}s(CTt,"BigIntType");function vTt(t){dd(X0.Date),e4(t.getTime())}s(vTt,"DateType");function ETt(t){dd(X0.Null)}s(ETt,"NullType");function xTt(t){dd(X0.Number),MDe.setFloat64(0,t);for(let e of FDe)dd(e)}s(xTt,"NumberType");function bTt(t){dd(X0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())e4(e),e4(t[e])}s(bTt,"ObjectType");function ITt(t){dd(X0.String);for(let e=0;e<t.length;e++)for(let r of gTt(t.charCodeAt(e)))dd(r)}s(ITt,"StringType");function TTt(t){dd(X0.Symbol),e4(t.description)}s(TTt,"SymbolType");function wTt(t){dd(X0.Uint8Array);for(let e=0;e<t.length;e++)dd(t[e])}s(wTt,"Uint8ArrayType");function STt(t){return dd(X0.Undefined)}s(STt,"UndefinedType");function e4(t){if(Sn(t))return ATt(t);if(wy(t))return yTt(t);if(vu(t))return CTt(t);if($d(t))return vTt(t);if(tv(t))return ETt(t);if(rn(t))return xTt(t);if(bi(t))return bTt(t);if(fo(t))return ITt(t);if(rv(t))return TTt(t);if(BP(t))return wTt(t);if(js(t))return STt(t);throw new Eue(t)}s(e4,"Visit");function dd(t){ZP=ZP^hTt[t],ZP=ZP*pTt%mTt}s(dd,"FNV1A64");function $b(t){return ZP=BigInt("14695981039346656037"),e4(t),ZP}s($b,"Hash");f();var xue=class extends _n{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function _Tt(t){return t[ot]==="Any"||t[ot]==="Unknown"}s(_Tt,"IsAnyOrUnknown");function Ui(t){return t!==void 0}s(Ui,"IsDefined");function RTt(t,e,r){return!0}s(RTt,"FromAny");function kTt(t,e,r){return!0}s(kTt,"FromArgument");function PTt(t,e,r){if(!Sn(r)||Ui(t.minItems)&&!(r.length>=t.minItems)||Ui(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Hl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=$b(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Ui(t.contains)||rn(t.minContains)||rn(t.maxContains)))return!0;let n=Ui(t.contains)?t.contains:Ai(),i=r.reduce((o,a)=>Hl(n,e,a)?o+1:o,0);return!(i===0||rn(t.minContains)&&i<t.minContains||rn(t.maxContains)&&i>t.maxContains)}s(PTt,"FromArray");function DTt(t,e,r){return DW(r)}s(DTt,"FromAsyncIterator");function BTt(t,e,r){return!(!vu(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(BTt,"FromBigInt");function NTt(t,e,r){return wy(r)}s(NTt,"FromBoolean");function LTt(t,e,r){return Hl(t.returns,e,r.prototype)}s(LTt,"FromConstructor");function MTt(t,e,r){return!(!$d(r)||Ui(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Ui(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Ui(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Ui(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Ui(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(MTt,"FromDate");function FTt(t,e,r){return Mb(r)}s(FTt,"FromFunction");function OTt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Hl(i,[...e,...n],r)}s(OTt,"FromImport");function QTt(t,e,r){return!(!LW(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.multipleOf)&&r%t.multipleOf!==0)}s(QTt,"FromInteger");function UTt(t,e,r){let n=t.allOf.every(i=>Hl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(cv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(Aa(t.unevaluatedProperties)){let i=new RegExp(cv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Hl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(UTt,"FromIntersect");function qTt(t,e,r){return BW(r)}s(qTt,"FromIterator");function HTt(t,e,r){return r===t.const}s(HTt,"FromLiteral");function WTt(t,e,r){return!1}s(WTt,"FromNever");function $Tt(t,e,r){return!Hl(t.not,e,r)}s($Tt,"FromNot");function jTt(t,e,r){return tv(r)}s(jTt,"FromNull");function GTt(t,e,r){return!(!_s.IsNumberLike(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.multipleOf)&&r%t.multipleOf!==0)}s(GTt,"FromNumber");function VTt(t,e,r){if(!_s.IsObjectLike(r)||Ui(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ui(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Hl(o,e,r[i])||(lv(o)||_Tt(o))&&!(i in r))return!1}else if(_s.IsExactOptionalProperty(r,i)&&!Hl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Hl(t.additionalProperties,e,r[o])):!0}s(VTt,"FromObject");function zTt(t,e,r){return NW(r)}s(zTt,"FromPromise");function YTt(t,e,r){if(!_s.IsRecordLike(r)||Ui(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ui(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,d])=>o.test(u)?Hl(i,e,d):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>o.test(u)?!0:Hl(t.additionalProperties,e,d)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(YTt,"FromRecord");function KTt(t,e,r){return Hl(vo(t,e),e,r)}s(KTt,"FromRef");function JTt(t,e,r){let n=new RegExp(t.source,t.flags);return Ui(t.minLength)&&!(r.length>=t.minLength)||Ui(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(JTt,"FromRegExp");function XTt(t,e,r){return!fo(r)||Ui(t.minLength)&&!(r.length>=t.minLength)||Ui(t.maxLength)&&!(r.length<=t.maxLength)||Ui(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Ui(t.format)?wg.Has(t.format)?wg.Get(t.format)(r):!1:!0}s(XTt,"FromString");function ZTt(t,e,r){return rv(r)}s(ZTt,"FromSymbol");function ewt(t,e,r){return fo(r)&&new RegExp(t.pattern).test(r)}s(ewt,"FromTemplateLiteral");function twt(t,e,r){return Hl(vo(t,e),e,r)}s(twt,"FromThis");function rwt(t,e,r){if(!Sn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Hl(t.items[n],e,r[n]))return!1;return!0}s(rwt,"FromTuple");function nwt(t,e,r){return js(r)}s(nwt,"FromUndefined");function iwt(t,e,r){return t.anyOf.some(n=>Hl(n,e,r))}s(iwt,"FromUnion");function owt(t,e,r){return!(!BP(r)||Ui(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Ui(t.minByteLength)&&!(r.length>=t.minByteLength))}s(owt,"FromUint8Array");function swt(t,e,r){return!0}s(swt,"FromUnknown");function awt(t,e,r){return _s.IsVoidLike(r)}s(awt,"FromVoid");function cwt(t,e,r){return jd.Has(t[ot])?jd.Get(t[ot])(t,r):!1}s(cwt,"FromKind");function Hl(t,e,r){let n=Ui(t.$id)?ql(t,e):e,i=t;switch(i[ot]){case"Any":return RTt(i,n,r);case"Argument":return kTt(i,n,r);case"Array":return PTt(i,n,r);case"AsyncIterator":return DTt(i,n,r);case"BigInt":return BTt(i,n,r);case"Boolean":return NTt(i,n,r);case"Constructor":return LTt(i,n,r);case"Date":return MTt(i,n,r);case"Function":return FTt(i,n,r);case"Import":return OTt(i,n,r);case"Integer":return QTt(i,n,r);case"Intersect":return UTt(i,n,r);case"Iterator":return qTt(i,n,r);case"Literal":return HTt(i,n,r);case"Never":return WTt(i,n,r);case"Not":return $Tt(i,n,r);case"Null":return jTt(i,n,r);case"Number":return GTt(i,n,r);case"Object":return VTt(i,n,r);case"Promise":return zTt(i,n,r);case"Record":return YTt(i,n,r);case"Ref":return KTt(i,n,r);case"RegExp":return JTt(i,n,r);case"String":return XTt(i,n,r);case"Symbol":return ZTt(i,n,r);case"TemplateLiteral":return ewt(i,n,r);case"This":return twt(i,n,r);case"Tuple":return rwt(i,n,r);case"Undefined":return nwt(i,n,r);case"Union":return iwt(i,n,r);case"Uint8Array":return owt(i,n,r);case"Unknown":return swt(i,n,r);case"Void":return awt(i,n,r);default:if(!jd.Has(i[ot]))throw new xue(i);return cwt(i,n,r)}}s(Hl,"Visit");function wi(...t){return t.length===3?Hl(t[0],t[1],t[2]):Hl(t[0],[],t[1])}s(wi,"Check");var nt;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(nt||(nt={}));var bue=class extends _n{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function uv(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(uv,"EscapeKey");function qi(t){return t!==void 0}s(qi,"IsDefined");var jb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function ur(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:NDe()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(ur,"Create");function*lwt(t,e,r,n){}s(lwt,"FromAny");function*uwt(t,e,r,n){}s(uwt,"FromArgument");function*dwt(t,e,r,n){if(!Sn(n))return yield ur(nt.Array,t,r,n);qi(t.minItems)&&!(n.length>=t.minItems)&&(yield ur(nt.ArrayMinItems,t,r,n)),qi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield ur(nt.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Wl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=$b(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield ur(nt.ArrayUniqueItems,t,r,n)),!(qi(t.contains)||qi(t.minContains)||qi(t.maxContains)))return;let i=qi(t.contains)?t.contains:Ai(),o=n.reduce((a,c,l)=>Wl(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield ur(nt.ArrayContains,t,r,n)),rn(t.minContains)&&o<t.minContains&&(yield ur(nt.ArrayMinContains,t,r,n)),rn(t.maxContains)&&o>t.maxContains&&(yield ur(nt.ArrayMaxContains,t,r,n))}s(dwt,"FromArray");function*fwt(t,e,r,n){DW(n)||(yield ur(nt.AsyncIterator,t,r,n))}s(fwt,"FromAsyncIterator");function*pwt(t,e,r,n){if(!vu(n))return yield ur(nt.BigInt,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield ur(nt.BigIntExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield ur(nt.BigIntExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield ur(nt.BigIntMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield ur(nt.BigIntMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield ur(nt.BigIntMultipleOf,t,r,n))}s(pwt,"FromBigInt");function*mwt(t,e,r,n){wy(n)||(yield ur(nt.Boolean,t,r,n))}s(mwt,"FromBoolean");function*hwt(t,e,r,n){yield*Wl(t.returns,e,r,n.prototype)}s(hwt,"FromConstructor");function*gwt(t,e,r,n){if(!$d(n))return yield ur(nt.Date,t,r,n);qi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield ur(nt.DateExclusiveMaximumTimestamp,t,r,n)),qi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield ur(nt.DateExclusiveMinimumTimestamp,t,r,n)),qi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield ur(nt.DateMaximumTimestamp,t,r,n)),qi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield ur(nt.DateMinimumTimestamp,t,r,n)),qi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield ur(nt.DateMultipleOfTimestamp,t,r,n))}s(gwt,"FromDate");function*Awt(t,e,r,n){Mb(n)||(yield ur(nt.Function,t,r,n))}s(Awt,"FromFunction");function*ywt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Wl(o,[...e,...i],r,n)}s(ywt,"FromImport");function*Cwt(t,e,r,n){if(!LW(n))return yield ur(nt.Integer,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield ur(nt.IntegerExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield ur(nt.IntegerExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield ur(nt.IntegerMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield ur(nt.IntegerMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield ur(nt.IntegerMultipleOf,t,r,n))}s(Cwt,"FromInteger");function*vwt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Wl(o,e,r,n))i=!0,yield a;if(i)return yield ur(nt.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(cv(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield ur(nt.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(cv(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Wl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(vwt,"FromIntersect");function*Ewt(t,e,r,n){BW(n)||(yield ur(nt.Iterator,t,r,n))}s(Ewt,"FromIterator");function*xwt(t,e,r,n){n!==t.const&&(yield ur(nt.Literal,t,r,n))}s(xwt,"FromLiteral");function*bwt(t,e,r,n){yield ur(nt.Never,t,r,n)}s(bwt,"FromNever");function*Iwt(t,e,r,n){Wl(t.not,e,r,n).next().done===!0&&(yield ur(nt.Not,t,r,n))}s(Iwt,"FromNot");function*Twt(t,e,r,n){tv(n)||(yield ur(nt.Null,t,r,n))}s(Twt,"FromNull");function*wwt(t,e,r,n){if(!_s.IsNumberLike(n))return yield ur(nt.Number,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield ur(nt.NumberExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield ur(nt.NumberExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield ur(nt.NumberMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield ur(nt.NumberMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield ur(nt.NumberMultipleOf,t,r,n))}s(wwt,"FromNumber");function*Swt(t,e,r,n){if(!_s.IsObjectLike(n))return yield ur(nt.Object,t,r,n);qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield ur(nt.ObjectMinProperties,t,r,n)),qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield ur(nt.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield ur(nt.ObjectRequiredProperty,t.properties[c],`${r}/${uv(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield ur(nt.ObjectAdditionalProperties,t,`${r}/${uv(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Wl(t.additionalProperties,e,`${r}/${uv(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Wl(l,e,`${r}/${uv(c)}`,n[c]),lv(t)&&!(c in n)&&(yield ur(nt.ObjectRequiredProperty,l,`${r}/${uv(c)}`,void 0))):_s.IsExactOptionalProperty(n,c)&&(yield*Wl(l,e,`${r}/${uv(c)}`,n[c]))}}s(Swt,"FromObject");function*_wt(t,e,r,n){NW(n)||(yield ur(nt.Promise,t,r,n))}s(_wt,"FromPromise");function*Rwt(t,e,r,n){if(!_s.IsRecordLike(n))return yield ur(nt.Object,t,r,n);qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield ur(nt.ObjectMinProperties,t,r,n)),qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield ur(nt.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Wl(o,e,`${r}/${uv(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Wl(t.additionalProperties,e,`${r}/${uv(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield ur(nt.ObjectAdditionalProperties,t,`${r}/${uv(c)}`,l)}}s(Rwt,"FromRecord");function*kwt(t,e,r,n){yield*Wl(vo(t,e),e,r,n)}s(kwt,"FromRef");function*Pwt(t,e,r,n){if(!fo(n))return yield ur(nt.String,t,r,n);if(qi(t.minLength)&&!(n.length>=t.minLength)&&(yield ur(nt.StringMinLength,t,r,n)),qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield ur(nt.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield ur(nt.RegExp,t,r,n)}s(Pwt,"FromRegExp");function*Dwt(t,e,r,n){if(!fo(n))return yield ur(nt.String,t,r,n);qi(t.minLength)&&!(n.length>=t.minLength)&&(yield ur(nt.StringMinLength,t,r,n)),qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield ur(nt.StringMaxLength,t,r,n)),fo(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield ur(nt.StringPattern,t,r,n))),fo(t.format)&&(wg.Has(t.format)?wg.Get(t.format)(n)||(yield ur(nt.StringFormat,t,r,n)):yield ur(nt.StringFormatUnknown,t,r,n))}s(Dwt,"FromString");function*Bwt(t,e,r,n){rv(n)||(yield ur(nt.Symbol,t,r,n))}s(Bwt,"FromSymbol");function*Nwt(t,e,r,n){if(!fo(n))return yield ur(nt.String,t,r,n);new RegExp(t.pattern).test(n)||(yield ur(nt.StringPattern,t,r,n))}s(Nwt,"FromTemplateLiteral");function*Lwt(t,e,r,n){yield*Wl(vo(t,e),e,r,n)}s(Lwt,"FromThis");function*Mwt(t,e,r,n){if(!Sn(n))return yield ur(nt.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield ur(nt.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield ur(nt.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Wl(t.items[i],e,`${r}/${i}`,n[i])}s(Mwt,"FromTuple");function*Fwt(t,e,r,n){js(n)||(yield ur(nt.Undefined,t,r,n))}s(Fwt,"FromUndefined");function*Owt(t,e,r,n){if(wi(t,e,n))return;let i=t.anyOf.map(o=>new jb(Wl(o,e,r,n)));yield ur(nt.Union,t,r,n,i)}s(Owt,"FromUnion");function*Qwt(t,e,r,n){if(!BP(n))return yield ur(nt.Uint8Array,t,r,n);qi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield ur(nt.Uint8ArrayMaxByteLength,t,r,n)),qi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield ur(nt.Uint8ArrayMinByteLength,t,r,n))}s(Qwt,"FromUint8Array");function*Uwt(t,e,r,n){}s(Uwt,"FromUnknown");function*qwt(t,e,r,n){_s.IsVoidLike(n)||(yield ur(nt.Void,t,r,n))}s(qwt,"FromVoid");function*Hwt(t,e,r,n){jd.Get(t[ot])(t,n)||(yield ur(nt.Kind,t,r,n))}s(Hwt,"FromKind");function*Wl(t,e,r,n){let i=qi(t.$id)?[...e,t]:e,o=t;switch(o[ot]){case"Any":return yield*lwt(o,i,r,n);case"Argument":return yield*uwt(o,i,r,n);case"Array":return yield*dwt(o,i,r,n);case"AsyncIterator":return yield*fwt(o,i,r,n);case"BigInt":return yield*pwt(o,i,r,n);case"Boolean":return yield*mwt(o,i,r,n);case"Constructor":return yield*hwt(o,i,r,n);case"Date":return yield*gwt(o,i,r,n);case"Function":return yield*Awt(o,i,r,n);case"Import":return yield*ywt(o,i,r,n);case"Integer":return yield*Cwt(o,i,r,n);case"Intersect":return yield*vwt(o,i,r,n);case"Iterator":return yield*Ewt(o,i,r,n);case"Literal":return yield*xwt(o,i,r,n);case"Never":return yield*bwt(o,i,r,n);case"Not":return yield*Iwt(o,i,r,n);case"Null":return yield*Twt(o,i,r,n);case"Number":return yield*wwt(o,i,r,n);case"Object":return yield*Swt(o,i,r,n);case"Promise":return yield*_wt(o,i,r,n);case"Record":return yield*Rwt(o,i,r,n);case"Ref":return yield*kwt(o,i,r,n);case"RegExp":return yield*Pwt(o,i,r,n);case"String":return yield*Dwt(o,i,r,n);case"Symbol":return yield*Bwt(o,i,r,n);case"TemplateLiteral":return yield*Nwt(o,i,r,n);case"This":return yield*Lwt(o,i,r,n);case"Tuple":return yield*Mwt(o,i,r,n);case"Undefined":return yield*Fwt(o,i,r,n);case"Union":return yield*Owt(o,i,r,n);case"Uint8Array":return yield*Qwt(o,i,r,n);case"Unknown":return yield*Uwt(o,i,r,n);case"Void":return yield*qwt(o,i,r,n);default:if(!jd.Has(o[ot]))throw new bue(t);return yield*Hwt(o,i,r,n)}}s(Wl,"Visit");function Py(...t){let e=t.length===3?Wl(t[0],t[1],"",t[2]):Wl(t[0],[],"",t[1]);return new jb(e)}s(Py,"Errors");f();f();var t4=class extends _n{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},Iue=class extends _n{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function ya(t,e,r){try{return Bo(t)?t[ga].Decode(r):r}catch(n){throw new Iue(t,e,r,n)}}s(ya,"Default");function Wwt(t,e,r,n){return Sn(n)?ya(t,r,n.map((i,o)=>kg(t.items,e,`${r}/${o}`,i))):ya(t,r,n)}s(Wwt,"FromArray");function $wt(t,e,r,n){if(!bi(n)||G0(n))return ya(t,r,n);let i=$W(t),o=i.map(d=>d[0]),a={...n};for(let[d,p]of i)d in a&&(a[d]=kg(p,e,`${r}/${d}`,a[d]));if(!Bo(t.unevaluatedProperties))return ya(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let d of c)o.includes(d)||(u[d]=ya(l,`${r}/${d}`,u[d]));return ya(t,r,u)}s($wt,"FromIntersect");function jwt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=kg(o,[...e,...i],r,n);return ya(t,r,a)}s(jwt,"FromImport");function Gwt(t,e,r,n){return ya(t,r,kg(t.not,e,r,n))}s(Gwt,"FromNot");function Vwt(t,e,r,n){if(!bi(n))return ya(t,r,n);let i=Of(t),o={...n};for(let u of i)wn(o,u)&&(js(o[u])&&(!ov(t.properties[u])||_s.IsExactOptionalProperty(o,u))||(o[u]=kg(t.properties[u],e,`${r}/${u}`,o[u])));if(!Aa(t.additionalProperties))return ya(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=ya(c,`${r}/${u}`,l[u]));return ya(t,r,l)}s(Vwt,"FromObject");function zwt(t,e,r,n){if(!bi(n))return ya(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let d of Object.getOwnPropertyNames(n))o.test(d)&&(a[d]=kg(t.patternProperties[i],e,`${r}/${d}`,a[d]));if(!Aa(t.additionalProperties))return ya(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)o.test(d)||(u[d]=ya(l,`${r}/${d}`,u[d]));return ya(t,r,u)}s(zwt,"FromRecord");function Ywt(t,e,r,n){let i=vo(t,e);return ya(t,r,kg(i,e,r,n))}s(Ywt,"FromRef");function Kwt(t,e,r,n){let i=vo(t,e);return ya(t,r,kg(i,e,r,n))}s(Kwt,"FromThis");function Jwt(t,e,r,n){return Sn(n)&&Sn(t.items)?ya(t,r,t.items.map((i,o)=>kg(i,e,`${r}/${o}`,n[o]))):ya(t,r,n)}s(Jwt,"FromTuple");function Xwt(t,e,r,n){for(let i of t.anyOf){if(!wi(i,e,n))continue;let o=kg(i,e,r,n);return ya(t,r,o)}return ya(t,r,n)}s(Xwt,"FromUnion");function kg(t,e,r,n){let i=ql(t,e),o=t;switch(t[ot]){case"Array":return Wwt(o,i,r,n);case"Import":return jwt(o,i,r,n);case"Intersect":return $wt(o,i,r,n);case"Not":return Gwt(o,i,r,n);case"Object":return Vwt(o,i,r,n);case"Record":return zwt(o,i,r,n);case"Ref":return Ywt(o,i,r,n);case"Symbol":return ya(o,r,n);case"This":return Kwt(o,i,r,n);case"Tuple":return Jwt(o,i,r,n);case"Union":return Xwt(o,i,r,n);default:return ya(o,r,n)}}s(kg,"Visit");function r4(t,e,r){return kg(t,e,"",r)}s(r4,"TransformDecode");f();var n4=class extends _n{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},Tue=class extends _n{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function xu(t,e,r){try{return Bo(t)?t[ga].Encode(r):r}catch(n){throw new Tue(t,e,r,n)}}s(xu,"Default");function Zwt(t,e,r,n){let i=xu(t,r,n);return Sn(i)?i.map((o,a)=>Pg(t.items,e,`${r}/${a}`,o)):i}s(Zwt,"FromArray");function eSt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=xu(t,r,n);return Pg(o,[...e,...i],r,a)}s(eSt,"FromImport");function tSt(t,e,r,n){let i=xu(t,r,n);if(!bi(n)||G0(n))return i;let o=$W(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=Pg(m,e,`${r}/${p}`,c[p]));if(!Bo(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,d={...c};for(let p of l)a.includes(p)||(d[p]=xu(u,`${r}/${p}`,d[p]));return d}s(tSt,"FromIntersect");function rSt(t,e,r,n){return xu(t.not,r,xu(t,r,n))}s(rSt,"FromNot");function nSt(t,e,r,n){let i=xu(t,r,n);if(!bi(i))return i;let o=Of(t),a={...i};for(let d of o)wn(a,d)&&(js(a[d])&&(!ov(t.properties[d])||_s.IsExactOptionalProperty(a,d))||(a[d]=Pg(t.properties[d],e,`${r}/${d}`,a[d])));if(!Aa(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)o.includes(d)||(u[d]=xu(l,`${r}/${d}`,u[d]));return u}s(nSt,"FromObject");function iSt(t,e,r,n){let i=xu(t,r,n);if(!bi(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=Pg(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!Aa(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)a.test(p)||(d[p]=xu(u,`${r}/${p}`,d[p]));return d}s(iSt,"FromRecord");function oSt(t,e,r,n){let i=vo(t,e),o=Pg(i,e,r,n);return xu(t,r,o)}s(oSt,"FromRef");function sSt(t,e,r,n){let i=vo(t,e),o=Pg(i,e,r,n);return xu(t,r,o)}s(sSt,"FromThis");function aSt(t,e,r,n){let i=xu(t,r,n);return Sn(t.items)?t.items.map((o,a)=>Pg(o,e,`${r}/${a}`,i[a])):[]}s(aSt,"FromTuple");function cSt(t,e,r,n){for(let i of t.anyOf){if(!wi(i,e,n))continue;let o=Pg(i,e,r,n);return xu(t,r,o)}for(let i of t.anyOf){let o=Pg(i,e,r,n);if(wi(t,e,o))return xu(t,r,o)}return xu(t,r,n)}s(cSt,"FromUnion");function Pg(t,e,r,n){let i=ql(t,e),o=t;switch(t[ot]){case"Array":return Zwt(o,i,r,n);case"Import":return eSt(o,i,r,n);case"Intersect":return tSt(o,i,r,n);case"Not":return rSt(o,i,r,n);case"Object":return nSt(o,i,r,n);case"Record":return iSt(o,i,r,n);case"Ref":return oSt(o,i,r,n);case"This":return sSt(o,i,r,n);case"Tuple":return aSt(o,i,r,n);case"Union":return cSt(o,i,r,n);default:return xu(o,r,n)}}s(Pg,"Visit");function i4(t,e,r){return Pg(t,e,"",r)}s(i4,"TransformEncode");f();function lSt(t,e){return Bo(t)||ml(t.items,e)}s(lSt,"FromArray");function uSt(t,e){return Bo(t)||ml(t.items,e)}s(uSt,"FromAsyncIterator");function dSt(t,e){return Bo(t)||ml(t.returns,e)||t.parameters.some(r=>ml(r,e))}s(dSt,"FromConstructor");function fSt(t,e){return Bo(t)||ml(t.returns,e)||t.parameters.some(r=>ml(r,e))}s(fSt,"FromFunction");function pSt(t,e){return Bo(t)||Bo(t.unevaluatedProperties)||t.allOf.some(r=>ml(r,e))}s(pSt,"FromIntersect");function mSt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Bo(t)||ml(n,[...r,...e])}s(mSt,"FromImport");function hSt(t,e){return Bo(t)||ml(t.items,e)}s(hSt,"FromIterator");function gSt(t,e){return Bo(t)||ml(t.not,e)}s(gSt,"FromNot");function ASt(t,e){return Bo(t)||Object.values(t.properties).some(r=>ml(r,e))||Aa(t.additionalProperties)&&ml(t.additionalProperties,e)}s(ASt,"FromObject");function ySt(t,e){return Bo(t)||ml(t.item,e)}s(ySt,"FromPromise");function CSt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Bo(t)||ml(n,e)||Aa(t.additionalProperties)&&Bo(t.additionalProperties)}s(CSt,"FromRecord");function vSt(t,e){return Bo(t)?!0:ml(vo(t,e),e)}s(vSt,"FromRef");function ESt(t,e){return Bo(t)?!0:ml(vo(t,e),e)}s(ESt,"FromThis");function xSt(t,e){return Bo(t)||!js(t.items)&&t.items.some(r=>ml(r,e))}s(xSt,"FromTuple");function bSt(t,e){return Bo(t)||t.anyOf.some(r=>ml(r,e))}s(bSt,"FromUnion");function ml(t,e){let r=ql(t,e),n=t;if(t.$id&&wue.has(t.$id))return!1;switch(t.$id&&wue.add(t.$id),t[ot]){case"Array":return lSt(n,r);case"AsyncIterator":return uSt(n,r);case"Constructor":return dSt(n,r);case"Function":return fSt(n,r);case"Import":return mSt(n,r);case"Intersect":return pSt(n,r);case"Iterator":return hSt(n,r);case"Not":return gSt(n,r);case"Object":return ASt(n,r);case"Promise":return ySt(n,r);case"Record":return CSt(n,r);case"Ref":return vSt(n,r);case"This":return ESt(n,r);case"Tuple":return xSt(n,r);case"Union":return bSt(n,r);default:return Bo(t)}}s(ml,"Visit");var wue=new Set;function dv(t,e){return wue.clear(),ml(t,e)}s(dv,"HasTransform");var Sue=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=dv(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return Py(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new t4(this.schema,e,this.Errors(e).First());return this.hasTransform?r4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?i4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new n4(this.schema,e,this.Errors(e).First());return r}},fv;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(fv||(fv={}));var n$;(function(t){function e(o){return o.length===0?!1:fv.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(fv.IsAlpha(c)||fv.IsNumeric(c)||fv.DollarSign(c)||fv.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(n$||(n$={}));var _ue;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);fv.IsNumeric(o)||fv.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(_ue||(_ue={}));var Rue;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(Rue||(Rue={}));var kue=class extends _n{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},i$=class extends _n{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},o_;(function(t){function e(a,c,l){return _s.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${n$.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return _s.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return _s.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return _s.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return _s.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(o_||(o_={}));var zs;(function(t){function e(ue){return ue[ot]==="Any"||ue[ot]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ue,Ue,ye){yield"true"}s(r,"FromAny");function*n(ue,Ue,ye){yield"true"}s(n,"FromArgument");function*i(ue,Ue,ye){yield`Array.isArray(${ye})`;let[We,se]=[Me("value","any"),Me("acc","number")];rn(ue.maxItems)&&(yield`${ye}.length <= ${ue.maxItems}`),rn(ue.minItems)&&(yield`${ye}.length >= ${ue.minItems}`);let le=Ae(ue.items,Ue,"value");if(yield`${ye}.every((${We}) => ${le})`,Vs(ue.contains)||rn(ue.minContains)||rn(ue.maxContains)){let qe=Vs(ue.contains)?ue.contains:Ai(),Be=Ae(qe,Ue,"value"),xe=rn(ue.minContains)?[`(count >= ${ue.minContains})`]:[],je=rn(ue.maxContains)?[`(count <= ${ue.maxContains})`]:[],et=`const count = value.reduce((${se}, ${We}) => ${Be} ? acc + 1 : acc, 0)`,pt=["(count > 0)",...xe,...je].join(" && ");yield`((${We}) => { ${et}; return ${pt}})(${ye})`}ue.uniqueItems===!0&&(yield`((${We}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ue,Ue,ye){yield`(typeof ${ye} === 'bigint')`,vu(ue.exclusiveMaximum)&&(yield`${ye} < BigInt(${ue.exclusiveMaximum})`),vu(ue.exclusiveMinimum)&&(yield`${ye} > BigInt(${ue.exclusiveMinimum})`),vu(ue.maximum)&&(yield`${ye} <= BigInt(${ue.maximum})`),vu(ue.minimum)&&(yield`${ye} >= BigInt(${ue.minimum})`),vu(ue.multipleOf)&&(yield`(${ye} % BigInt(${ue.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(ue,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(ue,Ue,ye){yield*te(ue.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(ue,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,rn(ue.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ue.exclusiveMaximumTimestamp}`),rn(ue.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ue.exclusiveMinimumTimestamp}`),rn(ue.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ue.maximumTimestamp}`),rn(ue.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ue.minimumTimestamp}`),rn(ue.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ue.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ue,Ue,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ue,Ue,ye){let We=globalThis.Object.getOwnPropertyNames(ue.$defs).reduce((se,le)=>[...se,ue.$defs[le]],[]);yield*te(vm(ue.$ref),[...Ue,...We],ye)}s(p,"FromImport");function*m(ue,Ue,ye){yield`Number.isInteger(${ye})`,rn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),rn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),rn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),rn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),rn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ue,Ue,ye){let We=ue.allOf.map(se=>Ae(se,Ue,ye)).join(" && ");if(ue.unevaluatedProperties===!1){let se=Te(`${new RegExp(cv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key))`;yield`(${We} && ${le})`}else if(Vs(ue.unevaluatedProperties)){let se=Te(`${new RegExp(cv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key) || ${Ae(ue.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${We} && ${le})`}else yield`(${We})`}s(h,"FromIntersect");function*g(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*A(ue,Ue,ye){typeof ue.const=="number"||typeof ue.const=="boolean"?yield`(${ye} === ${ue.const})`:yield`(${ye} === '${Rue.Escape(ue.const)}')`}s(A,"FromLiteral");function*y(ue,Ue,ye){yield"false"}s(y,"FromNever");function*E(ue,Ue,ye){yield`(!${Ae(ue.not,Ue,ye)})`}s(E,"FromNot");function*b(ue,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*w(ue,Ue,ye){yield o_.IsNumberLike(ye),rn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),rn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),rn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),rn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),rn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(w,"FromNumber");function*R(ue,Ue,ye){yield o_.IsObjectLike(ye),rn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),rn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let We=Object.getOwnPropertyNames(ue.properties);for(let se of We){let le=n$.Encode(ye,se),qe=ue.properties[se];if(ue.required&&ue.required.includes(se))yield*te(qe,Ue,le),(lv(qe)||e(qe))&&(yield`('${se}' in ${ye})`);else{let Be=Ae(qe,Ue,le);yield o_.IsExactOptionalProperty(ye,se,Be)}}if(ue.additionalProperties===!1)if(ue.required&&ue.required.length===We.length)yield`Object.getOwnPropertyNames(${ye}).length === ${We.length}`;else{let se=`[${We.map(le=>`'${le}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${se}.includes(key))`}if(typeof ue.additionalProperties=="object"){let se=Ae(ue.additionalProperties,Ue,`${ye}[key]`),le=`[${We.map(qe=>`'${qe}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${le}.includes(key) || ${se}))`}}s(R,"FromObject");function*D(ue,Ue,ye){yield`${ye} instanceof Promise`}s(D,"FromPromise");function*N(ue,Ue,ye){yield o_.IsRecordLike(ye),rn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),rn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let[We,se]=Object.entries(ue.patternProperties)[0],le=Te(`${new RegExp(We)}`),qe=Ae(se,Ue,"value"),Be=Vs(ue.additionalProperties)?Ae(ue.additionalProperties,Ue,ye):ue.additionalProperties===!1?"false":"true",xe=`(${le}.test(key) ? ${qe} : ${Be})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(N,"FromRecord");function*O(ue,Ue,ye){let We=vo(ue,Ue);if(pe.functions.has(ue.$ref))return yield`${Oe(ue.$ref)}(${ye})`;yield*te(We,Ue,ye)}s(O,"FromRef");function*Y(ue,Ue,ye){let We=Te(`${new RegExp(ue.source,ue.flags)};`);yield`(typeof ${ye} === 'string')`,rn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),rn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),yield`${We}.test(${ye})`}s(Y,"FromRegExp");function*ee(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,rn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),rn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),ue.pattern!==void 0&&(yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`),ue.format!==void 0&&(yield`format('${ue.format}', ${ye})`)}s(ee,"FromString");function*V(ue,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(V,"FromSymbol");function*H(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*U(ue,Ue,ye){yield`${Oe(ue.$ref)}(${ye})`}s(U,"FromThis");function*X(ue,Ue,ye){if(yield`Array.isArray(${ye})`,ue.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ue.maxItems})`;for(let We=0;We<ue.items.length;We++)yield`${Ae(ue.items[We],Ue,`${ye}[${We}]`)}`}s(X,"FromTuple");function*K(ue,Ue,ye){yield`${ye} === undefined`}s(K,"FromUndefined");function*j(ue,Ue,ye){yield`(${ue.anyOf.map(se=>Ae(se,Ue,ye)).join(" || ")})`}s(j,"FromUnion");function*W(ue,Ue,ye){yield`${ye} instanceof Uint8Array`,rn(ue.maxByteLength)&&(yield`(${ye}.length <= ${ue.maxByteLength})`),rn(ue.minByteLength)&&(yield`(${ye}.length >= ${ue.minByteLength})`)}s(W,"FromUint8Array");function*J(ue,Ue,ye){yield"true"}s(J,"FromUnknown");function*ie(ue,Ue,ye){yield o_.IsVoidLike(ye)}s(ie,"FromVoid");function*ae(ue,Ue,ye){let We=pe.instances.size;pe.instances.set(We,ue),yield`kind('${ue[ot]}', ${We}, ${ye})`}s(ae,"FromKind");function*te(ue,Ue,ye,We=!0){let se=fo(ue.$id)?[...Ue,ue]:Ue,le=ue;if(We&&fo(ue.$id)){let qe=Oe(ue.$id);if(pe.functions.has(qe))return yield`${qe}(${ye})`;{pe.functions.set(qe,"<deferred>");let Be=Je(qe,ue,Ue,"value",!1);return pe.functions.set(qe,Be),yield`${qe}(${ye})`}}switch(le[ot]){case"Any":return yield*r(le,se,ye);case"Argument":return yield*n(le,se,ye);case"Array":return yield*i(le,se,ye);case"AsyncIterator":return yield*o(le,se,ye);case"BigInt":return yield*a(le,se,ye);case"Boolean":return yield*c(le,se,ye);case"Constructor":return yield*l(le,se,ye);case"Date":return yield*u(le,se,ye);case"Function":return yield*d(le,se,ye);case"Import":return yield*p(le,se,ye);case"Integer":return yield*m(le,se,ye);case"Intersect":return yield*h(le,se,ye);case"Iterator":return yield*g(le,se,ye);case"Literal":return yield*A(le,se,ye);case"Never":return yield*y(le,se,ye);case"Not":return yield*E(le,se,ye);case"Null":return yield*b(le,se,ye);case"Number":return yield*w(le,se,ye);case"Object":return yield*R(le,se,ye);case"Promise":return yield*D(le,se,ye);case"Record":return yield*N(le,se,ye);case"Ref":return yield*O(le,se,ye);case"RegExp":return yield*Y(le,se,ye);case"String":return yield*ee(le,se,ye);case"Symbol":return yield*V(le,se,ye);case"TemplateLiteral":return yield*H(le,se,ye);case"This":return yield*U(le,se,ye);case"Tuple":return yield*X(le,se,ye);case"Undefined":return yield*K(le,se,ye);case"Union":return yield*j(le,se,ye);case"Uint8Array":return yield*W(le,se,ye);case"Unknown":return yield*J(le,se,ye);case"Void":return yield*ie(le,se,ye);default:if(!jd.Has(le[ot]))throw new kue(ue);return yield*ae(le,se,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ae(ue,Ue,ye,We=!0){return`(${[...te(ue,Ue,ye,We)].join(" && ")})`}s(Ae,"CreateExpression");function Oe(ue){return`check_${_ue.Encode(ue)}`}s(Oe,"CreateFunctionName");function Te(ue){let Ue=`local_${pe.variables.size}`;return pe.variables.set(Ue,`const ${Ue} = ${ue}`),Ue}s(Te,"CreateVariable");function Je(ue,Ue,ye,We,se=!0){let[le,qe]=[`
`,et=>"".padStart(et," ")],Be=Me("value","any"),xe=lt("boolean"),je=[...te(Ue,ye,We,se)].map(et=>`${qe(4)}${et}`).join(` &&${le}`);return`function ${ue}(${Be})${xe} {${le}${qe(2)}return (${le}${je}${le}${qe(2)})
}`}s(Je,"CreateFunction");function Me(ue,Ue){let ye=pe.language==="typescript"?`: ${Ue}`:"";return`${ue}${ye}`}s(Me,"CreateParameter");function lt(ue){return pe.language==="typescript"?`: ${ue}`:""}s(lt,"CreateReturns");function _t(ue,Ue,ye){let We=Je("check",ue,Ue,"value"),se=Me("value","any"),le=lt("boolean"),qe=[...pe.functions.values()],Be=[...pe.variables.values()],xe=fo(ue.$id)?`return function check(${se})${le} {
  return ${Oe(ue.$id)}(value)
}`:`return ${We}`;return[...Be,...qe,xe].join(`
`)}s(_t,"Build");function vt(...ue){let Ue={language:"javascript"},[ye,We,se]=ue.length===2&&Sn(ue[1])?[ue[0],ue[1],Ue]:ue.length===2&&!Sn(ue[1])?[ue[0],[],ue[1]]:ue.length===3?[ue[0],ue[1],ue[2]]:ue.length===1?[ue[0],[],Ue]:[null,[],Ue];if(pe.language=se.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!Vs(ye))throw new i$(ye);for(let le of We)if(!Vs(le))throw new i$(le);return _t(ye,We,se)}s(vt,"Code"),t.Code=vt;function ht(ue,Ue=[]){let ye=vt(ue,Ue,{language:"javascript"}),We=globalThis.Function("kind","format","hash",ye),se=new Map(pe.instances);function le(je,et,pt){if(!jd.Has(je)||!se.has(et))return!1;let Mt=jd.Get(je),Kt=se.get(et);return Mt(Kt,pt)}s(le,"typeRegistryFunction");function qe(je,et){return wg.Has(je)?wg.Get(je)(et):!1}s(qe,"formatRegistryFunction");function Be(je){return $b(je)}s(Be,"hashFunction");let xe=We(le,qe,Be);return new Sue(ue,Ue,xe,ye)}s(ht,"Compile"),t.Compile=ht})(zs||(zs={}));var V$=Fe(Lb());f();f();var bu=[];for(let t=0;t<256;++t)bu.push((t+256).toString(16).slice(1));function ODe(t,e=0){return(bu[t[e+0]]+bu[t[e+1]]+bu[t[e+2]]+bu[t[e+3]]+"-"+bu[t[e+4]]+bu[t[e+5]]+"-"+bu[t[e+6]]+bu[t[e+7]]+"-"+bu[t[e+8]]+bu[t[e+9]]+"-"+bu[t[e+10]]+bu[t[e+11]]+bu[t[e+12]]+bu[t[e+13]]+bu[t[e+14]]+bu[t[e+15]]).toLowerCase()}s(ODe,"unsafeStringify");f();var QDe=require("crypto");var s$=new Uint8Array(256),o$=s$.length;function Pue(){return o$>s$.length-16&&((0,QDe.randomFillSync)(s$),o$=0),s$.slice(o$,o$+=16)}s(Pue,"rng");f();f();var UDe=require("crypto"),Due={randomUUID:UDe.randomUUID};function ISt(t,e,r){if(Due.randomUUID&&!e&&!t)return Due.randomUUID();t=t||{};let n=t.random??t.rng?.()??Pue();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return ODe(n)}s(ISt,"v4");var gr=ISt;var z$=Fe(di());function I4(t){return t===1}s(I4,"isRestricted");var __t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],QM=8192,R_t=21;var Tu=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return I4(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(w4(e))return this.reporterRestricted;if(PP(e))return new dM}getFTReporter(e){if(g8e(e))return this.reporterFT;if(PP(e))return new dM}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},k_t=I.Object({},{additionalProperties:I.String()}),P_t=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),D_t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function B_t(t){return D_t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(B_t,"isOomError");function N_t(t){return qM(t)?"network":B_t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(N_t,"getErrorType");var qr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=zs.Compile(k_t)}static{this.validateTelemetryMeasurements=zs.Compile(P_t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},va())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=va())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Nt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=Iy(e.get(dn).getEditorInfo()),this.properties.editor_plugin_version=Iy(e.get(dn).getEditorPluginInfo());let r=e.get(Ss);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${d_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(dn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=Iy(n.getEditorInfo());let i=e.get(yn);this.properties.fetcher=i.name;let o=e.get(gl).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=E8e(e);r["copilot.build"]=x8e(e),r["copilot.buildType"]=My(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(I4(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>QM){let a=0,c=0;for(;o>0&&c<R_t;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+QM;o<QM&&(u=a+o),r[l]=i.slice(a,u),o-=QM,a+=QM}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=F_t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(PP(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return Ng(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),I4(r)&&Ng(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,A8e(e))}},Ly=class t extends qr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}extendWithExpTelemetry(){return this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new zS({}),exp:fm.createEmptyConfig()})}};function UM(t,e,r,n){t.get(Tu).getReporter(t,e)?.sendTelemetryEvent(r,qr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(UM,"sendTelemetryEvent");function L_t(t,e,r,n){t.get(Tu).getReporter(t,e)?.sendTelemetryErrorEvent(r,qr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(L_t,"sendTelemetryErrorEvent");function M_t(t,e,r,n){t.get(Tu).getFTReporter(t)?.sendTelemetryEvent(r,qr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(M_t,"sendFTTelemetryEvent");function T4(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(T4,"telemetrizePromptLength");function va(){return performance.now()}s(va,"now");function F_t(t){return Math.floor(t/1e3)}s(F_t,"nowSeconds");function w4(t){return t.get(Cu).optedIn}s(w4,"shouldSendRestricted");function g8e(t){return t.get(Cu).ftFlag!==""}s(g8e,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(Qc).register(O_t(t,e,va(),r?.extendedBy(),n))}s(Bt,"telemetry");async function O_t(t,e,r,n,i=0){let o=n||qr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!I4(i)||w4(t))&&UM(t,i,e,o),I4(i)&&__t.includes(e)&&g8e(t)&&M_t(t,i,e,o)}s(O_t,"_telemetry");function UH(t,e){return t.get(Qc).register(Q_t(t,e,va()))}s(UH,"telemetryExpProblem");async function Q_t(t,e,r){let n="expProblem",i=qr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),UM(t,0,n,i)}s(Q_t,"_telemetryExpProblem");function afe(t,e,r,n){let i={...r,...A8e(t)};UM(t,0,e,{properties:i,measurements:n})}s(afe,"telemetryRaw");function A8e(t){let e=t.get(dn),r={unique_id:gr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:Iy(e.getEditorInfo())},n=t.get(Cu);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(A8e,"createRequiredProperties");var sfe=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,V$.SHA256)(V$.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function La(t,e,r,n,i){return t.get(Qc).register(y8e(t,e,va(),r,{...n},i))}s(La,"telemetryException");async function y8e(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||hd(a)||a instanceof Ws||a instanceof z$.ConnectionError||a instanceof z$.ResponseError)return}else{if(a=new sfe(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let A=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(A[0]??"")&&A.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(A[0]??"")&&A.shift(),a.stack=`${a}
${A.join(`
`)}`}}let c=t.get(dn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=w4(t),d=vPe(a,l,u),p=N_t(a),m=p==="exception",h=qr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let A of o.exception_detail)A.value&&(u?A.value=Lle(A.value):A.value="[redacted]");if(o??=cPe(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let A=CPe(a,l),y=qr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:A.stack||A.toString(),message:A.message,...i});o.rollup_id!=="auto"&&(y.properties.errno=o.rollup_id),await y.makeReadyForSending(t,1,"IncludeExp",r),y.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=y.properties.unique_id,UM(t,1,`error.${p}`,y)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(Ty).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),UM(t,0,`error.${p}`,h)}s(y8e,"_telemetryException");function hl(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await y8e(t,a,va(),r,n)}},"wrapped");return(...o)=>t.get(Qc).register(i(...o))}s(hl,"telemetryCatch");function Ng(t,e,r,n){return t.get(Qc).register(U_t(t,e,va(),r?.extendedBy(),n))}s(Ng,"telemetryError");async function U_t(t,e,r,n,i=0){if(I4(i)&&!w4(t))return;let o=n||qr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),L_t(t,i,e,o)}s(U_t,"_telemetryError");function C8e(t,e,r,n,i){let o=qr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(C8e,"logEngineCompletion");function v8e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(v8e,"logEnginePrompt");f();f();var b8e=Fe(di()),I8e=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),cfe;(r=>(r.method="github/didChangeAuth",r.type=new b8e.ProtocolNotificationType(r.method)))(cfe||={});f();var T8e=Fe(di()),lfe;(r=>(r.method="copilot/ipCodeCitation",r.type=new T8e.NotificationType(r.method)))(lfe||={});f();var w8e=Fe(di()),Y$;(r=>(r.method="context/update",r.type=new w8e.ProtocolRequestType(r.method)))(Y$||={});f();f();var tI="Cancelled";f();var Fn=Fe(di()),HM=I.String(),$f=I.Object({uri:HM}),f_=I.Intersect([$f,I.Object({version:I.Optional(I.Integer())})]),xUr=I.Required(f_),jl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),Cc=I.Object({start:jl,end:jl}),ufe=I.Union([I.Integer(),I.String()]),bUr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var S8e=Fe(di()),dfe;(r=>(r.method="textDocument/didFocus",r.type=new S8e.ProtocolNotificationType(r.method)))(dfe||={});f();var q_t=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),H_t=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),_8e=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),R8e=I.Object({editorInfo:I.Optional(_8e),editorPluginInfo:I.Optional(_8e),relatedPluginInfo:I.Optional(I.Array(H_t)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(q_t)),githubAppId:I.Optional(I.String())});f();var WM=Fe(di());var K$=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(K$||{}),W_t=I.Enum(K$),$_t=I.Object({triggerKind:W_t,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:Cc,tooltipSignature:I.Optional(I.String())}))}),k8e=I.Object({textDocument:f_,position:jl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:$_t,data:I.Optional(I.Unknown())}),ffe;(r=>(r.method="textDocument/inlineCompletion",r.type=new WM.ProtocolRequestType(r.method)))(ffe||={});var P8e=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),D8e=I.Object({item:P8e}),pfe;(r=>(r.method="textDocument/didShowCompletion",r.type=new WM.ProtocolNotificationType(r.method)))(pfe||={});var B8e=I.Object({item:P8e,acceptedLength:I.Integer({minimum:1})}),mfe;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new WM.ProtocolNotificationType(r.method)))(mfe||={});f();var N8e=Fe(di()),hfe;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new N8e.ProtocolRequestType(r.method)))(hfe||={});f();var L8e=Fe(di()),M8e=I.Object({textDocument:f_,position:jl}),j_t=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),F8e=I.Object({item:j_t}),gfe;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new L8e.ProtocolNotificationType(r.method)))(gfe||={});f();var J$=Fe(di());var O8e=I.Object({textDocument:f_,position:jl,partialResultToken:I.Optional(ufe),workDoneToken:I.Optional(ufe)}),X$;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new J$.ProtocolRequestType(n.method),n.partialResult=new J$.ProgressType))(X$||={});f();var Q8e=Fe(di()),Afe;(r=>(r.method="copilot/related",r.type=new Q8e.ProtocolRequestType(r.method)))(Afe||={});f();var U8e=Fe(di()),yfe;(r=>(r.method="statusNotification",r.type=new U8e.ProtocolNotificationType(r.method)))(yfe||={});var q8e=Fe(require("events"));var Lg=class{static{s(this,"CopilotTokenNotifier")}#e=new q8e.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=hl(e,n,`event.${r}`);return this.#e.on(r,i),Fn.Disposable.create(()=>this.#e.off(r,i))}};function ws(t,e){return t.get(Lg).on(t,"CopilotToken",e)}s(ws,"onCopilotToken");function $M(t,e){return t.get(Lg).emitToken(e)}s($M,"emitCopilotToken");function Z$(t){return t.get(Lg).lastToken}s(Z$,"getLastCopilotToken");f();var ej=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function Cfe(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(Cfe,"findKnownOrg");function H8e(t){let e=t.organization_list??[];return Cfe(e)??""}s(H8e,"getUserKind");f();f();var Ga=class{constructor(){this.recentNotifications=new Ur(100)}static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}};f();var wu=class{static{s(this,"UrlOpener")}};var G_t=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],W8e="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",$8e="https://gh.io/copilot-network-errors",Vd=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&G_t.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new It("certificates").error(e,`${W8e} Please visit ${$8e} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(Ga).showWarningMessage(W8e,n).then(i=>{if(i?.title===n.title)return e.get(wu).open($8e)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();var jM=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function hd(t){return!t||typeof t!="object"?!1:t instanceof jM||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(hd,"isAbortError");var S4=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},Fy=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},V_t=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function qM(t,e=!0){return t instanceof Error?e&&"cause"in t&&qM(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof S4||t instanceof Fy||t?.message?.startsWith("net::")||V_t.has(t.code??""):!1}s(qM,"isNetworkError");var rI=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new S4(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new S4(`Response body truncated: actualLength=${o}`,"Truncated"):new S4(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};f();function tj(){return typeof process>"u"}s(tj,"isWeb");function GM(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(GM,"isMsBenchModeEnabled");var vfe=class extends Fy{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Tm(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...tj()?{}:tp(t),...n.headers}};let i=await t.get(yn).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new Fy(i);if(!i.headers.get("x-github-request-id"))throw new vfe(i);return i}s(Tm,"apiFetch");f();f();var V8e=require("os"),rj=require("path");f();var j8e;(()=>{"use strict";var t={975:H=>{function U(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(U,"e");function X(j,W){for(var J,ie="",ae=0,te=-1,pe=0,Ae=0;Ae<=j.length;++Ae){if(Ae<j.length)J=j.charCodeAt(Ae);else{if(J===47)break;J=47}if(J===47){if(!(te===Ae-1||pe===1))if(te!==Ae-1&&pe===2){if(ie.length<2||ae!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Oe=ie.lastIndexOf("/");if(Oe!==ie.length-1){Oe===-1?(ie="",ae=0):ae=(ie=ie.slice(0,Oe)).length-1-ie.lastIndexOf("/"),te=Ae,pe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ae=0,te=Ae,pe=0;continue}}W&&(ie.length>0?ie+="/..":ie="..",ae=2)}else ie.length>0?ie+="/"+j.slice(te+1,Ae):ie=j.slice(te+1,Ae),ae=Ae-te-1;te=Ae,pe=0}else J===46&&pe!==-1?++pe:pe=-1}return ie}s(X,"r");var K={resolve:s(function(){for(var j,W="",J=!1,ie=arguments.length-1;ie>=-1&&!J;ie--){var ae;ie>=0?ae=arguments[ie]:(j===void 0&&(j=process.cwd()),ae=j),U(ae),ae.length!==0&&(W=ae+"/"+W,J=ae.charCodeAt(0)===47)}return W=X(W,!J),J?W.length>0?"/"+W:"/":W.length>0?W:"."},"resolve"),normalize:s(function(j){if(U(j),j.length===0)return".";var W=j.charCodeAt(0)===47,J=j.charCodeAt(j.length-1)===47;return(j=X(j,!W)).length!==0||W||(j="."),j.length>0&&J&&(j+="/"),W?"/"+j:j},"normalize"),isAbsolute:s(function(j){return U(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,W=0;W<arguments.length;++W){var J=arguments[W];U(J),J.length>0&&(j===void 0?j=J:j+="/"+J)}return j===void 0?".":K.normalize(j)},"join"),relative:s(function(j,W){if(U(j),U(W),j===W||(j=K.resolve(j))===(W=K.resolve(W)))return"";for(var J=1;J<j.length&&j.charCodeAt(J)===47;++J);for(var ie=j.length,ae=ie-J,te=1;te<W.length&&W.charCodeAt(te)===47;++te);for(var pe=W.length-te,Ae=ae<pe?ae:pe,Oe=-1,Te=0;Te<=Ae;++Te){if(Te===Ae){if(pe>Ae){if(W.charCodeAt(te+Te)===47)return W.slice(te+Te+1);if(Te===0)return W.slice(te+Te)}else ae>Ae&&(j.charCodeAt(J+Te)===47?Oe=Te:Te===0&&(Oe=0));break}var Je=j.charCodeAt(J+Te);if(Je!==W.charCodeAt(te+Te))break;Je===47&&(Oe=Te)}var Me="";for(Te=J+Oe+1;Te<=ie;++Te)Te!==ie&&j.charCodeAt(Te)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+W.slice(te+Oe):(te+=Oe,W.charCodeAt(te)===47&&++te,W.slice(te))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(U(j),j.length===0)return".";for(var W=j.charCodeAt(0),J=W===47,ie=-1,ae=!0,te=j.length-1;te>=1;--te)if((W=j.charCodeAt(te))===47){if(!ae){ie=te;break}}else ae=!1;return ie===-1?J?"/":".":J&&ie===1?"//":j.slice(0,ie)},"dirname"),basename:s(function(j,W){if(W!==void 0&&typeof W!="string")throw new TypeError('"ext" argument must be a string');U(j);var J,ie=0,ae=-1,te=!0;if(W!==void 0&&W.length>0&&W.length<=j.length){if(W.length===j.length&&W===j)return"";var pe=W.length-1,Ae=-1;for(J=j.length-1;J>=0;--J){var Oe=j.charCodeAt(J);if(Oe===47){if(!te){ie=J+1;break}}else Ae===-1&&(te=!1,Ae=J+1),pe>=0&&(Oe===W.charCodeAt(pe)?--pe==-1&&(ae=J):(pe=-1,ae=Ae))}return ie===ae?ae=Ae:ae===-1&&(ae=j.length),j.slice(ie,ae)}for(J=j.length-1;J>=0;--J)if(j.charCodeAt(J)===47){if(!te){ie=J+1;break}}else ae===-1&&(te=!1,ae=J+1);return ae===-1?"":j.slice(ie,ae)},"basename"),extname:s(function(j){U(j);for(var W=-1,J=0,ie=-1,ae=!0,te=0,pe=j.length-1;pe>=0;--pe){var Ae=j.charCodeAt(pe);if(Ae!==47)ie===-1&&(ae=!1,ie=pe+1),Ae===46?W===-1?W=pe:te!==1&&(te=1):W!==-1&&(te=-1);else if(!ae){J=pe+1;break}}return W===-1||ie===-1||te===0||te===1&&W===ie-1&&W===J+1?"":j.slice(W,ie)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function(W,J){var ie=J.dir||J.root,ae=J.base||(J.name||"")+(J.ext||"");return ie?ie===J.root?ie+ae:ie+"/"+ae:ae}(0,j)},"format"),parse:s(function(j){U(j);var W={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return W;var J,ie=j.charCodeAt(0),ae=ie===47;ae?(W.root="/",J=1):J=0;for(var te=-1,pe=0,Ae=-1,Oe=!0,Te=j.length-1,Je=0;Te>=J;--Te)if((ie=j.charCodeAt(Te))!==47)Ae===-1&&(Oe=!1,Ae=Te+1),ie===46?te===-1?te=Te:Je!==1&&(Je=1):te!==-1&&(Je=-1);else if(!Oe){pe=Te+1;break}return te===-1||Ae===-1||Je===0||Je===1&&te===Ae-1&&te===pe+1?Ae!==-1&&(W.base=W.name=pe===0&&ae?j.slice(1,Ae):j.slice(pe,Ae)):(pe===0&&ae?(W.name=j.slice(1,te),W.base=j.slice(1,Ae)):(W.name=j.slice(pe,te),W.base=j.slice(pe,Ae)),W.ext=j.slice(te,Ae)),pe>0?W.dir=j.slice(0,pe-1):ae&&(W.dir="/"),W},"parse"),sep:"/",delimiter:":",win32:null,posix:null};K.posix=K,H.exports=K}},e={};function r(H){var U=e[H];if(U!==void 0)return U.exports;var X=e[H]={exports:{}};return t[H](X,X.exports,r),X.exports}s(r,"r"),r.d=(H,U)=>{for(var X in U)r.o(U,X)&&!r.o(H,X)&&Object.defineProperty(H,X,{enumerable:!0,get:U[X]})},r.o=(H,U)=>Object.prototype.hasOwnProperty.call(H,U),r.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>V,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(H,U){if(!H.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(U){return U instanceof m||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,X,K,j,W,J=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(ie,ae){return ie||ae?ie:"file"}(U,J),this.authority=X||u,this.path=function(ie,ae){switch(ie){case"https":case"http":case"file":ae?ae[0]!==d&&(ae=d+ae):ae=d}return ae}(this.scheme,K||u),this.query=j||u,this.fragment=W||u,l(this,J))}get fsPath(){return b(this,!1)}with(U){if(!U)return this;let{scheme:X,authority:K,path:j,query:W,fragment:J}=U;return X===void 0?X=this.scheme:X===null&&(X=u),K===void 0?K=this.authority:K===null&&(K=u),j===void 0?j=this.path:j===null&&(j=u),W===void 0?W=this.query:W===null&&(W=u),J===void 0?J=this.fragment:J===null&&(J=u),X===this.scheme&&K===this.authority&&j===this.path&&W===this.query&&J===this.fragment?this:new g(X,K,j,W,J)}static parse(U,X=!1){let K=p.exec(U);return K?new g(K[2]||u,N(K[4]||u),N(K[5]||u),N(K[7]||u),N(K[9]||u),X):new g(u,u,u,u,u)}static file(U){let X=u;if(i&&(U=U.replace(/\\/g,d)),U[0]===d&&U[1]===d){let K=U.indexOf(d,2);K===-1?(X=U.substring(2),U=d):(X=U.substring(2,K),U=U.substring(K)||d)}return new g("file",X,U,u,u)}static from(U){let X=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return l(X,!0),X}toString(U=!1){return w(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof m)return U;{let X=new g(U);return X._formatted=U.external,X._fsPath=U._sep===h?U.fsPath:null,X}}return U}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(U=!1){return U?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=h),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(H,U,X){let K,j=-1;for(let W=0;W<H.length;W++){let J=H.charCodeAt(W);if(J>=97&&J<=122||J>=65&&J<=90||J>=48&&J<=57||J===45||J===46||J===95||J===126||U&&J===47||X&&J===91||X&&J===93||X&&J===58)j!==-1&&(K+=encodeURIComponent(H.substring(j,W)),j=-1),K!==void 0&&(K+=H.charAt(W));else{K===void 0&&(K=H.substr(0,W));let ie=A[J];ie!==void 0?(j!==-1&&(K+=encodeURIComponent(H.substring(j,W)),j=-1),K+=ie):j===-1&&(j=W)}}return j!==-1&&(K+=encodeURIComponent(H.substring(j))),K!==void 0?K:H}s(y,"m");function E(H){let U;for(let X=0;X<H.length;X++){let K=H.charCodeAt(X);K===35||K===63?(U===void 0&&(U=H.substr(0,X)),U+=A[K]):U!==void 0&&(U+=H[X])}return U!==void 0?U:H}s(E,"y");function b(H,U){let X;return X=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?U?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(X=X.replace(/\//g,"\\")),X}s(b,"v");function w(H,U){let X=U?E:y,K="",{scheme:j,authority:W,path:J,query:ie,fragment:ae}=H;if(j&&(K+=j,K+=":"),(W||j==="file")&&(K+=d,K+=d),W){let te=W.indexOf("@");if(te!==-1){let pe=W.substr(0,te);W=W.substr(te+1),te=pe.lastIndexOf(":"),te===-1?K+=X(pe,!1,!1):(K+=X(pe.substr(0,te),!1,!1),K+=":",K+=X(pe.substr(te+1),!1,!0)),K+="@"}W=W.toLowerCase(),te=W.lastIndexOf(":"),te===-1?K+=X(W,!1,!0):(K+=X(W.substr(0,te),!1,!0),K+=W.substr(te))}if(J){if(J.length>=3&&J.charCodeAt(0)===47&&J.charCodeAt(2)===58){let te=J.charCodeAt(1);te>=65&&te<=90&&(J=`/${String.fromCharCode(te+32)}:${J.substr(3)}`)}else if(J.length>=2&&J.charCodeAt(1)===58){let te=J.charCodeAt(0);te>=65&&te<=90&&(J=`${String.fromCharCode(te+32)}:${J.substr(2)}`)}K+=X(J,!0,!1)}return ie&&(K+="?",K+=X(ie,!1,!1)),ae&&(K+="#",K+=U?ae:y(ae,!1,!1)),K}s(w,"b");function R(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+R(H.substr(3)):H}}s(R,"C");let D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(D)?H.replace(D,U=>R(U)):H}s(N,"w");var O=r(975);let Y=O.posix||O,ee="/";var V;(function(H){H.joinPath=function(U,...X){return U.with({path:Y.join(U.path,...X)})},H.resolvePath=function(U,...X){let K=U.path,j=!1;K[0]!==ee&&(K=ee+K,j=!0);let W=Y.resolve(K,...X);return j&&W[0]===ee&&!U.authority&&(W=W.substring(1)),U.with({path:W})},H.dirname=function(U){if(U.path.length===0||U.path===ee)return U;let X=Y.dirname(U.path);return X.length===1&&X.charCodeAt(0)===46&&(X=""),U.with({path:X})},H.basename=function(U){return Y.basename(U.path)},H.extname=function(U){return Y.extname(U.path)}})(V||(V={})),j8e=n})();var{URI:nI,Utils:VM}=j8e;function z8e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+z8e(t.substring(3)):t}}s(z8e,"decodeURIComponentGraceful");var G8e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Efe(t){return t.match(G8e)?t.replace(G8e,e=>z8e(e)):t}s(Efe,"percentDecode");function Al(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return nI.file(t).toString()}s(Al,"makeFsUri");function p_(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?nI.parse(e[1]+e[2],!0):nI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(p_,"parseUri");function nj(t){return p_(t),t}s(nj,"validateUri");function yl(t){try{return p_(t).toString()}catch{return t}}s(yl,"normalizeUri");var Y8e=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Va(t){let e=p_(t);if(!Y8e.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,V8e.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,rj.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(Va,"fsPath");function vs(t){try{return Va(t)}catch{return}}s(vs,"getFsPath");function K8e(t){let e=vs(t);if(e)return nI.file(e).toString()}s(K8e,"getFsUri");function m_(t,...e){let r,n=vs(t);return n?r=Al((0,rj.resolve)(n,...e)):r=VM.resolvePath(p_(t),...e.map(i=>J8e(i))).toString(),typeof t=="string"?r:{uri:r}}s(m_,"resolveFilePath");function Mo(t,...e){let r=VM.joinPath(p_(t),...e.map(J8e)).toString();return typeof t=="string"?r:{uri:r}}s(Mo,"joinPath");function J8e(t){return z_t(t)?t.replaceAll("\\","/"):t}s(J8e,"pathToURIPath");function z_t(t){return/^[^/\\]*\\/.test(t)}s(z_t,"isWinPath");function Hi(t){return Efe((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Hi,"basename");function gd(t){let e=VM.dirname(p_(t)),r;return Y8e.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(gd,"dirname");function X8e(t){return VM.extname(p_(t))}s(X8e,"extname");var zd=class{static{s(this,"NetworkConfiguration")}};function ij(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!bfe(t)&&r.protocol==="http:")return r.href}catch{}}s(ij,"ensurePermittedUrl");var h_={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function xfe(t,e,r){if(r&&yg(t)){for(let n of r){let i=Wi(t,n);if(i)return i}return}for(let n of e){let i=Wi(t,n);if(i)return i}}s(xfe,"urlConfigOverride");function Y_t(t,e){switch(e){case"api":return xfe(t,[qt.DebugOverrideCapiUrl,qt.DebugOverrideCapiUrlLegacy],[qt.DebugTestOverrideCapiUrl,qt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return xfe(t,[qt.DebugOverrideProxyUrl,qt.DebugOverrideProxyUrlLegacy],[qt.DebugTestOverrideProxyUrl,qt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!bfe(t))return xfe(t,[qt.DebugSnippyOverrideUrl])}}s(Y_t,"getEndpointOverrideUrl");function Oy(t,e,r,...n){let i=Y_t(t,r)??e.endpoints[r];return Mo(i,...n)}s(Oy,"getEndpointUrl");function _4(t){return Z$(t)?.endpoints??h_}s(_4,"getLastKnownEndpoints");function Z8e(t,e){if(e&&!ij(t,e)){t.get(Ga).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(zd).setConfiguredUrls(t,{serverUrl:e})}s(Z8e,"updateServerUrl");var rp=new It("auth"),rLe=60;function iI(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(iI,"fillGitHubUrls");function eLe(){return Math.floor(Date.now()/1e3)}s(eLe,"nowSeconds");async function oj(t,e){let r=qr.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let n=await K_t(t,e),i=await n.json(),o=i.user_notification;if(tLe(t,o,e),n.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return rp.info(t,d),Ng(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!n.ok||!i.token){rp.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),Ng(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&tLe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=eLe()+i.refresh_in+rLe;let c=await Ife(t,e),l;c.ok&&(l=await c.json());let u=new g_(i,l);return $M(t,u),Bt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:eLe()})),{kind:"success",copilotToken:u}}s(oj,"authFromGitHubSession");async function K_t(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Tm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Vd).notifyUser(t,i),i}}s(K_t,"fetchCopilotToken");async function Ife(t,e){let r={"X-GitHub-Api-Version":Qy},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Tm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Vd).notifyUser(t,i),i}}s(Ife,"fetchCopilotUserInfo");function tLe(t,e,r){e&&t.get(Ga).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(dn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(wu).open(c)}e.notification_id&&o&&await J_t(t,e.notification_id,r)}).catch(n=>{rp.exception(t,n,"copilotToken.notification")})}s(tLe,"notifyUser");async function J_t(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Tm(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&rp.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(J_t,"sendNotificationResultToGitHub");var g_=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new ej(r)}static{s(this,"CopilotToken")}get endpoints(){return{...h_,...this.envelope.endpoints??{}}}needsRefresh(){return(this.envelope.expires_at-rLe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return Cfe(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();var zM="apps",Tfe="hosts",A_=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(zM,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=np,i=await this.persistenceManager.read(zM,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Gl).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(Tfe,e);if(r)return{...r,githubAppId:np}}async saveAuthRecord(e){await this.persistenceManager.update(zM,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===np&&await this.persistenceManager.delete(Tfe,r),await this.persistenceManager.delete(zM,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(zM,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:np})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(Tfe)}authRecordKey(e,r){let n=r.githubAppId??e.get(Gl).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};f();f();var aLe=Fe(iLe()),cLe=Fe(sLe()),ip=Fe(require("os"));var R4=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(yn).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{sn.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new cLe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[aLe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=X_t(e),this.commonProperties=Z_t(e),this.#e=ws(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function X_t(t){let e={},r=t.get(Ss);e["ai.session.id"]=r.sessionId;let n=t.get(Cu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${ip.type()} ${ip.release()}`,e["ai.device.osArchitecture"]=ip.arch(),e["ai.device.osPlatform"]=ip.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(yo).getVersion(),e}s(X_t,"getTags");function Z_t(t){let e={};e.common_os=ip.platform(),e.common_platformversion=ip.release(),e.common_arch=ip.arch(),e.common_cpu=Array.from(new Set(ip.cpus().map(n=>n.model))).join();let r=t.get(Ss);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(Z_t,"getCommonProperties");var e2t="7d7048df-6dd0-4048-bb23-b716c1461f8f",t2t="3fdd7f28-937a-48c8-9a21-ba337db23bd1",r2t="f0000000-0000-0000-0000-000000000000";function lLe(t){return new URL(t).hostname==="github.com"?h_.telemetry:t.replace("://","://copilot-telemetry-service.")}s(lLe,"getEndpointForServerUrl");var Ad=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=lLe(this.serverUrl);this.shuttingDown=new Set;ws(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(Tu);i.setReporter(new R4(r,this.namespace,n,e2t)),i.setRestrictedReporter(new R4(r,this.namespace,n,t2t)),i.setFTReporter(new R4(r,this.namespace,n,r2t,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Tu);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Tu).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=lLe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var On=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Yr)}get authPersistence(){return this.ctx.get(A_)}getConfiguredUrls(){return this.ctx.get(zd).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof wm)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=n2t(this.env)??this.#e;if(r!==null){if(r){let n={...r,...iI(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&My(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Tm(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":Qy},body:JSON.stringify({restricted_telemetry:this.ctx.get(Ad).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return rp.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function n2t(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(n2t,"getSessionFromEnv");f();var Eo=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},cj=class extends Eo{static{s(this,"NoOpStatusReporter")}didChange(){}};var Yr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},wm=class extends Ws{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},lj=class extends Yr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new wm({reason:"NotSignedIn"});if(!r.accessToken)throw new wm({reason:"HTTP401"});let n=await oj(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new wm(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(uLe(this.ctx))throw r;rp.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(Eo).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(Eo);if(n instanceof wm)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Bt(this.ctx,"auth.reset_token_"+r),rp.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):rp.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},k4=class extends lj{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(On).getSession()}};f();var Uy=class{static{s(this,"Clock")}now(){return new Date}};f();var Mg=class{static{s(this,"ExpConfigMaker")}},YM=class extends Mg{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(yn),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return fm.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return fm.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return La(r,m,"fetchExperiments"),fm.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new fm(d.Parameters,u.AssignmentContext,p.join(";"))}},uj=class extends Mg{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(fm.createEmptyConfig())}};f();f();var dj=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},wfe=class extends dj{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},dLe=s(t=>new wfe(t),"DEFAULT_GRANULARITY"),fj=class extends dj{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var fLe="X-Copilot-ClientTimeBucket",pj=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=dLe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new fj(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(fLe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(fLe,o))}}};f();f();f();f();f();f();f();var mj="4.10.2",KM="04b07795-8ddb-461a-bbee-02f9e1bf7b46",pLe="common",hv;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(hv||(hv={}));var JM=hv.AzurePublicCloud,mLe="login.microsoftonline.com",hLe=["*"],gLe="cae",ALe="nocae",yLe="msal.cache";var Sfe;var CLe;function i2t(t){var e,r,n,i,o,a,c;let l={cache:{},broker:{isEnabled:(r=(e=t.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!1,enableMsaPassthrough:(i=(n=t.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(o=t.brokerOptions)===null||o===void 0?void 0:o.parentWindowHandle}};if(!((a=t.tokenCachePersistenceOptions)===null||a===void 0)&&a.enabled){if(Sfe===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let u=t.tokenCachePersistenceOptions.name||yLe;l.cache.cachePlugin=Sfe(Object.assign({name:`${u}.${ALe}`},t.tokenCachePersistenceOptions)),l.cache.cachePluginCae=Sfe(Object.assign({name:`${u}.${gLe}`},t.tokenCachePersistenceOptions))}if(!((c=t.brokerOptions)===null||c===void 0)&&c.enabled){if(CLe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));l.broker.nativeBrokerPlugin=CLe.broker}return l}s(i2t,"generatePluginConfiguration");var vLe={generatePluginConfiguration:i2t};f();f();f();f();f();var ELe=require("node:os"),xLe=Fe(require("node:util"),1),bLe=Fe(require("node:process"),1);function ILe(t,...e){bLe.stderr.write(`${xLe.default.format(t,...e)}${ELe.EOL}`)}s(ILe,"log");var TLe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,wLe,_fe=[],Rfe=[],hj=[];TLe&&kfe(TLe);var SLe=Object.assign(t=>_Le(t),{enable:kfe,enabled:Pfe,disable:o2t,log:ILe});function kfe(t){wLe=t,_fe=[],Rfe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Rfe.push(new RegExp(`^${n.substr(1)}$`)):_fe.push(new RegExp(`^${n}$`));for(let n of hj)n.enabled=Pfe(n.namespace)}s(kfe,"enable");function Pfe(t){if(t.endsWith("*"))return!0;for(let e of Rfe)if(e.test(t))return!1;for(let e of _fe)if(e.test(t))return!0;return!1}s(Pfe,"enabled");function o2t(){let t=wLe||"";return kfe(""),t}s(o2t,"disable");function _Le(t){let e=Object.assign(r,{enabled:Pfe(t),destroy:s2t,log:SLe.log,namespace:t,extend:a2t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),hj.push(e),e}s(_Le,"createDebugger");function s2t(){let t=hj.indexOf(this);return t>=0?(hj.splice(t,1),!0):!1}s(s2t,"destroy");function a2t(t){let e=_Le(`${this.namespace}:${t}`);return e.log=this.log,e}s(a2t,"extend");var P4=SLe;var kLe=new Set,gj=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,yj,Dfe=P4("azure");Dfe.log=(...t)=>{P4.log(...t)};var Bfe=["verbose","info","warning","error"];gj&&(BLe(gj)?c2t(gj):console.error(`AZURE_LOG_LEVEL set to unknown log level '${gj}'; logging is not enabled. Acceptable values: ${Bfe.join(", ")}.`));function c2t(t){if(t&&!BLe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Bfe.join(",")}`);yj=t;let e=[];for(let r of kLe)DLe(r)&&e.push(r.namespace);P4.enable(e.join(","))}s(c2t,"setLogLevel");function Cj(){return yj}s(Cj,"getLogLevel");var RLe={verbose:400,info:300,warning:200,error:100};function oI(t){let e=Dfe.extend(t);return PLe(Dfe,e),{error:Aj(e,"error"),warning:Aj(e,"warning"),info:Aj(e,"info"),verbose:Aj(e,"verbose")}}s(oI,"createClientLogger");function PLe(t,e){e.log=(...r)=>{t.log(...r)}}s(PLe,"patchLogMethod");function Aj(t,e){let r=Object.assign(t.extend(e),{level:e});if(PLe(t,r),DLe(r)){let n=P4.disable();P4.enable(n+","+r.namespace)}return kLe.add(r),r}s(Aj,"createLogger");function DLe(t){return!!(yj&&RLe[t.level]<=RLe[yj])}s(DLe,"shouldEnable");function BLe(t){return Bfe.includes(t)}s(BLe,"isAzureLogLevel");var op=oI("identity");function vj(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(vj,"processEnvVars");function Cl(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Cl,"formatSuccess");function Qo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(Qo,"formatError");function NLe(t,e,r=op){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(NLe,"credentialLoggerInstance");function ci(t,e=op){let r=NLe(t,void 0,e);return Object.assign(Object.assign({},r),{parent:e,getToken:NLe("=> getToken()",r,e)})}s(ci,"credentialLogger");f();f();f();function l2t(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(l2t,"isErrorResponse");var MLe="CredentialUnavailableError",nn=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=MLe}},Ej="AuthenticationError",sI=class extends Error{static{s(this,"AuthenticationError")}constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(l2t(r))i=LLe(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=LLe(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=Ej}},FLe="AggregateAuthenticationError",XM=class extends Error{static{s(this,"AggregateAuthenticationError")}constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=FLe}};function LLe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(LLe,"convertOAuthErrorResponseToErrorResponse");var Fg=class extends Error{static{s(this,"AuthenticationRequiredError")}constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function u2t(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(u2t,"createConfigurationErrorMessage");function Wc(t,e,r=[],n){var i;let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=(i=e?.tenantId)!==null&&i!==void 0?i:t,t&&o!==t&&!r.includes("*")&&!r.some(a=>a.localeCompare(o)===0)){let a=u2t(o);throw n?.info(a),new nn(a)}return o}s(Wc,"processMultiTenantRequest");function Su(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(Qo("",r)),r}}s(Su,"checkTenantId");function xj(t,e,r){return e?(Su(t,e),e):(r||(r=KM),r!==KM?"common":"organizations")}s(xj,"resolveTenantId");function vl(t){return!t||t.length===0?[]:t.includes("*")?hLe:t}s(vl,"resolveAdditionallyAllowedTenantIds");f();f();f();f();f();f();function f2t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(f2t,"isPrimitiveBody");function p2t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(p2t,"handleNullableResponseAndWrappableBody");function Nfe(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(d=>l[d].serializedName==="");if(c==="Sequence"||u){let d=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(d[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))d[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:d}return p2t({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:f2t(t.parsedBody,c)})}s(Nfe,"flattenResponse");var qy={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};f();f();f();f();f();var Hy=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};f();f();f();var OLe=require("node:os"),QLe=Fe(require("node:util"),1),ULe=Fe(require("node:process"),1);function qLe(t,...e){ULe.stderr.write(`${QLe.default.format(t,...e)}${OLe.EOL}`)}s(qLe,"log");var HLe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,WLe,Lfe=[],Mfe=[],Ij=[];HLe&&Ffe(HLe);var $Le=Object.assign(t=>jLe(t),{enable:Ffe,enabled:Ofe,disable:m2t,log:qLe});function Ffe(t){WLe=t,Lfe=[],Mfe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Mfe.push(new RegExp(`^${n.substr(1)}$`)):Lfe.push(new RegExp(`^${n}$`));for(let n of Ij)n.enabled=Ofe(n.namespace)}s(Ffe,"enable");function Ofe(t){if(t.endsWith("*"))return!0;for(let e of Mfe)if(e.test(t))return!1;for(let e of Lfe)if(e.test(t))return!0;return!1}s(Ofe,"enabled");function m2t(){let t=WLe||"";return Ffe(""),t}s(m2t,"disable");function jLe(t){let e=Object.assign(r,{enabled:Ofe(t),destroy:h2t,log:$Le.log,namespace:t,extend:g2t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),Ij.push(e),e}s(jLe,"createDebugger");function h2t(){let t=Ij.indexOf(this);return t>=0?(Ij.splice(t,1),!0):!1}s(h2t,"destroy");function g2t(t){let e=jLe(`${this.namespace}:${t}`);return e.log=this.log,e}s(g2t,"extend");var D4=$Le;var Qfe=["verbose","info","warning","error"],GLe={verbose:400,info:300,warning:200,error:100};function VLe(t,e){e.log=(...r)=>{t.log(...r)}}s(VLe,"patchLogMethod");function zLe(t){return Qfe.includes(t)}s(zLe,"isTypeSpecRuntimeLogLevel");function A2t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=D4(t.namespace);i.log=(...d)=>{D4.log(...d)};function o(d){if(d&&!zLe(d))throw new Error(`Unknown log level '${d}'. Acceptable values: ${Qfe.join(",")}`);n=d;let p=[];for(let m of e)a(m)&&p.push(m.namespace);D4.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(zLe(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${Qfe.join(", ")}.`));function a(d){return!!(n&&GLe[d.level]<=GLe[n])}s(a,"shouldEnable");function c(d,p){let m=Object.assign(d.extend(p),{level:p});if(VLe(d,m),a(m)){let h=D4.disable();D4.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(d){let p=i.extend(d);return VLe(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(A2t,"createLoggerContext");var YLe=A2t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),y2t=YLe.logger;function e9(t){return YLe.createClientLogger(t)}s(e9,"createClientLogger");f();function Tj(t){return t.toLowerCase()}s(Tj,"normalizeName");function*C2t(t){for(let e of t.values())yield[e.name,e.value]}s(C2t,"headerIterator");var Ufe=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(Tj(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(Tj(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(Tj(e))}delete(e){this._headersMap.delete(Tj(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return C2t(this._headersMap)}};function sp(t){return new Ufe(t)}s(sp,"createHttpHeaders");f();f();f();f();var KLe=require("node:crypto");var qfe,v2t=typeof((qfe=globalThis?.crypto)===null||qfe===void 0?void 0:qfe.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):KLe.randomUUID;function B4(){return v2t()}s(B4,"randomUUID");var Hfe=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:sp(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||B4(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function wj(t){return new Hfe(t)}s(wj,"createPipelineRequest");f();var JLe=new Set(["Deserialize","Serialize","Retry","Sign"]),Wfe=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!JLe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!JLe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function d(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(d,"getPhase");for(let g of this._policies){let A=g.policy,y=g.options,E=A.name;if(r.has(E))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:A,dependsOn:new Set,dependants:new Set};y.afterPhase&&(b.afterPhase=d(y.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(E,b),d(y.phase).policies.add(b)}for(let g of this._policies){let{policy:A,options:y}=g,E=A.name,b=r.get(E);if(!b)throw new Error(`Missing node for policy ${E}`);if(y.afterPolicies)for(let w of y.afterPolicies){let R=r.get(w);R&&(b.dependsOn.add(R),R.dependants.add(b))}if(y.beforePolicies)for(let w of y.beforePolicies){let R=r.get(w);R&&(R.dependsOn.add(b),b.dependants.add(R))}}function p(g){g.hasRun=!0;for(let A of g.policies)if(!(A.afterPhase&&(!A.afterPhase.hasRun||A.afterPhase.policies.size))&&A.dependsOn.size===0){e.push(A.policy);for(let y of A.dependants)y.dependsOn.delete(A);r.delete(A.policy.name),g.policies.delete(A)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function Sj(){return Wfe.create()}s(Sj,"createEmptyPipeline");f();f();f();function N4(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(N4,"isObject");function y_(t){if(N4(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(y_,"isError");f();var XLe=require("node:util"),ZLe=XLe.inspect.custom;f();var $fe="REDACTED",E2t=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],x2t=["api-version"],Og=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=E2t.concat(e),r=x2t.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||N4(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,$fe);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=$fe;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=$fe;return r}};var b2t=new Og,_u=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,ZLe,{value:s(()=>`RestError: ${this.message} 
 ${b2t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};_u.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";_u.PARSE_ERROR="PARSE_ERROR";function _j(t){return t instanceof _u?!0:y_(t)&&t.name==="RestError"}s(_j,"isRestError");f();function jf(t,e){return Buffer.from(t,e)}s(jf,"stringToUint8Array");f();f();var L4=Fe(require("node:http"),1),M4=Fe(require("node:https"),1),kj=Fe(require("node:zlib"),1),tMe=require("node:stream");f();var Sm=e9("ts-http-runtime");var I2t={};function t9(t){return t&&typeof t.pipe=="function"}s(t9,"isReadableStream");function eMe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(eMe,"isStreamComplete");function rMe(t){return t&&typeof t.byteLength=="number"}s(rMe,"isArrayBuffer");var Rj=class extends tMe.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},jfe=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new Hy("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new Og;Sm.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),d=typeof e.body=="function"?e.body():e.body;if(d&&!e.headers.has("Content-Length")){let m=_2t(d);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(d&&e.onUploadProgress){let E=e.onUploadProgress,b=new Rj(E);b.on("error",w=>{Sm.error("Error in upload progress",w)}),t9(d)?d.pipe(b):b.end(d),d=b}let m=await this.makeRequest(e,o,d);c!==void 0&&clearTimeout(c);let h=T2t(m),A={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),A;p=u?w2t(m,h):m;let y=e.onDownloadProgress;if(y){let E=new Rj(y);E.on("error",b=>{Sm.error("Error in download progress",b)}),p.pipe(E),p=E}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(A.status)?A.readableStreamBody=p:A.bodyAsText=await S2t(p),A}finally{if(e.abortSignal&&a){let m=Promise.resolve();t9(d)&&(m=eMe(d));let h=Promise.resolve();t9(p)&&(h=eMe(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{Sm.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,d)=>{let p=a?L4.request(l,u):M4.request(l,u);p.once("error",m=>{var h;d(new _u(m.message,{code:(h=m.code)!==null&&h!==void 0?h:_u.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new Hy("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),d(m)}),n&&t9(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):rMe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Sm.error("Unrecognized body type",n),d(new _u("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?L4.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new L4.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return M4.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:I2t,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(Sm.info("No cached TLS Agent exist, creating a new Agent"),a=new M4.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function T2t(t){let e=sp();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(T2t,"getResponseHeaders");function w2t(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=kj.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=kj.createInflate();return t.pipe(n),n}return t}s(w2t,"getDecodedResponseStream");function S2t(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new _u(`Error reading response as text: ${i.message}`,{code:_u.PARSE_ERROR}))})})}s(S2t,"streamToText");function _2t(t){return t?Buffer.isBuffer(t)?t.length:t9(t)?null:rMe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(_2t,"getBodyLength");function nMe(){return new jfe}s(nMe,"createNodeHttpClient");function Pj(){return nMe()}s(Pj,"createDefaultHttpClient");f();f();f();f();var Gfe="logPolicy";function Dj(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:Sm.info,n=new Og({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Gfe,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(Dj,"logPolicy");f();var Vfe="redirectPolicy",iMe=["GET","HEAD"];function Bj(t={}){let{maxRetries:e=20}=t;return{name:Vfe,async sendRequest(r,n){let i=await n(r);return oMe(n,i,e)}}}s(Bj,"redirectPolicy");async function oMe(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&iMe.includes(i.method)||o===302&&iMe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return oMe(t,u,r,n+1)}return e}s(oMe,"handleRedirect");f();f();f();function sMe(){return"User-Agent"}s(sMe,"getHeaderName");f();function aMe(){return sMe()}s(aMe,"getUserAgentHeaderName");var kGr=aMe();f();var zfe="decompressResponsePolicy";function Nj(){return{name:zfe,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(Nj,"decompressResponsePolicy");f();f();f();f();function r9(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(r9,"getRandomIntegerInclusive");function n9(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+r9(0,n/2)}}s(n9,"calculateRetryDelay");f();f();var R2t="The operation was aborted.";function cMe(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new Hy(r?.abortErrorMsg?r?.abortErrorMsg:R2t)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(cMe,"delay");function lMe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(lMe,"parseHeaderValueAsNumber");var Yfe="Retry-After",k2t=["retry-after-ms","x-ms-retry-after-ms",Yfe];function uMe(t){if(t&&[429,503].includes(t.status))try{for(let i of k2t){let o=lMe(t,i);if(o===0||o)return o*(i===Yfe?1e3:1)}let e=t.headers.get(Yfe);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(uMe,"getRetryAfterInMs");function dMe(t){return Number.isFinite(uMe(t))}s(dMe,"isThrottlingRetryResponse");function Kfe(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=uMe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Kfe,"throttlingRetryStrategy");var P2t=1e3,D2t=1e3*64;function Lj(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:P2t,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:D2t;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=N2t(c),u=l&&t.ignoreSystemErrors,d=B2t(a),p=d&&t.ignoreHttpStatusCodes;return a&&(dMe(a)||!d)||p||u?{skipStrategy:!0}:c&&!l&&!d?{errorToThrow:c}:n9(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(Lj,"exponentialRetryStrategy");function B2t(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(B2t,"isExponentialRetryResponse");function N2t(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(N2t,"isSystemError");f();var L2t=e9("ts-http-runtime retryPolicy"),M2t="retryPolicy";function aI(t,e={maxRetries:3}){let r=e.logger||L2t;return{name:M2t,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(d){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=d,!d||l.name!=="RestError")throw d;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new Hy;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let d of t){let p=d.logger||r;p.info(`Retry ${u}: Processing retry strategy ${d.name}.`);let m=d.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:A}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${d.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${d.name} retries after ${g}`),await cMe(g,void 0,{abortSignal:n.abortSignal});continue e}if(A){p.info(`Retry ${u}: Retry strategy ${d.name} redirects to ${A}`),n.url=A;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(aI,"retryPolicy");var Jfe="defaultRetryPolicy";function Mj(t={}){var e;return{name:Jfe,sendRequest:aI([Kfe(),Lj(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(Mj,"defaultRetryPolicy");f();f();var Xfe,Zfe,e0e,t0e,fMe=typeof window<"u"&&typeof window.document<"u",pMe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Xfe=self.constructor)===null||Xfe===void 0?void 0:Xfe.name)==="DedicatedWorkerGlobalScope"||((Zfe=self.constructor)===null||Zfe===void 0?void 0:Zfe.name)==="ServiceWorkerGlobalScope"||((e0e=self.constructor)===null||e0e===void 0?void 0:e0e.name)==="SharedWorkerGlobalScope"),mMe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",hMe=typeof Bun<"u"&&typeof Bun.version<"u",cI=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((t0e=globalThis.process.versions)===null||t0e===void 0)&&t0e.node);var gMe=typeof navigator<"u"&&navigator?.product==="ReactNative";var r0e="formDataPolicy";function F2t(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(F2t,"formDataToFormDataMap");function Fj(){return{name:r0e,async sendRequest(t,e){if(cI&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=F2t(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=O2t(t.formData):await Q2t(t.formData,t),t.formData=void 0}return e(t)}}}s(Fj,"formDataPolicy");function O2t(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(O2t,"wwwFormUrlEncode");async function Q2t(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:sp({"Content-Disposition":`form-data; name="${i}"`}),body:jf(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=sp();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(Q2t,"prepareFormData");f();var jMe=Fe(OMe(),1),GMe=Fe(qMe(),1);var ORt="HTTPS_PROXY",QRt="HTTP_PROXY",URt="ALL_PROXY",qRt="NO_PROXY",d0e="proxyPolicy",HMe=[],VMe=!1,HRt=new Map;function jj(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(jj,"getEnvironmentValue");function WRt(){if(!process)return;let t=jj(ORt),e=jj(URt),r=jj(QRt);return t||e||r}s(WRt,"loadEnvironmentProxyValue");function $Rt(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s($Rt,"isBypassed");function jRt(){let t=jj(qRt);return VMe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(jRt,"loadNoProxy");function GRt(){let t=WRt();return t?new URL(t):void 0}s(GRt,"getDefaultProxySettingsInternal");function WMe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(WMe,"getUrlFromProxySettings");function $Me(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&Sm.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new GMe.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new jMe.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s($Me,"setProxyAgentOnRequest");function Gj(t,e){VMe||HMe.push(...jRt());let r=t?WMe(t):GRt(),n={};return{name:d0e,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!$Rt(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:HMe,e?.customNoProxyList?void 0:HRt)?$Me(i,n,r):i.proxySettings&&$Me(i,n,WMe(i.proxySettings)),o(i)}}}s(Gj,"proxyPolicy");f();var f0e="agentPolicy";function Vj(t){return{name:f0e,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(Vj,"agentPolicy");f();var p0e="tlsPolicy";function zj(t){return{name:p0e,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(zj,"tlsPolicy");f();f();function Yj(t){return typeof t.stream=="function"}s(Yj,"isBlob");f();f();function zMe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(zMe,"__values");function jy(t){return this instanceof jy?(this.v=t,this):new jy(t)}s(jy,"__await");function m0e(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(A){return new Promise(function(y,E){o.push([h,A,y,E])>1||l(h,A)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(A){m(o[0][3],A)}}function u(h){h.value instanceof jy?Promise.resolve(h.value.v).then(d,p):m(o[0][2],h)}function d(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(m0e,"__asyncGenerator");function YMe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof zMe=="function"?zMe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(YMe,"__asyncValues");var Kj=require("stream");function KMe(){return m0e(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield jy(e.read());if(r)return yield jy(void 0);yield yield jy(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(KMe,"streamAsyncIterator");function VRt(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=KMe.bind(t)),t.values||(t.values=KMe.bind(t))}s(VRt,"makeAsyncIterable");function JMe(t){return t instanceof ReadableStream?(VRt(t),Kj.Readable.fromWeb(t)):t}s(JMe,"ensureNodeStream");function zRt(t){return t instanceof Uint8Array?Kj.Readable.from(Buffer.from(t)):Yj(t)?JMe(t.stream()):JMe(t)}s(zRt,"toStream");async function XMe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(zRt);return Kj.Readable.from(function(){return m0e(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,YMe(u)),l;l=yield jy(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield jy(o)}catch(d){n={error:d}}finally{try{!a&&!r&&(i=c.return)&&(yield jy(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(XMe,"concat");function YRt(){return`----AzSDKFormBoundary${B4()}`}s(YRt,"generateBoundary");function KRt(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(KRt,"encodeHeaders");function JRt(t){return t instanceof Uint8Array?t.byteLength:Yj(t)?t.size===-1?void 0:t.size:void 0}s(JRt,"getLength");function XRt(t){let e=0;for(let r of t){let n=JRt(r);if(n===void 0)return;e+=n}return e}s(XRt,"getTotalLength");async function ZRt(t,e,r){let n=[jf(`--${r}`,"utf-8"),...e.flatMap(o=>[jf(`\r
`,"utf-8"),jf(KRt(o.headers),"utf-8"),jf(`\r
`,"utf-8"),o.body,jf(`\r
--${r}`,"utf-8")]),jf(`--\r
\r
`,"utf-8")],i=XRt(n);i&&t.headers.set("Content-Length",i),t.body=await XMe(n)}s(ZRt,"buildRequestBody");var o9="multipartPolicy",ekt=70,tkt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function rkt(t){if(t.length>ekt)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!tkt.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(rkt,"assertValidBoundary");function Jj(){return{name:o9,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?rkt(n):n=YRt(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await ZRt(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(Jj,"multipartPolicy");f();f();f();f();f();f();f();f();f();f();f();f();function Xj(){return Sj()}s(Xj,"createEmptyPipeline");f();f();f();var Gy=oI("core-rest-pipeline");f();f();f();f();function A0e(t={}){return Dj(Object.assign({logger:Gy.info},t))}s(A0e,"logPolicy");f();function y0e(t={}){return Bj(t)}s(y0e,"redirectPolicy");f();f();f();var H4=Fe(require("node:os"),1),Zj=Fe(require("node:process"),1);function ZMe(){return"User-Agent"}s(ZMe,"getHeaderName");async function e9e(t){if(Zj&&Zj.versions){let e=Zj.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${H4.arch()}-${H4.type()}-${H4.release()})`)}s(e9e,"setPlatformSpecificData");f();var eG="1.22.0";function dkt(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(dkt,"getUserAgentString");function t9e(){return ZMe()}s(t9e,"getUserAgentHeaderName");async function tG(t){let e=new Map;e.set("core-rest-pipeline",eG),await e9e(e);let r=dkt(e);return t?`${t} ${r}`:r}s(tG,"getUserAgentValue");var r9e=t9e(),n9e="userAgentPolicy";function C0e(t={}){let e=tG(t.userAgentPrefix);return{name:n9e,async sendRequest(r,n){return r.headers.has(r9e)||r.headers.set(r9e,await e),n(r)}}}s(C0e,"userAgentPolicy");f();f();f();f();f();f();f();f();f();var E_=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function v0e(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new E_(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(d=>{l(),o(d)},d=>{l(),a(d)})}catch(d){a(d)}n?.addEventListener("abort",u)})}s(v0e,"createAbortablePromise");f();var gkt="The delay was aborted.";function E0e(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return v0e(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??gkt})}s(E0e,"delay");f();function W4(t){if(y_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(W4,"getErrorMessage");f();function i9e(t,e){return n9(t,e)}s(i9e,"calculateRetryDelay");function rG(t){return y_(t)}s(rG,"isError");var nG=cI,$4=cI;var o9e=Symbol("rawContent");function x0e(t){return typeof t[o9e]=="function"}s(x0e,"hasRawContent");function s9e(t){return x0e(t)?t[o9e]():t}s(s9e,"getRawContent");var iG=o9;function b0e(){let t=Jj();return{name:iG,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)x0e(n.body)&&(n.body=s9e(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(b0e,"multipartPolicy");f();function I0e(){return Nj()}s(I0e,"decompressResponsePolicy");f();function T0e(t={}){return Mj(t)}s(T0e,"defaultRetryPolicy");f();function w0e(){return Fj()}s(w0e,"formDataPolicy");f();function S0e(t,e){return Gj(t,e)}s(S0e,"proxyPolicy");f();var a9e="setClientRequestIdPolicy";function _0e(t="x-ms-client-request-id"){return{name:a9e,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(_0e,"setClientRequestIdPolicy");f();function R0e(t){return Vj(t)}s(R0e,"agentPolicy");f();function k0e(t){return zj(t)}s(k0e,"tlsPolicy");f();f();f();f();var j4={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function c9e(t={}){let e=new P0e(t.parentContext);return t.span&&(e=e.setValue(j4.span,t.span)),t.namespace&&(e=e.setValue(j4.namespace,t.namespace)),e}s(c9e,"createTracingContext");var P0e=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};f();var u9e=Fe(l9e(),1),sG=u9e.state;function Akt(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(Akt,"createDefaultTracingSpan");function ykt(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:Akt(),tracingContext:c9e({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(ykt,"createDefaultInstrumenter");function s9(){return sG.instrumenterImplementation||(sG.instrumenterImplementation=ykt()),sG.instrumenterImplementation}s(s9,"getInstrumenter");f();function a9(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,d,p){var m;let h=s9().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=d?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,A=h.span;g.getValue(j4.namespace)||(g=g.setValue(j4.namespace,e)),A.setAttribute("az.namespace",g.getValue(j4.namespace));let y=Object.assign({},d,{tracingOptions:Object.assign(Object.assign({},d?.tracingOptions),{tracingContext:g})});return{span:A,updatedOptions:y}}s(i,"startSpan");async function o(u,d,p,m){let{span:h,updatedOptions:g}=i(u,d,m);try{let A=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),A}catch(A){throw h.setStatus({status:"error",error:A}),A}finally{h.end()}}s(o,"withSpan");function a(u,d,...p){return s9().withContext(u,d,...p)}s(a,"withContext");function c(u){return s9().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return s9().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(a9,"createTracingClient");f();var G4=_u;function c9(t){return _j(t)}s(c9,"isRestError");var d9e="tracingPolicy";function D0e(t={}){let e=tG(t.userAgentPrefix),r=new Og({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=Ckt();return{name:d9e,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:d}=(a=vkt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!d)return o(i);try{let p=await n.withContext(d,o,i);return xkt(u,p),p}catch(p){throw Ekt(u,p),p}}}}s(D0e,"tracingPolicy");function Ckt(){try{return a9({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:eG})}catch(t){Gy.warning(`Error when creating the TracingClient: ${W4(t)}`);return}}s(Ckt,"tryCreateTracingClient");function vkt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){Gy.warning(`Skipping creating a tracing span due to an error: ${W4(n)}`);return}}s(vkt,"tryCreateSpan");function Ekt(t,e){try{t.setStatus({status:"error",error:rG(e)?e:void 0}),c9(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){Gy.warning(`Skipping tracing span processing due to an error: ${W4(r)}`)}}s(Ekt,"tryProcessError");function xkt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){Gy.warning(`Skipping tracing span processing due to an error: ${W4(r)}`)}}s(xkt,"tryProcessResponse");f();f();function aG(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(aG,"wrapAbortSignalLike");var bkt="wrapAbortSignalLikePolicy";function f9e(){return{name:bkt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=aG(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(f9e,"wrapAbortSignalLikePolicy");function B0e(t){var e;let r=Xj();return $4&&(t.agent&&r.addPolicy(R0e(t.agent)),t.tlsOptions&&r.addPolicy(k0e(t.tlsOptions)),r.addPolicy(S0e(t.proxyOptions)),r.addPolicy(I0e())),r.addPolicy(f9e()),r.addPolicy(w0e(),{beforePolicies:[iG]}),r.addPolicy(C0e(t.userAgentOptions)),r.addPolicy(_0e((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(b0e(),{afterPhase:"Deserialize"}),r.addPolicy(T0e(t.retryOptions),{phase:"Retry"}),r.addPolicy(D0e(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),$4&&r.addPolicy(y0e(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(A0e(t.loggingOptions),{afterPhase:"Sign"}),r}s(B0e,"createPipelineFromOptions");f();function N0e(){let t=Pj();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?aG(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(N0e,"createDefaultHttpClient");f();function uI(t){return sp(t)}s(uI,"createHttpHeaders");f();function Qg(t){return wj(t)}s(Qg,"createPipelineRequest");f();f();f();f();var Tkt=oI("core-rest-pipeline retryPolicy");function L0e(t,e={maxRetries:3}){return aI(t,Object.assign({logger:Tkt},e))}s(L0e,"retryPolicy");f();f();var wkt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Skt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await E0e(e),i=await n();return i}s(Skt,"beginRefresh");function M0e(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},wkt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var d;return a.isRefreshing||(r=Skt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(d=n?.expiresOnTimestamp)!==null&&d!==void 0?d:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let d=!!u.claims,p=i!==u.tenantId;return d&&(n=null),p||d||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(M0e,"createTokenCycler");var g9e="bearerTokenAuthenticationPolicy";async function cG(t,e){try{return[await e(t),void 0]}catch(r){if(c9(r)&&r.response)return[r.response,r];throw r}}s(cG,"trySendRequest");async function _kt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(_kt,"defaultAuthorizeRequest");function p9e(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(p9e,"isChallengeResponse");async function m9e(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(m9e,"authorizeRequestOnCaeChallenge");function lG(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||Gy,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:_kt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?M0e(i):()=>Promise.resolve(null);return{name:g9e,async sendRequest(d,p){if(!d.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:d,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await cG(d,p),p9e(m)){let A=h9e(m.headers.get("WWW-Authenticate"));if(A){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await m9e({scopes:Array.isArray(o)?o:[o],response:m,request:d,getAccessToken:u,logger:c},y),g&&([m,h]=await cG(d,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:d,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await cG(d,p)),p9e(m)&&(A=h9e(m.headers.get("WWW-Authenticate")),A))){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await m9e({scopes:Array.isArray(o)?o:[o],response:m,request:d,getAccessToken:u,logger:c},y),g&&([m,h]=await cG(d,p))}}if(h)throw h;return m}}}s(lG,"bearerTokenAuthenticationPolicy");function Rkt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(Rkt,"parseChallenges");function h9e(t){var e;return t?(e=Rkt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(h9e,"getCaeChallengeClaims");f();f();f();f();f();f();var y9e=Fe(A9e(),1),F0e=y9e.state;function dI(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=C9e(t,n);!a.propertyFound&&r&&(a=C9e(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=dI(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(dI,"getOperationArgumentValueFromParameter");function C9e(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(C9e,"getPropertyFromParameterPath");var v9e=Symbol.for("@azure/core-client original request");function kkt(t){return v9e in t}s(kkt,"hasOriginalRequest");function gv(t){if(kkt(t))return gv(t[v9e]);let e=F0e.operationRequestMap.get(t);return e||(e={},F0e.operationRequestMap.set(t,e)),e}s(gv,"getOperationRequestInfo");var Pkt=["application/json","text/json"],Dkt=["application/xml","application/atom+xml"],E9e="deserializationPolicy";function O0e(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:Pkt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:Dkt,d=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}};return{name:E9e,async sendRequest(h,g){let A=await g(h);return Lkt(l,u,A,m,d)}}}s(O0e,"deserializationPolicy");function Bkt(t){let e,r=t.request,n=gv(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(Bkt,"getOperationResponseMap");function Nkt(t){let e=t.request,r=gv(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(Nkt,"shouldDeserializeResponse");async function Lkt(t,e,r,n,i){let o=await Okt(t,e,r,n,i);if(!Nkt(o))return o;let a=gv(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=Bkt(o),{error:u,shouldReturnResponse:d}=Fkt(o,c,l,n);if(u)throw u;if(d)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===qy.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new G4(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(Lkt,"deserializeResponseBody");function Mkt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(Mkt,"isOperationSpecEmpty");function Fkt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(Mkt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new G4(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let d=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(d){let A=m;if(e.isXML&&d.type.name===qy.Sequence){A=[];let y=d.xmlElementName;typeof m=="object"&&y&&(A=m[y])}h=e.serializer.deserialize(d,A,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),d&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(Fkt,"handleErrorResponse");async function Okt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let d=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||G4.PARSE_ERROR;throw new G4(d,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(Okt,"parse");f();f();function x9e(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===qy.Stream&&e.add(Number(r))}return e}s(x9e,"getStreamingResponseStatusCodes");function Vy(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(Vy,"getPathStringFromParameter");var b9e="serializationPolicy";function Q0e(t={}){let e=t.stringifyXML;return{name:b9e,async sendRequest(r,n){let i=gv(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(Qkt(r,a,o),Ukt(r,a,o,e)),n(r)}}}s(Q0e,"serializationPolicy");function Qkt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=dI(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,Vy(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||Vy(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(Qkt,"serializeHeaders");function Ukt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,d={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}},p=d.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=dI(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:A,xmlElementName:y,xmlNamespace:E,xmlNamespacePrefix:b,nullable:w}=m,R=m.type.name;try{if(t.body!==void 0&&t.body!==null||w&&t.body===null||h){let D=Vy(r.requestBody);t.body=r.serializer.serialize(m,t.body,D,d);let N=R===qy.Stream;if(r.isXML){let O=b?`xmlns:${b}`:"xmlns",Y=qkt(E,O,R,t.body,d);R===qy.Sequence?t.body=n(Hkt(Y,y||A||g,O,E),{rootName:A||g,xmlCharKey:p}):N||(t.body=n(Y,{rootName:A||g,xmlCharKey:p}))}else{if(R===qy.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;N||(t.body=JSON.stringify(t.body))}}}catch(D){throw new Error(`Error "${D.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=dI(e,m);if(h!=null){let g=m.mapper.serializedName||Vy(m);t.formData[g]=r.serializer.serialize(m.mapper,h,Vy(m),d)}}}}s(Ukt,"serializeRequestBody");function qkt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o["$"]={[e]:t},o}return n}s(qkt,"getXmlValueWithNamespace");function Hkt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i["$"]={[r]:n},i}s(Hkt,"prepareXMLRootList");function U0e(t={}){let e=B0e(t??{});return t.credentialOptions&&e.addPolicy(lG({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(Q0e(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(O0e(t.deserializationOptions),{phase:"Deserialize"}),e}s(U0e,"createClientPipeline");f();var q0e;function I9e(){return q0e||(q0e=N0e()),q0e}s(I9e,"getCachedDefaultHttpClient");f();var Wkt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function w9e(t,e,r,n){let i=$kt(e,r,n),o=!1,a=T9e(t,i);if(e.path){let u=T9e(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),jkt(u)?(a=u,o=!0):a=Gkt(a,u)}let{queryParams:c,sequenceParams:l}=Vkt(e,r,n);return a=Ykt(a,c,l,o),a}s(w9e,"getRequestUrl");function T9e(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(T9e,"replaceAll");function $kt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=dI(e,o,r),c=Vy(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s($kt,"calculateUrlReplacements");function jkt(t){return t.includes("://")}s(jkt,"isAbsoluteUrl");function Gkt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(Gkt,"appendPath");function Vkt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=dI(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,Vy(a));let l=a.collectionFormat?Wkt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||Vy(a),c)}}return{queryParams:i,sequenceParams:o}}s(Vkt,"calculateQueryParameters");function zkt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(zkt,"simpleParseQueryParams");function Ykt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=zkt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let d=new Set(u);o.set(c,Array.from(d))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(Ykt,"appendQueryParams");f();var H0e=oI("core-client");var l9=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&H0e.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||I9e(),this.pipeline=e.pipeline||Kkt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=w9e(n,r,e,this),o=Qg({url:i});o.method=r.httpMethod;let a=gv(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=x9e(r));try{let u=await this.sendRequest(o),d=Nfe(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,d),d}catch(u){if(typeof u=="object"&&u?.response){let d=u.response,p=Nfe(d,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(d,p,u)}throw u}}};function Kkt(t){let e=Jkt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return U0e(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(Kkt,"createDefaultPipeline");function Jkt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(Jkt,"getCredentialScopes");f();f();f();function S9e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(S9e,"getIdentityTokenEndpointSuffix");f();var ls=a9({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:mj});f();var _9e="/.default",R9e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function u9(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(_9e)?e.substr(0,e.lastIndexOf(_9e)):e}s(u9,"mapScopesToResource");function k9e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(k9e,"parseExpirationTimestamp");function P9e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(P9e,"parseRefreshTimestamp");var d9="noCorrelationId";function Xkt(t){let e=t?.authorityHost;return nG&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??JM}s(Xkt,"getIdentityClientAuthorityHost");var Av=class extends l9{static{s(this,"IdentityClient")}constructor(e){var r,n;let i=`azsdk-js-identity/${mj}`,o=!((r=e?.userAgentOptions)===null||r===void 0)&&r.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,a=Xkt(e);if(!a.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:o},baseUri:a})),this.allowInsecureConnection=!1,this.authorityHost=a,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){op.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:k9e(n),refreshAfterTimestamp:P9e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return op.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new sI(r.status,r.bodyAsText);throw op.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;op.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return ls.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let d=S9e(e),p=Qg({url:`${this.authorityHost}/${e}/${d}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:uI({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return op.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(d){if(d.name===Ej&&d.errorResponse.error==="interaction_required")return op.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw op.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${d}`),d}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||d9,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(d9)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){var r;let n=(r=e?.body)===null||r===void 0?void 0:r.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||d9}async sendGetRequestAsync(e,r){let n=Qg({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:uI(r?.headers),abortSignal:this.generateAbortSignal(d9)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=Qg({url:e,method:"POST",body:r?.body,headers:uI(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));op.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){op.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};var Rin=ci("VisualStudioCodeCredential");var kin={AzureCloud:hv.AzurePublicCloud,AzureChina:hv.AzureChina,AzureGermanCloud:hv.AzureGermany,AzureUSGovernment:hv.AzureGovernment};f();f();var mp={};ma(mp,{AuthError:()=>ri,AuthErrorCodes:()=>K4,AuthErrorMessage:()=>$0e,AzureCloudInstance:()=>bv,ClientApplication:()=>DI,ClientAssertion:()=>Pv,ClientAuthError:()=>CI,ClientAuthErrorCodes:()=>us,ClientAuthErrorMessage:()=>G0e,ClientConfigurationError:()=>rD,ClientConfigurationErrorCodes:()=>tD,ClientConfigurationErrorMessage:()=>J0e,ClientCredentialClient:()=>BI,ConfidentialClientApplication:()=>xD,CryptoProvider:()=>eC,DeviceCodeClient:()=>CD,DistributedCachePlugin:()=>OV,InteractionRequiredAuthError:()=>dp,InteractionRequiredAuthErrorCodes:()=>NG,InteractionRequiredAuthErrorMessage:()=>nme,LogLevel:()=>Ma,Logger:()=>lp,ManagedIdentityApplication:()=>bD,ManagedIdentitySourceNames:()=>Yn,OnBehalfOfClient:()=>ED,PromptValue:()=>pI,ProtocolMode:()=>yd,PublicClientApplication:()=>vD,ResponseMode:()=>zy,ServerError:()=>Xd,TokenCache:()=>uD,TokenCacheContext:()=>fp,UsernamePasswordClient:()=>yD,internals:()=>ime,version:()=>Wg});f();var ime={};ma(ime,{Deserializer:()=>Rv,Serializer:()=>fI});f();f();var fI=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};f();f();f();f();f();f();f();f();f();var tt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ti={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Vf=[tt.OPENID_SCOPE,tt.PROFILE_SCOPE,tt.OFFLINE_ACCESS_SCOPE],W0e=[...Vf,tt.EMAIL_SCOPE],Ps={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var zf={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},x_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},pI={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},dG={PLAIN:"plain",S256:"S256"},V4={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var zy={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Yf={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},b_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},za={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},xo={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var f9="appmetadata",D9e="client_info",yv="1",z4={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Yd={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},El={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},no={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Yy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},p9={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},m9={username:"username",password:"password"},I_={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},fG={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Es={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var Y4=300,ku={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var K4={};ma(K4,{postRequestFailed:()=>g9,unexpectedError:()=>h9});f();var h9="unexpected_error",g9="post_request_failed";var pG={[h9]:"Unexpected error in authentication.",[g9]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},$0e={unexpectedError:{code:h9,desc:pG[h9]},postRequestFailed:{code:g9,desc:pG[g9]}},ri=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||tt.EMPTY_STRING,this.errorMessage=r||tt.EMPTY_STRING,this.subError=n||tt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function j0e(t,e){return new ri(t,e?`${pG[t]} ${e}`:pG[t])}s(j0e,"createAuthError");var us={};ma(us,{authTimeNotFound:()=>Cv,authorizationCodeMissingFromServerResponse:()=>Q_,bindingKeyNotRemoved:()=>S9,cannotAppendScopeSet:()=>M_,cannotRemoveEmptyScope:()=>L_,clientInfoDecodingError:()=>mI,clientInfoEmptyError:()=>T_,deviceCodeExpired:()=>v9,deviceCodePollingCancelled:()=>C9,deviceCodeUnknownError:()=>E9,emptyInputScopeSet:()=>AI,endSessionEndpointNotSupported:()=>U_,endpointResolutionError:()=>Kd,hashNotDeserialized:()=>R_,invalidAssertion:()=>I9,invalidCacheEnvironment:()=>Ev,invalidCacheRecord:()=>F_,invalidClientCredential:()=>T9,invalidState:()=>Ug,keyIdMissing:()=>q_,maxAgeTranspired:()=>D_,methodNotImplemented:()=>Si,missingTenantIdError:()=>k9,multipleMatchingAccounts:()=>y9,multipleMatchingAppMetadata:()=>B_,multipleMatchingTokens:()=>A9,nestedAppAuthBridgeDisabled:()=>P9,networkError:()=>S_,noAccountFound:()=>x9,noAccountInSilentRequest:()=>vv,noCryptoObject:()=>yI,noNetworkConnectivity:()=>_9,nonceMismatch:()=>P_,nullOrEmptyToken:()=>w_,openIdConfigError:()=>__,requestCannotBeMade:()=>N_,stateMismatch:()=>k_,stateNotFound:()=>gI,tokenClaimsCnfRequiredForSignedJwt:()=>O_,tokenParsingError:()=>hI,tokenRefreshRequired:()=>xv,unexpectedCredentialType:()=>b9,userCanceled:()=>R9,userTimeoutReached:()=>w9});f();var mI="client_info_decoding_error",T_="client_info_empty_error",hI="token_parsing_error",w_="null_or_empty_token",Kd="endpoints_resolution_error",S_="network_error",__="openid_config_error",R_="hash_not_deserialized",Ug="invalid_state",k_="state_mismatch",gI="state_not_found",P_="nonce_mismatch",Cv="auth_time_not_found",D_="max_age_transpired",A9="multiple_matching_tokens",y9="multiple_matching_accounts",B_="multiple_matching_appMetadata",N_="request_cannot_be_made",L_="cannot_remove_empty_scope",M_="cannot_append_scopeset",AI="empty_input_scopeset",C9="device_code_polling_cancelled",v9="device_code_expired",E9="device_code_unknown_error",vv="no_account_in_silent_request",F_="invalid_cache_record",Ev="invalid_cache_environment",x9="no_account_found",yI="no_crypto_object",b9="unexpected_credential_type",I9="invalid_assertion",T9="invalid_client_credential",xv="token_refresh_required",w9="user_timeout_reached",O_="token_claims_cnf_required_for_signedjwt",Q_="authorization_code_missing_from_server_response",S9="binding_key_not_removed",U_="end_session_endpoint_not_supported",q_="key_id_missing",_9="no_network_connectivity",R9="user_canceled",k9="missing_tenant_id_error",Si="method_not_implemented",P9="nested_app_auth_bridge_disabled";var ni={[mI]:"The client info could not be parsed/decoded correctly",[T_]:"The client info was empty",[hI]:"Token cannot be parsed",[w_]:"The token is null or empty",[Kd]:"Endpoints cannot be resolved",[S_]:"Network request failed",[__]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[R_]:"The hash parameters could not be deserialized",[Ug]:"State was not the expected format",[k_]:"State mismatch error",[gI]:"State not found",[P_]:"Nonce mismatch error",[Cv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[D_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[A9]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[y9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[B_]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[N_]:"Token request cannot be made without authorization code or refresh token.",[L_]:"Cannot remove null or empty scope from ScopeSet",[M_]:"Cannot append ScopeSet",[AI]:"Empty input ScopeSet cannot be processed",[C9]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[v9]:"Device code is expired.",[E9]:"Device code stopped polling for unknown reasons.",[vv]:"Please pass an account object, silent flow is not supported without account information",[F_]:"Cache record object was null or undefined.",[Ev]:"Invalid environment when attempting to create cache entry",[x9]:"No account found in cache for given key.",[yI]:"No crypto object detected.",[b9]:"Unexpected credential type.",[I9]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[T9]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[xv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[w9]:"User defined timeout for device code polling reached",[O_]:"Cannot generate a POP jwt if the token_claims are not populated",[Q_]:"Server response does not contain an authorization code to proceed",[S9]:"Could not remove the credential's binding key from storage.",[U_]:"The provided authority does not support logout",[q_]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_9]:"No network connectivity. Check your internet connection.",[R9]:"User cancelled the flow.",[k9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Si]:"This method has not been implemented",[P9]:"The nested app auth bridge is disabled"},G0e={clientInfoDecodingError:{code:mI,desc:ni[mI]},clientInfoEmptyError:{code:T_,desc:ni[T_]},tokenParsingError:{code:hI,desc:ni[hI]},nullOrEmptyToken:{code:w_,desc:ni[w_]},endpointResolutionError:{code:Kd,desc:ni[Kd]},networkError:{code:S_,desc:ni[S_]},unableToGetOpenidConfigError:{code:__,desc:ni[__]},hashNotDeserialized:{code:R_,desc:ni[R_]},invalidStateError:{code:Ug,desc:ni[Ug]},stateMismatchError:{code:k_,desc:ni[k_]},stateNotFoundError:{code:gI,desc:ni[gI]},nonceMismatchError:{code:P_,desc:ni[P_]},authTimeNotFoundError:{code:Cv,desc:ni[Cv]},maxAgeTranspired:{code:D_,desc:ni[D_]},multipleMatchingTokens:{code:A9,desc:ni[A9]},multipleMatchingAccounts:{code:y9,desc:ni[y9]},multipleMatchingAppMetadata:{code:B_,desc:ni[B_]},tokenRequestCannotBeMade:{code:N_,desc:ni[N_]},removeEmptyScopeError:{code:L_,desc:ni[L_]},appendScopeSetError:{code:M_,desc:ni[M_]},emptyInputScopeSetError:{code:AI,desc:ni[AI]},DeviceCodePollingCancelled:{code:C9,desc:ni[C9]},DeviceCodeExpired:{code:v9,desc:ni[v9]},DeviceCodeUnknownError:{code:E9,desc:ni[E9]},NoAccountInSilentRequest:{code:vv,desc:ni[vv]},invalidCacheRecord:{code:F_,desc:ni[F_]},invalidCacheEnvironment:{code:Ev,desc:ni[Ev]},noAccountFound:{code:x9,desc:ni[x9]},noCryptoObj:{code:yI,desc:ni[yI]},unexpectedCredentialType:{code:b9,desc:ni[b9]},invalidAssertion:{code:I9,desc:ni[I9]},invalidClientCredential:{code:T9,desc:ni[T9]},tokenRefreshRequired:{code:xv,desc:ni[xv]},userTimeoutReached:{code:w9,desc:ni[w9]},tokenClaimsRequired:{code:O_,desc:ni[O_]},noAuthorizationCodeFromServer:{code:Q_,desc:ni[Q_]},bindingKeyNotRemovedError:{code:S9,desc:ni[S9]},logoutNotSupported:{code:U_,desc:ni[U_]},keyIdMissing:{code:q_,desc:ni[q_]},noNetworkConnectivity:{code:_9,desc:ni[_9]},userCanceledError:{code:R9,desc:ni[R9]},missingTenantIdError:{code:k9,desc:ni[k9]},nestedAppAuthBridgeDisabled:{code:P9,desc:ni[P9]}},CI=class t extends ri{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${ni[e]}: ${r}`:ni[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function Ct(t,e){return new CI(t,e)}s(Ct,"createClientAuthError");var J4={createNewGuid:s(()=>{throw Ct(Si)},"createNewGuid"),base64Decode:s(()=>{throw Ct(Si)},"base64Decode"),base64Encode:s(()=>{throw Ct(Si)},"base64Encode"),base64UrlEncode:s(()=>{throw Ct(Si)},"base64UrlEncode"),encodeKid:s(()=>{throw Ct(Si)},"encodeKid"),async getPublicKeyThumbprint(){throw Ct(Si)},async removeTokenBindingKey(){throw Ct(Si)},async clearKeystore(){throw Ct(Si)},async signJwt(){throw Ct(Si)},async hashString(){throw Ct(Si)}};f();var Ma;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ma||(Ma={}));var lp=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ma.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ma.Info,this.correlationId=o.correlationId||tt.EMPTY_STRING,this.packageName=r||tt.EMPTY_STRING,this.packageVersion=n||tt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ma.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ma[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ma.Error,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ma.Error,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ma.Warning,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ma.Warning,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ma.Info,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ma.Info,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ma.Verbose,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ma.Verbose,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ma.Trace,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ma.Trace,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};f();var mG="@azure/msal-common",X4="15.8.1";f();var bv={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};f();var xl={};ma(xl,{createAccessTokenEntity:()=>Y0e,createIdTokenEntity:()=>z0e,createRefreshTokenEntity:()=>K0e,generateAppMetadataKey:()=>d5t,generateAuthorityMetadataExpiresAt:()=>AG,generateCredentialKey:()=>N9,isAccessTokenEntity:()=>t5t,isAppMetadataEntity:()=>f5t,isAuthorityMetadataEntity:()=>p5t,isAuthorityMetadataExpired:()=>yG,isCredentialEntity:()=>gG,isIdTokenEntity:()=>r5t,isRefreshTokenEntity:()=>n5t,isServerTelemetryEntity:()=>l5t,isThrottlingEntity:()=>u5t,updateAuthorityEndpointMetadata:()=>eD,updateCloudDiscoveryMetadata:()=>L9});f();var hG={};ma(hG,{checkMaxAge:()=>D9,extractTokenClaims:()=>Iv,getJWSPayload:()=>B9e});f();function Iv(t,e){let r=B9e(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ct(hI)}}s(Iv,"extractTokenClaims");function B9e(t){if(!t)throw Ct(w_);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ct(hI);return r[2]}s(B9e,"getJWSPayload");function D9(t,e){if(e===0||Date.now()-3e5>t+e)throw Ct(D_)}s(D9,"checkMaxAge");var Ks={};ma(Ks,{delay:()=>e5t,isTokenExpired:()=>Z4,nowSeconds:()=>up,toDateFromSeconds:()=>B9,toSecondsFromDate:()=>Zkt,wasClockTurnedBack:()=>V0e});f();function up(){return Math.round(new Date().getTime()/1e3)}s(up,"nowSeconds");function Zkt(t){return t.getTime()/1e3}s(Zkt,"toSecondsFromDate");function B9(t){return t?new Date(Number(t)*1e3):new Date}s(B9,"toDateFromSeconds");function Z4(t,e){let r=Number(t)||0;return up()+e>r}s(Z4,"isTokenExpired");function V0e(t){return Number(t)>up()}s(V0e,"wasClockTurnedBack");function e5t(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(e5t,"delay");function N9(t){return[i5t(t),o5t(t),s5t(t),a5t(t),c5t(t)].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}s(N9,"generateCredentialKey");function z0e(t,e,r,n,i){return{credentialType:xo.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(z0e,"createIdTokenEntity");function Y0e(t,e,r,n,i,o,a,c,l,u,d,p,m,h,g){let A={homeAccountId:t,credentialType:xo.ACCESS_TOKEN,secret:r,cachedAt:up().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:d||no.BEARER};if(p&&(A.userAssertionHash=p),u&&(A.refreshOn=u.toString()),h&&(A.requestedClaims=h,A.requestedClaimsHash=g),A.tokenType?.toLowerCase()!==no.BEARER.toLowerCase())switch(A.credentialType=xo.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case no.POP:let y=Iv(r,l);if(!y?.cnf?.kid)throw Ct(O_);A.keyId=y.cnf.kid;break;case no.SSH:A.keyId=m}return A}s(Y0e,"createAccessTokenEntity");function K0e(t,e,r,n,i,o,a){let c={credentialType:xo.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(K0e,"createRefreshTokenEntity");function gG(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s(gG,"isCredentialEntity");function t5t(t){return t?gG(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===xo.ACCESS_TOKEN||t.credentialType===xo.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(t5t,"isAccessTokenEntity");function r5t(t){return t?gG(t)&&t.hasOwnProperty("realm")&&t.credentialType===xo.ID_TOKEN:!1}s(r5t,"isIdTokenEntity");function n5t(t){return t?gG(t)&&t.credentialType===xo.REFRESH_TOKEN:!1}s(n5t,"isRefreshTokenEntity");function i5t(t){return[t.homeAccountId,t.environment].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}s(i5t,"generateAccountId");function o5t(t){let e=t.credentialType===xo.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}s(o5t,"generateCredentialId");function s5t(t){return(t.target||"").toLowerCase()}s(s5t,"generateTarget");function a5t(t){return(t.requestedClaimsHash||"").toLowerCase()}s(a5t,"generateClaimsHash");function c5t(t){return t.tokenType&&t.tokenType.toLowerCase()!==no.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(c5t,"generateScheme");function l5t(t,e){let r=t.indexOf(El.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(l5t,"isServerTelemetryEntity");function u5t(t,e){let r=!1;t&&(r=t.indexOf(Yy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(u5t,"isThrottlingEntity");function d5t({environment:t,clientId:e}){return[f9,t,e].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}s(d5t,"generateAppMetadataKey");function f5t(t,e){return e?t.indexOf(f9)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(f5t,"isAppMetadataEntity");function p5t(t,e){return e?t.indexOf(z4.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(p5t,"isAuthorityMetadataEntity");function AG(){return up()+z4.REFRESH_TIME_SECONDS}s(AG,"generateAuthorityMetadataExpiresAt");function eD(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(eD,"updateAuthorityEndpointMetadata");function L9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(L9,"updateCloudDiscoveryMetadata");function yG(t){return t.expiresAt<=up()}s(yG,"isAuthorityMetadataExpired");f();f();var tD={};ma(tD,{authorityMismatch:()=>W9,authorityUriInsecure:()=>W_,cannotAllowPlatformBroker:()=>H9,cannotSetOIDCOptions:()=>q9,claimsRequestParsingError:()=>M9,emptyInputScopesError:()=>j_,invalidAuthenticationHeader:()=>U9,invalidAuthorityMetadata:()=>Y_,invalidClaims:()=>vI,invalidCloudDiscoveryMetadata:()=>EI,invalidCodeChallengeMethod:()=>F9,logoutRequestEmpty:()=>V_,missingNonceAuthenticationHeader:()=>Q9,missingSshJwk:()=>Tv,missingSshKid:()=>O9,pkceParamsMissing:()=>z_,redirectUriEmpty:()=>H_,tokenRequestEmpty:()=>G_,untrustedAuthority:()=>K_,urlEmptyError:()=>$_,urlParseError:()=>Ky});f();var H_="redirect_uri_empty",M9="claims_request_parsing_error",W_="authority_uri_insecure",Ky="url_parse_error",$_="empty_url_error",j_="empty_input_scopes_error",vI="invalid_claims",G_="token_request_empty",V_="logout_request_empty",F9="invalid_code_challenge_method",z_="pkce_params_missing",EI="invalid_cloud_discovery_metadata",Y_="invalid_authority_metadata",K_="untrusted_authority",Tv="missing_ssh_jwk",O9="missing_ssh_kid",Q9="missing_nonce_authentication_header",U9="invalid_authentication_header",q9="cannot_set_OIDCOptions",H9="cannot_allow_platform_broker",W9="authority_mismatch";var Ya={[H_]:"A redirect URI is required for all calls, and none has been set.",[M9]:"Could not parse the given claims request object.",[W_]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ky]:"URL could not be parsed into appropriate segments.",[$_]:"URL was empty or null.",[j_]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[vI]:"Given claims parameter must be a stringified JSON object.",[G_]:"Token request was empty and not found in cache.",[V_]:"The logout request was null or undefined.",[F9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[z_]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[EI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Y_]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[K_]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Tv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[O9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Q9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[U9]:"Invalid authentication header provided",[q9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[H9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[W9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},J0e={redirectUriNotSet:{code:H_,desc:Ya[H_]},claimsRequestParsingError:{code:M9,desc:Ya[M9]},authorityUriInsecure:{code:W_,desc:Ya[W_]},urlParseError:{code:Ky,desc:Ya[Ky]},urlEmptyError:{code:$_,desc:Ya[$_]},emptyScopesError:{code:j_,desc:Ya[j_]},invalidClaimsRequest:{code:vI,desc:Ya[vI]},tokenRequestEmptyError:{code:G_,desc:Ya[G_]},logoutRequestEmptyError:{code:V_,desc:Ya[V_]},invalidCodeChallengeMethod:{code:F9,desc:Ya[F9]},invalidCodeChallengeParams:{code:z_,desc:Ya[z_]},invalidCloudDiscoveryMetadata:{code:EI,desc:Ya[EI]},invalidAuthorityMetadata:{code:Y_,desc:Ya[Y_]},untrustedAuthority:{code:K_,desc:Ya[K_]},missingSshJwk:{code:Tv,desc:Ya[Tv]},missingSshKid:{code:O9,desc:Ya[O9]},missingNonceAuthenticationHeader:{code:Q9,desc:Ya[Q9]},invalidAuthenticationHeader:{code:U9,desc:Ya[U9]},cannotSetOIDCOptions:{code:q9,desc:Ya[q9]},cannotAllowPlatformBroker:{code:H9,desc:Ya[H9]},authorityMismatch:{code:W9,desc:Ya[W9]}},rD=class t extends ri{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Ya[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function ds(t){return new rD(t)}s(ds,"createClientConfigurationError");f();var Ea=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var $c=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?Ea.trimArrayEntries([...e]):[],n=r?Ea.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ds(j_);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||tt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(tt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return W0e.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ct(M_)}}removeScope(e){if(!e)throw Ct(L_);this.scopes.delete(e.trim())}removeOIDCScopes(){W0e.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ct(AI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ct(AI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):tt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};f();f();function nD(t,e){if(!t)throw Ct(T_);try{let r=e(t);return JSON.parse(r)}catch{throw Ct(mI)}}s(nD,"buildClientInfo");function Jy(t){if(!t)throw Ct(mI);let e=t.split(za.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?tt.EMPTY_STRING:e[1]}}s(Jy,"buildClientInfoFromHomeAccountId");f();function N9e(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(N9e,"tenantIdMatchesHomeTenant");function $9(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,d=a||l||u||"";return{tenantId:d,localAccountId:i||o||"",name:c,isHomeTenant:N9e(d,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:N9e(r,t)}}s($9,"buildTenantProfile");function CG(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=$9(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(CG,"updateAccountTenantProfileData");f();var Pm={Default:0,Adfs:1,Dsts:2,Ciam:3};f();function vG(t){return t&&(t.tid||t.tfp||t.acr)||null}s(vG,"getTenantIdFromIdTokenClaims");f();var yd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var Pu=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(za.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===Pm.Adfs?i.authorityType=b_.ADFS_ACCOUNT_TYPE:r.protocolMode===yd.OIDC?i.authorityType=b_.GENERIC_ACCOUNT_TYPE:i.authorityType=b_.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=nD(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw Ct(Ev);i.environment=a,i.realm=o?.utid||vG(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=$9(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||b_.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===Pm.Adfs||r===Pm.Dsts)){if(e)try{let a=nD(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};f();f();var Du={};ma(Du,{getDeserializedResponse:()=>X0e,mapToQueryString:()=>Xy,stripLeadingHashOrQuery:()=>L9e});f();function L9e(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(L9e,"stripLeadingHashOrQuery");function X0e(t){if(!t||t.indexOf("=")<0)return null;try{let e=L9e(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ct(R_)}return null}s(X0e,"getDeserializedResponse");function Xy(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(Xy,"mapToQueryString");var _i=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ds($_);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return Ea.endsWith(r,"?")?r=r.slice(0,-1):Ea.endsWith(r,"?/")&&(r=r.slice(0,-2)),Ea.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ds(Ky)}if(!e.HostNameAndPort||!e.PathSegments)throw ds(Ky);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ds(W_)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===zf.COMMON||n[0]===zf.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ds(Ky);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ds(Ky);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===tt.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!X0e(e)}};var F9e={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Z0e=F9e.endpointMetadata,epe=F9e.instanceDiscoveryMetadata,tpe=new Set;epe.metadata.forEach(t=>{t.aliases.forEach(e=>{tpe.add(e)})});function O9e(t,e){let r,n=t.canonicalAuthority;if(n){let i=new _i(n).getUrlComponents().HostNameAndPort;r=M9e(i,t.cloudDiscoveryMetadata?.metadata,Yd.CONFIG,e)||M9e(i,epe.metadata,Yd.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(O9e,"getAliasesFromStaticSources");function M9e(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=j9(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(M9e,"getAliasesFromMetadata");function Q9e(t){return j9(epe.metadata,t)}s(Q9e,"getCloudDiscoveryMetadataFromHardcodedValues");function j9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(j9,"getCloudDiscoveryMetadataFromNetworkResponse");f();f();var rpe="cache_quota_exceeded",EG="cache_error_unknown";var npe={[rpe]:"Exceeded cache storage capacity.",[EG]:"Unexpected error occurred when using cache storage."},G9=class t extends ri{static{s(this,"CacheError")}constructor(e,r){let n=r||(npe[e]?npe[e]:npe[EG]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function U9e(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new G9(rpe):new G9(t.name,t.message):new G9(EG)}s(U9e,"createCacheError");var xI=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(mG,X4),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=Iv(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=CG(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let d=this.getTenantedAccountInfoByFilter(o,c,u,r,i);d&&l.push(d)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw Ct(F_);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ri?i:U9e(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=$c.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&$c.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(za.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(za.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(xo.ID_TOKEN.toLowerCase())===-1&&r.indexOf(xo.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(xo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(xo.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(xo.REFRESH_TOKEN.toLowerCase())>-1){let n=`${xo.REFRESH_TOKEN}${za.CACHE_KEY_SEPARATOR}${this.clientId}${za.CACHE_KEY_SEPARATOR}`,i=`${xo.REFRESH_TOKEN}${za.CACHE_KEY_SEPARATOR}${yv}${za.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===xo.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===no.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==xo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==no.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=Pu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:xo.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let d=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&d.set(h,m)});let p=d.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=$c.createSearchScopes(r.scopes),c=r.authenticationScheme||no.BEARER,l=c&&c.toLowerCase()!==no.BEARER.toLowerCase()?xo.ACCESS_TOKEN_WITH_AUTH_SCHEME:xo.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},d=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(N9(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?yv:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:xo.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&n&&o.addFields({multiMatchedRT:d},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw Ct(B_);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===yv)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=O9e(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==xo.ACCESS_TOKEN&&e.credentialType!==xo.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:$c.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(f9)!==-1}isAuthorityMetadata(e){return e.indexOf(z4.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${z4.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},V9=class extends xI{static{s(this,"DefaultStorageClass")}async setAccount(){throw Ct(Si)}getAccount(){throw Ct(Si)}async setIdTokenCredential(){throw Ct(Si)}getIdTokenCredential(){throw Ct(Si)}async setAccessTokenCredential(){throw Ct(Si)}getAccessTokenCredential(){throw Ct(Si)}async setRefreshTokenCredential(){throw Ct(Si)}getRefreshTokenCredential(){throw Ct(Si)}setAppMetadata(){throw Ct(Si)}getAppMetadata(){throw Ct(Si)}setServerTelemetry(){throw Ct(Si)}getServerTelemetry(){throw Ct(Si)}setAuthorityMetadata(){throw Ct(Si)}getAuthorityMetadata(){throw Ct(Si)}getAuthorityMetadataKeys(){throw Ct(Si)}setThrottlingCache(){throw Ct(Si)}getThrottlingCache(){throw Ct(Si)}removeItem(){throw Ct(Si)}getKeys(){throw Ct(Si)}getAccountKeys(){throw Ct(Si)}getTokenKeys(){throw Ct(Si)}};f();f();var Ke={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},aan=new Map([[Ke.AcquireTokenByCode,"ATByCode"],[Ke.AcquireTokenByRefreshToken,"ATByRT"],[Ke.AcquireTokenSilent,"ATS"],[Ke.AcquireTokenSilentAsync,"ATSAsync"],[Ke.AcquireTokenPopup,"ATPopup"],[Ke.AcquireTokenRedirect,"ATRedirect"],[Ke.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ke.CryptoOptsSignJwt,"CryptoSignJwt"],[Ke.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ke.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ke.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ke.SsoSilent,"SsoSlt"],[Ke.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ke.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ke.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ke.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ke.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ke.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ke.BrokerHandhshake,"BrokerHandshake"],[Ke.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ke.AcquireTokenByBroker,"ATByBroker"],[Ke.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ke.RefreshTokenClientAcquireToken,"RTClientAT"],[Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ke.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ke.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ke.AcquireTokenFromCache,"ATFromCache"],[Ke.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ke.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ke.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ke.InitializeBaseRequest,"InitBaseReq"],[Ke.InitializeSilentRequest,"InitSltReq"],[Ke.InitializeClientApplication,"InitClientApplication"],[Ke.InitializeCache,"InitCache"],[Ke.ImportExistingCache,"importCache"],[Ke.SetUserData,"setUserData"],[Ke.LocalStorageUpdated,"localStorageUpdated"],[Ke.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ke.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ke.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ke.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ke.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ke.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ke.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ke.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ke.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ke.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ke.HandleCodeResponse,"HandleCodeResp"],[Ke.HandleResponseEar,"HandleRespEar"],[Ke.HandleResponseCode,"HandleRespCode"],[Ke.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ke.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ke.AuthClientAcquireToken,"AuthClientAT"],[Ke.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ke.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ke.PopTokenGenerateCnf,"PopTGenCnf"],[Ke.PopTokenGenerateKid,"PopTGenKid"],[Ke.HandleServerTokenResponse,"HandleServerTRes"],[Ke.DeserializeResponse,"DeserializeRes"],[Ke.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ke.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ke.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ke.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ke.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ke.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ke.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ke.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ke.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ke.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ke.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ke.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ke.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ke.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ke.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ke.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ke.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ke.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ke.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ke.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ke.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ke.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ke.GeneratePkceCodes,"GenPkceCodes"],[Ke.GenerateCodeVerifier,"GenCodeVerifier"],[Ke.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ke.Sha256Digest,"Sha256Digest"],[Ke.GetRandomValues,"GetRandomValues"],[Ke.GenerateHKDF,"genHKDF"],[Ke.GenerateBaseKey,"genBaseKey"],[Ke.Base64Decode,"b64Decode"],[Ke.UrlEncodeArr,"urlEncArr"],[Ke.Encrypt,"encrypt"],[Ke.Decrypt,"decrypt"],[Ke.GenerateEarKey,"genEarKey"],[Ke.DecryptEarResponse,"decryptEarResp"]]),q9e={NotStarted:0,InProgress:1,Completed:2};var xG=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},J_=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:q9e.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new xG}}startPerformanceMeasurement(){return new xG}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var m5t={tokenRenewalOffsetSeconds:Y4,preventCorsPreflight:!1},h5t={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ma.Info,correlationId:tt.EMPTY_STRING},g5t={claimsBasedCachingEnabled:!1},A5t={async sendGetRequestAsync(){throw Ct(Si)},async sendPostRequestAsync(){throw Ct(Si)}},y5t={sku:tt.SKU,version:X4,cpu:tt.EMPTY_STRING,os:tt.EMPTY_STRING},C5t={clientSecret:tt.EMPTY_STRING,clientAssertion:void 0},v5t={azureCloudInstance:bv.None,tenant:`${tt.DEFAULT_COMMON_TENANT}`},E5t={application:{appName:"",appVersion:""}};function H9e({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:p,serializableCache:m}){let h={...h5t,...r};return{authOptions:x5t(t),systemOptions:{...m5t,...e},loggerOptions:h,cacheOptions:{...g5t,...n},storageInterface:i||new V9(t.clientId,J4,new lp(h),new J_),networkInterface:o||A5t,cryptoInterface:a||J4,clientCredentials:c||C5t,libraryInfo:{...y5t,...l},telemetry:{...E5t,...u},serverTelemetryManager:d||null,persistencePlugin:p||null,serializableCache:m||null}}s(H9e,"buildClientConfiguration");function x5t(t){return{clientCapabilities:[],azureCloudOptions:v5t,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(x5t,"buildAuthOptions");function bG(t){return t.authOptions.authority.options.protocolMode===yd.OIDC}s(bG,"isOidcProtocolMode");f();var Jd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var dr={};ma(dr,{addApplicationTelemetry:()=>K9,addAuthorizationCode:()=>zpe,addBrokerParameters:()=>_v,addCcsOid:()=>wv,addCcsUpn:()=>bI,addClaims:()=>n2,addClientAssertion:()=>Z9,addClientAssertionType:()=>e6,addClientCapabilitiesToClaims:()=>W9e,addClientId:()=>t2,addClientInfo:()=>o2,addClientSecret:()=>X9,addCodeChallengeParams:()=>F5t,addCodeVerifier:()=>Kpe,addCorrelationId:()=>i2,addDeviceCode:()=>O5t,addDomainHint:()=>jpe,addEARParameters:()=>W5t,addExtraQueryParameters:()=>Sv,addGrantType:()=>t6,addIdTokenHint:()=>$pe,addInstanceAware:()=>r6,addLibraryInfo:()=>Y9,addLoginHint:()=>oD,addLogoutHint:()=>Jpe,addNativeBroker:()=>M5t,addNonce:()=>Vpe,addOboAssertion:()=>Q5t,addPassword:()=>H5t,addPopToken:()=>n6,addPostLogoutRedirectUri:()=>Wpe,addPrompt:()=>Gpe,addRedirectUri:()=>r2,addRefreshToken:()=>Ype,addRequestTokenUse:()=>U5t,addResponseMode:()=>Hpe,addResponseType:()=>L5t,addScopes:()=>e2,addServerTelemetry:()=>o6,addSid:()=>RG,addSshJwk:()=>i6,addState:()=>J9,addThrottling:()=>s6,addUsername:()=>q5t,instrumentBrokerParams:()=>Z_});f();var X_={};ma(X_,{ACCESS_TOKEN:()=>T5t,BROKER_CLIENT_ID:()=>z9,BROKER_REDIRECT_URI:()=>_G,CCS_HEADER:()=>B5t,CLAIMS:()=>ape,CLIENT_ASSERTION:()=>Ppe,CLIENT_ASSERTION_TYPE:()=>Dpe,CLIENT_ID:()=>Zy,CLIENT_INFO:()=>k5t,CLIENT_REQUEST_ID:()=>Ape,CLIENT_SECRET:()=>kpe,CODE:()=>ppe,CODE_CHALLENGE:()=>mpe,CODE_CHALLENGE_METHOD:()=>hpe,CODE_VERIFIER:()=>gpe,DEVICE_CODE:()=>Rpe,DOMAIN_HINT:()=>Qpe,EAR_JWE_CRYPTO:()=>qpe,EAR_JWK:()=>Upe,ERROR:()=>b5t,ERROR_DESCRIPTION:()=>I5t,EXPIRES_IN:()=>S5t,FOCI:()=>D5t,GRANT_TYPE:()=>spe,ID_TOKEN:()=>w5t,ID_TOKEN_HINT:()=>_pe,INSTANCE_AWARE:()=>iD,LOGIN_HINT:()=>Ope,LOGOUT_HINT:()=>Mpe,NATIVE_BROKER:()=>Lpe,NONCE:()=>dpe,OBO_ASSERTION:()=>Bpe,ON_BEHALF_OF:()=>P5t,POST_LOGOUT_URI:()=>Spe,PROMPT:()=>fpe,REDIRECT_URI:()=>IG,REFRESH_TOKEN:()=>lpe,REFRESH_TOKEN_EXPIRES_IN:()=>_5t,REQUESTED_TOKEN_USE:()=>Npe,REQ_CNF:()=>wG,RESPONSE_MODE:()=>ope,RESPONSE_TYPE:()=>ipe,RETURN_SPA_CODE:()=>SG,SCOPE:()=>cpe,SESSION_STATE:()=>R5t,SID:()=>Fpe,STATE:()=>upe,TOKEN_TYPE:()=>TG,X_APP_NAME:()=>Tpe,X_APP_VER:()=>wpe,X_CLIENT_CPU:()=>Epe,X_CLIENT_CURR_TELEM:()=>xpe,X_CLIENT_EXTRA_SKU:()=>N5t,X_CLIENT_LAST_TELEM:()=>bpe,X_CLIENT_OS:()=>vpe,X_CLIENT_SKU:()=>ype,X_CLIENT_VER:()=>Cpe,X_MS_LIB_CAPABILITY:()=>Ipe});f();var Zy="client_id",IG="redirect_uri",ipe="response_type",ope="response_mode",spe="grant_type",ape="claims",cpe="scope",b5t="error",I5t="error_description",T5t="access_token",w5t="id_token",lpe="refresh_token",S5t="expires_in",_5t="refresh_token_expires_in",upe="state",dpe="nonce",fpe="prompt",R5t="session_state",k5t="client_info",ppe="code",mpe="code_challenge",hpe="code_challenge_method",gpe="code_verifier",Ape="client-request-id",ype="x-client-SKU",Cpe="x-client-VER",vpe="x-client-OS",Epe="x-client-CPU",xpe="x-client-current-telemetry",bpe="x-client-last-telemetry",Ipe="x-ms-lib-capability",Tpe="x-app-name",wpe="x-app-ver",Spe="post_logout_redirect_uri",_pe="id_token_hint",Rpe="device_code",kpe="client_secret",Ppe="client_assertion",Dpe="client_assertion_type",TG="token_type",wG="req_cnf",Bpe="assertion",Npe="requested_token_use",P5t="on_behalf_of",D5t="foci",B5t="X-AnchorMailbox",SG="return_spa_code",Lpe="nativebroker",Mpe="logout_hint",Fpe="sid",Ope="login_hint",Qpe="domain_hint",N5t="x-client-xtra-sku",z9="brk_client_id",_G="brk_redirect_uri",iD="instance_aware",Upe="ear_jwk",qpe="ear_jwe_crypto";function Z_(t,e,r){if(!e)return;let n=t.get(Zy);n&&t.has(z9)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(IG)},e)}s(Z_,"instrumentBrokerParams");function L5t(t,e){t.set(ipe,e)}s(L5t,"addResponseType");function Hpe(t,e){t.set(ope,e||zy.QUERY)}s(Hpe,"addResponseMode");function M5t(t){t.set(Lpe,"1")}s(M5t,"addNativeBroker");function e2(t,e,r=!0,n=Vf){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new $c(i);t.set(cpe,o.printScopes())}s(e2,"addScopes");function t2(t,e){t.set(Zy,e)}s(t2,"addClientId");function r2(t,e){t.set(IG,e)}s(r2,"addRedirectUri");function Wpe(t,e){t.set(Spe,e)}s(Wpe,"addPostLogoutRedirectUri");function $pe(t,e){t.set(_pe,e)}s($pe,"addIdTokenHint");function jpe(t,e){t.set(Qpe,e)}s(jpe,"addDomainHint");function oD(t,e){t.set(Ope,e)}s(oD,"addLoginHint");function bI(t,e){t.set(Ps.CCS_HEADER,`UPN:${e}`)}s(bI,"addCcsUpn");function wv(t,e){t.set(Ps.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(wv,"addCcsOid");function RG(t,e){t.set("sid",e)}s(RG,"addSid");function n2(t,e,r){let n=W9e(e,r);try{JSON.parse(n)}catch{throw ds(vI)}t.set(ape,n)}s(n2,"addClaims");function i2(t,e){t.set(Ape,e)}s(i2,"addCorrelationId");function Y9(t,e){t.set(ype,e.sku),t.set(Cpe,e.version),e.os&&t.set(vpe,e.os),e.cpu&&t.set(Epe,e.cpu)}s(Y9,"addLibraryInfo");function K9(t,e){e?.appName&&t.set(Tpe,e.appName),e?.appVersion&&t.set(wpe,e.appVersion)}s(K9,"addApplicationTelemetry");function Gpe(t,e){t.set(fpe,e)}s(Gpe,"addPrompt");function J9(t,e){e&&t.set(upe,e)}s(J9,"addState");function Vpe(t,e){t.set(dpe,e)}s(Vpe,"addNonce");function F5t(t,e,r){if(e&&r)t.set(mpe,e),t.set(hpe,r);else throw ds(z_)}s(F5t,"addCodeChallengeParams");function zpe(t,e){t.set(ppe,e)}s(zpe,"addAuthorizationCode");function O5t(t,e){t.set(Rpe,e)}s(O5t,"addDeviceCode");function Ype(t,e){t.set(lpe,e)}s(Ype,"addRefreshToken");function Kpe(t,e){t.set(gpe,e)}s(Kpe,"addCodeVerifier");function X9(t,e){t.set(kpe,e)}s(X9,"addClientSecret");function Z9(t,e){e&&t.set(Ppe,e)}s(Z9,"addClientAssertion");function e6(t,e){e&&t.set(Dpe,e)}s(e6,"addClientAssertionType");function Q5t(t,e){t.set(Bpe,e)}s(Q5t,"addOboAssertion");function U5t(t,e){t.set(Npe,e)}s(U5t,"addRequestTokenUse");function t6(t,e){t.set(spe,e)}s(t6,"addGrantType");function o2(t){t.set(D9e,"1")}s(o2,"addClientInfo");function r6(t){t.has(iD)||t.set(iD,"true")}s(r6,"addInstanceAware");function Sv(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(Sv,"addExtraQueryParameters");function W9e(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw ds(vI)}return e&&e.length>0&&(r.hasOwnProperty(x_.ACCESS_TOKEN)||(r[x_.ACCESS_TOKEN]={}),r[x_.ACCESS_TOKEN][x_.XMS_CC]={values:e}),JSON.stringify(r)}s(W9e,"addClientCapabilitiesToClaims");function q5t(t,e){t.set(m9.username,e)}s(q5t,"addUsername");function H5t(t,e){t.set(m9.password,e)}s(H5t,"addPassword");function n6(t,e){e&&(t.set(TG,no.POP),t.set(wG,e))}s(n6,"addPopToken");function i6(t,e){e&&(t.set(TG,no.SSH),t.set(wG,e))}s(i6,"addSshJwk");function o6(t,e){t.set(xpe,e.generateCurrentRequestHeaderValue()),t.set(bpe,e.generateLastRequestHeaderValue())}s(o6,"addServerTelemetry");function s6(t){t.set(Ipe,Yy.X_MS_LIB_CAPABILITY_VALUE)}s(s6,"addThrottling");function Jpe(t,e){t.set(Mpe,e)}s(Jpe,"addLogoutHint");function _v(t,e,r){t.has(z9)||t.set(z9,e),t.has(_G)||t.set(_G,r)}s(_v,"addBrokerParameters");function W5t(t,e){t.set(Upe,encodeURIComponent(e)),t.set(qpe,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(W5t,"addEARParameters");var PG={};ma(PG,{createDiscoveredInstance:()=>Zpe});f();f();f();function $9e(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s($9e,"isOpenIdConfigResponse");f();function j9e(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(j9e,"isCloudInstanceDiscoveryResponse");f();function G9e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(G9e,"isCloudInstanceDiscoveryErrorResponse");f();f();var V9e=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),io=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var a6=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=I_.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await io(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(tt.IMDS_VERSION,i);if(o.status===ti.SUCCESS&&(n=o.body,r.region_source=I_.IMDS),o.status===ti.BAD_REQUEST){let a=await io(this.getCurrentVersion.bind(this),Ke.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=I_.FAILED_AUTO_DETECTION,null;let c=await io(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===ti.SUCCESS&&(n=c.body,r.region_source=I_.IMDS)}}catch{return r.region_source=I_.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=I_.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${tt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,tt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${tt.IMDS_ENDPOINT}?format=json`,e);return r.status===ti.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};a6.IMDS_OPTIONS={headers:{Metadata:"true"}};var qg=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new a6(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(tt.CIAM_AUTH_URL))return Pm.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case tt.ADFS:return Pm.Adfs;case tt.DSTS:return Pm.Dsts}return Pm.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new _i(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ct(Kd)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ct(Kd)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ct(Kd)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ct(U_);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ct(Kd)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ct(Kd)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ct(Kd)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Pm.Default&&this.protocolMode!==yd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new _i(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let d=new _i(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Pm.Adfs||this.protocolMode===yd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await io(this.updateCloudDiscoveryMetadata.bind(this),Ke.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await io(this.updateEndpointMetadata.bind(this),Ke.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:AG(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Yd.CACHE&&n?.source!==Yd.CACHE&&(e.expiresAt=AG(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Yd.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await io(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);eD(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await io(this.getEndpointMetadataFromNetwork.bind(this),Ke.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await io(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),eD(e,n,!0),Yd.NETWORK;throw Ct(__,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),eD(e,r,!1),{source:Yd.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return eD(e,i,!1),{source:Yd.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=yG(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Yd.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new _i(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ds(Y_)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return $9e(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Z0e?Z0e[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==tt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=fG.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await io(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ke.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=fG.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=fG.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await io(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return L9(e,n,!0),Yd.NETWORK;throw ds(K_)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||tt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),L9(e,r,!1),Yd.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=Q9e(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),L9(e,i,!1),Yd.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=yG(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Yd.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Pm.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=j9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ds(EI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${tt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(j9e(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(G9e(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===tt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=j9(a,this.hostnameAndPort)}catch(i){if(i instanceof ri)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&_i.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==bv.None){let i=r.tenant?r.tenant:tt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return tt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ct(Kd)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return tpe.has(e)}static isPublicCloudAuthority(e){return tt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new _i(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${tt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=_i.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new _i(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(tt.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${tt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};qg.reservedTenantDomains=new Set(["{tenant}","{tenantid}",zf.COMMON,zf.CONSUMERS,zf.ORGANIZATIONS]);function z9e(t){let n=new _i(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case zf.COMMON:case zf.ORGANIZATIONS:case zf.CONSUMERS:return;default:return n}}s(z9e,"getTenantFromAuthorityString");function kG(t){return t.endsWith(tt.FORWARD_SLASH)?t:`${t}${tt.FORWARD_SLASH}`}s(kG,"formatAuthorityUri");function Xpe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ds(EI)}return{canonicalAuthority:t.authority?kG(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(Xpe,"buildStaticAuthorityOptions");async function Zpe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ke.AuthorityFactoryCreateDiscoveredInstance,o);let c=qg.transformCIAMAuthority(kG(t)),l=new qg(c,e,r,n,i,o,a);try{return await io(l.resolveEndpointsAsync.bind(l),Ke.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw Ct(Kd)}}s(Zpe,"createDiscoveredInstance");f();f();var Xd=class t extends ri{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};f();function sD(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(sD,"getRequestThumbprint");var c6=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${Yy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Xd(o.errorCodes?.join(" ")||tt.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Ps.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ps.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||Yy.DEFAULT_THROTTLE_TIME_SECONDS),n+Yy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=sD(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};f();var DG=class t extends ri{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var Bu=class{static{s(this,"BaseClient")}constructor(e,r){this.config=H9e(e),this.logger=new lp(this.config.loggerOptions,mG,X4),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Ps.CONTENT_TYPE]=tt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Jd.HOME_ACCOUNT_ID:try{let n=Jy(e.credential);r[Ps.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Jd.UPN:r[Ps.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){c6.preProcess(this.cacheManager,e,i);let o;try{o=await io(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ke.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Ps.X_MS_HTTP_VERSION]||"",requestId:a[Ps.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof DG){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Ps.X_MS_HTTP_VERSION]||"",requestId:c[Ps.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Ps.CONTENT_TYPE]||void 0,contentLengthHeader:c[Ps.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof ri?a:Ct(S_)}return c6.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ke.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Zpe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&_v(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Sv(r,e.tokenQueryParameters),i2(r,e.correlationId),Z_(r,e.correlationId,this.performanceClient),Xy(r)}};f();f();var NG={};ma(NG,{badToken:()=>TI,consentRequired:()=>tme,interactionRequired:()=>eme,loginRequired:()=>rme,nativeAccountUnavailable:()=>l6,noTokensFound:()=>II,refreshTokenExpired:()=>u6,uxNotAllowed:()=>BG});f();var II="no_tokens_found",l6="native_account_unavailable",u6="refresh_token_expired",BG="ux_not_allowed",eme="interaction_required",tme="consent_required",rme="login_required",TI="bad_token";var Y9e=[eme,tme,rme,TI,BG],$5t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],LG={[II]:"No refresh token found in the cache. Please sign-in.",[l6]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[u6]:"Refresh token has expired.",[TI]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[BG]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},nme={noTokensFoundError:{code:II,desc:LG[II]},native_account_unavailable:{code:l6,desc:LG[l6]},bad_token:{code:TI,desc:LG[TI]}},dp=class t extends ri{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||tt.EMPTY_STRING,this.traceId=o||tt.EMPTY_STRING,this.correlationId=a||tt.EMPTY_STRING,this.claims=c||tt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function MG(t,e,r){let n=!!t&&Y9e.indexOf(t)>-1,i=!!r&&$5t.indexOf(r)>-1,o=!!e&&Y9e.some(a=>e.indexOf(a)>-1);return n||o||i}s(MG,"isInteractionRequiredError");function FG(t){return new dp(t,LG[t])}s(FG,"createInteractionRequiredAuthError");f();var OG=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${tt.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ct(yI);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ct(yI);if(!r)throw Ct(Ug);try{let n=r.split(tt.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(tt.RESOURCE_DELIM):tt.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||tt.EMPTY_STRING,libraryState:c}}catch{throw Ct(Ug)}}};f();var j5t={SW:"sw"},wI=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateCnf,e.correlationId);let n=await io(this.generateKid.bind(this),Ke.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:j5t.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new _i(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:up(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};f();var fp=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var vc=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||tt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||tt.NOT_AVAILABLE} - Description: ${e.error_description||tt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||tt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||tt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new Xd(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=ti.SERVER_ERROR_RANGE_START&&e.status<=ti.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=ti.CLIENT_ERROR_RANGE_START&&e.status<=ti.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw MG(e.error,e.error_description,e.suberror)?new dp(e.error,e.error_description,e.suberror,e.timestamp||tt.EMPTY_STRING,e.trace_id||tt.EMPTY_STRING,e.correlation_id||tt.EMPTY_STRING,e.claims||tt.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ke.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=Iv(e.id_token||tt.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&d.nonce!==o.nonce)throw Ct(P_);if(i.maxAge||i.maxAge===0){let g=d.auth_time;if(!g)throw Ct(Cv);D9(g,i.maxAge)}}this.homeAccountIdentifier=Pu.generateHomeAccountId(e.client_info||tt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,d);let p;o&&o.state&&(p=OG.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,d,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new fp(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,d,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,d,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw Ct(Ev);let u=vG(o),d,p;e.id_token&&o&&(d=z0e(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=K9e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let A=e.scope?$c.fromString(e.scope):new $c(i.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,w=n+y,R=w+E,D=b&&b>0?n+b:void 0;m=Y0e(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",A.printScopes(),w,R,this.cryptoObj.base64Decode,D,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=n+y}h=K0e(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,A)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:d,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let d=tt.EMPTY_STRING,p=[],m=null,h,g,A=tt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===no.POP&&!o.popKid){let w=new wI(e),{secret:R,keyId:D}=n.accessToken;if(!D)throw Ct(q_);d=await w.signPopToken(R,D,o)}else d=n.accessToken.secret;p=$c.fromString(n.accessToken.target).asArray(),m=B9(n.accessToken.expiresOn),h=B9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=B9(n.accessToken.refreshOn))}n.appMetadata&&(A=n.appMetadata.familyId===yv?yv:"");let y=a?.oid||a?.sub||"",E=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?CG(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:y,tenantId:E,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:d,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||tt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||tt.EMPTY_STRING,state:c?c.userRequestState:tt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||tt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||tt.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function K9e(t,e,r,n,i,o,a,c,l,u,d,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let A=g||Pu.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:d},e,n),y=A.tenantProfiles||[],E=l||A.realm;if(E&&!y.find(b=>b.tenantId===E)){let b=$9(r,A.localAccountId,E,o);y.push(b)}return A.tenantProfiles=y,A}s(K9e,"buildAccountToCache");f();async function Zd(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(Zd,"getClientAssertion");var d6=class extends Bu{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ke.AuthClientAcquireToken,e.correlationId),!e.code)throw Ct(N_);let n=up(),i=await io(this.executeTokenRequest.bind(this),Ke.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Ps.X_MS_REQUEST_ID],a=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),io(a.handleServerTokenResponse.bind(a),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw ds(V_);let r=this.createLogoutUrlQueryString(e);return _i.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=_i.appendQueryString(e.tokenEndpoint,n),o=await io(this.createTokenRequestBody.bind(this),Ke.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=nD(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${za.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Jd.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=sD(this.config.authOptions.clientId,r);return io(this.executePostToTokenEndpoint.bind(this),Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ke.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(t2(r,e.embeddedClientId||e.tokenBodyParameters?.[Zy]||this.config.authOptions.clientId),this.includeRedirectUri)r2(r,e.redirectUri);else if(!e.redirectUri)throw ds(H_);if(e2(r,e.scopes,!0,this.oidcDefaultScopes),zpe(r,e.code),Y9(r,this.config.libraryInfo),K9(r,this.config.telemetry.application),s6(r),this.serverTelemetryManager&&!bG(this.config)&&o6(r,this.serverTelemetryManager),e.codeVerifier&&Kpe(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&X9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;Z9(r,await Zd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),e6(r,i.assertionType)}if(t6(r,Yf.AUTHORIZATION_CODE_GRANT),o2(r),e.authenticationScheme===no.POP){let i=new wI(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await io(i.generateCnf.bind(i),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n6(r,o)}else if(e.authenticationScheme===no.SSH)if(e.sshJwk)i6(r,e.sshJwk);else throw ds(Tv);(!Ea.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n2(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=nD(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${za.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Jd.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Jd.HOME_ACCOUNT_ID:try{let i=Jy(n.credential);wv(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Jd.UPN:bI(r,n.credential);break}return e.embeddedClientId&&_v(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Sv(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[SG])&&Sv(r,{[SG]:"1"}),Z_(r,e.correlationId,this.performanceClient),Xy(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&Wpe(r,e.postLogoutRedirectUri),e.correlationId&&i2(r,e.correlationId),e.idTokenHint&&$pe(r,e.idTokenHint),e.state&&J9(r,e.state),e.logoutHint&&Jpe(r,e.logoutHint),e.extraQueryParameters&&Sv(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&r6(r),Xy(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};f();var G5t=300,s2=class extends Bu{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireToken,e.correlationId);let r=up(),n=await io(this.executeTokenRequest.bind(this),Ke.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Ps.X_MS_REQUEST_ID],o=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),io(o.handleServerTokenResponse.bind(o),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ds(G_);if(this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ct(vv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await io(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof dp&&n.errorCode===II,o=n instanceof Xd&&n.errorCode===p9.INVALID_GRANT_ERROR&&n.subError===p9.CLIENT_MISMATCH_ERROR;if(i||o)return io(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return io(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=V9e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ke.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw FG(II);if(n.expiresOn&&Z4(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||G5t))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),FG(u6);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||no.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Jd.HOME_ACCOUNT_ID}};try{return await io(this.acquireToken.bind(this),Ke.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof dp&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===TI)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=N9(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=_i.appendQueryString(r.tokenEndpoint,n),o=await io(this.createTokenRequestBody.bind(this),Ke.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=sD(this.config.authOptions.clientId,e);return io(this.executePostToTokenEndpoint.bind(this),Ke.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ke.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(t2(r,e.embeddedClientId||e.tokenBodyParameters?.[Zy]||this.config.authOptions.clientId),e.redirectUri&&r2(r,e.redirectUri),e2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),t6(r,Yf.REFRESH_TOKEN_GRANT),o2(r),Y9(r,this.config.libraryInfo),K9(r,this.config.telemetry.application),s6(r),this.serverTelemetryManager&&!bG(this.config)&&o6(r,this.serverTelemetryManager),Ype(r,e.refreshToken),this.config.clientCredentials.clientSecret&&X9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;Z9(r,await Zd(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),e6(r,n.assertionType)}if(e.authenticationScheme===no.POP){let n=new wI(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await io(n.generateCnf.bind(n),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n6(r,i)}else if(e.authenticationScheme===no.SSH)if(e.sshJwk)i6(r,e.sshJwk);else throw ds(Tv);if((!Ea.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n2(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Jd.HOME_ACCOUNT_ID:try{let n=Jy(e.ccsCredential.credential);wv(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Jd.UPN:bI(r,e.ccsCredential.credential);break}return e.embeddedClientId&&_v(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Sv(r,e.tokenBodyParameters),Z_(r,e.correlationId,this.performanceClient),Xy(r)}};f();var f6=class extends Bu{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Es.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ea.isEmptyObj(e.claims))throw this.setCacheOutcome(Es.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ct(xv);if(!e.account)throw Ct(vv);let n=e.account.tenantId||z9e(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(V0e(o.cachedAt)||Z4(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ct(xv);o.refreshOn&&Z4(o.refreshOn,0)&&(r=Es.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ct(xv);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await io(this.generateResultFromCacheRecord.bind(this),Ke.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Es.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=Iv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ct(Cv);D9(i,r.maxAge)}return vc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var p6={};ma(p6,{getAuthorizationCodePayload:()=>Y5t,getAuthorizeUrl:()=>z5t,getStandardAuthorizeRequestParameters:()=>V5t,validateAuthorizationResponse:()=>J9e});f();function V5t(t,e,r,n){let i=e.correlationId,o=new Map;t2(o,e.embeddedClientId||e.extraQueryParameters?.[Zy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(e2(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),r2(o,e.redirectUri),i2(o,i),Hpe(o,e.responseMode),o2(o),e.prompt&&(Gpe(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(jpe(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==pI.SELECT_ACCOUNT)if(e.sid&&e.prompt===pI.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),RG(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=J5t(e.account),l=X5t(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),oD(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=Jy(e.account.homeAccountId);wv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===pI.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),RG(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=Jy(e.account.homeAccountId);wv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),oD(o,e.loginHint),bI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),oD(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=Jy(e.account.homeAccountId);wv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),oD(o,e.loginHint),bI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Vpe(o,e.nonce),e.state&&J9(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&n2(o,e.claims,t.clientCapabilities),e.embeddedClientId&&_v(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(iD))&&r6(o),o}s(V5t,"getStandardAuthorizeRequestParameters");function z5t(t,e,r,n){let i=Xy(e,r,n);return _i.appendQueryString(t.authorizationEndpoint,i)}s(z5t,"getAuthorizeUrl");function Y5t(t,e){if(J9e(t,e),!t.code)throw Ct(Q_);return t}s(Y5t,"getAuthorizationCodePayload");function J9e(t,e){if(!t.state||!e)throw t.state?Ct(gI,"Cached State"):Ct(gI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ct(Ug,t.state)}try{n=decodeURIComponent(e)}catch{throw Ct(Ug,t.state)}if(r!==n)throw Ct(k_);if(t.error||t.error_description||t.suberror){let i=K5t(t);throw MG(t.error,t.error_description,t.suberror)?new dp(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Xd(t.error||"",t.error_description,t.suberror,i)}}s(J9e,"validateAuthorizationResponse");function K5t(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(K5t,"parseServerErrorNo");function J5t(t){return t.idTokenClaims?.sid||null}s(J5t,"extractAccountSid");function X5t(t){return t.idTokenClaims?.login_hint||null}s(X5t,"extractLoginHint");f();var X9e=",",Z9e="|";function Z5t(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(X9e),c.length<4)return e}else c=Array.from({length:4},()=>Z9e);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&ePt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(X9e)}s(Z5t,"makeExtraSkuString");function ePt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(Z9e))}s(ePt,"setSku");var a2=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=Es.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||tt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||tt.EMPTY_STRING,this.telemetryCacheKey=El.CACHE_KEY+za.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${El.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(El.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(El.VALUE_SEPARATOR);return[El.SCHEMA_VERSION,a,i].join(El.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(El.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(El.VALUE_SEPARATOR),o=e.errors.length,a=r<o?El.OVERFLOW_TRUE:El.OVERFLOW_FALSE,c=[o,a].join(El.VALUE_SEPARATOR);return[El.SCHEMA_VERSION,e.cacheHits,n,i,c].join(El.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=El.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ri?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(El.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||tt.EMPTY_STRING,c=e.failedRequests[2*r+1]||tt.EMPTY_STRING,l=e.errors[r]||tt.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<El.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||tt.EMPTY_STRING),e.push(this.regionSource||tt.EMPTY_STRING),e.push(this.regionOutcome||tt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return Z5t(e)}};var Rv=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new Pu;xI.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};f();f();var e6e="system_assigned_managed_identity",sPt="managed_identity",ome=`https://login.microsoftonline.com/${sPt}/`,Kf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},jc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Qn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Yn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Fa={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Js={GET:"get",POST:"post"},QG={SUCCESS_RANGE_START:ti.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ti.SUCCESS_RANGE_END,SERVER_ERROR:ti.SERVER_ERROR},t6e="REGION_NAME",r6e="MSAL_FORCE_REGION",n6e=32,i6e={SHA256:"sha256"},UG={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},bl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},kv={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Dm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},qG={INTERVAL_MS:100,TIMEOUT_MS:5e3},o6e=4096;f();f();f();f();var aD=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var HG=Fe(require("http"),1),sme=Fe(require("https"),1);var cD=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?s6e(e,this.proxyUrl,Js.GET,r,this.customAgentOptions,n):a6e(e,Js.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?s6e(e,this.proxyUrl,Js.POST,r,this.customAgentOptions):a6e(e,Js.POST,r,this.customAgentOptions)}},s6e=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new HG.default.Agent(i));let d="";if(r===Js.POST){let m=n?.body||"";d=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+d+`\r
`;return new Promise((m,h)=>{let g=HG.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(A,y)=>{let E=A?.statusCode||QG.SERVER_ERROR;(E<QG.SUCCESS_RANGE_START||E>QG.SUCCESS_RANGE_END)&&(g.destroy(),y.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${A.statusCode}. Http status message: ${A?.statusMessage||"Unknown"}`))),y.write(p);let b=[];y.on("data",w=>{b.push(w)}),y.on("end",()=>{let R=Buffer.concat([...b]).toString().split(`\r
`),D=parseInt(R[0].split(" ")[1]),N=R[0].split(" ").slice(2).join(" "),O=R[R.length-1],Y=R.slice(1,R.length-2),ee=new Map;Y.forEach(X=>{let K=X.split(new RegExp(/:\s(.*)/s)),j=K[0],W=K[1];try{let J=JSON.parse(W);J&&typeof J=="object"&&(W=J)}catch{}ee.set(j,W)});let H=Object.fromEntries(ee),U=aD.getNetworkResponse(H,c6e(D,N,H,O),D);(D<ti.SUCCESS_RANGE_START||D>ti.SUCCESS_RANGE_END)&&U.body.error!==bl.AUTHORIZATION_PENDING&&g.destroy(),m(U)}),y.on("error",w=>{g.destroy(),y.destroy(),h(new Error(w.toString()))})}),g.on("error",A=>{g.destroy(),h(new Error(A.toString()))})})},"networkRequestViaProxy"),a6e=s((t,e,r,n,i)=>{let o=e===Js.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...aD.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new sme.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((d,p)=>{let m;u.protocol==="http:"?m=HG.default.request(u):m=sme.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,A=h.statusCode,y=h.statusMessage,E=[];h.on("data",b=>{E.push(b)}),h.on("end",()=>{let b=Buffer.concat([...E]).toString(),w=g,R=aD.getNetworkResponse(w,c6e(A,y,w,b),A);(A<ti.SUCCESS_RANGE_START||A>ti.SUCCESS_RANGE_END)&&R.body.error!==bl.AUTHORIZATION_PENDING&&m.destroy(),d(R)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),c6e=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=ti.CLIENT_ERROR_RANGE_START&&t<=ti.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=ti.SERVER_ERROR_RANGE_START&&t<=ti.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");f();f();f();var WG="invalid_file_extension",$G="invalid_file_path",SI="invalid_managed_identity_id_type",jG="invalid_secret",l6e="missing_client_id",u6e="network_unavailable",GG="platform_not_supported",VG="unable_to_create_azure_arc",zG="unable_to_create_cloud_shell",YG="unable_to_create_source",m6="unable_to_read_secret_file",d6e="user_assigned_not_available_at_runtime",KG="www_authenticate_header_missing",JG="www_authenticate_header_unsupported_format",c2={[Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Qn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Qn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Qn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var aPt={[WG]:"The file path in the WWW-Authenticate header does not contain a .key file.",[$G]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[SI]:"More than one ManagedIdentityIdType was provided.",[jG]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[GG]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[l6e]:"A ManagedIdentityId id was not provided.",[c2.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[c2.IDENTITY_ENDPOINT]:`The Managed Identity's '${Qn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[c2.IMDS_ENDPOINT]:`The Managed Identity's '${Qn.IMDS_ENDPOINT}' environment variable is malformed.`,[c2.MSI_ENDPOINT]:`The Managed Identity's '${Qn.MSI_ENDPOINT}' environment variable is malformed.`,[u6e]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[VG]:"Azure Arc Managed Identities can only be system assigned.",[zG]:"Cloud Shell Managed Identities can only be system assigned.",[YG]:"Unable to create a Managed Identity source based on environment variables.",[m6]:"Unable to read the secret file.",[d6e]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[KG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[JG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},ame=class t extends ri{static{s(this,"ManagedIdentityError")}constructor(e){super(e,aPt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Ec(t){return new ame(t)}s(Ec,"createManagedIdentityError");var XG=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw Ec(SI);this.id=r,this.idType=Fa.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw Ec(SI);this.id=n,this.idType=Fa.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw Ec(SI);this.id=i,this.idType=Fa.USER_ASSIGNED_OBJECT_ID}else this.id=e6e,this.idType=Fa.SYSTEM_ASSIGNED}};f();var zl={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},Jf=class t extends ri{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(zl.invalidLoopbackAddressType.code,`${zl.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(zl.unableToLoadRedirectUri.code,`${zl.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(zl.noAuthCodeInResponse.code,`${zl.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(zl.noLoopbackServerExists.code,`${zl.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(zl.loopbackServerAlreadyExists.code,`${zl.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(zl.loopbackServerTimeout.code,`${zl.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(zl.stateNotFoundError.code,zl.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(zl.thumbprintMissing.code,zl.thumbprintMissing.desc)}};var cPt={clientId:tt.EMPTY_STRING,authority:tt.DEFAULT_AUTHORITY,clientSecret:tt.EMPTY_STRING,clientAssertion:tt.EMPTY_STRING,clientCertificate:{thumbprint:tt.EMPTY_STRING,thumbprintSha256:tt.EMPTY_STRING,privateKey:tt.EMPTY_STRING,x5c:tt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:tt.EMPTY_STRING,authorityMetadata:tt.EMPTY_STRING,clientCapabilities:[],protocolMode:yd.AAD,azureCloudOptions:{azureCloudInstance:bv.None,tenant:tt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},lPt={claimsBasedCachingEnabled:!1},cme={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ma.Info},uPt={loggerOptions:cme,networkClient:new cD,proxyUrl:tt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},dPt={application:{appName:tt.EMPTY_STRING,appVersion:tt.EMPTY_STRING}};function f6e({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...uPt,networkClient:new cD(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||cme,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Jf.createStateNotFoundError();return{auth:{...cPt,...t},broker:{...e},cache:{...lPt,...r},system:{...o,...n},telemetry:{...dPt,...i}}}s(f6e,"buildAppConfiguration");function p6e({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new XG(e),i=r?.loggerOptions||cme,o;return r?.networkClient?o=r.networkClient:o=new cD(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(p6e,"buildManagedIdentityConfiguration");f();f();f();f();var m6e=Fe(require("crypto"));var eV=new Uint8Array(256),ZG=eV.length;function lme(){return ZG>eV.length-16&&(m6e.default.randomFillSync(eV),ZG=0),eV.slice(ZG,ZG+=16)}s(lme,"rng");f();f();f();var h6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fPt(t){return typeof t=="string"&&h6e.test(t)}s(fPt,"validate");var g6e=fPt;var Nu=[];for(let t=0;t<256;++t)Nu.push((t+256).toString(16).substr(1));function pPt(t,e=0){let r=(Nu[t[e+0]]+Nu[t[e+1]]+Nu[t[e+2]]+Nu[t[e+3]]+"-"+Nu[t[e+4]]+Nu[t[e+5]]+"-"+Nu[t[e+6]]+Nu[t[e+7]]+"-"+Nu[t[e+8]]+Nu[t[e+9]]+"-"+Nu[t[e+10]]+Nu[t[e+11]]+Nu[t[e+12]]+Nu[t[e+13]]+Nu[t[e+14]]+Nu[t[e+15]]).toLowerCase();if(!g6e(r))throw TypeError("Stringified UUID is invalid");return r}s(pPt,"stringify");var A6e=pPt;f();function mPt(t,e,r){t=t||{};let n=t.random||(t.rng||lme)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return A6e(n)}s(mPt,"v4");var ume=mPt;var lD=class{static{s(this,"GuidGenerator")}generateGuid(){return ume()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};f();var pp=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(ku.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,tt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,ku.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};f();f();var y6e=Fe(require("crypto"),1);var _I=class{static{s(this,"HashUtils")}sha256(e){return y6e.default.createHash(i6e.SHA256).update(e).digest()}};var C6e=Fe(require("crypto"),1);var tV=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new _I}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%UG.CV_CHARSET.length;for(;e.length<=n6e;){let i=C6e.default.randomBytes(1)[0];if(i>=r)continue;let o=i%UG.CV_CHARSET.length;e.push(UG.CV_CHARSET[o])}let n=e.join(tt.EMPTY_STRING);return pp.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return pp.base64EncodeUrl(this.hashUtils.sha256(e).toString(ku.BASE64),ku.BASE64)}};var eC=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new tV,this.guidGenerator=new lD,this.hashUtils=new _I}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return pp.base64Encode(e)}base64Decode(e){return pp.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return pp.base64EncodeUrl(this.hashUtils.sha256(e).toString(ku.BASE64),ku.BASE64)}};f();f();var RI=class extends xI{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new J_,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof Pu)r.accounts[n]=i;else if(xl.isIdTokenEntity(i))r.idTokens[n]=i;else if(xl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(xl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(xl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Pu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return xl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return xl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return xl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return xl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=xl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&xl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&xl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&xl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Rv.deserializeAllCache(Rv.deserializeJSONBlob(e))}static generateJsonCache(e){return fI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=xl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};f();var h6={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},uD=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=fI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Rv.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=RI.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new eC().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new fp(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new fp(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(Pu.generateAccountCacheKey(e),r||new lD().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new fp(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...h6.Account,...e.Account},IdToken:{...h6.IdToken,...e.IdToken},AccessToken:{...h6.AccessToken,...e.AccessToken},RefreshToken:{...h6.RefreshToken,...e.RefreshToken},AppMetadata:{...h6.AppMetadata,...e.AppMetadata}}}};f();var z7e=Fe(V7e(),1);var Pv=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ct(us.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Ks.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?Dm.PSS_256:Dm.RSA_256},c=this.useSha256?Dm.X5T_256:Dm.X5T;Object.assign(a,{[c]:pp.base64EncodeUrl(this.thumbprint,ku.HEX)}),this.publicCertificate&&Object.assign(a,{[Dm.X5C]:this.publicCertificate});let l={[Dm.AUDIENCE]:this.jwtAudience,[Dm.EXPIRATION_TIME]:this.expirationTime,[Dm.ISSUER]:this.issuer,[Dm.SUBJECT]:this.issuer,[Dm.NOT_BEFORE]:i,[Dm.JWT_ID]:e.createNewGuid()};return this.jwt=z7e.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<Ks.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,tt.EMPTY_STRING));return n}};f();var kV="@azure/msal-node",Wg="3.6.3";f();var yD=class extends Bu{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Ks.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=_i.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:Jd.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;dr.addClientId(r,this.config.authOptions.clientId),dr.addUsername(r,e.username),dr.addPassword(r,e.password),dr.addScopes(r,e.scopes),dr.addResponseType(r,V4.IDTOKEN_TOKEN),dr.addGrantType(r,Yf.RESOURCE_OWNER_PASSWORD_GRANT),dr.addClientInfo(r),dr.addLibraryInfo(r,this.config.libraryInfo),dr.addApplicationTelemetry(r,this.config.telemetry.application),dr.addThrottling(r),this.serverTelemetryManager&&dr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();dr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&dr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(dr.addClientAssertion(r,await Zd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),dr.addClientAssertionType(r,i.assertionType)),(!Ea.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&dr.addCcsUpn(r,e.username),Du.mapToQueryString(r)}};f();function Y7e(t,e,r,n){let i=p6.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return dr.addLibraryInfo(i,{sku:bl.MSAL_SKU,version:Wg,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==yd.OIDC&&dr.addApplicationTelemetry(i,t.telemetry.application),dr.addResponseType(i,V4.CODE),r.codeChallenge&&r.codeChallengeMethod&&dr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),dr.addExtraQueryParameters(i,r.extraQueryParameters||{}),p6.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(Y7e,"getAuthCodeRequestUrl");var DI=class{static{s(this,"ClientApplication")}constructor(e){this.config=f6e(e),this.cryptoProvider=new eC,this.logger=new lp(this.config.system.loggerOptions,kV,Wg),this.storage=new RI(this.logger,this.config.auth.clientId,this.cryptoProvider,Xpe(this.config.auth)),this.tokenCache=new uD(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||zy.QUERY,authenticationScheme:no.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return Y7e(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:no.BEARER},i=this.initializeServerTelemetryManager(kv.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new d6(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof ri&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:no.BEARER},n=this.initializeServerTelemetryManager(kv.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new s2(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(kv.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new f6(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof CI&&c.errorCode===us.tokenRefreshRequired)return new s2(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Vf]});if(o===Es.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new s2(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(kv.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new yD(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Jf.createStateNotFoundError();if(e!==r)throw Ct(us.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:bl.MSAL_SKU,version:Wg,cpu:process.arch||tt.EMPTY_STRING,os:process.platform||tt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Pv.fromAssertion(await Zd(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:bl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===no.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=no.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Ea.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...Vf],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new a2(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=qg.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return PG.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};f();var K7e=Fe(require("http"),1);var PV=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw Jf.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=K7e.default.createServer((o,a)=>{let c=o.url;if(c){if(c===tt.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(Jf.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),d=Du.getDeserializedResponse(u.search)||{};d.code&&(a.writeHead(ti.REDIRECT,{location:l}),a.end()),d.error&&a.end(r||`Error occurred: ${d.error}`),n(d)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Jf.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),Jf.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};f();var CD=class extends Bu{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=Ks.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=_i.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&dr.addExtraQueryParameters(r,e.extraQueryParameters),Du.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:d,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:d,message:p}}createQueryString(e){let r=new Map;return dr.addScopes(r,e.scopes),dr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&dr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Du.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Ct(us.deviceCodePollingCancelled);if(r&&r<e&&Ks.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),Ct(us.userTimeoutReached);if(Ks.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Ct(us.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=_i.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?Ks.nowSeconds()+e.timeout:void 0,l=Ks.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let d={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,d,e.correlationId);if(p.body&&p.body.error)if(p.body.error===tt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Ks.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),j0e(K4.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),Ct(us.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;dr.addScopes(n,e.scopes),dr.addClientId(n,this.config.authOptions.clientId),dr.addGrantType(n,Yf.DEVICE_CODE_GRANT),dr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return dr.addCorrelationId(n,i),dr.addClientInfo(n),dr.addLibraryInfo(n,this.config.libraryInfo),dr.addApplicationTelemetry(n,this.config.telemetry.application),dr.addThrottling(n),this.serverTelemetryManager&&dr.addServerTelemetry(n,this.serverTelemetryManager),(!Ea.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),Du.mapToQueryString(n)}};var vD=class extends DI{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=a2.makeExtraSkuString({libraryName:bl.MSAL_SKU,libraryVersion:Wg})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(kv.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new CD(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||Vf,redirectUri:`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[X_.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:d}=await this.cryptoProvider.generatePkceCodes(),p=c||new PV,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(R=>{m=R}).catch(R=>{h=R}),A=await this.waitForRedirectUri(p),y={...l,correlationId:r,scopes:e.scopes||Vf,redirectUri:A,responseMode:zy.QUERY,codeChallenge:d,codeChallengeMethod:dG.S256},E=await this.getAuthCodeUrl(y);if(await n(E),await g,h)throw h;if(m.error)throw new Xd(m.error,m.error_description,m.suberror);if(!m.code)throw Jf.createNoAuthCodeInResponseError();let b=m.client_info,w={code:m.code,codeVerifier:u,clientInfo:b||tt.EMPTY_STRING,...y};return await this.acquireTokenByCode(w)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||Vf,redirectUri:`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[X_.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(qG.TIMEOUT_MS/qG.INTERVAL_MS<i){clearInterval(o),n(Jf.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof ri&&a.errorCode===zl.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},qG.INTERVAL_MS)})}};f();f();var BI=class extends Bu{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Es.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=Es.NOT_APPLICABLE,d;c.serializableCache&&c.persistencePlugin&&(d=new fp(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(d));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new $c(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&d&&await c.persistencePlugin.afterCacheAccess(d),p?Ks.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||Y4)?(a?.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED),[null,Es.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&Ks.isTokenExpired(p.refreshOn.toString(),0)&&(u=Es.PROACTIVELY_REFRESHED,a?.setCacheOutcome(Es.PROACTIVELY_REFRESHED)),[await vc.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN),[null,Es.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:tt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:xo.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:$c.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw Ct(us.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=Ks.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:no.BEARER}}else{let l=this.createTokenQueryParameters(e),u=_i.appendQueryString(r.tokenEndpoint,l),d=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=Ks.nowSeconds();let h=await this.executePostToTokenEndpoint(u,d,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;dr.addClientId(r,this.config.authOptions.clientId),dr.addScopes(r,e.scopes,!1),dr.addGrantType(r,Yf.CLIENT_CREDENTIALS_GRANT),dr.addLibraryInfo(r,this.config.libraryInfo),dr.addApplicationTelemetry(r,this.config.telemetry.application),dr.addThrottling(r),this.serverTelemetryManager&&dr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();dr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&dr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(dr.addClientAssertion(r,await Zd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),dr.addClientAssertionType(r,i.assertionType)),(!Ea.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Du.mapToQueryString(r)}};f();var ED=class extends Bu{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new $c(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Ks.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ct(us.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ct(us.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=hG.extractTokenClaims(n.secret,pp.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:tt.EMPTY_STRING,localAccountId:a||tt.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),vc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:xo.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||no.BEARER,o={credentialType:n&&n.toLowerCase()!==no.BEARER.toLowerCase()?xo.ACCESS_TOKEN_WITH_AUTH_SCHEME:xo.ACCESS_TOKEN,clientId:e,target:$c.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw Ct(us.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=_i.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=Ks.nowSeconds(),d=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new vc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(d.body),await p.handleServerTokenResponse(d.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;dr.addClientId(r,this.config.authOptions.clientId),dr.addScopes(r,e.scopes),dr.addGrantType(r,Yf.JWT_BEARER),dr.addClientInfo(r),dr.addLibraryInfo(r,this.config.libraryInfo),dr.addApplicationTelemetry(r,this.config.telemetry.application),dr.addThrottling(r),this.serverTelemetryManager&&dr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();dr.addCorrelationId(r,n),dr.addRequestTokenUse(r,X_.ON_BEHALF_OF),dr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&dr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(dr.addClientAssertion(r,await Zd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),dr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Du.mapToQueryString(r)}};var xD=class extends DI{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ct(us.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Pv.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Pv.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ct(us.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Zd(e.clientAssertion,this.config.auth.clientId),assertionType:bl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!Vf.includes(m))},o={...e,...i,clientAssertion:r},c=new _i(o.authority).getUrlComponents().PathSegments[0];if(Object.values(zf).includes(c))throw Ct(us.missingTenantIdError);let l=process.env[r6e],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let d={azureRegion:u,environmentRegion:process.env[t6e]},p=this.initializeServerTelemetryManager(kv.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,d,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new BI(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof ri&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new ED(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof ri&&n.setCorrelationId(r.correlationId),n}}};f();f();f();f();f();function J7e(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(J7e,"isIso8601");f();var DV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Js.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Ps.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Js.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Js.POST,e,r)}};var d2={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},rf=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(J7e(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Ks.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[jc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[jc.XMS_CC]=h}let a=o.headers;a[Ps.CONTENT_TYPE]=tt.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new DV(this.networkClient,o.retryPolicy,this.logger),u=Ks.nowSeconds(),d;try{o.httpMethod===Js.POST?d=await l.sendPostRequestAsync(o.computeUri(),c):d=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof ri?h:Ct(us.networkError)}let p=new vc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(d,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Fa.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?d2.MANAGED_IDENTITY_CLIENT_ID_2017:d2.MANAGED_IDENTITY_CLIENT_ID;case Fa.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?d2.MANAGED_IDENTITY_RESOURCE_ID_IMDS:d2.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Fa.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),d2.MANAGED_IDENTITY_OBJECT_ID;default:throw Ec(SI)}}};rf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new _i(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Ec(c2[t])}};f();f();f();var BV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var m8t=3,h8t=1e3,g8t=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.TOO_MANY_REQUESTS,ti.SERVER_ERROR,ti.SERVICE_UNAVAILABLE,ti.GATEWAY_TIMEOUT],NV=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new BV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return h8t}async pauseForRetry(e,r,n,i){if(g8t.includes(e)&&r<m8t){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var Zf=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new NV}computeUri(){let e=new Map;this.queryParameters&&dr.addExtraQueryParameters(e,this.queryParameters);let r=Du.mapToQueryString(e);return _i.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&dr.addExtraQueryParameters(e,this.bodyParameters),Du.mapToQueryString(e)}};var A8t="2019-08-01",S6=class t extends rf{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Qn.IDENTITY_ENDPOINT],r=process.env[Qn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Yn.APP_SERVICE} managed identity is unavailable because one or both of the '${Qn.IDENTITY_HEADER}' and '${Qn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Qn.IDENTITY_ENDPOINT,a,Yn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Yn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Zf(Js.GET,this.identityEndpoint);return n.headers[Kf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[jc.API_VERSION]=A8t,n.queryParameters[jc.RESOURCE]=e,r.idType!==Fa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var Dv=require("fs"),tQe=Fe(require("path"),1);var y8t="2019-11-01",X7e="http://127.0.0.1:40342/metadata/identity/oauth2/token",Z7e="N/A: himds executable exists",eQe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},C8t={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},_6=class t extends rf{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[Qn.IDENTITY_ENDPOINT],r=process.env[Qn.IMDS_ENDPOINT];if(!e||!r){let n=C8t[process.platform];try{(0,Dv.accessSync)(n,Dv.constants.F_OK|Dv.constants.R_OK),e=X7e,r=Z7e}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Yn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Qn.IDENTITY_ENDPOINT}' and '${Qn.IMDS_ENDPOINT}' are not defined. ${Yn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===Z7e)e.info(`[Managed Identity] ${Yn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Yn.AZURE_ARC} endpoint: ${X7e}. Creating ${Yn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(Qn.IDENTITY_ENDPOINT,c,Yn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(Qn.IMDS_ENDPOINT,l,Yn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Yn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Yn.AZURE_ARC} managed identity.`)}if(a.idType!==Fa.SYSTEM_ASSIGNED)throw Ec(VG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Zf(Js.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[Kf.METADATA_HEADER_NAME]="true",r.queryParameters[jc.API_VERSION]=y8t,r.queryParameters[jc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===ti.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw Ec(KG);if(!a.includes("Basic realm="))throw Ec(JG);let c=a.split("Basic realm=")[1];if(!eQe.hasOwnProperty(process.platform))throw Ec(GG);let l=eQe[process.platform],u=tQe.default.basename(c);if(!u.endsWith(".key"))throw Ec(WG);if(l+u!==c)throw Ec($G);let d;try{d=await(0,Dv.statSync)(c).size}catch{throw Ec(m6)}if(d>o6e)throw Ec(jG);let p;try{p=(0,Dv.readFileSync)(c,ku.UTF8)}catch{throw Ec(m6)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[Kf.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof ri?h:Ct(us.networkError)}}return this.getServerTokenResponse(o||e)}};f();var R6=class t extends rf{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[Qn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Yn.CLOUD_SHELL} managed identity is unavailable because the '${Qn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Qn.MSI_ENDPOINT,c,Yn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Yn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Yn.CLOUD_SHELL} managed identity.`),a.idType!==Fa.SYSTEM_ASSIGNED)throw Ec(zG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Zf(Js.POST,this.msiEndpoint);return r.headers[Kf.METADATA_HEADER_NAME]="true",r.bodyParameters[jc.RESOURCE]=e,r}};f();f();f();var LV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var v8t=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.GONE,ti.TOO_MANY_REQUESTS],E8t=3,x8t=7,b8t=1e3,I8t=4e3,T8t=2e3,w8t=10*1e3,MV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new LV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return b8t}static get MAX_EXPONENTIAL_BACKOFF_MS(){return I8t}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return T8t}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return w8t}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ti.GONE?x8t:E8t),(v8t.includes(e)||e>=ti.SERVER_ERROR_RANGE_START&&e<=ti.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===ti.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var rQe="/metadata/identity/oauth2/token",S8t=`http://169.254.169.254${rQe}`,_8t="2018-02-01",FV=class t extends rf{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Yn.IMDS} returned endpoint: ${process.env[Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${rQe}`,Yn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Yn.IMDS}, using the default endpoint.`),a=S8t),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new Zf(Js.GET,this.identityEndpoint);return n.headers[Kf.METADATA_HEADER_NAME]="true",n.queryParameters[jc.API_VERSION]=_8t,n.queryParameters[jc.RESOURCE]=e,r.idType!==Fa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new MV,n}};f();var R8t="2019-07-01-preview",k6=class t extends rf{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Qn.IDENTITY_ENDPOINT],r=process.env[Qn.IDENTITY_HEADER],n=process.env[Qn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Yn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Qn.IDENTITY_HEADER}', '${Qn.IDENTITY_ENDPOINT}' or '${Qn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let d=t.getValidatedEnvVariableUrlString(Qn.IDENTITY_ENDPOINT,c,Yn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.SERVICE_FABRIC} managed identity. Endpoint URI: ${d}. Creating ${Yn.SERVICE_FABRIC} managed identity.`),a.idType!==Fa.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Yn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new Zf(Js.GET,this.identityEndpoint);return n.headers[Kf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[jc.API_VERSION]=R8t,n.queryParameters[jc.RESOURCE]=e,r.idType!==Fa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var k8t="2017-09-01",P8t=`Only client id is supported for user-assigned managed identity in ${Yn.MACHINE_LEARNING}.`,P6=class t extends rf{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[Qn.MSI_ENDPOINT],r=process.env[Qn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Yn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Qn.MSI_ENDPOINT}' and '${Qn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Qn.MSI_ENDPOINT,a,Yn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Yn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Zf(Js.GET,this.msiEndpoint);if(n.headers[Kf.METADATA_HEADER_NAME]="true",n.headers[Kf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[jc.API_VERSION]=k8t,n.queryParameters[jc.RESOURCE]=e,r.idType===Fa.SYSTEM_ASSIGNED)n.queryParameters[d2.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[Qn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===Fa.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(P8t);return n}};var D6=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(k6.getEnvironmentVariables())?Yn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(S6.getEnvironmentVariables())?Yn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(P6.getEnvironmentVariables())?Yn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(R6.getEnvironmentVariables())?Yn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(_6.getEnvironmentVariables())?Yn.AZURE_ARC:Yn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=k6.tryCreate(e,r,n,i,o,a)||S6.tryCreate(e,r,n,i,o)||P6.tryCreate(e,r,n,i,o)||R6.tryCreate(e,r,n,i,o,a)||_6.tryCreate(e,r,n,i,o,a)||FV.tryCreate(e,r,n,i,o);if(!c)throw Ec(YG);return c}};var D8t=[Yn.SERVICE_FABRIC],bD=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=p6e(e||{}),this.logger=new lp(this.config.system.loggerOptions,kV,Wg);let r={canonicalAuthority:tt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new RI(this.logger,this.config.managedIdentityId.id,J4,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new eC;let n={protocolMode:yd.AAD,knownAuthorities:[ome],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new qg(ome,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new BI({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new D6(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new _I}async acquireToken(e){if(!e.resource)throw ds(tD.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&D8t.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(ku.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===Es.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return D6.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};f();var OV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>Pu.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};f();f();var B6=ci("IdentityUtils"),B8t="1.0";function ID(t,e,r){let n=s(i=>(B6.getToken.info(i),new Fg({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(ID,"ensureValidMsalToken");function Xme(t){let e=t?.authorityHost;return!e&&$4&&(e=process.env.AZURE_AUTHORITY_HOST),e??JM}s(Xme,"getAuthorityHost");function Zme(t,e){return e||(e=JM),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(Zme,"getAuthority");function nQe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(nQe,"getKnownAuthorities");var QV=s((t,e=nG?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case mp.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case mp.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case mp.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case mp.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function UV(t){switch(t){case"error":return mp.LogLevel.Error;case"info":return mp.LogLevel.Info;case"verbose":return mp.LogLevel.Verbose;case"warning":return mp.LogLevel.Warning;default:return mp.LogLevel.Info}}s(UV,"getMSALLogLevel");function f2(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return B6.info(Qo(t,e.message)),new nn(e.message);case"device_code_polling_cancelled":return new E_("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":B6.info(Qo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:B6.info(Qo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(B6.info(Qo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Fg({scopes:t,getTokenOptions:r,message:e.message})}s(f2,"handleMsalError");function iQe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(iQe,"publicToMsal");function oQe(t,e){var r;return{authority:(r=e.environment)!==null&&r!==void 0?r:mLe,homeAccountId:e.homeAccountId,tenantId:e.tenantId||pLe,username:e.username,clientId:t,version:B8t}}s(oQe,"msalToPublic");f();var N8t=1e3*64;function sQe(t){return L0e([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>r?.status!==404?{skipStrategy:!0}:i9e(e,{retryDelayInMs:t.startDelayInMs,maxRetryDelayInMs:N8t}),"retry")}],{maxRetries:t.maxRetries})}s(sQe,"imdsRetryPolicy");f();var Bv="ManagedIdentityCredential - IMDS",p2=ci(Bv),L8t="http://169.254.169.254",M8t="/metadata/identity/oauth2/token";function F8t(t){var e;if(!u9(t))throw new Error(`${Bv}: Multiple scopes are not supported.`);let n=new URL(M8t,(e=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&e!==void 0?e:L8t),i={Accept:"application/json"};return{url:`${n}`,method:"GET",headers:uI(i)}}s(F8t,"prepareInvalidRequestOptions");var aQe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=u9(e);if(!i)return p2.info(`${Bv}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=F8t(i);return ls.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=Qg(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let d;try{p2.info(`${Bv}: Pinging the Azure IMDS endpoint`),d=await r.sendRequest(u)}catch(p){return rG(p)&&p2.verbose(`${Bv}: Caught error ${p.name}: ${p.message}`),p2.info(`${Bv}: The Azure IMDS endpoint is unavailable`),!1}return d.status===403&&!((l=d.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(p2.info(`${Bv}: The Azure IMDS endpoint is unavailable`),p2.info(`${Bv}: ${d.bodyAsText}`),!1):(p2.info(`${Bv}: The Azure IMDS endpoint is available`),!0)})}};f();f();f();f();f();var ehe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(ehe||(ehe={}));function qV(t){var e,r;let n=t;return n===void 0&&((r=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||r===void 0?void 0:r.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===ehe.AutoDiscoverRegion?"AUTO_DISCOVER":n}s(qV,"calculateRegionalAuthority");var e0=ci("MsalClient");function X8t(t,e,r={}){var n,i,o;let a=xj((n=r.logger)!==null&&n!==void 0?n:e0,e,t),c=Zme(a,Xme(r)),l=new Av(Object.assign(Object.assign({},r.tokenCredentialOptions),{authorityHost:c,loggingOptions:r.loggingOptions}));return{auth:{clientId:t,authority:c,knownAuthorities:nQe(a,c,r.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:QV((i=r.logger)!==null&&i!==void 0?i:e0),logLevel:UV(Cj()),piiLoggingEnabled:(o=r.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}s(X8t,"generateMsalConfiguration");function Mm(t,e,r={}){var n;let i={msalConfig:X8t(t,e,r),cachedAccount:r.authenticationRecord?iQe(r.authenticationRecord):null,pluginConfiguration:vLe.generatePluginConfiguration(r),logger:(n=r.logger)!==null&&n!==void 0?n:e0},o=new Map;async function a(D={}){let N=D.enableCae?"CAE":"default",O=o.get(N);if(O)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),O;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${D.enableCae?"enabled":"disabled"}.`);let Y=D.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=D.enableCae?["cp1"]:void 0,O=new vD(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await Y}})),o.set(N,O),O}s(a,"getPublicApp");let c=new Map;async function l(D={}){let N=D.enableCae?"CAE":"default",O=c.get(N);if(O)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),O;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${D.enableCae?"enabled":"disabled"}.`);let Y=D.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=D.enableCae?["cp1"]:void 0,O=new xD(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await Y}})),c.set(N,O),O}s(l,"getConfidentialApp");async function u(D,N,O={}){if(i.cachedAccount===null)throw i.logger.getToken.info("No cached account found in local state."),new Fg({scopes:N});O.claims&&(i.cachedClaims=O.claims);let Y={account:i.cachedAccount,scopes:N,claims:i.cachedClaims};i.pluginConfiguration.broker.isEnabled&&(Y.tokenQueryParameters||(Y.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(Y.tokenQueryParameters.msal_request_type="consumer_passthrough")),O.proofOfPossessionOptions&&(Y.shrNonce=O.proofOfPossessionOptions.nonce,Y.authenticationScheme="pop",Y.resourceRequestMethod=O.proofOfPossessionOptions.resourceRequestMethod,Y.resourceRequestUri=O.proofOfPossessionOptions.resourceRequestUrl),i.logger.getToken.info("Attempting to acquire token silently");try{return await D.acquireTokenSilent(Y)}catch(ee){throw f2(N,ee,O)}}s(u,"getTokenSilent");function d(D){return D?.tenantId?Zme(D.tenantId,Xme(r)):i.msalConfig.auth.authority}s(d,"calculateRequestAuthority");async function p(D,N,O,Y){var ee,V;let H=null;try{H=await u(D,N,O)}catch(U){if(U.name!=="AuthenticationRequiredError")throw U;if(O.disableAutomaticAuthentication)throw new Fg({scopes:N,getTokenOptions:O,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(H===null)try{H=await Y()}catch(U){throw f2(N,U,O)}return ID(N,H,O),i.cachedAccount=(ee=H?.account)!==null&&ee!==void 0?ee:null,i.logger.getToken.info(Cl(N)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:(V=H.refreshOn)===null||V===void 0?void 0:V.getTime(),tokenType:H.tokenType}}s(p,"withSilentAuthentication");async function m(D,N,O={}){var Y;i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=N;let ee=await l(O);try{let V=await ee.acquireTokenByClientCredential({scopes:D,authority:d(O),azureRegion:qV(),claims:O?.claims});return ID(D,V,O),i.logger.getToken.info(Cl(D)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw f2(D,V,O)}}s(m,"getTokenByClientSecret");async function h(D,N,O={}){var Y;i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=N;let ee=await l(O);try{let V=await ee.acquireTokenByClientCredential({scopes:D,authority:d(O),azureRegion:qV(),claims:O?.claims,clientAssertion:N});return ID(D,V,O),i.logger.getToken.info(Cl(D)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw f2(D,V,O)}}s(h,"getTokenByClientAssertion");async function g(D,N,O={}){var Y;i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=N;let ee=await l(O);try{let V=await ee.acquireTokenByClientCredential({scopes:D,authority:d(O),azureRegion:qV(),claims:O?.claims});return ID(D,V,O),i.logger.getToken.info(Cl(D)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw f2(D,V,O)}}s(g,"getTokenByClientCertificate");async function A(D,N,O={}){i.logger.getToken.info("Attempting to acquire token using device code");let Y=await a(O);return p(Y,D,O,()=>{var ee,V;let H={scopes:D,cancel:(V=(ee=O?.abortSignal)===null||ee===void 0?void 0:ee.aborted)!==null&&V!==void 0?V:!1,deviceCodeCallback:N,authority:d(O),claims:O?.claims},U=Y.acquireTokenByDeviceCode(H);return O.abortSignal&&O.abortSignal.addEventListener("abort",()=>{H.cancel=!0}),U})}s(A,"getTokenByDeviceCode");async function y(D,N,O,Y={}){i.logger.getToken.info("Attempting to acquire token using username and password");let ee=await a(Y);return p(ee,D,Y,()=>{let V={scopes:D,username:N,password:O,authority:d(Y),claims:Y?.claims};return ee.acquireTokenByUsernamePassword(V)})}s(y,"getTokenByUsernamePassword");function E(){if(i.cachedAccount)return oQe(t,i.cachedAccount)}s(E,"getActiveAccount");async function b(D,N,O,Y,ee={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let V;return Y?(i.msalConfig.auth.clientSecret=Y,V=await l(ee)):V=await a(ee),p(V,D,ee,()=>V.acquireTokenByCode({scopes:D,redirectUri:N,code:O,authority:d(ee),claims:ee?.claims}))}s(b,"getTokenByAuthorizationCode");async function w(D,N,O,Y={}){var ee;e0.getToken.info("Attempting to acquire token on behalf of another user"),typeof O=="string"?(e0.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=O):typeof O=="function"?(e0.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=O):(e0.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=O);let V=await l(Y);try{let H=await V.acquireTokenOnBehalfOf({scopes:D,authority:d(Y),claims:Y.claims,oboAssertion:N});return ID(D,H,Y),e0.getToken.info(Cl(D)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:(ee=H.refreshOn)===null||ee===void 0?void 0:ee.getTime(),tokenType:H.tokenType}}catch(H){throw f2(D,H,Y)}}s(w,"getTokenOnBehalfOf");async function R(D,N={}){e0.getToken.info("Attempting to acquire token interactively");let O=await a(N);async function Y(V){var H;e0.verbose("Authentication will resume through the broker");let U=ee();i.pluginConfiguration.broker.parentWindowHandle?U.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):e0.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((H=U.tokenQueryParameters)!==null&&H!==void 0?H:U.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),V?(U.prompt="none",e0.verbose("Attempting broker authentication using the default broker account")):e0.verbose("Attempting broker authentication without the default broker account"),N.proofOfPossessionOptions&&(U.shrNonce=N.proofOfPossessionOptions.nonce,U.authenticationScheme="pop",U.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,U.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl);try{return await O.acquireTokenInteractive(U)}catch(X){if(e0.verbose(`Failed to authenticate through the broker: ${X.message}`),V)return Y(!1);throw X}}s(Y,"getBrokeredToken");function ee(){var V,H;return{openBrowser:s(async U=>{await(await Promise.resolve().then(()=>($V(),FQe))).default(U,{wait:!0,newInstance:!0})},"openBrowser"),scopes:D,authority:d(N),claims:N?.claims,loginHint:N?.loginHint,errorTemplate:(V=N?.browserCustomizationOptions)===null||V===void 0?void 0:V.errorMessage,successTemplate:(H=N?.browserCustomizationOptions)===null||H===void 0?void 0:H.successMessage,prompt:N?.loginHint?"login":"select_account"}}return s(ee,"createBaseInteractiveRequest"),p(O,D,N,async()=>{var V;let H=ee();return i.pluginConfiguration.broker.isEnabled?Y((V=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&V!==void 0?V:!1):(N.proofOfPossessionOptions&&(H.shrNonce=N.proofOfPossessionOptions.nonce,H.authenticationScheme="pop",H.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,H.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl),O.acquireTokenInteractive(H))})}return s(R,"getTokenByInteractiveRequest"),{getActiveAccount:E,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:A,getTokenByUsernamePassword:y,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:w,getTokenByInteractiveRequest:R}}s(Mm,"createMsalClient");var OQe=ci("ClientAssertionCredential"),_D=class{static{s(this,"ClientAssertionCredential")}constructor(e,r,n,i={}){if(!e)throw new nn("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new nn("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new nn("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=vl(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=Mm(r,e,Object.assign(Object.assign({},i),{logger:OQe,tokenCredentialOptions:this.options}))}async getToken(e,r={}){return ls.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wc(this.tenantId,n,this.additionallyAllowedTenantIds,OQe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var QQe=require("node:fs/promises");var A2="WorkloadIdentityCredential",Z8t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],F6=ci(A2),Nv=class{static{s(this,"WorkloadIdentityCredential")}constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let r=vj(Z8t).assigned.join(", ");F6.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&Su(F6,i),!o)throw new nn(`${A2}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new nn(`${A2}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new nn(`${A2}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);F6.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new _D(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${A2}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw F6.info(n),new nn(n)}return F6.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new nn(`${A2}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,QQe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new nn(`${A2}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var UQe="ManagedIdentityCredential - Token Exchange",eLt=ci(UQe),Ahe={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||eLt.info(`${UQe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new Nv(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(r,e)}};var hp=ci("ManagedIdentityCredential"),NI=class{static{s(this,"ManagedIdentityCredential")}constructor(e,r){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let o;typeof e=="string"?(this.clientId=e,o=r??{}):(this.clientId=e?.clientId,o=e??{}),this.resourceId=o?.resourceId,this.objectId=o?.objectId;let a=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(l=>l.value);if(a.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);o.allowInsecureConnection=!0,((n=o.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=o.retryOptions.maxRetries),this.identityClient=new Av(Object.assign(Object.assign({},o),{additionalPolicies:[{policy:sQe(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new bD({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:UV(Cj()),piiLoggingEnabled:(i=o.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:QV(hp)}}}),this.isAvailableIdentityClient=new Av(Object.assign(Object.assign({},o),{retryOptions:{maxRetries:0}}));let c=this.managedIdentityApp.getManagedIdentitySource();if(c==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw hp.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new nn("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(c==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw hp.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new nn(`ManagedIdentityCredential: ${R9e}`);if(hp.info(`Using ${c} managed identity.`),a.length===1){let{key:l,value:u}=a[0];hp.info(`${c} with ${l}: ${u}`)}}async getToken(e,r={}){hp.getToken.info("Using the MSAL provider for Managed Identity.");let n=u9(e);if(!n)throw new nn(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return ls.withSpan("ManagedIdentityCredential.getToken",r,async()=>{var i;try{let o=await Ahe.isAvailable(this.clientId),a=this.managedIdentityApp.getManagedIdentitySource(),c=a==="DefaultToImds"||a==="Imds";if(hp.getToken.info(`MSAL Identity source: ${a}`),o){hp.getToken.info("Using the token exchange managed identity.");let u=await Ahe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new nn("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(hp.getToken.info("Using the IMDS endpoint to probe for availability."),!await aQe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new nn("Attempted to use the IMDS endpoint, but it is not available.");hp.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),hp.getToken.info(Cl(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:(i=l.refreshOn)===null||i===void 0?void 0:i.getTime(),tokenType:"Bearer"}}catch(o){throw hp.getToken.error(Qo(e,o)),o.name==="AuthenticationRequiredError"?o:tLt(o)?new nn(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new nn(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(hp.getToken.info(o),new Fg({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function tLt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(tLt,"isNetworkError");f();f();function LI(t){return Array.isArray(t)?t:[t]}s(LI,"ensureScopes");function RD(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(Qo(t,r)),r}}s(RD,"ensureValidScopeForDevTimeCreds");function jV(t){return t.replace(/\/.default$/,"")}s(jV,"getScopeResource");var qQe=Fe(require("child_process"),1);f();function yhe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(Qo("",r)),r}}s(yhe,"checkSubscription");var Fm=ci("AzureCliCredential"),HQe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(Fm.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{qQe.default.execFile("az",["account","get-access-token","--output","json","--resource",t,...i,...o],{cwd:HQe.getSafeWorkingDir(),shell:!0,timeout:n},(l,u,d)=>{a({stdout:u,stderr:d,error:l})})}catch(l){c(l)}})}},O6=class{static{s(this,"AzureCliCredential")}constructor(e){e?.tenantId&&(Su(Fm,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(yhe(Fm,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=vl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Wc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&Su(Fm,n),this.subscription&&yhe(Fm,this.subscription);let i=typeof e=="string"?e:e[0];return Fm.getToken.info(`Using the scope ${i}`),ls.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{RD(i,Fm);let u=jV(i),d=await HQe.getAzureCliAccessToken(u,n,this.subscription,this.timeout),p=(o=d.stderr)===null||o===void 0?void 0:o.match("(.*)az login --scope(.*)"),m=((a=d.stderr)===null||a===void 0?void 0:a.match("(.*)az login(.*)"))&&!p;if(((c=d.stderr)===null||c===void 0?void 0:c.match("az:(.*)not found"))||((l=d.stderr)===null||l===void 0?void 0:l.startsWith("'az' is not recognized"))){let g=new nn("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw Fm.getToken.info(Qo(e,g)),g}if(m){let g=new nn("Please run 'az login' from a command prompt to authenticate before using this credential.");throw Fm.getToken.info(Qo(e,g)),g}try{let g=d.stdout,A=this.parseRawResponse(g);return Fm.getToken.info(Cl(e)),A}catch(g){throw d.stderr?new nn(d.stderr):g}}catch(u){let d=u.name==="CredentialUnavailableError"?u:new nn(u.message||"Unknown error while trying to retrieve the access token");throw Fm.getToken.info(Qo(e,d)),d}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return Fm.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new nn(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};f();var WQe=Fe(require("child_process"),1);var Lv=ci("AzureDeveloperCliCredential"),$Qe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(Lv.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{WQe.default.execFile("azd",["auth","token","--output","json",...t.reduce((a,c)=>a.concat("--scope",c),[]),...n],{cwd:$Qe.getSafeWorkingDir(),timeout:r},(a,c,l)=>{i({stdout:c,stderr:l,error:a})})}catch(a){o(a)}})}},Q6=class{static{s(this,"AzureDeveloperCliCredential")}constructor(e){e?.tenantId&&(Su(Lv,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=vl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Wc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&Su(Lv,n);let i;return typeof e=="string"?i=[e]:i=e,Lv.getToken.info(`Using the scopes ${e}`),ls.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{i.forEach(m=>{RD(m,Lv)});let u=await $Qe.getAzdAccessToken(i,n,this.timeout),d=((o=u.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd login` to login"))||((a=u.stderr)===null||a===void 0?void 0:a.match("not logged in, run `azd auth login` to login"));if(((c=u.stderr)===null||c===void 0?void 0:c.match("azd:(.*)not found"))||((l=u.stderr)===null||l===void 0?void 0:l.startsWith("'azd' is not recognized"))||u.error&&u.error.code==="ENOENT"){let m=new nn("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Lv.getToken.info(Qo(e,m)),m}if(d){let m=new nn("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Lv.getToken.info(Qo(e,m)),m}try{let m=JSON.parse(u.stdout);return Lv.getToken.info(Cl(e)),{token:m.token,expiresOnTimestamp:new Date(m.expiresOn).getTime(),tokenType:"Bearer"}}catch(m){throw u.stderr?new nn(u.stderr):m}}catch(u){let d=u.name==="CredentialUnavailableError"?u:new nn(u.message||"Unknown error while trying to retrieve the access token");throw Lv.getToken.info(Qo(e,d)),d}})}};f();f();var jQe=Fe(require("child_process"),1),GQe={execFile(t,e,r){return new Promise((n,i)=>{jQe.execFile(t,e,r,(o,a,c)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||o?i(c?new Error(c):o):n(a)})})}};var Mv=ci("AzurePowerShellCredential"),zQe=process.platform==="win32";function YQe(t){return zQe?`${t}.exe`:t}s(YQe,"formatCommand");async function VQe(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await GQe.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(VQe,"runCommands");var KQe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Che={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},rLt=s(t=>t.message.match(`(.*)${KQe.login}(.*)`),"isLoginError"),nLt=s(t=>t.message.match(KQe.installed),"isNotInstalledError"),vhe=[YQe("pwsh")];zQe&&vhe.push(YQe("powershell"));var U6=class{static{s(this,"AzurePowerShellCredential")}constructor(e){e?.tenantId&&(Su(Mv,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=vl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...vhe]){try{await VQe([[i,"/?"]],n)}catch{vhe.shift();continue}let a=(await VQe([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return iLt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return ls.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=Wc(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&Su(Mv,n);try{RD(i,Mv),Mv.getToken.info(`Using the scope ${i}`);let o=jV(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return Mv.getToken.info(Cl(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(nLt(o)){let c=new nn(Che.installed);throw Mv.getToken.info(Qo(i,c)),c}else if(rLt(o)){let c=new nn(Che.login);throw Mv.getToken.info(Qo(i,c)),c}let a=new nn(`${o}. ${Che.troubleshoot}`);throw Mv.getToken.info(Qo(i,a)),a}})}};async function iLt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&Mv.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(iLt,"parseJsonToken");f();var Ehe=ci("ChainedTokenCredential"),q6=class{static{s(this,"ChainedTokenCredential")}constructor(...e){this._sources=[],this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return ls.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw Ehe.getToken.info(Qo(e,l)),l}if(!n&&o.length>0){let c=new XM(o,"ChainedTokenCredential authentication failed.");throw Ehe.getToken.info(Qo(e,c)),c}if(Ehe.getToken.info(`Result for ${i.constructor.name}: ${Cl(e)}`),n===null)throw new nn("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};f();f();var W6=require("node:crypto");var XQe=require("node:fs/promises");var H6="ClientCertificateCredential",JQe=ci(H6),$6=class{static{s(this,"ClientCertificateCredential")}constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${H6}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=vl(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${H6}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${H6}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Mm(r,e,Object.assign(Object.assign({},i),{logger:JQe,tokenCredentialOptions:i}))}async getToken(e,r={}){return ls.withSpan(`${H6}.getToken`,r,async n=>{n.tenantId=Wc(this.tenantId,n,this.additionallyAllowedTenantIds,JQe);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){var e;let r=await oLt(this.certificateConfiguration,(e=this.sendCertificateChain)!==null&&e!==void 0?e:!1),n;return this.certificateConfiguration.certificatePassword!==void 0?n=(0,W6.createPrivateKey)({key:r.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():n=r.certificateContents,{thumbprint:r.thumbprint,thumbprintSha256:r.thumbprintSha256,privateKey:n,x5c:r.x5c}}};async function oLt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,XQe.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,W6.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),d=(0,W6.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:d,thumbprint:u,x5c:o}}s(oLt,"parseCertificate");f();var ZQe=ci("ClientSecretCredential"),j6=class{static{s(this,"ClientSecretCredential")}constructor(e,r,n,i={}){if(!e)throw new nn("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new nn("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new nn("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=vl(i?.additionallyAllowedTenants),this.msalClient=Mm(r,e,Object.assign(Object.assign({},i),{logger:ZQe,tokenCredentialOptions:i}))}async getToken(e,r={}){return ls.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wc(this.tenantId,n,this.additionallyAllowedTenantIds,ZQe);let i=LI(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};f();var sLt=ci("UsernamePasswordCredential"),G6=class{static{s(this,"UsernamePasswordCredential")}constructor(e,r,n,i,o={}){if(!e)throw new nn("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new nn("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new nn("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new nn("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=vl(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=Mm(r,this.tenantId,Object.assign(Object.assign({},o),{tokenCredentialOptions:o??{}}))}async getToken(e,r={}){return ls.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Wc(this.tenantId,n,this.additionallyAllowedTenantIds,sLt);let i=LI(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var aLt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function cLt(){var t;return((t=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&t!==void 0?t:"").split(";")}s(cLt,"getAdditionallyAllowedTenants");var GV="EnvironmentCredential",Fv=ci(GV);function lLt(){var t;let e=((t=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&t!==void 0?t:"").toLowerCase(),r=e==="true"||e==="1";return Fv.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${r}`),r}s(lLt,"getSendCertificateChain");var V6=class{static{s(this,"EnvironmentCredential")}constructor(e){this._credential=void 0;let r=vj(aLt).assigned.join(", ");Fv.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=cLt(),c=lLt(),l=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:a,sendCertificateChain:c});if(n&&Su(Fv,n),n&&i&&o){Fv.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new j6(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,d=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){Fv.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new $6(n,i,{certificatePath:u,certificatePassword:d},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(Fv.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),Fv.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new G6(n,i,p,m,l))}async getToken(e,r={}){return ls.withSpan(`${GV}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return Fv.getToken.info(Cl(e)),i}catch(i){let o=new sI(400,{error:`${GV} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw Fv.getToken.info(Qo(e,o)),o}throw new nn(`${GV} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};var xhe=ci("DefaultAzureCredential");function uLt(t={}){var e,r,n,i;(e=t.retryOptions)!==null&&e!==void 0||(t.retryOptions={maxRetries:5,retryDelayInMs:800});let o=(r=t?.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID,a=(n=t?.workloadIdentityClientId)!==null&&n!==void 0?n:o,c=t?.managedIdentityResourceId,l=process.env.AZURE_FEDERATED_TOKEN_FILE,u=(i=t?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(c){let d=Object.assign(Object.assign({},t),{resourceId:c});return new NI(d)}if(l&&a){let d=Object.assign(Object.assign({},t),{tenantId:u});return new NI(a,d)}if(o){let d=Object.assign(Object.assign({},t),{clientId:o});return new NI(d)}return new NI(t)}s(uLt,"createDefaultManagedIdentityCredential");function dLt(t){var e,r,n;let i=(e=t?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,o=(r=t?.workloadIdentityClientId)!==null&&r!==void 0?r:i,a=process.env.AZURE_FEDERATED_TOKEN_FILE,c=(n=t?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(a&&o){let l=Object.assign(Object.assign({},t),{tenantId:c,clientId:o,tokenFilePath:a});return new Nv(l)}if(c){let l=Object.assign(Object.assign({},t),{tenantId:c});return new Nv(l)}return new Nv(t)}s(dLt,"createDefaultWorkloadIdentityCredential");function fLt(t={}){let e=t.processTimeoutInMs;return new Q6(Object.assign({processTimeoutInMs:e},t))}s(fLt,"createDefaultAzureDeveloperCliCredential");function pLt(t={}){let e=t.processTimeoutInMs;return new O6(Object.assign({processTimeoutInMs:e},t))}s(pLt,"createDefaultAzureCliCredential");function mLt(t={}){let e=t.processTimeoutInMs;return new U6(Object.assign({processTimeoutInMs:e},t))}s(mLt,"createDefaultAzurePowershellCredential");function hLt(t={}){return new V6(t)}s(hLt,"createEnvironmentCredential");var bhe=class{static{s(this,"UnavailableDefaultCredential")}constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return xhe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},kD=class extends q6{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[pLt,mLt,fLt],i=[hLt,dLt,uLt],o=[];if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;default:{let c=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw xhe.warning(c),new Error(c)}}else o=[...i,...n];let a=o.map(c=>{try{return c(e)}catch(l){return xhe.warning(`Skipped ${c.name} because of an error creating the credential: ${l}`),new bhe(c.name,l.message)}});super(...a)}};f();var Tbn=ci("InteractiveBrowserCredential");f();var Lbn=ci("DeviceCodeCredential");f();var gLt="AzurePipelinesCredential",jbn=ci(gLt);f();var tIn=ci("AuthorizationCodeCredential");f();var ALt="OnBehalfOfCredential",dIn=ci(ALt);f();function yLt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(yLt,"getIntegrationId");function MI(t){let e={...tp(t),"X-GitHub-Api-Version":Qy},r=yLt(t.get(dn));return r&&(e["Copilot-Integration-Id"]=r),GM()&&(e["ces-proxy-target"]=h_.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(MI,"getCapiHeaders");function VV(t,e,...r){if(GM()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Oy(t,e,"api",...r)}s(VV,"getCapiUrl");async function y2(t,e){let r=await t.get(Yr).getToken(),n=VV(t,r,e),i=r.token;GM()&&(i=await tUe());let o={Authorization:`Bearer ${i}`,...MI(t)};return await t.get(yn).fetch(new URL(n).href,{method:"GET",headers:o})}s(y2,"fetchCapiUrl");async function eUe(t,e,r){let n=await t.get(Yr).getToken(),i=VV(t,n,e),o=n.token;GM()&&(o=await tUe());let a={Authorization:`Bearer ${o}`,...MI(t)};return await t.get(yn).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(eUe,"postCapiUrl");async function tUe(){let e=await new kD().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(tUe,"getMsBenchToken");f();var rUe=600*1e3,fn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},nUe=new Set([fn.O1Ga,fn.O3Mini,fn.O1Mini,fn.Gemini20Pro,fn.Gemini20Flash]);function Om(t){switch(t){case"edits":case"user":case"inline":return[fn.Gpt4o,fn.Gpt4turbo,fn.Gpt4,fn.O1Mini,fn.O1Ga,fn.Claude35Sonnet,fn.O3Mini,fn.Gemini20Flash,fn.Claude37Sonnet,fn.Claude37SonnetThought,fn.Gpt45,fn.Gpt41,fn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[fn.Gpt4oMini,fn.Gpt4o,fn.Gpt35turbo,fn.Gpt41,fn.CopilotBase];case"gitCommit":return[fn.Gpt4oMini,fn.Gpt4o,fn.Gpt4,fn.Gpt41,fn.CopilotBase];case"codeReview":return[fn.Gpt4,fn.Gpt4o,fn.Gpt41,fn.CopilotBase];case"nesStubs":return[fn.Gpt4oMini,fn.Gpt4o,fn.Gpt41,fn.CopilotBase]}}s(Om,"getSupportedModelFamiliesForPrompt");var KV={textEmbedding3Small:"text-embedding-3-small"},CLt=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),vLt=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:CLt,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),iUe=I.Object({data:I.Array(vLt)}),nf=class{static{s(this,"ModelMetadataProvider")}},zV=class extends nf{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ws(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await y2(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){sn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw sn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new Fy(r)}await this.processModels(r)}async fetchModel(r){let n=await y2(this.ctx,`/models/${r}`);if(!n.ok){sn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await eUe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){sn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>rUe}},YV=class extends nf{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Nt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<rUe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function oUe(t){let e=Wi(t,qt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(oUe,"getUserSelectedModelConfiguration");f();f();f();var PD=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var sUe=Fe(require("node:fs/promises")),JV=Fe(require("node:path"));async function XV(t){return await sUe.readFile(Ihe(t))}s(XV,"readFile");function Ihe(t){return JV.default.resolve(JV.default.extname(__filename)!==".ts"?__dirname:JV.default.resolve(__dirname,"../../dist"),t)}s(Ihe,"locateFile");var DD=Fe(vUe());var iz=new Map;function $i(t="o200k_base"){let e=iz.get(t);return e!==void 0||(e=iz.get("o200k_base"),e!==void 0)?e:new OI}s($i,"getTokenizer");async function xUe(t="o200k_base"){return await C2,$i(t)}s(xUe,"getTokenizerAsync");async function MLt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await XV(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(MLt,"parseTikTokenNoIndex");var Lhe=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,DD.createTokenizer)(await MLt(`resources/${e}.tiktoken.noindex`),(0,DD.getSpecialTokensByEncoder)(e),(0,DD.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new PD("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Mhe=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},FLt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},Nhe=4,OI=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,Nhe)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-Nhe),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-Nhe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?FLt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function EUe(t){try{let e=await Lhe.create(t);iz.set(t,e)}catch{}}s(EUe,"setTokenizer");var C2=(async()=>{iz.set("mock",new Mhe),await Promise.all([EUe("cl100k_base"),EUe("o200k_base")])})();f();f();var OLt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},IUe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Fhe,oz,TUe,Ohe=class extends _n{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Fhe.add(this),oz.set(this,void 0),OLt(this,oz,e,"f"),this.error=r}Errors(){return new jb(IUe(this,Fhe,"m",TUe).call(this))}};oz=new WeakMap,Fhe=new WeakSet,TUe=s(function*(){this.error&&(yield this.error),yield*IUe(this,oz,"f")},"_AssertError_Iterator");function bUe(t,e,r){if(!wi(t,e,r))throw new Ohe(Py(t,e,r))}s(bUe,"AssertValue");function sz(...t){return t.length===3?bUe(t[0],t[1],t[2]):bUe(t[0],[],t[1])}s(sz,"Assert");f();f();f();function QLt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=bo(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=bo(t[r]);return e}s(QLt,"FromObject");function ULt(t){return t.map(e=>bo(e))}s(ULt,"FromArray");function qLt(t){return t.slice()}s(qLt,"FromTypedArray");function HLt(t){return new Map(bo([...t.entries()]))}s(HLt,"FromMap");function WLt(t){return new Set(bo([...t.entries()]))}s(WLt,"FromSet");function $Lt(t){return new Date(t.toISOString())}s($Lt,"FromDate");function bo(t){if(Sn(t))return ULt(t);if($d(t))return $Lt(t);if(hm(t))return qLt(t);if(EPe(t))return HLt(t);if(xPe(t))return WLt(t);if(bi(t))return QLt(t);if(G0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(bo,"Clone");var gp=class extends _n{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Io(t){return Mb(t)?t():bo(t)}s(Io,"FromDefault");function jLt(t,e){return wn(t,"default")?Io(t.default):{}}s(jLt,"FromAny");function GLt(t,e){return{}}s(GLt,"FromArgument");function VLt(t,e){if(t.uniqueItems===!0&&!wn(t,"default"))throw new gp(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!wn(t,"default"))throw new gp(t,"Array with the contains constraint requires a default value");return"default"in t?Io(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>t0(t.items,e)):[]}s(VLt,"FromArray");function zLt(t,e){return wn(t,"default")?Io(t.default):async function*(){}()}s(zLt,"FromAsyncIterator");function YLt(t,e){return wn(t,"default")?Io(t.default):BigInt(0)}s(YLt,"FromBigInt");function KLt(t,e){return wn(t,"default")?Io(t.default):!1}s(KLt,"FromBoolean");function JLt(t,e){if(wn(t,"default"))return Io(t.default);{let r=t0(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(JLt,"FromConstructor");function XLt(t,e){return wn(t,"default")?Io(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(XLt,"FromDate");function ZLt(t,e){return wn(t,"default")?Io(t.default):()=>t0(t.returns,e)}s(ZLt,"FromFunction");function eMt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return t0(n,[...e,...r])}s(eMt,"FromImport");function tMt(t,e){return wn(t,"default")?Io(t.default):t.minimum!==void 0?t.minimum:0}s(tMt,"FromInteger");function rMt(t,e){if(wn(t,"default"))return Io(t.default);{let r=t.allOf.reduce((n,i)=>{let o=t0(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!wi(t,e,r))throw new gp(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(rMt,"FromIntersect");function nMt(t,e){return wn(t,"default")?Io(t.default):function*(){}()}s(nMt,"FromIterator");function iMt(t,e){return wn(t,"default")?Io(t.default):t.const}s(iMt,"FromLiteral");function oMt(t,e){if(wn(t,"default"))return Io(t.default);throw new gp(t,"Never types cannot be created. Consider using a default value.")}s(oMt,"FromNever");function sMt(t,e){if(wn(t,"default"))return Io(t.default);throw new gp(t,"Not types must have a default value")}s(sMt,"FromNot");function aMt(t,e){return wn(t,"default")?Io(t.default):null}s(aMt,"FromNull");function cMt(t,e){return wn(t,"default")?Io(t.default):t.minimum!==void 0?t.minimum:0}s(cMt,"FromNumber");function lMt(t,e){if(wn(t,"default"))return Io(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=t0(o,e));return n}}s(lMt,"FromObject");function uMt(t,e){return wn(t,"default")?Io(t.default):Promise.resolve(t0(t.item,e))}s(uMt,"FromPromise");function dMt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(wn(t,"default"))return Io(t.default);if(r===_y||r===Sy)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=t0(n,e);return o}}s(dMt,"FromRecord");function fMt(t,e){return wn(t,"default")?Io(t.default):t0(vo(t,e),e)}s(fMt,"FromRef");function pMt(t,e){if(wn(t,"default"))return Io(t.default);throw new gp(t,"RegExp types cannot be created. Consider using a default value.")}s(pMt,"FromRegExp");function mMt(t,e){if(t.pattern!==void 0){if(wn(t,"default"))return Io(t.default);throw new gp(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(wn(t,"default"))return Io(t.default);throw new gp(t,"String types with formats must specify a default value")}else return wn(t,"default")?Io(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(mMt,"FromString");function hMt(t,e){return wn(t,"default")?Io(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(hMt,"FromSymbol");function gMt(t,e){if(wn(t,"default"))return Io(t.default);if(!QW(t))throw new gp(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return HP(t)[0]}s(gMt,"FromTemplateLiteral");function AMt(t,e){if(wUe++>TMt)throw new gp(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return wn(t,"default")?Io(t.default):t0(vo(t,e),e)}s(AMt,"FromThis");function yMt(t,e){return wn(t,"default")?Io(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>t0(t.items[n],e))}s(yMt,"FromTuple");function CMt(t,e){if(wn(t,"default"))return Io(t.default)}s(CMt,"FromUndefined");function vMt(t,e){if(wn(t,"default"))return Io(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return t0(t.anyOf[0],e)}s(vMt,"FromUnion");function EMt(t,e){return wn(t,"default")?Io(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(EMt,"FromUint8Array");function xMt(t,e){return wn(t,"default")?Io(t.default):{}}s(xMt,"FromUnknown");function bMt(t,e){if(wn(t,"default"))return Io(t.default)}s(bMt,"FromVoid");function IMt(t,e){if(wn(t,"default"))return Io(t.default);throw new Error("User defined types must specify a default value")}s(IMt,"FromKind");function t0(t,e){let r=ql(t,e),n=t;switch(n[ot]){case"Any":return jLt(n,r);case"Argument":return GLt(n,r);case"Array":return VLt(n,r);case"AsyncIterator":return zLt(n,r);case"BigInt":return YLt(n,r);case"Boolean":return KLt(n,r);case"Constructor":return JLt(n,r);case"Date":return XLt(n,r);case"Function":return ZLt(n,r);case"Import":return eMt(n,r);case"Integer":return tMt(n,r);case"Intersect":return rMt(n,r);case"Iterator":return nMt(n,r);case"Literal":return iMt(n,r);case"Never":return oMt(n,r);case"Not":return sMt(n,r);case"Null":return aMt(n,r);case"Number":return cMt(n,r);case"Object":return lMt(n,r);case"Promise":return uMt(n,r);case"Record":return dMt(n,r);case"Ref":return fMt(n,r);case"RegExp":return pMt(n,r);case"String":return mMt(n,r);case"Symbol":return hMt(n,r);case"TemplateLiteral":return gMt(n,r);case"This":return AMt(n,r);case"Tuple":return yMt(n,r);case"Undefined":return CMt(n,r);case"Union":return vMt(n,r);case"Uint8Array":return EMt(n,r);case"Unknown":return xMt(n,r);case"Void":return bMt(n,r);default:if(!jd.Has(n[ot]))throw new gp(n,"Unknown type");return IMt(n,r)}}s(t0,"Visit");var TMt=512,wUe=0;function Qm(...t){return wUe=0,t.length===2?t0(t[0],t[1]):t0(t[0],[])}s(Qm,"Create");var az=class extends _n{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function wMt(t,e,r){if(t[ot]==="Object"&&typeof r=="object"&&!tv(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,d])=>{let p=d[ot]==="Literal"&&d.const===r[u]?c:0,m=wi(d,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return wi(t,e,r)?1:0}s(wMt,"ScoreUnion");function SMt(t,e,r){let n=t.anyOf.map(a=>vo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=wMt(a,e,r);c>o&&(i=a,o=c)}return i}s(SMt,"SelectUnion");function _Mt(t,e,r){if("default"in t)return typeof r=="function"?t.default:bo(t.default);{let n=SMt(t,e,r);return Y6(n,e,r)}}s(_Mt,"CastUnion");function RMt(t,e,r){return wi(t,e,r)?bo(r):Qm(t,e)}s(RMt,"DefaultClone");function kMt(t,e,r){return wi(t,e,r)?r:Qm(t,e)}s(kMt,"Default");function PMt(t,e,r){if(wi(t,e,r))return bo(r);let n=Sn(r)?bo(r):Qm(t,e),i=rn(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(rn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>$g(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!wi(t,e,c))throw new az(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(PMt,"FromArray");function DMt(t,e,r){if(wi(t,e,r))return Qm(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=$g(a,e,r.prototype[o]));return i}s(DMt,"FromConstructor");function BMt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return $g(i,[...e,...n],r)}s(BMt,"FromImport");function NMt(t,e,r){let n=Qm(t,e),i=bi(n)&&bi(r)?{...n,...r}:r;return wi(t,e,i)?i:Qm(t,e)}s(NMt,"FromIntersect");function LMt(t,e,r){throw new az(t,"Never types cannot be cast")}s(LMt,"FromNever");function MMt(t,e,r){if(wi(t,e,r))return r;if(r===null||typeof r!="object")return Qm(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=$g(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=$g(t.additionalProperties,e,r[a]))}return i}s(MMt,"FromObject");function FMt(t,e,r){if(wi(t,e,r))return bo(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Qm(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=$g(i,e,c);return o}s(FMt,"FromRecord");function OMt(t,e,r){return $g(vo(t,e),e,r)}s(OMt,"FromRef");function QMt(t,e,r){return $g(vo(t,e),e,r)}s(QMt,"FromThis");function UMt(t,e,r){return wi(t,e,r)?bo(r):Sn(r)?t.items===void 0?[]:t.items.map((n,i)=>$g(n,e,r[i])):Qm(t,e)}s(UMt,"FromTuple");function qMt(t,e,r){return wi(t,e,r)?bo(r):_Mt(t,e,r)}s(qMt,"FromUnion");function $g(t,e,r){let n=fo(t.$id)?ql(t,e):e,i=t;switch(t[ot]){case"Array":return PMt(i,n,r);case"Constructor":return DMt(i,n,r);case"Import":return BMt(i,n,r);case"Intersect":return NMt(i,n,r);case"Never":return LMt(i,n,r);case"Object":return MMt(i,n,r);case"Record":return FMt(i,n,r);case"Ref":return OMt(i,n,r);case"This":return QMt(i,n,r);case"Tuple":return UMt(i,n,r);case"Union":return qMt(i,n,r);case"Date":case"Symbol":case"Uint8Array":return RMt(t,e,r);default:return kMt(i,n,r)}}s($g,"Visit");function Y6(...t){return t.length===3?$g(t[0],t[1],t[2]):$g(t[0],[],t[1])}s(Y6,"Cast");f();function HMt(t){return Ob(t)&&t[ot]!=="Unsafe"}s(HMt,"IsCheckable");function WMt(t,e,r){return Sn(r)?r.map(n=>r0(t.items,e,n)):r}s(WMt,"FromArray");function $Mt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return r0(i,[...e,...n],r)}s($Mt,"FromImport");function jMt(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>r0(c,e,bo(r))).reduce((c,l)=>bi(l)?{...c,...l}:l,{});if(!bi(r)||!bi(o)||!Ob(n))return o;let a=Of(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||wi(n,e,r[c])&&(o[c]=r0(n,e,r[c]));return o}s(jMt,"FromIntersect");function GMt(t,e,r){if(!bi(r)||Sn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(wn(t.properties,i)){r[i]=r0(t.properties[i],e,r[i]);continue}if(Ob(n)&&wi(n,e,r[i])){r[i]=r0(n,e,r[i]);continue}delete r[i]}return r}s(GMt,"FromObject");function VMt(t,e,r){if(!bi(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=r0(a,e,r[l]);continue}if(Ob(n)&&wi(n,e,r[l])){r[l]=r0(n,e,r[l]);continue}delete r[l]}return r}s(VMt,"FromRecord");function zMt(t,e,r){return r0(vo(t,e),e,r)}s(zMt,"FromRef");function YMt(t,e,r){return r0(vo(t,e),e,r)}s(YMt,"FromThis");function KMt(t,e,r){if(!Sn(r))return r;if(js(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=r0(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(KMt,"FromTuple");function JMt(t,e,r){for(let n of t.anyOf)if(HMt(n)&&wi(n,e,r))return r0(n,e,r);return r}s(JMt,"FromUnion");function r0(t,e,r){let n=fo(t.$id)?ql(t,e):e,i=t;switch(i[ot]){case"Array":return WMt(i,n,r);case"Import":return $Mt(i,n,r);case"Intersect":return jMt(i,n,r);case"Object":return GMt(i,n,r);case"Record":return VMt(i,n,r);case"Ref":return zMt(i,n,r);case"This":return YMt(i,n,r);case"Tuple":return KMt(i,n,r);case"Union":return JMt(i,n,r);default:return r}}s(r0,"Visit");function cz(...t){return t.length===3?r0(t[0],t[1],t[2]):r0(t[0],[],t[1])}s(cz,"Clean");f();function lz(t){return fo(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(lz,"IsStringNumeric");function XMt(t){return vu(t)||wy(t)||rn(t)}s(XMt,"IsValueToString");function K6(t){return t===!0||rn(t)&&t===1||vu(t)&&t===BigInt("1")||fo(t)&&(t.toLowerCase()==="true"||t==="1")}s(K6,"IsValueTrue");function J6(t){return t===!1||rn(t)&&(t===0||Object.is(t,-0))||vu(t)&&t===BigInt("0")||fo(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(J6,"IsValueFalse");function ZMt(t){return fo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(ZMt,"IsTimeStringWithTimeZone");function e9t(t){return fo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(e9t,"IsTimeStringWithoutTimeZone");function t9t(t){return fo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(t9t,"IsDateTimeStringWithTimeZone");function r9t(t){return fo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(r9t,"IsDateTimeStringWithoutTimeZone");function n9t(t){return fo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(n9t,"IsDateString");function i9t(t,e){let r=_Ue(t);return r===e?r:t}s(i9t,"TryConvertLiteralString");function o9t(t,e){let r=RUe(t);return r===e?r:t}s(o9t,"TryConvertLiteralNumber");function s9t(t,e){let r=SUe(t);return r===e?r:t}s(s9t,"TryConvertLiteralBoolean");function a9t(t,e){return fo(t.const)?i9t(e,t.const):rn(t.const)?o9t(e,t.const):wy(t.const)?s9t(e,t.const):e}s(a9t,"TryConvertLiteral");function SUe(t){return K6(t)?!0:J6(t)?!1:t}s(SUe,"TryConvertBoolean");function c9t(t){let e=s(r=>r.split(".")[0],"truncateInteger");return lz(t)?BigInt(e(t)):rn(t)?BigInt(Math.trunc(t)):J6(t)?BigInt(0):K6(t)?BigInt(1):t}s(c9t,"TryConvertBigInt");function _Ue(t){return rv(t)&&t.description!==void 0?t.description.toString():XMt(t)?t.toString():t}s(_Ue,"TryConvertString");function RUe(t){return lz(t)?parseFloat(t):K6(t)?1:J6(t)?0:t}s(RUe,"TryConvertNumber");function l9t(t){return lz(t)?parseInt(t):rn(t)?Math.trunc(t):K6(t)?1:J6(t)?0:t}s(l9t,"TryConvertInteger");function u9t(t){return fo(t)&&t.toLowerCase()==="null"?null:t}s(u9t,"TryConvertNull");function d9t(t){return fo(t)&&t==="undefined"?void 0:t}s(d9t,"TryConvertUndefined");function f9t(t){return $d(t)?t:rn(t)?new Date(t):K6(t)?new Date(1):J6(t)?new Date(0):lz(t)?new Date(parseInt(t)):e9t(t)?new Date(`1970-01-01T${t}.000Z`):ZMt(t)?new Date(`1970-01-01T${t}`):r9t(t)?new Date(`${t}.000Z`):t9t(t)?new Date(t):n9t(t)?new Date(`${t}T00:00:00.000Z`):t}s(f9t,"TryConvertDate");function p9t(t,e,r){return(Sn(r)?r:[r]).map(i=>jg(t.items,e,i))}s(p9t,"FromArray");function m9t(t,e,r){return c9t(r)}s(m9t,"FromBigInt");function h9t(t,e,r){return SUe(r)}s(h9t,"FromBoolean");function g9t(t,e,r){return f9t(r)}s(g9t,"FromDate");function A9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return jg(i,[...e,...n],r)}s(A9t,"FromImport");function y9t(t,e,r){return l9t(r)}s(y9t,"FromInteger");function C9t(t,e,r){return t.allOf.reduce((n,i)=>jg(i,e,n),r)}s(C9t,"FromIntersect");function v9t(t,e,r){return a9t(t,r)}s(v9t,"FromLiteral");function E9t(t,e,r){return u9t(r)}s(E9t,"FromNull");function x9t(t,e,r){return RUe(r)}s(x9t,"FromNumber");function b9t(t,e,r){if(!bi(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))wn(r,n)&&(r[n]=jg(t.properties[n],e,r[n]));return r}s(b9t,"FromObject");function I9t(t,e,r){if(!bi(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=jg(o,e,c);return r}s(I9t,"FromRecord");function T9t(t,e,r){return jg(vo(t,e),e,r)}s(T9t,"FromRef");function w9t(t,e,r){return _Ue(r)}s(w9t,"FromString");function S9t(t,e,r){return fo(r)||rn(r)?Symbol(r):r}s(S9t,"FromSymbol");function _9t(t,e,r){return jg(vo(t,e),e,r)}s(_9t,"FromThis");function R9t(t,e,r){return Sn(r)&&!js(t.items)?r.map((i,o)=>o<t.items.length?jg(t.items[o],e,i):i):r}s(R9t,"FromTuple");function k9t(t,e,r){return d9t(r)}s(k9t,"FromUndefined");function P9t(t,e,r){for(let n of t.anyOf){let i=jg(n,e,bo(r));if(wi(n,e,i))return i}return r}s(P9t,"FromUnion");function jg(t,e,r){let n=ql(t,e),i=t;switch(t[ot]){case"Array":return p9t(i,n,r);case"BigInt":return m9t(i,n,r);case"Boolean":return h9t(i,n,r);case"Date":return g9t(i,n,r);case"Import":return A9t(i,n,r);case"Integer":return y9t(i,n,r);case"Intersect":return C9t(i,n,r);case"Literal":return v9t(i,n,r);case"Null":return E9t(i,n,r);case"Number":return x9t(i,n,r);case"Object":return b9t(i,n,r);case"Record":return I9t(i,n,r);case"Ref":return T9t(i,n,r);case"String":return w9t(i,n,r);case"Symbol":return S9t(i,n,r);case"This":return _9t(i,n,r);case"Tuple":return R9t(i,n,r);case"Undefined":return k9t(i,n,r);case"Union":return P9t(i,n,r);default:return r}}s(jg,"Visit");function uz(...t){return t.length===3?jg(t[0],t[1],t[2]):jg(t[0],[],t[1])}s(uz,"Convert");f();function kUe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!wi(e,r,n))throw new t4(e,n,Py(e,r,n).First());return dv(e,r)?r4(e,r,n):n}s(kUe,"Decode");f();function Ov(t,e){let r=wn(t,"default")?t.default:void 0,n=Mb(r)?r():bo(r);return js(e)?n:bi(e)&&bi(n)?Object.assign(n,e):e}s(Ov,"ValueOrDefault");function Qhe(t){return Ob(t)&&"default"in t}s(Qhe,"HasDefaultProperty");function D9t(t,e,r){if(Sn(r)){for(let i=0;i<r.length;i++)r[i]=sf(t.items,e,r[i]);return r}let n=Ov(t,r);if(!Sn(n))return n;for(let i=0;i<n.length;i++)n[i]=sf(t.items,e,n[i]);return n}s(D9t,"FromArray");function B9t(t,e,r){return $d(r)?r:Ov(t,r)}s(B9t,"FromDate");function N9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return sf(i,[...e,...n],r)}s(N9t,"FromImport");function L9t(t,e,r){let n=Ov(t,r);return t.allOf.reduce((i,o)=>{let a=sf(o,e,n);return bi(a)?{...i,...a}:a},{})}s(L9t,"FromIntersect");function M9t(t,e,r){let n=Ov(t,r);if(!bi(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=sf(t.properties[o],e,n[o]);js(a)||(n[o]=sf(t.properties[o],e,n[o]))}if(!Qhe(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=sf(t.additionalProperties,e,n[o]));return n}s(M9t,"FromObject");function F9t(t,e,r){let n=Ov(t,r);if(!bi(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&Qhe(a)&&(n[l]=sf(a,e,n[l]));if(!Qhe(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=sf(i,e,n[l]));return n}s(F9t,"FromRecord");function O9t(t,e,r){return sf(vo(t,e),e,Ov(t,r))}s(O9t,"FromRef");function Q9t(t,e,r){return sf(vo(t,e),e,r)}s(Q9t,"FromThis");function U9t(t,e,r){let n=Ov(t,r);if(!Sn(n)||js(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=sf(i[a],e,n[a]));return n}s(U9t,"FromTuple");function q9t(t,e,r){let n=Ov(t,r);for(let i of t.anyOf){let o=sf(i,e,bo(n));if(wi(i,e,o))return o}return n}s(q9t,"FromUnion");function sf(t,e,r){let n=ql(t,e),i=t;switch(i[ot]){case"Array":return D9t(i,n,r);case"Date":return B9t(i,n,r);case"Import":return N9t(i,n,r);case"Intersect":return L9t(i,n,r);case"Object":return M9t(i,n,r);case"Record":return F9t(i,n,r);case"Ref":return O9t(i,n,r);case"This":return Q9t(i,n,r);case"Tuple":return U9t(i,n,r);case"Union":return q9t(i,n,r);default:return Ov(i,r)}}s(sf,"Visit");function dz(...t){return t.length===3?sf(t[0],t[1],t[2]):sf(t[0],[],t[1])}s(dz,"Default");f();f();var Gg={};ma(Gg,{Delete:()=>W9t,Format:()=>X6,Get:()=>j9t,Has:()=>$9t,Set:()=>H9t,ValuePointerRootDeleteError:()=>pz,ValuePointerRootSetError:()=>fz});f();var fz=class extends _n{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},pz=class extends _n{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function PUe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(PUe,"Escape");function*X6(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield PUe(t.slice(e,r))),e=n+1):r=n;yield PUe(t.slice(e))}s(X6,"Format");function H9t(t,e,r){if(e==="")throw new fz(t,e,r);let[n,i,o]=[null,t,""];for(let a of X6(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(H9t,"Set");function W9t(t,e){if(e==="")throw new pz(t,e);let[r,n,i]=[null,t,""];for(let o of X6(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(W9t,"Delete");function $9t(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of X6(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s($9t,"Has");function j9t(t,e){if(e==="")return t;let r=t;for(let n of X6(e)){if(r[n]===void 0)return;r=r[n]}return r}s(j9t,"Get");f();function G9t(t,e){if(!bi(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>v2(t[i],e[i]))}s(G9t,"ObjectType");function V9t(t,e){return $d(e)&&t.getTime()===e.getTime()}s(V9t,"DateType");function z9t(t,e){return!Sn(e)||t.length!==e.length?!1:t.every((r,n)=>v2(r,e[n]))}s(z9t,"ArrayType");function Y9t(t,e){return!hm(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>v2(r,e[n]))}s(Y9t,"TypedArrayType");function K9t(t,e){return t===e}s(K9t,"ValueType");function v2(t,e){if($d(t))return V9t(t,e);if(hm(t))return Y9t(t,e);if(Sn(t))return z9t(t,e);if(bi(t))return G9t(t,e);if(G0(t))return K9t(t,e);throw new Error("ValueEquals: Unable to compare value")}s(v2,"Equal");var J9t=Lo({type:ro("insert"),path:Gd(),value:Sg()}),X9t=Lo({type:ro("update"),path:Gd(),value:Sg()}),Z9t=Lo({type:ro("delete"),path:Gd()}),BUe=No([J9t,X9t,Z9t]),mz=class extends _n{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function hz(t,e){return{type:"update",path:t,value:e}}s(hz,"CreateUpdate");function NUe(t,e){return{type:"insert",path:t,value:e}}s(NUe,"CreateInsert");function LUe(t){return{type:"delete",path:t}}s(LUe,"CreateDelete");function DUe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new mz(t,"Cannot diff objects with symbols")}s(DUe,"AssertDiffable");function*e6t(t,e,r){if(DUe(e),DUe(r),!Hle(r))return yield hz(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)wn(e,o)||(yield NUe(`${t}/${o}`,r[o]));for(let o of n)wn(r,o)&&(v2(e,r)||(yield*gz(`${t}/${o}`,e[o],r[o])));for(let o of n)wn(r,o)||(yield LUe(`${t}/${o}`))}s(e6t,"ObjectType");function*t6t(t,e,r){if(!Sn(r))return yield hz(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*gz(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield NUe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield LUe(`${t}/${n}`))}s(t6t,"ArrayType");function*r6t(t,e,r){if(!hm(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield hz(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*gz(`${t}/${n}`,e[n],r[n])}s(r6t,"TypedArrayType");function*n6t(t,e,r){e!==r&&(yield hz(t,r))}s(n6t,"ValueType");function*gz(t,e,r){if(Hle(e))return yield*e6t(t,e,r);if(Sn(e))return yield*t6t(t,e,r);if(hm(e))return yield*r6t(t,e,r);if(G0(e))return yield*n6t(t,e,r);throw new mz(e,"Unable to diff value")}s(gz,"Visit");function MUe(t,e){return[...gz("",t,e)]}s(MUe,"Diff");function i6t(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(i6t,"IsRootUpdate");function o6t(t){return t.length===0}s(o6t,"IsIdentity");function FUe(t,e){if(i6t(e))return bo(e[0].value);if(o6t(e))return bo(t);let r=bo(t);for(let n of e)switch(n.type){case"insert":{Gg.Set(r,n.path,n.value);break}case"update":{Gg.Set(r,n.path,n.value);break}case"delete":{Gg.Delete(r,n.path);break}}return r}s(FUe,"Patch");f();function OUe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=dv(e,r)?i4(e,r,n):n;if(!wi(e,r,i))throw new n4(e,i,Py(e,r,i).First());return i}s(OUe,"Encode");f();function Az(t){return bi(t)&&!Sn(t)}s(Az,"IsStandardObject");var yz=class extends _n{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function s6t(t,e,r,n){if(!Az(r))Gg.Set(t,e,bo(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Uhe(t,`${e}/${a}`,r[a],n[a])}}s(s6t,"ObjectType");function a6t(t,e,r,n){if(!Sn(r))Gg.Set(t,e,bo(n));else{for(let i=0;i<n.length;i++)Uhe(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(a6t,"ArrayType");function c6t(t,e,r,n){if(hm(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else Gg.Set(t,e,bo(n))}s(c6t,"TypedArrayType");function l6t(t,e,r,n){r!==n&&Gg.Set(t,e,n)}s(l6t,"ValueType");function Uhe(t,e,r,n){if(Sn(n))return a6t(t,e,r,n);if(hm(n))return c6t(t,e,r,n);if(Az(n))return s6t(t,e,r,n);if(G0(n))return l6t(t,e,r,n)}s(Uhe,"Visit");function QUe(t){return hm(t)||G0(t)}s(QUe,"IsNonMutableValue");function u6t(t,e){return Az(t)&&Sn(e)||Sn(t)&&Az(e)}s(u6t,"IsMismatchedValue");function UUe(t,e){if(QUe(t)||QUe(e))throw new yz("Only object and array types can be mutated at the root level");if(u6t(t,e))throw new yz("Cannot assign due type mismatch of assignable values");Uhe(t,"",t,e)}s(UUe,"Mutate");f();var Cz=class extends _n{static{s(this,"ParseError")}constructor(e){super(e)}},qhe;(function(t){let e=new Map([["Assert",(o,a,c)=>(sz(o,a,c),c)],["Cast",(o,a,c)=>Y6(o,a,c)],["Clean",(o,a,c)=>cz(o,a,c)],["Clone",(o,a,c)=>bo(c)],["Convert",(o,a,c)=>uz(o,a,c)],["Decode",(o,a,c)=>dv(o,a)?r4(o,a,c):c],["Default",(o,a,c)=>dz(o,a,c)],["Encode",(o,a,c)=>dv(o,a)?i4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(qhe||(qhe={}));var qUe=["Clone","Clean","Default","Convert","Assert","Decode"];function d6t(t,e,r,n){return t.reduce((i,o)=>{let a=qhe.Get(o);if(js(a))throw new Cz(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(d6t,"ParseValue");function HUe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Sn(t[0])?[t[0],t[1],[],t[2]]:[qUe,t[0],t[1],t[2]]:t.length===2?[qUe,t[0],[],t[1]]:(()=>{throw new Cz("Invalid Arguments")})();return d6t(e,r,n,i)}s(HUe,"Parse");f();var oC={};ma(oC,{Assert:()=>sz,Cast:()=>Y6,Check:()=>wi,Clean:()=>cz,Clone:()=>bo,Convert:()=>uz,Create:()=>Qm,Decode:()=>kUe,Default:()=>dz,Diff:()=>MUe,Edit:()=>BUe,Encode:()=>OUe,Equal:()=>v2,Errors:()=>Py,Hash:()=>$b,Mutate:()=>UUe,Parse:()=>HUe,Patch:()=>FUe,ValueErrorIterator:()=>jb});f();var f6t="gpt-4o-copilot",Um=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ws(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return f6t}parseModelsResponse(e){try{return oC.Parse(iUe,e)}catch(r){sn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await y2(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(sn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=oUe(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&sn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=Wi(this._ctx,qt.DebugOverrideEngine)||Wi(this._ctx,qt.DebugOverrideEngineLegacy);if(i)return new QI(i,"override");let o=e?this._ctx.get(Nt).customEngine(e):"",a=e?this._ctx.get(Nt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new QI(o,"exp"):new QI(n,"modelpicker"):o?new QI(o,"exp"):this.customModels.length>0?new QI(this.customModels[0],"custommodel"):new QI(r,"default")}},QI=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function UI(t,e=void 0){let r=t.get(Um),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(UI,"getEngineRequestInfo");f();f();var To=class{static{s(this,"FileSystem")}};var sqe=Fe(oqe());function aqe(t){return t!==void 0&&t!==0}s(aqe,"isRepoInfo");function cqe(t){if(t===void 0||t===0)return"";let e=Qv(t);if(e==="github/github")return e;let r=O6t(t)?.toLowerCase();return r!==void 0?r:""}s(cqe,"getDogFood");function Qv(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(Qv,"tryGetGitHubNWO");function O6t(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(O6t,"tryGetADONWO");function qI(t,e){let r=gd(e);return Q6t(t,r)}s(qI,"extractRepoInfoInBackground");var Q6t=W6t(U6t,1e4);async function U6t(t,e){let r=K8e(e);if(!r)return;let n=await q6t(t,r);if(!n)return;let i=t.get(To),o=Mo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=H6t(a)??"",l=jhe(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(U6t,"extractRepoInfo");function jhe(t){let e;try{if(e=(0,sqe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(jhe,"parseRepoUrl");async function q6t(t,e){let r=e+"_add_to_make_longer",n=t.get(To);for(;e!=="file:///"&&e.length<r.length;){let i=Mo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=gd(e)}}s(q6t,"getRepoBaseUri");function H6t(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=l.match(n);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(H6t,"getRepoUrlFromConfigText");var $he=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function W6t(t,e){let r=new Ur(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new $he(u)),n.delete(a)}),0}}s(W6t,"computeInBackgroundAndMemoize");f();var Z6=500,lqe=8192-Z6,uqe=4,vz=10,dqe=1e3*5,Ez={prefix:35,suffix:15,stableContext:35,volatileContext:15},$6t={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function eF(t){return t=t.toLowerCase(),$6t[t]??t}s(eF,"normalizeLanguageId");var Ghe=class{constructor(e){this.ctx=e;this.cache=new Ur(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Vhe(()=>this.ctx.get(Mg).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Vhe=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function G6t(t){return"uri"in t}s(G6t,"isCompletionsFiltersInfo");var Nt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Ghe(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=qr.createAndMarkAsIssued(),n=void 0){if(r instanceof Ly)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&G6t(e)?qI(this.ctx,e.uri):void 0,o=Qv(i)??"",a=cqe(i)??"",c=e?.languageId??"",l=UI(this.ctx).modelId;n??=await this.ctx.get(Yr).getToken();let u=H8e(n),d=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,A={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},y=this.getGranularityDirectory(),E=this.makeFilterSettings(A),b=y.extendFilters(E),w=await this.getExpConfig(b.newFilterSettings,g);y.update(E,+(w.variables.copilotbycallbuckets??NaN),+(w.variables.copilottimeperiodsizeinh??NaN));let R=y.extendFilters(E),D=R.newFilterSettings,N=await this.getExpConfig(D,g),O=new Promise(Y=>setTimeout(Y,t.upcomingDynamicFilterCheckDelayMs));for(let Y of R.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(ee=>setTimeout(ee,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Y,g)});return this.prepareForUpcomingFilters(D,g),new Ly(r.properties,r.measurements,r.issuedTime,{filters:D,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ss).machineId;this.granularityDirectory=new pj(e,this.ctx.get(Uy))}return this.granularityDirectory}makeFilterSettings(e){return new zS({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return fm.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new zS({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=_4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??Ez.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??vz}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??lqe+Z6}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??dqe}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??Ez.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??Ez.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};f();f();var bz=Fe(xz());var Yhe={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function Ap(t){return t in Yhe&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(Ap,"isSupportedLanguageId");function Iz(t){if(!(t in Yhe))throw new Error(`Unrecognized language: ${t}`);return Yhe[t]}s(Iz,"languageIdToWasmLanguage");var zhe=new Map;async function V6t(t){let e;try{e=await XV(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new PD(`Could not load tree-sitter-${t}.wasm`,r):r}return bz.default.Language.load(e)}s(V6t,"loadWasmLanguage");function Jhe(t){let e=Iz(t);if(!zhe.has(e)){let r=V6t(e);zhe.set(e,r)}return zhe.get(e)}s(Jhe,"getLanguage");var Khe=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function Uv(t,e){await bz.default.init({locateFile:s(o=>Ihe(o),"locateFile")});let r;try{r=new bz.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Khe(`Could not init Parse for language <${t}>`,o):o}let n=await Jhe(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(Uv,"parseTreeSitter");function fqe(t){switch(Iz(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(fqe,"getBlockCloseToken");function z6t(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(z6t,"innerQuery");var Y6t=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function pqe(t){return z6t([Y6t],t).length==1}s(pqe,"queryPythonIsDocstring");var aC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},vd=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return tF.languageIds.has(e)||rF.languageIds.has(e)||nF.languageIds.has(e)||iF.languageIds.has(e)||oF.languageIds.has(e)||sF.languageIds.has(e)||aF.languageIds.has(e)||cF.languageIds.has(e)}static create(e,r,n,i){if(tF.languageIds.has(e))return new tF(e,r,n,i);if(rF.languageIds.has(e))return new rF(e,r,n,i);if(nF.languageIds.has(e))return new nF(e,r,n,i);if(sF.languageIds.has(e))return new sF(e,r,n,i);if(iF.languageIds.has(e))return new iF(e,r,n,i);if(oF.languageIds.has(e))return new oF(e,r,n,i);if(aF.languageIds.has(e))return new aF(e,r,n,i);if(cF.languageIds.has(e))return new cF(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await Uv(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Xhe=class t extends aC{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},tF=class extends vd{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Xhe(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Zhe=class t extends aC{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},rF=class extends vd{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Zhe(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},ege=class t extends aC{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},nF=class extends vd{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new ege(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},tge=class t extends aC{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},iF=class extends vd{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new tge(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},rge=class t extends aC{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},oF=class extends vd{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new rge(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},nge=class t extends aC{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},sF=class extends vd{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new nge(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},ige=class t extends aC{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},aF=class extends vd{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new ige(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},oge=class t extends aC{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},cF=class extends vd{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new oge(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};f();function K6t(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(K6t,"getProxyFromEnvironment");function J6t(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(J6t,"getRejectUnauthorizedFromEnvironment");var mqe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function hqe(t){let e=K6t(t),r=lF({proxy:e,proxyStrictSSL:J6t(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(hqe,"getHttpSettingsFromEnvironment");function lF(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||X6t(n,i)}}catch{return{...t,proxy:""}}}s(lF,"normalizeHttpSettings");function X6t(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(X6t,"getAuth");f();var gqe=Fe(di());var Oa=class extends gqe.Emitter{static{s(this,"Emitter")}get event(){return super.event}};var sge={};ma(sge,{activationEvents:()=>yFt,badges:()=>AFt,browser:()=>CFt,bugs:()=>lFt,build:()=>nFt,buildType:()=>iFt,categories:()=>hFt,contributes:()=>age,default:()=>wFt,dependencies:()=>IFt,description:()=>tFt,devDependencies:()=>bFt,displayName:()=>eFt,enabledApiProposals:()=>EFt,engines:()=>mFt,extensionPack:()=>pFt,homepage:()=>aFt,icon:()=>dFt,keywords:()=>gFt,license:()=>cFt,main:()=>vFt,name:()=>Z6t,overrides:()=>TFt,preview:()=>sFt,pricing:()=>fFt,publisher:()=>oFt,qna:()=>uFt,scripts:()=>xFt,version:()=>rFt});var Z6t="copilot",eFt="GitHub Copilot",tFt="Your AI pair programmer",rFt="1.352.0",nFt="1712",iFt="prod",oFt="GitHub",sFt=!1,aFt="https://github.com/features/copilot?editor=vscode",cFt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",lFt={url:"https://github.com/microsoft/vscode/issues"},uFt="https://github.com/github-community/community/discussions/categories/copilot",dFt="assets/Copilot-App-Icon.png",fFt="Trial",pFt=["GitHub.copilot-chat","GitHub.copilot"],mFt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},hFt=["AI","Chat","Programming Languages","Machine Learning"],gFt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],AFt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],yFt=["onStartupFinished"],CFt="./dist/web",vFt="./dist/extension",EFt=["inlineCompletionsAdditions"],age={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},xFt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},bFt={"@azure/identity":"^4.10.1","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.15.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.0",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},IFt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},TFt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},wFt={name:Z6t,displayName:eFt,description:tFt,version:rFt,build:nFt,buildType:iFt,publisher:oFt,preview:sFt,homepage:aFt,license:cFt,bugs:lFt,qna:uFt,icon:dFt,pricing:fFt,extensionPack:pFt,engines:mFt,categories:hFt,keywords:gFt,badges:AFt,activationEvents:yFt,browser:CFt,main:vFt,enabledApiProposals:EFt,contributes:age,scripts:xFt,devDependencies:bFt,dependencies:IFt,overrides:TFt};var qt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function yqe(t){return["server","parsingandserver"].includes(t)}s(yqe,"shouldDoServerTrimming");var Vg=class{static{s(this,"BlockModeConfig")}},ND=class extends Vg{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Nt).overrideBlockMode(n);if(i)return Aqe(i,r);let o=e.get(Nt).enableProgressiveReveal(n);return Wi(e,qt.AlwaysRequestMultiline)??o?Aqe("moremultiline",r):r=="ruby"?"parsing":Ap(r)?"parsingandserver":"server"}};function SFt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(SFt,"blockModeRequiresTreeSitter");function Aqe(t,e){return t==="moremultiline"&&vd.isSupported(e)?t:SFt(t)&&!Ap(e)?"server":t}s(Aqe,"toApplicableBlockMode");var gl=class{static{s(this,"ConfigProvider")}},LD=class extends gl{constructor(){super(...arguments);this.onDidChangeCopilotSettings=s(()=>({dispose:s(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{s(this,"DefaultsOnlyConfigProvider")}getConfig(r){return RFt(r)}getOptionalConfig(r){return kFt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},E2=class extends gl{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new Oa;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new Oa;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,i]of Object.entries(r))i!==void 0?this.overrides.set(n,i):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=lF(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[qt.ShowEditorCompletions,qt.EnableAutoCompletions,qt.DelayCompletions,qt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function _Ft(t){return t?.type==="object"&&"properties"in t}s(_Ft,"isContributesObject");function Cqe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(Cqe,"getConfigKeyRecursively");function RFt(t){if(BD.has(t))return BD.get(t);throw new Error(`Missing config default value: ${cM}.${t}`)}s(RFt,"getConfigDefaultForKey");function kFt(t){return BD.get(t)}s(kFt,"getOptionalConfigDefaultForKey");var BD=new Map([[qt.DebugOverrideCppHeadersEnableSwitch,!1],[qt.RelatedFilesVSCodeCSharp,!1],[qt.RelatedFilesVSCodeTypeScript,!1],[qt.RelatedFilesVSCode,!1],[qt.IncludeNeighboringFiles,!1],[qt.ExcludeRelatedFiles,!1],[qt.ContextProviders,[]],[qt.DebugUseEditorFetcher,null],[qt.DebugUseElectronFetcher,null],[qt.DebugOverrideLogLevels,{}],[qt.DebugSnippyOverrideUrl,""],[qt.FetchStrategy,"auto"],[qt.ToolConfirmAutoApprove,!1],[qt.MaxToolCallingLoop,25],[qt.UseSubsetMatching,null],[qt.ContextProviderTimeBudget,void 0],[qt.DebugOverrideCapiUrl,""],[qt.DebugTestOverrideCapiUrl,""],[qt.DebugOverrideProxyUrl,""],[qt.DebugTestOverrideProxyUrl,""],[qt.DebugOverrideEngine,""],[qt.AlwaysRequestMultiline,void 0],[qt.ModelAlwaysTerminatesSingleline,void 0],[qt.TrimCompletionsAggressively,void 0],[qt.CompletionsDebounce,void 0],[qt.NESXTab,void 0],[qt.UseWorkspaceContextCoordinator,void 0],[qt.ShowWorkspaceContextDebugger,!1],[qt.CompletionsDelay,void 0],[qt.UseSplitContextPrompt,void 0],[qt.UseCompletionsComparisonPanel,!1],[qt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[qt.ComparisonPanelRandomizedMode,!1],[qt.ShowEditorCompletions,void 0],[qt.EnableAutoCompletions,void 0],[qt.DelayCompletions,void 0],[qt.FilterCompletions,void 0]]);for(let t of Object.values(qt)){let e=age.configuration[0],r=[],n=`${cM}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(_Ft(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(BD.has(t))throw new Error(`Duplicate config default value ${cM}.${t}`);BD.set(t,i.default)}}if(!BD.has(t))throw new Error(`Missing config default value ${cM}.${t}`)}function Wi(t,e){return t.get(gl).getConfig(e)}s(Wi,"getConfig");function E8e(t){return t.get(gl).dumpForTelemetry()}s(E8e,"dumpForTelemetry");var yo=class{constructor(){this.packageJson=sge}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function bfe(t){return t.get(yo).isProduction()}s(bfe,"isProduction");function uLe(t){return t.get(yo).getBuildType()==="dev"}s(uLe,"isDevBuild");function My(t){return t.get(yo).getBuildType()}s(My,"getBuildType");function x8e(t){return t.get(yo).getBuild()}s(x8e,"getBuild");function d_(t){return t.get(yo).getVersion()}s(d_,"getVersion");var Ss=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function Iy({name:t,version:e}){return`${t}/${e}`}s(Iy,"formatNameAndVersion");var dn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},Qy="2025-05-01";function tp(t){let e=t.get(dn);return{"Editor-Version":Iy(e.getEditorInfo()),"Editor-Plugin-Version":Iy(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":d_(t)}}s(tp,"editorVersionHeaders");var np="Iv1.b507a08c87ecfe98",vqe="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",Gl=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??np}};var yn=class{static{s(this,"Fetcher")}getImplementation(){return this}};function x2(t,e,r,n,i,o,a,c,l,u){let d={...c,Authorization:`Bearer ${r}`,...tp(t)};u===void 0&&(d["Openai-Organization"]="github-copilot",d["X-Request-Id"]=i,d["VScode-SessionId"]=t.get(Ss).sessionId,d["VScode-MachineId"]=t.get(Ss).machineId,d["X-GitHub-Api-Version"]=Qy),n&&(d["OpenAI-Intent"]=n);let p={method:"POST",headers:d,json:o,timeout:l},m=t.get(yn);if(a){let g=new AbortController;a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",qr.createAndMarkAsIssued({headerRequestId:i})),g.abort()}),p.signal=g.signal}return m.fetch(e,p).catch(g=>{if(PFt(g))return Bt(t,"networking.disconnectAll"),m.disconnectAll().then(()=>m.fetch(e,p));throw g})}s(x2,"postRequest");function PFt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(PFt,"isInterruptedNetworkError");var DFt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function BFt(t){return DFt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(BFt,"isOomError");function qv(t,e,r,n=sn){if(!hd(e)){if(e instanceof Error){let i=e;BFt(i)?t.get(Eo).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Eo).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Eo).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Eo).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Eo).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(qv,"handleException");function Eqe(t){process.addListener("uncaughtException",r=>{qv(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,qv(t,r,"unhandledRejection")}finally{e=!1}})}s(Eqe,"registerDefaultHandlers");async function xqe(t){try{await C2}catch(e){qv(t,e,"initializeTokenizers")}}s(xqe,"waitForTokenizers");f();var HI=require("fs"),bqe=require("os"),Iqe=Fe(require("path")),MD=require("process");var Bi=class{static{s(this,"PersistenceManager")}},cge=class extends Bi{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await HI.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await HI.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await HI.promises.rm(i):await HI.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await HI.promises.rm(n)}catch{}}async listSettings(){try{return(await HI.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await HI.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function lge(){return MD.env.XDG_CONFIG_HOME&&Iqe.isAbsolute(MD.env.XDG_CONFIG_HOME)?MD.env.XDG_CONFIG_HOME+"/github-copilot":(0,bqe.platform)()==="win32"?MD.env.USERPROFILE+"\\AppData\\Local\\github-copilot":MD.env.HOME+"/.config/github-copilot"}s(lge,"getXdgConfigPath");function Tqe(){return new cge(lge())}s(Tqe,"makeXdgPersistenceManager");f();f();f();var Hv={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var wqe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],Sqe={".php":[".blade"]},b2=Object.keys(Hv).flatMap(t=>Hv[t].extensions);var uge=Fe(require("node:path"));var OD=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},uF=class{static{s(this,"LanguageDetection")}},dge=new Map,FD=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(Hv)){for(let n of e)dge.set(n,[...dge.get(n)??[],t]);for(let n of r??[])FD.set(n,[...FD.get(n)??[],t])}var fge=class extends uF{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Hi(e.uri),n=uge.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new OD(o.languageId,o.isGuess,a):new OD(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(wqe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=uge.extname(n).toLowerCase();if(i.length>0&&b2.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=Sqe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(FD.has(e))return{languageId:FD.get(e)[0],isGuess:!1};let n=dge.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),FD.has(e))return{languageId:FD.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},pge=class extends uF{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new OD("cpp",n.isGuess,n.fileExtension):n}},mge=class extends uF{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new OD(r.languageId,!0,""):this.delegate.detectLanguage(r)}},NFt=new pge(new mge(new fge));function QD({uri:t,languageId:e}){let r=NFt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(QD,"detectLanguage");f();f();f();f();function Wv(t){if(t.isCancellationRequested)throw new Tz}s(Wv,"throwIfCancellationRequested");function Sz(t){return t instanceof Tz?!0:t instanceof Error&&t.name===hge&&t.message===hge}s(Sz,"isCancellationError");var Tz=class extends Error{static{s(this,"CancellationError")}constructor(){super(hge),this.name=this.message}},hge="Canceled",wz=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function I2(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(I2,"isTypeDefinition");var Bs=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=Rqe(e,e.length,i),_qe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=Rqe(e,e.length,++i),_qe(n,r)):i++;return n.join("")}};function _qe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(_qe,"appendIndent");function Rqe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(Rqe,"consumeIndent");var qm=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},zc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await Uv(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new wz,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let E=0;E<i.length;E++){let b=i[E].name;b==="name"?(u=i[E].node.startIndex,d=i[E].node.endIndex):b==="reference"?(u=i[E].node.startIndex,d=i[E].node.endIndex,c=i[E].node.startIndex,l=i[E].node.endIndex,h=b):b==="body"?(p=i[E].node.startIndex,m=i[E].node.endIndex):b==="comment"?(o=o===0?i[E].node.startIndex:Math.min(o,i[E].node.startIndex),a=Math.max(a,i[E].node.endIndex)):b==="receiver"?g=Bs.fromBounds(i[E].node.startIndex,i[E].node.endIndex).getText(n):(c=i[E].node.startIndex,l=i[E].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let A=Bs.fromBounds(c,l),y=c>0||l>0||u>0||d>0?new qm(r,"","",Bs.fromBounds(o,a),Bs.fromBounds(u,d),Bs.fromBounds(p,m),A,t.kindFromString(h),0):null;if(y){t.updateScopesForSymbol(e,y);let E=y.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new qm(r,b,E.substring(E.lastIndexOf(".")+1),y.commentRange,y.nameRange,y.bodyRange,y.extentRange,y.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var _z=class extends zc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,LFt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Rz=class extends zc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,FFt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,OFt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},kz=class extends zc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,MFt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new Bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Bs(d,p-d),h=new Bs(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=Bs.empty,A=Bs.empty,y=u.substring(u.lastIndexOf("/")+1);i.add(new qm(e,u,y,g,m,A,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},LFt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,MFt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,FFt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,OFt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var Dz=class extends zc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,QFt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Bz=class extends zc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,qFt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,HFt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},Nz=class extends zc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,UFt)).filter(i=>i.kind===0)}},QFt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,UFt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,qFt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,HFt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var WFt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Lz=class extends zc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,$Ft)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Mz=class extends zc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,jFt)).filter(i=>!WFt.has(i.unqualifiedName))}};var $Ft=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,jFt=`
(call_expression function: (_) @name) @reference
`;f();var GFt=new Set(["int","str","float","bool","list","dict","tuple","set"]),Fz=class extends zc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,VFt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Oz=class extends zc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,zFt)).filter(i=>!GFt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,KFt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},Qz=class extends zc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,YFt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?l=d:d.name==="alias"?c=d:d.name==="import"&&(u=d);if(l&&u){let d=a||l,p=c?new Bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Bs(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new Bs(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Bs.empty,g=Bs.empty,A=d.node.text,y=A.split(".").pop()||A,E;a?E=`${l.node.text}.${a.node.text}`:E=l.node.text,i.add(new qm(e,E,y,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},VFt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,zFt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,YFt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,KFt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var JFt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),UD=class extends zc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,XFt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},qD=class extends zc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,ZFt)).filter(i=>!JFt.has(i.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var XFt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,ZFt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var eOt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Uz=class extends UD{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,tOt),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},qz=class extends qD{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,rOt),super.extractReferences(e,r)]);return[...n.filter(o=>!eOt.has(o.unqualifiedName)),...i]}},tOt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,rOt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var dF=[{symbolExtractor:new Dz,referenceExtractor:new Bz,importExtractor:new Nz,languageId:"java"},{symbolExtractor:new _z,referenceExtractor:new Rz,importExtractor:new kz,languageId:"go"},{symbolExtractor:new Fz,referenceExtractor:new Oz,importExtractor:new Qz,languageId:"python"},{symbolExtractor:new UD,referenceExtractor:new qD,languageId:"typescript"},{symbolExtractor:new Uz,referenceExtractor:new qz,languageId:"typescriptreact"},{symbolExtractor:new Lz,referenceExtractor:new Mz,languageId:"javascript"}];function kqe(t){let e=QD({uri:t});if(e&&dF.some(r=>e===r.languageId))return e}s(kqe,"getSupportedLanguageIdForMultiLanguageProvider");var Pqe=new Map(dF.map(t=>[t.languageId,t.referenceExtractor])),Hz=new Map(dF.map(t=>[t.languageId,t.symbolExtractor])),Dqe=new Map(dF.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),gge=dF.map(t=>Hv[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function Age(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Age,"virtualNode");function Bqe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(Bqe,"lineNode");function yge(t){return{type:"blank",lineNumber:t,subs:[]}}s(yge,"blankNode");function Wz(t){return{type:"top",indentation:-1,subs:t??[]}}s(Wz,"topNode");function Lu(t){return t.type==="blank"}s(Lu,"isBlank");function T2(t){return t.type==="line"}s(T2,"isLine");function w2(t){return t.type==="virtual"}s(w2,"isVirtual");f();function Nqe(t,e){return Ed(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(Nqe,"clearLabelsIf");function S2(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>S2(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>S2(r,e)),label:t.label?e(t.label):void 0}}}s(S2,"mapLabels");function Ed(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Ed,"visitTree");function Cge(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Ed(t,o,n),i}s(Cge,"foldTree");function $z(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:Wz()}s($z,"rebuildTree");f();function iOt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,r[u]);return[Bqe(r[u],u,n[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let A=g;A<h;A++)m.push(yge(A));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(yge(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return Wz(a)}s(iOt,"parseRaw");function fF(t,e){function r(n){if(T2(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Ed(t,r,"bottomUp")}s(fF,"labelLines");function jz(t){function e(r){if(w2(r)&&r.label===void 0){let n=r.subs.filter(i=>!Lu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Ed(t,e,"bottomUp")}s(jz,"labelVirtualInherited");function pF(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(pF,"buildLabelRules");function vge(t){let r=$z(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&T2(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(T2(c)||w2(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Lu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Age(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),Lu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return Nqe(t,n=>n==="newVirtual"),r}s(vge,"combineClosersAndOpeners");function Lqe(t,e=Lu,r){return $z(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(d=!1){if(c!==void 0&&(o.length>0||!d)){let p=Age(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),Lu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(Lqe,"groupBlocks");function _2(t){return $z(t,s(function(r){return w2(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&w2(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(_2,"flattenVirtual");var oOt={opener:/^[[({]/,closer:/^[\])}]/},sOt=pF(oOt),Mqe={};function Ege(t,e){Mqe[t]=e}s(Ege,"registerLanguageSpecificParser");function R2(t,e){let r=iOt(t),n=Mqe[e??""];return n?n(r):(fF(r,sOt),vge(r))}s(R2,"parseTree");var aOt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},cOt=pF(aOt);function Fqe(t){let e=t;return fF(e,cOt),e=vge(e),e=_2(e),jz(e),Ed(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!Lu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(Fqe,"processJava");f();var lOt={heading:/^# /,subheading:/^## /,subsubheading:/### /},uOt=pF(lOt);function Oqe(t){let e=t;if(fF(e,uOt),Lu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||Lu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=Lqe(e),e=_2(e),jz(e),e}s(Oqe,"processMarkdown");f();function Qqe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(Qqe,"deparseLine");Ege("markdown",Oqe);Ege("java",Fqe);var dOt={worthUp:.9,worthSibling:.88,worthDown:.8};function xge(t,e,r=$i(),n=dOt){let i=S2(t,o=>o?1:void 0);return Ed(i,o=>{if(Lu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Ed(i,o=>{if(Lu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((d,p)=>Math.max(d,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,d)=>u.label=c[d])},"topDown"),fOt(i,e,r)}s(xge,"fromTreeWithFocussedLines");function fOt(t,e,r=$i()){let n=Cge(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[Qqe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Qt(n,e,r)}s(fOt,"fromTreeWithValuedLines");function yp(t,e=!0,r=!0,n,i=$i()){let o=typeof t=="string"?R2(t):R2(t.source,t.languageId);_2(o);let a=S2(o,c=>e&&c!=="closer");return Ed(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&Ed(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&Ed(a,c=>{c.label||=(T2(c)||Lu(c))&&c.lineNumber==0},"topDown"),xge(a,n,i)}s(yp,"elidableTextForSourceCode");f();var mF=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>$i().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Qt=class t{constructor(e,r,n=$i()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new mF(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&yp(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>$i().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=mOt(this.lines,i);if(l<=e)return bge(c);hOt(u,a);let d=l;for(;d>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?gOt(c,m):"",A=Uqe(g,r,o,h);c[m]=A,d-=h.cost,d+=A.cost;let y=m+1;if(y<c.length){let b=c[y];Gz(b,r)&&(d-=b.cost,b.markedForRemoval=!0)}let E=m-1;if(E>=0){let b=c[E];Gz(b,r)&&(d-=b.cost,b.markedForRemoval=!0)}}if(d>e)return bge([Uqe("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)Gz(p[m],r)&&Gz(p[m-1],r)&&p.splice(m,1);return bge(p)}};function pOt(t){return t?.text.match(/^\s*/)?.[0]??""}s(pOt,"getIndentation");function Gz(t,e){return t?.text.trim()===e.trim()}s(Gz,"isEllipsis");function bge(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(bge,"produceElidedText");function mOt(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(mOt,"initializeElisionContext");function hOt(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(hOt,"sortPriorityQueue");function gOt(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=pOt(i);break}}return r}s(gOt,"getClosestIndentation");function Uqe(t,e,r,n){let i=t+e;return new mF(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(Uqe,"getNewEllipsis");f();var qqe=require("fs");async function Hqe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((A,y)=>A+y.node.extentRange.length,0);for(let A of m){if(c<=5)return u;Wv(i);let y=A.node.extentRange.length/g,E=Math.min(c,y*l),b=(await AOt([A])).elide(E).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(Hqe,"symbolRangesToCodeSnippets");async function AOt(t){if(t.length===0)return new Qt([]);let e=t[0].node.fileName,r=[],n="";try{let i=vs(e);i&&(n=(await qqe.promises.readFile(i)).toString())}catch{}for(let i of t)Wqe(i,n).forEach(o=>r.push(o));return new Qt(r)}s(AOt,"sameFileSymbolRangeToElidableText");function Wqe(t,e){let n=[],i=t.node,o=e.substring(Ige(e,i.commentRange.start),i.commentRange.end);n.push([Tge(o),1-3e-4]);let a=Ige(e,i.bodyRange.start),c=Ige(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(I2(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([Tge(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...Wqe(u,e));else{let u=1-(I2(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);n.push([Tge(d),u])}return I2(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(Wqe,"prepareForElidableText");function Ige(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(Ige,"shiftLeftToNearestLineEndingOrAlphanumeric");function Tge(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(Tge,"trimLineEndingsAndTrailingWhitespace");var wge=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},WI=class extends wge{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];Wv(a);let l=await c.extractReferences(e,r);Wv(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>I2(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(d.length+m.length>r.mlcpMaxContextItems){d.push(...m.slice(0,r.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,r){if(Wv(r),I2(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},Vz=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new WI(e,r,!0,!0)),this.strategies.set("java",new WI(e,r,!0,!0)),this.strategies.set("python",new WI(e,r,!0,!1)),this.strategies.set("typescript",new WI(e,r,!0,!0)),this.strategies.set("typescriptreact",new WI(e,r,!0,!0)),this.strategies.set("javascript",new WI(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);Wv(c);let u=$i();return Hqe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};f();f();f();f();var k2={Id:"id"},Cp={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},oo={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var zz=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new Sge(k2.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},hF=class t extends zz{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${Cp.FilePath}');`]);this.fields=[new yF(Cp.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new n0(Cp.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},gF=class t extends zz{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${oo.DocumentId}', '${oo.ExtentStart}', '${oo.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${oo.UnqualifiedName}');`],`FOREIGN KEY(${oo.DocumentId}) REFERENCES Document(${k2.Id}) ON DELETE CASCADE`);this.fields=[new n0(oo.DocumentId),new yF(oo.FullyQualifiedName,{notNull:!0}),new yF(oo.UnqualifiedName,{notNull:!0}),new n0(oo.CommentStart,{notNull:!0}),new n0(oo.CommentLength,{notNull:!0}),new n0(oo.NameStart,{notNull:!0}),new n0(oo.NameLength,{notNull:!0}),new n0(oo.BodyStart,{notNull:!0}),new n0(oo.BodyLength,{notNull:!0}),new n0(oo.ExtentStart,{notNull:!0}),new n0(oo.ExtentLength,{notNull:!0}),new n0(oo.SymbolKind,{notNull:!0}),new n0(oo.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},AF=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},yF=class extends AF{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},n0=class extends AF{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Sge=class extends AF{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var Yz=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?Hm(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Hm(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${k2.Id} = ?`,[e])}},$v=class t extends Yz{static{s(this,"DocumentTable")}static{this.tableName=hF.tableName}createQueryGenerator(){return new hF}async updateTimestamp(e,r){let n=await this.init;n&&await Hm(n,`UPDATE ${t.tableName} SET ${Cp.LastWriteTimeUtc} = ? WHERE ${Cp.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Hm(r,`DELETE FROM ${t.tableName} WHERE ${Cp.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Hm(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Cp.FilePath} = ?`,[e]):[]}},Yc=class t extends Yz{static{s(this,"SymbolTable")}static{this.tableName=gF.tableName}createQueryGenerator(){return new gF}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Hm(r,`DELETE FROM ${t.tableName} WHERE ${oo.DocumentId} = ?`,[e])}};async function Hm(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(Hm,"runPromisifiedDBQuery");var Xz=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${$v.tableName} ON ${Yc.tableName}.${oo.DocumentId} = ${$v.tableName}.${k2.Id}`;this.db=this.initDb(e),this.documentTable=new $v(this.db),this.symbolTable=new Yc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Fe(tHe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Hm(n,"pragma journal_mode=wal",[]),await Hm(n,"pragma synchronous=normal",[]),await Hm(n,"pragma optimize=0x10002",[]),await Hm(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${oo.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${oo.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${oo.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${oo.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${$v.tableName}.${Cp.FilePath} = ? AND ${Yc.tableName}.${oo.ExtentStart} <= ? AND (${Yc.tableName}.${oo.ExtentStart} + ${Yc.tableName}.${oo.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${$v.tableName}.${Cp.FilePath} = ? AND ${Yc.tableName}.${oo.ExtentStart} >= ? AND (${Yc.tableName}.${oo.ExtentStart} + ${Yc.tableName}.${oo.ExtentLength}) <= ?`,`ORDER BY ${Yc.tableName}.${oo.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Yc.tableName}`,this.innerJoinStatement,`WHERE ${$v.tableName}.${Cp.FilePath} = ? AND ${Yc.tableName}.${oo.FullyQualifiedName} LIKE ?`,`ORDER BY ${Yc.tableName}.${oo.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Hm(n,e,r)):[]}};var Zz=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new Xz(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return $D(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),Wv(n)}return $D(i)}async getDefinitionsAsync(e){return $D(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return $D(n)}async findSymbolsContainedByRangeAsync(e,r,n){return $D(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return $D(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function $D(t){return t.map(e=>new qm(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Bs(e.commentStart,e.commentLength),new Bs(e.nameStart,e.nameLength),new Bs(e.bodyStart,e.bodyLength),new Bs(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s($D,"symbolsToSymbolRanges");var tY=Fe(require("fs/promises"));var eY=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new Zz(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=vs(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await tY.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await tY.readFile(n)).toString(),u=await c.extractSymbols(e,l),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function Bge(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>IOt(r))}s(Bge,"isIndexWorkerData");var vF=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},$I=class extends vF{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},rY=class extends vF{constructor(r){super(xd.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},xd={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},nY=class extends $I{constructor(r,n,i){super(r,xd.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},iY=class extends $I{constructor(r,n){super(r,xd.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},oY=class extends $I{constructor(r,n,i){super(r,xd.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},sY=class extends $I{constructor(r,n){super(r,xd.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},aY=class extends $I{constructor(r,n,i,o,a,c){super(r,xd.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},cY=class extends $I{static{s(this,"ExitRequest")}constructor(e){super(e,xd.Exit)}},zg=class extends vF{constructor(r,n,i){super(xd.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function IOt(t){return"databaseFilePath"in t&&"rootPath"in t}s(IOt,"isIndexableWorkspaceFolder");var rHe=Fe(di()),jI=require("worker_threads");var lY=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new eY(e,Hz,Dqe,r),this.contextRetreival=new Vz(this.index.reader,Pqe)}},Nge=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=Va(i.rootPath);this.indices.set(o,new lY(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new rHe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case xd.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case xd.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case xd.Cancel:n.get(e.id)?.cancel(),o=new zg(e.id,void 0,void 0);break;case xd.Exit:o=await this.dispatchExit(e,r,i.token);break;case xd.CreateIndex:o=t.dispatchCreateIndex(e,r,i.token);break;case xd.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case xd.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new zg(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=Va(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new zg(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=Va(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new zg(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=Va(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new zg(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new zg(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let i=Va(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new lY(e.databaseFilePath)),new zg(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=Va(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new zg(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function nHe(){return Bge(jI.workerData)}s(nHe,"isIndexWorker");function iHe(){let t=jI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Bge(jI.workerData))throw new Error("Worker data must provide a valid database path.");let e=jI.workerData.cwd;process.cwd=()=>e,new Nge(t,jI.workerData.indexWorkspaceRoots,jI.workerData.params)}s(iHe,"runIndexWorker");f();var EF=Fe(require("util"));function oHe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(My(t)==="dev")return t.get(Oc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",EF.format(...i)))},e.dir=(n,i)=>r(4,EF.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(EF.format(...n));i.name="Trace",e.log(i)},e}s(oHe,"createConsole");var px=Fe(require("fs/promises")),rCt=Fe(require("os")),rq=Fe(require("path")),Gh=Fe(Kg()),nCt=require("worker_threads");f();f();var VY=require("assert");f();f();var F7t={right:H7t,center:W7t},O7t=0,UY=1,Q7t=2,qY=3,sAe=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&vp.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),vp.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=vp.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),d=a;if(u>vp.stringWidth(a)&&(d+=" ".repeat(u-vp.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=F7t[e[c].align];d=m(d,u),vp.stringWidth(d)<u&&(d+=" ".repeat((l||0)-vp.stringWidth(d)-1))}let p=e[c].padding||[0,0,0,0];p[qY]&&(o+=" ".repeat(p[qY])),o+=ZHe(e[c],d,"| "),o+=d,o+=ZHe(e[c],d," |"),p[UY]&&(o+=" ".repeat(p[UY])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=vp.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=vp.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[O7t]||0).fill("")),i.push(...new Array(o.padding[Q7t]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[qY]||0)+(e.padding[UY]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||vp.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,U7t(e[c])):a)}};function ZHe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(ZHe,"addBorder");function U7t(t){let e=t.padding||[],r=1+(e[qY]||0)+(e[UY]||0);return t.border?r+4:r}s(U7t,"_minWidth");function q7t(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(q7t,"getWindowWidth");function H7t(t,e){t=t.trim();let r=vp.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(H7t,"alignRight");function W7t(t,e){t=t.trim();let r=vp.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(W7t,"alignCenter");var vp;function eWe(t,e){return vp=e,new sAe({width:t?.width||q7t(),wrap:t?.wrap})}s(eWe,"cliui");f();var tWe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function aAe(t){return t.replace(tWe,"")}s(aAe,"stripAnsi");function rWe(t,e){let[r,n]=t.match(tWe)||["",""];t=aAe(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(rWe,"wrap");function cAe(t){return eWe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:aAe,wrap:rWe})}s(cAe,"ui");f();var zD=require("path"),HY=require("fs");function lAe(t,e){let r=(0,zD.resolve)(".",t),n;for((0,HY.statSync)(r).isDirectory()||(r=(0,zD.dirname)(r));;){if(n=e(r,(0,HY.readdirSync)(r)),n)return(0,zD.resolve)(r,n);if(r=(0,zD.dirname)(n=r),n===r)break}}s(lAe,"default");var yWe=require("util"),CWe=require("fs"),vWe=require("url");f();var aWe=require("util"),GY=require("path");f();function N2(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(N2,"camelCase");function WY(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(WY,"decamelize");function $Y(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s($Y,"looksLikeNumber");f();f();function nWe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(nWe,"tokenizeArgString");f();var zm;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(zm||(zm={}));var jv,jY=class{static{s(this,"YargsParser")}constructor(e){jv=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=nWe(e),o=typeof e=="string",a=$7t(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],d=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),A=n.__||jv.format,y={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(se){let le=typeof se=="object"?se.key:se,qe=Object.keys(se).map(function(Be){return{boolean:"bools",string:"strings",number:"numbers"}[Be]}).filter(Boolean).pop();qe&&(y[qe][le]=!0),y.arrays[le]=!0,y.keys.push(le)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(se){y.bools[se]=!0,y.keys.push(se)}),[].concat(n.string||[]).filter(Boolean).forEach(function(se){y.strings[se]=!0,y.keys.push(se)}),[].concat(n.number||[]).filter(Boolean).forEach(function(se){y.numbers[se]=!0,y.keys.push(se)}),[].concat(n.count||[]).filter(Boolean).forEach(function(se){y.counts[se]=!0,y.keys.push(se)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(se){y.normalize[se]=!0,y.keys.push(se)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([se,le])=>{typeof le=="number"&&(y.nargs[se]=le,y.keys.push(se))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([se,le])=>{typeof le=="function"&&(y.coercions[se]=le,y.keys.push(se))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(se){y.configs[se]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([se,le])=>{(typeof le=="boolean"||typeof le=="function")&&(y.configs[se]=le)})),Oe(n.key,a,n.default,y.arrays),Object.keys(l).forEach(function(se){(y.aliases[se]||[]).forEach(function(le){l[le]=l[se]})});let w=null;We();let R=[],D=Object.assign(Object.create(null),{_:[]}),N={};for(let se=0;se<i.length;se++){let le=i[se],qe=le.replace(/^-{3,}/,"---"),Be,xe,je,et,pt,Mt;if(le!=="--"&&/^-/.test(le)&&_t(le))O(le);else if(qe.match(/^---+(=|$)/)){O(le);continue}else if(le.match(/^--.+=/)||!c["short-option-groups"]&&le.match(/^-.+=/))et=le.match(/^--?([^=]+)=([\s\S]*)$/),et!==null&&Array.isArray(et)&&et.length>=3&&(Te(et[1],y.arrays)?se=ee(se,et[1],i,et[2]):Te(et[1],y.nargs)!==!1?se=Y(se,et[1],i,et[2]):V(et[1],et[2],!0));else if(le.match(b)&&c["boolean-negation"])et=le.match(b),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],V(xe,Te(xe,y.arrays)?[!1]:!1));else if(le.match(/^--.+/)||!c["short-option-groups"]&&le.match(/^-[^-]+/))et=le.match(/^--?(.+)/),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],Te(xe,y.arrays)?se=ee(se,xe,i):Te(xe,y.nargs)!==!1?se=Y(se,xe,i):(pt=i[se+1],pt!==void 0&&(!pt.match(/^-/)||pt.match(E))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(V(xe,pt),se++):V(xe,ht(xe))));else if(le.match(/^-.\..+=/))et=le.match(/^-([^=]+)=([\s\S]*)$/),et!==null&&Array.isArray(et)&&et.length>=3&&V(et[1],et[2]);else if(le.match(/^-.\..+/)&&!le.match(E))pt=i[se+1],et=le.match(/^-(.\..+)/),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],pt!==void 0&&!pt.match(/^-/)&&!Te(xe,y.bools)&&!Te(xe,y.counts)?(V(xe,pt),se++):V(xe,ht(xe)));else if(le.match(/^-[^-]+/)&&!le.match(E)){je=le.slice(1,-1).split(""),Be=!1;for(let Kt=0;Kt<je.length;Kt++){if(pt=le.slice(Kt+2),je[Kt+1]&&je[Kt+1]==="="){Mt=le.slice(Kt+3),xe=je[Kt],Te(xe,y.arrays)?se=ee(se,xe,i,Mt):Te(xe,y.nargs)!==!1?se=Y(se,xe,i,Mt):V(xe,Mt),Be=!0;break}if(pt==="-"){V(je[Kt],pt);continue}if(/[A-Za-z]/.test(je[Kt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(pt)&&Te(pt,y.bools)===!1){V(je[Kt],pt),Be=!0;break}if(je[Kt+1]&&je[Kt+1].match(/\W/)){V(je[Kt],pt),Be=!0;break}else V(je[Kt],ht(je[Kt]))}xe=le.slice(-1)[0],!Be&&xe!=="-"&&(Te(xe,y.arrays)?se=ee(se,xe,i):Te(xe,y.nargs)!==!1?se=Y(se,xe,i):(pt=i[se+1],pt!==void 0&&(!/^(-|--)[^-]/.test(pt)||pt.match(E))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(V(xe,pt),se++):V(xe,ht(xe))))}else if(le.match(/^-[0-9]$/)&&le.match(E)&&Te(le.slice(1),y.bools))xe=le.slice(1),V(xe,ht(xe));else if(le==="--"){R=i.slice(se+1);break}else if(c["halt-at-non-option"]){R=i.slice(se);break}else O(le)}J(D,!0),J(D,!1),K(D),W(),te(D,y.aliases,l,!0),ie(D),c["set-placeholder-key"]&&ae(D),Object.keys(y.counts).forEach(function(se){pe(D,se.split("."))||V(se,0)}),p&&R.length&&(D[m]=[]),R.forEach(function(se){D[m].push(se)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(D).filter(se=>se!=="--"&&se.includes("-")).forEach(se=>{delete D[se]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(se=>a[se])).forEach(se=>{c["camel-case-expansion"]&&se.includes("-")&&delete D[se.split(".").map(le=>N2(le)).join(".")],delete D[se]});function O(se){let le=X("_",se);(typeof le=="string"||typeof le=="number")&&D._.push(le)}s(O,"pushPositional");function Y(se,le,qe,Be){let xe,je=Te(le,y.nargs);if(je=typeof je!="number"||isNaN(je)?1:je,je===0)return ye(Be)||(w=Error(A("Argument unexpected for: %s",le))),V(le,ht(le)),se;let et=ye(Be)?0:1;if(c["nargs-eats-options"])qe.length-(se+1)+et<je&&(w=Error(A("Not enough arguments following: %s",le))),et=je;else{for(xe=se+1;xe<qe.length&&(!qe[xe].match(/^-[^0-9]/)||qe[xe].match(E)||_t(qe[xe]));xe++)et++;et<je&&(w=Error(A("Not enough arguments following: %s",le)))}let pt=Math.min(et,je);for(!ye(Be)&&pt>0&&(V(le,Be),pt--),xe=se+1;xe<pt+se+1;xe++)V(le,qe[xe]);return se+pt}s(Y,"eatNargs");function ee(se,le,qe,Be){let xe=[],je=Be||qe[se+1],et=Te(le,y.nargs);if(Te(le,y.bools)&&!/^(true|false)$/.test(je))xe.push(!0);else if(ye(je)||ye(Be)&&/^-/.test(je)&&!E.test(je)&&!_t(je)){if(l[le]!==void 0){let pt=l[le];xe=Array.isArray(pt)?pt:[pt]}}else{ye(Be)||xe.push(U(le,Be,!0));for(let pt=se+1;pt<qe.length&&!(!c["greedy-arrays"]&&xe.length>0||et&&typeof et=="number"&&xe.length>=et||(je=qe[pt],/^-/.test(je)&&!E.test(je)&&!_t(je)));pt++)se=pt,xe.push(U(le,je,o))}return typeof et=="number"&&(et&&xe.length<et||isNaN(et)&&xe.length===0)&&(w=Error(A("Not enough arguments following: %s",le))),V(le,xe),se}s(ee,"eatArray");function V(se,le,qe=o){if(/-/.test(se)&&c["camel-case-expansion"]){let je=se.split(".").map(function(et){return N2(et)}).join(".");H(se,je)}let Be=U(se,le,qe),xe=se.split(".");Ae(D,xe,Be),y.aliases[se]&&y.aliases[se].forEach(function(je){let et=je.split(".");Ae(D,et,Be)}),xe.length>1&&c["dot-notation"]&&(y.aliases[xe[0]]||[]).forEach(function(je){let et=je.split("."),pt=[].concat(xe);pt.shift(),et=et.concat(pt),(y.aliases[se]||[]).includes(et.join("."))||Ae(D,et,Be)}),Te(se,y.normalize)&&!Te(se,y.arrays)&&[se].concat(y.aliases[se]||[]).forEach(function(et){Object.defineProperty(N,et,{enumerable:!0,get(){return le},set(pt){le=typeof pt=="string"?jv.normalize(pt):pt}})})}s(V,"setArg");function H(se,le){y.aliases[se]&&y.aliases[se].length||(y.aliases[se]=[le],h[le]=!0),y.aliases[le]&&y.aliases[le].length||H(le,se)}s(H,"addNewAlias");function U(se,le,qe){qe&&(le=j7t(le)),(Te(se,y.bools)||Te(se,y.counts))&&typeof le=="string"&&(le=le==="true");let Be=Array.isArray(le)?le.map(function(xe){return X(se,xe)}):X(se,le);return Te(se,y.counts)&&(ye(Be)||typeof Be=="boolean")&&(Be=uAe()),Te(se,y.normalize)&&Te(se,y.arrays)&&(Array.isArray(le)?Be=le.map(xe=>jv.normalize(xe)):Be=jv.normalize(le)),Be}s(U,"processValue");function X(se,le){return!c["parse-positional-numbers"]&&se==="_"||!Te(se,y.strings)&&!Te(se,y.bools)&&!Array.isArray(le)&&($Y(le)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${le}`)))||!ye(le)&&Te(se,y.numbers))&&(le=Number(le)),le}s(X,"maybeCoerceNumber");function K(se){let le=Object.create(null);te(le,y.aliases,l),Object.keys(y.configs).forEach(function(qe){let Be=se[qe]||le[qe];if(Be)try{let xe=null,je=jv.resolve(jv.cwd(),Be),et=y.configs[qe];if(typeof et=="function"){try{xe=et(je)}catch(pt){xe=pt}if(xe instanceof Error){w=xe;return}}else xe=jv.require(je);j(xe)}catch(xe){xe.name==="PermissionDenied"?w=xe:se[qe]&&(w=Error(A("Invalid JSON config file: %s",Be)))}})}s(K,"setConfig");function j(se,le){Object.keys(se).forEach(function(qe){let Be=se[qe],xe=le?le+"."+qe:qe;typeof Be=="object"&&Be!==null&&!Array.isArray(Be)&&c["dot-notation"]?j(Be,xe):(!pe(D,xe.split("."))||Te(xe,y.arrays)&&c["combine-arrays"])&&V(xe,Be)})}s(j,"setConfigObject");function W(){typeof u<"u"&&u.forEach(function(se){j(se)})}s(W,"setConfigObjects");function J(se,le){if(typeof d>"u")return;let qe=typeof d=="string"?d:"",Be=jv.env();Object.keys(Be).forEach(function(xe){if(qe===""||xe.lastIndexOf(qe,0)===0){let je=xe.split("__").map(function(et,pt){return pt===0&&(et=et.substring(qe.length)),N2(et)});(le&&y.configs[je.join(".")]||!le)&&!pe(se,je)&&V(je.join("."),Be[xe])}})}s(J,"applyEnvVars");function ie(se){let le,qe=new Set;Object.keys(se).forEach(function(Be){if(!qe.has(Be)&&(le=Te(Be,y.coercions),typeof le=="function"))try{let xe=X(Be,le(se[Be]));[].concat(y.aliases[Be]||[],Be).forEach(je=>{qe.add(je),se[je]=xe})}catch(xe){w=xe}})}s(ie,"applyCoercions");function ae(se){return y.keys.forEach(le=>{~le.indexOf(".")||typeof se[le]>"u"&&(se[le]=void 0)}),se}s(ae,"setPlaceholderKeys");function te(se,le,qe,Be=!1){Object.keys(qe).forEach(function(xe){pe(se,xe.split("."))||(Ae(se,xe.split("."),qe[xe]),Be&&(g[xe]=!0),(le[xe]||[]).forEach(function(je){pe(se,je.split("."))||Ae(se,je.split("."),qe[xe])}))})}s(te,"applyDefaultsAndAliases");function pe(se,le){let qe=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(xe){qe=qe[xe]||{}});let Be=le[le.length-1];return typeof qe!="object"?!1:Be in qe}s(pe,"hasKey");function Ae(se,le,qe){let Be=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Mt){Mt=iWe(Mt),typeof Be=="object"&&Be[Mt]===void 0&&(Be[Mt]={}),typeof Be[Mt]!="object"||Array.isArray(Be[Mt])?(Array.isArray(Be[Mt])?Be[Mt].push({}):Be[Mt]=[Be[Mt],{}],Be=Be[Mt][Be[Mt].length-1]):Be=Be[Mt]});let xe=iWe(le[le.length-1]),je=Te(le.join("."),y.arrays),et=Array.isArray(qe),pt=c["duplicate-arguments-array"];!pt&&Te(xe,y.nargs)&&(pt=!0,(!ye(Be[xe])&&y.nargs[xe]===1||Array.isArray(Be[xe])&&Be[xe].length===y.nargs[xe])&&(Be[xe]=void 0)),qe===uAe()?Be[xe]=uAe(Be[xe]):Array.isArray(Be[xe])?pt&&je&&et?Be[xe]=c["flatten-duplicate-arrays"]?Be[xe].concat(qe):(Array.isArray(Be[xe][0])?Be[xe]:[Be[xe]]).concat([qe]):!pt&&!!je==!!et?Be[xe]=qe:Be[xe]=Be[xe].concat([qe]):Be[xe]===void 0&&je?Be[xe]=et?qe:[qe]:pt&&!(Be[xe]===void 0||Te(xe,y.counts)||Te(xe,y.bools))?Be[xe]=[Be[xe],qe]:Be[xe]=qe}s(Ae,"setKey");function Oe(...se){se.forEach(function(le){Object.keys(le||{}).forEach(function(qe){y.aliases[qe]||(y.aliases[qe]=[].concat(a[qe]||[]),y.aliases[qe].concat(qe).forEach(function(Be){if(/-/.test(Be)&&c["camel-case-expansion"]){let xe=N2(Be);xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),h[xe]=!0)}}),y.aliases[qe].concat(qe).forEach(function(Be){if(Be.length>1&&/[A-Z]/.test(Be)&&c["camel-case-expansion"]){let xe=WY(Be,"-");xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),h[xe]=!0)}}),y.aliases[qe].forEach(function(Be){y.aliases[Be]=[qe].concat(y.aliases[qe].filter(function(xe){return Be!==xe}))}))})})}s(Oe,"extendAliases");function Te(se,le){let qe=[].concat(y.aliases[se]||[],se),Be=Object.keys(le),xe=qe.find(je=>Be.includes(je));return xe?le[xe]:!1}s(Te,"checkAllAliases");function Je(se){let le=Object.keys(y);return[].concat(le.map(Be=>y[Be])).some(function(Be){return Array.isArray(Be)?Be.includes(se):Be[se]})}s(Je,"hasAnyFlag");function Me(se,...le){return[].concat(...le).some(function(Be){let xe=se.match(Be);return xe&&Je(xe[1])})}s(Me,"hasFlagsMatching");function lt(se){if(se.match(E)||!se.match(/^-[^-]+/))return!1;let le=!0,qe,Be=se.slice(1).split("");for(let xe=0;xe<Be.length;xe++){if(qe=se.slice(xe+2),!Je(Be[xe])){le=!1;break}if(Be[xe+1]&&Be[xe+1]==="="||qe==="-"||/[A-Za-z]/.test(Be[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(qe)||Be[xe+1]&&Be[xe+1].match(/\W/))break}return le}s(lt,"hasAllShortFlags");function _t(se){return c["unknown-options-as-args"]&&vt(se)}s(_t,"isUnknownOptionAsArg");function vt(se){return se=se.replace(/^-{3,}/,"--"),se.match(E)||lt(se)?!1:!Me(se,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(vt,"isUnknownOption");function ht(se){return!Te(se,y.bools)&&!Te(se,y.counts)&&`${se}`in l?l[se]:ue(Ue(se))}s(ht,"defaultValue");function ue(se){return{[zm.BOOLEAN]:!0,[zm.STRING]:"",[zm.NUMBER]:void 0,[zm.ARRAY]:[]}[se]}s(ue,"defaultForType");function Ue(se){let le=zm.BOOLEAN;return Te(se,y.strings)?le=zm.STRING:Te(se,y.numbers)?le=zm.NUMBER:Te(se,y.bools)?le=zm.BOOLEAN:Te(se,y.arrays)&&(le=zm.ARRAY),le}s(Ue,"guessType");function ye(se){return se===void 0}s(ye,"isUndefined");function We(){Object.keys(y.counts).find(se=>Te(se,y.arrays)?(w=Error(A("Invalid configuration: %s, opts.count excludes opts.array.",se)),!0):Te(se,y.nargs)?(w=Error(A("Invalid configuration: %s, opts.count excludes opts.narg.",se)),!0):!1)}return s(We,"checkConfiguration"),{aliases:Object.assign({},y.aliases),argv:Object.assign(N,D),configuration:c,defaulted:Object.assign({},g),error:w,newAliases:Object.assign({},h)}}};function $7t(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s($7t,"combineAliases");function uAe(t){return t!==void 0?t+1:1}s(uAe,"increment");function iWe(t){return t==="__proto__"?"___proto___":t}s(iWe,"sanitizeKey");function j7t(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(j7t,"stripQuotes");var cWe=require("fs");var dAe,fAe,pAe,oWe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,sWe=(fAe=(dAe=process==null?void 0:process.versions)===null||dAe===void 0?void 0:dAe.node)!==null&&fAe!==void 0?fAe:(pAe=process==null?void 0:process.version)===null||pAe===void 0?void 0:pAe.slice(1);if(sWe&&Number(sWe.match(/^([^.]+)/)[1])<oWe)throw Error(`yargs parser supports a minimum Node.js version of ${oWe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var G7t=process?process.env:{},lWe=new jY({cwd:process.cwd,env:s(()=>G7t,"env"),format:aWe.format,normalize:GY.normalize,resolve:GY.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,cWe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),_F=s(function(e,r){return lWe.parse(e.slice(),r).argv},"Parser");_F.detailed=function(t,e){return lWe.parse(t.slice(),e)};_F.camelCase=N2;_F.decamelize=WY;_F.looksLikeNumber=$Y;var uWe=_F;var Xg=require("path");f();function V7t(){return z7t()?0:1}s(V7t,"getProcessArgvBinIndex");function z7t(){return Y7t()&&!process.defaultApp}s(z7t,"isBundledElectronApp");function Y7t(){return!!process.versions.electron}s(Y7t,"isElectronApp");function dWe(){return process.argv[V7t()]}s(dWe,"getProcessArgvBin");f();var Zs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var YD=require("fs"),fWe=require("util"),pWe=require("path");var mWe={fs:{readFileSync:YD.readFileSync,writeFile:YD.writeFile},format:fWe.format,resolve:pWe.resolve,exists:s(t=>{try{return(0,YD.statSync)(t).isFile()}catch{return!1}},"exists")};f();var Jg,mAe=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),Jg.format.apply(Jg.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),Jg.format.apply(Jg.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);Jg.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{Jg.fs.readFileSync&&(e=JSON.parse(Jg.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=Jg.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=Jg.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return Jg.exists(e)}};function hWe(t,e){Jg=e;let r=new mAe(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(hWe,"y18n");var K7t=s(t=>hWe(t,mWe),"y18n"),gWe=K7t;var J7t="require is not supported by ESM",AWe="loading a directory of commands is not supported yet for ESM",RF;try{RF=(0,vWe.fileURLToPath)(importMetaUrlShim)}catch{RF=process.cwd()}var X7t=RF.substring(0,RF.lastIndexOf("node_modules")),EWe={assert:{notStrictEqual:VY.notStrictEqual,strictEqual:VY.strictEqual},cliui:cAe,findUp:lAe,getEnv:s(t=>process.env[t],"getEnv"),inspect:yWe.inspect,getCallerFile:s(()=>{throw new Zs(AWe)},"getCallerFile"),getProcessArgvBin:dWe,mainFilename:X7t||process.cwd(),Parser:uWe,path:{basename:Xg.basename,dirname:Xg.dirname,extname:Xg.extname,relative:Xg.relative,resolve:Xg.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:CWe.readFileSync,require:s(()=>{throw new Zs(J7t)},"require"),requireDirectory:s(()=>{throw new Zs(AWe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:gWe({directory:(0,Xg.resolve)(RF,"../../../locales"),updateFiles:!1})};f();f();f();function cf(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(cf,"assertNotStrictEqual");function hAe(t,e){e.assert.strictEqual(typeof t,"string")}s(hAe,"assertSingleKey");function KD(t){return Object.keys(t)}s(KD,"objectKeys");f();function ea(t){return!!t&&!!t.then&&typeof t.then=="function"}s(ea,"isPromise");f();f();f();function YI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(YI,"parseCommand");var Z7t=["first","second","third","fourth","fifth","sixth"];function Dr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[YI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Zs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new Zs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=xWe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&bWe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=xWe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&bWe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Dr,"argsert");function xWe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(xWe,"guessType");function bWe(t,e,r){throw new Zs(`Invalid ${Z7t[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(bWe,"argumentTypeError");var zY=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Dr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function IWe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(IWe,"commandMiddlewareFactory");function L2(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(ea(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return ea(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(L2,"applyMiddleware");f();function M2(t,e,r=n=>{throw n}){try{let n=eQt(t)?t():t;return ea(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(M2,"maybeAsyncResult");function eQt(t){return typeof t=="function"}s(eQt,"isFunction");f();function gAe(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(gAe,"whichModule");var JD=/(^\*)|(^\$0)/,AAe=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=IWe(o);if(i=i||(()=>{}),Array.isArray(e))if(tQt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(nQt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(TWe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=YI(e);c=c.map(m=>YI(m).cmd);let d=!1,p=[u.cmd].concat(c).filter(m=>JD.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],c=p.slice(1),e=e.replace(JD,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,d,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),d=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(d,c,r,n.aliases,u,i,o,a);return ea(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(d,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,d=n;if(YY(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(ea(p))return p.then(m=>(d=SWe(m)?m:n,this.parseAndUpdateUsage(e,r,d,o,a,c)))}else rQt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),d=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,d,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return ea(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=JD.test(r.original)?r.original.replace(JD,"").trim():r.original,i=e.filter(o=>!JD.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=M2(n,d=>(u(d),d))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=L2(n,a,c,!1),n=M2(n,d=>{let p=r.handler(d);return ea(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),ea(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),d=L2(n,c,u,!0);return ea(d)?d.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,d,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=YI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(d=>{u.push(...l.aliases[d])}),Object.keys(l.argv).forEach(d=>{u.includes(d)&&(r[d]||(r[d]=l.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(l.argv,d)&&(Array.isArray(e[d])||Array.isArray(l.argv[d]))?e[d]=[].concat(e[d],l.argv[d]):e[d]=l.argv[d])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=JD.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(YY(r))return r(e,!0);TWe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=gAe(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;cf(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();cf(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function wWe(t,e,r,n){return new AAe(t,e,r,n)}s(wWe,"command");function TWe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(TWe,"isCommandBuilderDefinition");function tQt(t){return t.every(e=>typeof e=="string")}s(tQt,"isCommandAndAliases");function YY(t){return typeof t=="function"}s(YY,"isCommandBuilderCallback");function rQt(t){return typeof t=="object"}s(rQt,"isCommandBuilderOptionDefinitions");function nQt(t){return typeof t=="object"&&!Array.isArray(t)}s(nQt,"isCommandHandlerDefinition");f();f();function KI(t={},e=()=>!0){let r={};return KD(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(KI,"objFilter");f();function JI(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(JI,"setBlocking");function iQt(t){return typeof t=="boolean"}s(iQt,"isBoolean");function RWe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(U=!0,X){let[K,j]=typeof U=="string"?[!0,U]:[U,X];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,c=K,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(U,X){let K=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let W=i[j];if(iQt(W)){if(X)throw X;if(U)throw Error(U)}else W(U,X,n)}else{if(t.getExitProcess()&&JI(!0),!l){l=!0,c&&(t.showHelp("error"),K.error()),(U||X)&&K.error(U||X);let j=o||a;j&&((U||X)&&K.error(""),K.error(j))}if(X=X||new Zs(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,X);throw X}},"fail");let u=[],d=!1;n.usage=(H,U)=>H===null?(d=!0,u=[],n):(d=!1,u.push([H,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>d,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(H,U)=>{p.push([H,U||""])};let m=[];n.command=s(function(U,X,K,j,W=!1){K&&(m=m.map(J=>(J[2]=!1,J))),m.push([U,X||"",K,j,W])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(U,X){Array.isArray(U)?U.forEach(K=>{n.describe(K,X)}):typeof U=="object"?Object.keys(U).forEach(K=>{n.describe(K,U[K])}):h[U]=X},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=H=>{g.push(H)};let A=!1,y;n.wrap=H=>{A=!0,y=H},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(A||(y=Y(),A=!0),y);let E="__yargsString__:";n.deferY18nLookup=H=>E+H,n.help=s(function(){if(R)return R;w();let U=t.customScriptName?t.$0:e.path.basename(t.$0),X=t.getDemandedOptions(),K=t.getDemandedCommands(),j=t.getDeprecatedOptions(),W=t.getGroups(),J=t.getOptions(),ie=[];ie=ie.concat(Object.keys(h)),ie=ie.concat(Object.keys(X)),ie=ie.concat(Object.keys(K)),ie=ie.concat(Object.keys(J.default)),ie=ie.filter(N),ie=Object.keys(ie.reduce((Me,lt)=>(lt!=="_"&&(Me[lt]=!0),Me),{}));let ae=n.getWrap(),te=e.cliui({width:ae,wrap:!!ae});if(!d){if(u.length)u.forEach(Me=>{te.div({text:`${Me[0].replace(/\$0/g,U)}`}),Me[1]&&te.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),te.div();else if(m.length){let Me=null;K._?Me=`${U} <${r("command")}>
`:Me=`${U} [${r("command")}]
`,te.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){te.div(r("Commands:"));let Me=t.getInternalMethods().getContext(),lt=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((vt,ht)=>vt[0].localeCompare(ht[0])));let _t=U?`${U} `:"";m.forEach(vt=>{let ht=`${_t}${lt}${vt[0].replace(/^\$0 ?/,"")}`;te.span({text:ht,padding:[0,2,0,2],width:b(m,ae,`${U}${lt}`)+4},{text:vt[1]});let ue=[];vt[2]&&ue.push(`[${r("default")}]`),vt[3]&&vt[3].length&&ue.push(`[${r("aliases:")} ${vt[3].join(", ")}]`),vt[4]&&(typeof vt[4]=="string"?ue.push(`[${r("deprecated: %s",vt[4])}]`):ue.push(`[${r("deprecated")}]`)),ue.length?te.div({text:ue.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(J.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Me=>!t.parsed.newAliases[Me]&&pe.every(lt=>(J.alias[lt]||[]).indexOf(Me)===-1));let Ae=r("Options:");W[Ae]||(W[Ae]=[]),D(ie,J.alias,W,Ae);let Oe=s(Me=>/^--/.test(KY(Me)),"isLongSwitch"),Te=Object.keys(W).filter(Me=>W[Me].length>0).map(Me=>{let lt=W[Me].filter(N).map(_t=>{if(pe.includes(_t))return _t;for(let vt=0,ht;(ht=pe[vt])!==void 0;vt++)if((J.alias[ht]||[]).includes(_t))return ht;return _t});return{groupName:Me,normalizedKeys:lt}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:lt})=>{let _t=lt.reduce((vt,ht)=>(vt[ht]=[ht].concat(J.alias[ht]||[]).map(ue=>Me===n.getPositionalGroupName()?ue:(/^[0-9]$/.test(ue)?J.boolean.includes(ht)?"-":"--":ue.length>1?"--":"-")+ue).sort((ue,Ue)=>Oe(ue)===Oe(Ue)?0:Oe(ue)?1:-1).join(", "),vt),{});return{groupName:Me,normalizedKeys:lt,switches:_t}});if(Te.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).some(({normalizedKeys:Me,switches:lt})=>!Me.every(_t=>Oe(lt[_t])))&&Te.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:lt})=>{Me.forEach(_t=>{Oe(lt[_t])&&(lt[_t]=oQt(lt[_t],4))})}),Te.forEach(({groupName:Me,normalizedKeys:lt,switches:_t})=>{te.div(Me),lt.forEach(vt=>{let ht=_t[vt],ue=h[vt]||"",Ue=null;ue.includes(E)&&(ue=r(ue.substring(E.length))),J.boolean.includes(vt)&&(Ue=`[${r("boolean")}]`),J.count.includes(vt)&&(Ue=`[${r("count")}]`),J.string.includes(vt)&&(Ue=`[${r("string")}]`),J.normalize.includes(vt)&&(Ue=`[${r("string")}]`),J.array.includes(vt)&&(Ue=`[${r("array")}]`),J.number.includes(vt)&&(Ue=`[${r("number")}]`);let ye=s(le=>typeof le=="string"?`[${r("deprecated: %s",le)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),We=[vt in j?ye(j[vt]):null,Ue,vt in X?`[${r("required")}]`:null,J.choices&&J.choices[vt]?`[${r("choices:")} ${n.stringifiedValues(J.choices[vt])}]`:null,O(J.default[vt],J.defaultDescription[vt])].filter(Boolean).join(" ");te.span({text:KY(ht),padding:[0,2,0,2+_We(ht)],width:b(_t,ae)+4},ue);let se=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;We&&!se?te.div({text:We,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(r("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,U)}),p.forEach(Me=>{Me[1]===""?te.div({text:Me[0],padding:[0,2,0,2]}):te.div({text:Me[0],padding:[0,2,0,2],width:b(p,ae)+4},{text:Me[1]})}),te.div()),g.length>0){let Me=g.map(lt=>lt.replace(/\$0/g,U)).join(`
`);te.div(`${Me}
`)}return te.toString().replace(/\s*$/,"")},"help");function b(H,U,X){let K=0;return Array.isArray(H)||(H=Object.values(H).map(j=>[j])),H.forEach(j=>{K=Math.max(e.stringWidth(X?`${X} ${KY(j[0])}`:KY(j[0]))+_We(j[0]),K)}),U&&(K=Math.min(K,parseInt((U*.5).toString(),10))),K}s(b,"maxWidth");function w(){let H=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(X=>{U.alias[X].forEach(K=>{h[K]&&n.describe(X,h[K]),K in H&&t.demandOption(X,H[K]),U.boolean.includes(K)&&t.boolean(X),U.count.includes(K)&&t.count(X),U.string.includes(K)&&t.string(X),U.normalize.includes(K)&&t.normalize(X),U.array.includes(K)&&t.array(X),U.number.includes(K)&&t.number(X)})})}s(w,"normalizeAliases");let R;n.cacheHelpMessage=function(){R=this.help()},n.clearCachedHelpMessage=function(){R=void 0},n.hasCachedHelpMessage=function(){return!!R};function D(H,U,X,K){let j=[],W=null;return Object.keys(X).forEach(J=>{j=j.concat(X[J])}),H.forEach(J=>{W=[J].concat(U[J]),W.some(ie=>j.indexOf(ie)!==-1)||X[K].push(J)}),j}s(D,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(n.help())},n.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,X){let K="",j=X||", ",W=[].concat(U);return!U||!W.length||W.forEach(J=>{K.length&&(K+=j),K+=JSON.stringify(J)}),K},"stringifiedValues");function O(H,U){let X=`[${r("default:")} `;if(H===void 0&&!U)return null;if(U)X+=U;else switch(typeof H){case"string":X+=`"${H}"`;break;case"object":X+=JSON.stringify(H);break;default:X+=H}return`${X}]`}s(O,"defaultString");function Y(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(Y,"windowWidth");let ee=null;n.version=H=>{ee=H},n.showVersion=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(ee)},n.reset=s(function(U){return o=null,l=!1,u=[],d=!1,g=[],p=[],m=[],h=KI(h,X=>!U[X]),n},"reset");let V=[];return n.freeze=s(function(){V.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(U=!1){let X=V.pop();X&&(U?(h={...X.descriptions,...h},m=[...X.commands,...m],u=[...X.usages,...u],p=[...X.examples,...p],g=[...X.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=X)},"unfreeze"),n}s(RWe,"usage");function yAe(t){return typeof t=="object"}s(yAe,"isIndentedText");function oQt(t,e){return yAe(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(oQt,"addIndentation");function _We(t){return yAe(t)?t.indentation:0}s(_We,"getIndentation");function KY(t){return yAe(t)?t.text:t}s(KY,"getText");f();f();var kWe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,PWe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var CAe=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(YY(u)){this.indexAfterLastReset=c+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=YI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(E=>{let b=h[E];return typeof b=="string"&&b.length>0}),A=g?h[g]:void 0,y=(l=(c=h[e])!==null&&c!==void 0?c:A)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${y.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(cf(this.customCompletionFunction,null,this.shim),aQt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return ea(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return cQt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return ea(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?PWe:kWe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function DWe(t,e,r,n){return new CAe(t,e,r,n)}s(DWe,"completion");function aQt(t){return t.length<3}s(aQt,"isSyncCompletionFunction");function cQt(t){return t.length>3}s(cQt,"isFallbackCompletionFunction");f();f();function BWe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(BWe,"levenshtein");var NWe=["$0","--","_"];function LWe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let y of Object.keys(h)){let E=h[y];E&&g.indexOf(E)<0&&g.push(E)}let A=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+A))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,A=!0){var y;let E=t.getInternalMethods().getCommandInstance().getCommands(),b=[],w=t.getInternalMethods().getContext();if(Object.keys(p).forEach(R=>{!NWe.includes(R)&&!Object.prototype.hasOwnProperty.call(h,R)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),R)&&!o.isValidAndSomeAliasIsNotNew(R,m)&&b.push(R)}),A&&(w.commands.length>0||E.length>0||g)&&p._.slice(w.commands.length).forEach(R=>{E.includes(""+R)||b.push(""+R)}),A){let D=((y=t.getDemandedCommands()._)===null||y===void 0?void 0:y.max)||0,N=w.commands.length+D;N<p._.length&&p._.slice(N).forEach(O=>{O=String(O),!w.commands.includes(O)&&!b.includes(O)&&b.push(O)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(R=>R.trim()?R:`"${R}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(A=>{m.includes(""+A)||h.push(""+A)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(y=>{NWe.indexOf(y)===-1&&Object.prototype.hasOwnProperty.call(m.choices,y)&&[].concat(p[y]).forEach(E=>{m.choices[y].indexOf(E)===-1&&E!==void 0&&(h[y]=(h[y]||[]).concat(E))})});let g=Object.keys(h);if(!g.length)return;let A=n("Invalid values:");g.forEach(y=>{A+=`
  ${n("Argument: %s, Given: %s, Choices: %s",y,e.stringifiedValues(h[y]),e.stringifiedValues(m.choices[y]))}`}),e.fail(A)},"limitedChoices");let a={};o.implies=s(function(p,m){Dr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(cf(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(A=>{let y=g,E=A;y=c(p,y),A=c(p,A),y&&!A&&m.push(` ${g} -> ${E}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){Dr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((y,E)=>E.length-y.length);let g=null,A=1/0;for(let y=0,E;(E=m[y])!==void 0;y++){let b=BWe(p,E);b<=3&&b<A&&(A=b,g=E)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=KI(a,m=>!p[m]),l=KI(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();cf(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(LWe,"validation");f();var vAe=[],kF;function JY(t,e,r,n){kF=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=uQt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}lQt(a),vAe.push(a),i=o?JSON.parse(kF.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=JY(i,kF.path.dirname(a),r,kF)}return vAe=[],r?MWe(i,t):Object.assign({},i,t)}s(JY,"applyExtends");function lQt(t){if(vAe.indexOf(t)>-1)throw new Zs(`Circular extended configurations: '${t}'.`)}s(lQt,"checkForCircularExtends");function uQt(t,e){return kF.path.resolve(t,e)}s(uQt,"getPathToDefaultConfig");function MWe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=MWe(t[i],e[i]):r[i]=e[i];return r}s(MWe,"mergeDeep");var Nr=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},he=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},xc,F2,PF,Ym,Ep,XY,XI,O2,ZY,Km,eK,Jm,cC,xp,Xm,tK,XD,Yl,Zr,rK,nK,bp,Q2,ZD,U2,ZI,iK,jn,q2,H2,W2,ii,oK,lC,Ka;function r$e(t){return(e=[],r=t.process.cwd(),n)=>{let i=new PAe(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(r$e,"YargsFactory");var FWe=Symbol("copyDoubleDash"),OWe=Symbol("copyDoubleDash"),EAe=Symbol("deleteFromParserHintObject"),QWe=Symbol("emitWarning"),UWe=Symbol("freeze"),qWe=Symbol("getDollarZero"),$2=Symbol("getParserConfiguration"),HWe=Symbol("getUsageConfiguration"),xAe=Symbol("guessLocale"),WWe=Symbol("guessVersion"),$We=Symbol("parsePositionalNumbers"),bAe=Symbol("pkgUp"),eT=Symbol("populateParserHintArray"),e3=Symbol("populateParserHintSingleValueDictionary"),IAe=Symbol("populateParserHintArrayDictionary"),TAe=Symbol("populateParserHintDictionary"),wAe=Symbol("sanitizeKey"),SAe=Symbol("setKey"),_Ae=Symbol("unfreeze"),jWe=Symbol("validateAsync"),GWe=Symbol("getCommandInstance"),VWe=Symbol("getContext"),zWe=Symbol("getHasOutput"),YWe=Symbol("getLoggerInstance"),KWe=Symbol("getParseContext"),JWe=Symbol("getUsageInstance"),XWe=Symbol("getValidationInstance"),sK=Symbol("hasParseCallback"),ZWe=Symbol("isGlobalContext"),j2=Symbol("postProcess"),e$e=Symbol("rebase"),RAe=Symbol("reset"),DF=Symbol("runYargsParserAndExecuteCommands"),kAe=Symbol("runValidation"),t$e=Symbol("setHasOutput"),G2=Symbol("kTrackManuallySetKeys"),PAe=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,xc.set(this,void 0),F2.set(this,void 0),PF.set(this,{commands:[],fullCommands:[]}),Ym.set(this,null),Ep.set(this,null),XY.set(this,"show-hidden"),XI.set(this,null),O2.set(this,!0),ZY.set(this,{}),Km.set(this,!0),eK.set(this,[]),Jm.set(this,void 0),cC.set(this,{}),xp.set(this,!1),Xm.set(this,null),tK.set(this,!0),XD.set(this,void 0),Yl.set(this,""),Zr.set(this,void 0),rK.set(this,void 0),nK.set(this,{}),bp.set(this,null),Q2.set(this,null),ZD.set(this,{}),U2.set(this,{}),ZI.set(this,void 0),iK.set(this,!1),jn.set(this,void 0),q2.set(this,!1),H2.set(this,!1),W2.set(this,!1),ii.set(this,void 0),oK.set(this,{}),lC.set(this,null),Ka.set(this,void 0),Nr(this,jn,i,"f"),Nr(this,ZI,e,"f"),Nr(this,F2,r,"f"),Nr(this,rK,n,"f"),Nr(this,Jm,new zY(this),"f"),this.$0=this[qWe](),this[RAe](),Nr(this,xc,he(this,xc,"f"),"f"),Nr(this,ii,he(this,ii,"f"),"f"),Nr(this,Ka,he(this,Ka,"f"),"f"),Nr(this,Zr,he(this,Zr,"f"),"f"),he(this,Zr,"f").showHiddenOpt=he(this,XY,"f"),Nr(this,XD,this[OWe](),"f")}addHelpOpt(e,r){let n="help";return Dr("[string|boolean] [string]",[e,r],arguments.length),he(this,Xm,"f")&&(this[EAe](he(this,Xm,"f")),Nr(this,Xm,null,"f")),e===!1&&r===void 0?this:(Nr(this,Xm,typeof e=="string"?e:n,"f"),this.boolean(he(this,Xm,"f")),this.describe(he(this,Xm,"f"),r||he(this,ii,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Dr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:he(this,XY,"f");return this.boolean(n),this.describe(n,r||he(this,ii,"f").deferY18nLookup("Show hidden options")),he(this,Zr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Dr("<object|string|array> [string|array]",[e,r],arguments.length),this[IAe](this.alias.bind(this),"alias",e,r),this}array(e){return Dr("<array|string>",[e],arguments.length),this[eT]("array",e),this[G2](e),this}boolean(e){return Dr("<array|string>",[e],arguments.length),this[eT]("boolean",e),this[G2](e),this}check(e,r){return Dr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>M2(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&he(this,ii,"f").fail(o.toString(),o):he(this,ii,"f").fail(he(this,jn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(he(this,ii,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Dr("<object|string|array> [string|array]",[e,r],arguments.length),this[IAe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Dr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Zs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Zs("coerce callback must be provided");return he(this,Zr,"f").key[e]=!0,he(this,Jm,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?M2(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Zs(c.message)}):n},e),this}conflicts(e,r){return Dr("<string|object> [string|array]",[e,r],arguments.length),he(this,Ka,"f").conflicts(e,r),this}config(e="config",r,n){return Dr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=JY(e,he(this,F2,"f"),this[$2]()["deep-merge-config"]||!1,he(this,jn,"f")),he(this,Zr,"f").configObjects=(he(this,Zr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||he(this,ii,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{he(this,Zr,"f").config[i]=n||!0}),this)}completion(e,r,n){return Dr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Nr(this,Ep,e||he(this,Ep,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(he(this,Ep,"f"),r),n&&he(this,Ym,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Dr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),he(this,xc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Dr("<string> [object]",[e,r],arguments.length);let n=he(this,rK,"f")||he(this,jn,"f").require;return he(this,xc,"f").addDirectory(e,n,he(this,jn,"f").getCallerFile(),r),this}count(e){return Dr("<array|string>",[e],arguments.length),this[eT]("count",e),this[G2](e),this}default(e,r,n){return Dr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(hAe(e,he(this,jn,"f")),he(this,Zr,"f").defaultDescription[e]=n),typeof r=="function"&&(hAe(e,he(this,jn,"f")),he(this,Zr,"f").defaultDescription[e]||(he(this,Zr,"f").defaultDescription[e]=he(this,ii,"f").functionDescription(r)),r=r.call()),this[e3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Dr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),he(this,Zr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{cf(n,!0,he(this,jn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(cf(n,!0,he(this,jn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{cf(n,!0,he(this,jn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Dr("<object|string|array> [string]",[e,r],arguments.length),this[e3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Dr("<string> [string|boolean]",[e,r],arguments.length),he(this,Zr,"f").deprecatedOptions[e]=r,this}describe(e,r){return Dr("<object|string|array> [string]",[e,r],arguments.length),this[SAe](e,!0),he(this,ii,"f").describe(e,r),this}detectLocale(e){return Dr("<boolean>",[e],arguments.length),Nr(this,O2,e,"f"),this}env(e){return Dr("[string|boolean]",[e],arguments.length),e===!1?delete he(this,Zr,"f").envPrefix:he(this,Zr,"f").envPrefix=e||"",this}epilogue(e){return Dr("<string>",[e],arguments.length),he(this,ii,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Dr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):he(this,ii,"f").example(e,r),this}exit(e,r){Nr(this,xp,!0,"f"),Nr(this,XI,r,"f"),he(this,Km,"f")&&he(this,jn,"f").process.exit(e)}exitProcess(e=!0){return Dr("[boolean]",[e],arguments.length),Nr(this,Km,e,"f"),this}fail(e){if(Dr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Zs("Invalid first argument. Expected function or boolean 'false'");return he(this,ii,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Dr("<array> [function]",[e,r],arguments.length),r?he(this,Ym,"f").getCompletion(e,r):new Promise((n,i)=>{he(this,Ym,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Dr([],0),he(this,Zr,"f").demandedOptions}getDemandedCommands(){return Dr([],0),he(this,Zr,"f").demandedCommands}getDeprecatedOptions(){return Dr([],0),he(this,Zr,"f").deprecatedOptions}getDetectLocale(){return he(this,O2,"f")}getExitProcess(){return he(this,Km,"f")}getGroups(){return Object.assign({},he(this,cC,"f"),he(this,U2,"f"))}getHelp(){if(Nr(this,xp,!0,"f"),!he(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[DF](he(this,ZI,"f"),void 0,void 0,0,!0);if(ea(r))return r.then(()=>he(this,ii,"f").help())}let e=he(this,xc,"f").runDefaultBuilderOn(this);if(ea(e))return e.then(()=>he(this,ii,"f").help())}return Promise.resolve(he(this,ii,"f").help())}getOptions(){return he(this,Zr,"f")}getStrict(){return he(this,q2,"f")}getStrictCommands(){return he(this,H2,"f")}getStrictOptions(){return he(this,W2,"f")}global(e,r){return Dr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?he(this,Zr,"f").local=he(this,Zr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{he(this,Zr,"f").local.includes(n)||he(this,Zr,"f").local.push(n)}),this}group(e,r){Dr("<string|array> <string>",[e,r],arguments.length);let n=he(this,U2,"f")[r]||he(this,cC,"f")[r];he(this,U2,"f")[r]&&delete he(this,U2,"f")[r];let i={};return he(this,cC,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Dr("<string>",[e],arguments.length),he(this,Zr,"f").hiddenOptions.push(e),this}implies(e,r){return Dr("<string|object> [number|string|array]",[e,r],arguments.length),he(this,Ka,"f").implies(e,r),this}locale(e){return Dr("[string]",[e],arguments.length),e===void 0?(this[xAe](),he(this,jn,"f").y18n.getLocale()):(Nr(this,O2,!1,"f"),he(this,jn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return he(this,Jm,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Dr("<string|object|array> [number]",[e,r],arguments.length),this[e3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Dr("<array|string>",[e],arguments.length),this[eT]("normalize",e),this}number(e){return Dr("<array|string>",[e],arguments.length),this[eT]("number",e),this[G2](e),this}option(e,r){if(Dr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[G2](e),he(this,lC,"f")&&(e==="version"||r?.alias==="version")&&this[QWe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),he(this,Zr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(he(this,Zr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=he(this,ii,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Dr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[UWe](),typeof e>"u"&&(e=he(this,ZI,"f")),typeof r=="object"&&(Nr(this,Q2,r,"f"),r=n),typeof r=="function"&&(Nr(this,bp,r,"f"),r=!1),r||Nr(this,ZI,e,"f"),he(this,bp,"f")&&Nr(this,Km,!1,"f");let i=this[DF](e,!!r),o=this.parsed;return he(this,Ym,"f").setParsed(this.parsed),ea(i)?i.then(a=>(he(this,bp,"f")&&he(this,bp,"f").call(this,he(this,XI,"f"),a,he(this,Yl,"f")),a)).catch(a=>{throw he(this,bp,"f")&&he(this,bp,"f")(a,this.parsed.argv,he(this,Yl,"f")),a}).finally(()=>{this[_Ae](),this.parsed=o}):(he(this,bp,"f")&&he(this,bp,"f").call(this,he(this,XI,"f"),i,he(this,Yl,"f")),this[_Ae](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return ea(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(ea(i))throw new Zs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Dr("<object>",[e],arguments.length),Nr(this,nK,e,"f"),this}pkgConf(e,r){Dr("<string> [string]",[e,r],arguments.length);let n=null,i=this[bAe](r||he(this,F2,"f"));return i[e]&&typeof i[e]=="object"&&(n=JY(i[e],r||he(this,F2,"f"),this[$2]()["deep-merge-config"]||!1,he(this,jn,"f")),he(this,Zr,"f").configObjects=(he(this,Zr,"f").configObjects||[]).concat(n)),this}positional(e,r){Dr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=KI(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=he(this,PF,"f").fullCommands[he(this,PF,"f").fullCommands.length-1],o=i?he(this,xc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return KD(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,he(this,ii,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Dr("[boolean]",[e],arguments.length),Nr(this,iK,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Dr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&he(this,Zr,"f").narg[e]?this:(this[e3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Dr("[string] [string]",[e,r],arguments.length),e=e||this.$0,he(this,XD,"f").log(he(this,Ym,"f").generateCompletionScript(e,r||he(this,Ep,"f")||"completion")),this}showHelp(e){if(Dr("[string|function]",[e],arguments.length),Nr(this,xp,!0,"f"),!he(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[DF](he(this,ZI,"f"),void 0,void 0,0,!0);if(ea(n))return n.then(()=>{he(this,ii,"f").showHelp(e)}),this}let r=he(this,xc,"f").runDefaultBuilderOn(this);if(ea(r))return r.then(()=>{he(this,ii,"f").showHelp(e)}),this}return he(this,ii,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Dr("[boolean|string] [string]",[e,r],arguments.length),he(this,ii,"f").showHelpOnFail(e,r),this}showVersion(e){return Dr("[string|function]",[e],arguments.length),he(this,ii,"f").showVersion(e),this}skipValidation(e){return Dr("<array|string>",[e],arguments.length),this[eT]("skipValidation",e),this}strict(e){return Dr("[boolean]",[e],arguments.length),Nr(this,q2,e!==!1,"f"),this}strictCommands(e){return Dr("[boolean]",[e],arguments.length),Nr(this,H2,e!==!1,"f"),this}strictOptions(e){return Dr("[boolean]",[e],arguments.length),Nr(this,W2,e!==!1,"f"),this}string(e){return Dr("<array|string>",[e],arguments.length),this[eT]("string",e),this[G2](e),this}terminalWidth(){return Dr([],0),he(this,jn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Dr("<object>",[e],arguments.length),Nr(this,O2,!1,"f"),he(this,jn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Dr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(cf(e,null,he(this,jn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Zs(".usage() description must start with $0 if being used as alias for .command()")}else return he(this,ii,"f").usage(e),this}usageConfiguration(e){return Dr("<object>",[e],arguments.length),Nr(this,oK,e,"f"),this}version(e,r,n){let i="version";if(Dr("[boolean|string] [string] [string]",[e,r,n],arguments.length),he(this,lC,"f")&&(this[EAe](he(this,lC,"f")),he(this,ii,"f").version(void 0),Nr(this,lC,null,"f")),arguments.length===0)n=this[WWe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Nr(this,lC,typeof e=="string"?e:i,"f"),r=r||he(this,ii,"f").deferY18nLookup("Show version number"),he(this,ii,"f").version(n||void 0),this.boolean(he(this,lC,"f")),this.describe(he(this,lC,"f"),r),this}wrap(e){return Dr("<number|null|undefined>",[e],arguments.length),he(this,ii,"f").wrap(e),this}[(xc=new WeakMap,F2=new WeakMap,PF=new WeakMap,Ym=new WeakMap,Ep=new WeakMap,XY=new WeakMap,XI=new WeakMap,O2=new WeakMap,ZY=new WeakMap,Km=new WeakMap,eK=new WeakMap,Jm=new WeakMap,cC=new WeakMap,xp=new WeakMap,Xm=new WeakMap,tK=new WeakMap,XD=new WeakMap,Yl=new WeakMap,Zr=new WeakMap,rK=new WeakMap,nK=new WeakMap,bp=new WeakMap,Q2=new WeakMap,ZD=new WeakMap,U2=new WeakMap,ZI=new WeakMap,iK=new WeakMap,jn=new WeakMap,q2=new WeakMap,H2=new WeakMap,W2=new WeakMap,ii=new WeakMap,oK=new WeakMap,lC=new WeakMap,Ka=new WeakMap,FWe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[OWe](){return{log:s((...e)=>{this[sK]()||console.log(...e),Nr(this,xp,!0,"f"),he(this,Yl,"f").length&&Nr(this,Yl,he(this,Yl,"f")+`
`,"f"),Nr(this,Yl,he(this,Yl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[sK]()||console.error(...e),Nr(this,xp,!0,"f"),he(this,Yl,"f").length&&Nr(this,Yl,he(this,Yl,"f")+`
`,"f"),Nr(this,Yl,he(this,Yl,"f")+e.join(" "),"f")},"error")}}[EAe](e){KD(he(this,Zr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=he(this,Zr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete he(this,ii,"f").getDescriptions()[e]}[QWe](e,r,n){he(this,ZY,"f")[n]||(he(this,jn,"f").process.emitWarning(e,r),he(this,ZY,"f")[n]=!0)}[UWe](){he(this,eK,"f").push({options:he(this,Zr,"f"),configObjects:he(this,Zr,"f").configObjects.slice(0),exitProcess:he(this,Km,"f"),groups:he(this,cC,"f"),strict:he(this,q2,"f"),strictCommands:he(this,H2,"f"),strictOptions:he(this,W2,"f"),completionCommand:he(this,Ep,"f"),output:he(this,Yl,"f"),exitError:he(this,XI,"f"),hasOutput:he(this,xp,"f"),parsed:this.parsed,parseFn:he(this,bp,"f"),parseContext:he(this,Q2,"f")}),he(this,ii,"f").freeze(),he(this,Ka,"f").freeze(),he(this,xc,"f").freeze(),he(this,Jm,"f").freeze()}[qWe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(he(this,jn,"f").process.argv()[0])?r=he(this,jn,"f").process.argv().slice(1,2):r=he(this,jn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[e$e](he(this,F2,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),he(this,jn,"f").getEnv("_")&&he(this,jn,"f").getProcessArgvBin()===he(this,jn,"f").getEnv("_")&&(e=he(this,jn,"f").getEnv("_").replace(`${he(this,jn,"f").path.dirname(he(this,jn,"f").process.execPath())}/`,"")),e}[$2](){return he(this,nK,"f")}[HWe](){return he(this,oK,"f")}[xAe](){if(!he(this,O2,"f"))return;let e=he(this,jn,"f").getEnv("LC_ALL")||he(this,jn,"f").getEnv("LC_MESSAGES")||he(this,jn,"f").getEnv("LANG")||he(this,jn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[WWe](){return this[bAe]().version||"unknown"}[$We](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)he(this,jn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[bAe](e){let r=e||"*";if(he(this,ZD,"f")[r])return he(this,ZD,"f")[r];let n={};try{let i=e||he(this,jn,"f").mainFilename;!e&&he(this,jn,"f").path.extname(i)&&(i=he(this,jn,"f").path.dirname(i));let o=he(this,jn,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});cf(o,void 0,he(this,jn,"f")),n=JSON.parse(he(this,jn,"f").readFileSync(o,"utf8"))}catch{}return he(this,ZD,"f")[r]=n||{},he(this,ZD,"f")[r]}[eT](e,r){r=[].concat(r),r.forEach(n=>{n=this[wAe](n),he(this,Zr,"f")[e].push(n)})}[e3](e,r,n,i){this[TAe](e,r,n,i,(o,a,c)=>{he(this,Zr,"f")[o][a]=c})}[IAe](e,r,n,i){this[TAe](e,r,n,i,(o,a,c)=>{he(this,Zr,"f")[o][a]=(he(this,Zr,"f")[o][a]||[]).concat(c)})}[TAe](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of KD(n))e(a,n[a]);else o(r,this[wAe](n),i)}[wAe](e){return e==="__proto__"?"___proto___":e}[SAe](e,r){return this[e3](this[SAe].bind(this),"key",e,r),this}[_Ae](){var e,r,n,i,o,a,c,l,u,d,p,m;let h=he(this,eK,"f").pop();cf(h,void 0,he(this,jn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,d=this,p=this,m=this,{options:{set value(A){Nr(e,Zr,A,"f")}}.value,configObjects:g,exitProcess:{set value(A){Nr(r,Km,A,"f")}}.value,groups:{set value(A){Nr(n,cC,A,"f")}}.value,output:{set value(A){Nr(i,Yl,A,"f")}}.value,exitError:{set value(A){Nr(o,XI,A,"f")}}.value,hasOutput:{set value(A){Nr(a,xp,A,"f")}}.value,parsed:this.parsed,strict:{set value(A){Nr(c,q2,A,"f")}}.value,strictCommands:{set value(A){Nr(l,H2,A,"f")}}.value,strictOptions:{set value(A){Nr(u,W2,A,"f")}}.value,completionCommand:{set value(A){Nr(d,Ep,A,"f")}}.value,parseFn:{set value(A){Nr(p,bp,A,"f")}}.value,parseContext:{set value(A){Nr(m,Q2,A,"f")}}.value}=h,he(this,Zr,"f").configObjects=g,he(this,ii,"f").unfreeze(),he(this,Ka,"f").unfreeze(),he(this,xc,"f").unfreeze(),he(this,Jm,"f").unfreeze()}[jWe](e,r){return M2(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[GWe].bind(this),getContext:this[VWe].bind(this),getHasOutput:this[zWe].bind(this),getLoggerInstance:this[YWe].bind(this),getParseContext:this[KWe].bind(this),getParserConfiguration:this[$2].bind(this),getUsageConfiguration:this[HWe].bind(this),getUsageInstance:this[JWe].bind(this),getValidationInstance:this[XWe].bind(this),hasParseCallback:this[sK].bind(this),isGlobalContext:this[ZWe].bind(this),postProcess:this[j2].bind(this),reset:this[RAe].bind(this),runValidation:this[kAe].bind(this),runYargsParserAndExecuteCommands:this[DF].bind(this),setHasOutput:this[t$e].bind(this)}}[GWe](){return he(this,xc,"f")}[VWe](){return he(this,PF,"f")}[zWe](){return he(this,xp,"f")}[YWe](){return he(this,XD,"f")}[KWe](){return he(this,Q2,"f")||{}}[JWe](){return he(this,ii,"f")}[XWe](){return he(this,Ka,"f")}[sK](){return!!he(this,bp,"f")}[ZWe](){return he(this,tK,"f")}[j2](e,r,n,i){return n||ea(e)||(r||(e=this[FWe](e)),(this[$2]()["parse-positional-numbers"]||this[$2]()["parse-positional-numbers"]===void 0)&&(e=this[$We](e)),i&&(e=L2(e,this,he(this,Jm,"f").getMiddleware(),!1))),e}[RAe](e={}){Nr(this,Zr,he(this,Zr,"f")||{},"f");let r={};r.local=he(this,Zr,"f").local||[],r.configObjects=he(this,Zr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(he(this,U2,"f"),Object.keys(he(this,cC,"f")).reduce((a,c)=>{let l=he(this,cC,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),Nr(this,cC,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(he(this,Zr,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=KI(he(this,Zr,"f")[a],c=>!n[c])}),r.envPrefix=he(this,Zr,"f").envPrefix,Nr(this,Zr,r,"f"),Nr(this,ii,he(this,ii,"f")?he(this,ii,"f").reset(n):RWe(this,he(this,jn,"f")),"f"),Nr(this,Ka,he(this,Ka,"f")?he(this,Ka,"f").reset(n):LWe(this,he(this,ii,"f"),he(this,jn,"f")),"f"),Nr(this,xc,he(this,xc,"f")?he(this,xc,"f").reset():wWe(he(this,ii,"f"),he(this,Ka,"f"),he(this,Jm,"f"),he(this,jn,"f")),"f"),he(this,Ym,"f")||Nr(this,Ym,DWe(this,he(this,ii,"f"),he(this,xc,"f"),he(this,jn,"f")),"f"),he(this,Jm,"f").reset(),Nr(this,Ep,null,"f"),Nr(this,Yl,"","f"),Nr(this,XI,null,"f"),Nr(this,xp,!1,"f"),this.parsed=!1,this}[e$e](e,r){return he(this,jn,"f").path.relative(e,r)}[DF](e,r,n,i=0,o=!1){let a=!!n||o;e=e||he(this,ZI,"f"),he(this,Zr,"f").__=he(this,jn,"f").y18n.__,he(this,Zr,"f").configuration=this[$2]();let c=!!he(this,Zr,"f").configuration["populate--"],l=Object.assign({},he(this,Zr,"f").configuration,{"populate--":!0}),u=he(this,jn,"f").Parser.detailed(e,Object.assign({},he(this,Zr,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),d=Object.assign(u.argv,he(this,Q2,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(A=>{A===he(this,Xm,"f")&&d[A]?h=!0:A===he(this,lC,"f")&&d[A]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&he(this,ii,"f").clearCachedHelpMessage();try{if(this[xAe](),r)return this[j2](d,c,!!n,!1);he(this,Xm,"f")&&[he(this,Xm,"f")].concat(m[he(this,Xm,"f")]||[]).filter(w=>w.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),Nr(this,tK,!1,"f");let A=he(this,xc,"f").getCommands(),y=he(this,Ym,"f").completionKey in d,E=h||y||o;if(d._.length){if(A.length){let b;for(let w=i||0,R;d._[w]!==void 0;w++)if(R=String(d._[w]),A.includes(R)&&R!==he(this,Ep,"f")){let D=he(this,xc,"f").runCommand(R,this,u,w+1,o,h||g||o);return this[j2](D,c,!!n,!1)}else if(!b&&R!==he(this,Ep,"f")){b=R;break}!he(this,xc,"f").hasDefaultCommand()&&he(this,iK,"f")&&b&&!E&&he(this,Ka,"f").recommendCommands(b,A)}he(this,Ep,"f")&&d._.includes(he(this,Ep,"f"))&&!y&&(he(this,Km,"f")&&JI(!0),this.showCompletionScript(),this.exit(0))}if(he(this,xc,"f").hasDefaultCommand()&&!E){let b=he(this,xc,"f").runCommand(null,this,u,0,o,h||g||o);return this[j2](b,c,!!n,!1)}if(y){he(this,Km,"f")&&JI(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${he(this,Ym,"f").completionKey}`)+1);return he(this,Ym,"f").getCompletion(b,(w,R)=>{if(w)throw new Zs(w.message);(R||[]).forEach(D=>{he(this,XD,"f").log(D)}),this.exit(0)}),this[j2](d,!c,!!n,!1)}if(he(this,xp,"f")||(h?(he(this,Km,"f")&&JI(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(he(this,Km,"f")&&JI(!0),a=!0,he(this,ii,"f").showVersion("log"),this.exit(0))),!a&&he(this,Zr,"f").skipValidation.length>0&&(a=Object.keys(d).some(b=>he(this,Zr,"f").skipValidation.indexOf(b)>=0&&d[b]===!0)),!a){if(u.error)throw new Zs(u.error.message);if(!y){let b=this[kAe](m,{},u.error);n||(p=L2(d,this,he(this,Jm,"f").getMiddleware(),!0)),p=this[jWe](b,p??d),ea(p)&&!n&&(p=p.then(()=>L2(d,this,he(this,Jm,"f").getMiddleware(),!1)))}}}catch(A){if(A instanceof Zs)he(this,ii,"f").fail(A.message,A);else throw A}return this[j2](p??d,c,!!n,!0)}[kAe](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Zs(n.message);he(this,Ka,"f").nonOptionCount(a),he(this,Ka,"f").requiredArguments(a,o);let c=!1;he(this,H2,"f")&&(c=he(this,Ka,"f").unknownCommands(a)),he(this,q2,"f")&&!c?he(this,Ka,"f").unknownArguments(a,e,r,!!i):he(this,W2,"f")&&he(this,Ka,"f").unknownArguments(a,e,{},!1,!1),he(this,Ka,"f").limitedChoices(a),he(this,Ka,"f").implications(a),he(this,Ka,"f").conflicting(a)}}[t$e](){Nr(this,xp,!0,"f")}[G2](e){if(typeof e=="string")he(this,Zr,"f").key[e]=!0;else for(let r of e)he(this,Zr,"f").key[r]=!0}};function SWe(t){return!!t&&typeof t.getInternalMethods=="function"}s(SWe,"isYargsInstance");var dQt=r$e(EWe),n$e=dQt;f();f();f();var i$e={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function o$e(t,e,r){let n=qr.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,i$e.NewGitHubLogin,n)}s(o$e,"telemetryNewGitHubLogin");function s$e(t,e){let r=qr.createAndMarkAsIssued({authType:e});return Bt(t,i$e.GitHubLoginSuccess,r)}s(s$e,"telemetryGitHubLoginSuccess");var DAe=class extends Ws{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function fQt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...tp(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(yn).fetch(o,n)}catch(a){throw a instanceof Error&&qM(a)?new Ws(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new Ws(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(fQt,"requestDeviceFlowStage1");async function pQt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...tp(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(yn).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new DAe(a):new Ws(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(pQt,"requestDeviceFlowStage2");async function mQt(t,e){s$e(t,"deviceFlow");let n=await(await Tm(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new Ws(`Error retrieving user information: ${String(n.errors)}`);return n}s(mQt,"requestUserInfo");var V2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(Vd).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){o$e(e,"unknown","deviceFlow");let i=await fQt(e,r,n),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*l));let u=await pQt(e,i.device_code,r,n);if(a-=l,c=u.access_token,c){let d=await mQt(e,{...n,accessToken:c});return{...n,githubAppId:r,login:d.login,accessToken:c}}l=u.interval??l}throw new Ws("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();f();f();var Gv="byok",Il=class{constructor(e){this.persistenceManager=e}static{s(this,"ByokPersistence")}async getAPIKey(e,r){if(r){let i=await this.persistenceManager.read(Gv,`${e}-${r}-api-key`);if(i)return i}return await this.persistenceManager.read(Gv,`${e}-api-key`)}async storeAPIKey(e,r,n,i){n!==2&&(n===0?await this.persistenceManager.update(Gv,`${e}-api-key`,r):n===1&&i&&await this.persistenceManager.update(Gv,`${e}-${i}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(Gv,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(Gv,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(Gv,`${e}-models-config`)||{}}async saveModelConfig(e,r,n,i,o){let a=await this.getStoredModelConfigs(e);a[r]=n,await this.persistenceManager.update(Gv,`${e}-models-config`,a),i&&o&&await this.storeAPIKey(e,i,o,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),i=n[r];i&&(delete n[r],await this.persistenceManager.update(Gv,`${e}-models-config`,n),i.deploymentUrl&&await this.deleteAPIKey(e,1,r))}};var Zm={Azure:"Azure",OpenAI:"OpenAI"};function tT(t){switch(t){case Zm.Azure:return 1;default:return 0}}s(tT,"getAuthTypeForProvider");async function t3(t,e,r){let i=await new Il(t.get(Bi)).getStoredModelConfigs(e),o=i?Object.values(i).find(d=>d.isRegistered!==!1):void 0,a=o?.modelCapabilities,c=a?.name||r,l=a?.maxInputTokens||1e5,u=a?.maxOutputTokens||8192;return{modelId:r,uiName:c,modelFamily:fn.BYOK,providerName:e,deploymentUrl:o?.deploymentUrl,maxRequestTokens:l,maxResponseTokens:u,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!a?.toolCalling}}s(t3,"resolveModelConfiguration");async function a$e(t,e,r){return await new Il(t.get(Bi)).getAPIKey(e,r)}s(a$e,"resolveModelKey");function c$e(t,e){let{protocol:r,hostname:n,pathname:i}=new URL(e);if(i.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}s(c$e,"resolveAzureUrl");f();var hQt=new It("openAICompatibleLMProvider"),BAe={[Zm.OpenAI]:"https://api.openai.com/v1"},cK=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{s(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=`${this.getBaseUrl()}/models`,r={"Content-Type":"application/json"},n=await new Il(this.ctx.get(Bi)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data){let l=this._knownModels?.[c.id];l&&a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:l})}return a}catch(e){throw hQt.error(this.ctx,"Error fetching models from OpenAI-compatible provider:",e),e}}getBaseUrl(){let e=BAe[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};var z2=class extends cK{static{s(this,"OpenAIProvider")}constructor(e){super(Zm.OpenAI,e)}async getAllModels(){return await super.getAllModels()}};f();var lf=class{static{s(this,"CitationManager")}},lK=class extends lf{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var gQt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},ps=class{constructor(){this.capabilities={...gQt};this.emitter=new Oa;this.onDidSetCapabilities=this.emitter.event}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};f();f();f();f();function NAe(t,e){let r=Zg(t,e);return r===-1?void 0:t[r]}s(NAe,"findLastMonotonous");function Zg(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(Zg,"findLastIdxMonotonous");function r3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(r3,"findFirstIdxMonotonousOrArrLen");var l$e=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=Zg(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var LAe=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?uK.isErrorNoTelemetry(e)?new uK(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},u$e=new LAe;function Y2(t){u$e.onUnexpectedError(t)}s(Y2,"onBugIndicatingError");function n3(t){AQt(t)||u$e.onUnexpectedError(t)}s(n3,"onUnexpectedError");var MAe="Canceled";function AQt(t){return t instanceof uC?!0:t instanceof Error&&t.name===MAe&&t.message===MAe}s(AQt,"isCancellationError");var uC=class extends Error{static{s(this,"CancellationError")}constructor(){super(MAe),this.name=this.message}};function BF(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(BF,"illegalArgument");function d$e(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(d$e,"illegalState");var uK=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Cn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function NF(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(NF,"equals");function*K2(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(K2,"groupAdjacentBy");function p$e(t){return t.filter(e=>!!e)}s(p$e,"coalesce");var m$e;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(m$e||={});function eh(t,e){return(r,n)=>e(t(r),t(n))}s(eh,"compareBy");var th=s((t,e)=>t-e,"numberComparator");var dK=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},f$e=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||m$e.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function LF(t,e){return t.reduce((r,n)=>r+e(n),0)}s(LF,"sumBy");f();function y$e(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(y$e,"groupBy");var g$e,A$e,h$e=class{constructor(e,r){this.toKey=r;this._map=new Map;this[g$e]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(A$e=Symbol.iterator,g$e=Symbol.toStringTag,A$e)](){return this.values()}};f();function FAe(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(FAe,"createSingleCallFunction");f();var OAe;(w=>{function t(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}w.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}w.empty=r,s(r,"empty");function*n(R){yield R}w.single=n,s(n,"single");function i(R){return t(R)?R:n(R)}w.wrap=i,s(i,"wrap");function o(R){return R||e}w.from=o,s(o,"from");function*a(R){for(let D=R.length-1;D>=0;D--)yield R[D]}w.reverse=a,s(a,"reverse");function c(R){return!R||R[Symbol.iterator]().next().done===!0}w.isEmpty=c,s(c,"isEmpty");function l(R){return R[Symbol.iterator]().next().value}w.first=l,s(l,"first");function u(R,D){let N=0;for(let O of R)if(D(O,N++))return!0;return!1}w.some=u,s(u,"some");function d(R,D){for(let N of R)if(D(N))return N}w.find=d,s(d,"find");function*p(R,D){for(let N of R)D(N)&&(yield N)}w.filter=p,s(p,"filter");function*m(R,D){let N=0;for(let O of R)yield D(O,N++)}w.map=m,s(m,"map");function*h(R,D){let N=0;for(let O of R)yield*D(O,N++)}w.flatMap=h,s(h,"flatMap");function*g(...R){for(let D of R)yield*D}w.concat=g,s(g,"concat");function A(R,D,N){let O=N;for(let Y of R)O=D(O,Y);return O}w.reduce=A,s(A,"reduce");function*y(R,D,N=R.length){for(D<-R.length&&(D=0),D<0&&(D+=R.length),N<0?N+=R.length:N>R.length&&(N=R.length);D<N;D++)yield R[D]}w.slice=y,s(y,"slice");function E(R,D=Number.POSITIVE_INFINITY){let N=[];if(D===0)return[N,R];let O=R[Symbol.iterator]();for(let Y=0;Y<D;Y++){let ee=O.next();if(ee.done)return[N,w.empty()];N.push(ee.value)}return[N,{[Symbol.iterator](){return O}}]}w.consume=E,s(E,"consume");async function b(R){let D=[];for await(let N of R)D.push(N);return Promise.resolve(D)}w.asyncToArray=b,s(b,"asyncToArray")})(OAe||={});f();var QAe=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function CQt(t){return Array.isArray(t)}s(CQt,"isEntries");var v$e,fK=class t{constructor(e,r){this[v$e]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(CQt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new QAe(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(v$e=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},E$e,C$e=class{constructor(e,r){this[E$e]="ResourceSet";!e||typeof e=="function"?this._map=new fK(e):(this._map=new fK(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(E$e=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var x$e,UAe=class{constructor(){this[x$e]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(x$e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},qAe=class extends UAe{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},pK=class extends qAe{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var mK=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var vQt=!1,i3=null;var b$e=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&d.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new mK;for(let l of n){let u=i(l);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),l)}n.sort(eh(l=>l.idx,th));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),A=y$e([...g].map(y=>i(y)[p]),y=>y);delete A[u[p]];for(let[y,E]of Object.entries(A))d.unshift(`    - stacktraces of ${E.length} other leaks continue with ${y}`);d.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function EQt(t){i3=t}s(EQt,"setDisposableTracker");if(vQt){let t="__is_disposable_tracked__";EQt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==xs.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==xs.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function o3(t){return i3?.trackDisposable(t),t}s(o3,"trackDisposable");function s3(t){i3?.markAsDisposed(t)}s(s3,"markAsDisposed");function HAe(t,e){i3?.setParent(t,e)}s(HAe,"setParentOfDisposable");function xQt(t,e){if(i3)for(let r of t)i3.setParent(r,e)}s(xQt,"setParentOfDisposables");function I$e(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(I$e,"isDisposable");function hK(t){if(OAe.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(hK,"dispose");function T$e(...t){let e=bc(()=>hK(t));return xQt(t,e),e}s(T$e,"combinedDisposable");function bc(t){let e=o3({dispose:FAe(()=>{s3(e),t()})});return e}s(bc,"toDisposable");var Mu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;o3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(s3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{hK(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return HAe(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),HAe(e,null))}},xs=class{constructor(){this._store=new Mu;o3(this),HAe(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){s3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var rh=class extends xs{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ws(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var w$e=Fe(require("events"));var gK="CompletionRequested",dC=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new w$e.default;notifyRequest(e,r,n,i,o){return this.#e.emit(gK,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=hl(this.ctx,e,`event.${gK}`);return this.#e.on(gK,r),Fn.Disposable.create(()=>this.#e.off(gK,r))}};f();var WAe=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},a3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new WAe(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var AK=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=R$e(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,d=S$e(n.text,!1,o);if(l-c===d.length)for(let m=0,h=d.length;m<h;m++)u[m+c+1]=d[m];else d.length<1e4?u.splice(c+1,l-c,...d):this._lineOffsets=u=u.slice(0,c+1).concat(d,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=S$e(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&_$e(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},rT;(function(t){function e(i,o,a,c){return new AK(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof AK)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=$Ae(o.map(bQt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),l=0,u=[];for(let d of c){let p=i.offsetAt(d.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),d.newText.length&&u.push(d.newText),l=i.offsetAt(d.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(rT||(rT={}));function $Ae(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);$Ae(n,e),$Ae(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s($Ae,"mergeSort");function S$e(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);_$e(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(S$e,"computeLineOffsets");function _$e(t){return t===13||t===10}s(_$e,"isEOL");function R$e(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(R$e,"getWellformedRange");function bQt(t){let e=R$e(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(bQt,"getWellformedEdit");f();var k$e;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(k$e||(k$e={}));var jAe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(jAe||(jAe={}));var P$e;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(P$e||(P$e={}));var yK;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(yK||(yK={}));var Id;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=yK.MAX_VALUE),i===Number.MAX_VALUE&&(i=yK.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.line)&&Xe.uinteger(i.character)}s(r,"is"),t.is=r})(Id||(Id={}));var Ns;(function(t){function e(n,i,o,a){if(Xe.uinteger(n)&&Xe.uinteger(i)&&Xe.uinteger(o)&&Xe.uinteger(a))return{start:Id.create(n,i),end:Id.create(o,a)};if(Id.is(n)&&Id.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Id.is(i.start)&&Id.is(i.end)}s(r,"is"),t.is=r})(Ns||(Ns={}));var CK;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&(Xe.string(i.uri)||Xe.undefined(i.uri))}s(r,"is"),t.is=r})(CK||(CK={}));var D$e;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.targetRange)&&Xe.string(i.targetUri)&&Ns.is(i.targetSelectionRange)&&(Ns.is(i.originSelectionRange)||Xe.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(D$e||(D$e={}));var GAe;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.numberRange(i.red,0,1)&&Xe.numberRange(i.green,0,1)&&Xe.numberRange(i.blue,0,1)&&Xe.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(GAe||(GAe={}));var B$e;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&GAe.is(i.color)}s(r,"is"),t.is=r})(B$e||(B$e={}));var N$e;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.undefined(i.textEdit)||l3.is(i))&&(Xe.undefined(i.additionalTextEdits)||Xe.typedArray(i.additionalTextEdits,l3.is))}s(r,"is"),t.is=r})(N$e||(N$e={}));var L$e;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(L$e||(L$e={}));var M$e;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return Xe.defined(o)&&(u.startCharacter=o),Xe.defined(a)&&(u.endCharacter=a),Xe.defined(c)&&(u.kind=c),Xe.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.startLine)&&Xe.uinteger(i.startLine)&&(Xe.undefined(i.startCharacter)||Xe.uinteger(i.startCharacter))&&(Xe.undefined(i.endCharacter)||Xe.uinteger(i.endCharacter))&&(Xe.undefined(i.kind)||Xe.string(i.kind))}s(r,"is"),t.is=r})(M$e||(M$e={}));var VAe;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&CK.is(i.location)&&Xe.string(i.message)}s(r,"is"),t.is=r})(VAe||(VAe={}));var F$e;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(F$e||(F$e={}));var O$e;(function(t){t.Unnecessary=1,t.Deprecated=2})(O$e||(O$e={}));var Q$e;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Xe.string(n.href)}s(e,"is"),t.is=e})(Q$e||(Q$e={}));var vK;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return Xe.defined(o)&&(u.severity=o),Xe.defined(a)&&(u.code=a),Xe.defined(c)&&(u.source=c),Xe.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Xe.defined(o)&&Ns.is(o.range)&&Xe.string(o.message)&&(Xe.number(o.severity)||Xe.undefined(o.severity))&&(Xe.integer(o.code)||Xe.string(o.code)||Xe.undefined(o.code))&&(Xe.undefined(o.codeDescription)||Xe.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Xe.string(o.source)||Xe.undefined(o.source))&&(Xe.undefined(o.relatedInformation)||Xe.typedArray(o.relatedInformation,VAe.is))}s(r,"is"),t.is=r})(vK||(vK={}));var c3;(function(t){function e(n,i,...o){let a={title:n,command:i};return Xe.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.title)&&Xe.string(i.command)}s(r,"is"),t.is=r})(c3||(c3={}));var l3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Xe.objectLiteral(a)&&Xe.string(a.newText)&&Ns.is(a.range)}s(i,"is"),t.is=i})(l3||(l3={}));var zAe;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Xe.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(zAe||(zAe={}));var u3;(function(t){function e(r){let n=r;return Xe.string(n)}s(e,"is"),t.is=e})(u3||(u3={}));var U$e;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return l3.is(a)&&(zAe.is(a.annotationId)||u3.is(a.annotationId))}s(i,"is"),t.is=i})(U$e||(U$e={}));var YAe;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&eye.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(YAe||(YAe={}));var KAe;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||u3.is(i.annotationId))}s(r,"is"),t.is=r})(KAe||(KAe={}));var JAe;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Xe.string(i.oldUri)&&Xe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||u3.is(i.annotationId))}s(r,"is"),t.is=r})(JAe||(JAe={}));var XAe;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Xe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Xe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||u3.is(i.annotationId))}s(r,"is"),t.is=r})(XAe||(XAe={}));var ZAe;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Xe.string(i.kind)?KAe.is(i)||JAe.is(i)||XAe.is(i):YAe.is(i)))}s(e,"is"),t.is=e})(ZAe||(ZAe={}));var q$e;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)}s(r,"is"),t.is=r})(q$e||(q$e={}));var H$e;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.integer(i.version)}s(r,"is"),t.is=r})(H$e||(H$e={}));var eye;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&(i.version===null||Xe.integer(i.version))}s(r,"is"),t.is=r})(eye||(eye={}));var W$e;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.string(i.languageId)&&Xe.integer(i.version)&&Xe.string(i.text)}s(r,"is"),t.is=r})(W$e||(W$e={}));var tye;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(tye||(tye={}));var MF;(function(t){function e(r){let n=r;return Xe.objectLiteral(r)&&tye.is(n.kind)&&Xe.string(n.value)}s(e,"is"),t.is=e})(MF||(MF={}));var $$e;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})($$e||($$e={}));var j$e;(function(t){t.PlainText=1,t.Snippet=2})(j$e||(j$e={}));var G$e;(function(t){t.Deprecated=1})(G$e||(G$e={}));var V$e;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.newText)&&Ns.is(i.insert)&&Ns.is(i.replace)}s(r,"is"),t.is=r})(V$e||(V$e={}));var z$e;(function(t){t.asIs=1,t.adjustIndentation=2})(z$e||(z$e={}));var Y$e;(function(t){function e(r){let n=r;return n&&(Xe.string(n.detail)||n.detail===void 0)&&(Xe.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(Y$e||(Y$e={}));var K$e;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(K$e||(K$e={}));var J$e;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(J$e||(J$e={}));var EK;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Xe.string(i)||Xe.objectLiteral(i)&&Xe.string(i.language)&&Xe.string(i.value)}s(r,"is"),t.is=r})(EK||(EK={}));var X$e;(function(t){function e(r){let n=r;return!!n&&Xe.objectLiteral(n)&&(MF.is(n.contents)||EK.is(n.contents)||Xe.typedArray(n.contents,EK.is))&&(r.range===void 0||Ns.is(r.range))}s(e,"is"),t.is=e})(X$e||(X$e={}));var Z$e;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(Z$e||(Z$e={}));var eje;(function(t){function e(r,n,...i){let o={label:r};return Xe.defined(n)&&(o.documentation=n),Xe.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(eje||(eje={}));var tje;(function(t){t.Text=1,t.Read=2,t.Write=3})(tje||(tje={}));var rje;(function(t){function e(r,n){let i={range:r};return Xe.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(rje||(rje={}));var nje;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(nje||(nje={}));var ije;(function(t){t.Deprecated=1})(ije||(ije={}));var oje;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(oje||(oje={}));var sje;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(sje||(sje={}));var aje;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.name)&&Xe.number(i.kind)&&Ns.is(i.range)&&Ns.is(i.selectionRange)&&(i.detail===void 0||Xe.string(i.detail))&&(i.deprecated===void 0||Xe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(aje||(aje={}));var cje;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(cje||(cje={}));var xK;(function(t){t.Invoked=1,t.Automatic=2})(xK||(xK={}));var lje;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.typedArray(i.diagnostics,vK.is)&&(i.only===void 0||Xe.typedArray(i.only,Xe.string))&&(i.triggerKind===void 0||i.triggerKind===xK.Invoked||i.triggerKind===xK.Automatic)}s(r,"is"),t.is=r})(lje||(lje={}));var uje;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):c3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.title)&&(i.diagnostics===void 0||Xe.typedArray(i.diagnostics,vK.is))&&(i.kind===void 0||Xe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||c3.is(i.command))&&(i.isPreferred===void 0||Xe.boolean(i.isPreferred))&&(i.edit===void 0||ZAe.is(i.edit))}s(r,"is"),t.is=r})(uje||(uje={}));var dje;(function(t){function e(n,i){let o={range:n};return Xe.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(i.range)&&(Xe.undefined(i.command)||c3.is(i.command))}s(r,"is"),t.is=r})(dje||(dje={}));var fje;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.uinteger(i.tabSize)&&Xe.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(fje||(fje={}));var pje;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(i.range)&&(Xe.undefined(i.target)||Xe.string(i.target))}s(r,"is"),t.is=r})(pje||(pje={}));var mje;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(mje||(mje={}));var hje;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(hje||(hje={}));var gje;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(gje||(gje={}));var Aje;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(Aje||(Aje={}));var yje;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&Xe.string(i.text)}s(r,"is"),t.is=r})(yje||(yje={}));var Cje;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&Xe.boolean(i.caseSensitiveLookup)&&(Xe.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(Cje||(Cje={}));var vje;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&(Xe.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(vje||(vje={}));var Eje;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(n.stoppedLocation)}s(r,"is"),t.is=r})(Eje||(Eje={}));var rye;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(rye||(rye={}));var nye;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&(i.tooltip===void 0||Xe.string(i.tooltip)||MF.is(i.tooltip))&&(i.location===void 0||CK.is(i.location))&&(i.command===void 0||c3.is(i.command))}s(r,"is"),t.is=r})(nye||(nye={}));var xje;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Id.is(i.position)&&(Xe.string(i.label)||Xe.typedArray(i.label,nye.is))&&(i.kind===void 0||rye.is(i.kind))&&i.textEdits===void 0||Xe.typedArray(i.textEdits,l3.is)&&(i.tooltip===void 0||Xe.string(i.tooltip)||MF.is(i.tooltip))&&(i.paddingLeft===void 0||Xe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Xe.boolean(i.paddingRight))}s(r,"is"),t.is=r})(xje||(xje={}));var bje;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(bje||(bje={}));var Ije;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(Ije||(Ije={}));var Tje;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(Tje||(Tje={}));var wje;(function(t){t.Invoked=0,t.Automatic=1})(wje||(wje={}));var Sje;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(Sje||(Sje={}));var _je;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(_je||(_je={}));var Rje;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&jAe.is(n.uri)&&Xe.string(n.name)}s(e,"is"),t.is=e})(Rje||(Rje={}));var kje;(function(t){function e(o,a,c,l){return new iye(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Xe.defined(a)&&Xe.string(a.uri)&&(Xe.undefined(a.languageId)||Xe.string(a.languageId))&&Xe.uinteger(a.lineCount)&&Xe.func(a.getText)&&Xe.func(a.positionAt)&&Xe.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=c.length;for(let d=l.length-1;d>=0;d--){let p=l[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let d=0,p=0,m=0;for(;d<l.length&&p<u.length;)a(l[d],u[p])<=0?o[m++]=l[d++]:o[m++]=u[p++];for(;d<l.length;)o[m++]=l[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(kje||(kje={}));var iye=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Id.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Id.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Xe;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,A){return e.call(h)==="[object Number]"&&g<=h&&h<=A}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Xe||(Xe={}));var ms=class{static{s(this,"LocationFactory")}static{this.range=Ns.create.bind(Ns)}static{this.position=Id.create.bind(Id)}},Vv=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=rT.create(e.clientUri,e.clientLanguageId,n,e.getText());return rT.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=rT.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return rT.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=QD({uri:e,languageId:r})){return new t(yl(e),rT.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Ns.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Ns.create(Id.create(r,0),Id.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var FF={isBlocked:!1,reason:"VALID_FILE"},bK={isBlocked:!1,reason:"NO_MATCHING_POLICY"},Pje={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},J2={all:"all",repo:"repo"},nT=new It("contentExclusion");f();f();var IK=class{static{s(this,"PolicyEvaluator")}};f();f();f();var Dje=new It("repository"),X2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},eA=class{static{s(this,"GitConfigLoader")}},TK=class extends eA{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};f();var Bje=require("os");var wK=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return nI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=nI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,Bje.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var SK=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(eA).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new wK(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var IQt=100,oye=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},zv=class t{constructor(e){this.ctx=e;this.remoteResolver=new SK;this.cache=new Ur(IQt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=gd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new oye(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(To),i=Mo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=Mo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=m_(r,o[1]),c=Mo(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=Mo(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=Mo(a,"commondir");a=m_(a,(await e.readFileString(u)).trimEnd());let d=Mo(a,"config");return await e.stat(d),d}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var Z2=s((t,e)=>{if(oC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...oC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var RK=new WeakMap;function kK(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&RK.has(t))return RK.get(t);switch(RK.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=kK(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+kK(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+kK(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return RK.set(t,n),n}s(kK,"t");function PK(t){return kK(t,0)}s(PK,"r");var sye=new WeakMap;function Nje(t,e,r=PK(e)){let n,i,o=sye.get(t);o||(sye.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=n[d++];u.r(m));}s(p,"o"),sye.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?n[d-1].r(u):n[d-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,d){l.s=u,l.r=d})}s(Nje,"n");var Lje=new WeakMap;function TQt(t,e,r,n=PK(r)){if(e||(e=Lje.get(t)),e||Lje.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=Nje(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(TQt,"n");function Mje(t,e){return function(r,n){return TQt(t,e,r,n)}}s(Mje,"o");f();var nGe=Fe(Yje(),1);f();var QF=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var BQt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},UF=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),NQt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),Kje=s(t=>t.join(""),"rangesToString"),Jje=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,d=r,p="";e:for(;o<t.length;){let A=t.charAt(o);if((A==="!"||A==="^")&&o===r+1){u=!0,o++;continue}if(A==="]"&&a&&!l){d=o+1;break}if(a=!0,A==="\\"&&!l){l=!0,o++;continue}if(A==="["&&!l){for(let[y,[E,b,w]]of Object.entries(BQt))if(t.startsWith(y,o)){if(p)return["$.",!1,t.length-r,!0];o+=y.length,w?i.push(E):n.push(E),c=c||b;continue e}}if(l=!1,p){A>p?n.push(UF(p)+"-"+UF(A)):A===p&&n.push(UF(A)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(UF(A+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=A,o+=2;continue}n.push(UF(A)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let A=n[0].length===2?n[0].slice(-1):n[0];return[NQt(A),!1,d-r,!1]}let m="["+(u?"^":"")+Kje(n)+"]",h="["+(u?"":"^")+Kje(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,d-r,!0]},"parseClass");f();var iT=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var LQt=new Set(["!","?","+","*","@"]),Xje=s(t=>LQt.has(t),"isExtglobType"),MQt="(?!(?:^|/)\\.\\.?(?:$|/))",DK="(?!\\.)",FQt=new Set(["[","."]),OQt=new Set(["..","."]),QQt=new Set("().*{}+?[]^$\\!"),UQt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),lye="[^/]",Zje=lye+"*?",eGe=lye+"+?",d3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let A=e.charAt(h++);if(o||A==="\\"){o=!o,g+=A;continue}if(a){h===c+1?(A==="^"||A==="!")&&(l=!0):A==="]"&&!(h===c+2&&l)&&(a=!1),g+=A;continue}else if(A==="["){a=!0,c=h,l=!1,g+=A;continue}if(!i.noext&&Xje(A)&&e.charAt(h)==="("){r.push(g),g="";let y=new t(A,r);h=t.#u(e,y,h,i),r.push(y);continue}g+=A}return r.push(g),h}let u=n+1,d=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(Xje(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),d.push(m),m="",r.push(...p,d),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,A,y,E]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||E,g}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&OQt.has(this.#n[0]))){let g=FQt,A=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),y=!r&&!e&&g.has(u.charAt(0));d=A?MQt:y?DK:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,iT(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,iT(this.toString()),!1,!1]}let a=!n||e||r||!DK?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?DK:"")+eGe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?DK:"")+Zje+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,iT(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(QQt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,d,p,m]=Jje(e,c);if(p){o+=u,a=a||d,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=eGe:o+=Zje,r=!0;continue}if(l==="?"){o+=lye,r=!0;continue}o+=UQt(l)}return[o,iT(e),!!r,a]}};f();var uye=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Ic=s((t,e,r={})=>(QF(e),!r.nocomment&&e.charAt(0)==="#"?!1:new f3(e,r).match(t)),"minimatch"),qQt=/^\*+([^+@!?\*\[\(]*)$/,HQt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),WQt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),$Qt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),jQt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),GQt=/^\*+\.\*+$/,VQt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),zQt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),YQt=/^\.\*+$/,KQt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),JQt=/^\*+$/,XQt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),ZQt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),eUt=/^\?+([^+@!?\*\[\(]*)?$/,tUt=s(([t,e=""])=>{let r=iGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),rUt=s(([t,e=""])=>{let r=oGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),nUt=s(([t,e=""])=>{let r=oGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),iUt=s(([t,e=""])=>{let r=iGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),iGe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),oGe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),sGe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",tGe={win32:{sep:"\\"},posix:{sep:"/"}},oUt=sGe==="win32"?tGe.win32.sep:tGe.posix.sep;Ic.sep=oUt;var ih=Symbol("globstar **");Ic.GLOBSTAR=ih;var sUt="[^/]",aUt=sUt+"*?",cUt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",lUt="(?:(?!(?:\\/|^)\\.).)*?",uUt=s((t,e={})=>r=>Ic(r,t,e),"filter");Ic.filter=uUt;var nh=s((t,e={})=>Object.assign({},t,e),"ext"),dUt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ic;let e=Ic;return Object.assign(s((n,i,o={})=>e(n,i,nh(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,nh(t,o))}static defaults(i){return e.defaults(nh(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,nh(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,nh(t,o))}},unescape:s((n,i={})=>e.unescape(n,nh(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,nh(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,nh(t,i)),"filter"),defaults:s(n=>e.defaults(nh(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,nh(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,nh(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,nh(t,o)),"match"),sep:e.sep,GLOBSTAR:ih})},"defaults");Ic.defaults=dUt;var aGe=s((t,e={})=>(QF(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,nGe.default)(t)),"braceExpand");Ic.braceExpand=aGe;var fUt=s((t,e={})=>new f3(t,e).makeRe(),"makeRe");Ic.makeRe=fUt;var pUt=s((t,e,r={})=>{let n=new f3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Ic.match=pUt;var rGe=/[?*]|[+@!]\(.*?\)|\[|\]/,mUt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),f3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){QF(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||sGe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!rGe.test(o[2]))&&!rGe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let A=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!A&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),E=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!E&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),w=y?3:A?0:void 0,R=b?3:E?0:void 0;if(typeof w=="number"&&typeof R=="number"){let[D,N]=[e[w],r[R]];D.toLowerCase()===N.toLowerCase()&&(r[R]=D,R>w?r=r.slice(R):w>R&&(e=e.slice(w)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var d=r[c],p=e[a];if(this.debug(r,d,p),d===!1)return!1;if(d===ih){this.debug("GLOBSTAR",[r,d,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let A;if(typeof d=="string"?(A=p===d,this.debug("string match",d,p,A)):(A=d.test(p),this.debug("pattern match",d,p,A)),!A)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return aGe(this.pattern,this.options)}parse(e){QF(e);let r=this.options;if(e==="**")return ih;if(e==="")return"";let n,i=null;(n=e.match(JQt))?i=r.dot?ZQt:XQt:(n=e.match(qQt))?i=(r.nocase?r.dot?jQt:$Qt:r.dot?WQt:HQt)(n[1]):(n=e.match(eUt))?i=(r.nocase?r.dot?rUt:tUt:r.dot?nUt:iUt)(n):(n=e.match(GQt))?i=r.dot?zQt:VQt:(n=e.match(YQt))&&(i=KQt);let o=d3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?aUt:r.dot?cUt:lUt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?mUt(d):d===ih?ih:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==ih||h===ih||(h===void 0?m!==void 0&&m!==ih?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==ih&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=ih))}),u.filter(d=>d!==ih).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Ic.defaults(e).Minimatch}};Ic.AST=d3;Ic.Minimatch=f3;Ic.escape=uye;Ic.unescape=iT;var dye="contentExclusion",BK=class extends IK{static{s(this,"CopilotContentExclusion")}#e;#t=new Ur(1e4);#i=new Ur(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=m_(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??J2.all);if(!i)return bK;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return nT.exception(this.#e,n,`${dye}.evaluate`),Pje}return FF}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=FF,a,c=Efe(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(Ic(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=fye(l,"FILE_BLOCKED_PATH"),a=u;break e}return nT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return FF;let a=this.evaluateFileContent(i,o,n);return nT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>cGe(a)).some(a=>a.test(n)))return fye(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>cGe(a)).some(a=>a.test(n)))return fye(i,"FILE_BLOCKED_TEXT_BASED");return FF}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){La(this.#e,e,`${dye}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=Mje(async e=>{let r=await this.#e.get(Yr).getGitHubSession();if(!r)throw new Ws("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(J2.all);e.filter(u=>u!==J2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==J2.all).join(",")),i.searchParams.set("scope",o?J2.all:J2.repo);let c=await Tm(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new Fy(c)}return this.#s("fetch.success"),Z2(yUt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(zv).getRepo(gd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${dye}.${e}`,qr.createAndMarkAsIssued(r,n))}};function cGe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(cGe,"stringToRegex");function fye(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(fye,"fileBlockedEvaluationResult");var hUt=I.Object({name:I.String(),type:I.String()}),gUt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:hUt}),pye=I.Array(gUt),AUt=I.Object({rules:pye,last_updated_at:I.String(),scope:I.String()}),yUt=I.Array(AUt);var Xc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new BK(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(yr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");let r=hl(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(yr).onDidFocusTextDocument(r),ws(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let d=Date.now(),p=await u.evaluate(e,r),m=Date.now();return i.push({key:l,result:p,elapsedMs:m-d}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){nT.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Eo).setInactive(r??"Copilot is disabled"):this.ctx.get(Eo).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===bK.reason)return nT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={elapsedMs:i};return Bt(this.ctx,e,qr.createAndMarkAsIssued(c,l)),Bt(this.ctx,e,qr.createAndMarkAsIssued({...c,path:r},l),1),nT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function Yv(t,e,r){let n=await t.get(Xc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(Yv,"isDocumentValid");var yr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await Yv(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=yl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return Yv(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(To).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(To).readFileString(e)}getWorkspaceFolder(e){let r=yl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(yl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=yl(e.uri);for(let n of this.getWorkspaceFolders()){let i=yl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Hi(r)}};function ta(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ta,"statusFromTextDocumentResult");var vn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(yr).getRelativePath(e)??Hi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(yr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await Yv(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:Vv.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(To).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(To).stat(e)).size/1024/1024}};f();f();var oh=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function fC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(fC,"delay");f();var mye=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},NK=class extends mye{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var o0=class{constructor(e){this.ctx=e;this.#e=new It("AsyncCompletionManager");this.requests=new Ur(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(hye(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new NK;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Nt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new oh,c=new Map,l=s(d=>()=>{let p=c.get(d);p!==void 0&&(p(),c.delete(d),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(hye(r,n,d)){if(d.state===0){let p=r.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){l(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),l(d.headerRequestId)()},"next");for(let[d,p]of this.requests)hye(r,n,p)?c.set(d,p.subject.subscribe({next:u,error:l(d),complete:l(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of c.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function hye(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(hye,"isCandidate");f();f();var HF=class{constructor(e){this.maxSize=e;this.root=new qF;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new qF;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new qF;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},qF=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var tA=class{constructor(){this.cache=new HF(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new HF(100)}};f();f();f();var oT=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return vd.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=sle(n,vd.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{ale(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var LK=class extends oT{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function lGe(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=sle(c,vd.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,d=!0}finally{ale(c,u,d)}}s(lGe,"getBlockPositionType");f();f();var Kv={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function uGe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let A;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?A=.03507251990078782:t[2]>14.500000000000002?A=.004905698363309292:t[8]>2421.5000000000005?A=-.10306119951984316:A=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?A=-.08503171085833393:A=.015130974593044409:A=-.024425267075198206:A=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?A=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?A=.09908783187786288:A=-.06920877329925636:t[8]>241.50000000000003?A=-.016756131804203496:t[9]>33.50000000000001?A=.04903179955263626:t[217]>1e-35?A=-.047416847619291644:A=-.0017200891991431119:t[39]>1e-35?A=-.10389927604977028:t[134]>1e-35?A=-.050480365434872866:t[178]>1e-35?A=-.05167855791556937:t[8]>2134.5000000000005?A=-.01663197335585307:t[242]>1e-35?A=-.05361323756615453:t[118]>1e-35?A=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?A=-.0016544848369620534:A=.04494144460483587:A=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?A=.051166688553608355:A=-.06623908820705383:t[84]>1e-35?A=-.12990936092409747:t[306]>1e-35?A=-.07020596855118943:t[49]>1e-35?A=.06272964802556856:t[192]>1e-35?A=.06540204627162581:A=.008277910531592885;let y;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?y=.003325460510319164:y=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?y=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?y=.0697359767152808:t[230]>1e-35?y=.06513506845651572:y=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?y=.013616385013146277:y=.04171540100223404:y=-.04360396575094823:t[212]>1e-35?y=.025945477945627522:y=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?y=-.07856453318384411:y=-.014803893522351739:t[39]>1e-35?y=-.09185452630751932:t[149]>1e-35?y=-.07122426086157027:t[134]>1e-35?y=-.04231052091434186:t[227]>1e-35?y=-.029815824273994197:t[50]>1e-35?y=-.15736496271211153:t[222]>1e-35?y=-.02360285356956629:t[128]>1e-35?y=-.03922080193836443:t[136]>1e-35?y=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?y=-.0029736170756835783:y=-.06482902102259112:t[84]>1e-35?y=-.11340924635708383:t[94]>1e-35?y=-.03635703457792193:t[118]>1e-35?y=-.058181913914186034:t[126]>1e-35?y=-.062030576241517366:t[116]>1e-35?y=-.045086301850604006:t[25]>1e-35?y=-.031665223656767286:t[203]>1e-35?y=-.009444685731407691:y=.0112265153772187;let E;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?E=.022717227245241684:E=-.049700413274686266:E=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?E=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?E=-.12263724050601095:E=.0070743478891288035:t[288]>1e-35?E=-.050439138582109:E=.0255701593657891:E=-.005812703740580558:t[6]>49.50000000000001?E=-.008542694147899113:E=.035147383686665:E=-.0960461939274094:t[32]>1e-35?E=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?E=-.01800870272656664:E=-.07817304234604389:t[30]>1e-35?E=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?E=.08778416018479411:E=-.026563982720830256:E=-.05296139548112329:t[50]>1e-35?E=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?E=-.036572140520852024:t[183]>1e-35?E=-.10766853736801459:E=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?E=.09513215942486053:E=-.03641865277445567:t[10]>59.50000000000001?E=.03177172388687933:t[39]>1e-35?E=-.10234241303898953:t[243]>1e-35?E=-.02966738115984321:t[190]>1e-35?E=-.04312785336449181:t[118]>1e-35?E=-.05808521194081524:E=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let w;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?w=-.0024117174588695603:w=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?w=.04575380761203418:w=-.10025595041353463:t[15]>1e-35?w=.17705790384964004:w=.0073813837628615014:w=.07676373681392407:w=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?w=.07078572910026419:t[4]>23.500000000000004?w=.005513918674164821:w=.0206586476926392:t[0]>5269.500000000001?w=.07706773525822633:w=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?w=-.03204783603215824:w=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?w=-.0930246911392012:w=.011173087289703683:t[3]>24.500000000000004?w=.03281421918878597:w=.12449335091369843:t[204]>1e-35?w=.06634531187326123:w=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?w=-.041196758517013515:t[4]>7.500000000000001?w=-2942718111029724e-20:t[4]>6.500000000000001?w=.11953909558532852:w=.03188615019450534:t[122]>1e-35?w=-.0616037324662157:t[101]>1e-35?w=.027230889593349412:t[8]>4968.500000000001?w=-.1113986516540856:t[3]>2.5000000000000004?w=-.002045140426885727:t[129]>1e-35?w=.12641163374304432:w=.014909826232873194;let R;t[308]>1e-35?t[0]>7277.500000000001?R=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?R=-.040884836258675006:t[210]>1e-35?R=-.0003719413278428804:t[13]>1e-35?R=.030287610160818174:R=.011174130013595384:t[1]>38.50000000000001?R=-.0662442170185784:R=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?R=-.08092286307197555:R=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?R=-.1155211149523894:R=-.0032903546638958538:t[149]>1e-35?R=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?R=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?R=-.025416927789760076:R=.02777568919793122:R=-.10310351509769732:R=.013549608903688785:t[186]>1e-35?R=.08513865847420551:R=-.009306721292510369:t[31]>1e-35?R=.009780833952582307:t[23]>1e-35?R=.011143773934157629:t[210]>1e-35?R=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?R=-.04846287537743046:R=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?R=-.034224938681445764:t[8]>1641.5000000000002?R=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?R=-.027950103994861836:R=.14575930827829034:R=-.007124740389354946:t[10]>22.500000000000004?R=.013173304107866726:R=-.11119620042551365;let D;t[131]>1e-35?D=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?D=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?D=-.022305242912035072:D=.024792895826340516:D=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?D=.2080083584805785:D=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?D=.060783227455868206:D=-.056904865557409035:D=-.03278952553107572:t[192]>1e-35?D=.13117402617043625:D=.01647119888257836:D=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?D=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?D=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?D=-.11083976837572328:t[146]>1e-35?D=-.03359294484446772:D=-.0042815953591236475:t[190]>1e-35?D=-.09264239592903775:t[10]>1e-35?D=.022282638485105657:D=-.0205994057928458:t[5]>4918.500000000001?D=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?D=.08935072241972036:D=-.03781647876237494:D=.0062655753179671515:t[31]>1e-35?D=.008603500300349887:t[230]>1e-35?D=.03350056932774173:t[23]>1e-35?t[241]>1e-35?D=.10277555508503314:D=.0017901817172993888:t[2]>98.50000000000001?D=-.05920081229672715:D=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let Y;t[306]>1e-35?t[149]>1e-35?Y=-.1389218965136736:Y=-.032218642644416894:t[13]>1e-35?Y=.006465035217331847:t[50]>1e-35?Y=-.1381687930130022:t[179]>1e-35?Y=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Y=-.03262719498763048:Y=.023342916702125613:t[191]>1e-35?Y=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Y=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.09989343595668776:Y=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Y=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Y=-.09165257825246746:t[9]>32.50000000000001?Y=.02484870392366004:Y=-.008499493096971395:t[8]>24.500000000000004?Y=.02459679192828244:Y=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Y=.0015644546318714849:Y=-.06579524865022705:Y=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Y=.03331853632960164:Y=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Y=-.019091477207111116:Y=.037878468575478504:t[94]>1e-35?Y=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Y=.16919658785098224:t[243]>1e-35?Y=-.06580584936754524:Y=.01567555159935563:t[129]>1e-35?Y=.06721746994993226:t[10]>32.50000000000001?Y=-.046394462507797975:Y=-.006436180519584767;let ee;t[131]>1e-35?ee=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?ee=.019122095523977856:t[298]>1e-35?ee=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?ee=-.026094309429557913:t[204]>1e-35?ee=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?ee=.012643810980689466:ee=-.07884161741497837:ee=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?ee=.04493082949897325:ee=.18046359750455776:t[7]>18.500000000000004?ee=-.018667348656891496:ee=.02584325784698236:ee=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?ee=.04749240016989375:ee=-.0333334578246718:t[5]>3276.5000000000005?ee=.11330554740098908:t[7]>94.50000000000001?ee=.1296600395033268:ee=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?ee=-.13787130789142835:t[0]>1847.5000000000002?ee=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?ee=.028856848462727104:ee=-.11197632885851168:ee=.08169801342016791:t[1]>22.500000000000004?ee=-.021052888644970163:ee=.019048604298876753:t[7]>4.500000000000001?ee=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?ee=.03432638833359197:ee=-.0036767863082454973:t[1]>48.50000000000001?ee=.03087375270128195:t[2]>3.5000000000000004?ee=-.04219917149740248:ee=.018818493993207935;let V;t[306]>1e-35?V=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?V=-.09091897542577475:V=.04042943082645558:t[218]>1e-35?V=.056254985867151:V=-.053848117950183044:V=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?V=.021581808008986944:V=-.05639286496176611:V=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?V=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?V=.023885302967553288:V=.1617794086125622:t[212]>1e-35?V=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?V=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?V=.01894935813286188:V=-.06449356357429188:V=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?V=-.034718828212885515:V=.0898976288814321:t[1]>17.500000000000004?V=-.15440137451988326:V=-.03864183216821465:V=.009988507307006308:V=-.08540311947043305:t[50]>1e-35?V=-.13323659732101975:t[134]>1e-35?V=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?V=.08082476177379844:V=-.041665761903645876:t[179]>1e-35?V=-.12405023987936657:t[39]>1e-35?V=-.06247416524997478:t[138]>1e-35?V=-.10724031753676487:V=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let X;t[183]>1e-35?X=-.05753337139158443:t[308]>1e-35?X=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?X=-.10477869875380448:X=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?X=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?X=-.04442302951713574:X=.00012409888451734224:X=-.092199119633697:t[225]>1e-35?X=.13773072450201831:t[0]>2882.5000000000005?X=.0028540012229920533:t[298]>1e-35?X=.07134486044361629:X=.014297412329837425:t[145]>1e-35?X=.05608385321902638:t[92]>1e-35?X=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?X=-.0039957800609801315:X=.0776927564241081:t[203]>1e-35?X=-.05502900859432093:t[105]>1e-35?X=.06062892720841595:X=-.009574839629252128:t[31]>1e-35?X=.009488858841144216:t[23]>1e-35?t[20]>1e-35?X=.08818126313644752:t[8]>161.50000000000003?X=.014353968957885408:X=-.022240738532827903:t[210]>1e-35?X=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?X=-.043902062079383485:X=-.014741559220396223:X=-.00934935734853194:t[6]>32.50000000000001?X=.1514593126307404:X=.010771222510801532:t[10]>22.500000000000004?X=.01412495209334078:X=-.08576940379502533;let K;t[0]>384.50000000000006?t[84]>1e-35?K=-.06647690967306838:t[2]>101.50000000000001?K=-.024451334501552457:t[306]>1e-35?K=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?K=.0031858381443673127:K=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?K=-.08601340441214533:t[1]>29.500000000000004?K=.10487598629539963:t[8]>597.5000000000001?K=-.0786529133673238:K=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?K=-.04883600353740688:t[126]>1e-35?K=-.03794042763348827:K=-.003358871967539988:t[210]>1e-35?K=.054991356498447566:t[6]>19.500000000000004?K=-.007418396981635549:K=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?K=-.02143003429501711:K=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?K=-.006636355416244082:K=-.06483095743431454:t[4]>21.500000000000004?K=-.028975965946833545:K=.022012264796522657:K=-.06653648243193663:t[5]>4593.500000000001?K=.01753551428088607:t[217]>1e-35?K=-.028864824937700297:t[94]>1e-35?K=-.04885192273020658:t[279]>1e-35?K=.08105715462329498:t[121]>1e-35?K=-.04576676034750651:K=.004795141324949362:t[1]>42.50000000000001?K=-.047446619702809195:t[145]>1e-35?K=.08400495571952321:K=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let W;t[0]>384.50000000000006?t[84]>1e-35?W=-.06088131453064195:t[147]>1e-35?W=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?W=.04219361472548491:W=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?W=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?W=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?W=-.11431764534511478:W=.013549717238356157:W=-.020987333767091276:t[6]>2.5000000000000004?W=-.02914877855133127:W=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?W=-.10087072787978416:t[37]>1e-35?W=-.030467397753331196:t[229]>1e-35?W=-.1017559811057469:t[4]>20.500000000000004?W=-.00413177742240167:t[20]>1e-35?W=.05213315982685969:W=.0037921635866823133:t[8]>51.50000000000001?W=.07327913092421544:t[6]>49.50000000000001?W=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?W=.02744420891894289:W=.11288946357194463:W=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?W=-.012329314369909049:W=.026816658655600168:W=-.0872405354618811:W=.007872673500247845:t[1]>42.50000000000001?W=-.04309044198258254:t[145]>1e-35?W=.07572529147860785:t[7]>5.500000000000001?W=-.013837187093264945:t[1]>17.500000000000004?W=.04208698439539668:W=-.06284346769019863;let J;t[294]>1e-35?J=-.0384794324818203:t[266]>1e-35?J=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?J=.07432960094940501:J=-.035248735855751855:t[134]>1e-35?J=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?J=-.01706896375068821:J=.08212247914968074:t[2]>59.50000000000001?J=-.09546478958824225:t[6]>53.50000000000001?J=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?J=.02816463285971267:J=.15449139016588445:J=-.10199787406123524:J=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?J=-.13924786681478077:J=-.0072772442570213335:t[39]>1e-35?J=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?J=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?J=-.11174465335620831:J=.00013144040097180107:J=-.08493919336681105:t[42]>1e-35?J=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?J=-.015540659878839153:J=-.14442609417300142:t[21]>1e-35?J=-.025251979447574083:J=.0023698372645272847:t[18]>1e-35?J=.07269739695712212:t[8]>2592.5000000000005?J=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?J=-.01835130329646532:t[9]>45.50000000000001?J=.02023047454629885:J=.16469378262221102:J=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ae;t[183]>1e-35?t[17]>1e-35?ae=.030100940443356424:t[10]>1.5000000000000002?ae=-.10861112216742408:ae=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ae=-.032062878390325456:ae=-.10808232631806887:t[8]>1641.5000000000002?ae=-.06147013392655731:t[4]>12.500000000000002?ae=.03324767551088266:t[145]>1e-35?ae=.028851633810612017:ae=-.054871239091792784:t[134]>1e-35?ae=-.023813968121342108:t[266]>1e-35?ae=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ae=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ae=-.025350325484720576:ae=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ae=.056817276537534815:ae=-.07674158463557636:ae=-.06335553143454145:t[1]>56.50000000000001?ae=.16390494217299284:ae=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ae=.041717597065890205:ae=-.10357913492269129:t[10]>29.500000000000004?ae=.1365512866715726:ae=.020600048310575665:ae=.09708785634773187:ae=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ae=-.03146213719547347:ae=.11784024316238083:ae=-.050940520532045355:ae=-.047988344143075616:t[191]>1e-35?ae=.028764654731460032:ae=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let Ae;t[179]>1e-35?Ae=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ae=.026484626664041125:t[10]>1.5000000000000002?Ae=-.10187000872941615:Ae=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ae=.09574540795390041:Ae=-.06454986703691233:Ae=-.11411849349353141:t[266]>1e-35?Ae=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ae=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ae=-.04403391373512386:Ae=.1132928075412222:t[2]>47.50000000000001?Ae=-.09700191391838056:Ae=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ae=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ae=-.001668912999010927:Ae=-.02363511102970245:t[8]>58.50000000000001?Ae=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ae=.0911011436534449:t[1]>28.500000000000004?Ae=-.07192390493729035:Ae=.06913818091291246:Ae=-.012312625373699222:Ae=.06784496312307986:Ae=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ae=.0026564453057705273:Ae=-.025425772389361445:t[122]>1e-35?Ae=-.12046786388602149:t[0]>3183.5000000000005?Ae=.01162092842804907:t[91]>1e-35?Ae=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ae=-.0001647792543020228:Ae=-.023664538532907665:Ae=.01609078206180752;let Oe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Oe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Oe=-.017696526862422682:Oe=.1450050954613223:Oe=-.05406930069823832:Oe=-.08308700260259043:t[120]>1e-35?Oe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Oe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Oe=.038431826961746934:Oe=-.05937462906539856:t[9]>65.50000000000001?Oe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Oe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Oe=-.09579030954062734:Oe=.025064711572811746:Oe=.02579440518821548:Oe=.1044440128091862:Oe=-.058348633139536844:Oe=.07766788227934436:Oe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Oe=.07463684068207214:Oe=.18244269035484484:t[6]>39.50000000000001?Oe=-.06050050067471004:Oe=.05787759066913493:Oe=.010783225857972171:Oe=.1674891243602606:t[4]>9.500000000000002?Oe=-.004814132027475892:Oe=-.14543299413454813:Oe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Oe=-.07634466313617769:Oe=.0287825335169114:Oe=-.06894721943300268:Oe=-.00023988459059521937;let Te;t[131]>1e-35?t[1]>93.50000000000001?Te=-.05706887458825395:t[2]>1.5000000000000002?Te=.011446637886629108:Te=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Te=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Te=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Te=.026278724448495064:Te=.17053138400480508:t[0]>4463.500000000001?Te=-.06482289890096041:Te=.03026516489536295:Te=-.031785170717683144:Te=.1312690622980455:t[13]>1e-35?Te=.14336922540461444:Te=.03523850945454039:Te=-.015407465968975714:t[39]>1e-35?Te=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Te=-.0659975068798723:Te=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Te=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Te=.057409156184759516:Te=.2024322059866388:Te=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Te=.010648654146284154:t[308]>1e-35?Te=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Te=.12364025998551711:Te=-.02247495081065243:t[1]>22.500000000000004?Te=-.0726295464624251:Te=.03481895086048152:t[0]>4331.500000000001?Te=-.04775443357020673:Te=.07172377425057568:t[2]>89.50000000000001?Te=-.11782645274716962:Te=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let lt;t[179]>1e-35?lt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?lt=-.07595415373151816:lt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?lt=.022822510448266862:lt=.17491569312933697:lt=-.058362287133533565:t[2]>2.5000000000000004?lt=-.03633895806364428:lt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?lt=-.07294848747514579:lt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?lt=-.07009535282685533:t[8]>2640.0000000000005?lt=-.051761240111316276:t[131]>1e-35?lt=-.06245774419231631:lt=.03495606662854905:lt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?lt=.0015036626973581122:lt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?lt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?lt=.022343994371919224:lt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?lt=.07724450228328664:t[0]>3853.5000000000005?lt=-.15671707454435677:t[10]>28.500000000000004?lt=-.10179090671841723:lt=.014878216919760927:lt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?lt=.14054154485273487:lt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?lt=-.08632985141410315:lt=.005524157938954954:lt=-.08802502622523681:lt=-.0004649168897260341;let _t;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?_t=-.007458687464321174:_t=-.09444966249102484:t[1]>23.500000000000004?_t=.08564129697360716:_t=-.07105002902845851:_t=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?_t=-.10326216566705966:t[1]>26.500000000000004?_t=.0050539832484585365:_t=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?_t=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?_t=.05783632021087773:t[10]>17.500000000000004?_t=-.06720598671764105:t[1]>47.50000000000001?_t=.097495825172558:_t=-.013372242800584872:_t=-.06463226787713715:t[42]>1e-35?_t=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?_t=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?_t=.11051270080118503:_t=.027719462817590454:t[8]>597.5000000000001?_t=-.08441503592016869:_t=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?_t=-.12190088985091102:_t=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?_t=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?_t=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?_t=.016585157185448045:_t=-.11032043771149425:_t=.01586986028570486:t[8]>388.50000000000006?_t=-.10592413013261853:_t=.04930703248769364:t[13]>1e-35?_t=.003621937787920821:_t=-.0013786331198611841;let vt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?vt=.009769895322846493:vt=-.10620052926943656:t[9]>19.500000000000004?vt=.03781202525403449:t[9]>14.500000000000002?vt=-.11485785321365344:t[9]>6.500000000000001?vt=.07677177833073881:t[0]>4342.500000000001?vt=-.07079285609687631:t[49]>1e-35?vt=.06156814809246001:vt=-.014788509042554625:vt=-.032659201618470655:t[5]>5207.500000000001?vt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?vt=-.03094160322187924:t[1]>29.500000000000004?vt=.09474646043921069:vt=.023445783928231618:vt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?vt=-.07164443768784848:t[1]>29.500000000000004?vt=.089473622509272:t[8]>597.5000000000001?vt=-.08155349903101317:vt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?vt=-.004003900679358653:t[190]>1e-35?vt=-.09236113461485262:t[8]>3198.5000000000005?vt=-.0124130160451179:vt=.018453070064009328:t[15]>1e-35?vt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?vt=-.0009580759587680961:vt=-.03227283036698222:vt=.01369287669536875:t[1]>50.50000000000001?vt=-.04213060332500437:t[35]>1e-35?vt=-.11508095777767471:t[190]>1e-35?vt=-.08611884672400155:t[297]>1e-35?vt=.05723551879433584:vt=-.004829340082311461;let ht;t[183]>1e-35?ht=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?ht=-.11753465135886734:ht=-.007515490299047085:ht=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?ht=-.12371142493530439:t[1]>36.50000000000001?ht=.032189417575190435:ht=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?ht=-.0784518658439288:t[2]>54.50000000000001?ht=.12477882322370665:ht=.000313468482399738:ht=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?ht=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?ht=.0353146070135579:ht=-.06327619611098285:ht=.02813577701641991:ht=-.12354390728506215:t[34]>1e-35?ht=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?ht=-.01245803535276381:ht=-.07169472553475001:t[1]>11.500000000000002?ht=.12989984824561698:ht=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?ht=.010390226893521422:t[10]>14.500000000000002?ht=.16790888126487719:ht=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?ht=-.043398307129729134:ht=.09963544907820426:t[9]>30.500000000000004?ht=-.13540713124984502:t[9]>17.500000000000004?ht=.0509435850590757:ht=-.04761897852404613:t[4]>78.50000000000001?ht=.09197086656470652:ht=.0006771050176682337;let ue;t[122]>1e-35?t[6]>36.50000000000001?ue=.05686884451670743:ue=-.05334759543084309:t[266]>1e-35?ue=-.08603579519816038:t[157]>1e-35?ue=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ue=-.0499592651503952:t[0]>725.5000000000001?ue=.11780353905132664:ue=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ue=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ue=-.03190157229022304:ue=.07985197845805492:ue=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ue=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ue=-.027174047777029083:ue=.057117284879796476:t[3]>43.50000000000001?ue=-.0016147040913107311:ue=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ue=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ue=-.01466076988151239:ue=.13375695925484857:ue=-.04885873081899647:t[0]>5566.500000000001?ue=.11086813028591343:t[8]>992.5000000000001?ue=-.07622304217072383:ue=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ue=.03285858361708423:ue=-.12354858211764992:ue=.0672788301823281:t[15]>1e-35?ue=.08658836986585006:ue=-.02741484278509758:t[290]>1e-35?ue=-.08161310335133287:t[135]>1e-35?ue=-.04824156054814152:ue=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let We;t[189]>1e-35?t[0]>5269.500000000001?We=-.103183298350443:t[2]>51.50000000000001?We=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?We=-.05186168947388339:We=.0496996365539082:t[10]>23.500000000000004?We=.1404445738719:t[93]>1e-35?We=.0027146310074558505:t[5]>3821.5000000000005?We=.002153033152069652:t[4]>2.5000000000000004?We=.007663539551317215:We=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?We=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?We=-.021479467709980358:We=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?We=.021660293256233334:We=-.0927396152303864:We=.0665074081601698:t[0]>1550.5000000000002?We=.08972407105958534:We=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?We=.06761927942466854:We=-.015762168112653286:t[17]>1e-35?We=.10311304131145381:We=-.017672785252336027:We=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?We=-.10638321435298535:We=.0007073011744385905:t[18]>1e-35?We=-.027056185501334325:t[145]>1e-35?We=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?We=.09762140519655171:t[9]>110.50000000000001?We=-.06581942957595835:t[6]>54.50000000000001?We=.04959634035251596:We=.0022616298654554207:We=-.007437620924990854;let se;t[179]>1e-35?se=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?se=.1470294450403005:se=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?se=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?se=.07965955447707423:t[10]>10.500000000000002?se=-.09236156404262426:se=.03396273196231458:se=-.13246465021467432:se=.07092822261735353:se=-.08753829085942:se=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?se=.004705878789890202:se=.13775378964952867:se=-.04770928980587811:t[10]>29.500000000000004?se=.011221519891071544:t[0]>3853.5000000000005?se=.06365381191628273:se=.15506252245336827:t[1]>37.50000000000001?se=-.07254777021042061:se=.026514587757252385:t[308]>1e-35?se=.04115804816617256:t[10]>26.500000000000004?se=.02077721353011946:t[5]>3548.5000000000005?se=-.1280907116663952:se=-.021974774274438:t[306]>1e-35?se=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?se=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?se=-.005710865560475598:t[94]>1e-35?se=-.06751507982853555:se=.027250040757588703:t[9]>52.50000000000001?se=.07060357924595577:se=-.030297760713011795:se=-.0006005400085266517;let le;t[113]>1e-35?le=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?le=-.06996356565314456:le=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?le=-.08317707559926495:t[21]>1e-35?le=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?le=-.010538203005984922:le=.08454819465349446:t[9]>124.50000000000001?le=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?le=-.08542251249346582:t[9]>50.50000000000001?le=-.023428882537657472:le=.010042500833979073:le=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?le=.03006025206979096:t[9]>108.50000000000001?le=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?le=.04222035773042132:le=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?le=-.07209095448054853:le=.028065954981903313:le=.08714651929917122:le=-.006678820669279169:t[10]>40.50000000000001?le=.006982396294941626:le=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?le=-.09351114982645548:t[4]>3.5000000000000004?le=-.004837550129223451:le=-.08324141237464677:t[303]>1e-35?le=.10703037493990825:t[9]>156.50000000000003?le=-.10803018621648303:t[116]>1e-35?le=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?le=.10261721665006701:le=.018994509090668264:le=.0011244262442038839;let qe;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?qe=-.08404263465005328:t[0]>3682.5000000000005?qe=.041259223920298876:t[1]>29.500000000000004?qe=-.09541257493441671:qe=.001482192721625409:qe=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?qe=-.08268996098437432:t[230]>1e-35?qe=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?qe=-913218977737457e-19:t[4]>10.500000000000002?qe=-.056334165674005156:t[127]>1e-35?qe=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?qe=-.04231200150318989:t[10]>42.50000000000001?qe=.10182973257894812:qe=.015934763950068445:qe=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?qe=-.041117068322885315:qe=.1167767830037126:qe=.13611206992387337:t[10]>41.50000000000001?qe=-.07120286010564107:qe=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?qe=-.07702290997669524:t[198]>1e-35?qe=.08776558554437136:qe=-.008290740324975692:t[2]>32.50000000000001?qe=.07198457624219955:qe=.005463113714361629:qe=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03295785445437507:qe=.15140250150674536:qe=-.035613213948910254:t[186]>1e-35?qe=.06849425535860769:t[96]>1e-35?qe=.06028225812727254:qe=-.007582543288662308;let Be;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Be=.08396556264106572:Be=-.0562516995099192:Be=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Be=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Be=.0052017514017035915:Be=-.11194119432743639:Be=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Be=-.025692451287403446:Be=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Be=-.11892250746801664:t[10]>22.500000000000004?Be=.07548493166973796:Be=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Be=.13750699058082427:t[18]>1e-35?Be=.06535408879552801:Be=-.054118179035040674:Be=.1344282838979622:t[0]>3982.5000000000005?Be=-.10409582202467015:t[19]>1e-35?Be=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Be=.012705935670766466:Be=.14149359442527545:Be=-.047977876173706004:t[20]>1e-35?Be=.057945228080337946:t[0]>3642.5000000000005?Be=-.008726535792122467:Be=-.08424769891378858:t[34]>1e-35?Be=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Be=.01196849566739346:Be=.1614642278429876:Be=-.043022338150701625:t[3]>5.500000000000001?Be=-.03907848255033881:Be=.018280601026175593:Be=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let je;t[120]>1e-35?je=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?je=-.042799574885345304:je=.07412430171193245:je=-.11248270469336048:t[193]>1e-35?je=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?je=.028911612178122104:je=.12326369727728437:t[0]>4091.5000000000005?je=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?je=.1159839898100149:je=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?je=-.0216343737351583:je=-.1220272260878369:t[2]>18.500000000000004?je=.09152924475072398:t[8]>55.50000000000001?je=.039508716651005665:je=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?je=.06793009902674053:je=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?je=-.04391068849624096:je=.04009967593394672:t[8]>1085.5000000000002?je=-.024773826356034825:je=-.13919707884246582:je=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?je=-.11567917501901476:je=-.006813640337684114:t[3]>7.500000000000001?je=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?je=-.001754586408351048:je=-.055422422450722056:je=-.06090032532532226:t[0]>5269.500000000001?je=.11787981735983527:je=-.00198119768540783:je=.00210412924303036;let et;t[294]>1e-35?t[10]>50.50000000000001?et=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?et=-.06063239096209816:et=.03317022411417386:et=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?et=-.013608609329298802:et=.09078000157330264:t[99]>1e-35?et=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?et=-.07536137260189814:et=.006253266595455118:t[10]>28.500000000000004?et=-.006106041147592768:t[9]>156.50000000000003?et=-.11828932797811101:t[94]>1e-35?et=-.02566078479505714:t[303]>1e-35?et=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?et=-.08401252789168523:t[5]>4244.500000000001?et=.026372887658499107:t[1]>16.500000000000004?et=-.027836756345634026:et=.09205362097909099:et=.00934612788718244:t[203]>1e-35?et=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?et=-.09580979052540028:t[1]>50.50000000000001?et=-.06402211827281554:et=.08342858760095972:t[2]>36.50000000000001?et=.008114897658204584:t[92]>1e-35?et=.09541587072672864:et=-.022342147210555434:et=-.01660492519175128:et=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?et=.15846731118501817:et=.039498507912023195:t[245]>1e-35?et=.07008718676813333:et=.0019806389728814727;let pt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?pt=-.01192072916082109:pt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?pt=.06874032717466054:t[4]>40.50000000000001?pt=-.07752510020707537:t[1]>76.50000000000001?pt=-.09944032260703917:t[8]>1381.5000000000002?pt=-.054466635810800745:t[1]>32.50000000000001?pt=.05974084520839573:pt=-.0384718740755954:pt=-.11374190719134032:t[0]>2151.5000000000005?pt=-.13703645155803298:pt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?pt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?pt=.013539805885738608:pt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?pt=.09941880179344399:pt=-.01608127391210995:pt=.08025226531247417:t[9]>67.50000000000001?pt=.13525448212444113:t[6]>61.50000000000001?pt=-.05511099182158894:t[94]>1e-35?pt=-.06821509831783572:t[128]>1e-35?pt=.11361314817714643:pt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?pt=-.09954181329804547:t[197]>1e-35?pt=.10102833149755386:t[188]>1e-35?pt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?pt=-.03781554214742005:pt=.09927933385592314:pt=-.020006000056720083:pt=-.10520473615957895:pt=-.12006990846253787:pt=-.00026111570975317574;let Mt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Mt=-.019188245509744628:Mt=-.13354864350075848:t[0]>2461.5000000000005?Mt=.051885477468354396:Mt=-.0833581968852119:Mt=.08233441701532287:Mt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Mt=.09926337893072812:Mt=-.027753610497327715:t[0]>1972.5000000000002?Mt=-.09780045823152517:Mt=.032380915168504935:Mt=.11502632261226381:t[17]>1e-35?Mt=-.06094965899579662:t[10]>40.50000000000001?Mt=-.07500475582440802:Mt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Mt=-.09584538995220808:Mt=-.00908705814304442:Mt=.03203281520813893:t[10]>49.50000000000001?Mt=-.03146271513986384:t[2]>63.50000000000001?Mt=.13172001315536286:t[224]>1e-35?Mt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Mt=.09521549382082259:Mt=-.04414925613522197:t[0]>1847.5000000000002?Mt=-.09118580379557353:Mt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Mt=.03525144509943896:Mt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Mt=-.04766112322938157:t[2]>10.500000000000002?Mt=.0728516504357201:Mt=-.05049625965272536:Mt=-.10868663055825774:Mt=.0005382613419948969;let Kt;t[147]>1e-35?t[1]>53.50000000000001?Kt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Kt=-.030504020655417463:Kt=.07102458639110094:Kt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Kt=.055304563442710876:t[1]>53.50000000000001?Kt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Kt=-.1568835288372895:Kt=-.0279829124400056:Kt=.04493843959601833:Kt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Kt=-.054133834303687026:t[9]>48.50000000000001?Kt=.11263810289007213:t[9]>9.500000000000002?Kt=-.02202034562838259:t[4]>45.50000000000001?Kt=-.03410927569045158:Kt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Kt=-.029687297407295893:Kt=.10673602850001934:t[4]>42.50000000000001?Kt=.0036275562945108117:Kt=-.0760789221330622:Kt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Kt=.08274426793676076:Kt=-.07076234425516396:Kt=.13890177606150175:Kt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Kt=-.09250637750836187:Kt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Kt=-.01897867921812603:Kt=.04890781705365262:Kt=-.11569892307597907:t[2]>106.50000000000001?Kt=.09032697440623969:Kt=.00047935919155035045;let Ot;t[115]>1e-35?Ot=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ot=-.10131179514695865:t[8]>938.5000000000001?Ot=.10203729808015481:Ot=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ot=.03574015165562999:Ot=-.07763042506449493:Ot=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ot=.0665706259130275:Ot=-.06586817559309924:Ot=.11925564412287476:Ot=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ot=.046017146627455346:Ot=-.08623321630086885:t[8]>1765.5000000000002?Ot=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ot=.11143827902215087:Ot=-.01817808730473413:Ot=.16980985030210127:Ot=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ot=.010168994879727824:Ot=-.09099594488792513:t[9]>1.5000000000000002?Ot=.0533459678147928:Ot=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ot=-.062346959148773695:t[1]>47.50000000000001?Ot=-.0021578343835599316:t[2]>27.500000000000004?Ot=.19567373210166172:Ot=.07851555379116423:t[18]>1e-35?Ot=.03711549097804649:t[8]>359.50000000000006?Ot=.012492346746905587:t[4]>20.500000000000004?Ot=.047511695735697544:Ot=-.07999269063948773:Ot=6802045404471004e-20;let Hr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Hr=.0011484728213539738:Hr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Hr=-.09828874964938798:t[8]>1586.5000000000002?Hr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Hr=.011938269926919522:Hr=.17541983715953954:t[19]>1e-35?Hr=.023002786011088672:Hr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Hr=.06508934844183291:Hr=-.10168553534835639:Hr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Hr=.021140806225203937:Hr=-.1167833342453639:t[2]>33.50000000000001?Hr=.13163585734056618:Hr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Hr=.06314479201263888:Hr=-.09639088327091713:t[10]>29.500000000000004?Hr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Hr=40577156464836036e-21:Hr=.12322387121810757:Hr=-.03697224045046014:t[1]>22.500000000000004?Hr=.016474835887320276:Hr=.16919298733903063:Hr=.07633203630214054:Hr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hr=.14150493354700563:Hr=-.01831155354975749:t[1]>28.500000000000004?Hr=-.07952557178685365:t[10]>28.500000000000004?Hr=.0665695554984927:Hr=-.053640139319277094:Hr=.0004754840665898665;let Rr;t[76]>1e-35?Rr=-.06814884255939921:t[179]>1e-35?Rr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Rr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Rr=.004193658608848433:Rr=-.1066968975983452:t[8]>302.50000000000006?Rr=.05476730110440451:Rr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Rr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Rr=.013555772109446666:Rr=-.09856116699770784:Rr=.0284329611813383:t[2]>52.50000000000001?Rr=.04008708444763762:t[9]>29.500000000000004?Rr=-.1289599546008197:Rr=-.018566534248335896:t[8]>747.5000000000001?Rr=.02236484980076122:Rr=.1148871655157582:t[8]>3084.0000000000005?Rr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Rr=.03164751204281298:Rr=.11752140436184891:t[9]>42.50000000000001?Rr=-.07180559595410106:t[22]>1e-35?Rr=.09325040416256854:Rr=-.016041122807939914:Rr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Rr=-.010718250133458515:Rr=.09818827994853763:Rr=.010180038981174032:Rr=-.039472162599295535:t[9]>170.50000000000003?Rr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Rr=-.08674788057474031:Rr=.02077653508548371:Rr=-.0003536561382007414;let on;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?on=.018337297491457794:on=-.05926206443180149:on=.024026520855881126:t[288]>1e-35?t[184]>1e-35?on=.10747078482128616:t[126]>1e-35?on=-.10550625192391357:t[7]>71.50000000000001?on=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?on=.1317396472229434:on=-.025035791351328947:on=-.0728334305864372:t[8]>963.5000000000001?on=.023642201723096064:on=.183010326734258:t[128]>1e-35?on=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?on=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?on=-.1088876900335281:on=.02758317023002635:on=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?on=-.01928020117446408:on=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?on=.07893723375925096:on=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?on=-.10301657587280551:on=.005787463140224318:on=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?on=-.019296977889522397:on=-.07274529751752634:t[1]>30.500000000000004?on=-.050368901143148286:on=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?on=.0015332402792773946:on=.09930153676749967:on=-.06370844564357069:on=.00042272155209927616;let ve;t[71]>1e-35?t[4]>17.500000000000004?ve=.12586844370423247:ve=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?ve=-.08474891624263797:t[8]>125.50000000000001?ve=.08125086980439704:ve=-.04082085238068532:t[0]>3863.5000000000005?ve=.020481535807469208:ve=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?ve=-.019110200161573936:ve=-.12387719685855114:t[0]>1102.5000000000002?ve=.08376595701957407:ve=-.031821919580524834:t[9]>4.500000000000001?ve=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?ve=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?ve=.1349841206807871:ve=.011864053595560297:t[1]>41.50000000000001?ve=-.08203662486612544:t[2]>18.500000000000004?ve=-.009541865642346947:ve=.08345043168501759:t[2]>10.500000000000002?ve=-.09585031818030947:ve=.019432330487099865:ve=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ve=.11951517733981365:ve=-.016651014735738538:t[1]>28.500000000000004?ve=-.07410922545030711:t[10]>28.500000000000004?ve=.05886430683844788:ve=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?ve=.04802269879144705:ve=-.026208212831796737:t[4]>45.50000000000001?ve=-.03227476944664786:ve=.05124575625622705:ve=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Tt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Tt=-.10504730480402079:t[5]>3341.5000000000005?Tt=.11087894671081754:Tt=-.0406668834674614:Tt=.03308382165616109:t[8]>104.50000000000001?Tt=-.10431436764549162:Tt=.0073928337244891455:t[4]>34.50000000000001?Tt=-.10571751512748416:Tt=-.006081128814142983:t[13]>1e-35?Tt=.1299673566095023:t[4]>60.50000000000001?Tt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Tt=.04857126072645073:Tt=-.03431365358104773:t[4]>16.500000000000004?Tt=.04101865986596709:Tt=.16480274980378218:t[10]>26.500000000000004?Tt=.03673978504199255:t[10]>9.500000000000002?Tt=-.10996402743800027:t[308]>1e-35?Tt=.0553693735082498:Tt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Tt=.010902983761213922:Tt=.1325118659895645:Tt=-.064362945508595:t[1]>66.50000000000001?Tt=.033416767779331176:Tt=-.054080316225040496:t[42]>1e-35?Tt=-.07762364337810815:t[10]>1089.5000000000002?Tt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Tt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Tt=.0220102041325908:Tt=-.06516708740003069:Tt=.012833498905748267:t[224]>1e-35?Tt=-.007038418272997865:Tt=.00037666304316290967;let nr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?nr=.07554189644995735:nr=-.052089349455904946:nr=-.10148206848169845:t[113]>1e-35?nr=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?nr=.07172653627995676:nr=-.07602959317610998:nr=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?nr=-.0399322883690891:nr=.06523495517476098:nr=-.10358715295743802:t[193]>1e-35?nr=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?nr=.015928764772252406:nr=.1341513061552287:nr=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?nr=-.033592997607280156:nr=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?nr=-.08402551858097379:nr=.017401984506038796:t[1]>25.500000000000004?nr=.13337205393591278:nr=-.01160208350090984:nr=.06708317942315471:t[8]>227.50000000000003?nr=-.08486943882418681:nr=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?nr=-.10496268177586783:nr=-.020921489532370493:nr=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?nr=.11639296062157028:nr=-.004275784356569115:t[32]>1e-35?nr=-.07297384970166025:nr=.006026841626381599:nr=.002034611134960428;let Xt;t[248]>1e-35?Xt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Xt=-.06455513326540585:t[1]>29.500000000000004?Xt=.07718474591552532:t[4]>7.500000000000001?Xt=.040139336931404826:Xt=-.09685734690563386:Xt=.00015327283570347363:t[9]>88.50000000000001?Xt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Xt=-.04077257804338707:Xt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Xt=.03778141591008941:Xt=-.06459919920634845:Xt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Xt=.14063930759326346:t[0]>179.50000000000003?Xt=.07287482250668585:t[8]>1180.5000000000002?Xt=-.14419393112726253:t[10]>28.500000000000004?Xt=-.07993142770099469:t[17]>1e-35?Xt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Xt=.05527969663610186:Xt=-.10824385941441346:t[3]>11.500000000000002?Xt=.12358502961047915:Xt=-.017509147119622873:t[0]>74.50000000000001?Xt=-.014907705458730486:t[8]>95.50000000000001?Xt=-.02225118168342062:Xt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Xt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Xt=.04962819555610421:Xt=-.07213577821855309:Xt=.09139529824708481:t[19]>1e-35?Xt=.013439401088345224:Xt=-.049274647207292056:Xt=.10531673719686951;let br;t[40]>1e-35?t[0]>1937.5000000000002?br=-.06421671152073961:br=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?br=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?br=-.03520420769287065:t[8]>1085.5000000000002?br=-.019817352506127633:br=.11444439424520964:br=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?br=-.010490117519863269:br=.08104430117757461:t[121]>1e-35?t[243]>1e-35?br=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?br=.06619344145920268:t[0]>4091.5000000000005?br=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?br=.10016091391222309:br=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?br=-.019511460451434884:br=-.11643672465055221:t[2]>18.500000000000004?br=.07848228087333317:t[8]>55.50000000000001?br=.032583027899956235:br=-.11209832692153521:t[11]>1e-35?br=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?br=-.09996887746328006:t[9]>2.5000000000000004?br=.02157682011863397:br=-.05247727848991843:br=.07409150201483244:t[1]>38.50000000000001?br=-.11378466075449625:t[224]>1e-35?br=-.10741749127732923:t[1]>26.500000000000004?br=.07343136534146562:br=-.07013573628594773:t[25]>1e-35?br=-.04626669734164317:br=.05518333197956482:br=.00032434010867555516;let cr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?cr=.026313251010808853:cr=-.08997339150292381:cr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?cr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?cr=.0905155504503746:t[8]>1049.5000000000002?cr=-.062312558183394054:t[8]>719.5000000000001?cr=.09583836191410239:t[0]>3719.5000000000005?cr=-.0778097309430818:cr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?cr=-.12920865648544927:t[0]>2699.5000000000005?cr=-.07086587879041864:cr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?cr=-.11377786322600797:cr=-.009486325820117998:t[1]>55.50000000000001?cr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?cr=-.07938291201004219:t[2]>36.50000000000001?cr=.01520046732530246:cr=.13649854049662832:cr=-.07145015938528873:t[8]>407.50000000000006?cr=-.00350257360822279:cr=.11332047082193297:cr=-.10060624458629897:cr=.05429496612497562:t[8]>1446.5000000000002?cr=.006073419197482838:cr=-.08718676350883998:cr=-.11532497988252638:cr=.10766270463068293:t[34]>1e-35?cr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?cr=-.0004109812623829506:cr=.021601073497455662:cr=-7343540098965853e-20;let er;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?er=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?er=.05995640200798119:t[0]>3443.5000000000005?er=-.14698883458733583:er=-.030039164579240187:t[189]>1e-35?er=-.06086763220538141:t[1]>86.50000000000001?er=-.05096727866142538:t[4]>64.50000000000001?er=.11240554253834577:t[4]>45.50000000000001?er=-.030279760168394117:t[6]>45.50000000000001?er=.10161088917815142:t[10]>77.50000000000001?er=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?er=-.06672020005240323:er=.08831457502630258:t[8]>2592.5000000000005?er=-.052617701047376654:t[10]>29.500000000000004?er=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?er=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?er=-.064099222705728:er=.044332487521538365:t[0]>2882.5000000000005?er=.031099546885005065:er=.12938467051623853:t[0]>4221.500000000001?er=-.0928676413498701:t[9]>30.500000000000004?er=-.05781824812803708:er=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?er=-.06648105454098469:er=.05985487552383097:er=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?er=.05282385499619401:t[1]>66.50000000000001?er=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?er=.027885690791379255:er=-.08407126408362446:er=.014432924125571093:er=-9903435845205118e-20;let ar;t[76]>1e-35?ar=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?ar=.013633653464240465:ar=-.10164319411983509:ar=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?ar=.00632864847804078:ar=-.08393000368134668:ar=.07870508617440916:t[284]>1e-35?ar=.1092302727710421:ar=-.0025505047582483234:t[248]>1e-35?ar=.07101822393621864:t[274]>1e-35?ar=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?ar=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?ar=.025081789181021243:ar=-.014813325803582618:t[9]>33.50000000000001?ar=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?ar=.11926990418060353:ar=.01852125513565268:ar=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?ar=-.1178464984373743:t[283]>1e-35?ar=.043370859226927405:t[5]>4320.500000000001?ar=-.01103141226366587:t[8]>1104.5000000000002?ar=-.023053423988095886:ar=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?ar=.000579145585864887:ar=.03389152834202143:t[128]>1e-35?ar=-.14527722052568462:t[210]>1e-35?ar=-.08915971541902741:t[7]>9.500000000000002?ar=-.03307314577076116:t[18]>1e-35?ar=-.05521712302023565:ar=.009315605032770029:ar=.0036332551852289933;let tr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?tr=-.07583539600416284:t[188]>1e-35?tr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?tr=-.011038193049597113:tr=.08154028164397753:t[1]>85.50000000000001?tr=.10259361975201933:tr=.011640408330521594:tr=-.00023319159023748508:t[92]>1e-35?tr=.13771692859530546:tr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?tr=.09967230141007705:t[30]>1e-35?tr=-.08888529037551285:tr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?tr=.08284665960761373:tr=-.029292565021289504:t[7]>7.500000000000001?tr=-.09945093355204493:tr=-.008381393701708593:t[20]>1e-35?tr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?tr=.07585582641438211:t[8]>284.50000000000006?tr=-.029387993239886723:tr=.07716738177321587:t[1]>18.500000000000004?tr=.026745348497993746:tr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?tr=.02337306890530338:tr=-.10390355904767366:tr=.07390521199638532:tr=-.06788247515155237:tr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?tr=-.06360325615644084:tr=.04342192339836601:tr=-.10598779152030145:tr=.05253384605768211;let Pr;t[3]>7.500000000000001?t[157]>1e-35?Pr=-.07514182877923786:Pr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Pr=.028692053800951845:Pr=.14081686716133598:Pr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Pr=.0037139292567243084:Pr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Pr=.01202688580305612:Pr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Pr=.043935495082738626:Pr=-.05639305759669704:t[247]>1e-35?Pr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Pr=.10331836202616368:Pr=.0006926658459781341:t[96]>1e-35?Pr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Pr=-.0741403257305367:Pr=.022900127535540854:t[7]>3.5000000000000004?Pr=.038110741403836294:Pr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Pr=-.09552842289807008:t[1]>27.500000000000004?Pr=.012505935885798007:Pr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Pr=-.1046104767723845:Pr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Pr=.023466328488582572:Pr=.11730925774586994:Pr=-.04771965631104874:Pr=.17059689880751394:Pr=-.08181850955999449:t[26]>1e-35?Pr=-.12727482696678769:Pr=-.014343123272734182;let Wr;t[147]>1e-35?t[1]>53.50000000000001?Wr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Wr=-.02763546051134888:Wr=.06423344777499343:Wr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Wr=.049825139823021586:t[7]>22.500000000000004?Wr=-.01131680751379858:t[0]>2579.5000000000005?Wr=-.10673674485369694:Wr=-.015387212937189957:Wr=.04347325151148724:t[179]>1e-35?Wr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Wr=.0650355590939066:Wr=-.0473332870892226:Wr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Wr=.11139543329789044:t[126]>1e-35?Wr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Wr=.06370903833231022:t[10]>29.500000000000004?Wr=.03415223859607161:t[10]>3.5000000000000004?Wr=-.07415518117873297:Wr=-.0014119203473324082:Wr=.12617652343819508:t[9]>41.50000000000001?Wr=-.10311145857176976:t[8]>2757.5000000000005?Wr=-.08106484219011428:t[7]>71.50000000000001?Wr=-.09783384432091176:t[1]>88.50000000000001?Wr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Wr=-.008884084501608536:Wr=.061339437777743616:Wr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Wr=.01526664064166223:Wr=.13534828515415498:Wr=-.06985484465894776:Wr=.0005758961943178744;let en;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?en=-.029152732370514342:en=.07173628916139178:t[1]>36.50000000000001?en=-.08859111297255318:en=.0018030071815630785:en=.13652461563759322:en=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?en=-.07145140450454163:t[21]>1e-35?en=-.07422841663493233:en=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?en=.11864240653986852:t[3]>33.50000000000001?en=-.08821209591953476:en=.05706392280054726:en=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?en=.01953613016837112:en=-.059781039130025006:t[148]>1e-35?en=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?en=.07207826841738371:t[202]>1e-35?en=.08163917539410503:en=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?en=-.06858280496900336:en=-.1781828899516648:en=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?en=.018232649414147116:en=-.04419781124222661:en=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?en=.11452368095776105:en=-.036496437259924026:en=-.040445338739465486:en=.0816572651001145:en=-.08968914517368663:en=.0002826343082585516;let gn;t[189]>1e-35?t[0]>5269.500000000001?gn=-.08839493050459957:t[10]>85.50000000000001?gn=.10046908365702462:t[8]>2592.5000000000005?gn=-.09632233975926387:t[8]>2000.5000000000002?gn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?gn=.035504970430426296:t[1]>31.500000000000004?gn=-.1133764813142531:gn=-.01138280942244812:t[8]>1125.5000000000002?gn=.09800530246229806:gn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?gn=.07316772160107896:gn=-.059095014819051765:gn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?gn=-.09150209066166894:t[8]>3084.0000000000005?gn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?gn=-.04449234460408263:gn=.05568837973347338:gn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?gn=.12741077850267066:gn=.007372371864985329:t[2]>39.50000000000001?gn=.02295917234617787:gn=.14966532083907075:t[1]>39.50000000000001?gn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?gn=-.02511861881285652:t[1]>27.500000000000004?gn=.08683660011672288:gn=.02956214835267301:t[9]>15.500000000000002?gn=-.016538805462996232:gn=.04352738094981517:gn=-.05561856645643868:t[9]>170.50000000000003?gn=-.07996752635874248:t[179]>1e-35?gn=-.09065975936933919:gn=-.00042817975060427177;let Zn;t[39]>1e-35?t[4]>25.500000000000004?Zn=.03443173196222934:Zn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Zn=-.0013415395759330318:Zn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Zn=.002297618040307216:Zn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Zn=-.015297257305397608:Zn=.09651828834062742:Zn=-.06636003334371929:t[10]>11.500000000000002?Zn=.17631616138309397:t[0]>1639.5000000000002?Zn=3804386478092585e-20:Zn=-.09099296398683193:Zn=-.06874415876172972:t[0]>2151.5000000000005?Zn=-.1311264883406766:Zn=.00809052010141122:t[253]>1e-35?Zn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Zn=.045038497754638605:Zn=-.07770167665661752:Zn=-.08596294280650517:Zn=.08538655727027213:Zn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Zn=.054627956617973275:t[1]>61.50000000000001?Zn=-.11994465088415499:t[4]>8.500000000000002?Zn=.06676200239406452:Zn=-.027503148069376867:t[8]>676.5000000000001?Zn=-.10363964928357075:t[4]>8.500000000000002?Zn=-.07589816227175682:Zn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Zn=.009093153189012338:Zn=-.06119765876605404:Zn=.0004668642103528348;let In;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?In=-.10100794502567233:In=.08000205636470442:In=-.11945419826856896:t[113]>1e-35?In=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?In=.1224302423880318:In=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?In=.0019277012166729114:t[1]>28.500000000000004?In=-.054445821715687494:In=.045645722976713245:t[30]>1e-35?In=.13402660155331655:In=.008921176001777645:In=-.058547426505451076:In=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?In=-.13526418192218206:In=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?In=.0007263224246135398:In=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?In=-.11575657261278308:In=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?In=-.01995960178292952:In=.11216586049153021:In=-.10050961087149474:In=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?In=.10303451081526649:In=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?In=-.043799548968209395:In=-.12451444314954115:t[4]>12.500000000000002?In=-.03838117361958468:In=.06504990789767144:t[57]>1e-35?In=.06890006938293915:In=.0003914274695562949;let Jn;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Jn=.004271749009686975:Jn=-.10523878297127605:Jn=.04633982158107851:Jn=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Jn=-.08655730561951676:t[8]>919.5000000000001?Jn=-.0676453705610183:t[7]>18.500000000000004?Jn=-.027787974193650575:Jn=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Jn=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Jn=-.03473877164537313:t[8]>719.5000000000001?Jn=.10471053866934404:Jn=.008236107678382981:t[4]>57.50000000000001?Jn=.09412219478825269:t[10]>66.50000000000001?Jn=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Jn=-.040681323751002293:Jn=.06374650297561021:Jn=.12884615227401788:t[10]>5.500000000000001?Jn=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Jn=-.05474068967150784:Jn=.03744700650806603:Jn=-.07846396348680855:t[1]>42.50000000000001?Jn=.018972315810821302:Jn=.10953621007604744:t[5]>4439.500000000001?Jn=.010999776705494586:t[1]>40.50000000000001?Jn=-.12394200059775967:t[10]>2.5000000000000004?Jn=.013528093962849453:Jn=-.09222088417048682:Jn=-.12662967149701485:Jn=.09327296405849603:t[3]>99.50000000000001?Jn=-.013581954439986752:Jn=.0005526498251862075;let tn;t[187]>1e-35?t[243]>1e-35?tn=-.08392792551692502:t[10]>68.50000000000001?tn=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?tn=-.0825306209711224:tn=.049559996084532945:tn=-.1064938580886302:tn=.03353240732240275:tn=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?tn=.16966001471529374:t[1]>57.50000000000001?tn=-.005772777673676247:tn=.09383677041525058:t[8]>747.5000000000001?tn=.054068175469351235:tn=-.049968216310277036:t[8]>753.5000000000001?tn=-.0679383555784074:t[4]>8.500000000000002?tn=-.059757341189735386:tn=.05701083682780414:tn=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?tn=.05820296128730006:tn=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?tn=.15340611616954566:tn=.04385036188666874:t[0]>4449.500000000001?tn=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?tn=.004840354641006495:tn=.09967827580276283:tn=.11605363537391578:t[9]>19.500000000000004?tn=-.0735831692725717:tn=.019973331823355176:t[306]>1e-35?t[149]>1e-35?tn=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?tn=-.02442182361342386:tn=.10334853004243093:tn=-.030431948680167104:tn=-956078595250818e-19;let Vn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Vn=-.040232505718244854:t[0]>3030.5000000000005?Vn=.0634109586813073:Vn=-.04043617034245621:Vn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Vn=-.007859096946435131:Vn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Vn=.05515771679628051:Vn=-.04214471312668263:Vn=-.09589322222261765:t[193]>1e-35?Vn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Vn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Vn=-.08152604001147906:t[11]>1e-35?Vn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Vn=.13100930780107503:t[10]>25.500000000000004?Vn=.05921074710011526:Vn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Vn=.0009447118243153454:Vn=-.09820565036865991:Vn=.057146909749745546:t[0]>2115.5000000000005?Vn=-.12331216726611678:Vn=.007281983677694285:t[2]>56.50000000000001?Vn=.012310154675612615:Vn=-.08873665774670461:t[6]>25.500000000000004?Vn=.134708740821879:t[9]>5.500000000000001?Vn=-.0805901581148979:t[224]>1e-35?Vn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Vn=.10842593386554122:t[2]>13.500000000000002?Vn=.06466798320378395:Vn=-.08578130788886655:Vn=-.03590892078300114:Vn=.0003499894043880708;let Pe;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?Pe=.10839808814624702:Pe=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?Pe=-.007478368069393829:Pe=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?Pe=.04035247751736232:t[0]>4255.500000000001?Pe=-.1310865624507367:t[0]>4004.5000000000005?Pe=.06647367311982634:Pe=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?Pe=-.011618902907510411:Pe=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?Pe=.09356028223727986:Pe=-.03811765057032162:Pe=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?Pe=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?Pe=.1146142460964847:t[1]>62.50000000000001?Pe=-.09679869865322362:t[9]>71.50000000000001?Pe=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?Pe=-.039046426387852974:Pe=.04558778688367152:Pe=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?Pe=.03261697816211156:t[15]>1e-35?Pe=.02586252542264368:t[2]>14.500000000000002?Pe=-.016420452667484604:Pe=-.1011799626006976:Pe=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?Pe=.010193588102560583:Pe=.11748729525930773:Pe=-.04468162226743652:Pe=-.028365274393617957:t[71]>1e-35?Pe=.05115139346588793:Pe=-.0001510425316936658;let z;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?z=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?z=.020637047900190317:z=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?z=-.04632587527094407:z=.08603684785510396:z=-.05101401015448496:z=.025466432054358498:z=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?z=.020385355430046367:z=.12032592051335252:z=-.012387370292173013:t[2]>23.500000000000004?z=-.12568545484492677:z=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?z=.043528764484784536:z=.14352071657196003:z=-.009332833816977268:z=.11186782227735846:z=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?z=-.05649104643152564:z=.03884200719305747:t[42]>1e-35?z=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?z=-.04103416502526736:z=.04881823954656287:t[4]>15.500000000000002?z=.009342724662897898:t[0]>3969.5000000000005?z=-.025637309961309498:z=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?z=-.08185697075265091:t[0]>2215.5000000000005?z=.030063975892297354:t[0]>807.5000000000001?z=-.03924325550733229:z=.0415330999189793:z=-.00024374664461674863;let Ce;t[3]>7.500000000000001?Ce=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ce=.025798416259686565:Ce=.13251610353146012:Ce=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?Ce=-.11098564237775424:Ce=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?Ce=.15347826616466054:t[3]>4.500000000000001?Ce=.10379320730958941:Ce=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?Ce=.03159791088468647:Ce=-.10612873364104258:Ce=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?Ce=-.02335760775001469:Ce=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?Ce=-.011164334474672973:Ce=-.06594044410501655:t[207]>1e-35?Ce=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?Ce=-.01725821503981916:Ce=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?Ce=-.04226531631656534:Ce=-.14409800530171432:Ce=-.03245576341206398:t[8]>4214.500000000001?Ce=.0895409165534886:t[247]>1e-35?Ce=-.06506383629143335:t[118]>1e-35?Ce=-.07214270121257443:t[8]>546.5000000000001?Ce=-.004385020865473831:Ce=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?Ce=.046278501133958524:Ce=-.030835570926968044:t[0]>493.50000000000006?Ce=-.12794504651610425:Ce=.009415039807550776;let Ie;t[304]>1e-35?Ie=-.04717777269217453:t[76]>1e-35?Ie=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Ie=-.09648224457374217:t[132]>1e-35?Ie=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Ie=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Ie=.10838431695638147:t[230]>1e-35?Ie=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Ie=.050071316251979:Ie=-.006356941111525215:t[6]>8.500000000000002?Ie=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Ie=.10217402850540398:Ie=-.048840949025349197:Ie=-.03668313197909846:t[7]>39.50000000000001?Ie=-.0562642841496003:t[10]>2.5000000000000004?Ie=.09749777369987417:Ie=-.04848223121417616:t[0]>5453.500000000001?Ie=.08316648226133942:Ie=-.0261979698267618:t[212]>1e-35?Ie=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Ie=.04837009746506856:Ie=-.09184360565631328:Ie=.0032411047845613606:t[0]>4733.500000000001?Ie=.0977378556864798:Ie=.010776545559325588:Ie=-.012483310473120218:Ie=-.049284121449103935:Ie=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Ie=-.08380361910948711:Ie=.07375088778585813:Ie=-.1084864186071348:Ie=.0007819503469605476;let F;t[7]>17.500000000000004?t[115]>1e-35?F=.08741852531696623:t[167]>1e-35?F=.10078975495600809:F=-.0018324767784017562:t[290]>1e-35?F=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?F=.1379733311640402:F=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?F=-.09360083033774169:F=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?F=-.015599362579530679:t[0]>4593.500000000001?F=-.12029549262691491:F=-.018917032256501397:F=.04632831686576592:F=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?F=-.05894883236412263:F=.05213944998315824:F=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?F=.07577412405680808:F=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?F=-.0277076900736147:t[1]>65.50000000000001?F=-.023587471585763506:F=.10184896592433082:F=-.057699270527916825:F=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?F=.06566902102799584:t[10]>25.500000000000004?F=-.07033633753181047:F=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?F=-.08108035861059537:F=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?F=-.12431182772561139:F=.01886235886984271:F=.0025579594894418116;let B;t[8]>2915.5000000000005?t[101]>1e-35?B=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?B=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?B=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?B=.0687641681341721:t[10]>102.50000000000001?B=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?B=-.06762578396473291:t[10]>65.50000000000001?B=-.05226727783610509:t[282]>1e-35?B=.09911438410640917:t[19]>1e-35?B=.06915156336429933:B=-.006565637886508241:B=-.08344300251849307:B=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?B=.19428463865406298:B=.016073883020956765:t[13]>1e-35?B=.06864077097923665:B=-.01388867527034731:t[0]>1847.5000000000002?B=.004655280608161356:t[1]>40.50000000000001?B=.031406054057765996:B=.12798062439212832:B=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?B=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?B=-.0706095614785733:B=.04227164041372561:B=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?B=-.07139533369873902:B=.008952586782921625:B=.06086212582180936:B=-.0816938490403437:B=-.051224901945956025:B=-.10525399124186095:B=.000270924147208224;let Z;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Z=.029186512383291244:t[7]>1.5000000000000002?Z=-.14984127276725573:t[1]>40.50000000000001?Z=.032757060730648144:Z=-.07675575422749602:t[6]>8.500000000000002?Z=.10599766037117893:Z=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Z=-.051394622947855385:Z=.03237141302699347:Z=.12526173027943244:Z=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Z=-.07383912482657777:t[0]>5147.500000000001?Z=.07008813937042091:t[10]>38.50000000000001?Z=-.06779203808365307:Z=-.013782769999524498:Z=.0880038869117715:Z=-.12846294176070952:t[281]>1e-35?Z=-.06810806903850834:t[10]>227.50000000000003?Z=-.08937977001661111:t[10]>130.50000000000003?Z=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Z=.011036530162093841:Z=-.11500797478569702:Z=.03702229366129399:Z=.07242026683784307:t[189]>1e-35?Z=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Z=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Z=-.02608892716555304:Z=.09609599320761308:t[9]>105.50000000000001?Z=-.06848127135991534:Z=.0023675721254089715:t[86]>1e-35?Z=-.11049635625500497:Z=-.004847764219432233;let ge;t[125]>1e-35?t[0]>3969.5000000000005?ge=-.09462233499115416:ge=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ge=-.030700661288166148:ge=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ge=.03149547314036763:ge=-.08166208257451366:t[0]>5850.500000000001?ge=-.10228136324773157:t[102]>1e-35?ge=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ge=.01782894842128785:t[13]>1e-35?ge=.002680190260979968:ge=.1773965720476949:t[2]>72.50000000000001?ge=.09090831938627947:t[1]>59.50000000000001?ge=-.12297206702816128:t[0]>4977.500000000001?ge=.09899015653118268:ge=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ge=-.0675900954187773:ge=.012336403425364092:ge=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ge=-.02671721777458802:ge=-.09242452991958029:t[284]>1e-35?ge=-.08585691288582491:ge=.013332890564324447:t[4]>14.500000000000002?ge=-.005245022074799553:t[23]>1e-35?ge=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ge=-.09289852307936758:t[116]>1e-35?ge=-.09686573010015055:t[8]>804.5000000000001?ge=.03812547148215318:ge=.005162744968176633:t[9]>43.50000000000001?ge=-.059246106396159376:ge=.050370113808135275:ge=.000794041852811028;let _e;t[3]>7.500000000000001?_e=.0004981426543104341:t[9]>114.50000000000001?_e=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?_e=-.019061766497948867:_e=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?_e=-.006044199577160493:_e=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?_e=.11486607015912494:t[9]>16.500000000000004?_e=-.08686820858087294:_e=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?_e=-.022230207980026437:_e=.1056683690528792:_e=-.05859530800943035:_e=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?_e=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?_e=-.05177544573528314:_e=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?_e=.15159657923771555:_e=-.0060542654587671055:t[9]>5.500000000000001?_e=-.042808028205051786:t[1]>48.50000000000001?_e=-.010449538258110742:_e=.10026907521968294:_e=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?_e=-.02272452389409874:_e=-.11202691218244319:t[5]>1809.5000000000002?_e=-.04460413584255906:_e=.08196329474205256:t[10]>69.50000000000001?_e=.10221481166238167:_e=.0004063052701699382:t[243]>1e-35?_e=-.07563941678849846:t[18]>1e-35?_e=.02563513231103432:_e=-.004740081147303786;let ut;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ut=.057446442918106:ut=-.04404018270156349:ut=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ut=-.05930486238817954:t[1]>29.500000000000004?ut=.06955866121256543:t[8]>597.5000000000001?ut=-.06538593556505168:ut=.06212512595497445:ut=.00021102929959182257:t[9]>90.50000000000001?ut=.0958061289119631:t[102]>1e-35?ut=.07172059675638813:t[1]>47.50000000000001?ut=-.03879798603977766:t[297]>1e-35?ut=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?ut=.003805910996312012:ut=.09304295674749524:t[11]>1e-35?t[18]>1e-35?ut=.11252376801858695:t[288]>1e-35?ut=-.10293901912180432:ut=.014669268837893872:t[1]>42.50000000000001?ut=-.05988274123836837:t[145]>1e-35?ut=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?ut=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?ut=-.03366718308159971:ut=.11936550608549797:t[1]>31.500000000000004?ut=-.07454716789539667:ut=.027859650621164217:t[10]>10.500000000000002?ut=-.11806374092321247:ut=-.03506042229223101:ut=-.0007080765837654515:t[10]>6.500000000000001?ut=-.028077713664996503:t[2]>7.500000000000001?ut=.15803724124216814:ut=.0351381284833169:ut=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let zt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?zt=-.06563670567578264:zt=.067656954313663:zt=-.10388217548685377:t[8]>2302.5000000000005?zt=.07190621943790435:t[4]>67.50000000000001?zt=.060020507643618604:t[4]>38.50000000000001?zt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?zt=-.06568134366461277:t[8]>1075.5000000000002?zt=-.004768057709758692:zt=.11785959165999467:zt=-.05080221682879267:zt=.14814206127494542:zt=-.07241946332311736:t[253]>1e-35?zt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?zt=-.02471195342450034:zt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?zt=-.10741850739482771:zt=.010051635824944:zt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?zt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?zt=-.08992396138178163:zt=.010944365997007212:zt=.06221307021813793:zt=.1286024087559141:t[127]>1e-35?zt=.06568148624531012:t[10]>40.50000000000001?zt=-.07567979134643352:t[5]>5647.500000000001?zt=.07594672895572069:zt=-.018158016446439187:t[6]>55.50000000000001?zt=.009293422430111872:t[4]>45.50000000000001?zt=-.017749818406964022:t[2]>46.50000000000001?zt=.01714136511113982:zt=-724762291423549e-19;let Zt;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?Zt=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?Zt=.07084726276890757:Zt=-.11232323677722932:Zt=.04812773089510436:Zt=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?Zt=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?Zt=.0879462816013881:Zt=-.002966662093626573:t[306]>1e-35?Zt=-.04588085188342676:Zt=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?Zt=-.006600332774461143:Zt=.1272481351557754:Zt=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?Zt=.011884312066620044:Zt=.11678751052403374:t[4]>8.500000000000002?Zt=.03627129613273813:Zt=-.12132783497902287:Zt=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Zt=-.06830131718398992:t[0]>5147.500000000001?Zt=.062360406249609306:t[4]>4.500000000000001?Zt=-.013162203864592055:Zt=-.07153029184927609:Zt=.07628618062271557:Zt=-.12085065687320373:t[190]>1e-35?Zt=-.045816889524231186:t[137]>1e-35?Zt=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?Zt=.025895337822752502:Zt=-.06503949350616421:t[10]>227.50000000000003?Zt=-.09989456525790491:t[10]>130.50000000000003?Zt=.08616651057030683:Zt=.0001234981796706021;let Yt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Yt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Yt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Yt=-.141732381961068:Yt=-.0317152307496497:Yt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Yt=.12191801556691254:Yt=-.0003444689085397977:Yt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Yt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Yt=-.05676033995381961:Yt=.10933961076803381:t[4]>26.500000000000004?Yt=-.11667582544549814:t[8]>1765.5000000000002?Yt=.032174455312047705:Yt=-.0755016390126608:t[293]>1e-35?Yt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Yt=.026571311956824436:t[15]>1e-35?Yt=.06175459479851121:Yt=-.018778084411148754:t[9]>40.50000000000001?Yt=-.09420232889965811:Yt=-.004578248021263184:t[2]>1.5000000000000002?Yt=.005453714644971445:Yt=-.03907138175699279:Yt=-.055296364182154736:t[23]>1e-35?Yt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Yt=-.09358146510580179:Yt=.060524657996178094:Yt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Yt=-.12698331085931538:Yt=.006059605604079918:t[2]>196.50000000000003?Yt=-.09451315810804783:Yt=.0011390147031687425;let xt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?xt=.05517359070460923:xt=-.04758751221404857:xt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?xt=.1040436595565776:t[9]>21.500000000000004?xt=.04032250517675179:t[107]>1e-35?xt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?xt=.1192453009230486:t[1]>51.50000000000001?xt=.0443376336292195:xt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?xt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?xt=-.08999822408398037:xt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?xt=-.061850439226075:xt=.08849196353361093:xt=.10536348167793089:t[92]>1e-35?xt=.04894947712119185:t[9]>16.500000000000004?xt=.05900227903883853:t[9]>5.500000000000001?xt=-.11946594348916476:xt=-.03652096348071964:t[1]>41.50000000000001?xt=-.07411603110840567:xt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?xt=.08493634342741495:t[11]>1e-35?xt=-.10899097825564363:xt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?xt=.08356655906359918:t[7]>25.500000000000004?xt=-.09475076526194888:t[10]>5.500000000000001?xt=-.01999406228763778:xt=.06696212545889428:t[6]>20.500000000000004?xt=.14713592661393468:xt=.0459917279002218:xt=.00027445928493734093;let Ar;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Ar=-.06904501553217077:Ar=.05696231672035904:Ar=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Ar=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Ar=-.011419256378538392:t[0]>3830.5000000000005?Ar=.140315841503076:Ar=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Ar=-.04027822909411164:Ar=.03176085103667189:Ar=.06779515865838849:t[4]>15.500000000000002?Ar=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Ar=.06124039747298539:Ar=-.04312732764434027:Ar=.09161522761808062:Ar=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Ar=.11211681010488772:t[13]>1e-35?Ar=.06725735814960367:Ar=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Ar=.11743605068905603:Ar=-.011309033539148687:Ar=-.07896094707523052:Ar=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Ar=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Ar=.02836295848998302:Ar=.12210680366745175:Ar=-.058302317470509096:t[5]>4144.500000000001?Ar=.06123341960495106:Ar=-.03840046906926525:Ar=-.05221474543453495:Ar=.03988215485860711:Ar=-.00033074684693083496;let si=CUt(e+r+n+i+o+a+c+l+u+d+p+m+h+g+A+y+E+b+w+R+D+N+O+Y+ee+V+H+U+X+K+j+W+J+ie+ae+te+pe+Ae+Oe+Te+Je+Me+lt+_t+vt+ht+ue+Ue+ye+We+se+le+qe+Be+xe+je+et+pt+Mt+Kt+Ot+Hr+Rr+on+ve+Ge+ft+Tt+nr+Xt+br+cr+er+ar+tr+Pr+Wr+en+gn+Zn+In+Jn+tn+Vn+Pe+z+Ce+Ie+F+B+Z+ge+_e+ut+St+zt+Zt+Yt+xt+Ar);return[1-si,si]}s(uGe,"multilineModelPredict");function CUt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(CUt,"sigmoid");var vUt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},dGe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function fGe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(vUt[r]??[]).some(c=>o.includes(c))}s(fGe,"hasComment");var MK=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=fGe(e,-2,r),this.rstripSecondToLastLineHasComment=fGe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},gye=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new MK(e,n),this.suffixFeatures=new MK(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(dGe).length+1).fill(0);r[dGe[this.language]??0]=1;let n=new Array(Object.keys(Kv).length+1).fill(0);n[Kv[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(Kv).length+1).fill(0);i[Kv[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(Kv).length+1).fill(0);o[Kv[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(Kv).length+1).fill(0);return a[Kv[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function EUt(t,e){return new gye(t.prefix,t.suffix,e)}s(EUt,"constructMultilineFeatures");function pGe(t,e){let r=EUt(t,e).constructFeatures();return uGe(r)[1]}s(pGe,"requestMultilineScore");f();f();f();f();async function*Jv(t,e){for await(let r of t)yield e(r)}s(Jv,"asyncIterableMap");async function*mGe(t,e){for await(let r of t)await e(r)&&(yield r)}s(mGe,"asyncIterableFilter");async function*WF(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(WF,"asyncIterableMapFilter");async function*hGe(...t){for(let e of t)yield*e}s(hGe,"asyncIterableConcat");f();async function $F(t,e,r,n){let i=qr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Nt).updateExPValuesAndAssignments(n,i)}s($F,"createTelemetryWithExpWithId");function Tc(t,{turn:e,conversation:r}={},n){return $F(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(Tc,"createTelemetryWithExpWithTurn");function jF(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},d={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(xUt(c))),a=a.extendedBy(u,d),a}s(jF,"extendUserMessageTelemetryData");function xUt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(xUt,"mapSkillResolutionsForTelemetry");function gGe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),FK(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(gGe,"createUserMessageTelemetryData");function AGe(t,e,r,n,i,o,a,c){let l=IUt(n);return FK(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:n.length,numCodeBlocks:l.length,numTokens:i},c).properties.messageId}s(AGe,"createModelMessageTelemetryData");function yGe(t,e,r,n,i,o,a){FK(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(yGe,"createOffTopicMessageTelemetryData");function CGe(t,e,r,n,i,o,a,c,l){let u=FK(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return bUt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(CGe,"createSuggestionMessageTelemetryData");var vGe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function EGe(t,e,r){let n=await Tc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";uf(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(EGe,"telemetryIndexCodesearch");function FK(t,e,r,n,i,o,a){let c=a??qr.createAndMarkAsIssued(),l={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in c.properties)){let m=gr();i.messageId=m,l.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=c.extendedBy(i,o),d=c.extendedBy(l),p=Kl(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,d,1),u}s(FK,"telemetryMessage");function xGe(t,e,r,n){uf(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(xGe,"createSuggestionShownTelemetryData");function bUt(t,e,r,n,i,o,a,c){uf(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(bUt,"createSuggestionSelectedTelemetryData");function uf(t,e,r,n,i,o){let a=o??qr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Bt(t,i,c),c}s(uf,"telemetryUserAction");function m3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(m3,"logEngineMessages");function Kl(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(Kl,"telemetryPrefixForUiKind");function IUt(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(IUt,"getCodeBlocks");function bGe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(bGe,"uiKindToIntent");function sT(t){return t==="inline"?"conversationInline":"conversationPanel"}s(sT,"conversationSourceToUiKind");function IGe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};wGe(t,"round",i.extendedBy(o,a))}s(IGe,"createAgentRoundTelemetryData");function TGe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};wGe(t,"toolCall",c.extendedBy(l,u))}s(TGe,"createToolInvocationTelemetryData");function wGe(t,e,r){return Bt(t,`${Kl("agentPanel")}.${e}`,r)}s(wGe,"logAgenticEvent");function TUt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(TUt,"truncateContentIfNeeded");function SGe(t,e,r,n,i,o,a){let c=`${Kl(e)}.${a}`,l=o.extendedBy(r,n);Bt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=TUt(i.currentFileContent));let d=o.extendedBy(u,n);Bt(t,`${c}.restricted`,d,1)}s(SGe,"telemetryEditSurvivalTracking");f();f();function Xv(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(Xv,"toString");var Ip=new It("streamChoices"),Aye=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new vye;this.tool_calls=[];this.function_call=new Cye;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new yye),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function wUt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(wUt,"splitChunk");var yye=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},Cye=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},vye=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},aT=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=eR(this.response);this.stats=new Eye;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Ip.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Ip.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Ip.debug(this.ctx,"chunk",a.toString());let[c,l]=wUt(r+a.toString());r=l;for(let u of c){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(d)}catch{Ip.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&SUt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Ip.error(this.ctx,"Error in response:",p.error.message):Ip.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Ip.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new Aye);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let A=this.asSolutionDecision(),y=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||y){let b=g.text.join("");if(A=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>GF(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(A.yieldSolution=!0,A.continueStreaming=!1),!A.yieldSolution)continue;let E=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:E,engineName:i??"",engineChoiceSource:UI(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:A.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;A.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Ip.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Ip.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>GF(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Ip.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function OK(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Ip.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Ip.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Ip.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=GF(e.solution);return QK(t,n,o,e.index,e.requestId,i,r)}s(OK,"prepareSolutionForReturn");function GF(t){let e=t.text.join(""),r=_Ut(t),n=RUt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),c=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),l=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(GF,"convertToAPIJsonData");function SUt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(SUt,"isCopilotConfirmation");function _Ge(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${Xv(n)}. Input: '${t}'`)}}s(_Ge,"parseCallArguments");function _Ut(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=_Ge(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(_Ut,"extractToolCalls");function RUt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=_Ge(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(RUt,"extractFunctionCall");var Eye=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new xye,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},xye=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function UK(t,e){return t!==null&&typeof t=="object"&&e in t}s(UK,"hasKey");function df(t,e){return UK(t,e)?t[e]:void 0}s(df,"getKey");var kGe=Fe(di());var Qa=new It("fetchCompletions");function eR(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(eR,"getRequestId");function h3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(h3,"getProcessingTime");function PGe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(PGe,"uiKindToIntent");var s0=class{static{s(this,"OpenAIFetcher")}};function kUt(t,e,r,n){return Oy(t,e,"proxy","v1/engines",r,n)}s(kUt,"getProxyEngineUrl");function qK(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(qK,"sanitizeRequestOptionTelemetry");async function RGe(t,e,r,n,i,o,a,c,l,u,d){let p=t.get(Eo),m=kUt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},T4(e));qK(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=va(),A=PGe(c);return x2(t,m,a.token,A,i,o,u,d).then(y=>{let E=eR(y);h.extendWithRequestId(E);let b=va()-g;return h.measurements.totalTimeMs=b,Qa.info(t,`Request ${i} at <${m}> finished with ${y.status} status after ${b}ms`),h.properties.status=String(y.status),Qa.debug(t,"request.response properties",h.properties),Qa.debug(t,"request.response measurements",h.measurements),Qa.debug(t,"prompt:",e),Bt(t,"request.response",h),y}).catch(y=>{if(hd(y))throw Bt(t,"request.cancel",h),y;p.setWarning(df(y,"message")??"");let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(df(y,"name")??""),h.properties.code=String(df(y,"code")??""),h.properties.errno=String(df(y,"errno")??""),h.properties.type=String(df(y,"type")??"");let b=va()-g;throw h.measurements.totalTimeMs=b,Qa.info(t,`Request ${i} at <${m}> rejected with ${String(y)} after ${b}ms`),Qa.debug(t,"request.error properties",h.properties),Qa.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),y}).finally(()=>{v8e(t,e,h)})}s(RGe,"fetchWithInstrumentation");async function PUt(t,e,r,n,i,o,a,c,l,u){let d=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});qK(o,d,["messages"]),d.properties.headerRequestId=i,Bt(t,"request.sent",d);let p=va(),m=PGe(c),h={...MI(t)};try{let g=await x2(t,n,a.token,m,i,o,u,h),A=eR(g);d.extendWithRequestId(A);let y=va()-p;return d.measurements.totalTimeMs=y,Qa.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${y}ms`),Qa.debug(t,"request.response properties",d.properties),Qa.debug(t,"request.response measurements",d.measurements),Qa.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",d),g}catch(g){if(hd(g))throw Bt(t,"request.cancel",d),g;let A=d.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",A),d.properties.message=String(df(g,"name")??""),d.properties.code=String(df(g,"code")??""),d.properties.errno=String(df(g,"errno")??""),d.properties.type=String(df(g,"type")??"");let y=va()-p;throw d.measurements.totalTimeMs=y,Qa.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${y}ms`),Qa.debug(t,"request.error properties",d.properties),Qa.debug(t,"request.error measurements",d.measurements),Bt(t,"request.error",d),g}finally{m3(t,e,d)}}s(PUt,"fetchChatWithInstrumentation");function bye(t){return mGe(t,e=>e.completionText.trim().length>0)}s(bye,"postProcessChoices");var DUt="github.copilot.completions.quotaExceeded",VF=class extends s0{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Eo),c="completions",l=await e.get(Yr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Qa.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=aT.create(e,r.count,u,n,[],o).processSSE(i),m=Jv(p,h=>OK(e,h,n));return{type:"success",choices:bye(m),getProcessingTime:s(()=>h3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:d,model:c.name}),h=e.get(Eo),g=await e.get(Yr).getToken(),A=await PUt(e,r,c.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let w=A.body();try{w&&"destroy"in w&&typeof w.destroy=="function"?w.destroy():w instanceof ReadableStream&&w.cancel()}catch(R){Qa.exception(e,R,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(A.status!==200){let w=qr.createAndMarkAsIssued({endpoint:d,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,w,A,g)}let E=aT.create(e,1,A,m,[],kGe.CancellationToken.None).processSSE(),b=Jv(E,w=>OK(e,w,n));return{type:"success",choices:bye(b),getProcessingTime:s(()=>h3(A),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Eo),c="speculation",l=await e.get(Yr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:gr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},d=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){Qa.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,d,l)}let m=aT.create(e,1,d,n,[],o).processSSE(i),h=Jv(m,g=>OK(e,g,n));return{type:"success",choices:bye(h),getProcessingTime:s(()=>h3(d),"getProcessingTime")}}createTelemetryData(e,r,n){return qr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await fC(0),a?.isCancellationRequested?"not-sent":await RGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Nt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:WK(e),temperature:g3(e,n.count),top_p:HK(e),n:n.count,stop:DGe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=Qv(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await fC(0),a?.isCancellationRequested?"not-sent":await RGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:DUt,title:"Learn More"});let l=ws(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Qa.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Qa.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Qa.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Yr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Qa.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Qa.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Qa.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function QK(t,e,r,n,i,o,a){return C8e(t,e,r,i,n),{completionText:e,meanLogProb:BUt(t,r),meanAlternativeLogProb:NUt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:gr(),finishReason:r.finish_reason}}s(QK,"convertToAPIChoice");function BUt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){sn.exception(t,r,"Error calculating mean prob")}}s(BUt,"calculateMeanLogProb");function NUt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){sn.exception(t,r,"Error calculating mean prob")}}s(NUt,"calculateMeanAlternativeLogProb");function g3(t,e){return yg(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(g3,"getTemperatureForSamples");var LUt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function DGe(t,e){return LUt[e??""]??[`


`,"\n```"]}s(DGe,"getStops");function HK(t){return 1}s(HK,"getTopP");function WK(t){return Z6}s(WK,"getMaxSolutionTokens");var Iye=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},$K=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Iye(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new LK(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=QK(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(c[l]=d)}return Object.keys(c).length>0?c:void 0}};f();f();var sh=class{constructor(){this.cache=new Ur(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var jK=new It("getCompletions");function GK(t,e,r){t.get(sh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=A3(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(GK,"telemetryShown");function BGe(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(BGe,"telemetryAccepted");function NGe(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(NGe,"telemetryRejected");function cT(t,e={}){return{...e,telemetryBlob:t}}s(cT,"mkCanceledResultTelemetry");function Ja(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Ja,"mkBasicResultTelemetry");function LGe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=va()-e.telemetryBlob.issuedTime,n=A3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return jK.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),afe(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(jK.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}afe(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(LGe,"handleGhostTextResultTelemetry");function A3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(A3,"resultTypeToString");f();f();f();async function MUt(t){if(t.isCancellationRequested)return;let e=new oh,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(MUt,"cancellationTokenToPromise");async function MGe(t,e){if(e){let r=MUt(e);await Promise.race([t,r])}else await t}s(MGe,"raceCancellation");function Tye(t){return Array.isArray(t)}s(Tye,"isArrayOfT");async function FGe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await OGe(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(FGe,"resolveAll");async function OGe(t,e){let r;return t instanceof Promise?r=await FUt(t,e):r=await OUt(t,e),r}s(OGe,"resolve");async function FUt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Tye(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await MGe(i,e),n.resolutionTime=performance.now()-r,n}s(FUt,"resolvePromise");async function OUt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await MGe(i,e),n.resolutionTime=performance.now()-r,n}s(OUt,"resolveIterable");f();var QUt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},UUt="ms-vscode.cpptools",qUt="CppCompletionContextProvider";function QGe(t,e,r,n){(e.includes(qUt)||e.length===1&&e[0]==="*")&&qGe(t,r,n)}s(QGe,"fillInCppVSActiveExperiments");function UGe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(UUt))&&qGe(t,r,n)}s(UGe,"fillInCppVSCodeActiveExperiments");function qGe(t,e,r){try{let n=QUt,i=t.get(Nt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){sn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){sn.exception(t,n,"fillInCppActiveExperiments")}}s(qGe,"addActiveExperiments");f();function VK(t,e,r){try{let n=t.get(Nt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return sn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(VK,"fillInCSharpActiveExperiments");f();var lT="fallbackContextProvider",zK={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function HGe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(lT))&&HUt(t,r,n)}s(HGe,"fillInMultiLanguageActiveExperiments");function HUt(t,e,r){try{let n=WUt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){sn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(HUt,"addActiveExperiments");function WUt(t,e){let r=zK,n=t.get(Nt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){sn.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(WUt,"getMultiLanguageContextProviderParamsFromExp");function WGe(t){let e={...zK};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(WGe,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var $Ut="typescript-ai-context-provider";function $Ge(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes($Ut)))return!1;try{let i=t.get(Nt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return sn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s($Ge,"fillInTsActiveExperiments");f();var jGe=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),GGe=I.Intersect([I.Object({name:I.String(),value:I.String()}),jGe]),VGe=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),jGe]),jUt=[GGe,VGe],GUt=I.Union(jUt),VUt=new Map([["Trait",zs.Compile(GGe)],["CodeSnippet",zs.Compile(VGe)]]),zUt=s(t=>t,"ensureTypesAreEqual");zUt(!0);var YUt=I.Object({contextItems:I.Array(GUt)}),KUt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),wye=I.Object({id:I.String()}),JUt=I.Intersect([wye,KUt]),XUt=I.Intersect([wye,YUt]),zGe=I.Object({providers:I.Array(JUt)}),YGe=I.Object({providers:I.Array(wye)}),Sye=I.Object({providers:I.Array(XUt),updating:I.Optional(I.Array(I.String()))}),YK=I.Intersect([k8e,I.Object({contextItems:I.Optional(Sye)})]);function KK(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(KK,"filterContextItemsByType");function KGe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of VUt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(KGe,"filterSupportedContextItems");function ZUt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(ZUt,"validateContextItemId");function JGe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??gr();if(!ZUt(o)){let a=gr();sn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=gr();sn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(JGe,"addOrValidateContextItemsIDs");f();var Zc=class{constructor(e=()=>new _ye){this.createStatistics=e;this.statistics=new Ur(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},_ye=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function JK(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(JK,"componentStatisticsToPromptMatcher");var XGe=Fe(di());var wc=class{static{s(this,"ContextProviderRegistry")}},pC=class{static{s(this,"DefaultContextProviders")}},C3=class extends pC{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},Rye=class extends wc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return sn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;VK(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let d=await this.matchProviders(i,o),p=d.filter(R=>R[1]>0);if(d.filter(R=>R[1]<=0).forEach(([R,D])=>{let N={providerId:R.id,matchScore:D,resolution:"none",resolutionTimeMs:0,data:[]};u.push(N)}),p.length===0)return u;if(a?.isCancellationRequested)return sn.debug(this.ctx,"Resolving context providers cancelled"),[];UGe(this.ctx,p.map(R=>R[0].id),l,o),HGe(this.ctx,p.map(R=>R[0].id),l,o),$Ge(this.ctx,p.map(R=>R[0].id),l,o);let h=new XGe.CancellationTokenSource;if(a){let R=a.onCancellationRequested(D=>{h.cancel(),R.dispose()})}let g=fM(this.ctx)&&!_W(this.ctx)?0:eqt(this.ctx,o),A=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,y;g>0&&(y=setTimeout(()=>{h.cancel(),h.dispose()},g));let E=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:A,data:c};for(let[R]of p){let D=this.ctx.get(Zc).getPreviousStatisticsForCompletion(r)?.get(R.id);D&&(b.previousUsageStatistics=D);let N=R.resolver.resolve(b,h.token);E.set(R.id,N)}let w=await FGe(E,h.token);y&&clearTimeout(y);for(let[R,D]of p){let N=w.get(R.id);if(N){if(N.status==="error")Sz(N.reason)||sn.error(this.ctx,`Error resolving context from ${R.id}: `,N.reason),u.push({providerId:R.id,matchScore:D,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:[]});else{let O=[...N.value??[]];if((N.status==="none"||N.status==="partial")&&(sn.info(this.ctx,`Context provider ${R.id} exceeded time budget of ${g}ms`),R.resolver.resolveOnTimeout))try{let U=R.resolver.resolveOnTimeout(b);Tye(U)?O.push(...U):U&&O.push(U),O.length>0&&(N.status="partial")}catch(U){sn.error(this.ctx,`Error in fallback logic for context provider ${R.id}: `,U)}let[Y,ee]=KGe(O);ee&&sn.error(this.ctx,`Dropped ${ee} context items from ${R.id} due to invalid schema`);let V=JGe(this.ctx,Y),H={providerId:R.id,matchScore:D,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:V};u.push(H)}this.ctx.get(Zc).getStatisticsForCompletion(r).setLastResolution(R.id,N.status)}else sn.error(this.ctx,`Context provider ${R.id} not found in results`)}return u.sort((R,D)=>D.matchScore-R.matchScore)}async matchProviders(r,n){let i=tJ(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},kye=class extends wc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Ur(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function XK(t,e){return new kye(new Rye(t,e))}s(XK,"getContextProviderRegistry");function ZK(t,e,r){let n=t.get(Zc).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:d}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="full"||y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0,A=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),A!==void 0&&(h.numPartiallyUsedItems=A),h})}s(ZK,"telemetrizeContextItems");function eJ(t){return t.matchScore>0&&t.resolution!=="error"}s(eJ,"matchContextItems");function tJ(t,e){let r=Pye(t,e),n=Wi(t,qt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(pC).getIds();return Array.from(new Set([...i,...r,...n]))}s(tJ,"getActiveContextProviders");function Pye(t,e){return fM(t)?["*"]:t.get(Nt).contextProviders(e)}s(Pye,"getExpContextProviders");function v3(t,e){return tJ(t,e).length>0}s(v3,"useContextProviderAPI");function eqt(t,e){let r=Wi(t,qt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Nt).contextProviderTimeBudget(e)}s(eqt,"getContextProviderTimeBudget");var a0=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Ur(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){let c=this.ctx.get(wc),{textDocument:l,originalPosition:u,originalOffset:d,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:d,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var rJ=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await Uv(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},nJ=class extends rJ{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=eVe(r,n),this.isBlockStart(tqt(r,n))&&this.isBlockBodyEmpty(r,n)}};function tqt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(tqt,"getLineAtOffset");function eVe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(eVe,"rewindToNearestNonWs");function ZGe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(ZGe,"indent");function rqt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=ZGe(t,r),i=ZGe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(rqt,"outdented");var mC=class extends rJ{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&pqe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=eVe(r,n);let i=await Uv(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&rqt(d,p,r)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=n}d=d.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let d=c.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(A=>A.hasError())?.children.find(A=>A.type=="block"));let h,g=0;for(let A of a.children){if(A.type==":"&&g==0){h=A;break}A.type=="("&&(g+=1),A.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let A=h.nextSibling;if(A.type=='"'||A.type=="'"||A.type=="ERROR"&&(A.text=='"""'||A.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(y=>y.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(y=>y.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(A=>A.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(A=>A.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let d=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},nqt={python:new mC("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new mC("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new mC("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new mC("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new nJ("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new nJ("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new mC("csharp",{},new Map([]),[],"block",null,!0),java:new mC("java",{},new Map([]),[],"block",null,!0),php:new mC("php",{},new Map([]),[],"block",null,!0),cpp:new mC("cpp",{},new Map([]),[],"block",null,!0)};function Dye(t){if(!Ap(t))throw new Error(`Language ${t} is not supported`);return nqt[Iz(t)]}s(Dye,"getBlockParser");async function tVe(t,e,r){return Ap(t)?Dye(t).isEmptyBlockStart(e,r):!1}s(tVe,"isEmptyBlockStart");async function rVe(t,e,r,n){if(Ap(t))return Dye(t).isBlockBodyFinished(e,r,n)}s(rVe,"isBlockBodyFinished");async function nVe(t,e,r){if(Ap(t))return Dye(t).getNodeStart(e,r)}s(nVe,"getNodeStart");var hUn=new It("parseBlock");function zF(t,e,r){let n=e.getText(ms.range(ms.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>rVe(o,n,a,i)}s(zF,"parsingBlockFinished");function oJ(t,e){return tVe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(oJ,"isEmptyBlockStartUtil");async function iVe(t,e,r,n){let o=e.getText(ms.range(ms.position(0,0),r))+n,a=await nVe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(iVe,"getNodeStartUtil");var iqt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),oqt=new RegExp(`^(${iqt.join("|")})`);function sqt(t){return oqt.test(t.trimLeft().toLowerCase())}s(sqt,"isContinuationLine");function iJ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(iJ,"indentationOfLine");function sJ(t,e){let r=t.getText(),n=t.offsetAt(e);return Bye(r,n,t.detectedLanguageId)}s(sJ,"contextIndentation");function Bye(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,A;for(;g===void 0&&h>=0&&h<d.length;)g=iJ(d[h]),A=h,h+=m;if(r==="python"&&m===-1){h++;let y=d[h].trim();if(y.endsWith('"""')){if(!(y.startsWith('"""')&&y!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=iJ(d[h]),A=h,h--}}return[g,A]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let d=c-1;d>=0;d--){let p=iJ(n[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(Bye,"contextIndentationFromText");var aqt=!1;function cqt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&aqt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let d=iJ(u);if(d!==void 0&&(d<c||d===c&&!sqt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(cqt,"completionCutOrContinue");function oVe(t,e){return r=>{let n=cqt(r,t,e);return n==="continue"?void 0:n}}s(oVe,"indentationBlockFinished");f();f();f();f();f();f();var lqt={tokenizerName:"o200k_base"};function uqt(t){return{...lqt,...t}}s(uqt,"cursorContextOptions");function YF(t,e={}){let r=uqt(e),n=$i(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(YF,"getCursorContext");f();f();var dqt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function sVe(t){let e=dqt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(sVe,"announceSnippet");var Nye=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Lye=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=hqt.get(e.languageId)??mqt}tokenize(e){return new Set(fqt(e).filter(r=>!this.stopsForLanguage.has(r)))}},aVe=new Nye(20),E3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Lye(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=aVe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(d,p).forEach(A=>A.forEach(y=>g.add(y),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:d,endLine:p})}return c&&aVe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function fqt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(fqt,"splitIntoWords");var pqt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),mqt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...pqt]),hqt=new Map([]);f();function aJ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(aJ,"getBasicWindowDelineations");var cJ=class t extends E3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return aJ(this.windowLength,e)}_getCursorContextInfo(e){return YF(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return gqt(e,r)}};function gqt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(gqt,"computeScore");f();var lJ=class t extends E3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return aJ(this.windowLength,e)}_getCursorContextInfo(e){return YF(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):YF(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return Aqt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await Uv(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function Aqt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(Aqt,"computeScore");var yqt=0,Cqt=60,vqt=4,Eqt=1,xqt=20,bqt=1e4,cVe={snippetLength:Cqt,threshold:yqt,maxTopSnippets:vqt,maxCharPerFile:bqt,maxNumberOfFiles:xqt,maxSnippetsPerFile:Eqt,useSubsetMatching:!1};var Mye={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function Iqt(t,e){return(e.useSubsetMatching?lJ.FACTORY(e.snippetLength):cJ.FACTORY(e.snippetLength)).to(t)}s(Iqt,"getMatcher");async function lVe(t,e,r){let n=Iqt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(lVe,"getSimilarSnippets");function uVe(t,e){return{...Mye,useSubsetMatching:Fye(t,e)}}s(uVe,"getCppSimilarFilesOptions");function dVe(t){return Mye.maxTopSnippets}s(dVe,"getCppNumberOfSnippets");var Tqt=new Map([["cpp",uVe]]);function uJ(t,e,r){let n=Tqt.get(r);return n?n(t,e):{...cVe,useSubsetMatching:Fye(t,e)}}s(uJ,"getSimilarFilesOptions");var wqt=new Map([["cpp",dVe]]);function fVe(t,e){let r=wqt.get(e);return r?r(t):uqe}s(fVe,"getNumberOfSnippets");function Fye(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Wi(t,qt.UseSubsetMatching))??!1}s(Fye,"useSubsetMatching");f();f();f();f();var Sqt="content_excluded";async function dJ(t,e,r,n){let i=KK(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),c=t.get(yr),l=new Map;await Promise.all(Array.from(o).map(async d=>{l.set(d,await c.getTextDocumentValidation({uri:d}))}));let u=t.get(Zc).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,Sqt]]),m}).map(d=>d.data)}s(dJ,"getCodeSnippetsFromContextItems");function pVe(t,e){let r=t.get(yr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(pVe,"addRelativePathToCodeSnippets");f();function Xa(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Xa,"Text");function uT(t){return t.children}s(uT,"Chunk");f();function Vr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Vr,"functionComponentFunction");function rA(t){return{type:"f",children:t}}s(rA,"fragmentFunction");rA.isFragmentFunction=!0;var fJ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(c0,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=pVe(t.ctx,r),c=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=c.get(d);p===void 0&&(p=[],c.set(d,p)),p.push(u)}let l=[];for(let[u,d]of c.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,d)=>d.importance-u.importance),l.reverse(),l.map(u=>{let d=[];return d.push(Vr(Xa,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Vr(Xa,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Vr(Xa,{children:"---"}))}),Vr(uT,{children:d})})},"CodeSnippets");f();function Oye(t){return t.children}s(Oye,"CompletionsContext");function Qye(t){return t.children}s(Qye,"StableCompletionsContext");function Uye(t){return t.children}s(Uye,"AdditionalCompletionsContext");function pJ(t){return t.name===Oye.name||t.name===Qye.name||t.name===Uye.name}s(pJ,"isContextNode");f();f();f();function mJ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(mJ,"findEditDistanceScore");var KF=50;function qye(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(qye,"approximateMaxCharacters");function JF(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,p]=e.useState();e.useData(c0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=qye(a);return Vr(rA,{children:[Vr(tR,{document:r,position:i,maxCharacters:m}),Vr(hJ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:d})]})}s(JF,"CurrentFile");function tR(t){if(t.document===void 0||t.position===void 0)return Vr(Xa,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Vr(Xa,{children:e})}s(tR,"BeforeCursor");function hJ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Vr(Xa,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Vr(Xa,{});if(r===o)return Vr(Xa,{children:r});let a=o;if(r!==""){let c=$i(t.tokenizer),l=c.takeFirstTokens(o,KF);l.tokens.length>0&&100*mJ(l.tokens,c.takeFirstTokens(r,KF).tokens)?.score<(t.suffixMatchThreshold??vz)*l.tokens.length&&(a=r)}return a!==r&&n(a),Vr(Xa,{children:a})}s(hJ,"AfterCursor");function mVe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(c0,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=qye(a);return Vr(tR,{document:r,position:i,maxCharacters:l})}s(mVe,"DocumentPrefix");function hVe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,p]=e.useState();e.useData(c0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=qye(a);return Vr(hJ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:d})}s(hVe,"DocumentSuffix");f();var gJ=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),d=this.elidePrefix(a,u,c,o);return{blocks:[l,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:d}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function gVe(t){return t.map(e=>e.elidedValue).join("")}s(gVe,"makePrompt");function AVe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(AVe,"makePrefixPrompt");function yVe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(yVe,"makeContextPrompt");f();var x3=class{constructor(e,r=Hye()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function Hye(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===uT.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(Hye,"defaultTransformers");f();var XF={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Wye={};for(let[t,e]of Object.entries(XF))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Wye[r]=t;else Wye[t]=t;function vVe(t){return Wye[t]}s(vVe,"mdCodeBlockLangToLanguageId");var _qt={start:"//",end:""},Rqt=["php","plaintext"],$ye={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function EVe(t){return Object.values($ye).includes(t.trim())}s(EVe,"isShebangLine");function kqt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(kqt,"hasLanguageMarker");function Pqt(t,e){let r=XF[e]?XF[e].lineComment:_qt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(Pqt,"comment");function hC(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>Pqt(o,e)).join(`
`);return r?i+`
`:i}s(hC,"commentBlockAsSingles");function AJ(t){let{languageId:e}=t;return Rqt.indexOf(e)===-1&&!kqt(t)?e in $ye?$ye[e]:`Language: ${e}`:""}s(AJ,"getLanguageMarker");function yJ(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(yJ,"getPathMarker");function ZF(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(ZF,"newLineEnded");function xVe(t){return CVe(typeof t=="string"?t:"plaintext")}s(xVe,"getLanguage");function CVe(t){return XF[t]!==void 0?{languageId:t,...XF[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(CVe,"_getLanguage");var Dqt=5,b3=class{constructor(){this.renderId=0;this.formatPrefix=gVe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new gJ,{blocks:[A,...y]}=g.elide(l,p,u,m,$i(c)),E=performance.now(),b=this.formatPrefix(y),w=this.formatContext?this.formatContext(y):void 0,R=A.elidedValue,D=y.reduce((N,O)=>N+O.elidedTokens,0);return d.push(...Bqt([...y,A])),{prefix:b,prefixTokens:D,suffix:R,suffixTokens:A.elidedTokens,context:w,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:E-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((N,O)=>N+(O.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-Dqt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new x3(e,jye).walkSnapshot((d,p,m)=>{if(d===e||(d.name===JF.name&&(c=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:eO(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let g=d.value.endsWith(r)?d.value:d.value+r,A=g;m.type==="prefix"?A=d.value:EVe(d.value)?A=g:A=hC(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:eO(A),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${JF.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},jye=[...Hye(),(t,e,r)=>pJ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===tR.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===hJ.name?{...r,type:"suffix"}:r];function Bqt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(Bqt,"computeComponentStatistics");function eO(t){return t.replace(/\r\n?/g,`
`)}s(eO,"normalizeLineEndings");f();var CJ=s((t,e)=>{let[r,n]=e.useState();if(e.useData(c0,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(yr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Vr(Nqt,{docInfo:a}):Vr(Lqt,{docInfo:a})}},"DocumentMarker"),Nqt=s(t=>Vr(Xa,{children:yJ(t.docInfo)}),"PathMarker"),Lqt=s(t=>Vr(Xa,{children:AJ(t.docInfo)}),"LanguageMarker");f();f();f();f();function tO(t,e="Unreachable"){throw new Error(e)}s(tO,"assertNever");function Tl(t,e="unexpected state"){if(!t)throw new Cn(`Assertion Failed: ${e}`)}s(Tl,"assert");function nA(t){if(!t()){debugger;t(),n3(new Cn("Assertion Failed"))}}s(nA,"assertFn");function Zv(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(Zv,"checkAdjacentItems");f();f();f();f();f();var eE=s((t,e)=>t===e,"strictEquals");f();f();var ra=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},rO=class{constructor(){this._first=ra.Undefined;this._last=ra.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===ra.Undefined}clear(){let e=this._first;for(;e!==ra.Undefined;){let r=e.next;e.prev=ra.Undefined,e.next=ra.Undefined,e=r}this._first=ra.Undefined,this._last=ra.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new ra(e);if(this._first===ra.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==ra.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ra.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ra.Undefined&&e.next!==ra.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===ra.Undefined&&e.next===ra.Undefined?(this._first=ra.Undefined,this._last=ra.Undefined):e.next===ra.Undefined?(this._last=this._last.prev,this._last.next=ra.Undefined):e.prev===ra.Undefined&&(this._first=this._first.next,this._first.prev=ra.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ra.Undefined;)yield e.element,e=e.next}};f();var Mqt=globalThis.performance&&typeof globalThis.performance.now=="function",I3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=Mqt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var bVe=!1,Fqt=!1,rR;(K=>{K.None=s(()=>xs.None,"None");function e(j){if(Fqt){let{onDidAddListener:W}=j,J=nO.create(),ie=0;j.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),J.print()),W?.()}}}s(e,"_addLeakageTraceLogic");function r(j,W){return h(j,()=>{},0,void 0,!0,void 0,W)}K.defer=r,s(r,"defer");function n(j){return(W,J=null,ie)=>{let ae=!1,te;return te=j(pe=>{if(!ae)return te?te.dispose():ae=!0,W.call(J,pe)},null,ie),ae&&te.dispose(),te}}K.once=n,s(n,"once");function i(j,W){return K.once(K.filter(j,W))}K.onceIf=i,s(i,"onceIf");function o(j,W,J){return p((ie,ae=null,te)=>j(pe=>ie.call(ae,W(pe)),null,te),J)}K.map=o,s(o,"map");function a(j,W,J){return p((ie,ae=null,te)=>j(pe=>{W(pe),ie.call(ae,pe)},null,te),J)}K.forEach=a,s(a,"forEach");function c(j,W,J){return p((ie,ae=null,te)=>j(pe=>W(pe)&&ie.call(ae,pe),null,te),J)}K.filter=c,s(c,"filter");function l(j){return j}K.signal=l,s(l,"signal");function u(...j){return(W,J=null,ie)=>{let ae=T$e(...j.map(te=>te(pe=>W.call(J,pe))));return m(ae,ie)}}K.any=u,s(u,"any");function d(j,W,J,ie){let ae=J;return o(j,te=>(ae=W(ae,te),ae),ie)}K.reduce=d,s(d,"reduce");function p(j,W){let J,ie={onWillAddFirstListener(){J=j(ae.fire,ae)},onDidRemoveLastListener(){J?.dispose()}};W||e(ie);let ae=new Tp(ie);return W?.add(ae),ae.event}s(p,"snapshot");function m(j,W){return W instanceof Array?W.push(j):W&&W.add(j),j}s(m,"addAndReturnDisposable");function h(j,W,J=100,ie=!1,ae=!1,te,pe){let Ae,Oe,Te,Je=0,Me,lt={leakWarningThreshold:te,onWillAddFirstListener(){Ae=j(vt=>{Je++,Oe=W(Oe,vt),ie&&!Te&&(_t.fire(Oe),Oe=void 0),Me=s(()=>{let ht=Oe;Oe=void 0,Te=void 0,(!ie||Je>1)&&_t.fire(ht),Je=0},"doFire"),typeof J=="number"?(clearTimeout(Te),Te=setTimeout(Me,J)):Te===void 0&&(Te=0,queueMicrotask(Me))})},onWillRemoveListener(){ae&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,Ae.dispose()}};pe||e(lt);let _t=new Tp(lt);return pe?.add(_t),_t.event}K.debounce=h,s(h,"debounce");function g(j,W=0,J){return K.debounce(j,(ie,ae)=>ie?(ie.push(ae),ie):[ae],W,void 0,!0,void 0,J)}K.accumulate=g,s(g,"accumulate");function A(j,W=(ie,ae)=>ie===ae,J){let ie=!0,ae;return c(j,te=>{let pe=ie||!W(te,ae);return ie=!1,ae=te,pe},J)}K.latch=A,s(A,"latch");function y(j,W,J){return[K.filter(j,W,J),K.filter(j,ie=>!W(ie),J)]}K.split=y,s(y,"split");function E(j,W=!1,J=[],ie){let ae=J.slice(),te=j(Oe=>{ae?ae.push(Oe):Ae.fire(Oe)});ie&&ie.add(te);let pe=s(()=>{ae?.forEach(Oe=>Ae.fire(Oe)),ae=null},"flush"),Ae=new Tp({onWillAddFirstListener(){te||(te=j(Oe=>Ae.fire(Oe)),ie&&ie.add(te))},onDidAddFirstListener(){ae&&(W?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ie&&ie.add(Ae),Ae.event}K.buffer=E,s(E,"buffer");function b(j,W){return s((ie,ae,te)=>{let pe=W(new R);return j(function(Ae){let Oe=pe.evaluate(Ae);Oe!==w&&ie.call(ae,Oe)},void 0,te)},"fn")}K.chain=b,s(b,"chain");let w=Symbol("HaltChainable");class R{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(J=>(W(J),J)),this}filter(W){return this.steps.push(J=>W(J)?J:w),this}reduce(W,J){let ie=J;return this.steps.push(ae=>(ie=W(ie,ae),ie)),this}latch(W=(J,ie)=>J===ie){let J=!0,ie;return this.steps.push(ae=>{let te=J||!W(ae,ie);return J=!1,ie=ae,te?ae:w}),this}evaluate(W){for(let J of this.steps)if(W=J(W),W===w)break;return W}}function D(j,W,J=ie=>ie){let ie=s((...Ae)=>pe.fire(J(...Ae)),"fn"),ae=s(()=>j.on(W,ie),"onFirstListenerAdd"),te=s(()=>j.removeListener(W,ie),"onLastListenerRemove"),pe=new Tp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}K.fromNodeEventEmitter=D,s(D,"fromNodeEventEmitter");function N(j,W,J=ie=>ie){let ie=s((...Ae)=>pe.fire(J(...Ae)),"fn"),ae=s(()=>j.addEventListener(W,ie),"onFirstListenerAdd"),te=s(()=>j.removeEventListener(W,ie),"onLastListenerRemove"),pe=new Tp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}K.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function O(j,W){return new Promise(J=>n(j)(J,null,W))}K.toPromise=O,s(O,"toPromise");function Y(j){let W=new Tp;return j.then(J=>{W.fire(J)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}K.fromPromise=Y,s(Y,"fromPromise");function ee(j,W){return j(J=>W.fire(J))}K.forward=ee,s(ee,"forward");function V(j,W,J){return W(J),j(ie=>W(ie))}K.runAndSubscribe=V,s(V,"runAndSubscribe");class H{constructor(W,J){this._observable=W;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:s(()=>{W.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{W.removeObserver(this)},"onDidRemoveLastListener")};J||e(ie),this.emitter=new Tp(ie),J&&J.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,J){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(j,W){return new H(j,W).emitter.event}K.fromObservable=U,s(U,"fromObservable");function X(j){return(W,J,ie)=>{let ae=0,te=!1,pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(j.reportChanges(),te&&(te=!1,W.call(J)))},handlePossibleChange(){},handleChange(){te=!0}};j.addObserver(pe),j.reportChanges();let Ae={dispose(){j.removeObserver(pe)}};return ie instanceof Mu?ie.add(Ae):Array.isArray(ie)&&ie.push(Ae),Ae}}K.fromObservableLight=X,s(X,"fromObservableLight")})(rR||={});var Gye=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new I3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},IVe=-1;var Vye=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new zye(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},nO=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},zye=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Yye=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},Oqt=0,T3=class{constructor(e){this.value=e;this.id=Oqt++}static{s(this,"UniqueContainer")}},Qqt=2,Uqt=s((t,e)=>{if(t instanceof T3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),Tp=class{constructor(e){this._size=0;this._options=e,this._leakageMon=IVe>0||this._options?.leakWarningThreshold?new Vye(e?.onListenerError??n3,this._options?.leakWarningThreshold??IVe):void 0,this._perfMon=this._options?._profName?new Gye(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(bVe){let e=this._listeners;queueMicrotask(()=>{Uqt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Yye(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||n3)(d),xs.None}if(this._disposed)return xs.None;r&&(e=e.bind(r));let i=new T3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=nO.create(),o=this._leakageMon.check(i.stack,this._size+1)),bVe&&(i.stack=a??nO.create()),this._listeners?this._listeners instanceof T3?(this._deliveryQueue??=new Kye,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=bc(()=>{o?.(),this._removeListener(i)});return n instanceof Mu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*Qqt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||n3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof T3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Kye=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var ff=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return _Ve(e,this)}},TVe=new Map,Jye=new WeakMap;function _Ve(t,e){let r=Jye.get(t);if(r)return r;let n=qqt(t,e);if(n){let i=TVe.get(n)??0;i++,TVe.set(n,i);let o=i===1?n:`${n}#${i}`;return Jye.set(t,o),o}}s(_Ve,"getDebugName");function qqt(t,e){let r=Jye.get(t);if(r)return r;let n=e.owner?Wqt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=vJ(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=Hqt(e.owner,t);if(c!==void 0)return n+c}}s(qqt,"computeDebugName");function Hqt(t,e){for(let r in t)if(t[r]===e)return r}s(Hqt,"findKey");var wVe=new Map,SVe=new WeakMap;function Wqt(t){let e=SVe.get(t);if(e)return e;let r=$qt(t),n=wVe.get(r)??0;n++,wVe.set(r,n);let i=n===1?r:`${r}#${n}`;return SVe.set(t,i),i}s(Wqt,"formatOwner");function $qt(t){let e=t.constructor;return e?e.name:"Object"}s($qt,"getClassName");function vJ(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(vJ,"getFunctionName");f();var nR;function xJ(t){nR?nR instanceof EJ?nR.loggers.push(t):nR=new EJ([nR,t]):nR=t}s(xJ,"addLogger");function xa(){return nR}s(xa,"getLogger");var Xye;function RVe(t){Xye=t}s(RVe,"setLogObservableFn");function kVe(t){Xye&&Xye(t)}s(kVe,"logObservable");var EJ=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var PVe;function DVe(t){PVe=t}s(DVe,"_setRecomputeInitiallyAndOnChange");var BVe;function NVe(t){BVe=t}s(NVe,"_setKeepObserved");var Zye;function LVe(t){Zye=t}s(LVe,"_setDerivedOpts");var bJ=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return Zye({owner:n,debugName:s(()=>{let o=vJ(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Zye({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(PVe(this,r)),this}keepObserved(e){return e.add(BVe(this)),this}get debugValue(){return this.get()}},dT=class extends bJ{constructor(){super();this.observers=new Set;xa()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&xa()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&xa()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!xa();return kVe(this),r||xa()?.handleObservableCreated(this),this}};function TJ(t,e){let r=new w3(t,e);try{t(r)}finally{r.finish()}}s(TJ,"transaction");function eCe(t,e,r){t?e(t):TJ(e,r)}s(eCe,"subtransaction");var w3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];xa()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():vJ(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,xa()?.handleEndTransaction(this)}};function iA(t,e){let r;return typeof t=="string"?r=new ff(void 0,t,void 0):r=new ff(t,void 0,void 0),new IJ(r,e,eE)}s(iA,"observableValue");var IJ=class extends dT{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,xa()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new w3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),xa()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function iR(t){return new S3(new ff(void 0,void 0,t),t,void 0,void 0)}s(iR,"autorun");function tCe(t,e){return new S3(new ff(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(tCe,"autorunOpts");function wJ(t,e){return new S3(new ff(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(wJ,"autorunHandleChanges");function rCe(t,e){let r=new Mu,n=wJ({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return bc(()=>{n.dispose(),r.dispose()})}s(rCe,"autorunWithStoreHandleChanges");function nCe(t){let e=new Mu,r=tCe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return bc(()=>{r.dispose(),e.dispose()})}s(nCe,"autorunWithStore");var S3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),xa()?.handleAutorunCreated(this),this._runIfNeeded(),o3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),xa()?.handleAutorunDisposed(this),s3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){xa()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){Y2(n)}finally{this._isRunning=!1}}}finally{this.disposed||xa()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}nA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){xa()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){Y2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new Cn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=S3)(iR||={});f();function SJ(t,e){return new oR(new ff(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??eE)}s(SJ,"derivedOpts");LVe(SJ);var oR=class extends dT{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,xa()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),xa()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){Y2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new Cn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}nA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){xa()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){Y2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new Cn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function iCe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new fT(new ff(e,void 0,n),r,n,()=>fT.globalTransaction,eE)}s(iCe,"observableFromEvent");var fT=class extends dT{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,eCe(this._getTransaction(),c=>{xa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||xa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=fT;function e(n,i){let o=!1;fT.globalTransaction===void 0&&(fT.globalTransaction=n,o=!0);try{i()}finally{o&&(fT.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(iCe||={});function FVe(t){let e=new _J(!1,void 0);return t.addObserver(e),bc(()=>{t.removeObserver(e)})}s(FVe,"keepObserved");NVe(FVe);function OVe(t,e){let r=new _J(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),bc(()=>{t.removeObserver(r)})}s(OVe,"recomputeInitiallyAndOnChange");DVe(OVe);var _J=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function ah(t,e,r,n){let i=new RJ(r,n);return SJ({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new RJ(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(ah,"mapObservableArrayCached");var RJ=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new Mu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function oCe(t,e){let r;return rCe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(oCe,"runOnChange");f();f();f();var QVe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),kJ;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof _3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:rR.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:QVe})})(kJ||={});var _3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?QVe:(this._emitter||(this._emitter=new Tp),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},tE=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new _3),this._token}cancel(){this._token?this._token instanceof _3&&this._token.cancel():this._token=kJ.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof _3&&this._token.dispose():this._token=kJ.None}};f();var PJ;function UVe(t){PJ||(PJ=new oO,xJ(PJ)),PJ.addFilteredObj(t)}s(UVe,"logObservableToConsole");var oO=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return jqt([R3(zqt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[R3(" "),ch(iO(e.oldValue,70),{color:"red",strikeThrough:!0}),R3(" "),ch(iO(e.newValue,60),{color:"green"})]:[R3(" (unchanged)")]:[R3(" "),ch(iO(e.newValue,60),{color:"green"}),R3(" (initial)")]}handleObservableCreated(e){if(e instanceof oR){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof oR){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([k3("observable value changed"),ch(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return ch(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([k3("derived recomputed"),ch(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([k3("derived cleared"),ch(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([k3("observable from event triggered"),ch(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([k3("autorun"),ch(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([k3("transaction"),ch(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function jqt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(jqt,"consoleTextToArgs");function R3(t){return ch(t,{color:"black"})}s(R3,"normalText");function k3(t){return ch(Yqt(`${t}: `,10),{color:"black",bold:!0})}s(k3,"formatKind");function ch(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(ch,"styled");function iO(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?Gqt(t,e):Vqt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(iO,"formatValue");function Gqt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${iO(i,e-r.length)}`}return r+=" ]",r}s(Gqt,"formatArray");function Vqt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${iO(o,e-r.length)}`}return r+=" }",r}s(Vqt,"formatObject");function zqt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(zqt,"repeat");function Yqt(t,e){for(;t.length<e;)t+=" ";return t}s(Yqt,"padStr");RVe(UVe);var Kqt=!1;Kqt&&xJ(new oO);f();var sR;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(sR||={});f();f();f();function qVe(t){return t}s(qVe,"identity");var DJ=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=qVe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},rE=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=qVe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var lh=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function aR(t){return t<0?0:t>4294967295?4294967295:t|0}s(aR,"toUint32");function sCe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(sCe,"escapeRegExpCharacters");function uh(t){return t.split(/\r\n|\r|\n/)}s(uh,"splitLines");function pT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(pT,"commonPrefixLength");function nE(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(nE,"commonSuffixLength");var Xqt=/^[\t\n\r\x20-\x7E]*$/;function aCe(t){return Xqt.test(t)}s(aCe,"isBasicASCII");var NGn=String.fromCharCode(65279);var HVe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=Zqt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function Zqt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(Zqt,"getGraphemeBreakRawData");var WVe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new lh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new DJ({getCacheKey:JSON.stringify},e=>{function r(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(r,"arrayToMap");function n(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let c;for(let d of a){let p=r(o[d]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new lh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},$Ve=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();var Gt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new Cn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Cn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Cn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new Cn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var Fr=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var rr=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new Fr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new Fr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-d}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Or=class t{static{s(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=eh(e=>e.startLineNumber,th)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new NJ(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new NJ(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new Cn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new Cn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new rr(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new rr(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new Gt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},NJ=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=r3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=Zg(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=NAe(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=NAe(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Or(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=r3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=Zg(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new Or(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Or(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Jl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new rr(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new rr(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new rr(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Or.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new Fr(e.lineNumber,e.column+this.columnCount):new Fr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return rr.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Xl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new cCe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return uh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},cCe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=Zg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Fr(n,i)}getRange(e){return rr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Jl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Jl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var oA=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var LJ=class extends xs{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=iA(this,n),this.selection=iA(this,i),this.languageId=iA(this,o),this._register(bc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};f();f();function iE(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return wJ({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(iE,"autorunWithChanges");f();var gC=class extends xs{static{s(this,"RecentEditsProvider")}};function eHt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(eHt,"editIsTooCloseToCursor");var MJ=s((t,e)=>{let[r,n]=e.useState();return e.useData(c0,async i=>{if(!i.document)return;let o=t.ctx.get(gC);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(yr),d=[];for(let m=c.length-1;m>=0&&!(d.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let y=h.file===i.document?.uri,E=y?i.position.line:void 0;if(eHt(h,y,E,a.activeDocDistanceLimitFromCursor))continue;let w=o.getEditSummary(h);if(w){l.add(h.file);let R=u.getRelativePath({uri:h.file});d.unshift(ZF(`File: ${R}`)+ZF(w))}}if(d.length===0){n(void 0);return}let p=ZF("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+ZF("End of recent edits");n(p)}),r?Vr(uT,{children:Vr(Xa,{children:r})}):void 0},"RecentEdits");f();f();f();f();var lCe=new Ur;function jVe(t){return[...t].sort((e,r)=>{let n=lCe.get(e.uri)??0;return(lCe.get(r.uri)??0)-n})}s(jVe,"sortByAccessTimes");var GVe=s(t=>t.get(yr).onDidFocusTextDocument(e=>{e.document&&lCe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var FJ=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>cR.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&OJ(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=this.truncateDocs(jVe(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function VVe(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(VVe,"shortCircuit");f();function rHt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(rHt,"defaultHash");function uCe(t,e={}){let{hash:r=rHt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(uCe,"memoize");var zVe={entries:[],traits:[]},QJ={entries:new Map,traits:[]},dCe=class extends Ur{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},wl=new It("relatedFiles"),nHt=1e3,UJ=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},lR=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{wl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){wl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){wl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){wl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(To).readFileString(e)}catch(r){wl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Xc).evaluate(e,r)).isBlocked}catch(n){wl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},iHt=3,YVe=new dCe(nHt);async function KVe(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){wl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(YVe.bumpRetryCount(e.uri)>=iHt?a=QJ:a=void 0);let c=performance.now()-o;if(wl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new UJ;return a}s(KVe,"getRelatedFiles");var fCe=uCe(KVe,{cache:YVe,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});fCe=VVe(fCe,200,QJ);async function qJ(t,e,r,n,i,o=!1){let a=t.get(lR),c=QJ;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await KVe(t,l,r,n,a):await fCe(t,l,r,n,a)}catch(l){c=QJ,l instanceof UJ&&Bt(t,"getRelatedFilesList",r)}return wl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(qJ,"getRelatedFilesAndTraits");function OJ(t,e){return eF(t)===eF(e)}s(OJ,"considerNeighborFile");var cR=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(yr);t.instance===void 0&&(t.instance=new FJ(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(oHt(e,i))return u;let d=await l.getTextDocument({uri:r});if(!d)return wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(d);if(!p)return wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await qJ(e,d,i,o,a,c);return m.entries.size===0?(wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let A=[];h.forEach((y,E)=>{let b=t.getRelativePath(E,p.uri);if(!b||u.docs.has(E))return;let w={relativePath:b,uri:E,source:y};A.unshift(w),u.docs.set(E,w)}),A.length>0&&u.neighborSource.set(g,A.map(y=>y.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function oHt(t,e){return t.get(Nt).excludeRelatedFiles(e)||Wi(t,qt.ExcludeRelatedFiles)}s(oHt,"isExcludeRelatedFilesActive");function JVe(t,e){return t.get(Nt).includeNeighboringFiles(e)||Wi(t,qt.IncludeNeighboringFiles)}s(JVe,"isIncludeNeighborFilesActive");var HJ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(c0,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=cR.defaultEmptyResult();l.turnOffSimilarFiles||(u=await cR.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let d=await a(l.telemetryData,l.document,l,u);o(d)});async function a(l,u,d,p){let m=P3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,d,p)).filter(g=>g.snippet.length>0).sort((g,A)=>g.score-A.score).map(g=>({...sVe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,d,p,m){let h=l.similarFilesOptions||uJ(t.ctx,u,d.detectedLanguageId),A=t.ctx.get(yr).getRelativePath(d),y={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:A,languageId:d.detectedLanguageId};return await lVe(y,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Vr(rA,{children:[...i.map((l,u)=>Vr(sHt,{snippet:l}))]})},"SimilarFiles"),sHt=s((t,e)=>Vr(uT,{children:[Vr(Xa,{children:t.snippet.headline}),Vr(Xa,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var WJ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(c0,a=>{a.traits!==r&&n(a.traits);let c=eF(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Vr(rA,{children:[Vr(Xa,{children:`Consider this related information:
`}),...r.map(a=>Vr(Xa,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function XVe(t,e){return Wi(t,qt.UseSplitContextPrompt)??t.get(Nt).enablePromptContextProxyField(e)}s(XVe,"shouldUseSplitContextPrompt");function ZVe(t){return Vr(rA,{children:[Vr(Qye,{children:[Vr(CJ,{ctx:t,weight:.7}),Vr(WJ,{weight:.6}),Vr(fJ,{ctx:t,weight:.9}),Vr(HJ,{ctx:t,weight:.8})]}),Vr(hVe,{weight:1}),Vr(Uye,{children:Vr(MJ,{ctx:t,weight:.99})}),Vr(mVe,{weight:1})]})}s(ZVe,"splitContextCompletionsPrompt");f();var eze=0;function aHt(){eze=0}s(aHt,"resetContextIndex");function cHt(){return eze++}s(cHt,"getNextContextIndex");var $J=class extends b3{constructor(){super(...arguments);this.formatPrefix=AVe;this.formatContext=yVe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(aHt(),new x3(r,lHt).walkSnapshot((d,p,m)=>{if(d===r||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===tR.name&&(c=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:eO(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let A=g==="prefix",y=A||d.value.endsWith(n)?d.value:d.value+n;i.push({type:A?"prefix":"context",value:eO(y),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,index:A?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${tR.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},lHt=[...jye,(t,e,r)=>pJ(t)?{...r,index:cHt()}:r];f();function jJ(t,e,r){let n=KK(r,"Trait");for(let o of n)uHt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(jJ,"getTraitsFromContextItems");function uHt(t,e,r,n){let i=t.get(Zc).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(uHt,"setupExpectationsForTraits");var dHt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function GJ(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=dHt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Bt(e,t,c)}}s(GJ,"ReportTraitsTelemetry");f();f();f();var VJ=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},zJ=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var YJ=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let d=this.reconcileNode(u,e.path,l,i);d!==void 0&&c.push(d)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(fHt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new mCe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new pCe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},pCe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},mCe=class{constructor(e){this.lifecycleData=e;this.stateHook=new VJ(e.state),this.dataHook=new zJ(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function fHt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(fHt,"isFragmentFunction");var sO=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new YJ(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function c0(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(c0,"isCompletionRequestData");var hCe={default:{promptFunction:tze,renderer:b3},splitContext:{promptFunction:ZVe,renderer:$J}};function tze(t){return Vr(rA,{children:[Vr(Oye,{children:[Vr(CJ,{ctx:t,weight:.7}),Vr(WJ,{weight:.6}),Vr(fJ,{ctx:t,weight:.9}),Vr(HJ,{ctx:t,weight:.8}),Vr(MJ,{ctx:t,weight:.99})]}),Vr(JF,{weight:1})]})}s(tze,"defaultCompletionsPrompt");var KJ=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new sO(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=P3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let d=i?.separateContext?"splitContext":"default";this.setPromptOrdering(d);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:A}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return oE;let y=this.virtualPrompt.snapshot(o),E=y.status;if(E==="cancelled")return oE;if(E==="error")return this.errorPrompt(y.error);let b=this.renderer.render(y.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return oE;if(b.status==="error")return this.errorPrompt(b.error);let[w,R]=mT(b.prefix),D={...b,prefix:w},N;if(v3(this.ctx,n)){let Y=JK(b.metadata.componentStatistics);this.ctx.get(Zc).getStatisticsForCompletion(e).computeMatch(Y),N=ZK(this.ctx,e,A),sn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(N)}'`)}let O=performance.now();return this.resetIfEmpty(b),this.successPrompt(D,O,p,R,N)}async updateComponentData(e,r,n,i,o,a,c,l,u={},d,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,d,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(v3(this.ctx,n)){a=await this.ctx.get(a0).resolution(e);let{textDocument:d}=r,p=a.filter(eJ);mHt(this.ctx,d.detectedLanguageId,p,n)||(u=!0),c=jJ(this.ctx,e,p),GJ("contextProvider.traits",this.ctx,c,d.detectedLanguageId,d.detectedLanguageId,n),l=await dJ(this.ctx,e,p,d.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return oE;if((await this.ctx.get(Xc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return ZJ;if((n>0?e.getText().length:e.offsetAt(r))<JJ)return XJ}createRequestData(e,r,n,i,o,a,c,l,u,d,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:d,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return La(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),D3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new sO(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(hCe[this.promptOrdering]?.promptFunction??tze)(this.ctx)}getRenderer(){let e=hCe[this.promptOrdering]??hCe.default;return new e.renderer}};function mHt(t,e,r,n){let i=["cpp","c"];return JVe(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(mHt,"similarFilesEnabled");f();f();f();f();f();var eX="[...]",hHt=0,AC=-1;function Za(){return hHt++}s(Za,"getAvailableNodeId");function gHt(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(gHt,"elideChildren");function gCe(t,e=eX){return r=>t.tokenLength(gHt(r,e))}s(gCe,"getTokenizerCostFunction");f();var B3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,i=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),i<this.size&&this.heap[i].priority>this.heap[r].priority&&(r=i),r===e)break;let o=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=o,e=r}}};var l0=class{constructor(e,r,n,i,o=0,a=!1,c=eX,l=!1){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=l;this.weightFromChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/Math.max(this.cost,1)}get isRenderedChildRequired(){return this.requireRenderedChild||this.weightFromChild}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new B3([]);let i=new B3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.weightFromChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.weightFromChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function rze(t,e={}){let{budget:r,mask:n,costFunction:i}=e,o=n??[],a=new Set(Array.isArray(o)?o:[o]);if((r??t.cost)<t.cost||a.has(t.id))return{text:t.elisionMarker,cost:i?i(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let p=s(y=>a.has(y.id),"elider"),m=[],h=new Map;if(yCe(t,m,p,h),m.length===0)return ACe(t,i);let g=m.join(""),A=i?i(g):[...h.values()].reduce((y,E)=>y+E.cost,0);return{text:g,cost:A,renderedNodes:h}}let c=new Map,l=[],u=new B3([{item:t,priority:t.value}]),d=r;for(;d>0&&u.size>0;){let{item:p}=u.pop();if(!a.has(p.id)&&p.cost<=d){d-=p.cost,c.set(p.id,p),l.push(p);for(let m of p.children)u.insert(m,m.value)}}for(;c.size>0;){let p=[],m=s(y=>!c.has(y.id),"elider"),h=new Map;if(yCe(t,p,m,h),p.length===0)return ACe(t,i);let g=p.join("");if(i===void 0){let y=[...h.values()].reduce((E,b)=>E+b.cost,0);return{text:g,cost:y,renderedNodes:h}}let A=i(g);if(A<=r)return{text:g,cost:A,renderedNodes:h};for(c=h;l.length>0&&A>r;){let y=l.pop();c.has(y.id)&&(A-=y.cost,c.delete(y.id))}if(l.length===0)break}return ACe(t,i)}s(rze,"render");function ACe(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}s(ACe,"renderEmpty");function yCe(t,e,r,n,i=!1){let o=e.length;if(r(t))return o>=2&&(i||e[o-2]===t.elisionMarker&&e[o-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let a=t.isRenderedChildRequired,c=!0;for(let[l,u]of t.children.entries())e.push(t.text[l]??""),c=yCe(u,e,r,n,u.canMerge&&!c),a&&=!c;if(a){for(;e.length>o;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}s(yCe,"recursivelyRender");function aO(t,e,r=eX){let n=t.children.map(a=>aO(a,e,r));r=t.elisionMarker??r;let i=e(t);return new l0(t.id,t.text,n,i,0,t.canMerge,r)}s(aO,"snapshot");var hT=new l0(Za(),[""],[],0);f();function gT(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(gT,"setDefault");var nze=0;function oze(t,e,r,n){nze++;let i=performance.now(),{root:o,mask:a,statistics:c}=t.snapshot(r,n),l=performance.now(),u=r.promptOpts?.tokenizer??"o200k_base",d=$i(u),p=s(E=>d.tokenLength(E),"costFunction"),{text:m,cost:h,renderedNodes:g}=rze(o,{budget:e,mask:a,costFunction:p}),A=performance.now();for(let[E,b]of c?.entries()??[])b.actualTokens=g.get(E)?.cost??0;let y={renderId:nze,rendererName:"renderNode",tokenizer:u,elisionTimeMs:A-l,renderTimeMs:l-i,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:h}]};return{root:o,renderedNodes:g,text:m,cost:h,metadata:y}}s(oze,"renderWithMetadata");function sze(t,e,r){let i=t.split(`
`).map(d=>({id:Za(),text:[d],children:[],canMerge:!0})),o=[""];i.length>=1&&o.push(...Array(i.length-1).fill(`
`),"");let a={id:Za(),text:o,children:i,canMerge:!0},l=aO(a,s(d=>d.id===a.id?0:e.tokenLength(d.text.join("")+`
`),"nodeCostFunction")),u=r?i.length:1;for(let d of l.children)d.weight=u*Math.max(1,d.cost),u+=r?-1:1;return l}s(sze,"getLinewiseNode");var tX=class{constructor(){this.name="basicPrefix"}static{s(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r}=e,n=r.textDocument.getText({start:{line:0,character:0},end:r.position}),i=$i(e.promptOpts?.tokenizer);return{root:sze(n,i,!1)}}},ize={root:hT,text:"",cost:0},rX=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new Ur(5)}static{s(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:i}=e,a=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(a==="")return ize;let c=this.cache.get(r.textDocument.uri)||ize;if(c.text===a)return c;let l=this.ctx.get(Nt).suffixMatchThreshold(n);if(c.text!==""){let m=new OI,h=m.takeFirstTokens(a,KF);if(h.tokens.length>0&&100*mJ(h.tokens,m.takeFirstTokens(c.text,KF).tokens)?.score<l*h.tokens.length)return c}let u=$i(i?.tokenizer),d=sze(a,u,!0),p=d.children.reduce((m,h)=>m+h.cost+1,0);return{root:d,cost:p,text:a}}},nX=class{constructor(){this.name="traitProvider"}static{s(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,i=$i(n?.tokenizer);if(!r||r.traits.length===0)return{root:hT};let o=new Map,a=0,c=[],l=new Map;for(let m of r.traits){let h=Za(),g=`${m.name}: ${m.value}`,A=new l0(h,[g],[],i.tokenLength(g));c.push(A),l.set(h,{componentPath:m.id,source:m,expectedTokens:A.cost}),o.set(h,m.importance??0),a+=m.importance??0}let d=[`Related context:
`,...new Array(c.length).fill(`
`)],p=new l0(Za(),d,c,0,0,!0,"");return p.updateWeights(m=>(o.get(m.id)??0)/(a||1)),{root:p,statistics:l}}},iX=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{s(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,i=$i(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:hT};let o=new Map;for(let h of r.codeSnippets){let g=h.uri;gT(o,g,()=>[]).push(h)}let a=new Map,c=[],l=new Map,u=0,d=this.ctx.get(yr);for(let[h,g]of o.entries()){let A=d.getRelativePath({uri:h})??h,E=[`Compare ${g.length>1?"these snippets":"this snippet"} from ${A}:
`,...new Array(g.length).fill(`
`)],b=[];for(let w of g){let R=Za();l.set(R,w.importance??0);let D=new l0(R,[w.value],[],i.tokenLength(w.value));b.push(D),u+=w.importance??0,a.set(R,{componentPath:w.id,source:w,expectedTokens:D.cost})}c.push(new l0(Za(),E,b,i.tokenLength(E.join("")),0,!0,""))}let p=new Array(c.length+1).fill(""),m=new l0(Za(),p,c,0,0,!0,"");return m.updateWeights(h=>(l.get(h.id)??0)/(u||1)),{root:m,statistics:a}}},oX=class{constructor(e,r){this.name=e;this.components=r}static{s(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(u=>u.snapshot(e,r)),i=n.map(u=>u.root).filter(u=>u.id!==hT.id);if(i.length===0)return{root:hT};let o=["",...Array(i.length-1).fill(`
`),""],a=new l0(Za(),o,i,0,0,!0,"",!0),c=[],l=new Map;for(let u of n){for(let[d,p]of u.statistics?.entries()??[])l.set(d,p);u.mask&&c.push(...u.mask)}return{root:a,mask:c,statistics:l}}};var AHt=.8,sX=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{s(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Nt).suffixPercent(e),n=this.ctx.get(Nt).stableContextPercent(e),i=this.ctx.get(Nt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(i<0||i>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${i}`);let o=100-r-n-i;if(o<=1||o>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${o}`);return{prefix:o/100,suffix:r/100,stableContext:n/100,volatileContext:i/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:i,telemetryData:o,promptOpts:a}=e,c=await this.failFastPrompt(i.textDocument,r);if(c)return c;let l=performance.now(),u;v3(this.ctx,o)&&(u=await this.resolveContext(n,i,o,r));let d=performance.now()-l,p={},m={renderId:this.renderId,rendererName:"w",tokenizer:a?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:d,componentStatistics:[]},h=i.textDocument.detectedLanguageId,{maxPromptLength:g}=P3(this.ctx,o,h),A=this.getComponentAllocation(o),y=A.suffix*g,E=this.components.suffix.estimatedCost?.(e,u),b=["stableContext","volatileContext","prefix","suffix"];y>AHt*(E??0)&&(b=["stableContext","volatileContext","suffix","prefix"]);let w=0;for(let V of b){let H=w+g*A[V],U=oze(this.components[V],H,e,u);w=H-U.cost,p[V]=U,yHt(m,U.metadata)}let[R,D]=mT(p.prefix.text),N=performance.now(),O=v3(this.ctx,o)?this.telemetrizeContext(n,m.componentStatistics,u?.resolvedContextItems??[]):[],Y=[p.stableContext.text.trim(),p.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:a?.separateContext?R:hC(Y.join(`
`),h)+`

`+R,prefixTokens:p.prefix.cost+p.stableContext.cost+p.volatileContext.cost,suffix:p.suffix.text,suffixTokens:p.suffix.cost,context:a?.separateContext?Y:void 0,isFimEnabled:p.suffix.text.length>0},computeTimeMs:N-l,trailingWs:D,neighborSource:new Map,metadata:m,contextProvidersTelemetry:O}}async resolveContext(e,r,n,i){let o=await this.ctx.get(a0).resolution(e),{textDocument:a}=r,c=o.filter(eJ),l=jJ(this.ctx,e,c);GJ("contextProvider.traits",this.ctx,l,a.detectedLanguageId,a.detectedLanguageId,n);let u=await dJ(this.ctx,e,c,a.detectedLanguageId);return{traits:l,codeSnippets:u,resolvedContextItems:o}}telemetrizeContext(e,r,n){let i=JK(r);this.ctx.get(Zc).getStatisticsForCompletion(e).computeMatch(i);let o=ZK(this.ctx,e,n);return sn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(o)}'`),o}async failFastPrompt(e,r){if(r?.isCancellationRequested)return oE;if((await this.ctx.get(Xc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return ZJ;if(e.getText().length<JJ)return XJ}errorPrompt(e){return La(this.ctx,e,"WorkspaceContextPromptFactory"),D3}};function yHt(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}s(yHt,"aggregateMetadata");f();f();function CHt(t){return t.id!==void 0}s(CHt,"isNodeItem");function vHt(t){return!("uri"in t)&&!("id"in t)}s(vHt,"isNullItem");var EHt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},AT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",N3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==AC),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},aX=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=EHt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new N3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new N3(r.items):new N3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(AC);if(c!==void 0&&c>0){o.delete(AC);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),d=c/Math.max(u.length,1);for(let p of u)o.set(p,d)}else for(let[u,d]of[...o.entries()])o.set(u,d+c*(d/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new N3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(vHt(r))return{weight:r.weight,uri:AT,id:AC};let n=CHt(r)?r.id:AC,i=r.uri??this.activeContext.getUri(n)??AT;return i===AT&&(n=AC),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0||isNaN(c))continue;let l=gT(r,o,()=>new Map),u=AC;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let d=l!==AT?this.activeContext.normalizeUri(l)??AT:AT;for(let[p,m]of u.entries())l===AT||p===AC?n.set(d,(n.get(d)??0)+m):r.push({uri:d,id:p,weight:m}),i+=m}if(i<=0)return[];n.delete(AT),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:AC,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};f();f();f();var wp=class{static{s(this,"FileSearch")}};f();f();var cX=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*cze(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},xHt=6,lX=class{constructor(e,r,n,i){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=Za();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(i??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,i=n;for(;i;)n=i,i=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=Za()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:d}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:d})}let o=i[0].root.parent,a=e.parts[0].root.parent;if((o&&this.canMergeChildren(o))!==(a&&this.canMergeChildren(a)))return this.invalidateNode(e),!1;let c=aze(i,this.document);for(let[u,d]of c.entries())if(e.text[u]!==d)return this.invalidateNode(e),!1;let l=new cX(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=aze(e,this.document),i=new cX(Za(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);this.canBeNode(o)&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let A=g.endOffset-g.startOffset;h-=A,r-=A}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let d=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);d.push(this.createNode(h,p)),p=!0}return d}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>xHt}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function aze(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(aze,"buildText");function*cze(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*cze(r,e))}s(cze,"walk");f();f();f();var uX=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.range={start:m,end:m};return}let d=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+d+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)}}static{s(this,"IndentationNode")}get type(){return this.raw.type}};function CCe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:CCe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:d}=n[l];if(d.range.end.line>=o){let p=CCe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(d),o=Math.min(d.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new uX(Za(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(CCe,"recursivelyBuildNode");function lze(t){let e=R2(t.getText(),t.detectedLanguageId);return CCe(e,t.lineCount,t)??new uX(Za(),e,[],0,t.lineCount-1,t)}s(lze,"parse");var uze={source:"indentation",parse:lze,update(t,e){return{root:lze(e),remapper:s(()=>{},"remapper")}},dispose:s(()=>{},"dispose"),labeler:{isIdentifier:s(t=>!1,"isIdentifier"),isText:s(t=>!0,"isText")}};f();f();var fze=Fe(xz());function dze(t){return{line:t.row,character:t.column}}s(dze,"asPosition");var vCe=class{constructor(e,r){this._parser=e;this._tree=r;this.didDispose=!1}static{s(this,"CachedTreeSitterParse")}get parser(){if(this.didDispose)throw new Error("Cannot access parser after dispose");return this._parser}get tree(){if(this.didDispose)throw new Error("Cannot access tree after dispose");return this._tree}dispose(){this.didDispose||(this.didDispose=!0,this._parser.delete(),this._tree.delete())}},yC=class{constructor(e,r,n,i){this.nodeList=e;this.mergeList=r;this.identifierList=n;this.textList=i}static{s(this,"BasicNodeLabeler")}canBeNode(e){return this.nodeList.has(e.type)}canMergeChildren(e){return this.mergeList.has(e.type)}isIdentifier(e){return this.identifierList.has(e.type)}isText(e){return this.textList.has(e.type)}},bHt=50,yT=class{constructor(e,r,n={}){this.language=e;this.source=r;this.labeler=n;this.cache=new kP(bHt)}static{s(this,"TreeSitterParser")}dispose(){this.cache.clear()}parse(e,r=!0){let n=new fze.default;n.setLanguage(this.language);let i=n.parse(e.getText());return r&&this.cache.set(e.uri,new vCe(n,i)),this.snapshot(i.rootNode,null)}update(e,r){return{root:this.parse(r,!1),remapper:s(()=>{},"remapper")}}snapshot(e,r){let n={id:e.id,source:this.source,type:e.type,startOffset:e.startIndex,endOffset:e.endIndex,range:{start:dze(e.startPosition),end:dze(e.endPosition)},parent:r,children:[]};return n.children=e.namedChildren.map(i=>this.snapshot(i,n)),n}};var IHt=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),THt=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),wHt=new Set(["identifier"]),SHt=new Set(["string","comment"]),pze=new yC(IHt,THt,wHt,SHt);f();var _Ht=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),RHt=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),kHt=new Set(["identifier"]),PHt=new Set(["string_literal","line_comment","block_comment"]),mze=new yC(_Ht,RHt,kHt,PHt);f();var DHt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),BHt=new Set(["module","block","parameters","dictionary","list"]),NHt=new Set(["identifier"]),LHt=new Set(["string","comment"]),hze=new yC(DHt,BHt,NHt,LHt);f();var MHt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),FHt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),OHt=new Set(["identifier"]),QHt=new Set(["string","comment"]),gze=new yC(MHt,FHt,OHt,QHt);var Aze=Fe(xz());async function yze(t){await Aze.default.init();try{let e=await Jhe(t);switch(t){case"python":return new yT(e,"tree-sitter-python",hze);case"typescript":return new yT(e,"tree-sitter-typescript",gze);case"java":return new yT(e,"tree-sitter-java",mze);case"cpp":return new yT(e,"tree-sitter-cpp",pze);default:return new yT(e,"tree-sitter-generic")}}catch{return uze}}s(yze,"getParser");var UHt=new It("WorkspaceContextManager"),dX=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},fX=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},Cze=5e3,pX=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Ur(Cze);this.allowedExtensions=new Set(b2);this.invalidDocumentCache=new YS(Cze,this.config.InvalidCacheTime),this.cachedDocuments=new kP(this.config.MaxActiveFiles)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(yr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>Hv[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if(nj(e),r=yl(e),!(this.ctx.get(yr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(X8e(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new dX(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new fX(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new oh;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new fX(n,i=>this.disposeDocument(i))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let a=new Set(r.getAllIds());r.update(n);let c=new Set(r.getAllIds()),l=[...c].filter(d=>!a.has(d)),u=[...a].filter(d=>!c.has(d));return this.recordDocumentChanges(e,{created:l,invalidated:u}),r}let o=new lX(n,i,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:o.getAllIds(),invalidated:[]}),o}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=gT(this.createdNodes,e,()=>new Set),i=gT(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await yze(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(yr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(wp).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){UHt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,3600*1e3);return}let o=await this.ctx.get(vn).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};var vze=Fe(require("events"));var qHt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},sA=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new oh;this.config=qHt;this.emitter=new vze.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new pX(e,this.config),this.coordinator=new aX(this.contextManager,this.config),this.tokenEventDisposable=ws(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Wi(this.ctx,qt.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Nt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return Wi(this.ctx,qt.UseWorkspaceContextCoordinator)??this.ctx.get(Nt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),Fn.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),Fn.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights(),r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await fC(n)}}}catch(e){qv(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function ECe(t,e){let r=hl(t,e,"event.WorkspaceContextUpdate");return t.get(sA).onUpdate(r)}s(ECe,"onWorkspaceContextUpdate");f();var mX=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=hT;this.costFunction=gCe(new OI);this.disposables=[];this.prevEvent=void 0;this.disposables.push(ECe(e,r=>{this.prevEvent=r}))}static{s(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;(this.lastUpdateTime===void 0||performance.now()>this.lastUpdateTime+this.ctx.get(Nt).workspaceContextCacheTime(n))&&this.prevEvent!==void 0&&(this.update(this.prevEvent.weights,this.prevEvent.context),this.lastUpdateTime=performance.now()),this.costFunction=gCe($i(e.promptOpts?.tokenizer));let i=this.getMask(r.textDocument.uri),o=this.getPathMarker(r);return{root:new l0(Za(),[`${o}
`,""],[this.root],1,0,!0,""),mask:i}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(yr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?hC(yJ(o),o.languageId):hC(AJ(o),o.languageId)}update(e,r){this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=aO(o,this.costFunction);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new l0(Za(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:Za(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(yr).getRelativePath({uri:e});return hC(`Related portions of ${i??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};f();f();var hX=class extends sX{static{s(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new mX(e),prefix:new tX,suffix:new rX(e),volatileContext:new oX("volatileContext",[new nX,new iX(e)])};super(e,r)}};var Eze=Fe(di());var sE=class{static{s(this,"CompletionsPromptFactory")}};function gX(t,e,r){return new xCe(new bCe(new ICe(t,new KJ(t,e,r),new hX(t),WHt)))}s(gX,"createCompletionsPromptFactory");var xCe=class extends sE{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return oE;try{return await this.delegate.prompt(r,n)}catch{return D3}}},HHt=1200,bCe=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new Eze.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(xze)},HHt)})])}},ICe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function WHt(t,e){let r=t.get(sA);return r.isEnabled(e)&&r.isActive()}s(WHt,"workspaceContextEnabledAndActive");var JJ=10,XJ={type:"contextTooShort"},ZJ={type:"copilotContentExclusion"},D3={type:"promptError"},oE={type:"promptCancelled"},xze={type:"promptTimeout"};function mT(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(mT,"trimLastLine");function L3(t,e,r,n,i,o={}){let c=t.get(yr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=jHt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=XVe(t,n);return t.get(sE).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(L3,"extractPrompt");function $Ht(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:hC(n,e)}s($Ht,"addNeighboringCellsToPrompt");function jHt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&OJ(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>$Ht(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(jHt,"applyEditsForNotebook");function P3(t,e,r){let i=t.get(Nt).maxPromptCompletionTokens(e)-WK(t),o=fVe(e,r),a=uJ(t,e,r),c=t.get(Nt).suffixPercent(e),l=t.get(Nt).suffixMatchThreshold(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l}}s(P3,"getPromptOptions");f();f();var bze=2.98410452738298,Ize=-.838732736843507,Tze=1.50314646255716,wze=-.237798634012662,AX={python:.314368072478742},Sze={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var GHt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function VHt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(VHt,"linearInterpolation");var M3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},TCe=class{constructor(e,r,n){this.link=GHt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return VHt(n,this.logitsToQuantiles)}},_ze=new TCe(bze,[new M3("compCharLen",Ize,t=>Math.log(1+t)),new M3("meanLogProb",Tze),new M3("meanAlternativeLogProb",wze)].concat(Object.entries(AX).map(t=>new M3(t[0],t[1]))),Sze);function Rze(t,e){let r={...e.measurements};return Object.keys(AX).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),_ze.predict(t,r)}s(Rze,"ghostTextScoreConfidence");function kze(t,e){let r={...e.measurements};return Object.keys(AX).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),_ze.quantile(t,r)}s(kze,"ghostTextScoreQuantile");f();f();var zHt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function yX(t){let e=t.slice();return e.reverse(),Pze(e)||Pze(e.filter(r=>r.trim().length>0))}s(yX,"isRepetitive");function Pze(t){let e=YHt(t);for(let r of zHt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(Pze,"isRepeatedPattern");function YHt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(YHt,"kmp_prefix_function");function KHt(t,e,r,n){let i="}";try{i=fqe(e.detectedLanguageId)??"}"}catch{}return JHt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(KHt,"maybeSnipCompletion");function JHt(t,e,r,n){let i=XHt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let A=e.line+1+d+l;if(p=A>=t.getLineCount()?void 0:t.getLineText(A),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(JHt,"maybeSnipCompletionImpl");function XHt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(XHt,"splitByNewLine");function ZHt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(ZHt,"matchesNextLine");function cO(t,e,r,n,i,o){if(yX(n.tokens)){let c=qr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(ZHt(e,r,a.completionText,!i)){let c=qr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",c),Bt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=KHt(t,e,r,a.completionText),a.completionText?a:void 0}s(cO,"postProcessChoiceInContext");function Dze(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(Dze,"checkSuffix");var Mze=Fe(Lb());var is=new It("ghostText");var tWt=200,Bze=20;async function Fze(t,e,r,n,i,o,a){is.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=g3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:yqe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:c,temperature:l,code_annotations:!1},p=Wi(t,qt.ModelAlwaysTerminatesSingleline)??t.get(Nt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&oT.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let A={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},y=await t.get(s0).fetchAndStreamCompletions(t,A,r,i,n);return y.type==="failed"?{type:"failed",reason:y.reason,telemetryData:Ja(r)}:y.type==="canceled"?(is.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:y.reason,telemetryData:cT(r)}):a(h,y.getProcessingTime(),y.choices)}catch(A){if(hd(A))return{type:"canceled",reason:"network request aborted",telemetryData:cT(r,{cancelledNetworkRequest:!0})};if(is.exception(t,A,"Error on ghost text request"),t.get(Vd).notifyUser(t,A),PP(t))throw A;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Ja(r)}}}s(Fze,"genericGetCompletionsFromNetwork");function wCe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(wCe,"postProcessChoices");async function rWt(t,e,r,n,i){return Fze(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return is.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Ja(r)};if(n?.isCancellationRequested)return is.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:cT(r)};let d=u.value;if(d===void 0)return is.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Ja(r)};Qze(t,"performance",d,o,a),is.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=wCe(d,e);p&&(CX(t,e,p),is.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;is.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let A=wCe(g,e,h);A&&(h.push(A),CX(t,e,A))}})();return yg(t)&&await m,p?{type:"success",value:[SCe(p,{forceSingleLine:!1}),m],telemetryData:Ja(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Ja(r)}})}s(rWt,"getCompletionsFromNetwork");async function nWt(t,e,r,n,i){return Fze(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return is.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:cT(r)};let d=wCe(u,e,l);d&&l.push(d)}if(l.length>0){for(let u of l)CX(t,e,u);Qze(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:Ja(r),telemetryBlob:r,resultType:3}})}s(nWt,"getAllCompletionsFromNetwork");function SCe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(SCe,"makeGhostAPIChoice");function Nze(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(Nze,"takeNLines");async function iWt(t,e,r,n,i,o,a,c){let l=t.get(Nt).multilineAfterAcceptLines(c),u=t.get(Vg).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:Nze(l),stop:[`

`],maxTokens:Bze*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(d=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let d;try{d=await pWt(t,u,e.textDocument,e.position,o,a,n)}catch{d={requestMultiline:!1}}if(!a&&d.requestMultiline&&t.get(Nt).singleLineUnlessAccepted(c)&&(d.requestMultiline=!1),d.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=ms.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...Lze(t,u,e.textDocument,p,d.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:Nze(l),stop:[`

`],maxTokens:Bze*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...Lze(t,u,e.textDocument,e.position,d.blockPosition,r,!1,n.prompt,c)}}}}s(iWt,"getGhostTextStrategy");function Lze(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&oT.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Nt).longLookaheadSize(l):t.get(Nt).shortLookaheadSize(l);return{finishedCb:new $K(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};CX(t,h,m)}).getFinishedCallback(),maxTokens:tWt}}return{finishedCb:a?zF(t,r,n):u=>{}}}s(Lze,"buildFinishedCallback");var oWt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function sWt(t,e,r){let n=Wi(t,qt.CompletionsDebounce)??t.get(Nt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=va()-r.issuedTime;return Math.max(0,n-i)}s(sWt,"getRemainingDebounceMs");function lO(t,e,r){return r?.isCancellationRequested||e!==t.get(u0).currentRequestId}s(lO,"inlineCompletionRequestCancelled");async function aWt(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(y){let E=va();c.push([y,E-a]),a=E}s(l,"recordPerformance"),l("telemetry");let u=t.get(Nt);if(lO(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Ja(n)};let d=lWt(e.textDocument,e.position);if(d===void 0)return is.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Ja(n)};let p=UI(t,n),m={...oWt,...o,tokenizer:p.tokenizer},h=await L3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return is.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Ja(n)};if(h.type==="contextTooShort")return is.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Ja(n)};if(h.type==="promptError")return is.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Ja(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return is.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Ja(n)};if(h.type==="promptTimeout")return is.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Ja(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return is.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Ja(n)};let g=sWt(t,m,n);return g>0&&(is.debug(t,`Debouncing ghost text request for ${g}ms`),await fC(g),lO(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:Ja(n)}:t.get(Eo).withProgress(async()=>{let[y]=mT(e.textDocument.getText(ms.range(ms.position(0,0),e.position))),E=t.get(u0).hasAcceptedCurrentCompletion(y,h.prompt.suffix),b=h.prompt,w=await iWt(t,e,y,h,m.isCycling,d,E,n);l("strategy");let R=cWt(t,y,b,w.requestMultiline);l("cache");let D=qI(t,e.textDocument.uri),N={blockMode:w.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:D,engineModelId:p.modelId,ourRequestId:r,prefix:y,prompt:h.prompt,multiline:w.requestMultiline,indentation:sJ(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:w.stop,maxTokens:w.maxTokens,afterAccept:E};N.headers={...N.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let O=yWt(t,e.textDocument,N,e.position,h,n,p,m);if(R===void 0&&!m.isCycling&&t.get(o0).shouldWaitForAsyncCompletions(y,h.prompt)){let W=await t.get(o0).getFirstMatchingRequestWithTimeout(r,y,h.prompt,m.isSpeculative,O);if(l("asyncWait"),W){let J=!w.requestMultiline;R=[[SCe(W[0],{forceSingleLine:J})],4]}if(lO(t,r,i))return is.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Ja(O)}}let Y=w.blockMode==="moremultiline"&&oT.isSupported(e.textDocument.detectedLanguageId);if(R!==void 0&&(R[0]=R[0].map(W=>cO(t,e.textDocument,e.position,W,Y,is)).filter(W=>W!==void 0)),R!==void 0&&R[0].length===0)return is.debug(t,`Found empty inline suggestions locally via ${A3(R[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Ja(O)};if(R!==void 0&&R[0].length>0&&(!m.isCycling||R[0].length>1))is.debug(t,`Found inline suggestions locally via ${A3(R[1])}`);else{if(m.isCycling){let W=await nWt(t,N,O,i,w.finishedCb);if(W.type==="success"){let J=R?.[0]??[];W.value[0].forEach(ie=>{J.findIndex(ae=>ae.completionText.trim()===ie.completionText.trim())===-1&&J.push(ie)}),R=[J,3]}else if(R===void 0)return W}else{let W=s((te,pe)=>(t.get(o0).updateCompletion(r,te),w.finishedCb(te,pe)),"finishedCb"),J=new Fn.CancellationTokenSource,ie=rWt(t,N,O,J.token,W);t.get(o0).queueCompletionRequest(r,y,h.prompt,J,ie);let ae=await t.get(o0).getFirstMatchingRequest(r,y,h.prompt,m.isSpeculative);if(ae===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Ja(O)};R=[[ae[0]],4]}l("network")}if(R===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Ja(O)};let[ee,V]=R,H=ee.map(W=>cO(t,e.textDocument,e.position,W,Y,is)).filter(W=>W!==void 0),U=Wi(t,qt.CompletionsDelay)??u.completionsDelay(n),X=va()-n.issuedTime,K=Math.max(U-X,0);if(V!==2&&!m.isCycling&&K>0&&(is.debug(t,`Waiting ${K}ms before returning completion`),await fC(K),lO(t,r,i)))return is.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:cT(O)};let j=[];for(let W of H){let J=AWt(t,e.textDocument,N,W,O),ie=d?Dze(e.textDocument,e.position,W):0,te={completion:mWt(W.choiceIndex,W.completionText,h.trailingWs),telemetry:J,isMiddleOfTheLine:d,suffixCoverage:ie,copilotAnnotations:W.copilotAnnotations,clientCompletionId:W.clientCompletionId};j.push(te)}return O.properties.clientCompletionId=j[0]?.clientCompletionId,O.measurements.foundOffset=j?.[0]?.telemetry?.measurements?.foundOffset??-1,is.debug(t,`Produced ${j.length} results from ${A3(V)} at ${O.measurements.foundOffset} offset`),lO(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:cT(O)}:(m.isSpeculative||t.get(u0).setGhostText(y,h.prompt.suffix,H,V),l("complete"),{type:"success",value:[j,V],telemetryData:Ja(O),telemetryBlob:O,resultType:V,performanceMetrics:c})})}s(aWt,"getGhostTextWithoutAbortHandling");async function _Ce(t,e,r,n){let i=gr();t.get(u0).currentRequestId=i;let o=await gWt(t,e.textDocument,i,n);await C2.catch(()=>{});try{return t.get(a0).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(dC).notifyRequest(e,i,o,r,n),await aWt(t,e,i,o,r,n)}catch(a){if(hd(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:cT(o,{cancelledNetworkRequest:!0})};throw a}}s(_Ce,"getGhostText");function cWt(t,e,r,n){let i=t.get(u0).getCompletionsForUserTyping(e,r.suffix),o=hWt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(cWt,"getLocalInlineSuggestion");function lWt(t,e){let r=uWt(e,t),n=dWt(e,t);return r&&!n?void 0:r&&n}s(lWt,"isInlineSuggestion");function uWt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(uWt,"isMiddleOfTheLine");function dWt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(dWt,"isValidMiddleOfTheLinePosition");function fWt(t,e){return e.lineAt(t).text.trim().length===0}s(fWt,"isNewLine");var aE=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function pWt(t,e,r,n,i,o,a){if(t.get(aE).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",qr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&oT.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await lGe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&fWt(n,r))return{requestMultiline:!0};let l=!1;return!i&&Ap(r.detectedLanguageId)?l=await oJ(r,n):i&&Ap(r.detectedLanguageId)&&(l=await oJ(r,n)||await oJ(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=pGe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(pWt,"shouldRequestMultiline");function CX(t,e,r){t.get(tA).append(e.prefix,e.prompt.suffix,r)}s(CX,"appendToCache");function mWt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(mWt,"adjustLeadingWhitespace");function hWt(t,e,r,n){let i=t.get(tA).findAll(e,r);return i.length===0?(is.debug(t,"Found no completions in cache"),[]):(is.debug(t,`Found ${i.length} completions in cache`),i.map(o=>SCe(o,{forceSingleLine:!n})))}s(hWt,"getCompletionsFromCache");async function gWt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=qr.createAndMarkAsIssued(i);return await t.get(Nt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(gWt,"createTelemetryWithExp");function AWt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,Oze(l,e),l.extendWithRequestId(o),l.measurements.confidence=Rze(t,l),l.measurements.quantile=kze(t,l),is.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(AWt,"telemetryWithAddData");function yWt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);Oze(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(ms.range(p.range.start,n)),h=e.getText(ms.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(w=>(0,Mze.SHA256)(w).toString())]),A={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},y={...T4(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(A.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(A.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let E=u.extendedBy(A,y);return Bt(t,"ghostText.issued",E),u}s(yWt,"telemetryIssued");function Oze(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(Oze,"addDocumentTelemetry");function Qze(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,c)}s(Qze,"telemetryPerformance");var u0=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&Uze(this.choices[0].completionText,n))return CWt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function CWt(t,e){return t.filter(r=>Uze(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(CWt,"adjustChoicesStart");function Uze(t,e){return t.startsWith(e)&&t.length>e.length}s(Uze,"startsWithAndExceeds");f();f();f();var uR=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(yr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var RCe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??Fn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),d=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:Fn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:Fn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function CC(t,e){return new RCe(t,e)}s(CC,"createCompletionState");f();f();f();f();f();f();var qze="code-referencing";var d0=new It(qze);var vWt=3e3,kCe=2,Hze=256,Wze=Math.log(Hze)/Math.log(kCe)/kCe,aA={connection:"disabled",maxAttempts:Wze,retryAttempts:0,initialWait:!1},vX,EX=[];function EWt(){if(vX)return vX;function t(E){return EX.push(E),()=>{let b=EX.indexOf(E);b!==-1&&EX.splice(b,1)}}s(t,"subscribe");function e(){for(let E of EX)E()}s(e,"afterUpdateConnection");function r(E){aA.connection!==E&&(aA.connection=E,e())}s(r,"updateConnection");function n(){return aA.connection==="connected"}s(n,"isConnected");function i(){return aA.connection==="disconnected"}s(i,"isDisconnected");function o(){return aA.connection==="retry"}s(o,"isRetrying");function a(){return aA.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function d(){r("disabled")}s(d,"setDisabled");function p(E){aA.initialWait!==E&&(aA.initialWait=E)}s(p,"setInitialWait");function m(E,b=vWt){o()||(u(),p(!0),g(E,b))}s(m,"enableRetry");function h(){return aA.initialWait}s(h,"isInitialWait");async function g(E,b){d0.info(E,`Attempting to reconnect in ${b}ms.`),await A(b),p(!1);let w=E.get(yn);function R(D,N){if(D>Hze){d0.info(N,"Max retry time reached, disabling."),d();return}let O=s(async()=>{aA.retryAttempts=Math.min(aA.retryAttempts+1,Wze);try{d0.info(N,`Pinging service after ${D} second(s)`);let Y=await w.fetch(new URL("_ping",_4(N)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(Y.status!==200||!Y.ok)R(D**2,N);else{d0.info(N,"Successfully reconnected."),c();return}}catch{R(D**2,N)}},"tryAgain");setTimeout(()=>void O(),D*1e3)}s(R,"succeedOrRetry"),d0.info(E,"Attempting to reconnect."),R(kCe,E)}s(g,"attemptToPing");let A=s(E=>new Promise(b=>setTimeout(b,E)),"timeout");function y(E){return{dispose:t(E)}}return s(y,"listen"),vX={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:d,enableRetry:m,listen:y,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},vX}s(EWt,"registerConnectionState");var dR=EWt();f();var Zl={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},uO={[Zl.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[Zl.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[Zl.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function PCe(t){return t===401?Zl.Unauthorized:t===400?Zl.BadArguments:t===404?Zl.NotFound:t===429?Zl.RateLimit:t>=500&&t<600?Zl.InternalError:t>=600?Zl.ConnectionError:Zl.Unknown}s(PCe,"getErrorType");function vC(t,e,r={}){return{kind:"failure",reason:PCe(Number(t)),code:Number(t),msg:e,meta:r}}s(vC,"createErrorResponse");f();var xWt=/^[1-6][0-9][0-9]$/,bWt=/([A-Z][a-z]+)/,IWt="code_referencing",dO=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[IWt,this.baseKey,...e].join(".")}},DCe=class extends dO{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=qr.createAndMarkAsIssued();Bt(e,r,n)}handleFocus({context:e}){let r=qr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Bt(e,n,r)}handleWrite({context:e}){let r=qr.createAndMarkAsIssued(),n=this.buildKey("write","count");Bt(e,n,r)}},xri=new DCe,BCe=class extends dO{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=qr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Bt(e,i,n)}handleDismiss({context:e,actor:r}){let n=qr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Bt(e,i,n)}},bri=new BCe,NCe=class extends dO{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=qr.createAndMarkAsIssued({origin:r,reason:n});Ng(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=qr.createAndMarkAsIssued({origin:r,reason:n});Ng(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(xWt)){d0.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(bWt).filter(c=>!!c).join("_").toLowerCase(),a=qr.createAndMarkAsIssued({message:i});Ng(e,this.buildKey(o,r),a)}},xX=new NCe;var TWt="twirp/github.snippy.v1.SnippyAPI";async function LCe(t,e,r,n){let i;try{i=await t.get(Yr).getToken()}catch{return dR.setDisconnected(),vC(401,uO[Zl.Unauthorized])}if(d0.info(t,`Calling ${e}`),dR.isRetrying())return vC(600,"Attempting to reconnect to the public code matching service.");if(dR.isDisconnected())return vC(601,"The public code matching service is offline.");let o;try{o=await t.get(yn).fetch(Oy(t,i,"origin-tracker",`${TWt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...tp(t)},signal:n})}catch{return dR.enableRetry(t),vC(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let A=g.message;throw xX.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:A}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:d}=c,p=Number(l),m=PCe(p),h=u||"unknown error";switch(m){case Zl.Unauthorized:return vC(l,uO[Zl.Unauthorized],d);case Zl.BadArguments:return vC(l,h,d);case Zl.RateLimit:return dR.enableRetry(t,60*1e3),vC(l,uO.RateLimitError,d);case Zl.InternalError:return dR.enableRetry(t),vC(l,uO[Zl.InternalError],d);default:return vC(l,h,d)}}s(LCe,"call");f();var bX=I.Object({kind:I.Literal("failure"),reason:I.String(),code:I.Number(),msg:I.String(),meta:I.Optional(I.Any())}),SWt=I.Object({matched_source:I.String(),occurrences:I.String(),capped:I.Boolean(),cursor:I.String(),github_url:I.String()}),$ze=I.Object({source:I.String()}),_Wt=I.Object({snippets:I.Array(SWt)}),jze=I.Union([_Wt,bX]),Gze=I.Object({cursor:I.String()}),RWt=I.Object({commit_id:I.String(),license:I.String(),nwo:I.String(),path:I.String(),url:I.String()}),kWt=I.Object({has_next_page:I.Boolean(),cursor:I.String()}),PWt=I.Object({count:I.Record(I.String(),I.String())}),DWt=I.Object({file_matches:I.Array(RWt),page_info:kWt,license_stats:PWt}),Vze=I.Union([DWt,bX]);async function zze(t,e,r){let n=await LCe(t,"Match",{method:"POST",body:Z2($ze,{source:e})},r);return Z2(jze,n)}s(zze,"Match");async function Yze(t,{cursor:e},r){let n=await LCe(t,"FilesForMatch",{method:"POST",body:Z2(Gze,{cursor:e})},r);return Z2(Vze,n)}s(Yze,"FilesForMatch");f();var fO=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),IX=65;function LWt(t){let e=0,r;fO.lastIndex=0;do if(r=fO.exec(t),r&&(e+=1),e>=IX)break;while(r);return e}s(LWt,"lexemeLength");function MWt(t,e){let r=0,n;fO.lastIndex=0;do if(n=fO.exec(t),n&&(r+=1,r>=e))return fO.lastIndex;while(n);return t.length}s(MWt,"offsetFirstLexemes");function Kze(t,e){let r=t.split("").reverse().join(""),n=MWt(r,e);return r.length-n}s(Kze,"offsetLastLexemes");function pO(t){return LWt(t)>=IX}s(pO,"hasMinLexemeLength");function OWt(t){return oC.Check(bX,t)}s(OWt,"isError");async function Jze(t,e){let r=await e();if(OWt(r)){xX.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(Jze,"snippyRequest");function Xze(t){return"kind"in t&&t.kind==="failure"}s(Xze,"isMatchError");async function Zze(t,e,r,n){let o=await t.get(yr).getTextDocument({uri:e});if(!o){d0.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!pO(a)||!pO(a))return;let c=r;if(!pO(r)){let h=a.slice(0,n),g=Kze(h,IX);c=a.slice(g,n+r.length)}if(!pO(c))return;let l=await Jze(t,()=>zze(t,c));if(!l||Xze(l)||!l.snippets.length){d0.info(t,"No match found");return}d0.info(t,"Match found");let{snippets:u}=l,d=u.map(async h=>{let g=await Jze(t,()=>Yze(t,{cursor:h.cursor}));if(!g||Xze(g))return;let A=g.file_matches,y=g.license_stats;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(d)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let A=Array.from(g).sort(),y=n,E=n+h.match.matched_source.length,b=o.positionAt(y),w=o.positionAt(E);await t.get(lf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:y,offsetEnd:E,version:o.version,location:{start:b,end:w},matchingText:c,details:A.map(R=>({license:R,url:h.match.github_url}))})}}s(Zze,"fetchCitations");f();function MCe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=n,n=d,d=a,a=i,i=d,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(MCe,"editDistance");function QWt(){return new Map}s(QWt,"emptyLexDictionary");function UWt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(UWt,"reverseLexDictionary");function*qWt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(qWt,"lexGeneratorWords");function eYe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(eYe,"lexicalAnalyzer");function tYe(t){return t!==" "}s(tYe,"notSingleSpace");function rYe(t,e,r=qWt){let[n,i]=eYe(t,QWt(),r,tYe),[o,a]=eYe(e,i,r,tYe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=UWt(a),l=o.length,u=c[o[0][0]],d=c[o[l-1][0]];function p(A,y,E,b){if(b===0||b===l-1){let w=c[n[E][0]];return b==0&&w.endsWith(u)||b==l-1&&w.startsWith(d)?0:1}else return A===y?0:1}s(p,"compare");let m=MCe(n.map(A=>A[0]),o.map(A=>A[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(rYe,"lexEditDistance");f();function fR(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}s(fR,"countLines");function nYe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(nYe,"computeCompletionText");var CT=new It("postInsertion"),iYe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],oYe=50,HWt=1500,WWt=.5,$Wt=500,FCe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function sYe(t,e,r,n,i){let o=await t.get(vn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return CT.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),d=await L3(t,r.properties.headerRequestId,CC(a,u),r),p=d.type==="prompt"?d.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=Bye(l,n,a.detectedLanguageId),A=oVe(h,void 0)(m),y=Math.min(c.length,n+(A?A*2:$Wt)),E=c.substring(n,y);return{prompt:p,capturedCode:E,terminationOffset:A??-1}}}s(sYe,"captureCode");function TX(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{CT.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),NGe(t,e,u)});let o=new uR(t,n,r-1),a=new uR(t,n,r),c=s(async l=>{CT.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await sYe(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:d.prefix,context:d.context}),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});CT.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");iYe.filter(l=>l.captureRejection).map(l=>o.push(hl(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(TX,"postRejectionTasks");function mO(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});CT.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),BGe(t,e,l);let u=r;r=nYe(r,a);let d=r.trim(),p=new uR(t,i,n),m=new uR(t,i,n+r.length),h=s(async g=>{await zWt(t,e,d,n,i,g,l,p,m)},"stillInCodeCheck");if(FCe.triggerPostInsertionSynchroneously&&yg(t)){let g=h({seconds:0,captureCode:FCe.captureCode,captureRejection:FCe.captureRejection});t.get(Qc).register(g)}else iYe.map(g=>p.push(hl(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));hl(t,jWt,"post insertion citation check")(t,i,u,r,n,c)}s(mO,"postInsertionTasks");async function jWt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(Z$(t)?.getTokenValue("sn")==="1")return;await Zze(t,e,n,i);return}let a=await t.get(yr).getTextDocument({uri:e});if(a){let c=OCe(a.getText(),n,oYe,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=GWt(r.length,n.length,c.start_offset);if(l===void 0){CT.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,d=a?.positionAt(u),p=i+VWt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(lf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(jWt,"citationCheck");function GWt(t,e,r){if(!(e<t&&r>e))return r}s(GWt,"computeCitationStart");function VWt(t,e,r){return e<t?Math.min(r,e):r}s(VWt,"computeCitationEnd");function OCe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=rYe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=MCe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=WWt?1:0}}s(OCe,"find");async function zWt(t,e,r,n,i,o,a,c,l){let u=await t.get(vn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=OCe(p,r,oYe,c.offset);m.stillInCodeHeuristic||(m=OCe(p,r,HWt,c.offset)),CT.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:A,terminationOffset:y}=await sYe(t,i,h,c.offset,l.offset),E={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...E,capturedCodeJson:JSON.stringify(A)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});CT.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",b,1)}}}s(zWt,"checkStillInCode");var KWt=new It("ghostText"),Ou=class{constructor(){this.#i=[];this.linesAccepted=0}static{s(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function JWt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(JWt,"computeRejectedCompletions");function QCe(t,e){let r=t.get(Ou);if(!r.position||!r.uri)return;let n=JWt(r);n.length>0&&TX(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(QCe,"rejectLastShown");function aYe(t,e,r,n){let i=t.get(Ou);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&QCe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(aYe,"setLastShown");function cYe(t,e){let r=t.get(Ou);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;KWt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,GK(t,"ghostText",e)}}s(cYe,"handleGhostTextShown");function XWt(t,e,r){let n=t.get(Ou);n.linesLeft===void 0&&(n.linesLeft=fR(e.displayText));let i=fR(e.displayText);n.linesLeft.length>i.length&&(n.linesAccepted+=n.linesLeft.length-i.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=i),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}s(XWt,"handleLineAcceptance");function F3(t,e,r="ghostText"){let n=t.get(Ou),i;return n.partiallyAcceptedLength?i={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:i={compType:"full",acceptedLength:e.displayText.length,acceptedLines:fR(e.displayText).length},n.resetState(),mO(t,r,e.displayText,e.offset,e.uri,e.telemetry,i,e.copilotAnnotations)}s(F3,"handleGhostTextPostInsert");function wX(t,e,r,n=0,i="ghostText",o="line"){let a=t.get(Ou),c;return o==="cumulative"?(ZWt(t,e,r),c={compType:a.totalLength!=null?"full":"partial",acceptedLength:a.totalLength??(a.partiallyAcceptedLength||0),acceptedLines:a.linesAccepted},c.compType==="full"&&a.resetState()):(XWt(t,e,r),c={compType:"partial",acceptedLength:a.partiallyAcceptedLength||0,acceptedLines:a.linesAccepted}),mO(t,i,e.displayText,e.offset,e.uri,e.telemetry,c,e.copilotAnnotations)}s(wX,"handlePartialGhostTextPostInsert");function ZWt(t,e,r){let n=t.get(Ou);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=fR(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}s(ZWt,"handleCumulativeAcceptance");function lYe(t){let e=new a3;return e.set(gl,t),e.set(Uy,new Uy),e.set(yo,new yo),e.set(tA,new tA),e.set(Lg,new Lg),e.set(Nt,new Nt(e)),e.set(Ty,new Ty),e.set(Cu,new Cu(e)),e.set(Tu,new Tu),e.set(Vd,new Vd),e.set(s0,new VF),e.set(Vg,new ND),e.set(Mg,new YM),e.set(Qc,new Qc),e.set(dC,new dC(e)),e.set(vn,new vn(e)),e.set(sA,new sA(e)),e.set(sE,gX(e)),e.set(Ou,new Ou),e.set(u0,new u0),e.set(aE,aE.default),e.set(zv,new zv(e)),e.set(Um,new Um(e)),e.set(Gl,new Gl),e.set(o0,new o0(e)),e.set(ps,new ps),e.set(rh,new rh(e)),e.set(sh,new sh),e}s(lYe,"createCommonContext");f();f();var SX=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var O3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Pii=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),hO=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Nt).updateExPValuesAndAssignments(),a=await this.ctx.get(s0).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new SX(a.reason);case"failed":throw new O3(a.reason)}}};f();f();var uYe=Fe(require("node:util"));function dYe(t,...e){return`[${t}] ${e$t(e)}`}s(dYe,"formatLogMessage");function e$t(t){return uYe.default.formatWithOptions({maxStringLength:1/0},...t)}s(e$t,"format");function _X(t){return dPe(t)}s(_X,"verboseLogging");var RX=class extends Oc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||_X(r))&&this.console.warn(`[${i}]`,...o)}};f();var fYe=require("node:util");var Q3=class extends by{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){Ng(e,"log",qr.createAndMarkAsIssued({context:r,level:VS[1],message:t$t(...n)}),1)}sendException(e,r,n){La(e,r,n)}};function t$t(...t){return t.map(e=>(0,fYe.inspect)(e)).join(" ")}s(t$t,"telemetryMessage");f();var _ot=Fe(require("crypto")),Rot=Fe(require("fs")),ate=Fe(wot()),kot=require("tls"),Pot=Fe(Sot());var zB=new It("certificates"),nl=class{static{s(this,"RootCertificateReader")}};function cte(t,e=process.platform){return new ube(t,[new dbe,new fbe,iar(t,e)])}s(cte,"getRootCertificateReader");function iar(t,e){switch(e){case"linux":return new pbe(t);case"darwin":return new mbe(t);case"win32":return new hbe(t);default:return new gbe}}s(iar,"createPlatformReader");var lbe=class extends nl{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return zB.warn(this.ctx,"Failed to read root certificates:",r),[]}}},ube=class extends nl{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new lbe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new _ot.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return zB.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&zB.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},dbe=class extends nl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return kot.rootCertificates}},fbe=class extends nl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await Dot(e):[]}},pbe=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await Dot(n);zB.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},mbe=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=ate.get({excludeBundled:!1,format:ate.Format.pem});return zB.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},hbe=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=Pot.all();return zB.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},gbe=class extends nl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function Dot(t){let e;try{e=await Rot.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(Dot,"readCertsFromFile");f();var $ot=Fe(require("http"));var kar=407,Wu=new It("proxySocketFactory"),HC=class{static{s(this,"ProxySocketFactory")}},jR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function lte(t){return new Cbe(t,new vbe(t))}s(lte,"getProxySocketFactory");var Cbe=class extends HC{constructor(r,n,i=new N7,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Ur(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(Wu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof jR&&i.code===`ProxyStatusCode${kar}`){Wu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return Wu.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(Wu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(Wu.debug(this.ctx,"Proxy authorization successful, received token"),i)return Wu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){Wu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);Wu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);Wu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Wu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return Wu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return Wu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},vbe=class extends HC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(yo).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{Wu.debug(this.ctx,"Attempting to establish connection to proxy");let c=$ot.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,d)=>{Wu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new jR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):d.length>0?(u.destroy(),a(new jR(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Wu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{Wu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new jR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{Wu.debug(this.ctx,"Proxy socket connection timeout"),a(new jR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},N7=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Fe(Wot()))}};f();var zot=require("node:os");var Par=new It("repository"),GR="\\\\",Yot="(?:[#;].*)",JB=`(?:[^"${GR}]|${GR}.)`,Dar="[0-9A-Za-z-]",jot=`[A-Za-z]${Dar}*`,Kot=`\\s*${Yot}?$`,Jot=`(?:[^"${GR};#]|${GR}.)`,Bar=`(?:"${JB}*"|"${JB}*(?<strCont>${GR})$)`,Nar=`(?:${Jot}|${Bar})+`,Lar=`(?:(?<cont>${GR})$)`,Xot=`(?<value>${Nar})${Lar}?${Kot}`,Got=new RegExp(`^${Xot}`),Mar=new RegExp(`^(?<value>${JB}*(?:(?<strCont>${GR})$|(?<quote>")))`),Far=new RegExp(`^\\s*(?:(?<key>${jot})\\s*=\\s*${Xot}|(?<soloKey>${jot})${Kot})`),Oar=new RegExp(`(?<value>${Jot}+)|"(?<string>${JB}*)"`,"g"),Vot="[-.0-9A-Za-z]+",Qar=`\\s+"(?<ext>${JB}*)"`,Uar=`\\s+"(?<extOnly>${JB}*)"`,qar=new RegExp(`^\\s*\\[(?:(?<simple>${Vot})${Qar}|${Uar}|(?<simpleOnly>${Vot}))\\]`),Har=new RegExp(`^\\s*${Yot}$`),Ebe=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(qar);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(Far);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(Mar),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Got),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Got),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Oar)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Har.test(this.line)&&(this.line="")}},ute=class extends eA{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await zv.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new X2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new Ebe(i),a=new X2;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(To).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&Par.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=Mo(this.xdgConfigUri(),"git","config"),o=Mo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Hi(r).toLowerCase()!=="config.worktree")return;let n=gd(r),i=Mo(n,"commondir");try{let o=(await e.get(To).readFileString(i)).trimEnd();return Mo(m_(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Al(process.env.XDG_CONFIG_HOME):Mo(this.homeUri(),".config")}homeUri(){return Al((0,zot.homedir)())}};f();var Zot=require("child_process");var dte=class extends eA{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Zot.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){Dje.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=vs(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new X2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};f();var tst=Fe(require("node:events"));var est="onWorkspaceChanged",Fp=class{constructor(){this.emitter=new tst.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(est,e)}emit(e){this.emitter.emit(est,e)}};function rst(t){let e=lYe(t);return War(e),e.set(nl,cte(e)),e.set(HC,lte(e)),e.set(eA,new TK([new dte,new ute])),e.set(Fp,new Fp),e.set(hO,new hO(e)),e}s(rst,"createProductionContext");function War(t){t.set(mm,mm.fromEnvironment(!1)),t.set(by,new Q3),t.set(Oc,new RX(console))}s(War,"setupRudimentaryLogging");var g0i=new It("context");f();f();var Kr=new It("chat");f();f();var _l=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(_l||{});function ln(t){return t?(t=Op(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(ln,"getTextPart");var nst=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),ist=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function JT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(JT,"parseToolCallArguments");function ost(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(ost,"toOpenAIToolCall");function sst(t,e,r,n,i,o,a,c){let l=JSON.parse(JSON.stringify(e));return r.tool_calls&&(l.tool_calls=r.tool_calls),m3(t,[l],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c}}s(sst,"convertToChatCompletion");function L7(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(L7,"isChatCompletionContentPartArray");function fte(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(fte,"isChatMessageArray");function Op(t){if(typeof t=="string")return t;if(L7(t))return t;if(fte(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(Op,"resolveAsChatMessageContent");function M7(t,e){return(typeof t=="string"||L7(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(M7,"appendChatMessageContent");function xbe(t,e){if(t){if(typeof t=="string"||L7(t))return[{role:"assistant",content:t}];if(fte(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(xbe,"resolveResponseAsChatMessages");f();var bbe=new It("streamMessages");function ast(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(bbe.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),bbe.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),bbe.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=GF(e.solution),a={role:"assistant",content:n};return sst(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(ast,"prepareChatCompletionForReturn");var Th=new It("fetchChat"),pte=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let c=a.body();try{c.destroy()}catch(l){Th.exception(e,l,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let c=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,c,a)}if(e.get(rh).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let c=await a.text(),l=JSON.parse(c),u=l.choices!=null?l.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??gr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:ln(u.content).split(" "),requestId:{headerRequestId:d,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=ln(u.content);return await i(m,{text:m,copilotReferences:l.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(p)}(),getProcessingTime:s(()=>h3(a),"getProcessingTime")}}else{let l=aT.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:Jv(l,d=>ast(e,d,n)),getProcessingTime:s(()=>h3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return qr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:g3(e,n.count),top_p:HK(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=Qv(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await $ar(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,n.apiKey,n.modelProviderName,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Th.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Yr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Th.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Th.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Yr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Th.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function $ar(t,e,r,n,i,o,a,c,l,u,d,p,m,h){let g=n===""&&i===""?r:Mo(r,n,i);if(!c)throw new Error(`Failed to send request to ${g} due to missing key`);let A=u.extendedBy({endpoint:i,engineName:n,uiKind:l});qK(a,A,["messages"]),A.properties.headerRequestId=o,Bt(t,"request.sent",A);let y=va(),E=bGe(l),b={...MI(t),...d.toCapiHeaders()};return a.messages?.some(w=>Array.isArray(w.content)?w.content.some(R=>"image_url"in R):!1)&&(b["Copilot-Vision-Request"]="true"),p&&(b["api-key"]=p),a.messages&&a.messages.forEach(w=>{jar(w)&&w.tool_calls&&(w.tool_calls=w.tool_calls.map(R=>ost(R)))}),x2(t,g,c,E,o,a,h,b,void 0,m).then(w=>{let R=eR(w);A.extendWithRequestId(R);let D=va()-y;return A.measurements.totalTimeMs=D,Th.info(t,`Request ${o} at <${g}> finished with ${w.status} status after ${D}ms`),Th.debug(t,"request.response properties",A.properties),Th.debug(t,"request.response measurements",A.measurements),Th.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",A),w}).catch(w=>{if(hd(w))throw w;let R=A.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",R),A.properties.message=String(df(w,"name")??""),A.properties.code=String(df(w,"code")??""),A.properties.errno=String(df(w,"errno")??""),A.properties.type=String(df(w,"type")??"");let D=va()-y;throw A.measurements.totalTimeMs=D,Th.info(t,`Request ${o} at <${g}> rejected with ${String(w)} after ${D}ms`),Th.debug(t,"request.error properties",A.properties),Th.debug(t,"request.error measurements",A.measurements),Bt(t,"request.error",A),w}).finally(()=>{m3(t,e,A)})}s($ar,"fetchWithInstrumentation");function jar(t){return"tool_calls"in t}s(jar,"isChatMessageWithToolCalls");var Ha=class{constructor(e){this.ctx=e;this.fetcher=new pte}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=gr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&c.maxResponseTokens!==void 0&&(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(Yr).getToken(),u,d,p,m;if(e.modelConfiguration?.providerName)if(p=await a$e(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),m=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===Zm.Azure)if(e.modelConfiguration.deploymentUrl)u=c$e(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),d="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(e.modelConfiguration?.providerName===Zm.OpenAI)u=BAe[Zm.OpenAI],d=e.endpoint??"completions",e.authToken=p;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else u=Oy(this.ctx,l,e.copilotApiProvider??"api"),d=e.endpoint??"completions";let h=e.authToken??l.token,g={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:h,apiKey:p,modelProviderName:m,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return c&&(g.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(g.tools=e.tools,g.tool_choice=e.tool_choice??"auto"),await this.fetch(g,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=WF(r.chatCompletions,l=>this.postProcess(l,i));Kr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Kr.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:ln(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:ln(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>ln(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return yX(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Kr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return hd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Kr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var WC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var XT=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var Gar=".github/copilot-instructions.md",Var=".github/git-commit-instructions.md",zar="global-copilot-instructions",Yar="global-git-commit-instructions",$C=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:zar}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:Yar}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=Mo(r.uri,n),l=(await e.get(To).readFileString(c)).trim();if(!l)return;(await Yv(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,Gar,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,Var,void 0,i,0)),c});return await Promise.all(o),i}};f();f();var EA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get($C),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),c=[...o,...a];return this.processInstructions(c,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};f();var Kar="X-Initiator",Jar="X-Interaction-ID",Xar="X-Interaction-Type";var mte=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},Ibe=class extends mte{static{s(this,"User")}static id(){return"user"}},Tbe=class extends mte{static{s(this,"Agent")}static id(){return"agent"}},wbe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[Kar]:this.initiator,[Jar]:this.interactionId,[Xar]:this.interactionType.toString()}}},E0=class t extends wbe{static{s(this,"LlmInteraction")}static user(e,r){return new t(Ibe,e,r)}static agent(e,r){return new t(Tbe,e,r)}};f();f();var Wa=class{static{s(this,"ModelConfigurationProvider")}},hte=class extends Wa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Kr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(nf).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(nf).getMetadata(),i=ecr(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===fn.Gpt35turbo||r===fn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:_be(6144,i),maxResponseTokens:Sbe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===fn.Gpt4||r===fn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:_be(10240,i),maxResponseTokens:Sbe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===fn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await Zar(this.ctx,i),maxResponseTokens:Sbe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case KV.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function Zar(t,e){let r=t.get(Nt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),_be(i,e)}s(Zar,"getExpRequestTokens");function _be(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(_be,"getRequestTokens");function Sbe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(Sbe,"getResponseTokens");function ecr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(ecr,"filterModelsByCapabilities");var Go=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(Wa).getBestChatModelConfig([n]);if(e.get(rh).quotaExhausted&&!(await e.get(Yr).getToken()).userInfo?.isFreeUser){let o=await e.get(nf).getFallbackModel();if(o)return e.get(Wa).getBestChatModelConfig([o?.id])}return e.get(Wa).getBestChatModelConfig(Om(r),i)}static transformMessages(e,r){return r===fn.O1Ga||r===fn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var VR=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{s(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(i=>`- ${i}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(i=>`- ${i}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,i){let o=new Ha(e),a=await Go.getModelConfiguration(e,"gitCommit"),c=[{uri:n.workspaceFolder?n.workspaceFolder:Al(process.cwd())}],l=await EA.getInstructions(e,c,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),u=[{role:"system",content:this.buildSystemMessage(n.userLanguage,i)},{role:"user",content:this.buildUserMessage(n,l)}];this.updateAttemptCount(n.changes);let d=await e.get(Nt).updateExPValuesAndAssignments(),p=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),m=await o.fetchResponse({modelConfiguration:a,messages:u,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:E0.user("git-commit",gr()),temperature:p},r,d);if(this.lastChanges=n.changes,m.type!=="success")return;let h=m.value.match(/```text\n([\s\S]*?)\n```/);return h?h[1].trim():m.value.trim()}};f();var $u=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},Ate=class extends $u{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};f();f();f();function yte(){return gr()}s(yte,"uuidV4");f();var ZT=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var jC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var F7="filepath:",Rl="...existing code...",Rbe="copilot-edited-file";f();function XB(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(XB,"getFenceForCodeBlock");var Qp=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=XB(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${F7} ${Va(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var kbe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},O7=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=ln(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=ln(a.content).endsWith(`
`)?ln(a.content):`${ln(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${Rbe}>.
</SYSTEM>


`}return o+ln(a.content)},"")+`


The resulting document:
<${Rbe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Rl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new Qp({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new kbe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new Qp({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var wE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(vn).getOrReadTextDocument({uri:e})}};f();f();f();f();f();function cst(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(cst,"isObject");function Cte(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(Cte,"assertType");f();f();var wh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Cn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(il.fromJson))}static from(e){let r=e.map(i=>new il(Gt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new il(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new il(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return tcr(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new il(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new il(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new il(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},il=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=pT(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,nE(r,this.newText)),o=new Gt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function tcr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new il(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(c.replaceRange.start+a);d>0&&(u=c.newText.slice(0,d));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new il(Gt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Gt(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new il(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new wh(n).normalize()}s(tcr,"joinEdits");f();f();var lst=-1;function ZB(){return lst!==-1?lst:Date.now()}s(ZB,"now");function ust(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(ust,"lineRangeDistance");f();var eN=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new SE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Ta.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return sa.create(r)}mapEdits(e){return new t(this.edits.map(e))}},SE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new Cn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=rr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(rr.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(rr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(rr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new rr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Ta.replace(n,this.newText)}};var ss=class t{constructor(e){this.edits=e;Tl(Zv(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>xA.deserialize(r)))}static fromEdit(e){let r=eN.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=SE.joinEdits(o,r);o.length=0;let d=xA.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(eh(n=>n.lineRange.startLineNumber,th)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return sa.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Or.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Or(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new xA(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of K2(this.edits,(l,u)=>ust(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}l=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new xA(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},xA=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Or.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=uh(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(rr.fromPositions(new Fr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(rr.fromPositions(e.range.getEndPosition(),new Fr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Or(i,a),n)}toLineEdit(){return new ss([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Fr(o,a)}else n=new Fr(1,1);let i=r.addToPosition(new Fr(1,1));return new SE(rr.fromPositions(n,i),"")}else return new SE(new rr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new SE(rr.fromPositions(new Fr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new rr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new SE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Ta.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Or(r,n),this.newLines.slice(i,this.newLines.length-o))}},rcr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(rcr||={});var GC=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=ss.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new _d(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new ss(r))}};var sa=class t{constructor(e){this.edits=e;Tl(Zv(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Ta.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Ta.replace(e,r)])}static insert(e,r){return new t([Ta.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Ta.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new wh(this.edits.map(e=>new il(e.range,e.newText)))}compose(e){return ncr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Ta.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Ta.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ta.replaceWithData(Gt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new vte(i)}if(this.edits.length!==e.arrayLength)throw BF(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=Ta.replaceWithData(Gt.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new vte(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Gt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Ta.replace(Gt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(Ta.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(Ta.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function ncr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(Ta.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(Ta.replaceWithData(Gt.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let d=l.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Ta.replaceWithData(Gt.emptyAt(l.range.endExclusive),l.newText.slice(-d),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Gt(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Ta.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return sa.create(n).normalize()}s(ncr,"joinEdits");var Ta=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Gt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Gt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Gt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return sa.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=icr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=ocr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function icr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(icr,"commonPrefixLength");function ocr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(ocr,"commonSuffixLength");var _d=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return nA(()=>null.base.equals(this.base.apply(e))),nA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return GC.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},vte=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return sa.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new VC(this.edits.map(e=>e.toEdit()))}},VC=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return sa.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=sa.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>sa.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=ss.fromEdit(new _d(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};f();f();f();var zR=0;function Ete(t){return t===0}s(Ete,"lengthIsZero");var Up=2**26;function tN(t,e){return t*Up+e}s(tN,"toLength");function _E(t){let e=t,r=Math.floor(e/Up),n=e-r*Up;return new Jl(r,n)}s(_E,"lengthToObj");function Q7(t,e){let r=t+e;return e>=Up&&(r=r-t%Up),r}s(Q7,"lengthAdd");function dst(t,e){return t.reduce((r,n)=>Q7(r,e(n)),zR)}s(dst,"sumLengths");function Pbe(t,e){return t===e}s(Pbe,"lengthEquals");function U7(t,e){let r=t,n=e;if(n-r<=0)return zR;let o=Math.floor(r/Up),a=Math.floor(n/Up),c=n-a*Up;if(o===a){let l=r-o*Up;return tN(0,c-l)}else return tN(a-o,c)}s(U7,"lengthDiffNonNegative");function fst(t,e){let r=t,n=Math.floor(r/Up),i=r-n*Up,o=e,a=Math.floor(o/Up),c=o-a*Up;return new rr(n+1,i+1,a+1,c+1)}s(fst,"lengthsToRange");f();var rN=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${_E(this.startOffset)}...${_E(this.endOffset)}) -> ${_E(this.newLength)}`}};function mst(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new dK(pst(t)),n=pst(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!Ete(u);){let[p,m]=i.splitAt(u);d.push(p),u=U7(p.lengthAfter,u),i=m??r.dequeue()}return Ete(u)||d.push(new q7(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,d,p){if(a.length>0&&Pbe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new rN(m.startOffset,d,Q7(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(c,"pushEdit");let l=zR;for(let u of n){let d=o(u.lengthBefore);if(u.modified){let p=dst(d,h=>h.lengthBefore),m=Q7(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of d){let m=l;l=Q7(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(mst,"combineTextEditInfos");var q7=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=U7(e,this.lengthAfter);return Pbe(r,zR)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,zR,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${_E(this.lengthBefore)} -> ${_E(this.lengthAfter)}`}};function pst(t){let e=[],r=zR;for(let n of t){let i=U7(r,n.startOffset);Ete(i)||e.push(new q7(!1,i,i));let o=U7(n.startOffset,n.endOffset);e.push(new q7(!0,o,n.newLength)),r=n.endOffset}return e}s(pst,"toLengthMapping");var H7=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new xte(n.range,Jl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=_E(n.newLength);return new xte(fst(n.startOffset,n.endOffset),new Jl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new rN(tN(e.range.startLineNumber-1,e.range.startColumn-1),tN(e.range.endLineNumber-1,e.range.endColumn-1),tN(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=mst(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return rr.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},xte=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var bte=class{constructor(e){this.documents=e;Tl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Ite=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new _d(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var Tte=class extends xs{constructor(){super();this.branch=iA("branchName",void 0);this._register(nCe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var wte=class extends xs{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new Bbe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Tte;this._register(iR(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=ZB(),this._documentState.forEach(o=>o.applyAllEdits()))})),ah(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new Dbe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(iE(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(bc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new bte(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=ZB()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},Dbe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Xl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=eN.fromEdit(e,this._currentValue),i=H7.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return YR(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&scr(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=ZB(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:ZB()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new VC(this._edits.map(o=>o.edit));return{history:new Ite(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=sa.empty,o=H7.empty,a,c=0,l=sa.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(ZB()-u.instant>600*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();Cte(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=YR(u.textLengthEdit.edits,D=>D.range.endLineNumber-D.range.startLineNumber+D.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||YR(u.edit.edits,D=>D.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||YR(u.edit.edits,D=>D.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let D=sa.trySwap(u.edit,l);if(D)l=D.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let y=u.edit.inverseOnString(n.value);n=n.apply(y);let E=u.edit.compose(i),b=ss.fromEdit(new _d(n,E)),R=new GC(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(R>e)break;c=R,i=E,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new VC(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function YR(t,e){let r=0;for(let n of t)r+=e(n);return r}s(YR,"sum");function scr(t,e){let r=e.getNewRanges();return t.edits.every(n=>acr(n.range,r))}s(scr,"editExtends");function acr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(acr,"doesTouch");var Bbe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};f();f();var KR=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=Zg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Fr(n,i)}getRange(e){return rr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Jl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Jl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Nbe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new Fr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new rr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new KR(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new rr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return uh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var RE=class extends Nbe{constructor(r){super();this.value=r;this._t=new KR(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();f();f();var W7=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Cn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,d;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),d=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let y=u.slice(Gt.emptyAt(p),new Gt(0,m));o.push(y)}if(!d)throw new Cn("Invariant violation: lastIntersecting is undefined");let h=d.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let y=d.slice(Gt.ofStartAndLength(d.replaceRange.endExclusive,0),new Gt(d.getNewLength()-h,d.getNewLength()));i.unshift(y),a-=y.getNewLength()-y.replaceRange.length}let g=new Gt(p,c.replaceRange.endExclusive-a),A=c.slice(g,new Gt(0,c.getNewLength()));o.push(A)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Gt(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return LF(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}},Ste=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Gt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Gt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},hst=class t extends W7{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var _te=class extends W7{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(ju.replace(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new Cf(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new ju(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new ju(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new Cf(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new Cf(r)}normalizeEOL(e){return new Cf(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=ju.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?Cf.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new RE(this.apply(e.value))}mapData(e){return new Lbe(this.replacements.map(r=>new nN(r.replaceRange,r.newText,e(r))))}},Rte=class extends Ste{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=pT(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,nE(n,this.newText)),a=new Gt(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new ju(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new ju(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=pT(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Gt(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=nE(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Gt(0,this.newText.length-i))}toEdit(){return new Cf([this])}},Cf=class t extends _te{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new ju(e,r)])}static insert(e,r){return new t([new ju(Gt.emptyAt(e),r)])}static delete(e){return new t([new ju(e,"")])}static fromJson(e){return new t(e.map(ju.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},ju=class t extends Rte{static{s(this,"StringReplacement")}static insert(e,r){return new t(Gt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var Lbe=class t extends _te{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new nN(e,r,n)])}static insert(e,r,n){return new t([new nN(Gt.emptyAt(e),r,n)])}static delete(e,r){return new t([new nN(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new Cf(this.replacements.map(e=>new ju(e.replaceRange,e.newText)))}},nN=class t extends Rte{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Gt.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};f();var $7=class t{constructor(e){this.replacements=e;nA(()=>Zv(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(i=>Rd.fromStringReplacement(i,r));return new t(n)}static replace(e,r){return new t([new Rd(e,r)])}static insert(e,r){return new t([new Rd(rr.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new Rd(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.replacements){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Jl.ofText(o.text);if(e.isBefore(c)){let u=new Fr(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),d=l.addToPosition(u);return kte(u,d)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new Fr(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof Fr?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof Fr?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return kte(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new Fr(1,1);for(let o of this.replacements){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=kte(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=kte(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new RE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,i)=>new Rd(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.replacements){let a=Jl.ofText(o.text),c=Fr.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new Cn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),i="";for(let o=0;o<this.replacements.length;o++){let a=this.replacements[o];if(i+=a.text,o<this.replacements.length-1){let c=this.replacements[o+1],l=rr.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new Rd(rr.fromPositions(r,n),i)}equals(e){return NF(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new RE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let i=e.getValueOfRange(r.range),o=rr.fromPositions(new Fr(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),a=e.getValueOfRange(o);a.length>10&&(a="..."+a.substring(a.length-10));let c=rr.fromPositions(r.range.getEndPosition(),new Fr(r.range.endLineNumber+1,1)),l=e.getValueOfRange(c);l.length>10&&(l=l.substring(0,10)+"...");let u=i;if(u.length>10){let p=Math.floor(5);u=u.substring(0,p)+"..."+u.substring(u.length-p)}let d=r.text;if(d.length>10){let p=Math.floor(5);d=d.substring(0,p)+"..."+d.substring(d.length-p)}return u.length===0?`${a}\u2770${d}\u2771${l}`:`${a}\u2770${u}\u21A6${d}\u2771${l}`}).join(`
`)}},Rd=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new Cn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=rr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(rr.fromPositions(n,i),o)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new $7([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(rr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(rr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new rr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=pT(r,n),o=Jl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=rr.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=pT(r,n);r=r.substring(i),n=n.substring(i);let o=nE(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function kte(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return rr.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new Cn("start must be before end");return new rr(t.lineNumber,t.column,e.lineNumber,e.column)}s(kte,"rangeFromPositions");var j7=class t{constructor(e){this.replacements=e;Tl(Zv(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>iN.deserialize(r)))}static fromEdit(e,r){let n=$7.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=Rd.joinReplacements(o,r);o.length=0;let d=iN.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(eh(n=>n.lineRange.startLineNumber,th)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let i=n.toSingleEdit(e);r.push(i)}return new Cf(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Or.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Or(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new iN(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of K2(this.replacements,(l,u)=>l.lineRange.distanceToRange(u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}l=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.replacements){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,i)=>new iN(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},iN=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"LineReplacement")}static deserialize(e){return new t(Or.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=uh(e.text),i=e.range.startLineNumber,o=r.getValueOfRange(rr.fromPositions(new Fr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(rr.fromPositions(e.range.getEndPosition(),new Fr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Or(i,a),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Fr(o,a)}else n=new Fr(1,1);let i=r.addToPosition(new Fr(1,1));return new Rd(rr.fromPositions(n,i),"")}else return new Rd(new rr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new Rd(rr.fromPositions(new Fr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new rr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new Rd(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new ju(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Or(r,n),this.newLines.slice(i,this.newLines.length-o))}toLineEdit(){return new j7([this])}},ccr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(ccr||={});var oN=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Pte(!0))}static{s(this,"ArcTracker")}handleEdits(e){let r=e.mapData(o=>new Pte(!1)),i=this._updatedTrackedEdit.compose(r).decomposeSplit(o=>!o.data.isTrackedEdit).e2;this._updatedTrackedEdit=i}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return YR(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return YR(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=j7.fromEdit(e,new RE(this.originalText)),n=LF(r.replacements,o=>o.lineRange.length),i=LF(r.getNewLineRanges(),o=>o.length);return{deletedLineCounts:n,insertedLineCounts:i}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Pte=class{constructor(e){this.isTrackedEdit=e}static{s(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};f();var sN=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Cf.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=lcr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let d=this._originalEdits.replacements[u],p=this.originalText.substring(d.replaceRange.start,d.replaceRange.endExclusive),m=d.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),A=Mbe(g,m),y=Mbe(m,p),E=Mbe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${A.toFixed(2)} noRevert:(${y.toFixed(2)},${E.toFixed(2)})`),y!==1){let b=1-Math.max(E-y,0)/(1-y);n+=d.replaceRange.length*b,i+=d.replaceRange.length}e+=d.newText.length*A,r+=d.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function Mbe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(Mbe,"compute4GramTextSimilarity");function lcr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(lcr,"applyEditsToRanges");f();f();var G7=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new Fr(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function Dte(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new G7(t),a=new G7(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let d=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(d,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),A=new Gt(h,g);c.push(new ju(A,m))}return new Cf(c)}s(Dte,"stringEditFromDiff");f();f();var gst=require("worker_threads");var Fbe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function ucr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(ucr,"createRpcProxy");var Bte=class{constructor(e,r,n){this.responseHandler=new Fbe;this.worker=new gst.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=ucr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};f();f();f();var Lte=!1,Mte=!1,Nte=!1,dcr=!1,fcr=!1,Ast=!1,pcr=!1,mcr=!1,hcr=!1,gcr=!1;var kE,PE=globalThis,Sh;typeof PE.vscode<"u"&&typeof PE.vscode.process<"u"?Sh=PE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Sh=process);var yst=typeof Sh?.versions?.electron=="string",Acr=yst&&Sh?.type==="renderer";typeof Sh=="object"?(Lte=Sh.platform==="win32",Mte=Sh.platform==="darwin",Nte=Sh.platform==="linux",dcr=Nte&&!!Sh.env.SNAP&&!!Sh.env.SNAP_REVISION,pcr=yst,hcr=!!Sh.env.CI||!!Sh.env.BUILD_ARTIFACTSTAGINGDIRECTORY,fcr=!0):typeof navigator=="object"&&!Acr?(kE=navigator.userAgent,Lte=kE.indexOf("Windows")>=0,Mte=kE.indexOf("Macintosh")>=0,mcr=(kE.indexOf("Macintosh")>=0||kE.indexOf("iPad")>=0||kE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Nte=kE.indexOf("Linux")>=0,gcr=kE?.indexOf("Mobi")>=0,Ast=!0):console.error("Unable to resolve platform.");var Obe=0;Mte?Obe=1:Lte?Obe=3:Nte&&(Obe=2);var JR=Lte,Cst=Mte;var ycr=Ast&&typeof PE.importScripts=="function",Myi=ycr?PE.origin:void 0;var zC=kE;var Ccr=typeof PE.postMessage=="function"&&!PE.importScripts,Fyi=(()=>{if(Ccr){let t=[];PE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),PE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var vcr=!!(zC&&zC.indexOf("Chrome")>=0),Oyi=!!(zC&&zC.indexOf("Firefox")>=0),Qyi=!!(!vcr&&zC&&zC.indexOf("Safari")>=0),Uyi=!!(zC&&zC.indexOf("Edg/")>=0),qyi=!!(zC&&zC.indexOf("Android")>=0);var XR,Qbe=globalThis.vscode;if(typeof Qbe<"u"&&typeof Qbe.process<"u"){let t=Qbe.process;XR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?XR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:XR={get platform(){return JR?"win32":Cst?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var V7=XR.cwd,vst=XR.env,Est=XR.platform,Vyi=XR.arch;var xcr=65,bcr=97,Icr=90,Tcr=122,rw=46,su=47,x0=92,ew=58,wcr=63,Fte=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Scr(t,e){if(t===null||typeof t!="object")throw new Fte(e,"Object",t)}s(Scr,"validateObject");function nc(t,e){if(typeof t!="string")throw new Fte(e,"string",t)}s(nc,"validateString");var b0=Est==="win32";function vi(t){return t===su||t===x0}s(vi,"isPathSeparator");function Ube(t){return t===su}s(Ube,"isPosixPathSeparator");function tw(t){return t>=xcr&&t<=Icr||t>=bcr&&t<=Tcr}s(tw,"isWindowsDeviceRoot");function Ote(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=su}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==rw||i.charCodeAt(i.length-2)!==rw){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===rw&&c!==-1?++c:c=-1}return i}s(Ote,"normalizeString");function _cr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(_cr,"formatExt");function xst(t,e){Scr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${_cr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(xst,"_format");var ic={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],nc(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=V7():(o=vst[`=${e}`]||V7(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===x0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,d=o.charCodeAt(0);if(a===1)vi(d)&&(c=1,u=!0);else if(vi(d))if(u=!0,vi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!vi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&vi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!vi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else tw(d)&&o.charCodeAt(1)===ew&&(l=o.slice(0,2),c=2,a>2&&vi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Ote(r,!n,"\\",vi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){nc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Ube(o)?"\\":t;if(vi(o))if(i=!0,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else tw(o)&&t.charCodeAt(1)===ew&&(n=t.slice(0,2),r=2,e>2&&vi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Ote(t.slice(r),!i,"\\",vi):"";return a.length===0&&!i&&(a="."),a.length>0&&vi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){nc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return vi(r)||e>2&&tw(r)&&t.charCodeAt(1)===ew&&vi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];nc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&vi(r.charCodeAt(0))){++i;let o=r.length;o>1&&vi(r.charCodeAt(1))&&(++i,o>2&&(vi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&vi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ic.normalize(e)},relative(t,e){if(nc(t,"from"),nc(e,"to"),t===e)return"";let r=ic.resolve(t),n=ic.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===x0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===x0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===x0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===x0;)l--;let u=l-c,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===x0&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(c+m)===x0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>d&&(t.charCodeAt(i+m)===x0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===x0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===x0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ic.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===x0){if(e.charCodeAt(1)===x0){let r=e.charCodeAt(2);if(r!==wcr&&r!==rw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(tw(e.charCodeAt(0))&&e.charCodeAt(1)===ew&&e.charCodeAt(2)===x0)return`\\\\?\\${e}`;return t},dirname(t){nc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return vi(i)?t:".";if(vi(i)){if(r=n=1,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else tw(i)&&t.charCodeAt(1)===ew&&(r=e>2&&vi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(vi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&nc(e,"suffix"),nc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&tw(t.charCodeAt(0))&&t.charCodeAt(1)===ew&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(vi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(vi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){nc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===ew&&tw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(vi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===rw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:xst.bind(null,"\\"),parse(t){nc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return vi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(vi(i)){if(n=1,vi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!vi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&vi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!vi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(tw(i)&&t.charCodeAt(1)===ew){if(r<=2)return e.root=e.dir=t,e;if(n=2,vi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),vi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===rw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return c!==-1&&(o===-1||d===0||d===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Rcr=(()=>{if(b0){let t=/\\/g;return()=>{let e=V7().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>V7()})(),Rc={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Rcr();nc(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===su)}return e=Ote(e,!r,"/",Ube),r?`/${e}`:e.length>0?e:"."},normalize(t){if(nc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===su,r=t.charCodeAt(t.length-1)===su;return t=Ote(t,!e,"/",Ube),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return nc(t,"path"),t.length>0&&t.charCodeAt(0)===su},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];nc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Rc.normalize(e)},relative(t,e){if(nc(t,"from"),nc(e,"to"),t===e||(t=Rc.resolve(t),e=Rc.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===su&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===su)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===su?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===su)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(nc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===su,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===su){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&nc(e,"ext"),nc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===su){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===su){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){nc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===su){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===rw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:xst.bind(null,"/"),parse(t){nc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===su,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===su){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===rw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Rc.win32=ic.win32=ic;Rc.posix=ic.posix=Rc;var Yyi=b0?ic.normalize:Rc.normalize,Kyi=b0?ic.isAbsolute:Rc.isAbsolute,qbe=b0?ic.join:Rc.join,Jyi=b0?ic.resolve:Rc.resolve,Xyi=b0?ic.relative:Rc.relative,Zyi=b0?ic.dirname:Rc.dirname,bst=b0?ic.basename:Rc.basename,Ist=b0?ic.extname:Rc.extname,eCi=b0?ic.format:Rc.format,tCi=b0?ic.parse:Rc.parse,rCi=b0?ic.toNamespacedPath:Rc.toNamespacedPath,nCi=b0?ic.sep:Rc.sep,iCi=b0?ic.delimiter:Rc.delimiter;f();var Qte=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var z7=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new Or(o,l.original.startLineNumber),new Or(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new Or(o,r+1),new Or(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new YC(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Cn("not a valid diff");return new YC(new rr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new rr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new YC(new rr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new rr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(wst(this.original.endLineNumberExclusive,e)&&wst(this.modified.endLineNumberExclusive,r))return new YC(new rr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new rr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new YC(rr.fromPositions(new Fr(this.original.startLineNumber,1),aN(new Fr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),rr.fromPositions(new Fr(this.modified.startLineNumber,1),aN(new Fr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new YC(rr.fromPositions(aN(new Fr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),aN(new Fr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),rr.fromPositions(aN(new Fr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),aN(new Fr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new Cn}};function aN(t,e){if(t.lineNumber<1)return new Fr(1,1);if(t.lineNumber>e.length)return new Fr(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new Fr(t.lineNumber,r.length+1):t}s(aN,"normalizePosition");function wst(t,e){return t>=1&&t<=e.length}s(wst,"isValidLineNumber");var Ute=class t extends z7{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Or.join(e.map(i=>Or.fromRangeInclusive(i.originalRange))),n=Or.join(e.map(i=>Or.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},YC=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new Cn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new Cn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new Rd(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var _st=require("fs");var I0=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new lh(()=>{let e=kcr([qbe(__dirname,"diffWorker.js"),qbe(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new Bte(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:Sst(i.changes),moves:i.moves.map(a=>new Qte(new z7(new Or(a[0],a[1]),new Or(a[2],a[3])),Sst(a[4])))}}};function Sst(t){return t.map(e=>new Ute(new Or(e[0],e[1]),new Or(e[2],e[3]),e[4]?.map(r=>new YC(new rr(r[0],r[1],r[2],r[3]),new rr(r[4],r[5],r[6],r[7])))))}s(Sst,"toLineRangeMappings");function kcr(t){for(let e of t)if((0,_st.existsSync)(e))return e}s(kcr,"firstExistingPath");f();f();var Pcr=Symbol("MicrotaskDelay");function Dcr(t){let e=new tE,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new uC)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(Dcr,"createCancelablePromise");function DE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new uC)})}):Dcr(r=>DE(t,r))}s(DE,"timeout");var cN=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new Cn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new Cn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var Y7=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new uC)}},Bcr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Bcr||={});var K7=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new Tp,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await rR.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var qte=class{constructor(e){this._deferred=new Y7;this._asyncIterable=new K7(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();var Wte=new It("repository"),BE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},_h=class{static{s(this,"GitBranchLoader")}},Hte=class extends _h{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var $te=new It("editSurvivalReporter"),Hbe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new Mu;this._editSurvivalTracker=new sN(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=gd(this._document.uri),r=this.ctx.get(_h);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){$te.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=gd(this._document.uri),n=await this.ctx.get(_h).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return $te.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i,o){let a=e.computeTrackedEditsSurvivalScore(),c=await this.checkBranchChange(),l=this._getLineCountInfo(),u={fourGram:a.fourGram,noRevert:a.noRevert,timeDelayMs:r,didBranchChange:c,arc:o?.getAcceptedRetainedCharactersCount(),originalCharCount:o?.getOriginalCharacterCount(),currentLineCount:l?.insertedLineCounts,currentDeletedLineCount:l?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i};return{...u,currentLineCount:u.currentLineCount&&u.originalLineCount&&u.currentLineCount>u.originalLineCount?u.originalLineCount:u.currentLineCount,currentDeletedLineCount:u.currentDeletedLineCount&&u.originalDeletedLineCount&&u.currentDeletedLineCount>u.originalDeletedLineCount?u.originalDeletedLineCount:u.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(vn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new Cn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await Dte(r,n,e.get(I0)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var jte=class extends Hbe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c),this._arcTracker=new oN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new cN(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{$te.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new sN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new oN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new sN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new oN(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw $te.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Rst=new It("editSurvivalTrackerService"),KC=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){Rst.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await Dte(r,n,this.ctx.get(I0));i=new jte(this.ctx,e,r,n,a,o)}catch(a){Rst.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${Xv(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};f();var kc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var Ncr=1e3,Lcr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:fn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},lN=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new It("codeMapper")}async mapCode(e,r,n,i,o,a=!1){if(!e.resource)throw new jC("No uri found in code block");if(i.isCancellationRequested)throw new ZT;e.code.includes(Rl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let c=await this.ctx.get(vn).getOrReadTextDocument({uri:e.resource});if(c.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(c.status==="invalid"){let b=`Failed to find file ${e.resource} with status ${c.status} and reason ${c.reason}`,w=new jC(b);throw this.logger.error(this.ctx,b,w),w}let l=c.document.getText();if(l.length===0&&!e.code.includes(Rl))return o&&await this.reportCodeBlock(e,o),{code:e.code};let u=new O7({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new wE(this.ctx)}),d=this.ctx.get(KC),p=await u.render();p=u.transformToFastApplyMessage(p),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Hi(e.resource),editDescription:e.markdownBeforeBlock});let m=await this.ctx.get(Nt).updateExPValuesAndAssignments(),h=yte(),g=[],A=0,y=0,E=l.length+e.code.length+Ncr;for(;;){let b={copilotApiProvider:"proxy",modelConfiguration:Lcr,messages:p,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${h} in iteration ${y} with params: ${JSON.stringify(b,null,2)}`);let R=await this.ctx.get(Ha).fetchResponse(b,i,m);if(this.logger.debug(this.ctx,`Received map code response ${h} in iteration ${y} with result: ${JSON.stringify(R,null,2)}`),A=this.calculateResponseLength(R,g,A),R.type==="length"){if(A>E)throw new jC(`Code mapper might be in a loop: Rewritten length: ${A}, Document length: ${l.length}, Code block length ${e.code.length}`);p=await new O7({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new wE(this.ctx),inProgressRewriteContent:R.truncatedValue}).render()}else if(R.type==="success"){let D=g.join("");if(D){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Hi(e.resource),partialText:D,languageId:c.document.detectedLanguageId,markdownCodeFence:XB(D)});let N=d.initialize(c.document,l,D);return{code:D,editSurvivalTrackingSession:N,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:R.requestId}}}else{let N=`No valid completion found for uri ${e.resource}`;throw new jC(N)}}else{if(R.type==="canceled")throw new kc;{let D=`Failed to map code for uri ${e.resource} with result type ${R.type}`;throw this.logger.error(this.ctx,D,R),new jC(D)}}y+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Hi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Hi(e.resource)})}};f();var kd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var nw=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var Gte=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var iw=class{constructor(e,r){this.request=e;this.id=gr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},Wbe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},Vte=class{constructor(e=[],r="panel",n="en"){this._id=gr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new Wbe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new Gte(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var zte=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new kd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:tI,type:"user"},new kd({message:tI});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new kd({message:nw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new kd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new kd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new kd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new kd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new kd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new kd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new kd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new kd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*Pst(t){yield Promise.resolve(t)}s(Pst,"stringToAsyncIterable");f();f();var NE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Al(r)}static uriToPath(e){let r=vs(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var Yte=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await EA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(NE.posixFilePathToUri(e))}getFilePath(e){return NE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${F7} ${this.exampleFilePath}`,`// ${Rl}`,"{ changed code }",`// ${Rl}`,"{ changed code }",`// ${Rl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${F7} ${this.tsExampleFilePath}`,"class Person {",`   // ${Rl}`,"   age: number;",`   // ${Rl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new Qp({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Rl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var Kte=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var $be="<file>",J7="```",Z7="###",Fcr=/^(`+)([^ \n]*)/,X7="filepath:";async function*Bst(t,e){let r=new Kte(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let A=await r.peek(Math.max(J7.length,$be.length,Z7.length));if(A.startsWith($be)||A.startsWith(J7))break;if(A.startsWith(Z7)){let y=await r.readLineIncludingLF(),E=y.substring(Z7.length).trim();e(E)?n.length=0:n.push(y)}else await Dst(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith($be);for(;!r.endOfStream&&!i.startsWith(J7);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Fcr),c=a?a[2]:void 0,l=xVe(c?vVe(c):void 0),u=[`${l.lineComment.start} ${X7}`,`:: ${X7}`,`<!-- ${X7}`,`// ${X7}`,`# ${X7}`],d=Math.max(...u.map(A=>A.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let A=await r.peek(Math.max(J7.length,d));if(A.startsWith(J7)){let y=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(y);continue}}if(!h&&u.some(y=>A.startsWith(y))){let y=await r.readLineIncludingLF(),E=u.reduce((b,w)=>A.startsWith(w)?y.substring(w.length):b,y);E=E.split("-->")[0].trim(),E.endsWith(p)&&(E=E.substring(0,E.length-p.length)),E=E.trim(),h=e(E);continue}await Dst(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Bst,"getCodeBlocksFromResponse");async function Dst(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Dst,"pipeOneLine");function Nst(t){if(t.startsWith(`${Z7} `))return"";let e=t.indexOf(`
${Z7} `);return e===-1?"":t.substring(0,e)+`
`}s(Nst,"parseOverallDescription");f();f();var Jte=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Ocr=new It("CopilotEditsConversations"),ol=class{constructor(e){this.editConversations=new Ur(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new Vte([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Ocr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new Jte(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var LE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Ha(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=zte.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof ZT)await this.reportEnd(e,{message:tI});else if(n instanceof kd)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Nt).updateExPValuesAndAssignments();this.abortIfCancelled(e,r);let o=e.userSelectedModelProviderName&&e.userSelectedModel?await t3(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Go.transformMessages(n,o.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new Yte({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new wE(this.ctx),modelName:n,history:o,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:tI,type:"user"},new ZT;this.ctx.get(ol).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Pst(r),o=new lN(this.ctx),a=s(u=>NE.pathToUri(e,u),"createUri"),c=[],l=Nst(r);l&&await this.ctx.get($u).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),this.abortIfCancelled(e,n);for await(let u of Bst(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async d=>{await this.ctx.get($u).reportTurn(e,d)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof jC||i instanceof O3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof ZT)e.currentTurn.status="cancelled",e.currentTurn.response={message:tI,type:"user"},await this.reportEnd(e,{message:tI});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get($u).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get($u).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get($u).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};f();var uN=class extends zd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Yr).resetToken(),r.get(Ad).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=iI({serverUrl:ij(r,n.serverUrl),apiUrl:ij(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var jEi=new It("exp");function Lst(t){let e=t.get(Nt);e.registerStaticFilters(qcr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Wi(t,qt.DebugOverrideEngine)||Wi(t,qt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>tj()?"copilot-web":t.get(dn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>jbe(!t.get(yo).isProduction()&&t.get(dn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(dn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Qcr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(dn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>jbe(t.get(dn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Ucr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(dn).getRelatedPluginInfo()){let i=pm+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(lM).includes(i)){UH(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=jbe(n.version)}return r})}s(Lst,"setupExperimentationService");function Qcr(t){let e=t.get(dn).getEditorPluginInfo();return e.name==="copilot"&&My(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Qcr,"getPluginRelease");function Ucr(t){let e=t.get(dn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Ucr,"getTargetPopulation");function qcr(t){return Hcr(t)}s(qcr,"createAllFilters");function Hcr(t){let e=t.get(Ss);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(yo).isProduction()?d_(t):"1.999.0"}}s(Hcr,"createDefaultFilters");function jbe(t){return t.split("-")[0]}s(jbe,"trimVersionSuffix");f();var eQ=(r=>(r.enabled="enabled",r.disabled="disabled",r))(eQ||{}),ME=Symbol("onMCPToolsListChanged"),Rh=class{static{s(this,"McpManager")}};f();var bA=class{static{s(this,"McpRuntimeNotifier")}},Xte=class extends bA{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var dN=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var Gbe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},Zte=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Gbe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let d of this._recentUserActions){let p=c-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var as;(n=>{function t(i){return new Vbe(i)}n.ok=t,s(t,"ok");function e(i){return new zbe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(as||={});var Vbe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},zbe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var ere=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw BF(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw BF(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var hQ=Fe(SA());function Jat(t){return t.map(jlr).join(`
`)}s(Jat,"stringifyChatMessages");function jlr({role:t,content:e}){if(t!==hQ.Raw.ChatRole.User&&t!==hQ.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===hQ.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==hQ.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(jlr,"stringifyMessage");f();f();var Glr=/^\w[\w\d+.-]*$/,Vlr=/^\//,zlr=/^\/\//;function Ylr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Glr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Vlr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(zlr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Ylr,"_validateUri");function Klr(t,e){return!t&&!e?"file":t}s(Klr,"_schemeFix");function Jlr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==RA&&(e=RA+e):e=RA;break}return e}s(Jlr,"_referenceResolution");var Ts="",RA="/",Xlr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,hw=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Ts,this.authority=e.authority||Ts,this.path=e.path||Ts,this.query=e.query||Ts,this.fragment=e.fragment||Ts):(this.scheme=Klr(e,a),this.authority=r||Ts,this.path=Jlr(this.scheme,n||Ts),this.query=i||Ts,this.fragment=o||Ts,Ylr(this,a))}get fsPath(){return qIe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Ts),n===void 0?n=this.authority:n===null&&(n=Ts),i===void 0?i=this.path:i===null&&(i=Ts),o===void 0?o=this.query:o===null&&(o=Ts),a===void 0?a=this.fragment:a===null&&(a=Ts),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new mw(r,n,i,o,a)}static parse(e,r=!1){let n=Xlr.exec(e);return n?new mw(n[2]||Ts,_re(n[4]||Ts),_re(n[5]||Ts),_re(n[7]||Ts),_re(n[9]||Ts),r):new mw(Ts,Ts,Ts,Ts,Ts)}static file(e){let r=Ts;if(JR&&(e=e.replace(/\\/g,RA)),e[0]===RA&&e[1]===RA){let n=e.indexOf(RA,2);n===-1?(r=e.substring(2),e=RA):(r=e.substring(2,n),e=e.substring(n)||RA)}return new mw("file",r,e,Ts,Ts)}static from(e,r){return new mw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return JR&&e.scheme==="file"?n=t.file(ic.join(qIe(e,!0),...r)).path:n=Rc.join(e.path,...r),e.with({path:n})}toString(e=!1){return HIe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new mw(e);return r._formatted=e.external??null,r._fsPath=e._sep===ect?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var ect=JR?1:void 0,mw=class extends hw{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=qIe(this,!1)),this._fsPath}toString(r=!1){return r?HIe(this,!0):(this._formatted||(this._formatted=HIe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=ect),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},tct={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Xat(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=tct[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Xat,"encodeURIComponentFast");function Zlr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=tct[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Zlr,"encodeURIComponentMinimal");function qIe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,JR&&(r=r.replace(/\//g,"\\")),r}s(qIe,"uriToFsPath");function HIe(t,e){let r=e?Zlr:Xat,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=RA,n+=RA),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Xat(l,!1,!1)),n}s(HIe,"_asFormatted");function rct(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+rct(t.substr(3)):t}}s(rct,"decodeURIComponentGraceful");var Zat=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _re(t){return t.match(Zat)?t.replace(Zat,e=>rct(e)):t}s(_re,"percentDecode");f();var kA=class t{constructor(e){this.uri=e;this._uri=hw.parse(yl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new rE({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return bst(this.uri)}get extension(){return Ist(this.uri)}toUri(){return this._uri}};var gQ=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},Rre=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new tE;this.liveDependentants=0;this.fetchIssued=!1;this._result=new Y7;Tl(r.length>0),Tl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>AQ.deserialize(r)),e.activeDocumentIdx,[],gQ.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},AQ=class t{constructor(e,r,n,i,o,a,c,l,u,d,p,m,h=i.length,g=new Or(1,i.length+1),A=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=A;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Or.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Xl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(kA.create(e.id),e.workspaceRoot?hw.parse(e.workspaceRoot):void 0,sR.create(e.languageId),e.documentLinesBeforeEdit,ss.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?rr.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Xl(e.documentBeforeEdits),VC.deserialize(e.recentEdits),new Xl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Or.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var zi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=as.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=as.ok(e),i=r.build(n);return new t(n,i)}},gw=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?Jat(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:tO(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Tl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function eur(t,...e){let r=t;for(let n of e)r=n(r);return r}s(eur,"chainStatelessNextEditProviders");var yN=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=eur(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},CN=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new zi(as.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=ere.createSortPermutation(a,eh(u=>u.lineRange.startLineNumber,th)),l=new ss(c.apply(a));return new zi(as.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},vN=class extends CN{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},EN=class extends CN{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var tur=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),rur=new Map(Object.entries(tur).map(([t,e])=>[t,{languageId:t,...e}]));function ict(t){return WIe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(ict,"getLanguage");function WIe(t){return rur.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(WIe,"_getLanguage");f();var xN=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?S0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new S0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new S0(new Xo(0,0),new Xo(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!S0.isRange(e))throw Aw("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Aw("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Aw("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Xo=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw Aw("line must be non-negative");if(r<0)throw Aw("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw Aw();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw Aw();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},S0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Xo.isPosition(e.start)&&Xo.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new Xo(e,r),a=new Xo(n,i)):Xo.isPosition(e)&&Xo.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Xo.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=Xo.Max(e.start,this._start),n=Xo.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=Xo.Min(e.start,this._start),n=Xo.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw Aw();let n;return e?Xo.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return nur(this)}};function Aw(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(Aw,"illegalArgument");function nur(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(nur,"getDebugDescriptionOfRange");f();function oct(t){let r=t.split(/\r?\n/).map(iur),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(oct,"looksLikeCode");function iur(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),aCe(t)||(e+=1);{aCe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(iur,"guessLineType");var bN;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(bN||={});function our(t){return t.replace(/^\s+/g,"")}s(our,"trimLeadingWhitespace");function $Ie(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s($Ie,"isImportStatement");var sur=new rE(t=>{let e=ict(t),{start:r,end:n}=e.lineComment,i=`(?:${sCe(r)})`,o=n?`(?:${sCe(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function jIe(t,e){let r=t.match(sur.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=our(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(jIe,"extractEndLineComment");function Pre(t,e){let r=jIe(t,e);if(!(r&&r.content.trim().length>0&&oct(r.commentWithoutTokens)))return r}s(Pre,"extractExplicativeEndLineComment");var IN=class t extends CN{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>$Ie(i,r))||aur(e,n).some(i=>$Ie(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function aur(t,e){return p$e(t.lineRange.mapToLineArray(r=>e[r-1]))}s(aur,"getOldLines");f();var VIe=Fe(SA());f();f();f();var PA;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(PA||={});var e1=_0("instantiationService");function cur(t,e,r){e[PA.DI_TARGET]===e?e[PA.DI_DEPENDENCIES].push({id:t,index:r}):(e[PA.DI_DEPENDENCIES]=[{id:t,index:r}],e[PA.DI_TARGET]=e)}s(cur,"storeServiceDependency");function _0(t){if(PA.serviceIds.has(t))return PA.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");cur(e,r,i)},"id");return e.toString=()=>t,PA.serviceIds.set(t,e),e}s(_0,"createDecorator");f();f();var Wp=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var GIe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},yQ=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new GIe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};f();var sk=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var lur=!1,Dre=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Bre=class t{constructor(e=new sk,r=!1,n,i=lur){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(e1,this),this._globalGraph=i?n?._globalGraph??new yQ(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,hK(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)I$e(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=CQ.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw d$e("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof Wp?(n=CQ.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=CQ.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=PA.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof Wp)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Wp?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new yQ(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new Dre(i);for(let u of PA.getServiceDependencies(l.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),d instanceof Wp){let p={id:u.id,desc:d,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new Dre(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Wp){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Wp)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var CQ=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Nre=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new sk(...e):e??new sk}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Bre(this._collection,!0)}};var Mre=_0("ITelemetrySender"),DA=_0("IChatMLFetcher");var Lre=class{constructor(){this._stream=new qte;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Fre=_0("IEndpointProvider");f();var HE=_0("IParserService");f();var TN=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},vQ=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},EQ=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},yw=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},Cw=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var Ore=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new TN(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},xQ=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let d;return n<=i?(yw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),d=[new TN(e,0,n,i-n+1)]):e<=r?(yw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new TN(e,r-e+1,n,0)]):(yw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),yw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let d=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,d,p,m,h,g,A,y,E){let b=null,w=null,R=new Ore,D=r,N=n,O=h[0]-y[0]-i,Y=-1073741824,ee=this.m_forwardHistory.length-1;do{let V=O+e;V===D||V<N&&u[V-1]<u[V+1]?(p=u[V+1],g=p-O-i,p<Y&&R.MarkNextChange(),Y=p,R.AddModifiedElement(p+1,g),O=V+1-e):(p=u[V-1]+1,g=p-O-i,p<Y&&R.MarkNextChange(),Y=p-1,R.AddOriginalElement(p,g+1),O=V-1-e),ee>=0&&(u=this.m_forwardHistory[ee],e=u[0],D=1,N=u.length-1)}while(--ee>=-1);b=R.getReverseChanges(),R=new Ore,D=a,N=c,O=h[0]-y[0]-l,Y=1073741824,ee=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=O+o;V===D||V<N&&d[V-1]>=d[V+1]?(p=d[V+1]-1,g=p-O-l,p>Y&&R.MarkNextChange(),Y=p+1,R.AddOriginalElement(p+1,g+1),O=V+1-o):(p=d[V-1],g=p-O-l,p>Y&&R.MarkNextChange(),Y=p,R.AddModifiedElement(p+1,g+1),O=V-1-o),ee>=0&&(d=this.m_reverseHistory[ee],o=d[0],D=1,N=d.length-1)}while(--ee>=-1);return w=R.getChanges(),this.ConcatenateChanges(b,w)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,d=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,A=new Int32Array(g),y=new Int32Array(g),E=i-n,b=r-e,w=e-n,R=r-i,N=(b-E)%2===0;A[E]=e,y[b]=r;for(let O=1;O<=h/2+1;O++){let Y=0,ee=0;u=this.ClipDiagonalBound(E-O,O,E,g),d=this.ClipDiagonalBound(E+O,O,E,g);for(let V=u;V<=d;V+=2){V===u||V<d&&A[V-1]<A[V+1]?c=A[V+1]:c=A[V-1]+1,l=c-(V-E)-w;let H=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(A[V]=c,c+l>Y+ee&&(Y=c,ee=l),!N&&Math.abs(V-b)<=O-1&&c>=y[V])return o[0]=c,a[0]=l,H<=y[V]&&O<=1448?this.WALKTRACE(E,u,d,w,b,p,m,R,A,y,c,r,o,l,i,a,N):null}p=this.ClipDiagonalBound(b-O,O,b,g),m=this.ClipDiagonalBound(b+O,O,b,g);for(let V=p;V<=m;V+=2){V===p||V<m&&y[V-1]>=y[V+1]?c=y[V+1]-1:c=y[V-1],l=c-(V-b)-R;let H=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(y[V]=c,N&&Math.abs(V-E)<=O&&c<=A[V])return o[0]=c,a[0]=l,H>=A[V]&&O<=1448?this.WALKTRACE(E,u,d,w,b,p,m,R,A,y,c,r,o,l,i,a,N):null}if(O<=1447){let V=new Int32Array(d-u+2);V[0]=E-u+1,Cw.Copy2(A,u,V,1,d-u+1),this.m_forwardHistory.push(V),V=new Int32Array(m-p+2),V[0]=b-p+1,Cw.Copy2(y,p,V,1,m-p+1),this.m_reverseHistory.push(V)}}return this.WALKTRACE(E,u,d,w,b,p,m,R,A,y,c,r,o,l,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return Cw.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Cw.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return Cw.Copy(e,0,i,0,e.length),Cw.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(yw.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),yw.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new TN(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};f();function sct(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(cst(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(sct,"safeStringify");var Qre=!1,KIe=!0,uur=200,bQ=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new gw(e),i=e.getActiveDocument(),o=ak(i);if(!o||!o.isEmpty())return zi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let w of e.documents)w.id!==i.id&&(l.push(`RELATED DOC: ${w.getDisplayPath()}`),l.push("```patch"),l.push(...hur(w)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",d=new Or(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let w=p<c.length;l.push(`IN PROGRESS VERSION ${w?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),w&&(l.push(u),m={editRange:new Or(d.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,d.endLineNumberExclusive-1)),l.push("");let h=c.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):zi.noEdit({kind:"fetchFailure",error:new Error(sct(g.err))},n);let{result:A,ttft:y}=g.val;if(y!==void 0&&n.setTtft(y),A.trim().length===0)return zi.noEdit({kind:"noSuggestions"},n);let E=Ure(i.languageId,c,d,void 0,A,m),b=await ZIe(this._parserService,E,i,{requireEditWithinNLines:5});if(b){let w=new ss([b]);return zi.edit({edit:w},n)}else return zi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};bQ=Wd([ha(1,HE)],bQ);var wN=class extends bQ{constructor(r,n){super(wN.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return as.error({kind:"cancel"});let o=await JIe(this.ID,this._chatMLFetcher,[{role:VIe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:VIe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),as.ok({ignored:a,result:c,ttft:l})}};wN=Wd([ha(0,HE),ha(1,DA)],wN);async function JIe(t,e,r,n,i){let o=new Lre,a=!1,c,l=o.stream.map(A=>({choices:[{index:0,finish_reason:null,logprobs:null,text:A.delta.text}]})),u=fur(l,n),d=e.fetchOne(r,async(A,y,E)=>(typeof c>"u"&&(c=Date.now()),o.update(A,E),a?A.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?as.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):as.ok({ttft:c,ignored:p,result:m})}s(JIe,"fetchUntilConvergence");function ak(t){let e=new Gt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:dur(t)}s(ak,"getOrDeduceSelectionFromLastEdit");function dur(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new rr(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=nE(a,o),l=o.length-c+1;return new rr(i,l,i,l)}s(dur,"deduceSelectionFromLastEdit");async function fur(t,e){let r=pur(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],d=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let A=g.split(`
`).slice(-4,-1);if(A.length<3||n.indexOf(A.join(`
`)+`
`)<=0)continue;let E=d[m.index].substring(d[m.index].length-o);if(a.indexOf(E)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(fur,"fetchCompletionUntilConvergence");function pur(t,e){let r=[],n=[];return new K7(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(pur,"getTextAfterFirstPattern");function mur(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new xA(new Or(n,i),o)}s(mur,"createReducedLineEdit");var SN=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=mur(r,n,i);let o=new ss([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let A=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),y=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),E=A.join(`
`),b=y.join(`
`),{editDistance:w}=d(E,b);return new zIe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,w)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new vQ(this.oldLines,n),o=new vQ(this.newLines,n),a=new xQ(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(NF(this.newLines,u))return new YIe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return cct(this.languageId,this.oldLines,u);function d(p,m){let h=new EQ(p),g=new EQ(m),y=new xQ(h,g).ComputeDiff(),E=0,b=0;for(let N of y)E+=N.originalLength,b+=N.modifiedLength;let w=p.length,R=m.length,D=E+b;return{aChanged:E,bChanged:b,aLength:w,bLength:R,editDistance:D}}}},zIe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},YIe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new ss([this.edit]);{let r=this.groupInHunks();return new ss(r.map(n=>{let i=n[0],o=n[n.length-1];return new xA(new Or(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!KIe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>uur&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!XIe(new Or(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new ss([this.edit]),i=r(n);this.parseErrorCount=await IQ(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,1),e(d)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=Pre(d,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>Pre(l,this.languageId)),i=r.map(l=>Pre(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],d=i[l];if(!d)continue;let{content:p}=d;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return cct(this.languageId,this.oldLines,e)}};function XIe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(XIe,"editIsInsideEditWindow");function cct(t,e,r){let i=e.length+1,o=r.slice(0);return new SN(t,e,new Or(1,i),o).resolveDiff()}s(cct,"createPossibleEditFromLines");function Ure(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=bN.fromString(i.trimEnd()),c=o?a.some(y=>y.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((y,E)=>{l.push(new SN(t,e,y,E))},"generateEdit");function d(){n&&u(n,a)}s(d,"generateEditCompletionRange");function p(){if(c)return;let E=new Or(r.endLineNumberExclusive,e.length+1);E.length>a.length+5||u(E,a)}s(p,"generateEditAllDoc");function m(){for(let y=1;y<a.length;y++){let b=a.slice(a.length-y).join(`
`);for(let w=r.endLineNumberExclusive-1;w<e.length;w++){let D=e.slice(w,w+y).join(`
`);b===D&&u(new Or(r.endLineNumberExclusive,w+1),a.slice(0,a.length-y))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let y=[];for(let E of a){if(E.indexOf(o.omittedMessage)>=0){u(o.editRange,y.map(b=>b));return}y.push(E)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let y=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...Ure(t,e,r,n,y,o))}return g(l);function g(y){return A(y,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function A(y,E){let b=new Set,w=[];for(let R of y){let D=E(R);b.has(D)||(b.add(D),w.push(R))}return w}}s(Ure,"generatePossibleEdits");async function ZIe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Qre?await IQ(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Qre){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(ZIe,"selectBestEdit");function hur(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(hur,"summariseDocDiff");function lct(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(lct,"summarizeEditsAsUnifiedDiff");async function IQ(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(IQ,"getParseErrorCount");f();var WE=Fe(SA());f();var TQ=_0("ITokenizerProvider");var vw=class extends WE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(TQ);return new vw(n,i,o,c,r,a.get(DA))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],d=o.messages[l-1];if(u.role===WE.Raw.ChatRole.System&&d.role===WE.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===WE.Raw.ChatCompletionContentPartKind.Text&&m.type===WE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:WE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==WE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};vw=Wd([ha(3,TQ),ha(4,e1),ha(5,DA)],vw);f();var uct=Fe(SA());var qre=class extends uct.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();var eTe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Gt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new S0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},BA=class extends eTe{constructor(r){super();this.value=r;this._transformer=new KR(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new Fr(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return gur(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(Aur(r))}_validatePosition(r){if(r.line<0)return new Xo(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new Xo(n-1,o)}if(r.character<0)return new Xo(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new Xo(r.line,i):r}};function gur(t){return new Xo(t.lineNumber-1,t.column-1)}s(gur,"corePositionToVSCodePosition");function Aur(t){return new Fr(t.line+1,t.character+1)}s(Aur,"vsCodePositionToCorePosition");f();f();function dct(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(dct,"min");f();function tTe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>tTe(n,e))}}s(tTe,"toAstNode");function fct(t,e){let r=r3(e,a=>a.endExclusive>=t.start),n=Zg(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Gt(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Gt(o,t.endExclusive)),i}s(fct,"subtractRange");f();f();f();var Hre=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=aR(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=aR(e),r=aR(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=aR(e),r=aR(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=aR(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new rTe(i,e-a)}};var rTe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var wQ=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=uh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new Hre(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=uh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Xo(r.index,Math.min(r.remainder,n))}toRange(e){return new S0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Gt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new xN(this.validateRange(n.range),n.newText));return new wh(r.map(n=>new il(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new xN(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof Xo))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Xo(r,n):e}validateRange(e){return new S0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Wre=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new lh(()=>new wQ(this.text));this._originalPositionOffsetTransformer=new lh(()=>new wQ(this.originalText));this._text=new lh(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var nTe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},lk=class extends Wre{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function jre(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:d}=r[c],p=l.getText(),m=d?l.rangeToOffsetRange(d):void 0,h=pct(u,l),g=iTe.fromRootNode(h,p),A=oTe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&A.visitAll(O=>O.node.range.intersectsOrTouches(m)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(A),i.push(A.getTextFragment());let y=s(O=>m?O.range.endExclusive<m.start?m.start-O.range.endExclusive:O.range.start>m.endExclusive?3*(O.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),E=new rE(O=>m?O.children.length===0?O.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:dct(O.children.map(Y=>E.get(Y)))+1:0),b=new rE(O=>{let Y=O.parent?b.get(O.parent):Number.MAX_SAFE_INTEGER,ee=E.get(O);return Math.min(Y,ee)}),w=!!e.tryPreserveTypeChecking,R=s(O=>w&&O.node?.kind==="import_statement"?0:100*b.get(O)+O.depth+10*(y(O)/p.length),"costFn"),D=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(D!==void 0){let O=R;R=s(Y=>{let ee=O(Y);return ee===!1?!1:Y.node?D(Y.node,ee,l):ee},"costFn")}let N=A.getDescendantsAndSelf();for(let O of N){if(!O.node.node)continue;let Y=R(O.node);Y!==!1&&o.push({idx:c,node:O,cost:Y})}}o.sort(eh(c=>c.cost,th));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],d=new lk(u,l.toTextEditFromOriginal(u.getText().length)),p=d,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:fct(Gt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:tTe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(jre,"summarizeDocumentsSyncImpl");function pct(t,e,r=void 0){let n=new Gt(t.startIndex,t.endIndex),i=[],o=new nTe(r,t,n,i,e);for(let a of t.children)i.push(pct(a,e,o));return o}s(pct,"createRemovableNodeFromOverlayNode");var iTe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Gt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Gt(0,e.range.start),o=new Gt(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let d=new Gt(c,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Gt(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return yur(this.document,this.range)}getTrailingWs(){return Cur(this.document,this.range)}};function yur(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(yur,"getLeadingWs");function Cur(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(Cur,"getTrailingWs");var oTe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Ew(this.node.range,this.node.document);if(!this._surviving)return new ck("");let e=Array.from(K2(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof Ew&&c.fragment instanceof Ew){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new ck(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new ck(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)vur(r,i.fragment);return $re.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},SQ=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new il(new Gt(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof $re)for(let l of c.fragments)a(l);else c instanceof ck?i+=c.text:c instanceof Ew&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new wh(r)}},ck=class extends SQ{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Ew=class t extends SQ{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Gt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Gt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Gt(this.range.start,r.range.endExclusive),this.originalText):null}},$re=class t extends SQ{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new ck(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function vur(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof Ew&&e instanceof Ew){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(vur,"pushFragment");f();var Gre=Fe(SA());function _Q(t){if(Array.isArray(t))return t.map(r=>_Q(r));let e=(0,Gre.toMode)(Gre.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(_Q,"rawMessageToCAPI");f();f();var Vre=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new Cn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new Cn("Invalid child startIndex");if(a.endIndex>r)throw new Cn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function hct(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Eur(o,e),[c]=gct(t,a,void 0);return c.adjust(t,Act(e)),c.toOverlayNode(t,!0)}catch{return new zre(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(hct,"getStructureUsingIndentation");function gct(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=gct(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new Cn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new Cn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new zre(n,i,o),r]}s(gct,"createFoldingRangeTree");var zre=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new Cn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=sTe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=sTe(e,o,o,"LINE",[]);a&&n.push(a)}return sTe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function sTe(t,e,r,n,i){let o=t.getOffsetAtPosition(new Xo(e-1,0)),a=r<t.getLineCount()?new Xo(r,0):new Xo(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new Vre(o,c,n,i)}s(sTe,"createOverlayNode");function Eur(t,e){return xur(t,Act(e))}s(Eur,"generateFoldingRegions");function Act(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(Act,"isOffSide");function xur(t,e){let r=t.getOptions().tabSize,n=new aTe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Iur(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let d=u.endAbove-1;d-a>=1&&n.insertFirst(a,d,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(xur,"_computeRanges");var bur=65535,uk=16777215,mct=4278190080,aTe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>uk||r>uk)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new cTe(e,r)}};function Iur(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Iur,"computeIndentLevel");var cTe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>uk||a>uk)throw new Error("startLineNumber or endLineNumber must not exceed "+uk);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&uk}getEndLineNumber(e){return this._endIndexes[e]&uk}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&mct)>>>24)+((this._endIndexes[e]&mct)>>>16);return r===bur?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function dk(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(dk,"fromUnknown");var kl=Fe(SA());var Yre="current-version",fk="next-version",Cct=2,vct=10,Ect=.7,Tur=/```[^\n]*\n/,xw=class extends yN{constructor(r,n,i){super(xw.ID,[o=>new IN(o),o=>new vN(o),o=>new EN(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new Zte}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=ak(a),u=l?lTe(a,l):null,d=ak(c),p=d?lTe(c,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(Cct,vct)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new gw(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return zi.noEdit({kind:"unexpected",error:dk(l)},i)}let c=o.getArtificalDelay();return c>0&&await DE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):zi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return zi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return zi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let R={kind:"gotCancelled",message:"afterDebounce"};return zi.noEdit(R,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:A,activeDocumentLines:y}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let E=await JIe(this.ID,this.fetcher,_Q(p),{convergence:g,ignoreReplyTextBefore:Tur,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(E.isOk()?"success":E.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),E.isOk()&&typeof E.val.ttft=="number"&&o.setTtft(E.val.ttft),i.isCancellationRequested)return zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(E.isError())return E.err.kind==="cancel"?zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):zi.noEdit({kind:"fetchFailure",error:dk(E.err.err)},o);let b=E.val.result;if(b.length===0){let R=`<${fk}>
`,D=E.val.ignored.indexOf(R);D>=0&&(b=E.val.ignored.substring(D+R.length))}if(b=wur(b),b.trim().length===0)return zi.noEdit({kind:"noSuggestions"},o);let w;if(c&&l&&u){let R=Sur(A,c,l,b);if(!R||R.edits.length===0)return zi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let D=_ur(c,R);if(D.edits.length===0)return zi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Qre){let Y=await IQ(this._parserService,A.languageId,A.documentAfterEditsNoShortening.value),ee=D.apply(A.documentAfterEditsNoShortening.value);if(await IQ(this._parserService,A.languageId,ee)>Y)return zi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}w=Rur(A,D);let N=w.edits[0].lineRange.startLineNumber,O=w.edits[w.edits.length-1].lineRange.endLineNumberExclusive;if(!XIe(new Or(N,O),u))return zi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let R=Ure(A.languageId,y,m,h,b,void 0),D=await ZIe(this._parserService,R,A,{requireEditWithinNLines:100});if(!D)return zi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);w=new ss([D])}return kur(A,w)?zi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Pur(A,w)?zi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):Dur(A,w)?zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Bur(A,w)?zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):zi.edit({edit:w},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await DE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=ak(i);if(l===null)return;let u=lTe(i,l),d=new BA(i.documentAfterEditsNoShortening.value),p=await Mur(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let ee=Nur(i.documentAfterEditsLines,l.startLineNumber),V=Math.max(1,Math.min(ee,l.startLineNumber-Cct)),H=l.startLineNumber-V,U=Math.min(c.length,l.endLineNumber+vct),X=U-l.endLineNumber,K=u.line-H,j=u.line+X,W=new S0(K,0,j,d.getLineLength(j));return{firstEditableLineInShortenedDocument:V,lastEditableLineInShortenedDocument:U,editWindow:W}}(),A=jre(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],y=new Or(1,m),E=new Or(m,h+1),b=A.text,{messages:w,prediction:R,editWindowIsInPrompt:D}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),N=b.split(/\r\n|\r|\n/).length,O=A.projectRange(g),Y=A.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:A,editWindowAllowedEditLineRange:new Or(O.start.line+1,O.end.line+2),allowedEditLineRange:new Or(m,h+1),messages:w,prediction:R,editWindowIsInPrompt:D,activeDocument:i,activeDocumentLines:c,completionPrefixRange:y,completionRange:E,convergence:b,expectedConvergencePrefix:Y.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await vw.create(this._instantiationService,dTe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(ene)?.prediction,c=!!o.metadata.get(Jre);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};xw=Wd([ha(0,DA),ha(1,HE),ha(2,e1)],xw);function wur(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${fk}>`,`
`),t=e(t,`\`\`\`
</${fk}>`,`
`),t=e(t,`</${fk}>`,`
`),t}s(wur,"removeSuffixFromReply");function lTe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new BA(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(lTe,"getCursorPositionInOuterDocument");function Sur(t,e,r,n){let i=bN.fromString(e.text),o=bN.fromString(n.trimEnd()),c=new SN(t.languageId,i,new Or(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=KIe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Sur,"generateSummarizedEditWindowEdit");function _ur(t,e){let r=e.toEdit(new Xl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(_ur,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Rur(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ta.replace(new Gt(a,a+i.replaceRange.length),i.newText)}),n=new _d(t.documentAfterEdits,sa.create(r));return ss.fromEdit(n)}s(Rur,"convertOuterDocumentEditToProjectedEdit");function kur(t,e){let r=e.toEdit(t.documentAfterEdits),n=xct(t.documentAfterEdits.value,r),i=new Kre,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(xct(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(kur,"editWouldUndo");function Pur(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Sct(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Pur,"editWouldDeleteWhatWasJustInserted");function Dur(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Sct(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(jIe(i,t.languageId))return!0}return!1}s(Dur,"editWouldDeleteAComment");function Bur(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return uTe(o,i)/i.size>.8}s(Bur,"editWouldDuplicateExistingLines");function Sct(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(Sct,"editIsDeletion");function Nur(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(Nur,"findLineNumberAboveWithContent");var Kre=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Ict(this.inserted,e.inserted),Ict(this.deleted,e.deleted))}isUndoneBy(e){let r=Tct(e.inserted,e.deleted),n=Tct(e.deleted,e.inserted),i=uTe(n,this.inserted),o=uTe(r,this.deleted);return n.size>6&&i/n.size>Ect||r.size>6&&o/r.size>Ect}};function xct(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of bct(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of bct(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Lur(c.newText,l.newText)))}return new Kre(r,n)}s(xct,"getInformationDelta");function Lur(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Lur,"trimOverlap");function bct(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(bct,"to4grams");function Ict(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Ict,"setUnion");function Tct(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(Tct,"setMinus");function uTe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(uTe,"setIntersectionCount");async function Mur(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||hct(new BA(e.getText()),e.languageId,void 0)}s(Mur,"getStructure");var dTe=class extends kl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${fk}>`,`\`\`\`${o}`,`${i}`,"```",`</${fk}>`].join(`
`),c=(0,kl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new ene(a)}),vscpp(kl.SystemMessage,{priority:1e3},vscpp(qre,null),this._getInstructions()),vscpp(kl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(kl.Chunk,{priority:300},vscpp(Xre,{doc:l}))):vscpp(kl.Chunk,{priority:100+u},vscpp(Xre,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(kl.Chunk,{priority:300},vscpp(Zre,{doc:l}))):vscpp(kl.Chunk,{priority:200+u},vscpp(Zre,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(kl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Jre}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Yre,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Yre,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Yre,"> and </",Yre,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",fk,">.")}},Jre=class extends kl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Xre=class extends kl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Zre=class extends kl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...lct(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},ene=class extends kl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};f();f();function _ct(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(_ct,"findIndexes");function Fur(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=_ct(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],A=r[p];if(g===A)h--,p--;else if(A.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],d=_ct(t,e[c]).slice(-n).reverse();for(let p of d){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],A=t[p];if(g===A)h++,p++;else if(A.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(Fur,"deduplicateEditRegion");function Rct(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:Fur(i,r.split(/\r?\n/),o).join(`
`)}}s(Rct,"postProcessUpdatedEditWindow");f();var tne=Fe(SA());function kct(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===tne.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===tne.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(kct,"getTextPart");function Our(t){return{type:tne.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Our,"toTextPart");function fTe(t){return[Our(t)]}s(fTe,"toTextParts");f();var rne=_0("IDiffService");var ATe=Fe(SA());f();var nne="<|cursor|>",pk="<|code_to_edit|>",_N="<|/code_to_edit|>",Dct="<|area_around_code_to_edit|>",Bct="<|/area_around_code_to_edit|>",Qur="<|current_file_content|>",Uur="<|/current_file_content|>",qur="<|edit_diff_history|>",Hur="<|/edit_diff_history|>",Wur="<|recently_viewed_code_snippets|>",$ur="<|/recently_viewed_code_snippets|>",jur="<|recently_viewed_code_snippet|>",Gur="<|/recently_viewed_code_snippet|>",Nct=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${pk} and ${_N} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${nne}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${pk} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${pk} and ${_N} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${pk} or ${_N} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Lct(t,e,r,n){let i=t.getActiveDocument(),o=Yur(t,n),a=Vur(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${Wur}
${o}
${$ur}

${Qur}
current_file_path: ${c}
${e}
${Uur}

${qur}
${a}
${Hur}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${nne}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${pk}\` and \`${_N}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Lct,"getUserPrompt");function Vur(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=zur(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(Vur,"getEditDiffHistory");function zur(t){let e=[],r=ss.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(zur,"generateDocDiff");function Pct(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[jur,n,e,Gur].join(`
`)}s(Pct,"formatCodeSnippet");function Yur(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);n&&(p=p.map((y,E)=>`${E+1}|${y}`));let m=p.map(y=>e(y)+1),h=e(Pct(d.path,"",!0)),g=m.reduce((y,E)=>y+E,0)+h,A=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,A=!0;p.length>0&&(l+=g,c.push(Pct(d.path,p.join(`
`),A)))}return c.join(`

`)}s(Yur,"getRecentCodeSnippets");function pTe(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(pTe,"truncateCode");var Mct=2,Fct=10,mTe=15,hTe=1e3,gTe=2e3;var Ph=class extends yN{constructor(r,n,i){super(Ph.ID,[o=>new IN(o),o=>new vN(o),o=>new EN(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new gw(r);try{if(r.xtabEditHistory.length===0)return zi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new zi(o,i.build(o))}catch(o){return zi.noEdit({kind:"unexpected",error:dk(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=ak(o);if(a===null)return as.error({kind:"uncategorized",error:dk(new Error("NoSelection"))});let c=s(ae=>Math.floor(ae.length/4),"computeTokens"),l=new Fr(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),d=o.documentAfterEdits.value,p=d.substring(0,u)+nne+d.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-mTe),A=Math.min(h.length,m+mTe+1),y=Mct,E=Fct,b=Math.max(0,m-y),w=Math.min(h.length,m+E+1),R=o.documentAfterEdits.getTransformer().getOffsetRange(new rr(b,0,w,0)),D;D=d.split(/\r?\n/).slice(b,w);let N=[b,w],O=h.slice(b,w),Y=[Dct,...h.slice(g,b),pk,...O,_N,...h.slice(w,A),Bct].join(`
`),ee=Y,V;{let ae=c(Y),te=0;if(ae>=gTe)V=Y,te=g;else{let pe=Math.floor((gTe-ae)/2),[Ae]=pTe(h.slice(0,g),!0,pe),[,Oe]=pTe(h.slice(A),!1,pe);te=Math.max(Ae,m-hTe);let Te=Math.min(Oe+A,m+hTe+1);V=[...h.slice(te,g),Y,...h.slice(A,Te)].join(`
`)}}let H=Lct(r,V,ee,c),U=[{role:ATe.Raw.ChatRole.System,content:fTe(Nct)},{role:ATe.Raw.ChatRole.User,content:fTe(H)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return as.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let X=new I3;i.setFetchStartedAt();let K,j=await this._endpointProvider.getEndpointInfo(this.ID),W=await this._chatMLFetcher.fetchOne(_Q(U),async(ae,te,pe)=>{K===void 0&&(K=X.elapsed())},{id:j.id,name:j.name},{temperature:0},n);if(W.type==="canceled")return i.setFetchResultIfNotSet("cancelled"),as.error({kind:"gotCancelled",message:"afterFetchCall"});if(W.type==="quotaExceeded")return i.setFetchResultIfNotSet("failure"),as.error({kind:"quotaExceeded"});if(W.type!=="success")return i.setFetchResultIfNotSet("failure"),as.error({kind:"fetchFailure",error:dk(W)});i.setFetchResultIfNotSet("success"),K&&i.setTtft(K),i.setResponse(W.value);let J=Ph.getBacktickSection(W.value);return await this.generateReturnEditFormat(o,R,D.join(`
`),J,N,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Rct(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=l.split(/\r?\n/),p=u.changes.map(m=>new xA(new Or(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?as.error({kind:"noSuggestions"}):as.ok({editWindow:n,edit:new ss(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,Ph.DEBOUNCE_MS-n);r.setDebounceTime(i),await DE(i)}};Ph=Wd([ha(0,rne),ha(1,DA),ha(2,Fre)],Ph);f();var ine=class t extends xs{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new rO,ah(this,r.openDocuments,(i,o)=>{o.add(iE(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Tl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new _d(u,c);if(l===void 0){this.pushToHistory(i.id,d);return}let p=l.entry.edit,m=ss.fromEdit(p),h=ss.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),A=new _d(p.base,g);this.pushToHistory(i.id,A)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};f();f();var yTe=Fe(require("crypto"));var RQ=yTe.randomUUID.bind(yTe);var Gct=Fe(SA()),bTe=Fe(tQ());f();var one=_0("ISnippyService");f();f();var kQ=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),sne=65;function Jur(t){let e=0,r;kQ.lastIndex=0;do if(r=kQ.exec(t),r&&(e+=1),e>=sne)break;while(r);return e}s(Jur,"lexemeLength");function Xur(t,e){let r=0,n;kQ.lastIndex=0;do if(n=kQ.exec(t),n&&(r+=1,r>=e))return kQ.lastIndex;while(n);return t.length}s(Xur,"offsetFirstLexemes");function Oct(t,e){let r=t.split("").reverse().join(""),n=Xur(r,e);return r.length-n}s(Oct,"offsetLastLexemes");function CTe(t){return Jur(t)>=sne}s(CTe,"hasMinLexemeLength");f();f();var Qct;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Qct||={});var vTe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(vTe||={});var Uct;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Qct.is)}e.is=t,s(t,"is")})(Uct||={});var ETe;(e=>{function t(r){if(vTe.is(r))return as.error(r);if(Uct.is(r))return as.ok(r)}e.to=t,s(t,"to")})(ETe||={});var qct;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(qct||={});var Hct;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Hct||={});var Wct;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Wct||={});var $ct;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(qct.is)&&"page_info"in r&&Hct.is(r.page_info)&&"license_stats"in r&&Wct.is(r.license_stats)}e.is=t,s(t,"is")})($ct||={});var xTe;(e=>{function t(r){if(vTe.is(r))return as.error(r);if($ct.is(r))return as.ok(r)}e.to=t,s(t,"to")})(xTe||={});var ane=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,ETe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,xTe.to)}async fetch(e,r,n){let i=this.ctx.get(yn),o=await this.ctx.get(Yr).getToken(),a=Oy(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...tp(this.ctx),"X-GitHub-Api-Version":Qy},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return n(d)}};var jct=new It("[CODE REFERENCING]"),RN=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(ane,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(yr).getTextDocument({uri:e.toString()});if(!a){jct.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:A,license_stats:y}=g.val;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){jct.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let A=Array.from(g).sort(),y=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,E={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:y,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:A.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(lf).handleIPCodeCitation(this.ctx,E)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=sa.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!CTe(l)){let m=a.value.slice(0,o.start),h=Oct(m,sne);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!CTe(l))return;let u=a.getTransformer(),d=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};RN=Wd([ha(1,e1)],RN);async function Vct(t){let e=new Nre;return e.define(Mre,new ITe(t)),e.define(rne,new I0),e.define(HE,new Wp(TTe,[!0])),e.define(one,new Wp(RN,[t])),e.define(DA,await STe.Create(t)),e.define(TQ,new Wp(_Te)),e.define(Fre,new wTe(t)),e.seal()}s(Vct,"createInstantiationService");var ITe=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=qr.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},TTe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},wTe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==Ph.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Nt).updateExPValuesAndAssignments();return{id:this.ctx.get(Nt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},STe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Go.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=RQ(),l=await this.ctx.get(s0).fetchAndStreamChat(this.ctx,a,Ly.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,d)=>{if(r)return await r(u,0,{text:d.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:kct(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},_Te=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new cne("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new cne(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},cne=class{constructor(e){this.mode=Gct.OutputMode.Raw;this.tokenizer=$i(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===bTe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===bTe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var lne=class extends xs{constructor(r){super();this.workspace=r;this._garbageCollector=new PTe(20);this._documentCaches=new Map;ah(this,r.openDocuments,(n,i)=>{let o=new RTe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(iE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(bc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},RTe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new kTe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},kTe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},PTe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var PQ=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},une=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new PQ("",null),this._tail=new PQ("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new PQ(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var dne=class extends xs{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new une(50);ah(this,r.openDocuments,(n,i)=>{let o=new DTe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(iE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(bc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},DTe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var fne=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},kN=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:y,isShown:E,acceptance:b,logProbThreshold:w,documentsCount:R,editsCount:D,activeDocumentEditsCount:N,promptLineCount:O,promptCharCount:Y,isDefaultEndpoint:ee,hadLowLogProbSuggestion:V,nonTerminatingError:H,nEditsSuggested:U,kthEditPicked:X,lineDistanceToMostRecentEdit:K,debounceTime:j,hasNextEdit:W,nextEditLogprob:J,maxLinesPerEdit:ie,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchTime:Oe,fetchResult:Te,fetchError:Je,fetchStartedAfterMs:Me}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:H,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchResult:Te,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(ee),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:this._boolToNum(y),isShown:this._boolToNum(E),logProbThreshold:w,documentsCount:R,editsCount:D,activeDocumentEditsCount:N,promptLineCount:O,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(V),nEditsSuggested:U,kthEditPicked:X,lineDistanceToMostRecentEdit:K,debounceTime:j,fetchStartedAfterMs:Me,fetchTime:Oe,hasNextEdit:this._boolToNum(W),nextEditLogprob:J,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};kN=Wd([ha(0,Mre)],kN);f();var PN=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var mk=!1,zct=300,DN=class extends xs{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new lne(this._workspace);this._nextEditCache=new dne(this._workspace);this._recentlyShownCache=new LTe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;ah(this,this._workspace.openDocuments,(u,d)=>{d.add(oCe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(kN)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new fne(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??RQ());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),d,p,m,h;if(l)d=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await DE(zct);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await DE(zct);else{h=new NTe,c.setHeaderRequestId(h.headerRequestId);let y=o.value.get();p=y;let E=await this.fetchNextEdit(h,r,c,i),b=y.value!==o.value.get().value;if(E.isError())switch(E.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=E.err.error;break;default:tO(E.err)}else if(!b){let w=E.val;w.isEmpty()||(d=w.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||w.edits.length>1)&&this._nextEditCache.setNextEdits(r,w,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!d)return this._telemetrySender.sendTelemetry(c),new PN(void 0);if(this._rejectionCollector.isRejected(r,d))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new PN(void 0);Tl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",A=new PN({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(A,c),d.isNeutral()||this._recentlyShownCache.add(r,a,[d,h]),A}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=sa.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=BTe(r.lastEdits.swap(c)),d=l.compose(),p=new lk(new BA(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new Xl(o.text),g=GC.fromEdit(new _d(m,d)).removeCommonSuffixPrefixLines(),A=l.edits.at(-1)?.getNewRanges().at(0),y;A&&(y=new Xl(p.text).getTransformer().getRange(A));let E=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),w=s(O=>{let ee=new GC(new Xl(p.text),O).toEdit();return Yct(ee,p)},"toEditOnDocumentAfterEditsNoShortening"),R=s(O=>p.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),D=s(O=>p.project(O),"toProjectedOffset"),N=new AQ(r.docId,b,r.languageId,g.base.getLines(),g.edit,y,m,l,i,w,R,D,r.lastEdit.base.getTextLength().lineCount,a,E);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return as.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=BTe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(O=>this._shortenDocument(O,l))),d=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new Rre(r.headerRequestId,u.map(O=>O.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,A;if(h){g=h,mk&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let O=this._hookupCancellation(g,o);try{A=await g.result}finally{O.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let O=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let Y=this._hookupCancellation(g,o);try{A=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(A)}catch(ee){throw g.setResultError(ee),ee}finally{Y.dispose(),O()}}i.setStatelessNextEditTelemetry(A.telemetry);let y=A.nextEdit;if(y.isError())return y;let E=y.val.edit;if(E.edits.length===0)return as.error({kind:"noSuggestions"});let w=new GC(new Xl(d.projectedDocument.text),E).toEdit(),R=Yct(w,d.projectedDocument),D=w.edits.length===R.edits.length?y.val.permutation:void 0,N=R.decompose(D);return as.ok(N)}_hookupCancellation(r,n){let i=new Mu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new cN);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){mk&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){mk&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){mk&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}mk&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(bc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){Cte(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new lk(new BA(r.base.value),new wh([])),clippedRange:new Or(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Gt(0,0)),o=Or.fromRange(i);function a(p,m){return new Or(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new Or(1,n.textLength.lineCount+1),l=BTe(c.intersect(a(o,100))),u=Or.subtract(c,l);return{document:new lk(new BA(r.base.value),new wh(u.map(p=>il.delete(n.getOffsetRange(new rr(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new gQ("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await rdr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new BA(n.base.value),a=n.edit.edits.at(0)?.range??new Gt(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Gt(h.range.start,g.range.endExclusive))}let l=Kct(o.offsetRangeToRange(a)),u=jre(1e4,{costFnOverride:s((h,g,A)=>{let y=Kct(A.offsetRangeToRange(h.range)),E=tdr(l,y);return E>100?!1:E},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],d=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(d).lineNumber,m=new Or(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};DN=Wd([ha(4,HE),ha(5,e1),ha(6,one)],DN);function Yct(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return sa.fromOffsetEdit(r)}s(Yct,"projectBackEdit");function Kct(t){return new Or(t.start.line+1,t.end.line+1)}s(Kct,"lineRangeFromVSCodeRange");function tdr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(tdr,"lineRangeDist");async function rdr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(rdr,"getStructure");function BTe(t){if(!t)throw new Cn("expected value to be defined, but it was not");return t}s(BTe,"assertDefined");var NTe=class{constructor(){this.headerRequestId=RQ()}static{s(this,"NextEditFetchRequest")}},LTe=class{constructor(){this._cache=new pK(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var Jct=10,NA=class{constructor(e){this.lastResultsById=new Ur(Jct);this.lastResultsByUri=new Ur(Jct);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=kA.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(yr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),d=l.positionAt(c.result.edit.range.endExclusive),p=gr(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Vct(this.ctx),r=!1;try{let a=await this.ctx.get(Nt).updateExPValuesAndAssignments();r=ndr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?Ph:xw),i=this.ctx.get(oA),o=new wte(i);return await C2.catch(()=>{}),e.createInstance(DN,i,n,o,new ine(i))}};function ndr(t,e){let r=Wi(t,qt.NESXTab);return r!==void 0?r:t.get(Nt).enableNESXTab(e)}s(ndr,"shouldUseXTab");f();var Xct=Fe(di());var pne=class extends oA{constructor(r){super();this._openDocuments=iA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(yr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=kA.create(r);return this.addDocument({id:o,initialValue:i,languageId:sR.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=kA.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=kA.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=kA.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new MTe(r.id,new Xl(r.initialValue??""),[],r.languageId??sR.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(yr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},MTe=class extends LJ{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new Fr(e.lineNumber+1,e.column+1));this.updateSelection([new Gt(r,r)])}editFromLspContentChanges(e){return new VC(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(Xct.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new Fr(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new Fr(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new Cn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return sa.replace(new Gt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};f();var LA=class{static{s(this,"AuthenticationService")}};f();var Zct=require("crypto"),t1=Fe(require("fs/promises")),elt=require("os"),$E=Fe(require("path"));var jE=class{constructor(e){this.ctx=e;this.logger=new It("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=$E.extname(__filename)===".ts"?$E.resolve(__dirname,"../../../packages/ripgrep/bin"):$E.resolve(__dirname,"./bin"),o=$E.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await t1.readFile(o),c=(0,Zct.createHash)("sha256").update(a).digest("hex"),l=$E.join((0,elt.homedir)(),".cache/pkg",c);await t1.mkdir(l,{recursive:!0});let u=Hi(Al(o)),d=$E.join(l,u);try{await t1.stat(d)}catch{await t1.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await t1.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var tlt=require("child_process"),FTe=require("perf_hooks");var GE=new It("ripgrepProcessManager"),MA=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,GE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){GE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){GE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){GE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){GE.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}GE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:yte(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);GE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=FTe.performance.now();GE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,tlt.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let d=FTe.performance.now()-r;GE.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var BN=class extends gC{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var rlt=100,nlt=1e3*60*5;function ilt(t){let e=new OTe(t);t.get(wc).registerContextProvider(e),t.get(pC).add(e.id)}s(ilt,"registerRelatedFilesShim");var OTe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new YS(rlt,nlt);this.relatedFilesCache=new YS(rlt,nlt);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Nt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await qJ(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of c.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){qv(this.ctx,o,"relatedFilesShim")}}};f();f();f();var mne=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new Oa;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var Dd=class{constructor(e){this.ctx=e;this.watchers=new Ur(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Kr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,i){return this.getWatcher(e)?.onFileChange(hl(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,i)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var NN=class{static{s(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},idr="workspaceLifecycleManager",Bd=new It(idr),r1=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ws(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?Bd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(Bd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):Bd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);Bd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(Fp).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(yr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){Bd.debug(r,"No workspaces to add.");return}Bd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];Bd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(d=>d.uri===c.uri)===l&&!u.some(d=>t.isSubfolder(c,d)));Bd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));Bd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));Bd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){Bd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(Dd).terminateWatching(c);for(let u of this.activeListeners)Bd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.didRemoveWorkspace(c)}for(let c of o){if(!c.uri)continue;Bd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(Dd);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){Bd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.didTerminateWorkspaceSubfolders(c,u)}for(let d of this.activeListeners)Bd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,d.didChangeFiles.bind(d))}}for(let c of this.activeListeners)for(let l of o)Bd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.didAddWorkspace(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(Dd).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function hne(t){t.set(r1,new r1(t))}s(hne,"setupWorkspaceLifecycleListener");f();var slt=require("child_process");var gne=class extends _h{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,slt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){Wte.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=vs(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?BE.branch(o):BE.detachedHead()}}extraArgs(){return[]}};f();var Ane=class extends _h{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(To),i=Mo(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;Wte.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return BE.branch(r)}else return this.isCommitSha(e)?BE.detachedHead():BE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};f();f();var yne=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var odr=64;var Iw={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},n1={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},QTe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,odr)}},bw=class extends QTe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Li=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},hk=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},gk=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var ho=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},alt=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),Cne=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(Cne||{}),clt=I.Object({result:I.Enum(Cne)});var Dh=class extends bw{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:Iw,type:"shared"})}};f();var sdr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),adr=new Map;for(let[t,e]of sdr)adr.set(e,t);f();function LN(t){return`[${Hi(t)}](${t})`}s(LN,"formatUriForFileWidget");function i1(t){let e=cdr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(i1,"resolvePathInput");function cdr(t){if(t.startsWith("/")||ult()&&udr(t)||ult()&&t.startsWith("\\\\"))return Al(t)}s(cdr,"resolveFsUri");function ult(){return process.platform==="win32"}s(ult,"isWindows");function ldr(t){return t>=65&&t<=90||t>=97&&t<=122}s(ldr,"isWindowsDriveLetter");function udr(t){return ldr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(udr,"hasDriveLetter");function DQ(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Li?r.value:r instanceof gk?"":r instanceof hk?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(DQ,"parseToolResultToString");function vne(t){let{content:e}=t;return{message:DQ(e)}}s(vne,"formatToolErrorResult");function dlt(t){let{content:e}=t;return{data:e.map(r=>r instanceof Li?{type:"text",value:r.value}:r instanceof gk?{type:"text",value:"<unsupported>"}:r instanceof hk?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(dlt,"formatToolSuccessResult");var Ene=class extends Dh{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new ho([new Li(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=i1(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new lN(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(Nd).getToolByNameAndProvider("insert_edit_into_file",n1);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(Nd).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;if(i){let d=await Tc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,d,o)})}let a=DQ(n.content),c=QD({uri:i1(r.input.filePath),languageId:"UNKNOWN"}),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new Qp({code:a,languageId:c,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new ho([new Li(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i){SGe(e.ctx,"agentPanel",{requestSource:i?.requestSource??"",chatRequestModel:i?.chatRequestModel??"",mapper:i?.mapper??"",headerRequestId:i?.headerRequestId??""},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=i1(n.filePath);return{progressMessage:`Editing ${LN(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var flt=new It("findFilesTool"),xne=class t extends Dh{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new ho([new Li("Cancelled")],"cancelled");i=await e.ctx.get(jE).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new ho([new Li("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(MA),u={},d=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{flt.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let A=await l.execute(i,["--files","-g",o],n,{cwd:Va(g.uri)},t.timeOutInSeconds*1e3);flt.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${A}`),u[g.uri.toString()]=A.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>`${Va(Mo(g.uri,y))}`)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${y}`)}});try{await Promise.all(d)}catch(g){let A=g instanceof Error?g.message:"An unknown error occurred";return new ho([new Li(A)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let A in u)u[A].length>0&&m>0&&(p.push(u[A].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new ho([new Li(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new ho([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var plt=new It("findTextInFilesTool"),bne=class t extends Dh{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new ho([new Li("Cancelled")],"cancelled");i=await e.ctx.get(jE).resolvePath()}catch(y){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(y)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new ho([new Li("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(MA),p={},m=u.map(async y=>{if(n.isCancellationRequested)throw new Error("Canceled");try{plt.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${y.uri.toString()}`);let E=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",Va(y.uri)],b=await d.execute(i,E,n,{cwd:Va(y.uri)},t.timeOutInSeconds*1e3);plt.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${y.uri.toString()} with results: ${b}`),p[y.uri.toString()]=b.split(`
`).map(w=>w.trim()).filter(w=>w.length>0)}catch(E){let b=E instanceof Error?E.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${y.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";return new ho([new Li(E)],"error")}let h=[],g=l;for(;g>0;){let y=!1;for(let E in p)p[E].length>0&&g>0&&(h.push(p[E].shift()),g--,y=!0);if(!y)break}let A=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new ho([new Li(A)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new ho([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var Ine=class extends Dh{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=i1(i),c=await e.ctx.get(To).readDirectory(o.toString());return c.length===0?new ho([new Li("Folder is empty")],"success"):new ho([new Li(c.map(([l,u])=>`${l}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=i1(e.input.path);return{progressMessage:`Reading directory ${LN(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var Tne=class extends Dh{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=i1(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(vn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let d=new Qp({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new ho([new Li(d.renderAsString(`
`))],"success")}else return new ho([new Li(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new ho([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=i1(n.filePath);return{progressMessage:`Reading file ${LN(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function mlt(){return[new Ine,new Tne,new Ene,new xne,new bne]}s(mlt,"getAllClsTools");var Nd=class{constructor(e){this.ctx=e;this._toolRegistry=new yne;for(let r of mlt())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new kc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new ho([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new kc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(Iw.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(Iw.id)?.splice(e.get(Iw.id)?.indexOf(r)??0,1);let n=e.get(n1.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(n1.id)?.splice(e.get(n1.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(n1.id)??[],a=e.get(Iw.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==Iw.id&&l!==n1.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};f();f();var Ak=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var Alt=require("crypto"),UTe=require("fs"),qTe=Fe(require("path"));var hlt="symbolDatabaseLookup",glt="multiLanguageContextProviderDocumentSymbols",yk=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(hlt,e);return r||(r=await this.createDBFile(e)),qTe.default.join(this.persistenceManager.directory,glt,r)}async init(){let e=qTe.default.join(this.persistenceManager.directory,glt);await this.createIfNotExists(e)}async dirExists(e){try{return await UTe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await UTe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,Alt.randomUUID)()}.db`;return await this.persistenceManager.update(hlt,e,r),r}async deleteDBFile(e){}};f();f();var BQ=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};f();f();f();var wne=Fe(require("path")),ylt=require("worker_threads");function Clt(t,e){return new ylt.Worker(wne.default.resolve(wne.default.extname(__filename)!==".ts"?__dirname:wne.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(Clt,"createWorker");f();var Sne=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var vlt=Fe(di());var _ne="main.js",Rne=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=Clt(_ne,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new Sne(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new cY(this.id++),vlt.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new oY(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new sY(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new aY(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new nY(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new iY(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new rY(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(_ne+"'")&&(r=new Error(`Failed to load ${_ne}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${_ne} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var NQ=Fe(di());var $p=new It(lT),Ck=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){$p.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,NQ.CancellationToken.None);return}$p.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new Rne(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{$p.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await fdr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,NQ.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{$p.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){$p.debug(this.ctx,`indexing workspace ${e}`);let r=gge.map(d=>`*${d}`);if(r.length===0)return;let i=`**/${gge.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(wp),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,NQ.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));$p.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),$p.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{$p.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,NQ.CancellationToken.None)}catch(n){$p.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return kqe(e)}};async function fdr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(fdr,"createIndexableWorkspaceFolder");f();f();var Elt=100,pdr=5e3,kne=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),d=this.get(n,i,r,u);if(d)return this.incrementRefCount(d),l.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(r,n,i,o,c,l);let p=new Fn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return d=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(d),l.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>Elt)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>pdr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>Elt&&(u=r);let d={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:gr(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Pne=class{constructor(e){this.id=lT;this.selector=Array.from(Hz.keys()).map(e=>({language:e}));try{this.documentManager=e.get(yr),this.resolver=new HTe(this.documentManager,e)}catch(r){throw $p.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},HTe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new kne}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(Ak).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=CC(o,a);l=l.applyEdits(c);let u=WGe(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return $p.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(Sz(o))return[];throw $p.error(this.ctx,"Failed to get context",o),o}}};var LQ=class extends NN{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(r1).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(wc).providers.some(r=>r.id===lT)){let r=this.ctx.get(yk);this.fileWatcher=new WTe([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new Ck(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new $Te(this.ctx),this.ctx.set(BQ,this.fileWatcher),this.ctx.set(wp,this.fileSearch),this.ctx.set(Ck,this.multiLanguageContextIndexWatcher),this.ctx.get(wc).registerContextProvider(new Pne(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Nt).updateExPValuesAndAssignments(),n=tJ(this.ctx,r);return n.includes(lT)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},WTe=class extends BQ{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},$Te=class extends wp{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(Dd).getWatchedFiles(n)).map(a=>this.ctx.get(yr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var jTe=class extends Ak{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new LQ(e),e.set(LQ,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function xlt(t){let e=t.get(Bi),r=new yk(e);t.set(yk,r),t.set(Ak,new jTe(t))}s(xlt,"setupMultiLanguageContextProviderFeature");f();f();f();var o1=new Map;o1.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});o1.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});o1.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});o1.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});o1.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});o1.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var hdr=new It("sdk");function Dne(t,e){o1.has(t.get(dn).getEditorPluginInfo().name)||hdr.warn(t,...e)}s(Dne,"deprecationWarning");var ymt=Fe(AD()),$A=Fe(Kg());f();f();f();var xr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Gu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(blt(e))}};function rt(t,e){let r=zs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=blt(r.Errors(o));return[null,{code:xr.InvalidParams,message:a}]}return e(n,i,o)}}s(rt,"addMethodHandlerValidation");function blt(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(blt,"createErrorMessage");f();var GTe=Fe(di());f();var s1=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Bne="github.copilot.finishDeviceFlow",VTe=class extends s1{constructor(){super(...arguments);this.name=Bne;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(On).pendingSignIn;if(!i)throw new GTe.ResponseError(xr.InvalidRequest,"No pending sign in");try{await this.ctx.get(wu).open(i.verificationUri)}catch(o){rp.warn(this.ctx,"Failed to open",i.verificationUri),rp.exception(this.ctx,o,Bne)}try{return await i.status}catch(o){throw new GTe.ResponseError(xr.DeviceFlowFailed,String(o))}finally{this.ctx.get(On).pendingSignIn=void 0}}},Ilt=[VTe];f();f();var Os=class extends Ur{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var MQ="github.copilot.didAcceptCompletionItem",zTe=class extends s1{constructor(){super(...arguments);this.name=MQ;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(Os).get(n);return o?(F3(this.ctx,o),!0):!1}},Tlt=[zTe];f();var gdr="github.copilot.didAcceptNextEditSuggestionItem",YTe=class extends s1{constructor(){super(...arguments);this.name=gdr;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(NA).handleAcceptance(n),!0}},wlt=[YTe];f();var JTe="github.copilot.didAcceptPanelCompletionItem",KTe=class extends s1{constructor(){super(...arguments);this.name=JTe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(Os).get(i);return a?(mO(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full",acceptedLength:a.displayText.length,acceptedLines:fR(a.displayText).length},a.copilotAnnotations),!0):!1}},Slt=[KTe];var Adr=[...Ilt,...Tlt,...wlt,...Slt];function _lt(t,e){let r=new Map;for(let n of Adr){let i=new n(t),o=zs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=zE(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new Gu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(_lt,"registerCommands");f();var Tw=class extends E2{constructor(r){super(new LD,new Map);this.envSettings=new Map;this.env={...r},["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(i=>{for(let o of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let a=`${o}${ydr(i.replace(/^Debug/,""))}`;a in this.env&&this.envSettings.set(qt[i],this.env[a])}})}static{s(this,"AgentConfigProvider")}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function ydr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(ydr,"camelCaseToSnakeCaseAllCaps");var Cdr="unknown-editor",Rlt="unknown-editor-plugin",Nne=class extends dn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:Cdr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:Rlt,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function klt(t){return t.getEditorPluginInfo().name!==Rlt}s(klt,"hasValidInfo");f();var YE=Fe(Kg());var vdr=new Map([[4,YE.MessageType.Log],[3,YE.MessageType.Info],[2,YE.MessageType.Warning],[1,YE.MessageType.Error]]),Lne=class extends Oc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!_X(e)&&n!=="console")return;let o={type:vdr.get(r),message:dYe(n,...i)},a=e.get(kr).connection;try{a.sendNotification(new YE.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof YE.ConnectionError)return;throw c}}};f();var Plt=Fe(Jc());var Mne=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(kr).connection.sendNotification(new Plt.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function Dlt(t){t.get(Ad).setCustomReporters(new Mne(t),new Mne(t,!0))}s(Dlt,"setupRedirectingTelemetryReporters");f();f();var Fne=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var FQ=Fe(AD());var FN=class extends Fne{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(dn).getEditorPluginInfo();return await e.get(Bi).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Bi).listSettings()).length>0}async markInstalled(e){let r=e.get(dn).getEditorPluginInfo();await e.get(Bi).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(dn).getEditorPluginInfo(),n=await e.get(Bi).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,FQ.gt)((0,FQ.coerce)(r.version),(0,FQ.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(dn).getEditorPluginInfo();await e.get(Bi).delete("versions",r.name),(await e.get(Bi).listKeys("versions")).length===0&&await e.get(Bi).deleteSetting("versions")}};f();var XTe=Fe(require("path")),One=Fe(Jc());var Edr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},a1=class t{constructor(e){this.ctx=e;this.#e=new Oa;this.onDidChangeWatchedFiles=this.#e.event}static{s(this,"LspFileWatcher")}#e;static{this.requestType=new One.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(kr).connection}init(){this.ctx.get(ps).getCapabilities().watchedFiles&&this.connection.onNotification(One.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(ps).getCapabilities().watchedFiles)return Edr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=XTe.extname(l).toLowerCase();if(!b2.includes(u)){c.push({uri:l});continue}let d=await this.getValidDocument(l);if(d===void 0){a.push({uri:l});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=XTe.extname(o.uri).toLowerCase();if(!b2.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(vn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var xdr=I.Object({providerName:I.String()});async function bdr(t,e,r){try{let{providerName:n}=r,i=tT(n);if(i!==0)return[null,{code:xr.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${i}`}];let o=new Il(t.get(Bi)),a=await o.getStoredModelConfigs(n);return await Promise.all(Object.keys(a).map(c=>o.removeModelConfig(n,c))),await o.deleteAPIKey(n,i),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}s(bdr,"handleByokDeleteApiKeyChecked");var Blt=rt(xdr,bdr);f();var Idr=I.Object({providerName:I.String(),modelId:I.String()});async function Tdr(t,e,r){try{let n=new Il(t.get(Bi)),{providerName:i,modelId:o}=r,a=tT(i);return await n.removeModelConfig(i,o),a===1&&await n.deleteAPIKey(i,a,o),[{success:!0,message:`Model ${o} deleted successfully for provider ${i}`},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}s(Tdr,"handleByokDeleteModelChecked");var Nlt=rt(Idr,Tdr);f();var wdr=I.Object({providerName:I.Optional(I.String()),modelId:I.Optional(I.String())});async function Sdr(t,e,r){try{let n=new Il(t.get(Bi)),{providerName:i,modelId:o}=r;if(!i){let c=t.get(Bi),l=await c.listKeys("byok"),u=[];for(let d of l)if(d.endsWith("-api-key")){let p=await c.read("byok",d);if(p){let h=d.replace("-api-key","").split("-");if(h.length===1)u.push({providerName:h[0],apiKey:p});else if(h.length>=2){let g=h[0],A=h.slice(1).join("-");u.push({providerName:g,modelId:A,apiKey:p})}}}return[{apiKeys:u},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(i,o)||void 0,providerName:i,modelId:o}]},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Sdr,"handleByokListApiKeysChecked");var Llt=rt(wdr,Sdr);f();var _dr=I.Object({providerName:I.Optional(I.String()),enableFetchUrl:I.Optional(I.Boolean())});async function Rdr(t,e,r){try{let{providerName:n,enableFetchUrl:i}=r;if(i===!0&&n!==Zm.OpenAI)return[null,{code:xr.InvalidParams,message:"enableFetchUrl cannot be true for provider name "+n}];let o=new Il(t.get(Bi)),a=[];if(n)if(i){let l=await t.get(z2).getAllModels(),u=new Map;l.forEach(m=>{let h=`${m.providerName}_${m.modelId}`;u.set(h,m)});let d=await o.getStoredModelConfigs(n),p=[];Object.entries(d).forEach(([m,h])=>{p.push({providerName:n,modelId:m,deploymentUrl:h.deploymentUrl,isRegistered:h.isRegistered,isCustomModel:h.isCustomModel,modelCapabilities:h.modelCapabilities})}),p.forEach(m=>{let h=`${m.providerName}_${m.modelId}`;u.set(h,m)}),a.push(...u.values())}else{let c=await o.getStoredModelConfigs(n);Object.entries(c).forEach(([l,u])=>{a.push({providerName:n,modelId:l,deploymentUrl:u.deploymentUrl,isRegistered:u.isRegistered,isCustomModel:u.isCustomModel,modelCapabilities:u.modelCapabilities})})}else{let c=Object.values(Zm);for(let l of c){let u=await o.getStoredModelConfigs(l);Object.entries(u).forEach(([d,p])=>{a.push({providerName:l,modelId:d,deploymentUrl:p.deploymentUrl,isRegistered:p.isRegistered,isCustomModel:p.isCustomModel,modelCapabilities:p.modelCapabilities})})}}return[{models:a},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}s(Rdr,"handleByokListModelsChecked");var Mlt=rt(_dr,Rdr);f();var kdr=I.Object({providerName:I.String(),apiKey:I.String(),modelId:I.Optional(I.String())});async function Pdr(t,e,r){try{let n=new Il(t.get(Bi)),{providerName:i,apiKey:o,modelId:a}=r,c=tT(i);if(c===1&&!a)return[null,{code:xr.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(i,o,c,a);let l=`API key saved successfully for provider ${i}`;return[{success:!0,message:a?`${l} and model ${a}`:l},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Pdr,"handleByokSaveApiKeyChecked");var Flt=rt(kdr,Pdr);f();var Ddr=I.Object({providerName:I.String(),modelId:I.String(),isRegistered:I.Boolean(),isCustomModel:I.Boolean(),deploymentUrl:I.Optional(I.String()),apiKey:I.Optional(I.String()),modelCapabilities:I.Optional(I.Object({name:I.String(),maxInputTokens:I.Optional(I.Number()),maxOutputTokens:I.Optional(I.Number()),toolCalling:I.Boolean(),vision:I.Boolean()}))});async function Bdr(t,e,r){try{let{providerName:n,modelId:i,isRegistered:o,isCustomModel:a,deploymentUrl:c,apiKey:l,modelCapabilities:u}=r,d=new Il(t.get(Bi)),p=tT(n);if(p===1&&!c)return[null,{code:xr.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(c||u){let m={deploymentUrl:c,isRegistered:o,isCustomModel:a,modelCapabilities:u};await d.saveModelConfig(n,i,m,l,p)}else l!==void 0&&await d.storeAPIKey(n,l,p,i);return[{success:!0,message:`Model ${i} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:xr.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}s(Bdr,"handleByokSaveModelChecked");var Olt=rt(Ddr,Bdr);f();var Ndr=I.Object({uri:I.String({minLength:1})});async function Ldr(t,e,r){let n=await t.get(vn).getOrReadTextDocument(r);return[{status:ta(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Ldr,"handleCheckFileStatusChecked");var Qlt=rt(Ndr,Ldr);f();var Mdr=I.Object({});function Ult(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Ult,"calculatePercentRemaining");async function Fdr(t,e,r){let n=await t.get(On).getSession();if(n){let i=await Ife(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Ult(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Ult(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:xr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:xr.InternalError,message:"Not signed in"}]}s(Fdr,"handleCheckQuotaChecked");var qlt=rt(Mdr,Fdr);f();var Odr=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Qdr(t,e,r){return[await t.get(On).checkAndUpdateStatus(r.options),null]}s(Qdr,"handleCheckStatusChecked");var Hlt=rt(Odr,Qdr);f();f();f();f();f();f();function Wlt(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Wlt,"filterUnsupportedReferences");function $lt(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s($lt,"convertToCopilotReferences");var jlt=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var ww=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Wlt(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};f();var sl=class{static{s(this,"ConversationInspector")}};f();var ZTe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ca=class{constructor(e){this.ctx=e;this.progressEntries=new Ur(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Kr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();var c1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(On).getSession({authAuthority:n});if(!i&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${r}`,i?.apiUrl||`https://api.${n}`).href;return this.ctx.get(yn).fetch(a,{method:"GET",headers:o})}};f();f();f();var Vlt=Fe(jp());var l1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Qt([(0,Vlt.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],d=new Qt(u.filter(([p,m])=>!ON(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:yp(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||ON(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Qt([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function ON(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(ON,"isEmptyRange");var zlt=Fe(require("path"));var Ylt=I.Object({uri:I.String(),visibleRange:I.Optional(Cc),selection:I.Optional(Cc)}),ewe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e),i=ta(n);if(await this.turnContext.collectFile(Ld,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new l1(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Qt([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(ON(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Qt([...l,...u])}else if(n.status==="invalid")return new Qt([`The currently open file \`${zlt.basename(e.uri)}\` is content excluded.`])}},Ld="current-editor",Qne=class{constructor(e){this._resolver=e;this.id=Ld;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new ewe(e)}};f();f();var Pl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},twe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},rwe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},cu=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new twe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new rwe(this._processor(e),this.id)}};var Klt=I.Object({name:I.String(),url:I.String()}),Jlt=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(Klt)})),remotes:I.Optional(I.Array(Klt))}),nwe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(u1,"git repository information");let r=[];return r.push([new Qt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Qt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Qt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Qt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Qt([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Qt(r)}},u1="git-metadata",Une=class extends cu{static{s(this,"GitMetadataSkill")}constructor(e){super(u1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new nwe(r))}};async function Xlt(t){let e=await t.skillResolver.resolve(Ld);if(e){let a=e.uri,c=qI(t.ctx,a);if(aqe(c))return{repoInfo:c,skillUsed:Ld}}let r=await t.skillResolver.resolve(u1);if(!r||!r.remotes||r.remotes.length===0){Kr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=jhe(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:u1}}s(Xlt,"extractRepoInfo");async function Zlt(t){let e=[];return await Udr(t,e),await qdr(t,e),await Hdr(t,e),e}s(Zlt,"skillsToReference");async function Udr(t,e){let r=await Wdr(t);r&&e.push(r)}s(Udr,"addRepositoryReference");async function qdr(t,e){let r=await $dr(t);r&&e.push(r)}s(qdr,"addSelectionReference");async function Hdr(t,e){let r=[],n=await Gdr(t);n&&r.push(n),r.push(...await Vdr(t)),r.length>0&&e.push(...r)}s(Hdr,"addFileReferences");async function Wdr(t){let e=await Xlt(t);if(e){let r=t.ctx.get(c1),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Wdr,"gitMetadataToReference");async function $dr(t){let e=await t.skillResolver.resolve(Ld);if(e&&e.selection){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ta(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return jdr(e,n.document)}}s($dr,"currentEditorToSelectionReference");function jdr(t,e){if(t.selection&&!ON(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(jdr,"extractSelection");async function Gdr(t){let e=await t.skillResolver.resolve(Ld);if(e){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ta(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(Gdr,"currentEditorToFileReference");async function Vdr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(vn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=ta(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(Vdr,"fileReferenceToPlatformFileReference");f();f();f();f();var cut=Fe(Wne()),awe=Fe(require("path"));var lut=500,nfr=Math.floor(.25*lut),$ne=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=awe.default.extname(__filename)===".ts"?awe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await cut.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:d})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,A=[],y=0;for(;y<g;){let E=y+u>=g,b=E?g:y+u,w=h.slice(y,b),R=m.detokenize(w),D=o.indexOf(R);A.push({id:`${a.toString()}#${y}`,chunk:R,tokenCount:w.length,range:{start:D,end:D+R.length}}),y=E?b:b-d}return A},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:lut,overlap:nfr}}),n}};var ifr="fixedSize",ofr=new Map([["fixedSize",$ne]]);function uut(t){let e=t==="default"?ifr:t,r=ofr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(uut,"getChunkingAlgorithm");f();f();var jne=Fe(Lb()),d1=Fe(require("fs")),dut=require("os"),Bh=Fe(require("path")),QN=require("process");var cwe=5e4,sfr=new It("workspaceChunks"),Gne=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Hi(r.uri),i=(0,jne.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Bh.join(afr(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,jne.SHA256)(e).toString().substring(0,this.pathHashLength),n=Bh.basename(e);return Bh.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await d1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await d1.promises.mkdir(Bh.dirname(n),{recursive:!0}),await d1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){sfr.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await d1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await d1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=Bh.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(Bh.join(this.cacheRootPath,n))}}async getFileHash(e){let r=vs(e),n="";return r&&(n=await d1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,jne.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=vs(e);if(!i)return;async function o(p){try{return(await d1.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let r=Al(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=vs(e);if(!r)return[];let n;try{n=await d1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=Al(Bh.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await d1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function afr(){return QN.env.XDG_CACHE_HOME&&Bh.isAbsolute(QN.env.XDG_CACHE_HOME)?QN.env.XDG_CACHE_HOME+"/github-copilot":(0,dut.platform)()==="win32"?QN.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":QN.env.HOME+"/.cache/github-copilot"}s(afr,"getXdgCachePath");var lwe=1e4;var Vne=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new dwe;this.status="notStarted",this.workspaceChunks=new Gne(e,r),this.cancellationToken=new uwe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(Dd).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>lwe&&(this._fileCountExceeded=!0,n=n.slice(0,lwe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){La(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>cwe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){La(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>cwe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>lwe&&(this._fileCountExceeded=!0),hGe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Go.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},uwe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},dwe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var sc=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=uut(r),i=new n;return new Vne(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=qr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=qr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};f();f();f();f();f();function Yne(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(Yne,"toChatModeEnum");var Sw=class{constructor(e,r){this.request=e;this.telemetryId=gr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}},zne=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=gr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();f();f();var fut={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},put="Alright, This response contains a code citation.";f();var mut=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var hut=Fe(require("fs")),vf=Fe(require("path"));var fwe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],pwe="test_",UQ={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},qQ=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Hi(e),n=vf.extname(r).replace(".",""),i=UQ[n]??{location:"sameFolder",prefix:pwe,suffix:fwe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let d=r.replace(`.${n}`,u+"."+n);o.push(d)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=vs(gd(e)),c===void 0)return}else{let u=vs(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let d=vf.join(c,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let l=Al(c);if(await this.fileExists(l))return Mo(l,o[0])}parseTestFilePath(e){try{return Al(e)}catch(r){sn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Hi(e),n=vf.extname(r).replace(".",""),i=UQ[n]??{location:"sameFolder",prefix:pwe,suffix:fwe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let d=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(d)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=gd(e):c=this.determineImplFolder(e);for(let l of o){let u=Mo(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=vs(e);if(r===void 0)return;let n=vf.extname(Hi(e)).replace(".",""),i,o=UQ[n]?.location??"sameFolder";o==="sameFolder"?i=vf.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,UQ[n]);if(a.length>0)return Al(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${vf.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return hut.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&vs(this.baseUri))??"",i=vf.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(vf.sep)}getRelativeTestFolder(e,r,n,i){let o=vf.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=vf.extname(Hi(e)).replace(".",""),n=gd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function HQ(t){let e=Hi(t),r=vf.extname(e),n=UQ[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(fwe.some(o=>e.endsWith(o+r))||e.startsWith(pwe))}s(HQ,"isTestFile");f();var gut=["indexed","indexing","not_indexed"],_w=class{constructor(){this._cache=new Ur(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Tm(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,i=!1){let o=Qv(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};f();f();f();async function Aut(t,e,r,n){let i=$i(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(Yr).getToken(),l=VV(t,c,"embeddings"),u=c.token,d=0;for(;d<o.length&&!n.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await cfr(t,l,u,e.modelId,p,n);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(Aut,"fetchEmbeddings");async function cfr(t,e,r,n,i,o){let a=gr(),c=i.map(u=>u.text),l=await x2(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,MI(t));if(l.status!==200||o.isCancellationRequested){La(t,new KE(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(cfr,"sendEmbeddingsRequest");f();f();var Kne=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var lfr="cosine",ufr=new Map([["cosine",Kne]]);function yut(t){let e=t==="default"?lfr:t,r=ufr.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(yut,"getScoringAlgorithm");f();var Gp=class{constructor(){this.workspaceScoringProviders=new Ur(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=yut(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Cut={modelFamily:KV.textEmbedding3Small,scoringType:"default",dimensions:null};async function vut(t,e,r,n,i,o,a,c=Cut){let l={...Cut,...c},u=ffr(t,e,r,n);Kr.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(Wa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await Aut(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(D=>D.id==="userQuery");if(g===void 0)return[];let A=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let y=performance.now(),E=pfr(t,e,m,A,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-y);let w=E.slice(0,i);return Kr.debug(t,`EmbeddingsReranker: Returning ${w.length} snippets`),w.map(D=>u.find(N=>N.id===D.id).id)}s(vut,"rerankSnippets");function ffr(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(ffr,"formatEmbeddingsInput");function pfr(t,e,r,n,i){let o=t.get(Gp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(pfr,"scoreEmbeddings");f();f();f();var hwe=Fe(Wne());var mfr=.75,hfr=1.2,gfr=47,Jne=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Xne();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,gfr),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(sc).getChunks(this.workspaceFolder),n=Jv(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=Jv(n,o=>o.chunk);return await Afr(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(sc).getChunks(this.workspaceFolder),a=new mwe(i);for await(let c of o){let l=await yfr({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function Afr(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=hwe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(Afr,"calculateIDFValues");async function yfr(t,e,r,n){return{score:await hwe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],A=(a.match(new RegExp(h,"g"))||[]).length,y=g*(A*(d+1)),E=A+d*(1-p+p*c/l);m+=y/E}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:hfr,b:mfr}}),...t}}s(yfr,"calculateBM25Score");var mwe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var vfr="bm25",Efr=new Map([["bm25",Jne]]);function Eut(t){let e=t==="default"?vfr:t,r=Efr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(Eut,"getRankingAlgorithm");var Vu=class{constructor(){this.workspaceRankingProviders=new Ur(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=Eut(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};f();async function xut(t,e){let r=t.ctx,n=await Go.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(zu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new Ha(r),l=await Tc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Kr.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";La(r,new KE(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(xut,"parseUserQuery");var but=Fe(jp());var KE=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},Zne=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(sc),o=i.status(e.turn.workspaceFolder),a=n.get(Vu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(sc).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await xut(e,e.cancelationToken)}catch(g){let A=new KE(g);La(i,A,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let d=i.get(Vu),p=[],m=performance.now();try{let g=await d.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let A=new KE(g);La(i,A,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=ln(e.turn.request.message),c=[];try{c=await vut(o,i,a,r,5,e.cancelationToken,n)}catch(d){let p=new KE(d);La(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(vn);for(let d of c){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),A=m.document.positionAt(h.range.end),y=ms.range(g,A);l.push({uri:m.document.uri,range:y,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...vGe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Kr.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(sc).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return but.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var Tut=Fe(Iut()),rie=Fe(Wne()),wut=Fe(require("os")),Sut=Fe(jp());var Ifr=Math.min(Math.max(Math.ceil(wut.cpus().length/2),1),10),WQ=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new Tut.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await rie.start({maxWorkers:Ifr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await rie.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Xne=WQ.startWorkerPool.bind(WQ);var rOi=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),ywe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(UN);return}let r=[],n=this.turnContext.ctx.get(vn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let d=new l1(u.document,l,l),p=new Qt([c]),h=HQ(a)?.5:.8;r.push([`Code excerpt from file \`${vs(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(qN,a,ta(u),l)}}if(r.length>0)return r.unshift([new Qt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Qt(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},UN="collect-project-context",eie=class extends NN{constructor(r,n=[new Zne]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(r1).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await Xne(),!r.uri))return;let n=this.ctx.get(sc),i=this.ctx.get(Dd),o=this.ctx.get(Vu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(sc);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Vu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Vu).terminateRanking(this.ctx,r),this.ctx.get(Gp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await WQ.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let i=this.ctx.get(sc),o=this.ctx.get(Vu),a=this.ctx.get(Gp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await Xne();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(sc),c=this.ctx.get(Vu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(UN,"Collecting relevant project context"),await r.info(Sut.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of gut){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await EGe(r,a.providerType,l),c.length===0){await r.steps.error(UN,"No project context found");return}return await r.steps.finish(UN),c}case"indexing":{await r.steps.error(UN,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(UN,"No project context available");return}}}},qN="project-context",tie=class extends cu{static{s(this,"ProjectContextSkill")}constructor(e){super(qN,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new ywe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var _ut=I.Object({labels:I.Array(I.String())}),Cwe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Qt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Qt([`- ${n}`]),.9]),this.turnContext.collectLabel(FA,n)}),new Qt(r)}},FA="project-labels",nie=class{constructor(e){this._resolver=e;this.id=FA;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Cwe(e)}};f();var iie=Fe(jp());var kut={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},Put=iie.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Dut=iie.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,Tfr=iie.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,vwe=`

`,Rut=Put+vwe+Dut;function But(t){let e=1;if(t.length===0)return{reply:Rut,vulnerabilities:e};if(t==="0")return{reply:Rut,vulnerabilities:0};if(t==="help")return{reply:Tfr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=Put+vwe:i==="c"&&(n+=Dut+vwe);return{reply:n.trimEnd(),vulnerabilities:e}}s(But,"parseVulnerabilitiesInstructions");var Nut=Fe(jp());var wfr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",Sfr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Ewe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},_fr=new Ewe,xwe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new lu(Sfr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},Rfr=new xwe,bwe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new lu("Alright, I'm producing a notification",void 0,[],o)}},kfr=new bwe,Iwe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new lu(wfr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},Pfr=new Iwe,Twe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new lu(await Mut(e))}},Dfr=new Twe,wwe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[FA,Ld]}instructions(e,r){return"Create a function that prints a christmas tree"}},Bfr=new wwe,Swe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new lu(ln(e.turn.request.message))}},Nfr=new Swe,_we=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(uu).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=Nut.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new lu(i)}return new lu("No prompt available")}},Lfr=new _we,Rwe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new lu(await Fut(e,n,i))}},Mfr=new Rwe,kwe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=But(r);for(let o=0;o<i;o++)e.turn.annotations.push(kut);return new lu(n,void 0,e.turn.annotations)}},Ffr=new kwe,Pwe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(fut),new lu(put,void 0,e.turn.annotations)}},Ofr=new Pwe,Dwe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new lu(mut)}},Qfr=new Dwe,Bwe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Ufr=new Bwe,Nwe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[qN]}},qfr=new Nwe,Lwe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new lu("Alright, I'm producing a notification",void 0,[],[],[],e)}},Hfr=new Lwe;function Lut(){return[_fr,Rfr,kfr,Pfr,Bfr,Dfr,Nfr,Lfr,Mfr,Ffr,Ofr,Hfr,Qfr,Ufr,qfr]}s(Lut,"getDebugTemplates");f();f();function kw(t,e){if(t.length==0)return new Qt([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Qt(r)}s(kw,"weighElidableList");var Out=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:Cc}))}),Mwe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Pw,e.uri,ta(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(Pw,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Pw,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Qt([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),kw(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Qt([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Qt([["```"+c,1],[yp(a),.8],["```",1]]))}return new Qt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Qt([n])}},Pw="problems-in-active-document",oie=class extends cu{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Pw,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new Mwe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var sie=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(yr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new qQ(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=HQ(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!HQ(e))return;let n=this.turnContext.ctx.get(yr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new qQ(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${Wfr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${$fr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${jfr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(OA,e,ta(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[yp(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(To).stat(e),!0}catch{return!1}}}},Wfr="Code excerpt from the implementation source file",$fr="Code excerpt from the test file",jfr="Code excerpt from an example test file";var Qut=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),Owe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=new sie(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(OA,e.testFileUri,ta(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(OA,e.sourceFileUri,ta(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(OA,e.sourceFileUri,ta(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(OA,e.testFileUri,ta(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},OA="test-context",aie=class extends cu{static{s(this,"TestContextSkill")}constructor(e){super(OA,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new Owe(r))}};f();var Uut=Fe(jp());var qut=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:Cc}))}),Qwe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(xk,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Qt(["The latest test run produced the following failures and errors:"]);return new Qt([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(xk,o,ta(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),d=this.appendCode(u,l,c.document);n.push([d,1])}}if(n.length>0)return new Qt(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Qt([Uut.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Qt(n)}appendCode(e,r,n){let i=[new Qt([`
The code of file \`${r}\` is:
`]),.6],o=[new Qt([["```"+n.detectedLanguageId,1],[yp(n.getText()),.9],["```",1]]),.7];return new Qt([[e,1],i,o])}},xk="test-failures",cie=class extends cu{static{s(this,"TestFailuresSkill")}constructor(e){super(xk,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new Qwe(r))}};var Nh=Fe(jp());var lu=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},bk=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},Gfr=new bk("tests","Generate unit tests","Generate Tests",Nh.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[OA,xk],["chat-panel","editor"]),Vfr=new bk("simplify","Simplify the code","Simplify This",Nh.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],Nh.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),zfr=new bk("fix","Fix problems and compile errors","Fix This",Nh.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Pw],["editor","chat-panel","inline"],Nh.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),Yfr=new bk("explain","Explain how the code works","Explain This",Nh.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],Nh.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),Kfr=new bk("doc","Document the current selection of code","Generate Docs",Nh.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],Nh.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),Uwe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=Wwe(e.conversation),n=Nh.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new lu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new lu(n)}},Jfr=new Uwe,qwe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=Hwe(e.ctx).filter(i=>i!=this),n=Nh.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new lu(n)}},Xfr=new qwe;function $Q(){return[Gfr,Vfr,zfr,Yfr,Kfr,Jfr,Xfr,...Lut()]}s($Q,"getPromptTemplates");function Hwe(t){let e=$Q();return!fM(t)&&!yg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(Hwe,"getUserFacingPromptTemplates");var $we=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Yi=class{constructor(e){this.ctx=e;this.conversations=new Ur(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new zne([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(Pl).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new $we(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(d=>({skillId:d}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&ln(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(ln(r.request.message),"@");(await p1(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(ln(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(ln(r.request.message),"/"),o=$Q().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(Pl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function ndt(t){return typeof t>"u"||t===null}s(ndt,"isNothing");function Zfr(t){return typeof t=="object"&&t!==null}s(Zfr,"isObject");function e0r(t){return Array.isArray(t)?t:ndt(t)?[]:[t]}s(e0r,"toArray");function t0r(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(t0r,"extend");function r0r(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(r0r,"repeat");function n0r(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(n0r,"isNegativeZero");var i0r=ndt,o0r=Zfr,s0r=e0r,a0r=r0r,c0r=n0r,l0r=t0r,Dl={isNothing:i0r,isObject:o0r,toArray:s0r,repeat:a0r,isNegativeZero:c0r,extend:l0r};function idt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(idt,"formatError");function GQ(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=idt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(GQ,"YAMLException$1");GQ.prototype=Object.create(Error.prototype);GQ.prototype.constructor=GQ;GQ.prototype.toString=s(function(e){return this.name+": "+idt(this,e)},"toString");var R0=GQ;function jwe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(jwe,"getLine");function Gwe(t,e){return Dl.repeat(" ",e-t.length)+t}s(Gwe,"padStart");function u0r(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=jwe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=Dl.repeat(" ",e.indent)+Gwe((t.line-l+1).toString(),d)+" | "+u.str+`
`+c;for(u=jwe(t.buffer,n[a],i[a],t.position,p),c+=Dl.repeat(" ",e.indent)+Gwe((t.line+1).toString(),d)+" | "+u.str+`
`,c+=Dl.repeat("-",e.indent+d+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=jwe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=Dl.repeat(" ",e.indent)+Gwe((t.line+l+1).toString(),d)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(u0r,"makeSnippet");var d0r=u0r,f0r=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],p0r=["scalar","sequence","mapping"];function m0r(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(m0r,"compileStyleAliases");function h0r(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(f0r.indexOf(r)===-1)throw new R0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=m0r(e.styleAliases||null),p0r.indexOf(this.kind)===-1)throw new R0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(h0r,"Type$1");var Md=h0r;function Hut(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(Hut,"compileList");function g0r(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(g0r,"compileMap");function zwe(t){return this.extend(t)}s(zwe,"Schema$1");zwe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof Md)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new R0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Md))throw new R0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new R0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new R0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Md))throw new R0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(zwe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Hut(i,"implicit"),i.compiledExplicit=Hut(i,"explicit"),i.compiledTypeMap=g0r(i.compiledImplicit,i.compiledExplicit),i},"extend");var A0r=zwe,y0r=new Md("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),C0r=new Md("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),v0r=new Md("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),E0r=new A0r({explicit:[y0r,C0r,v0r]});function x0r(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(x0r,"resolveYamlNull");function b0r(){return null}s(b0r,"constructYamlNull");function I0r(t){return t===null}s(I0r,"isNull");var T0r=new Md("tag:yaml.org,2002:null",{kind:"scalar",resolve:x0r,construct:b0r,predicate:I0r,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function w0r(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(w0r,"resolveYamlBoolean");function S0r(t){return t==="true"||t==="True"||t==="TRUE"}s(S0r,"constructYamlBoolean");function _0r(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(_0r,"isBoolean");var R0r=new Md("tag:yaml.org,2002:bool",{kind:"scalar",resolve:w0r,construct:S0r,predicate:_0r,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function k0r(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(k0r,"isHexCode");function P0r(t){return 48<=t&&t<=55}s(P0r,"isOctCode");function D0r(t){return 48<=t&&t<=57}s(D0r,"isDecCode");function B0r(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!k0r(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!P0r(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!D0r(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(B0r,"resolveYamlInteger");function N0r(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(N0r,"constructYamlInteger");function L0r(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Dl.isNegativeZero(t)}s(L0r,"isInteger");var M0r=new Md("tag:yaml.org,2002:int",{kind:"scalar",resolve:B0r,construct:N0r,predicate:L0r,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),F0r=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function O0r(t){return!(t===null||!F0r.test(t)||t[t.length-1]==="_")}s(O0r,"resolveYamlFloat");function Q0r(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Q0r,"constructYamlFloat");var U0r=/^[-+]?[0-9]+e/;function q0r(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Dl.isNegativeZero(t))return"-0.0";return r=t.toString(10),U0r.test(r)?r.replace("e",".e"):r}s(q0r,"representYamlFloat");function H0r(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Dl.isNegativeZero(t))}s(H0r,"isFloat");var W0r=new Md("tag:yaml.org,2002:float",{kind:"scalar",resolve:O0r,construct:Q0r,predicate:H0r,represent:q0r,defaultStyle:"lowercase"}),$0r=E0r.extend({implicit:[T0r,R0r,M0r,W0r]}),j0r=$0r,odt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),sdt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function G0r(t){return t===null?!1:odt.exec(t)!==null||sdt.exec(t)!==null}s(G0r,"resolveYamlTimestamp");function V0r(t){var e,r,n,i,o,a,c,l=0,u=null,d,p,m;if(e=odt.exec(t),e===null&&(e=sdt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(V0r,"constructYamlTimestamp");function z0r(t){return t.toISOString()}s(z0r,"representYamlTimestamp");var Y0r=new Md("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:G0r,construct:V0r,instanceOf:Date,represent:z0r});function K0r(t){return t==="<<"||t===null}s(K0r,"resolveYamlMerge");var J0r=new Md("tag:yaml.org,2002:merge",{kind:"scalar",resolve:K0r}),Zwe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function X0r(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=Zwe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(X0r,"resolveYamlBinary");function Z0r(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=Zwe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(Z0r,"constructYamlBinary");function epr(t){var e="",r=0,n,i,o=t.length,a=Zwe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(epr,"representYamlBinary");function tpr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(tpr,"isBinary");var rpr=new Md("tag:yaml.org,2002:binary",{kind:"scalar",resolve:X0r,construct:Z0r,predicate:tpr,represent:epr}),npr=Object.prototype.hasOwnProperty,ipr=Object.prototype.toString;function opr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,ipr.call(i)!=="[object Object]")return!1;for(o in i)if(npr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(opr,"resolveYamlOmap");function spr(t){return t!==null?t:[]}s(spr,"constructYamlOmap");var apr=new Md("tag:yaml.org,2002:omap",{kind:"sequence",resolve:opr,construct:spr}),cpr=Object.prototype.toString;function lpr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],cpr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(lpr,"resolveYamlPairs");function upr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(upr,"constructYamlPairs");var dpr=new Md("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lpr,construct:upr}),fpr=Object.prototype.hasOwnProperty;function ppr(t){if(t===null)return!0;var e,r=t;for(e in r)if(fpr.call(r,e)&&r[e]!==null)return!1;return!0}s(ppr,"resolveYamlSet");function mpr(t){return t!==null?t:{}}s(mpr,"constructYamlSet");var hpr=new Md("tag:yaml.org,2002:set",{kind:"mapping",resolve:ppr,construct:mpr}),adt=j0r.extend({implicit:[Y0r,J0r],explicit:[rpr,apr,dpr,hpr]}),Bw=Object.prototype.hasOwnProperty,lie=1,cdt=2,ldt=3,uie=4,Vwe=1,gpr=2,Wut=3,Apr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ypr=/[\x85\u2028\u2029]/,Cpr=/[,\[\]\{\}]/,udt=/^(?:!|!!|![a-z\-]+!)$/i,ddt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function $ut(t){return Object.prototype.toString.call(t)}s($ut,"_class");function m1(t){return t===10||t===13}s(m1,"is_EOL");function Tk(t){return t===9||t===32}s(Tk,"is_WHITE_SPACE");function k0(t){return t===9||t===32||t===10||t===13}s(k0,"is_WS_OR_EOL");function WN(t){return t===44||t===91||t===93||t===123||t===125}s(WN,"is_FLOW_INDICATOR");function vpr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(vpr,"fromHexCode");function Epr(t){return t===120?2:t===117?4:t===85?8:0}s(Epr,"escapedHexLen");function xpr(t){return 48<=t&&t<=57?t-48:-1}s(xpr,"fromDecimalCode");function jut(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(jut,"simpleEscapeSequence");function bpr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(bpr,"charFromCodepoint");var fdt=new Array(256),pdt=new Array(256);for(Ik=0;Ik<256;Ik++)fdt[Ik]=jut(Ik)?1:0,pdt[Ik]=jut(Ik);var Ik;function Ipr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||adt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(Ipr,"State$1");function mdt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=d0r(r),new R0(e,r)}s(mdt,"generateError");function un(t,e){throw mdt(t,e)}s(un,"throwError");function die(t,e){t.onWarning&&t.onWarning.call(null,mdt(t,e))}s(die,"throwWarning");var Gut={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&un(e,"duplication of %YAML directive"),n.length!==1&&un(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&un(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&un(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&die(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&un(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],udt.test(i)||un(e,"ill-formed tag handle (first argument) of the TAG directive"),Bw.call(e.tagMap,i)&&un(e,'there is a previously declared suffix for "'+i+'" tag handle'),ddt.test(o)||un(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{un(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Dw(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||un(t,"expected valid JSON character");else Apr.test(c)&&un(t,"the stream contains non-printable characters");t.result+=c}}s(Dw,"captureSegment");function Vut(t,e,r,n){var i,o,a,c;for(Dl.isObject(r)||un(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],Bw.call(e,o)||(e[o]=r[o],n[o]=!0)}s(Vut,"mergeMappings");function $N(t,e,r,n,i,o,a,c,l){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&un(t,"nested arrays are not supported inside keys"),typeof i=="object"&&$ut(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&$ut(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)Vut(t,e,o[u],r);else Vut(t,e,o,r);else!t.json&&!Bw.call(r,i)&&Bw.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,un(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s($N,"storeMappingPair");function eSe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):un(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(eSe,"readLineBreak");function al(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Tk(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(m1(i))for(eSe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&die(t,"deficient indentation"),n}s(al,"skipSeparationSpace");function mie(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||k0(r)))}s(mie,"testDocumentSeparator");function tSe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Dl.repeat(`
`,e-1))}s(tSe,"writeFoldedLines");function Tpr(t,e,r){var n,i,o,a,c,l,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),k0(h)||WN(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),k0(i)||r&&WN(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),k0(i)||r&&WN(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),k0(n))break}else{if(t.position===t.lineStart&&mie(t)||r&&WN(h))break;if(m1(h))if(l=t.line,u=t.lineStart,d=t.lineIndent,al(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=d;break}}c&&(Dw(t,o,a,!1),tSe(t,t.line-l),o=a=t.position,c=!1),Tk(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Dw(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(Tpr,"readPlainScalar");function wpr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Dw(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else m1(r)?(Dw(t,n,i,!0),tSe(t,al(t,!1,e)),n=i=t.position):t.position===t.lineStart&&mie(t)?un(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);un(t,"unexpected end of the stream within a single quoted scalar")}s(wpr,"readSingleQuotedScalar");function Spr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return Dw(t,r,t.position,!0),t.position++,!0;if(c===92){if(Dw(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),m1(c))al(t,!1,e);else if(c<256&&fdt[c])t.result+=pdt[c],t.position++;else if((a=Epr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=vpr(c))>=0?o=(o<<4)+a:un(t,"expected hexadecimal character");t.result+=bpr(o),t.position++}else un(t,"unknown escape sequence");r=n=t.position}else m1(c)?(Dw(t,r,n,!0),tSe(t,al(t,!1,e)),r=n=t.position):t.position===t.lineStart&&mie(t)?un(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}un(t,"unexpected end of the stream within a double quoted scalar")}s(Spr,"readDoubleQuotedScalar");function _pr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,d,p,m,h,g=Object.create(null),A,y,E,b;if(b=t.input.charCodeAt(t.position),b===91)d=93,h=!1,c=[];else if(b===123)d=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(al(t,!0,e),b=t.input.charCodeAt(t.position),b===d)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&un(t,"expected the node content, but found ','"):un(t,"missed comma between flow collection entries"),y=A=E=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),k0(u)&&(p=m=!0,t.position++,al(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,jN(t,e,lie,!1,!0),y=t.tag,A=t.result,al(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),al(t,!0,e),jN(t,e,lie,!1,!0),E=t.result),h?$N(t,c,g,y,A,E,n,i,o):p?c.push($N(t,null,g,y,A,E,n,i,o)):c.push(A),al(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}un(t,"unexpected end of the stream within a flow collection")}s(_pr,"readFlowCollection");function Rpr(t,e){var r,n,i=Vwe,o=!1,a=!1,c=e,l=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Vwe===i?i=p===43?Wut:gpr:un(t,"repeat of a chomping mode identifier");else if((d=xpr(p))>=0)d===0?un(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?un(t,"repeat of an indentation width identifier"):(c=e+d-1,a=!0);else break;if(Tk(p)){do p=t.input.charCodeAt(++t.position);while(Tk(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!m1(p)&&p!==0)}for(;p!==0;){for(eSe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),m1(p)){l++;continue}if(t.lineIndent<c){i===Wut?t.result+=Dl.repeat(`
`,o?1+l:l):i===Vwe&&o&&(t.result+=`
`);break}for(n?Tk(p)?(u=!0,t.result+=Dl.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=Dl.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Dl.repeat(`
`,l):t.result+=Dl.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!m1(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Dw(t,r,t.position,!1)}return!0}s(Rpr,"readBlockScalar");function zut(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,un(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!k0(a))));){if(c=!0,t.position++,al(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,jN(t,e,ldt,!1,!0),o.push(t.result),al(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)un(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(zut,"readBlockSequence");function kpr(t,e,r){var n,i,o,a,c,l,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,A=null,y=!1,E=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,un(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&k0(n))b===63?(y&&($N(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!0,i=!0):y?(y=!1,i=!0):un(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!jN(t,r,cdt,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);Tk(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),k0(b)||un(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&($N(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!1,i=!1,h=t.tag,g=t.result;else if(E)un(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(E)un(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,l=t.position),jN(t,e,uie,!0,i)&&(y?g=t.result:A=t.result),y||($N(t,p,m,h,g,A,a,c,l),h=g=A=null),al(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)un(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&$N(t,p,m,h,g,null,a,c,l),E&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),E}s(kpr,"readBlockMapping");function Ppr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&un(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):un(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!k0(a);)a===33&&(n?un(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),udt.test(i)||un(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Cpr.test(o)&&un(t,"tag suffix cannot contain flow indicator characters")}o&&!ddt.test(o)&&un(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{un(t,"tag name is malformed: "+o)}return r?t.tag=o:Bw.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:un(t,'undeclared tag handle "'+i+'"'),!0}s(Ppr,"readTagProperty");function Dpr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&un(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!k0(r)&&!WN(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&un(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(Dpr,"readAnchorProperty");function Bpr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!k0(n)&&!WN(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&un(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Bw.call(t.anchorMap,r)||un(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],al(t,!0,-1),!0}s(Bpr,"readAlias");function jN(t,e,r,n,i){var o,a,c,l=1,u=!1,d=!1,p,m,h,g,A,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=uie===r||ldt===r,n&&al(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Ppr(t)||Dpr(t);)al(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||uie===r)&&(lie===r||cdt===r?A=e:A=e+1,y=t.position-t.lineStart,l===1?c&&(zut(t,y)||kpr(t,y,A))||_pr(t,A)?d=!0:(a&&Rpr(t,A)||wpr(t,A)||Spr(t,A)?d=!0:Bpr(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&un(t,"alias node should not have any properties")):Tpr(t,A,lie===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(d=c&&zut(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&un(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Bw.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||un(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&un(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):un(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(jN,"composeNode");function Npr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(al(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!k0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&un(t,"directive name must not be less than one character in length");a!==0;){for(;Tk(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!m1(a));break}if(m1(a))break;for(r=t.position;a!==0&&!k0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&eSe(t),Bw.call(Gut,n)?Gut[n](t,n,i):die(t,'unknown document directive "'+n+'"')}if(al(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,al(t,!0,-1)):o&&un(t,"directives end mark is expected"),jN(t,t.lineIndent-1,uie,!1,!0),al(t,!0,-1),t.checkLineBreaks&&ypr.test(t.input.slice(e,t.position))&&die(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&mie(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,al(t,!0,-1));return}if(t.position<t.length-1)un(t,"end of the stream or a document separator is expected");else return}s(Npr,"readDocument");function hdt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Ipr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,un(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Npr(r);return r.documents}s(hdt,"loadDocuments");function Lpr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=hdt(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(Lpr,"loadAll$1");function Mpr(t,e){var r=hdt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new R0("expected a single document in the stream, but found more")}}s(Mpr,"load$1");var Fpr=Lpr,Opr=Mpr,gdt={loadAll:Fpr,load:Opr},Adt=Object.prototype.toString,ydt=Object.prototype.hasOwnProperty,rSe=65279,Qpr=9,VQ=10,Upr=13,qpr=32,Hpr=33,Wpr=34,Ywe=35,$pr=37,jpr=38,Gpr=39,Vpr=42,Cdt=44,zpr=45,fie=58,Ypr=61,Kpr=62,Jpr=63,Xpr=64,vdt=91,Edt=93,Zpr=96,xdt=123,emr=124,bdt=125,Fd={};Fd[0]="\\0";Fd[7]="\\a";Fd[8]="\\b";Fd[9]="\\t";Fd[10]="\\n";Fd[11]="\\v";Fd[12]="\\f";Fd[13]="\\r";Fd[27]="\\e";Fd[34]='\\"';Fd[92]="\\\\";Fd[133]="\\N";Fd[160]="\\_";Fd[8232]="\\L";Fd[8233]="\\P";var tmr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rmr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nmr(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&ydt.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(nmr,"compileStyleMap");function imr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new R0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Dl.repeat("0",n-e.length)+e}s(imr,"encodeHex");var omr=1,zQ=2;function smr(t){this.schema=t.schema||adt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Dl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=nmr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?zQ:omr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(smr,"State");function Yut(t,e){for(var r=Dl.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(Yut,"indentString");function Kwe(t,e){return`
`+Dl.repeat(" ",t.indent*e)}s(Kwe,"generateNextLine");function amr(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(amr,"testImplicitResolving");function pie(t){return t===qpr||t===Qpr}s(pie,"isWhitespace");function YQ(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==rSe||65536<=t&&t<=1114111}s(YQ,"isPrintable");function Kut(t){return YQ(t)&&t!==rSe&&t!==Upr&&t!==VQ}s(Kut,"isNsCharOrWhitespace");function Jut(t,e,r){var n=Kut(t),i=n&&!pie(t);return(r?n:n&&t!==Cdt&&t!==vdt&&t!==Edt&&t!==xdt&&t!==bdt)&&t!==Ywe&&!(e===fie&&!i)||Kut(e)&&!pie(e)&&t===Ywe||e===fie&&i}s(Jut,"isPlainSafe");function cmr(t){return YQ(t)&&t!==rSe&&!pie(t)&&t!==zpr&&t!==Jpr&&t!==fie&&t!==Cdt&&t!==vdt&&t!==Edt&&t!==xdt&&t!==bdt&&t!==Ywe&&t!==jpr&&t!==Vpr&&t!==Hpr&&t!==emr&&t!==Ypr&&t!==Kpr&&t!==Gpr&&t!==Wpr&&t!==$pr&&t!==Xpr&&t!==Zpr}s(cmr,"isPlainSafeFirst");function lmr(t){return!pie(t)&&t!==fie}s(lmr,"isPlainSafeLast");function jQ(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(jQ,"codePointAt");function Idt(t){var e=/^\n* /;return e.test(t)}s(Idt,"needIndentIndicator");var Tdt=1,Jwe=2,wdt=3,Sdt=4,HN=5;function umr(t,e,r,n,i,o,a,c){var l,u=0,d=null,p=!1,m=!1,h=n!==-1,g=-1,A=cmr(jQ(t,0))&&lmr(jQ(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=jQ(t,l),!YQ(u))return HN;A=A&&Jut(u,d,c),d=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=jQ(t,l),u===VQ)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!YQ(u))return HN;A=A&&Jut(u,d,c),d=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?A&&!a&&!i(t)?Tdt:o===zQ?HN:Jwe:r>9&&Idt(t)?HN:a?o===zQ?HN:Jwe:m?Sdt:wdt}s(umr,"chooseScalarStyle");function dmr(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===zQ?'""':"''";if(!t.noCompatMode&&(tmr.indexOf(e)!==-1||rmr.test(e)))return t.quotingType===zQ?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return amr(t,u)}switch(s(l,"testAmbiguity"),umr(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case Tdt:return e;case Jwe:return"'"+e.replace(/'/g,"''")+"'";case wdt:return"|"+Xut(e,t.indent)+Zut(Yut(e,o));case Sdt:return">"+Xut(e,t.indent)+Zut(Yut(fmr(e,a),o));case HN:return'"'+pmr(e)+'"';default:throw new R0("impossible error: invalid scalar style")}}()}s(dmr,"writeScalar");function Xut(t,e){var r=Idt(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(Xut,"blockHeader");function Zut(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Zut,"dropEndingNewline");function fmr(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,edt(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+edt(l,e),i=o}return n}s(fmr,"foldString");function edt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(edt,"foldLine");function pmr(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=jQ(t,i),n=Fd[r],!n&&YQ(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||imr(r);return e}s(pmr,"escapeString");function mmr(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(XE(t,e,c,!1,!1)||typeof c>"u"&&XE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(mmr,"writeFlowSequence");function tdt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(XE(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&XE(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Kwe(t,e)),t.dump&&VQ===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(tdt,"writeBlockSequence");function hmr(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,d;for(a=0,c=o.length;a<c;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),XE(t,e,l,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),XE(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}s(hmr,"writeFlowMapping");function gmr(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new R0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=Kwe(t,e)),u=a[c],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),XE(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&VQ===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=Kwe(t,e)),XE(t,e+1,d,!0,p)&&(t.dump&&VQ===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(gmr,"writeBlockMapping");function rdt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,Adt.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(ydt.call(c.represent,l))n=c.represent[l](e,l);else throw new R0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(rdt,"detectType");function XE(t,e,r,n,i,o,a){t.tag=null,t.dump=r,rdt(t,r,!1)||rdt(t,r,!0);var c=Adt.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=c==="[object Object]"||c==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(gmr(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(hmr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?tdt(t,e-1,t.dump,i):tdt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(mmr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&dmr(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new R0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(XE,"writeNode");function Amr(t,e){var r=[],n=[],i,o;for(Xwe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(Amr,"getDuplicateReferences");function Xwe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Xwe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)Xwe(t[n[i]],e,r)}s(Xwe,"inspectNode");function ymr(t,e){e=e||{};var r=new smr(e);r.noRefs||Amr(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),XE(r,0,n,!0,!0)?r.dump+`
`:""}s(ymr,"dump$1");var Cmr=ymr,vmr={dump:Cmr};function nSe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(nSe,"renamed");var Y7i=gdt.load,K7i=gdt.loadAll,iSe=vmr.dump;var J7i=nSe("safeLoad","load"),X7i=nSe("safeLoadAll","loadAll"),Z7i=nSe("safeDump","dump");var wk=Fe(jp());var oSe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},uu=class{constructor(){this.dump=new Ur(25);this.promptsDump=new Ur(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new oSe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function _dt(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(_dt,"filterConversationTurns");function Wwe(t){return _dt(t).getLastTurn()?.id}s(Wwe,"getLastTurnId");async function Mut(t){let e=_dt(t.conversation),r=Wwe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(uu).getDump(r),o=bmr(i,e.turns);sn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await Imr(i,t.ctx);return wk.default`
        ${xmr(t.conversation,r)}
        ${Emr(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Mut,"getConversationDump");function Emr(t){let e=t.get(dn);return wk.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(Emr,"getEditorInfoDumpMessage");function xmr(t,e){return wk.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(xmr,"getInfoDumpMessage");async function Fut(t,e,r){let n=t.ctx.get(Pl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Yi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&ln(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${ln(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=wk.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=wk.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${iSe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=wk.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Fut,"getSkillsDump");function bmr(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:ln(n.request.message)};return n.response&&(o.response=ln(n.response.message)),o})};return iSe(r)}s(bmr,"toSimulationFormat");async function Imr(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(vn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();sn.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(Imr,"fileDump");f();function sSe(t,e){let r=$i(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(ln(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(sSe,"countMessagesTokens");f();function Rdt(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,d,c,a].filter(p=>p&&p!="").join(`
`)}s(Rdt,"chatBasePrompt");f();f();f();f();f();function kdt(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([yp(i.join(`
`)),1]),i=[],r.push([new Qt([o]),1])):r.push([new Qt([o]),1]),n=!n):n?i.push(o):r.push([new Qt([o]),.8]);return n&&(r.push([yp(i.join(`
`)),1]),r.push([new Qt(["```"]),1])),new Qt(r)}s(kdt,"fromMessage");function GN(t){let e=aSe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=Pdt(i.request,n+1),a=i.response&&i.response?.type!=="meta"?Pdt(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(kdt(c))}return r.length>0?new Qt([[new Qt(["Consider the following conversation history:"]),1],[kw(r,"inverseLinear"),1]]):null}s(GN,"fromHistory");var Tmr=5;function aSe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&ln(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,Tmr).reverse()}s(aSe,"filterTurns");function Pdt(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=ln(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${ln(t.message)}`}s(Pdt,"formatTurnMessage");f();f();f();var wmr=4,cSe={skillIds:[]},hie=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Go.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(zu).toPrompt(e,l),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,d);return m.type!=="success"&&(Kr.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,d)),await e.ctx.get(sl).inspectFetchResult(m),this.handleResult(m,d,ln(a),o,u.toolConfig)}else return cSe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),cSe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,wmr);else return Kr.error(this.ctx,"Missing tool call in meta prompt response"),cSe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Bt(this.ctx,`${Kl(i)}.metaPrompt`,l,0),Bt(this.ctx,`${Kl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var gie=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return me(e,r,"org.springframework.boot","Spring Boot"),me(e,r,"jakarta.jakartaee-api","Jakarta EE"),me(e,r,"javax:javaee-api","Java EE"),me(e,r,"org.apache.struts:struts2-core","Apache Struts"),me(e,r,"org.hibernate:hibernate-core","Hibernate"),me(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),me(e,r,"javax.faces:jsf-api","JSF"),me(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return me(e,r,"com.google.guava","Google Guava"),me(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),me(e,r,"org.apache.commons:commons-io","Apache Commons IO"),me(e,r,"joda-time:joda-time","Joda-Time"),me(e,r,"com.google.code.gson:gson","Google Gson"),me(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),me(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),me(e,r,"org.apache.commons:commons-net","Apache Commons Net"),me(e,r,"org.apache.poi:poi","Apache POI"),me(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),me(e,r,"junit:junit","JUnit"),me(e,r,"org.testng:testng","TestNG"),me(e,r,"org.spockframework:spock-core","Spock"),me(e,r,"io.cucumber:cucumber-java","Cucumber"),me(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return me(e,r,"org.mockito","Mockito"),me(e,r,"org.assertj","AssertJ"),me(e,r,"org.hamcrest","Hamcrest"),me(e,r,"org.powermock","PowerMock"),me(e,r,"org.jmock","JMock"),me(e,r,"org.easymock","EasyMock"),me(e,r,"org.jmockit:jmockit","JMockit"),me(e,r,"com.github.tomakehurst:wiremock","WireMock"),me(e,r,"org.dbunit:dbunit","DBUnit"),me(e,r,"com.icegreen:greenmail","GreenMail"),me(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),me(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),me(e,r,"io.rest-assured:rest-assured","Rest-Assured"),me(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),me(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},Aie=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"@types/node","Node.js"),me(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||me(e,r,"react","React"),me(e,r,"angular","Angular"),me(e,r,"vue","Vue.js"),me(e,r,"ember","Ember.js"),me(e,r,"backbone","Backbone.js"),me(e,r,"meteor","Meteor"),me(e,r,"polymer","Polymer"),me(e,r,"aurelia","Aurelia"),me(e,r,"knockout","Knockout.js"),me(e,r,"dojo","Dojo Toolkit"),me(e,r,"mithril","Mithril.js"),me(e,r,"marionette","Marionette.js"),me(e,r,"marko","Marko.js"),me(e,r,"svelte","Svelte"),me(e,r,"hyperapp","Hyperapp"),me(e,r,"inferno","Inferno.js"),me(e,r,"preact","Preact"),me(e,r,"riot","Riot.js"),me(e,r,"moon","Moon.js"),me(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return me(e,r,"lodash","Lodash"),me(e,r,"moment","Moment.js"),me(e,r,"axios","Axios"),me(e,r,"redux","Redux"),me(e,r,"recoil","Recoil"),me(e,r,"jquery","jQuery"),me(e,r,"d3","D3.js"),me(e,r,"underscore","Underscore.js"),me(e,r,"ramda","Ramda"),me(e,r,"immutable","Immutable.js"),me(e,r,"rxjs","RxJS"),me(e,r,"three","Three.js"),me(e,r,"socket.io","Socket.IO"),me(e,r,"express","Express.js"),me(e,r,"next","Next.js"),me(e,r,"puppeteer","Puppeteer"),me(e,r,"cheerio","Cheerio"),me(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"jest","Jest"),me(e,r,"mocha","Mocha"),me(e,r,"jasmine","Jasmine"),me(e,r,"ava","AVA"),me(e,r,"qunit","QUnit"),me(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return me(e,r,"chai","Chai"),me(e,r,"sinon","Sinon"),me(e,r,"enzyme","Enzyme"),me(e,r,"protractor","Protractor"),me(e,r,"supertest","Supertest"),me(e,r,"nock","Nock"),me(e,r,"cypress","Cypress"),me(e,r,"@testing-library/react","React Testing Library"),r}},yie=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"github.com/gorilla/mux","Gorilla Mux"),me(e,r,"github.com/go-chi/chi","Chi"),me(e,r,"github.com/gin-gonic/gin","Gin"),me(e,r,"github.com/labstack/echo","Echo"),me(e,r,"github.com/revel/revel","Revel"),me(e,r,"github.com/astaxie/beego","Beego"),me(e,r,"github.com/go-martini/martini","Martini"),me(e,r,"github.com/gobuffalo/buffalo","Buffalo"),me(e,r,"github.com/goji/goji","Goji"),me(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return me(e,r,"net/http","net/http"),me(e,r,"fmt","fmt"),me(e,r,"io","io"),me(e,r,"time","time"),me(e,r,"math","math"),me(e,r,"strconv","strconv"),me(e,r,"strings","strings"),me(e,r,"sort","sort"),me(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"github.com/onsi/ginkgo","ginkgo"),me(e,r,"github.com/onsi/gomega","gomega"),me(e,r,"github.com/stretchr/testify","testify"),me(e,r,"gopkg.in/check.v1","gocheck"),me(e,r,"github.com/franela/goblin","goblin"),me(e,r,"github.com/DATA-DOG/godog","godog"),me(e,r,"github.com/stesla/gospec","gospec"),me(e,r,"github.com/rjeczalik/gotest","gotest"),me(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return me(e,r,"github.com/stretchr/testify","Testify"),me(e,r,"github.com/smartystreets/goconvey","GoConvey"),me(e,r,"github.com/onsi/ginkgo","Ginkgo"),me(e,r,"github.com/golang/mock","GoMock"),me(e,r,"gopkg.in/check.v1","GoCheck"),me(e,r,"github.com/franela/goblin","Goblin"),me(e,r,"github.com/DATA-DOG/godog","GoDog"),me(e,r,"github.com/onsi/gomega","Gomega"),me(e,r,"github.com/stesla/gospec","GoSpec"),me(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},Cie=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flask","Flask"),me(e,r,"django","Django"),me(e,r,"pyramid","Pyramid"),me(e,r,"tornado","Tornado"),me(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return me(e,r,"requests","requests"),me(e,r,"numpy","numpy"),me(e,r,"pandas","pandas"),me(e,r,"scipy","scipy"),me(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"pytest","Pytest"),me(e,r,"unittest","Unittest"),me(e,r,"doctest","Doctest"),me(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mock","Mock"),me(e,r,"hypothesis","Hypothesis"),me(e,r,"behave","Behave"),me(e,r,"lettuce","Lettuce"),me(e,r,"testify","Testify"),me(e,r,"pyhamcrest","PyHamcrest"),r}},vie=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"laravel/framework","Laravel"),me(e,r,"symfony/symfony","Symfony"),me(e,r,"slim/slim","Slim"),me(e,r,"cakephp/cakephp","CakePHP"),me(e,r,"yiisoft/yii2","Yii"),me(e,r,"zendframework/zendframework","Zend Framework"),me(e,r,"phalcon/cphalcon","Phalcon"),me(e,r,"bcosca/fatfree","Fat-Free"),me(e,r,"fuel/fuel","FuelPHP"),me(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return me(e,r,"monolog/monolog","Monolog"),me(e,r,"vlucas/phpdotenv","PHP dotenv"),me(e,r,"symfony/console","Symfony Console"),me(e,r,"guzzlehttp/guzzle","GuzzleHttp"),me(e,r,"ramsey/uuid","Ramsey UUID"),me(e,r,"doctrine/orm","Doctrine ORM"),me(e,r,"php-di/php-di","PHP-DI"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"symfony/finder","Symfony Finder"),me(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"phpunit/phpunit","PHPUnit"),me(e,r,"behat/behat","Behat"),me(e,r,"phpspec/phpspec","PHPSpec"),me(e,r,"codeception/codeception","Codeception"),me(e,r,"atoum/atoum","Atoum"),me(e,r,"pestphp/pest","PestPHP"),me(e,r,"kahlan/kahlan","Kahlan"),me(e,r,"peridot-php/peridot","Peridot"),me(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockery/mockery","Mockery"),me(e,r,"php-mock/php-mock","PHP-Mock"),me(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),me(e,r,"padraic/mockery","Padraic Mockery"),me(e,r,"phpspec/prophecy","PHPSpec Prophecy"),me(e,r,"phpunit/php-invoker","PHPUnit Invoker"),me(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),me(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},Eie=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"Microsoft.NETCore.App",".NET Core"),me(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return me(e,r,"EntityFramework","Entity Framework"),me(e,r,"Newtonsoft.Json","Newtonsoft.Json"),me(e,r,"AutoMapper","AutoMapper"),me(e,r,"Serilog","Serilog"),me(e,r,"Dapper","Dapper"),me(e,r,"Polly","Polly"),me(e,r,"FluentValidation","FluentValidation"),me(e,r,"MediatR","MediatR"),me(e,r,"Hangfire","Hangfire"),me(e,r,"RabbitMQ.Client","RabbitMQ.Client"),me(e,r,"MassTransit","MassTransit"),me(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),me(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),me(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),me(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"xunit","xUnit"),me(e,r,"NUnit","NUnit"),me(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return me(e,r,"Moq","Moq"),me(e,r,"FluentAssertions","FluentAssertions"),me(e,r,"Bogus","Bogus"),me(e,r,"RestSharp","RestSharp"),me(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},xie=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flutter","Flutter"),me(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return me(e,r,"dartx","dartx"),me(e,r,"provider","Provider"),me(e,r,"rxdart","RxDart"),me(e,r,"dio","Dio"),me(e,r,"json_serializable","json_serializable"),me(e,r,"freezed","Freezed"),me(e,r,"moor","Moor"),me(e,r,"hive","Hive"),me(e,r,"http","http"),me(e,r,"path","path"),me(e,r,"intl","intl"),me(e,r,"equatable","equatable"),me(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test","test"),me(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockito","mockito"),me(e,r,"bloc_test","bloc_test"),r}},bie=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"rails","Rails"),me(e,r,"sinatra","Sinatra"),me(e,r,"hanami","Hanami"),me(e,r,"grape","Grape"),me(e,r,"roda","Roda"),me(e,r,"padrino","Padrino"),me(e,r,"cuba","Cuba"),me(e,r,"ramaze","Ramaze"),me(e,r,"nyara","Nyara"),me(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return me(e,r,"active_record","ActiveRecord"),me(e,r,"sequel","Sequel"),me(e,r,"rom","ROM"),me(e,r,"datamapper","DataMapper"),me(e,r,"mongoid","Mongoid"),me(e,r,"neo4j","Neo4j"),me(e,r,"redis","Redis"),me(e,r,"cassandra","Cassandra"),me(e,r,"couchrest","CouchRest"),me(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"rspec","RSpec"),me(e,r,"minitest","Minitest"),me(e,r,"cucumber","Cucumber"),me(e,r,"spinach","Spinach"),me(e,r,"turnip","Turnip"),me(e,r,"bacon","Bacon"),me(e,r,"shoulda","Shoulda"),me(e,r,"test-unit","Test::Unit"),me(e,r,"wrong","Wrong"),me(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return me(e,r,"factory_bot","FactoryBot"),me(e,r,"faker","Faker"),me(e,r,"ffaker","FFaker"),me(e,r,"fabrication","Fabrication"),me(e,r,"machinist","Machinist"),me(e,r,"mocha","Mocha"),me(e,r,"flexmock","FlexMock"),me(e,r,"rr","RR"),me(e,r,"bourne","Bourne"),me(e,r,"not_a_mock","NotAMock"),r}},Iie=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"tokio","tokio"),me(e,r,"async-std","async-std"),me(e,r,"hyper","hyper"),me(e,r,"actix-web","actix-web"),me(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return me(e,r,"serde","serde"),me(e,r,"regex","regex"),me(e,r,"rand","rand"),me(e,r,"log","log"),me(e,r,"lazy_static","lazy_static"),me(e,r,"libc","libc"),me(e,r,"futures","futures"),me(e,r,"rayon","rayon"),me(e,r,"reqwest","reqwest"),me(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test-case","test-case"),me(e,r,"proptest","proptest"),me(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockall","mockall"),me(e,r,"double","double"),me(e,r,"rstest","rstest"),me(e,r,"mockiato","mockiato"),me(e,r,"mock_derive","mock_derive"),me(e,r,"mocktopus","mocktopus"),me(e,r,"mockers","mockers"),me(e,r,"mock_it","mock_it"),r}},Tie=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function me(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(me,"addFromLibraries");var wie=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Bdt(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(Bdt,"determineProgrammingLanguage");var Ddt=[new gie,new Aie,new yie,new Cie,new vie,new Eie,new xie,new bie,new Iie,new Tie];function Ndt(t){let e=Ddt.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new wie(t,Ddt);return new lSe(e)}s(Ndt,"getMetadataLookup");var lSe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Ldt=I.Object({name:I.String(),version:I.Optional(I.String())}),Mdt=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(Ldt),buildTools:I.Array(Ldt)}),uSe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Qt([`The user is working on a project with the following characteristics:
`]),1]);let n=Ndt(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Qt(r)}addProgrammingLanguage(e,r){let n=Bdt(e);this.turnContext.collectLabel(h1,n),r.push([new Qt([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(h1,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Qt([`${r}
${i}`]),1])}}},h1="project-metadata",Sie=class{constructor(e){this._resolver=e;this.id=h1;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new uSe(e)}};f();var Fdt=Fe(require("path"));var dSe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Qt(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Qt(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=ta(n);if(await this.turnContext.collectFile(Rie,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new l1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Qt([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Qt([`The referenced file \`${Fdt.basename(r.uri)}\` is content excluded.`]),1]]}},fSe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Rie="references",_ie=class{constructor(){this.id=Rie;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new fSe}processor(e){return new dSe(e)}};var Sk=s(()=>[h1,FA,Rie,Ld],"mandatorySkills"),kie=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new hie(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!Sk().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!Sk().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!Sk().includes(u)))}return c.push(...Sk()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(Yi).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Yi).getSupportedSkills(r.id),a=e.get(Pl).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await p1(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...Sk(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var Pie=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Kr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Kr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var Die=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Kr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var Nw=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new pSe(this),this.steps=new Die(e,r,n,e.get(ca)),this.collector=new mSe(r,n,e.get(ca)),this.agentToolCalls=new Pie(e,r,n,e.get(ca))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return E0.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?E0.agent(e,this.turn.telemetryId):E0.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ca).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},Bie=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},KQ=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},pSe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Yi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(uu).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Bie(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(Pl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(uu).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof Bie||i instanceof KQ)throw i;Kr.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},mSe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function Odt(t,e){let[r,n,i]=await _mr(t,e);return i.push(...Pmr(t)),r.length>0||n.length>0?[new Qt([[new Qt(["Consider the additional context:"]),1],[kw(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(Odt,"fromSkills");async function _mr(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await Dmr(t,a.skillId,e?.languageId??""))continue;let[c,l]=await Rmr(t,a.skillId);c&&(Sk().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(_mr,"handleSkillsInReverse");async function Rmr(t,e){let n=t.ctx.get(Pl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),d=Date.now()-l;return u?await kmr(t,n,c,u,a,d):[void 0,await Nie(t,n,"unprocessable",void 0,a,d)]}else return[void 0,await Nie(t,n,"unresolvable",void 0,a)]}catch(i){if(Kr.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof KQ)throw i;return[void 0,await Nie(t,n,"failed")]}}s(Rmr,"safelyProcessSkill");async function kmr(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Qt([[n,1]]):a=n,[[a,r?.value()||0],await Nie(t,e,"resolved",a,i,o)]}s(kmr,"handleProcessedSkill");async function Nie(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(Wa).getBestChatModelConfig(Om("user")),d=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=$i(u.tokenizer).tokenLength(d)}return t.ctx.get(uu).addResolution(t.turn.id,l),l}s(Nie,"determineResolution");function Pmr(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(Pmr,"handleIgnoredSkills");async function Dmr(t,e,r){if(e!==h1&&e!==FA)return!0;let n=t.ctx.get(Nt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===h1:e===FA}s(Dmr,"includeSkill");var Qdt=Fe(jp());var _k=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=GN(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Qt(n),a]}async elidableSkills(e,r){return await Odt(e,r)}async promptContent(e,r,n){let i,o={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1};e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?i=await EA.getInstructions(e.ctx,e.turn.workspaceFolders,o):e.turn.workspaceFolder&&(i=await EA.getInstructions(e.ctx,[e.turn.workspaceFolder],o));let a=Op(e.conversation.getLastTurn().request.message),c;i?typeof a=="string"?c=i+`

`+a:c=[{type:"text",text:i},...a]:c=a;let[l,u]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:c}],u]}},Lie=class extends _k{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Qdt.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var Udt=Fe(jp());var Mie=class extends _k{static{s(this,"InlineUserPromptStrategy")}suffix(e){return Udt.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var hSe=Fe(jp());var Fie=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=GN(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Qt(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return hSe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=nst(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:JT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:hSe.default`
                    This is the user's question: 
                    ${ln(i).trim()} 
                `.trim()}],[]]}};f();var qdt=Fe(jp());var Oie=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=JT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return qdt.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=GN(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Qt(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var Bmr=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Qie=class extends _k{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=Op(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:Bmr,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=JT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!UK(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!UK(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var gSe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function JQ(t,e,r){return new gSe(t,e,r)}s(JQ,"descriptor");var Hdt=[JQ("user",Om("user"),()=>new Lie),JQ("inline",Om("inline"),()=>new Mie),JQ("meta",Om("meta"),()=>new Fie),JQ("suggestions",Om("suggestions"),()=>new Oie),JQ("synonyms",Om("synonyms"),()=>new Qie)],Uie=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=Hdt.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return Hdt}};var $dt=require("console");var zu=class{constructor(e,r=new Uie){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(On).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(sl).inspectPrompt({type:r.promptType,prompt:Wdt(c),tokens:l}),this.ctx.get(uu).addPrompt(e.turn.id,Wdt(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,$dt.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:Nmr(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,sSe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),sSe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(dn).getEditorInfo().readableName??this.ctx.get(dn).getEditorInfo().name,i=Lmr(process.platform);return Rdt(this.ctx,n,r?.login,i,e)}};function Nmr(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(Nmr,"processResultOfElidableText");function Wdt(t){return t.map(e=>ln(e.content)).join(`

`)}s(Wdt,"debugChatMessages");function Lmr(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(Lmr,"mapPlatformToOs");var VN=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Go.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(zu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,r,l);if(d.type!=="success"&&(Kr.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,r,l)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Kr.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){Kr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Kr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Kr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Kr.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var zN=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(gGe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(sc).workspaceCount})),await this.turnContext.ctx.get(sl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:ln(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:nw.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},AGe(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:ln(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new VN(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Kr.debug(this.turnContext.ctx,"Computed followup",c),Kr.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:gr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return xGe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",yGe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};f();var qie=I.Union([I.String(),I.Number()]),Rk=I.Union([I.String(),I.Number()]),Mmr=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),Hie=I.Object({uri:I.String(),position:I.Optional(jl)}),XQ=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(Cc),selection:I.Optional(Cc),status:I.Optional(Mmr),range:I.Optional(Cc)}),Fmr=I.Object({type:I.Literal("directory"),uri:I.String()}),YN=I.Union([XQ,Fmr,jlt]),Lh=I.Union([I.Literal("panel"),I.Literal("inline")]),Omr=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),ASe=I.Union([I.String(),I.Array(Omr)]),jdt=I.Object({request:ASe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(Rk),model:I.Optional(I.String())});function Wie(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(Wie,"convertToMessageContent");function $ie(t,e){if(t=Op(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s($ie,"appendToMessage");var jie=I.Union([I.Literal("Ask"),I.Literal("Agent")]),Qmr=I.Object({type:I.String(),description:I.String()}),Gdt=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),Qmr),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),Gie=I.Object({uri:I.String(),name:I.String()});var ySe="generate-response",Vie=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},ZQ=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Ha(r.ctx),this.postProcessor=new zN(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof Vie?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await Tc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(sl).inspectPrompt(c),await n.steps.start(ySe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:Op(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return gr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return aSe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:Op(r.request.message)}),r.response&&r.response.type==="model"){let i=$lt(r.response.references);n.push({role:"assistant",content:Op(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Zlt(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new ww((p,m,h,g,A)=>{let y=A?{...A,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(E=>({message:E.message,severity:"warning"})),confirmationRequest:y}),this.turn.response?(this.turn.response.message=$ie(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),y&&(this.turn.confirmationRequest=y)}),l=await this.turnContext.ctx.get(Yr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:ln(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),ln(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Vie("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return jF(this.conversation,"conversationPanel",ln(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(ySe,e.error.message):await r.steps.finish(ySe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var eU=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new ZQ(this,e)}},zie=class extends eU{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new ZQ(this,e)}};f();var Umr="github",QA=class{static{s(this,"RemoteAgentRegistry")}},Yie=class extends QA{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await y2(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(sn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||sn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||sn.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Umr).map(i=>new eU(i.id,i.slug,i.name,i.description,i.avatar_url))}};var CSe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[qN]}};async function p1(t){let e=[];return e.push(new zie),e.push(...await t.get(QA).agents()),e.push(new CSe),e}s(p1,"getAgents");var qmr=I.Object({});async function Hmr(t,e,r){return[(await p1(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(Hmr,"handleConversationAgentsChecked");var Vdt=rt(qmr,Hmr);f();f();var tU=Fe(Jc());function Wmr(t,e,r){let n=qr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(Wmr,"telemetryVersionMismatch");async function UA(t,e,r){let i=t.get(yr).getTextDocumentUnsafe(e);if(!i)throw new tU.ResponseError(xr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await Yv(t,e,i.getText());if(o.status==="invalid")throw t.get(Eo).setInactive(o.reason),new tU.ResponseError(xr.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(Wmr(t,i,e.version),Yu.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new tU.ResponseError(xr.ContentModified,"Document Version Mismatch");return i}s(UA,"getTextDocument");async function g1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await UA(t,n,r)}catch(i){if(i instanceof tU.ResponseError&&i.code===xr.CopilotNotAvailable)return;throw i}}s(g1,"getTextDocumentIfAvailable");var $mr=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),jmr=I.Object({turnId:Rk,codeBlockIndex:I.Number(),source:$mr,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(Hie),textDocument:I.Optional($f),position:I.Optional(jl),conversationSource:I.Optional(Lh)});async function Gmr(t,e,r){let n=await g1(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=sT(r.conversationSource),c=t.get(Yi).findByTurnId(r.turnId),l=await Tc(t,c,{languageId:n?.detectedLanguageId??""});return uf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Kl(a)}.acceptedCopy`,l),["OK",null]}s(Gmr,"handleConversationCodeCopyChecked");var zdt=rt(jmr,Gmr);f();var Vmr=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),zmr=I.Object({turnId:Rk,source:Vmr,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(Hie),textDocument:I.Optional($f),position:I.Optional(jl),conversationSource:I.Optional(Lh)});async function Ymr(t,e,r){let n=await g1(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=sT(r.conversationSource),c=t.get(Yi).findByTurnId(r.turnId),l=await Tc(t,c,{languageId:n?.detectedLanguageId??""});return uf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Kl(a)}.acceptedInsert`,l),["OK",null]}s(Ymr,"handleConversationCodeInsertChecked");var Ydt=rt(zmr,Ymr);f();f();var Kie=I.Array(Cc);function Jie(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Jie,"resolveAsActiveEditor");f();var Kdt=Fe(Jc());var Xie=new Kdt.ProgressType,vSe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(kr).connection.sendProgress(Xie,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(kr).connection.sendProgress(Xie,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(kr).connection.sendProgress(Xie,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(kr).connection.sendProgress(Xie,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function KN(t){return new vSe(t.workDoneToken)}s(KN,"createProgressHandler");f();f();f();var Ku=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var ZE=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var JN=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var Jdt="```",rU=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,Kmr=String.raw`${Jdt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Jdt}`,Jmr=new RegExp(rU+`
`+Kmr,"gs"),ESe=["replace","delete"];function xSe(t,e){let r=t.matchAll(Jmr),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!ESe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((A,y)=>{d[y]=A.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:c,end:l},h=bSe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(xSe,"extractEditsFromTaggedCodeblocks");function bSe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,d)=>{c[d]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(bSe,"applyEditsToDocument");f();f();f();f();var ex=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new Qp({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var Xmr=new It("activeEditorPrompt");async function Xdt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new kc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&Zmr(n.selection)){let o=new ex(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Hi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new ex(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new ex(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Hi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new ex(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else Xmr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Xdt,"processActiveEditor");function Zmr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(Zmr,"notEmptySelection");f();f();function Zdt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Zdt,"partsLength");async function tft(t,e=1/0,r){let n=eft(0,t,e),i=e-Zdt(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return ehr();let u=eft(c.level+1,l,i-1);u.length&&(o=!0,i-=Zdt(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(tft,"visualFileTree");function eft(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(eft,"toParts");var ehr=s(()=>({tree:"",files:[]}),"emptyTree");var thr=new It("fileReferencesPrompt");async function rft(t,e,r,n){let i=await nft(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=XB(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(rft,"generateWorkspaceStructurePrompt");async function nft(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await tft(await ift(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(nft,"generateWorkspaceStructure");async function ift(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(To).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=Mo(e,o);return r.excludeDotFiles&&o.startsWith(".")||ihr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>ift(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(ift,"buildFileList");var rhr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],nhr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function ihr(t){return!!(nhr.includes(Hi(t).toLowerCase())||vs(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>rhr.includes(r)))}s(ihr,"shouldAlwaysIgnoreFile");async function Zie(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Hi(a.uri)})),i=await nft(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${Va(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return thr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(Zie,"processDirectoryReferences");var ohr=new It("fileReferencesPrompt");async function oft(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new kc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new ex(h,void 0,[]);g&&m.push(...g.render())}else ohr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),Xdt(t,e),Zie(t.context,e,n)]),u=a.flat(),d=l||[];return u.length>0||c.length>0||d.length>0?["<attachments>",...u,...c,...d,"</attachments>"]:[]}s(oft,"processFileReferences");var sft=new It("editAgentPrompt"),eoe=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=xbe(this.currentTurn.response?.message,!0),o=await EA.appendToUserMessage(this.ctx,this.props.workspaceFolders,ln(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return L7(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(c=>c.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:Op(n.request.message)}),n.response){let i=xbe(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):sft.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=M7(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+DQ(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(fte(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){sft.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=M7(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${Rl}`),o.push("changed code"),o.push(`// ${Rl}`),o.push("changed code"),o.push(`// ${Rl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${Rl}`),o.push("	age: number;"),o.push(`	// ${Rl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await oft({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${Rl}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${vs(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await rft(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var aft=128,shr=100,XN=new It("toolCallingLoop"),toe=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ca),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(Nd),this.prompt=new eoe(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new wE(this.turnContext.ctx)}),this.requestId=gr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId}),this.maxToolCallingLoop=Math.min(shr,Wi(e.ctx,qt.MaxToolCallingLoop))}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(IGe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new ww((u,d,p,m)=>{let h=u.trim().match(rU)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),XN.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),XN.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Ku({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new kc;case"failed":throw this.turn.status="error",new Ku({message:nw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new Ku({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Ku({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Ku({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Ku({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Ku({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Ku({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Ku({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Ku({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=JT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),d=this.shouldRequireToolConfirmation();await this.requestToolInvocationApproval(u,d,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=dlt(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=vne(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof ZE||l instanceof kc)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new ho([new Li("")],"cancelled"),e.id),new ZE(l.message);{XN.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${Xv(l)}`,l),c="error";let u=new ho([new Li(Xv(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=vne(u);await this.turnContext.agentToolCalls.error(n,e.id,d.message)}}finally{let l=performance.now()-a;TGe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;XN.error(this.turnContext.ctx,a);let c=new ho([new Li(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=vne(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(){return Wi(this.turnContext.ctx,qt.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new kc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new ZE("Cancelled by user");case"accept":return Promise.resolve();default:throw new ZE(`Invalid confirmation result ${u.result}`)}}else XN.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw XN.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new JN}checkChatPayload(e){if(e.messages.length===0)throw new Ku({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>aft)throw new Ku({message:`You may not include more than ${aft} tools in your request.`,responseIsFiltered:!1})}};var roe=new It("agenticTurnProcessor"),noe=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Ha(e.ctx),this.turnSuggestions=new VN(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o,a)}catch(c){Kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:ZTe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a,c){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Tc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{roe.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let u=c&&a?await t3(this.turnContext.ctx,c,a):await Go.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(u),await new toe(this.turnContext,this.chatFetcher,u,l).run(r);let p={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let m=await this.fetchSuggestedTitle(r,l.extendedBy({messageSource:"chat.user"},{}));typeof m=="string"&&m!==""&&(p.suggestedTitle=m)}await this.endProgress(p)}catch(u){if(u instanceof ZE)roe.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,u),this.turn.status="cancelled",await this.cancelProgress();else if(u instanceof kc)roe.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,u),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(u instanceof JN)this.turn.status="error",this.updateTurnResponseWithError(u.message),await this.endProgress({error:{message:u.message,code:ZTe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(u instanceof Ku)this.turn.status="error",this.updateTurnResponseWithError(u.message),await this.endProgress({error:u.conversationError});else throw roe.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,u),u}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Kr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=M7(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var ISe="collect-context",TSe="generate-response",ioe=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Ha(e.ctx),this.postProcessor=new zN(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModel(e,r,this.turnContext,n,i,o,a)}catch(c){Kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a,c){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Tc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(l=l.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=$Q().find(h=>h.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}let d=(await p1(this.turnContext.ctx)).find(h=>h.slug===this.turn.agent?.agentSlug);if(d){let h=await this.checkAgentPreconditions(d);if(h){await this.endProgress(h);return}}await n.steps.start(ISe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,u,d);let p;c?p="customized":a?p=(await this.turnContext.ctx.get(Wa).getBestChatModelConfig([a])).uiName:p=void 0;let m=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,p);if(!m)await n.steps.error(ISe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(ISe),await n.steps.start(TSe,"Generating response");let h=this.augmentTelemetry(m,l,u,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let g=await this.fetchConversationResponse(m.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:m.tokens}),h,o,a,c),A=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(g,n),await this.endProgress({error:g.error,followUp:g.followup,suggestedTitle:g.suggestedTitle,skillResolutions:m.skillResolutions,updatedDocuments:A}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Kr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new kie(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a,c){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",u=0,d=new ww((A,y,E,b)=>{let w=A.trim().match(rU)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:A,annotations:y,references:E,hideText:w,notifications:b.map(R=>({severity:"warning",message:R.message}))}),this.turn.response?this.turn.response.message=$ie(this.turn.response.message,A):this.turn.response={message:A,type:"model"},this.turn.annotations.push(...y??[]),l+=A,this.strategy.currentDocument){let R=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);R&&R.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:R}),u+=R.length)}}),p=c&&a?await t3(this.turnContext.ctx,c,a):await Go.getModelConfiguration(this.turnContext.ctx,"user",a);e=Go.transformMessages(e,p.modelFamily),this.turnContext.setResolvedModelConfiguration(p);let m=this.turn.getResolvedModelId();m&&(i=i.extendedBy({modelId:m}));let h={modelConfiguration:p,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:ln(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},g=await this.chatFetcher.fetchResponse(h,r,n,(A,y)=>d.isFinishedAfter(A,y));return i=i.extendedBy(void 0,{numCodeEdits:u}),await this.postProcessor.postProcess(g,r,d.appliedText,n,i,ln(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",CGe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,ln(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=jF(this.conversation,this.strategy.uiKind,ln(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=jF(this.conversation,this.strategy.uiKind,ln(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(TSe,e.error.message):await r.steps.finish(TSe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var ooe=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Go.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(zu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},soe=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(Wa).getBestChatModelConfig(Om(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(zu).toPrompt(e,l)}async processResponse(e){let r=[],n=ln(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(Ld);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(vn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=xSe(e,r).filter(a=>ESe.includes(a.mode)),o=bSe(i,r);if(o)return await this.ctx.get(sl).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return xSe(e,r)}};f();f();var cft=Fe(Jc()),lft=Fe(Kg());var Ef=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new cft.ProtocolRequestType("conversation/context");this.typeCheck=zs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(kr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new lft.ResponseError(c.code,c.message,c.data);Kr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Kr.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Gu(this.typeCheck.Errors(i));return i}}};var wSe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},tx=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new wSe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},aoe=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ca)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Kr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Yi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Ef(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await fC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:gr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var rx=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(tx).get(r);if(i)return new aoe(e,i);let a=(await p1(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new soe(e.ctx):c=new ooe(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new noe(e,c):new ioe(e,c)}};f();var uft=Fe(Jc());var ZN=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new uft.ResponseError(xr.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function coe(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Hi(t.uri)}]}s(coe,"resolveAsWorkspaceFolders");f();f();var ahr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),P0=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?ahr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var xf=class{constructor(){this.tokens=new Ur(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new Fn.CancellationTokenSource,i=new P0([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var chr=I.Object({conversationId:I.Optional(qie),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(jdt,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional($f),textDocument:I.Optional($f),selection:I.Optional(Cc),visibleRanges:I.Optional(Kie),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(YN)),source:I.Optional(Lh),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Gie)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),modelProviderName:I.Optional(I.String()),chatMode:I.Optional(jie),needToolCallConfirmation:I.Optional(I.Boolean())});async function lhr(t,e,r){ZN.validate(r.workspaceFolders);let n=await g1(t,r,e),i=t.get(Yi).create(r);await uhr(t,i,r,n);let o=i.turns[i.turns.length-1],a=KN(r),c=t.get(xf).add(a.progressToken,e),l=new Nw(t,i,o,c);return await(await t.get(rx).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model,r.modelProviderName),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(lhr,"handleConversationCreateChecked");async function uhr(t,e,r,n){for(let i of r.turns){let o=Wie(i.request),a=new Sw({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=Yne(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:coe(c),u=Jie({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Yi).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(uhr,"addTurns");var dft=rt(chr,lhr);f();var dhr=I.Object({conversationId:I.String()});function fhr(t,e,r){return t.get(Yi).destroy(r.conversationId),["OK",null]}s(fhr,"handleConversationDestroyChecked");var fft=rt(dhr,fhr);f();var phr=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),mhr=new It("conversationNotifyCodeAcceptance");async function hhr(t,e,r){let n=t.get(Yi).findByTurnId(r.turnId);if(!n)return mhr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await Tc(t,n,{languageId:""});return uf(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Kl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(hhr,"handleConversationNotifyCodeAcceptanceChecked");var pft=rt(phr,hhr);f();var ghr=I.Object({});function Ahr(t,e,r){return[{path:t.get(Bi).directory},null]}s(Ahr,"handleConversationPersistenceChecked");var mft=rt(ghr,Ahr);f();f();var SSe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(On).getSession(),n=e.get(Gl);return r&&r.githubAppId&&r.githubAppId!==np?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},_Se=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Yr).getToken()).envelope.chat_enabled?"ok":"failed"}}},yhr=[new SSe,new _Se],Mh=class{constructor(e,r=yhr){this.ctx=e;this.checks=r;this.emitter=new Oa;this.onChange=this.emitter.event;ws(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var Chr=I.Object({forceCheck:I.Optional(I.Boolean())});async function vhr(t,e,r){let n=r.forceCheck??!1;return[await t.get(Mh).check(n),null]}s(vhr,"handleConversationPreconditionsChecked");var hft=rt(Chr,vhr);f();var Ehr=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional($f),textDocument:I.Optional($f),source:I.Optional(Lh)});async function xhr(t,e,r){let n=await g1(t,r,e),i=sT(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await Tc(t,t.get(Yi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return uf(t,n,{rating:o,uiKind:i},{},`${Kl(i)}.messageRating`,a),["OK",null]}s(xhr,"handleConversationRatingChecked");var gft=rt(Ehr,xhr);f();f();var loe=class extends bw{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:n1,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(XT).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new kc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(WC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var bhr=I.Object({tools:I.Array(Gdt)});function Ihr(t,e,r){return r.tools.forEach(n=>{t.get(Nd).registerTool(new loe({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(Ihr,"conversationRegisterToolsChecked");var Aft=rt(bhr,Ihr);f();var Thr=I.Object({});function whr(t,e,r){return[Hwe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(whr,"handleConversationTemplatesChecked");var yft=rt(Thr,whr);f();var Shr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:qie,turnId:I.Optional(Rk),message:ASe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional($f),textDocument:I.Optional($f),selection:I.Optional(Cc),visibleRanges:I.Optional(Kie),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(YN)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Gie)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:ist,model:I.Optional(I.String()),modelProviderName:I.Optional(I.String()),chatMode:I.Optional(jie),needToolCallConfirmation:I.Optional(I.Boolean())});async function _hr(t,e,r){ZN.validate(r.workspaceFolders);let n=await g1(t,r,e),i=t.get(Yi),o=i.get(r.conversationId),a=Wie(r.message),c=new Sw({message:a,type:"user"},r.turnId);c.chatMode=Yne(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:coe(l),d=Jie({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,d,l,u,r.ignoredSkills,r.confirmationResponse);let p=KN(r),m=t.get(xf).add(p.progressToken,e),h=new Nw(t,o,c,m);return await(await t.get(rx).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(_hr,"handleConversationTurnChecked");var Cft=rt(Shr,_hr);f();var Rhr=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(Lh)});async function khr(t,e,r){t.get(Yi).deleteTurn(r.conversationId,r.turnId);let i=sT(r.source),o=await Tc(t,t.get(Yi).findByTurnId(r.turnId),{languageId:""});return uf(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Kl(i)}.messageDelete`,o),["OK",null]}s(khr,"handleConversationTurnDeleteChecked");var vft=rt(Rhr,khr);f();var Phr=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function Dhr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(Dhr,"buildSystemMessage");function Bhr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Bhr,"buildUserMessage");function Nhr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],A=Math.max(g.search(/\S/),0),y=g.trimEnd().length,E={uri:t.uri,range:{start:{line:h,character:A},end:{line:h,character:y}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};r.push(E)}return r}s(Nhr,"parseReviewComments");async function Lhr(t,e,r){if(!r.document.text)return[null,{code:xr.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:xr.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:xr.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:xr.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:xr.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(Ha),o=await Go.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:Dhr()},{role:"user",content:Bhr(r)}],c=await t.get(Nt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:E0.user("code-review",gr())},e,c);if(l.type!=="success")return[null,{code:xr.InternalError,message:"Failed to generate code review"}];let u=Nhr(r.document,l.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(Lhr,"handleCopilotCodeReviewChecked");var Eft=rt(Phr,Lhr);f();f();var Lw=class{constructor(e,r,n,i,o,a){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.userSelectedModelProviderName=a;this.workingSetUriToPathMap=new Map;for(let c of n.workingSet)this.workingSetUriToPathMap.set(c.uri,NE.uriToPath(c.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return E0.user("conversation-edits",this.editTurnId)}};f();async function uoe(t,e,r,n){let o=t.get(ol).create("panel","en"),a=new iw({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new Lw(t,o,a,n,fn.Gpt4o),u=t.get($u);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(uoe,"streamMockedResult");f();var Mhr=I.Object({enableMock:I.Boolean()}),A1=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Fhr(t,e,r){return t.get(A1).setMockEnabled(r.enableMock),["OK",null]}s(Fhr,"handleTestingSetCopilotEditsResponseChecked");var xft=rt(Mhr,Fhr);var Ohr=I.Object({request:I.String(),response:I.Optional(I.String())}),Qhr=I.Union([I.Literal("panel")]),Uhr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(Ohr,{minItems:1}),workingSet:I.Optional(I.Array(XQ)),source:I.Optional(Qhr),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),modelProviderName:I.Optional(I.String())});function qhr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new iw({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(qhr,"buildEditConversation");async function Hhr(t,e,r){if(t.get(A1).isMockEnabled())return await uoe(t,gr(),gr(),r.partialResultToken),[[],null];let n=qhr(t.get(ol),r),i=n.getLastTurn(),o=new Lw(t,n,i,r.partialResultToken,r.model,r.modelProviderName),a=t.get(xf).add(r.partialResultToken,e);return[await t.get(LE).createOrContinueEditConversation(o,a),null]}s(Hhr,"handleEditConversationCreateChecked");var bft=rt(Uhr,Hhr);f();var Whr=I.Object({editConversationId:I.String()});function $hr(t,e,r){return t.get(ol).destroy(r.editConversationId),["OK",null]}s($hr,"handleEditConversationDestroyChecked");var Ift=rt(Whr,$hr);f();var jhr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(XQ)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Ghr(t,e,r){let n=t.get(e),i=new iw({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(Ghr,"buildEditConversation");async function Vhr(t,e,r){if(t.get(A1).isMockEnabled())return await uoe(t,r.editConversationId,gr(),r.partialResultToken),[[],null];let n=t.get(ol),i=Ghr(n,r.editConversationId,r),o=i.getLastTurn(),a=new Lw(t,i,o,r.partialResultToken,r.model),c=t.get(xf).add(r.partialResultToken,e);return[await t.get(LE).createOrContinueEditConversation(a,c),null]}s(Vhr,"handleEditConversationTurnChecked");var Tft=rt(jhr,Vhr);f();var zhr=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(Lh)});async function Yhr(t,e,r){t.get(ol).deleteTurn(r.editConversationId,r.editTurnId);let i=await $F(t,r.editTurnId,r.editConversationId,{languageId:""});return uf(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Kl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(Yhr,"handleEditConversationTurnDeleteChecked");var wft=rt(zhr,Yhr);f();var Khr=I.Object({}),Jhr=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(eQ)}))}))});function Xhr(t,e,r){return[t.get(Rh).getAllTools(),null]}s(Xhr,"handleGetMCPToolsChecked");function Zhr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(Rh).updateMCPToolStatus(i,a,c);return[t.get(Rh).getAllTools(),null]}s(Zhr,"handleUpdateMCPToolsStatusChecked");var Sft=rt(Khr,Xhr),_ft=rt(Jhr,Zhr);f();var egr=I.Object({});async function tgr(t,e,r){let n=await t.get(Yr).getToken();return[rgr(await t.get(nf).getMetadata(),n),null]}s(tgr,"handleCopilotModelsChecked");function rgr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=Um.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!nUe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(rgr,"filterModels");var Rft=rt(egr,tgr);f();var ngr=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function igr(t,e,r){return r.model&&r.status==="enabled"?await t.get(nf).acceptModelPolicy(r.model)?["OK",null]:[null,{code:xr.InternalError,message:"Failed to accept model policy"}]:[null,{code:xr.InvalidRequest,message:"Invalid model or status"}]}s(igr,"handleCopilotModelsPolicyChecked");var kft=rt(ngr,igr);f();f();f();f();function ogr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(ogr,"panelPositionForDocument");async function*Pft(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Pft,"trimChoices");var e8=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=ogr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function RSe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await RSe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(RSe,"reportSolutions");async function kSe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:kSe(t,e)}}s(kSe,"generateSolutionsStream");function doe(t){return t.replace(/\s+/g,"")}s(doe,"normalizeCompletionText");async function Dft(t,e,r,n,i){let o=e.targetPosition,a=e.textDocument,c=qI(t,a.uri),l=gr(),u=qr.createAndMarkAsIssued({headerRequestId:l,languageId:a.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Nt).updateExPValuesAndAssignments({uri:a.uri,languageId:a.detectedLanguageId},u),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i}));let d=await L3(t,l,CC(a,o),e.savedTelemetryData);if(d.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(d.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(d.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(d.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(d.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let p=d.prompt,m=d.trailingWs;return m.length>0&&(e.startPosition=ms.position(e.startPosition.line,e.startPosition.character-m.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...T4(p),solutionCount:e.solutionCountTarget,promptEndPos:a.offsetAt(o)}),n.debug(t,"prompt:",p),Bt(t,"solution.requested",e.savedTelemetryData),{prompt:p,trailingWs:m,telemetryData:e.savedTelemetryData,repoInfo:c,ourRequestId:l}}s(Dft,"setupPromptAndTelemetry");function Bft(t,e,r,n,i,o){let a=t.get(Vg).forLanguage(t,e.detectedLanguageId,o),c=Ap(e.detectedLanguageId),l=sJ(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},d={};a==="parsing"&&!c&&(d.stop=[`

`,`\r
\r
`]);let p=UI(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?zF(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?zF(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:d,finishedCb:m,engineInfo:p}}s(Bft,"setupCompletionParams");var PSe=new It("solutions");async function sgr(t,e){let r=e.targetPosition,n=e.textDocument,i=await Dft(t,e,"open copilot",PSe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:d,postOptions:p,finishedCb:m,engineInfo:h}=Bft(t,n,r,o,e,c),g=e.cancellationToken,A={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:d},y=await t.get(s0).fetchAndStreamCompletions(t,A,c.extendedBy(),m,g);if(y.type==="failed"||y.type==="canceled")return{status:"FinishedWithError",error:`${y.type}: ${y.reason}`};let E=y.choices;E=Pft(E),E=WF(E,R=>cO(t,n,r,R,!1,PSe));let b=WF(E,async R=>{let D=R.completionText;PSe.info(t,`Open Copilot completion: [${R.completionText}]`);let N=await iVe(t,n,r,R.completionText)??ms.position(r.line,0),[O]=mT(n.getText(ms.range(N,r)));D=O+D;let Y=R.completionText;a.length>0&&Y.startsWith(a)&&(Y=Y.substring(a.length));let ee=R.meanLogProb,V=ee!==void 0?Math.exp(ee):0,H=c.extendedBy({choiceIndex:R.choiceIndex.toString()});return{completionText:Y,insertText:D,range:ms.range(N,r),meanProb:V,meanLogProb:ee||0,requestId:R.requestId,choiceIndex:R.choiceIndex,telemetryData:H,copilotAnnotations:R.copilotAnnotations}});return kSe(g,b[Symbol.asyncIterator]())}s(sgr,"launchSolutions");async function foe(t,e,r){return t.get(Eo).withProgress(async()=>{let i=sgr(t,e);return await RSe(i,r)})}s(foe,"runSolutions");var Lft=Fe(Lb()),iU=Fe(Jc());f();f();function poe(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(poe,"parseChallengeDoc");var agr=I.Object({text:I.String(),score:I.Number()}),cgr=I.Object({documents:I.Array(agr),options:I.Optional(I.Object({}))});async function moe(t,e,r){let n=gr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=poe(o,t),d=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:Ly.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(moe,"runTestSolutions");var qA=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function lgr(t,e,r){return t.forceSet(qA,new qA(r.documents)),["OK",null]}s(lgr,"handleTestingSetPanelCompletionDocumentsChecked");var Nft=rt(cgr,lgr);var Mft=X$.type;function ugr(t,e,r,n,i){let o=doe(n.completionText),a=(0,Lft.SHA256)(o).toString();return t.get(Os).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:JTe,title:`Accept completion ${i}`,arguments:[a]}}}s(ugr,"makeCompletion");function BSe(t,e){return`${t}/${e}`}s(BSe,"progressMessage");var DSe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(kr)}async onSolution(e){this.count+=1;let r=ugr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(iU.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:BSe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return dgr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(iU.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function dgr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(iU.WorkDoneProgress.type,t,{kind:"end",message:BSe(r,10)})}s(dgr,"reportDone");var nU;async function fgr(t,e,r){let n=await UA(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(kr).connection.sendProgress(iU.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:BSe(0,10),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async d=>{await t.get(kr).connection.sendProgress(X$.partialResult,c,{items:[d]})},"onCompletion"));let l=new DSe(t,r,a),u=t.get(qA);if(u.documents){let d=u.documents;await moe(i,d,l)}else{l.offset=n.offsetAt(i);let d=new e8(n,i,e,10);await foe(t,d,l)}return l.error!==void 0?[null,{code:xr.InternalError,message:l.error}]:[{items:o},null]}s(fgr,"handleChecked");async function pgr(t,e,r){nU&&(nU.cancel(),nU.dispose()),nU=new Fn.CancellationTokenSource;let n=nU.token,i=new P0([e,n]);try{return await fgr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:xr.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(pgr,"handleCheckedWithAbort");var Fft=rt(O8e,pgr);f();f();f();function hgr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(zd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(d){return new URL(d).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(hgr,"urlsToCheck");async function Oft(t,e,r=_4(t),n,i){let o=hgr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:d}=await ggr(e,c,l,i);return{label:a,url:c,message:u,status:d}});return await Promise.all(o)}s(Oft,"checkReachability");async function ggr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(ggr,"determineReachability");var Vp=Fe(require("os")),t8=Fe(require("tls"));async function Uft(t,e){let r=await t.get(yn).getImplementation(),n=await t.get(Yr).getGitHubSession(),i=await t.get(Yr).getToken().catch(()=>{});return{sections:[ygr(t),Agr(t,n),Cgr(t,r),await vgr(t,r,i?.endpoints,n,e)]}}s(Uft,"collectDiagnostics");function qft(t){return t.sections.map(Egr).join(Vp.EOL+Vp.EOL)+Vp.EOL}s(qft,"formatDiagnosticsAsMarkdown");function Agr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:d_(t),"GitHub Account":n,"Session ID":t.get(Ss).sessionId,"Send Restricted Telemetry":w4(t)?"enabled":"disabled","Content Exclusion":t.get(Xc).enabled?"enabled":"unavailable"}}}s(Agr,"collectCopilotSection");function ygr(t){let e={Plugin:bgr(t),Editor:xgr(t),"Operating System":`${Vp.type()} ${Vp.release()} (${Vp.arch()})`};return y1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(ygr,"collectEnvironmentSection");function Cgr(t,e){let r=t.get(gl).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":t8.rootCertificates.length,"TLS Default Min Version":t8.DEFAULT_MIN_VERSION,"TLS Default Max Version":t8.DEFAULT_MAX_VERSION};return y1(n,"http_proxy"),y1(n,"https_proxy"),y1(n,"no_proxy"),y1(n,"SSL_CERT_FILE"),y1(n,"SSL_CERT_DIR"),y1(n,"OPENSSL_CONF"),y1(n,"NODE_EXTRA_CA_CERTS"),y1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(Cgr,"collectNetworkConfigSection");async function vgr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Oft(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(vgr,"collectReachabilitySection");function Qft(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(Qft,"quoteCode");function y1(t,e){let r=process.env[e];r&&(t[Qft(e)]=Qft(r)),r!==process.env[e.toUpperCase()]&&y1(t,e.toUpperCase())}s(y1,"addEnvironmentVariable");function Egr(t){return`## ${t.name}`+Vp.EOL+Vp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Vp.EOL)}s(Egr,"formatSectionAsMarkdown");function xgr(t){let e=t.get(dn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(xgr,"getEditorDisplayVersion");function bgr(t){let e=t.get(dn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(bgr,"getPluginDisplayVersion");var Igr=I.Object({});async function Tgr(t,e){return[{report:qft(await Uft(t,e))},null]}s(Tgr,"handleDiagnosticsChecked");var Hft=rt(Igr,Tgr);f();f();f();f();function Wft(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(l,""),p=u.length-d.length;return c(p)+d}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(Wft,"normalizeIndentCharacter");function $ft(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let d=ms.range(ms.position(i.line,0),ms.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=Wft(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=ms.range(d.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:gr(),insertText:p,range:d,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(d=>d.index===a);if(u){let d=l.filter(p=>p.index!==a);l=[u,...d]}}return l}s($ft,"completionsFromGhostTextResults");async function NSe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await _Ce(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=aYe(t,e.textDocument,e.position,c),u=$ft(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};if(c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let p={isSpeculative:!0,opportunityId:n.opportunityId},m=s(()=>_Ce(t,e,void 0,p),"fn");t.get(sh).set(u[0].clientCompletionId,m)}let d=u.map(p=>{let{start:m,end:h}=p.range,g=Fn.Range.create(m,Fn.Position.create(h.line,h.character-i));return{...p,range:g}});return{...o,value:d}}s(NSe,"getInlineCompletionsResult");async function hoe(t,e,r,n,i={}){wgr(t,e,r);let o=await NSe(t,CC(e,r),n,i);return LGe(t,o)}s(hoe,"getInlineCompletions");function wgr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});jK.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(wgr,"logCompletionLocation");var Kft=Fe(Jc());f();var jft=require("crypto");var r8=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new MSe(e,this.id)}},MSe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(kr),o=(0,jft.randomUUID)(),a=i.connection.onProgress(Y$.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(Y$.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function n8(t,e,r){try{let n=t.get(wc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof r8&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof r8&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){sn.error(t,"Failed to set context items on context providers",n)}}s(n8,"setContextItems");var LSe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function Gft(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Ic(r.uri,i,LSe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Ic(r.uri,i.scheme||"",LSe)),"pattern"in i&&(o&&=Ic(r.uri,i.pattern||"",LSe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Gft,"match");f();var Sgr=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Fw=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function _gr(t,e,r){return t.forceSet(Fw,new Fw(r.documents,r.basename||"")),["OK",null]}s(_gr,"handleTestingSetCompletionDocumentsChecked");var Vft=new It("setCompletionDocuments"),Yft=rt(Sgr,_gr);function goe(t,e,r,n){let i=t.get(Fw);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Vft.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=Rgr(i,r);return a&&a.length>0?zft(a,o,e):void 0}else return Vft.debug(t,"Returning completions for all pre-set documents"),zft(i.documents,o,e)}}s(goe,"getTestCompletions");function zft(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=poe(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(zft,"sliceAndMapCompletions");function Rgr(t,e){return t.basename===Hi(e)?t.documents||[]:[]}s(Rgr,"getFilteredDocs");var Jft=I.Object({doc:I.Object({position:jl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:HM,version:I.Number()}),contextItems:I.Optional(Sye)}),oU;async function Xft(t,e,r,n){oU&&(oU.cancel(),oU.dispose()),oU=new Fn.CancellationTokenSource;let i=new P0([e,oU.token]);r.contextItems&&n8(t,r.contextItems);let o=goe(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:gr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await UA(t,r.doc,i)}catch(p){if(!(p instanceof Kft.ResponseError))throw p;switch(p.code){case xr.CopilotNotAvailable:case xr.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await hoe(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(Os);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Xft,"handleGetCompletionsHelper");var Zft=rt(Jft,(t,e,r)=>Xft(t,e,r,!1)),e0t=rt(Jft,(t,e,r)=>Xft(t,e,r,!0));f();var t0t=Fe(Lb()),i8=Fe(Jc());var kgr=I.Object({doc:I.Object({position:jl,uri:HM,version:I.Number()}),panelId:I.String()});function Pgr(t,e,r,n,i){let o=doe(i.completionText),a=(0,t0t.SHA256)(o).toString();return t.get(Os).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(Pgr,"makeSolution");var FSe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(kr)}onSolution(e){return this.service.connection.sendNotification(new i8.NotificationType("PanelSolution"),Pgr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return r0t(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new i8.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function r0t(t,e){return e.connection.sendNotification(new i8.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(r0t,"reportDone");var sU;async function Dgr(t,e,r){sU&&(sU.cancel(),sU.dispose()),sU=new Fn.CancellationTokenSource;let n=new P0([e,sU.token]),i=r.doc.position,o=ms.range(i,i),a=new FSe(t,r,o),c=t.get(qA);if(c.documents){let l=c.documents;moe(i,l,a)}else{let l;try{l=await UA(t,r.doc,n)}catch(d){if(!(d instanceof i8.ResponseError))throw d;switch(d.code){case xr.CopilotNotAvailable:case xr.ContentModified:return Bgr(t,r)}throw d}a.offset=l.offsetAt(i);let u=new e8(l,i,n,10);foe(t,u,a)}return[{solutionCountTarget:10},null]}s(Dgr,"handleGetPanelCompletionsChecked");async function Bgr(t,e){return await r0t(e.panelId,t.get(kr)),[{solutionCountTarget:0},null]}s(Bgr,"produceEmptySolutions");var n0t=rt(kgr,Dgr);f();var Ngr=I.Object({});function Lgr(t,e,r){return[{version:t.get(yo).getDisplayVersion(),buildType:My(t),runtimeVersion:`node/${process.versions.node}`},null]}s(Lgr,"handleGetVersionChecked");var i0t=rt(Ngr,Lgr);f();var Mgr=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function Fgr(t,e,r){if(r.changes.length===0)return[null,{code:xr.InvalidRequest,message:"No changes provided"}];let n=t.get(Yi),i=n.create({capabilities:{skills:[u1]}}),o=new Sw({message:"",type:"user"});await n.addTurn(i.id,o);let a=KN({workDoneToken:gr()});await t.get(ca).begin(i,o,a);let u=(await new Nw(t,i,o,e).skillResolver.resolve(u1))?.head?.name,p=await t.get(VR).generateCommitMessage(t,e,r,u);return p==null?[null,{code:xr.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:p},null]}s(Fgr,"handleGitCommitGenerateChecked");var o0t=rt(Mgr,Fgr);f();var a0t=ffe.type,aU;function s0t(t){return{title:"Completion Accepted",command:MQ,arguments:[t]}}s(s0t,"makeCommand");async function Ogr(t,e,r){aU&&(aU.cancel(),aU.dispose());let n=r.context.triggerKind===1;aU=new Fn.CancellationTokenSource;let i=aU.token,o=new P0([e,i]);r.contextItems&&n8(t,r.contextItems,r.data);let a=goe(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:s0t(gr()),...h}))},null];let c=await UA(t,r.textDocument,o),l=r.position,u=await hoe(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:xr.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:xr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(Os);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:s0t(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(Ogr,"handleChecked");var c0t=rt(YK,(t,e,r)=>Ogr(t,e,r));f();var l0t=hfe.type,cU;async function Ugr(t,e,r){cU&&(cU.cancel(),cU.dispose());let n=r.context.triggerKind===1;cU=new Fn.CancellationTokenSource;let i=cU.token,o=new P0([e,i]);r.contextItems&&n8(t,r.contextItems);let a=await UA(t,r.textDocument,o),c=await NSe(t,CC(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(Ugr,"handleChecked");var u0t=rt(YK,(t,e,r)=>Ugr(t,e,r));f();f();function OSe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return o8(i)}s(OSe,"asReadableCert");function o8(t){return t.replace(/\s/g,"")}s(o8,"normalizeNewlines");var Hgr=I.Object({});async function Wgr(t){return[{certificates:(await t.get(nl).getAllRootCAs()).map(o8)},null]}s(Wgr,"handleListCertificatesChecked");var d0t=rt(Hgr,Wgr);f();async function $gr(t,e,r){let n=t.get(NA);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=yl(r.textDocument.uri);t.get(oA).onUserPositionChange(i,new Fr(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:MQ,arguments:[c.id]}}))},null]:[{edits:[]},null]}s($gr,"handleChecked");var f0t=rt(M8e,$gr);f();var Ggr=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function Vgr(t,e,r){let n=t.get(Os),i=n.get(r.uuid);return i&&(zgr(r,i)==="full"?(n.delete(r.uuid),F3(t,i,i.triggerCategory)):wX(t,i,r.acceptedLength,0,i.triggerCategory,"cumulative")),["OK",null]}s(Vgr,"notifyAcceptedChecked");function zgr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}s(zgr,"getCompletionType");var p0t=rt(Ggr,Vgr);f();var Ygr=I.Object({uuids:I.Array(I.String())});function Kgr(t,e,r){let n=t.get(Os),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));TX(t,"ghostText",o.offset,o.uri,a),t.get(Ou).resetState()}return["OK",null]}s(Kgr,"notifyRejectedChecked");var m0t=rt(Ygr,Kgr);f();var Jgr=I.Object({uuid:I.String({minLength:1})});function Xgr(t,e,r){let i=t.get(Os).get(r.uuid);return i&&GK(t,i.triggerCategory,i),["OK",null]}s(Xgr,"notifyShownChecked");var h0t=rt(Jgr,Xgr);f();var Zgr=zGe;function eAr(t,e,r){let n=t.get(wc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new r8(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(eAr,"registerContextProviders");var g0t=rt(Zgr,eAr);f();f();var tAr=I.Object({uri:I.Optional(I.String())}),rAr=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),y0t=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[Zke]:I.Optional(tAr),http:I.Optional(mqe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),USe=Object.keys(y0t.properties).filter(t=>t!=="github"),nAr=I.Intersect([y0t,rAr]),iAr=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),A0t=zs.Compile(iAr),QSe=zs.Compile(nAr);async function C0t(t,e){if(!A0t.Check(e))throw new Gu(A0t.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&qSe(t,r),await lU(t,r)}s(C0t,"notifyChangeConfiguration");function qSe(t,e){for(let n of QSe.Errors(e)){let i=n.path.split("/")?.[1];Yu.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[i]}if(!QSe.Check(e))throw new Gu(QSe.Errors(e));e.http&&HSe(t,e.http);let r=e["github-enterprise"];r&&Z8e(t,r.uri),e.github?.copilot&&oAr(t,e.github.copilot)}s(qSe,"applySettingsToConfiguration");function oAr(t,e){let r=t.get(Tw),n={};for(let i of Object.values(qt)){let o=Cqe(e,i);n[i]=o}r.setCopilotSettings(n),typeof e.mcp=="string"&&cAr(t,e.mcp),sAr(t,e.globalCopilotInstructions||""),aAr(t,e.globalGitCommitInstructions||"")}s(oAr,"applyCopilotConfiguration");function sAr(t,e){try{t.get($C).setGlobalCopilotInstructions(e)}catch(r){Yu.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(sAr,"applyGlobalCopilotInstructionsConfiguration");function aAr(t,e){try{t.get($C).setGlobalGitCommitInstructions(e)}catch(r){Yu.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(aAr,"applyGlobalGitCommitInstructionsConfiguration");function HSe(t,e){let r=t.get(Tw);e.proxy===void 0&&(e=hqe(r.env));try{r.setHttpSettings(lF(e))}catch(n){if(!(n instanceof TypeError))throw n;Yu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(HSe,"applyHttpConfiguration");async function cAr(t,e){try{let r=JSON.parse(e||"{}");await t.get(Rh).updateMCPServers(r)}catch(r){Yu.error(t,"Failed to apply MCP configuration",r)}}s(cAr,"applyMCPConfiguration");async function lU(t,e){if(!t.get(ps).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Ad).initialize(r)}await t.get(Yr).primeToken()}s(lU,"initializePostConfigurationDependencies");var v0t=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),lAr=I.Object({editorInfo:v0t,editorPluginInfo:v0t,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function uAr(t,e,r){return t.get(dn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Dne(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&qSe(t,r.editorConfiguration),await lU(t,r.editorConfiguration),["OK",null]}s(uAr,"handleSetEditorInfoChecked");var E0t=rt(lAr,uAr);f();var dAr=I.Object({options:I.Optional(I.Object({}))});async function fAr(t,e,r){let n=t.get(On).pendingSignIn?.status;if(n===void 0)return[null,{code:xr.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:xr.DeviceFlowFailed,message:String(o)}]}finally{t.get(On).pendingSignIn=void 0}}s(fAr,"handleSignInConfirmChecked");var x0t=rt(dAr,fAr);f();var pAr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function mAr(t,e,r){try{let n=t.get(On),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(Gl).findAppIdToAuthenticate(),a=await t.get(V2).getToken(t,o,n.getConfiguredUrls()),c=a.waitForAuth.then(async l=>(t.get(Gl).githubAppId=o,await t.get(On).setPersistedSession(l),await t.get(On).checkAndUpdateStatus({freshSignIn:!0})));return t.get(On).pendingSignIn={verificationUri:a.verification_uri,status:c},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Bne,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof Ws))throw n;return[null,{code:xr.DeviceFlowFailed,message:n.message}]}}s(mAr,"handleSignInInitiateChecked");var WSe=rt(pAr,mAr);f();var hAr=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function gAr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(On).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(On).checkAndUpdateStatus(),null]}s(gAr,"handleSignInWithGithubTokenChecked");var b0t=rt(hAr,gAr);f();var AAr=I.Object({options:I.Optional(I.Object({}))});async function yAr(t,e,r){return await t.get(On).deletePersistedSession(),[await t.get(On).checkAndUpdateStatus(),null]}s(yAr,"handleSignOutChecked");var I0t=rt(AAr,yAr);f();var CAr=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),$Se=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function vAr(t,e,r){let n=t.get(yo),i=t.get(dn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&o1.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:Dle(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},o1.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new $Se(r.stacktrace??"N/A",i.name);return c.stack=void 0,La(t,c,void 0,o,a),["OK",null]}s(vAr,"handleTelemetryExceptionChecked");var T0t=rt(CAr,vAr);f();f();function w0t(t={}){return{accessToken:gr(),login:"test login",...t,...iI(t)}}s(w0t,"testGitHubSession");var Aoe=class extends On{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},s8=class extends On{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};f();function EAr(t){return new g_({token:`test token ${gr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(EAr,"createTestCopilotToken");var uU=class extends Yr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=w0t()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>EAr(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},yoe=class extends uU{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},a8=class extends yoe{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var xAr=I.Object({options:I.Optional(I.Object({}))});async function bAr(t,e,r){let n=new a8("tid=valid-copilot-token");return t.forceSet(On,new s8(t,"",n)),t.get(Yr).resetToken(),t.get(Eo).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(bAr,"handleTestingAlwaysAuthChecked");var S0t=rt(xAr,bAr);f();var IAr=I.Object({messages:I.Array(I.Object({role:I.Enum(_l),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(fn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function TAr(t,e,r){let n=new Ha(t),i=await t.get(Wa).getBestChatModelConfig([r.modelFamily??fn.CopilotBase]),o=await $F(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:E0.user("test",gr())},e,o),null]}s(TAr,"handleChatMLChecked");var _0t=rt(IAr,TAr);f();f();f();var f8=Fe(Dpt(),1),Aao={ALPN_HTTP2:f8.default.ALPN_HTTP2,ALPN_HTTP2C:f8.default.ALPN_HTTP2C,ALPN_HTTP1_1:f8.default.ALPN_HTTP1_1,ALPN_HTTP1_0:f8.default.ALPN_HTTP1_0},{fetch:yao,context:Bpt,reset:Cao,noCache:vao,h1:Eao,keepAlive:xao,h1NoCache:bao,keepAliveNoCache:Iao,cacheStats:Tao,clearCache:wao,offPush:Sao,onPush:_ao,createUrl:Rao,timeoutSignal:kao,Body:Pao,Headers:Npt,Request:Dao,Response:Bao,AbortController:Nao,AbortError:Loe,AbortSignal:Lao,FetchBaseError:Mao,FetchError:Fao,ALPN_HTTP2:Oao,ALPN_HTTP2C:Qao,ALPN_HTTP1_1:Uao,ALPN_HTTP1_0:qao}=f8.default;var Mpt=require("crypto"),Fpt=require("http"),Opt=require("stream"),Qpt=require("util"),m8=Fe(Kg());var VCr=9e4,zCr=new m8.ProtocolRequestType("copilot/fetch"),YCr=new m8.ProtocolRequestType("copilot/fetchCancel"),KCr=new m8.ProgressType,JCr=new m8.ProtocolRequestType("copilot/fetchDisconnectAll"),C1=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},p8=class extends yn{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(yo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(kr).connection.sendRequest(JCr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(kr).connection,a=(0,Mpt.randomUUID)(),c=new Fn.CancellationTokenSource,l=new Opt.PassThrough,u=s(()=>{o.sendRequest(YCr,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{l.emit("error",new Loe("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new C1("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Loe("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(KCr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&l.emit("error",new C1(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new C1("Request timed out from lsp server"))},n.timeout??VCr),A=s(()=>{h(new Loe("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",A),o.sendRequest(zCr,ZCr(r,a,n),c.token).then(m).catch(y=>{let E="EditorFetcher request failed";y&&typeof y=="object"&&"message"in y&&(E+=`: ${String(y.message)}`),y&&typeof y=="object"&&"data"in y&&(E+=`: ${(0,Qpt.inspect)(y.data)}`),h(new C1(E))}).finally(()=>{i?.removeEventListener("abort",A),clearTimeout(g)})});if(!p.status)throw new C1("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new rI(p.status,Fpt.STATUS_CODES[p.status]??"",new Npt(p.headers),()=>XCr(l),()=>l)}};function XCr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(XCr,"consumeStream");function ZCr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(ZCr,"convertOptionsToParams");var e1r=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST"),I.Literal("DELETE")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function t1r(t,e,r){let n=new p8(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...d}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...d});l&&i.abort();let m;try{m=await p}catch(A){return[{error:`Fetch stream error: ${A instanceof C1?A.message:String(A)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let y=m.body();for await(let E of y){let b=E.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let A=await m.text();return[{status:h,headers:g,body:A},null]}catch(A){return[{error:`Fetch stream error: ${A instanceof C1?A.message:String(A)}`},null]}}s(t1r,"handleTestingFetchChecked");var Upt=rt(e1r,t1r);f();var r1r=I.Object({});async function n1r(t,e,r){return await t.get(Qc).flush(),["OK",null]}s(n1r,"handleTestingFlushPromiseQueueChecked");var qpt=rt(r1r,n1r);f();var i1r=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function o1r(t,e,r){try{await t.get(r1).start();let n=t.get(Ck),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,zK,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(o1r,"handleTestingGetContextChecked");var Hpt=rt(i1r,o1r);f();var s1r=I.Object({uri:I.String()});async function a1r(t,e,r){let i=await t.get(yr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(a1r,"handleGetDocumentChecked");var Wpt=rt(s1r,a1r);f();var c1r=I.Object({options:I.Optional(I.Object({}))});async function l1r(t,e,r){t.forceSet(On,new Aoe(t)),t.get(Yr).resetToken();try{await t.get(Yr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(l1r,"handleTestingNeverAuthChecked");var $pt=rt(c1r,l1r);f();f();f();var C_e=class extends nl{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},jpt=s(t=>new C_e(t),"createTestCertificateReader");function E_e(t,e,r){let n=new v_e;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new rI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(E_e,"createFakeResponse");function Gpt(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),E_e(t,n,Object.assign({"content-type":"application/json"},r))}s(Gpt,"createFakeJsonResponse");var yU=class extends yn{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Moe=class extends yU{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var v_e=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var x_e=class extends yU{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Gpt(200,this.fullConfig)):Promise.resolve(E_e(404,""))}},Foe=class extends x_e{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var u1r=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function d1r(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(yn,new Foe(n,t.get(yn)))}return["OK",null]}s(d1r,"handleTestingOverrideExpFlagsChecked");var Vpt=rt(u1r,d1r);f();var f1r=I.Object({rules:pye});function p1r(t,e,r){let n=t.get(Xc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:xr.InternalError,message:"Could not set content exclusion rules"}]}s(p1r,"handleTestingSetContentExclusionRulesChecked");var zpt=rt(f1r,p1r);f();var m1r=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(YN)),options:I.Optional(I.Object({}))});function h1r(t,e,r){return t.get(tx).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(h1r,"handleTestingSetSyntheticTurnsChecked");var Ypt=rt(m1r,h1r);f();var g1r=I.Object({});async function A1r(t,e,r){let n=t.get(Ga),i=t.get(Oc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(A1r,"handleTriggerShowMessageChecked");var Kpt=rt(g1r,A1r);f();f();f();f();var Jpt=Fe(require("tls"));var Ooe=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(nl)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=Jpt.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var h8=class extends yn{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new Ooe(r),this.proxySocketFactory=r.get(HC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(gl).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(gl).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(yo),o=this.proxySocketTimeoutForTesting;return Bpt({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new jM(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new rI(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var CU=require("fs"),Xpt=require("path");var g8=class extends To{static{s(this,"LocalFileSystem")}async readFileString(e){return(await CU.promises.readFile(Va(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(Va(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=Va(e),n=await CU.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,Xpt.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await CU.promises.lstat(e);if(r.isSymbolicLink())try{let n=await CU.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};f();var Qoe=class extends QA{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Uoe=class extends sl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();var qoe=class extends wp{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};f();function y1r(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(y1r,"fakeChatModelConfiguration");function C1r(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(C1r,"fakeEmbeddingModelConfiguration");var Hoe=class extends Wa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(y1r(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(C1r(e))}};f();var Woe=class extends wu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new oh}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},$oe=class extends Ga{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function Zpt(t,e,r,n){return Vv.create(nj(t),e,r,n,e)}s(Zpt,"createTextDocument");var b_e=class extends yr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new Oa;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new Oa;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new Oa;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new Oa;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Hi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=Zpt(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=Zpt(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},joe=class extends b_e{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var I_e=class extends Oc{static{s(this,"NullLog")}logIt(...e){}};function v1r(t){let e=new a3;return e.set(gl,t),e.set(E2,t),e.set(yo,new yo),e.set(mm,new mm({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(nl,jpt([])),e.set(HC,lte(e)),e.set(Uy,new Uy),e.set(Mg,new uj),e.set(Lg,new Lg),e.set(Ty,new Ty),e.set(Cu,new Cu(e,"tid=test",!0)),e.set(Tu,new Tu),e.set(Ga,new $oe),e.set(wu,new Woe),e.set(by,new Q3),e.set(Oc,new I_e),e.set(Vd,new Vd),e.set(Ss,new Ss("test-session","test-machine")),e.set(zd,new uN(e)),e.set(Ad,new Ad(e,"copilot-test")),e.set(Nt,new Nt(e)),e.set(tA,new tA),e.set(Vg,new ND),e.set(Yr,new a8("tid=test")),e.set(Eo,new cj),e.set(Qc,new Qc),e.set(dC,new dC(e)),e.set(wp,new qoe),e.set(sA,new sA(e)),e.set(sE,gX(e)),e.set(Ou,new Ou),e.set(u0,new u0),e.set(aE,aE.default),e.set(Fp,new Fp),e.set(Um,new Um(e,!1)),e.set(Gl,new Gl),e.set(vn,new vn(e)),e.set(lf,new lK),e.set(Zc,new Zc),e.set(wc,XK(e,(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(a0,new a0(e)),E1r(e),e.set(o0,new o0(e)),e.set(ps,new ps),e.set(gC,new BN),e.set(sh,new sh),e.set(I0,new I0),e.set(KC,new KC(e)),e}s(v1r,"_createBaselineContext");function E1r(t){t.set(Yi,new Yi(t)),t.set(ca,new ca(t)),t.set(zu,new zu(t)),t.set(Pl,new Pl),t.set(uu,new uu),t.set(sl,new Uoe),t.set(Mh,new Mh(t,[])),t.set(Wa,new Hoe),t.set(QA,new Qoe),t.set(c1,new c1(t)),t.set(_w,new _w),t.set(sc,new sc(t)),t.set(Vu,new Vu),t.set(Gp,new Gp)}s(E1r,"registerConversation");function emt(){let t=v1r(new E2(new LD,new Map));return t.set(yn,new Moe),t.set(dn,new T_e),t.set(yr,new joe(t)),t.set(To,new g8),t.set(Xc,new Xc(t)),t.set(ol,new ol(t)),t.set($u,new Ate(t)),t.set(rh,new rh(t)),t.set(pC,new C3),t.set(bA,new Xte),hne(t),t}s(emt,"createLibTestingContext");var T_e=class extends dn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var rmt=Fe(require("fs"));var tmt=`${process.env.HOME}/.copilot-testing-gh-token`,Goe,Voe;function nmt(t){let e=new uU(x1r);t.forceSet(Yr,e)}s(nmt,"setIntegrationTokenManager");var x1r=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Voe)return Voe;let e=t||process.env.GITHUB_COPILOT_TOKEN||await b1r(),r=emt(),n=new h8(r);return r.forceSet(yn,n),Voe=oj(r,{...iI({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new Ws('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Voe},"getEnvelope");async function b1r(){try{Goe??=(await rmt.promises.readFile(tmt)).toString().trim()}catch{Goe??=process.env.GITHUB_TOKEN??""}if(!Goe)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${tmt}. Run "npm run get_token" to get one.`);return Goe}s(b1r,"getTestingGitHubToken");var I1r=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});function T1r(t,e,r){return nmt(t),t.forceSet(On,new s8(t,r.githubAppId)),["OK",null]}s(T1r,"handleTestingUseTestingTokenChecked");var imt=rt(I1r,T1r);f();var w1r=I.Object({});async function S1r(t,e,r){return await new FN().uninstall(t),["OK",null]}s(S1r,"handleUninstallChecked");var omt=rt(w1r,S1r);f();var _1r=YGe;function R1r(t,e,r){let n=t.get(wc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(R1r,"unregisterContextProviders");var smt=rt(_1r,R1r);f();var w_e=Fe(require("os"));var k1r=I.Object({expectedCertificate:I.String()});async function P1r(t,e,r){let i=(await cte(t).getAllRootCAs()).map(o8),o=o8(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${OSe(o)}. Only found those installed on the system:${w_e.EOL}${i.map(a=>"- "+OSe(a)).join(w_e.EOL)}`},null]}s(P1r,"handleVerifyCertificateChecked");var amt=rt(k1r,P1r);f();var D1r=I.Object({});async function B1r(){return[{status:!!await new N7().load()},null]}s(B1r,"handleVerifyKerberosChecked");var cmt=rt(D1r,B1r);f();var N1r=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function L1r(t,e,r){let i=await t.get(yr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(L1r,"handleVerifyStateChecked");var lmt=rt(N1r,L1r);f();var M1r=I.Object({});function F1r(t,e,r){return[t.get(yr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(F1r,"handleVerifyWorkspaceStateChecked");var umt=rt(M1r,F1r);var Nk=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function dmt(){let t=new Map;return t.set(a0t.method,c0t),t.set(l0t.method,u0t),t.set("getCompletions",Zft),t.set("getCompletionsCycling",e0t),t.set("getPanelCompletions",n0t),t.set(Mft.method,Fft),t.set("getVersion",i0t),t.set("setEditorInfo",E0t),t.set("checkStatus",Hlt),t.set("checkQuota",qlt),t.set("checkFileStatus",Qlt),t.set("signInInitiate",WSe),t.set("signIn",WSe),t.set("signInConfirm",x0t),t.set("signInWithGithubToken",b0t),t.set("signOut",I0t),t.set("notifyShown",h0t),t.set("notifyAccepted",p0t),t.set("notifyRejected",m0t),t.set("telemetry/exception",T0t),t.set("textDocument/copilotInlineEdit",f0t),t.set("testing/overrideExpFlags",Vpt),t.set("testing/alwaysAuth",S0t),t.set("testing/neverAuth",$pt),t.set("testing/useTestingToken",imt),t.set("testing/setCompletionDocuments",Yft),t.set("testing/setPanelCompletionDocuments",Nft),t.set("testing/triggerShowMessageRequest",Kpt),t.set("testing/flushPromiseQueue",qpt),t.set("testing/getDocument",Wpt),t.set("testing/chatml",_0t),t.set("testing/setSyntheticTurns",Ypt),t.set("testing/fetch",Upt),t.set("testing/setContentExclusionRules",zpt),t.set("testing/setCopilotEditsResponse",xft),t.set("testing/getContext",Hpt),t.set("uninstall",omt),t.set("debug/diagnostics",Hft),t.set("debug/listCertificates",d0t),t.set("debug/verifyState",lmt),t.set("debug/verifyCertificate",amt),t.set("debug/verifyKerberos",cmt),t.set("debug/verifyWorkspaceState",umt),t.set("context/registerProviders",g0t),t.set("context/unregisterProviders",smt),t.set("conversation/preconditions",hft),t.set("conversation/persistence",mft),t.set("conversation/create",dft),t.set("conversation/turn",Cft),t.set("conversation/turnDelete",vft),t.set("conversation/destroy",fft),t.set("conversation/rating",gft),t.set("conversation/copyCode",zdt),t.set("conversation/insertCode",Ydt),t.set("conversation/templates",yft),t.set("conversation/agents",Vdt),t.set("conversation/registerTools",Aft),t.set("conversation/notifyCodeAcceptance",pft),t.set("copilot/models",Rft),t.set("copilot/byok/saveModel",Olt),t.set("copilot/byok/deleteModel",Nlt),t.set("copilot/byok/listModels",Mlt),t.set("copilot/byok/saveApiKey",Flt),t.set("copilot/byok/deleteApiKey",Blt),t.set("copilot/byok/listApiKeys",Llt),t.set("copilot/setModelPolicy",kft),t.set("copilot/codeReview",Eft),t.set("git/commitGenerate",o0t),t.set("editConversation/create",bft),t.set("editConversation/turn",Tft),t.set("editConversation/turnDelete",wft),t.set("editConversation/destroy",Ift),t.set("mcp/getTools",Sft),t.set("mcp/updateToolsStatus",_ft),new Nk(t)}s(dmt,"getAllMethods");f();f();f();var fmt=Fe(Kg());var v1=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new fmt.NotificationType(this.name)}};var S_e=class extends v1{constructor(){super(...arguments);this.name=cfe.method;this.params=I8e}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(On);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},pmt=[S_e];f();var __e=class extends v1{constructor(){super(...arguments);this.name=pfe.method;this.params=D8e}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(Os).get(n);o&&cYe(this.ctx,o)}},R_e=class extends v1{constructor(){super(...arguments);this.name=gfe.method;this.params=F8e}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(NA).handleShown(n)}},k_e=class extends v1{constructor(){super(...arguments);this.name=mfe.method;this.params=B8e}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(Os),a=o.get(n);a&&(i>=a.insertText.length?(o.delete(n),F3(this.ctx,a)):wX(this.ctx,a,i,void 0,void 0,"cumulative"))}},mmt=[__e,R_e,k_e];f();var zoe=class extends v1{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(xf).cancel(r.token)}};var O1r=[...pmt,...mmt,zoe];function hmt(t,e){for(let r of O1r){let n=new r(t),i=zs.Compile(n.params);e.onNotification(n.type,hl(t,async o=>{zE(o),i.Check(o)?await n.handle(o):Yu.error(t,`Notification ${n.name}:`,new Gu(i.Errors(o)))},`Notification ${n.name}`))}}s(hmt,"registerNotifications");f();var Yoe=Fe(Jc());var gmt=new It("AgentTextDocumentConfiguration"),P_e=class{constructor(e){this.ctx=e;this.#e=new Oa;this.onDidChange=this.#e.event}static{s(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,i){try{return Vv.create(e,r,n,i)}catch(o){throw gmt.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Yoe.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.#e.fire(o),Vv.withChanges(e,r,n)}catch(i){throw gmt.exception(this.ctx,i,".update"),i}}},Uw=class extends yr{constructor(){super(...arguments);this.#e=new Oa;this.onDidOpenTextDocument=this.#e.event;this.#t=new Oa;this.onDidCloseTextDocument=this.#t.event;this.#i=new Oa;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new P_e(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new Yoe.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[]}static{s(this,"AgentTextDocumentManager")}#e;#t;#i;get connection(){return this.ctx.get(kr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(yl(i.uri),o),this.#e.fire({document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=yl(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=yl(n.textDocument.uri);this._documents.delete(i),this.#t.fire({document:{uri:i}})}),this.connection.onNotification(dfe.type,n=>{let i=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in i?{document:i}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(yl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var Amt=zs.Compile(R8e);function zE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=zE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=zE(e[r])}return t}}s(zE,"purgeNulls");var kr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Oc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),hmt(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(yo).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async l=>{try{if(i&&l&&typeof l=="object"&&!("settings"in l)){let u=await r.workspace.getConfiguration(["github.copilot",...USe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of USe)d[p]=u.shift();l.settings=d}return C0t(e,zE(l))}catch(u){Yu.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(l){try{e.get(Uw).didChangeWorkspaceFolders(l),e.get(Fp).emit(l)}catch(u){Yu.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:l,uri:u})=>a({added:[{uri:u,name:l??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:l,uri:u})=>a({added:[],removed:[{uri:u,name:l??u}]})),r.onInitialize(l=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=l.capabilities;let u=l.capabilities.copilot,d=zE(l.initializationOptions);if(d){if(!Amt.Check(d))throw new Gu(Amt.Errors(d));let g=d,A=e.get(dn);g.editorPluginInfo?A.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):Yu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&A.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Gl).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=l.capabilities.workspace?.workspaceFolders??!1;e.get(Uw).init(l.workspaceFolders??[]),GVe(this.ctx),e.get(Fp).emit({added:l.workspaceFolders??[],removed:[]}),i=l.capabilities.workspace?.configuration,u&&(e.get(ps).setCapabilities(u),"openURL"in u&&Dne(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,Yu.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await lU(e),this.installationTelemetryTimer=setTimeout(()=>{new FN().startup(e).catch(()=>{})},1e3))},"onInitialized");return r.onInitialized(hl(e,h,"onInitialized")),e.get(a1).init(),u?.token&&e.get(On).setTransientSession(null),u?.redirectedTelemetry&&Dlt(e),ymt.lt(process.versions.node,"20.8.0")&&Yu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:$A.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:_lt(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(hl(e,o,"onDidChangeConfiguration")),r.listen();let c=new Lne;this.ctx.forceSet(Oc,c)}async messageHandler(e,r,n){let i=this.ctx.get(Nk).handlers.get(e);if(!i)return new $A.ResponseError(xr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new $A.ResponseError(xr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new $A.ResponseError(xr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!klt(this.ctx.get(dn)))throw new $A.ResponseError(xr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),zE(r);try{let[o,a]=await i(this.ctx,n,r);return a?new $A.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new $A.ResponseError(xr.RequestCancelled,"Request was canceled");if(o instanceof Ws)return new $A.ResponseError(xr.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof $A.ResponseError||Yu.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(MA).dispose()}catch(e){Yu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Oc,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),QCe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Qc).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Tu).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},Yu=new It("lsp");var Koe=class t extends lR{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(kr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),wl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){wl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(ps).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return wl.debug(this.context,"`copilot/related` not supported"),zVe;try{let a=await this.service.connection.sendRequest(Afe.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){wl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){wl.exception(r,o,"copilotRelated")}}};f();f();f();var Joe=new It("OAuth Code Flow");function D_e(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(D_e,"arrayEquals");function Cmt(t){return t===Lk.providerId?{client_id:np,client_secret:vqe}:null}s(Cmt,"getClientInfoFromAuthServer");var B_e=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var Lk=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{s(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,i=e?.sort()||[];return i.length?n.filter(a=>D_e([...a.scopes].sort(),i)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(Bi).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),i=await this._sessionsPromise,o=await this.tokenToSession(r,e);this.afterSessionLoad(o);let a=i.findIndex(l=>l.account.id===o.account.id&&D_e([...l.scopes].sort(),n)),c=new Array;return a>-1?c.push(...i.splice(a,1,o)):i.push(o),await this.storeSessions(i),o}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(Bi).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((i,o)=>i+=o.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get(yn).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(i){return Joe.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}if(n.ok)try{let i=await n.json();return{id:`${i.id}`,accountName:i.login}}catch(i){return Joe.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}else{let i=n.statusText;try{let o=await n.json();o.message&&(i=o.message)}catch{}return Joe.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(i=>i.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:i}=await this.getUserInfo(r);return!n||!i}};var Xoe=class extends LA{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{s(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(i=>i===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===Lk.providerId){let n=new Lk(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,i,o=!1){let a=this._authenticationProviders.get(r);if(a){if(i?.authorizationServer){let c=i.authorizationServer;if(!a.authorizationServers?.some(l=>l===c))throw new Error(`The authorization server '${c}' is not supported by the authentication provider '${r}'.`)}return await a.getSessions(n,{...i})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};f();var vmt=Fe(Jc());var Zoe=new It("copilotTokenManager"),N_e=class t extends k4{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new vmt.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(kr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw Zoe.debug(this.ctx,"Envelope missing from copilot/token response"),new wm({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:c}=r;if(Zoe.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new Ws("Expired token in copilot/token response");if(i&&n){let u;if(c!==void 0){try{let d=new URL(c);d.protocol==="https:"&&d.hostname.startsWith("api.")?u=d.origin:Zoe.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}catch{Zoe.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}this.ctx.get(zd).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(On).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new wm({reason:"NotSignedIn"});let l=new g_(a,void 0);return $M(this.ctx,l),l}catch(r){throw r instanceof Error?new Ws(r.message,r):r}}},vU=class extends Yr{constructor(r,n=new k4(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new N_e(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(ps).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var Q1r=new It("Public Code References"),ese=class extends lf{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");Q1r.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(ps).getCapabilities().ipCodeCitation===!0&&await e.get(kr).connection.sendNotification(lfe.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function Emt(t){U1r(t)}s(Emt,"activateExtensibilityPlatformFeature");function U1r(t){t.set(QA,new Yie(t)),t.set(c1,new c1(t))}s(U1r,"registerContextDependencies");f();var xmt=I.String(),L_e=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(rse,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},rse="build-logs",tse=class extends cu{static{s(this,"BuildLogsSkill")}constructor(e){super(rse,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new L_e(r))}};f();var M_e=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await Zie(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Qt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Qt([o]),1]);return new Qt(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},F_e=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},q1r="directory-references",nse=class{constructor(){this.id=q1r;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new F_e}processor(e){return new M_e(e)}};f();var H1r=I.Object({uri:I.String(),visibleRange:I.Optional(Cc),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),bmt=I.Object({files:I.Array(H1r)}),W1r=3,O_e=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=kw(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(vn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=ta(a);if(await this.turnContext.collectFile(ose,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===W1r))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(vn).getRelativePath(n),a=new l1(n,void 0,i.visibleRange);return new Qt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Qt([n])}},ose="recent-files",ise=class extends cu{static{s(this,"RecentFilesSkill")}constructor(e){super(ose,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new O_e(r))}};f();var Imt=I.String(),Q_e=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(ase,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},ase="runtime-logs",sse=class extends cu{static{s(this,"RuntimeLogsSkill")}constructor(e){super(ase,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new Q_e(r))}};f();var cse=Fe(Kg());var lse=class extends sl{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return _W(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(kr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new cse.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new cse.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new cse.NotificationType("conversation/documentDiff"),r)}};f();var Tmt=Fe(Jc());var EU=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Mh).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(kr).connection.sendNotification(new Tmt.NotificationType(this.notificationEndpoint),e)}};function wmt(t){$1r(t),j1r(t),Emt(t)}s(wmt,"activateConversationFeature");function $1r(t){t.set(Yi,new Yi(t)),t.set(uu,new uu),t.set(zu,new zu(t)),t.set(Wa,new hte(t)),t.set(tx,new tx),t.set(ca,new ca(t)),t.set(Mh,new Mh(t)),t.set(EU,new EU(t)),t.set(nf,new YV(t,new zV(t))),t.set(rx,new rx),t.set(_w,new _w),t.set(sl,new lse(t)),t.set(sc,new sc(t)),t.set(Vu,new Vu),t.set(Gp,new Gp)}s($1r,"registerContextDependencies");function j1r(t){let e=new Pl;e.registerSkill(new tie(new eie(t))),e.registerSkill(new Sie(new Ef(t,h1,Mdt))),e.registerSkill(new nie(new Ef(t,FA,_ut))),e.registerSkill(new Qne(new Ef(t,Ld,Ylt))),e.registerSkill(new _ie),e.registerSkill(new nse),e.registerSkill(new ise(new Ef(t,ose,bmt))),e.registerSkill(new Une(new Ef(t,u1,Jlt))),e.registerSkill(new oie(new Ef(t,Pw,Out))),e.registerSkill(new sse(new Ef(t,ase,Imt))),e.registerSkill(new tse(new Ef(t,rse,xmt))),e.registerSkill(new aie(new Ef(t,OA,Qut))),e.registerSkill(new cie(new Ef(t,xk,qut))),t.set(Pl,e)}s(j1r,"registerSkills");f();var Smt=Fe(di());var use=class extends $u{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(kr).connection.sendProgress(new Smt.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var _mt=Fe(Jc()),Rmt=Fe(Kg());var dse=class extends WC{constructor(){super(...arguments);this.requestType=new _mt.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=zs.Compile(clt)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(kr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Rmt.ResponseError(l.code,l.message,l.data);throw Kr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Gu(this.typeCheck.Errors(o));return o}};f();var kmt=Fe(Jc()),Pmt=Fe(Kg());var fse=class extends XT{constructor(){super(...arguments);this.requestType=new kmt.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=zs.Compile(alt)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(kr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Pmt.ResponseError(l.code,l.message,l.data);throw Kr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Gu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Li(i.value):new gk(i.value));return new ho(n,r.status??"success")}};f();f();function Dmt(t,e,r){try{let n=t.get(Nt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return sn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(Dmt,"fillInJavaActiveExperiments");var U_e=Fe(Kg());var G1r={type:new U_e.NotificationType("featureFlagsNotification")},V1r={type:new U_e.NotificationType("copilot/didChangeFeatureFlags")},xU=class{constructor(e){this.ctx=e;ws(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Nt).updateExPValuesAndAssignments(),o={};r.get(Nt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Pye(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;QGe(r,a,c,i),VK(r,c,i),Dmt(r,c,i);for(let[d,p]of c.entries())o[d]=p;let l=r.get(ps),u=r.get(kr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(V1r.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let d={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(d.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(d.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(d.xc=!0),await u.sendNotification(G1r.type,d)}}};f();var pse=class extends Eo{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(kr).connection.sendNotification(yfe.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(kr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var Bmt=new g8;f();f();f();var Mi=new It("CopilotMCP");async function q_e(t,e){await t.get(bA).notifyLog(e)}s(q_e,"notifyMCPRuntimeLog");async function E1(t,e){await q_e(t,{...e,level:"error"})}s(E1,"notifyMCPRuntimeError");async function Mk(t,e){await q_e(t,{...e,level:"warning"})}s(Mk,"notifyMCPRuntimeWarning");async function Ju(t,e){await q_e(t,{...e,level:"info"})}s(Ju,"notifyMCPRuntimeInfo");f();f();var Ro;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ro||(Ro={}));var W_e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(W_e||(W_e={}));var Tr=Ro.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),cx=s(t=>{switch(typeof t){case"undefined":return Tr.undefined;case"string":return Tr.string;case"number":return isNaN(t)?Tr.nan:Tr.number;case"boolean":return Tr.boolean;case"function":return Tr.function;case"bigint":return Tr.bigint;case"symbol":return Tr.symbol;case"object":return Array.isArray(t)?Tr.array:t===null?Tr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Tr.promise:typeof Map<"u"&&t instanceof Map?Tr.map:typeof Set<"u"&&t instanceof Set?Tr.set:typeof Date<"u"&&t instanceof Date?Tr.date:Tr.object;default:return Tr.unknown}},"getParsedType"),Ft=Ro.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),z1r=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),zp=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ro.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};zp.create=t=>new zp(t);var C8=s((t,e)=>{let r;switch(t.code){case Ft.invalid_type:t.received===Tr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ft.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ro.jsonStringifyReplacer)}`;break;case Ft.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ro.joinValues(t.keys,", ")}`;break;case Ft.invalid_union:r="Invalid input";break;case Ft.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ro.joinValues(t.options)}`;break;case Ft.invalid_enum_value:r=`Invalid enum value. Expected ${Ro.joinValues(t.options)}, received '${t.received}'`;break;case Ft.invalid_arguments:r="Invalid function arguments";break;case Ft.invalid_return_type:r="Invalid function return type";break;case Ft.invalid_date:r="Invalid date";break;case Ft.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ro.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ft.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ft.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ft.custom:r="Invalid input";break;case Ft.invalid_intersection_types:r="Intersection results could not be merged";break;case Ft.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ft.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ro.assertNever(t)}return{message:r}},"errorMap"),Fmt=C8;function Y1r(t){Fmt=t}s(Y1r,"setErrorMap");function mse(){return Fmt}s(mse,"getErrorMap");var hse=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),K1r=[];function fr(t,e){let r=mse(),n=hse({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===C8?void 0:C8].filter(i=>!!i)});t.common.issues.push(n)}s(fr,"addIssueToContext");var Od=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Gn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Gn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Gn=Object.freeze({status:"aborted"}),y8=s(t=>({status:"dirty",value:t}),"DIRTY"),bf=s(t=>({status:"valid",value:t}),"OK"),$_e=s(t=>t.status==="aborted","isAborted"),j_e=s(t=>t.status==="dirty","isDirty"),Fk=s(t=>t.status==="valid","isValid"),TU=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function gse(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(gse,"__classPrivateFieldGet");function Omt(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Omt,"__classPrivateFieldSet");var zr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(zr||(zr={}));var bU,IU,Qh=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Nmt=s((t,e)=>{if(Fk(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new zp(t.common.issues);return this._error=r,this._error}}},"handleResult");function mi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(mi,"processCreateParams");var hi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return cx(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:cx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Od,ctx:{common:e.parent.common,data:e.data,parsedType:cx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(TU(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cx(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Nmt(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cx(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return Fk(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>Fk(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cx(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(TU(i)?i:Promise.resolve(i));return Nmt(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Ft.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Yp({schema:this,typeName:qn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Oh.create(this,this._def)}nullable(){return b1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ux.create(this)}promise(){return Ww.create(this,this._def)}or(e){return $k.create([this,e],this._def)}and(e){return jk.create(this,e,this._def)}transform(e){return new Yp({...mi(this._def),schema:this,typeName:qn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Kk({...mi(this._def),innerType:this,defaultValue:r,typeName:qn.ZodDefault})}brand(){return new wU({typeName:qn.ZodBranded,type:this,...mi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Jk({...mi(this._def),innerType:this,catchValue:r,typeName:qn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return SU.create(this,e)}readonly(){return Xk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},J1r=/^c[^\s-]{8,}$/i,X1r=/^[0-9a-z]+$/,Z1r=/^[0-9A-HJKMNP-TV-Z]{26}$/i,evr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tvr=/^[a-z0-9_-]{21}$/i,rvr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nvr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ivr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ovr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",H_e,svr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,avr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cvr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lvr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uvr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dvr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Qmt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fvr=new RegExp(`^${Qmt}$`);function Umt(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Umt,"timeRegexSource");function pvr(t){return new RegExp(`^${Umt(t)}$`)}s(pvr,"timeRegex");function qmt(t){let e=`${Qmt}T${Umt(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(qmt,"datetimeRegex");function mvr(t,e){return!!((e==="v4"||!e)&&svr.test(t)||(e==="v6"||!e)&&cvr.test(t))}s(mvr,"isValidIP");function hvr(t,e){if(!rvr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(hvr,"isValidJWT");function gvr(t,e){return!!((e==="v4"||!e)&&avr.test(t)||(e==="v6"||!e)&&lvr.test(t))}s(gvr,"isValidCidr");var qw=class t extends hi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Tr.string){let o=this._getOrReturnCtx(e);return fr(o,{code:Ft.invalid_type,expected:Tr.string,received:o.parsedType}),Gn}let n=new Od,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?fr(i,{code:Ft.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&fr(i,{code:Ft.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")ivr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"email",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")H_e||(H_e=new RegExp(ovr,"u")),H_e.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"emoji",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")evr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"uuid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")tvr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"nanoid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")J1r.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"cuid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")X1r.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"cuid2",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Z1r.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"ulid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),fr(i,{validation:"url",code:Ft.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"regex",code:Ft.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?qmt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?fvr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?pvr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?nvr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"duration",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?mvr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"ip",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?hvr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"jwt",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?gvr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"cidr",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?uvr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"base64",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?dvr.test(e.data)||(i=this._getOrReturnCtx(e,i),fr(i,{validation:"base64url",code:Ft.invalid_string,message:o.message}),n.dirty()):Ro.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ft.invalid_string,...zr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...zr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...zr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...zr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...zr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...zr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...zr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...zr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...zr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...zr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...zr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...zr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...zr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...zr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...zr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...zr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...zr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...zr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...zr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...zr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...zr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...zr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...zr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...zr.errToObj(r)})}nonempty(e){return this.min(1,zr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};qw.create=t=>{var e;return new qw({checks:[],typeName:qn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...mi(t)})};function Avr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(Avr,"floatSafeRemainder");var Ok=class t extends hi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Tr.number){let o=this._getOrReturnCtx(e);return fr(o,{code:Ft.invalid_type,expected:Tr.number,received:o.parsedType}),Gn}let n,i=new Od;for(let o of this._def.checks)o.kind==="int"?Ro.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Avr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.not_finite,message:o.message}),i.dirty()):Ro.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:zr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:zr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:zr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:zr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:zr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ro.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ok.create=t=>new Ok({checks:[],typeName:qn.ZodNumber,coerce:t?.coerce||!1,...mi(t)});var Qk=class t extends hi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Tr.bigint)return this._getInvalidInput(e);let n,i=new Od;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),fr(n,{code:Ft.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ro.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return fr(r,{code:Ft.invalid_type,expected:Tr.bigint,received:r.parsedType}),Gn}gte(e,r){return this.setLimit("min",e,!0,zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:zr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qk.create=t=>{var e;return new Qk({checks:[],typeName:qn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...mi(t)})};var Uk=class extends hi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Tr.boolean){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.boolean,received:n.parsedType}),Gn}return bf(e.data)}};Uk.create=t=>new Uk({typeName:qn.ZodBoolean,coerce:t?.coerce||!1,...mi(t)});var qk=class t extends hi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Tr.date){let o=this._getOrReturnCtx(e);return fr(o,{code:Ft.invalid_type,expected:Tr.date,received:o.parsedType}),Gn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return fr(o,{code:Ft.invalid_date}),Gn}let n=new Od,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),fr(i,{code:Ft.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ro.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:zr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:zr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};qk.create=t=>new qk({checks:[],coerce:t?.coerce||!1,typeName:qn.ZodDate,...mi(t)});var v8=class extends hi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Tr.symbol){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.symbol,received:n.parsedType}),Gn}return bf(e.data)}};v8.create=t=>new v8({typeName:qn.ZodSymbol,...mi(t)});var Hk=class extends hi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Tr.undefined){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.undefined,received:n.parsedType}),Gn}return bf(e.data)}};Hk.create=t=>new Hk({typeName:qn.ZodUndefined,...mi(t)});var Wk=class extends hi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Tr.null){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.null,received:n.parsedType}),Gn}return bf(e.data)}};Wk.create=t=>new Wk({typeName:qn.ZodNull,...mi(t)});var Hw=class extends hi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return bf(e.data)}};Hw.create=t=>new Hw({typeName:qn.ZodAny,...mi(t)});var lx=class extends hi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return bf(e.data)}};lx.create=t=>new lx({typeName:qn.ZodUnknown,...mi(t)});var jA=class extends hi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return fr(r,{code:Ft.invalid_type,expected:Tr.never,received:r.parsedType}),Gn}};jA.create=t=>new jA({typeName:qn.ZodNever,...mi(t)});var E8=class extends hi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Tr.undefined){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.void,received:n.parsedType}),Gn}return bf(e.data)}};E8.create=t=>new E8({typeName:qn.ZodVoid,...mi(t)});var ux=class t extends hi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Tr.array)return fr(r,{code:Ft.invalid_type,expected:Tr.array,received:r.parsedType}),Gn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(fr(r,{code:a?Ft.too_big:Ft.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(fr(r,{code:Ft.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(fr(r,{code:Ft.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new Qh(r,a,r.path,c)))).then(a=>Od.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new Qh(r,a,r.path,c)));return Od.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:zr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:zr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:zr.toString(r)}})}nonempty(e){return this.min(1,e)}};ux.create=(t,e)=>new ux({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qn.ZodArray,...mi(e)});function A8(t){if(t instanceof D0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Oh.create(A8(n))}return new D0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof ux?new ux({...t._def,type:A8(t.element)}):t instanceof Oh?Oh.create(A8(t.unwrap())):t instanceof b1?b1.create(A8(t.unwrap())):t instanceof x1?x1.create(t.items.map(e=>A8(e))):t}s(A8,"deepPartialify");var D0=class t extends hi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ro.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Tr.object){let u=this._getOrReturnCtx(e);return fr(u,{code:Ft.invalid_type,expected:Tr.object,received:u.parsedType}),Gn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof jA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let d=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Qh(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof jA){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")c.length>0&&(fr(i,{code:Ft.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of c){let p=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Qh(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of l){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Od.mergeObjectSync(n,u)):Od.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return zr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=zr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:qn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ro.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return Ro.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return A8(this)}partial(e){let r={};return Ro.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return Ro.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Oh;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Hmt(Ro.objectKeys(this.shape))}};D0.create=(t,e)=>new D0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:jA.create(),typeName:qn.ZodObject,...mi(e)});D0.strictCreate=(t,e)=>new D0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:jA.create(),typeName:qn.ZodObject,...mi(e)});D0.lazycreate=(t,e)=>new D0({shape:t,unknownKeys:"strip",catchall:jA.create(),typeName:qn.ZodObject,...mi(e)});var $k=class extends hi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new zp(c.ctx.common.issues));return fr(r,{code:Ft.invalid_union,unionErrors:a}),Gn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new zp(l));return fr(r,{code:Ft.invalid_union,unionErrors:c}),Gn}}get options(){return this._def.options}};$k.create=(t,e)=>new $k({options:t,typeName:qn.ZodUnion,...mi(e)});var ax=s(t=>t instanceof Gk?ax(t.schema):t instanceof Yp?ax(t.innerType()):t instanceof Vk?[t.value]:t instanceof zk?t.options:t instanceof Yk?Ro.objectValues(t.enum):t instanceof Kk?ax(t._def.innerType):t instanceof Hk?[void 0]:t instanceof Wk?[null]:t instanceof Oh?[void 0,...ax(t.unwrap())]:t instanceof b1?[null,...ax(t.unwrap())]:t instanceof wU||t instanceof Xk?ax(t.unwrap()):t instanceof Jk?ax(t._def.innerType):[],"getDiscriminator"),Ase=class t extends hi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.object)return fr(r,{code:Ft.invalid_type,expected:Tr.object,received:r.parsedType}),Gn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(fr(r,{code:Ft.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Gn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=ax(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:qn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...mi(n)})}};function G_e(t,e){let r=cx(t),n=cx(e);if(t===e)return{valid:!0,data:t};if(r===Tr.object&&n===Tr.object){let i=Ro.objectKeys(e),o=Ro.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=G_e(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Tr.array&&n===Tr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=G_e(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Tr.date&&n===Tr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(G_e,"mergeValues");var jk=class extends hi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if($_e(o)||$_e(a))return Gn;let c=G_e(o.value,a.value);return c.valid?((j_e(o)||j_e(a))&&r.dirty(),{status:r.value,value:c.data}):(fr(n,{code:Ft.invalid_intersection_types}),Gn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};jk.create=(t,e,r)=>new jk({left:t,right:e,typeName:qn.ZodIntersection,...mi(r)});var x1=class t extends hi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.array)return fr(n,{code:Ft.invalid_type,expected:Tr.array,received:n.parsedType}),Gn;if(n.data.length<this._def.items.length)return fr(n,{code:Ft.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Gn;!this._def.rest&&n.data.length>this._def.items.length&&(fr(n,{code:Ft.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Qh(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Od.mergeArray(r,a)):Od.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};x1.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new x1({items:t,typeName:qn.ZodTuple,rest:null,...mi(e)})};var yse=class t extends hi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.object)return fr(n,{code:Ft.invalid_type,expected:Tr.object,received:n.parsedType}),Gn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new Qh(n,c,n.path,c)),value:a._parse(new Qh(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Od.mergeObjectAsync(r,i):Od.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof hi?new t({keyType:e,valueType:r,typeName:qn.ZodRecord,...mi(n)}):new t({keyType:qw.create(),valueType:e,typeName:qn.ZodRecord,...mi(r)})}},x8=class extends hi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.map)return fr(n,{code:Ft.invalid_type,expected:Tr.map,received:n.parsedType}),Gn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new Qh(n,c,n.path,[u,"key"])),value:o._parse(new Qh(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Gn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),c.set(u.value,d.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Gn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),c.set(u.value,d.value)}return{status:r.value,value:c}}}};x8.create=(t,e,r)=>new x8({valueType:e,keyType:t,typeName:qn.ZodMap,...mi(r)});var b8=class t extends hi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.set)return fr(n,{code:Ft.invalid_type,expected:Tr.set,received:n.parsedType}),Gn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(fr(n,{code:Ft.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(fr(n,{code:Ft.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let d of l){if(d.status==="aborted")return Gn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new Qh(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:zr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:zr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};b8.create=(t,e)=>new b8({valueType:t,minSize:null,maxSize:null,typeName:qn.ZodSet,...mi(e)});var Cse=class t extends hi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.function)return fr(r,{code:Ft.invalid_type,expected:Tr.function,received:r.parsedType}),Gn;function n(c,l){return hse({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mse(),C8].filter(u=>!!u),issueData:{code:Ft.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return hse({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mse(),C8].filter(u=>!!u),issueData:{code:Ft.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Ww){let c=this;return bf(async function(...l){let u=new zp([]),d=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,d);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return bf(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new zp([n(l,u.error)]);let d=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(d,o);if(!p.success)throw new zp([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:x1.create(e).rest(lx.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||x1.create([]).rest(lx.create()),returns:r||lx.create(),typeName:qn.ZodFunction,...mi(n)})}},Gk=class extends hi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Gk.create=(t,e)=>new Gk({getter:t,typeName:qn.ZodLazy,...mi(e)});var Vk=class extends hi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return fr(r,{received:r.data,code:Ft.invalid_literal,expected:this._def.value}),Gn}return{status:"valid",value:e.data}}get value(){return this._def.value}};Vk.create=(t,e)=>new Vk({value:t,typeName:qn.ZodLiteral,...mi(e)});function Hmt(t,e){return new zk({values:t,typeName:qn.ZodEnum,...mi(e)})}s(Hmt,"createZodEnum");var zk=class t extends hi{static{s(this,"ZodEnum")}constructor(){super(...arguments),bU.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return fr(r,{expected:Ro.joinValues(n),received:r.parsedType,code:Ft.invalid_type}),Gn}if(gse(this,bU,"f")||Omt(this,bU,new Set(this._def.values),"f"),!gse(this,bU,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return fr(r,{received:r.data,code:Ft.invalid_enum_value,options:n}),Gn}return bf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};bU=new WeakMap;zk.create=Hmt;var Yk=class extends hi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),IU.set(this,void 0)}_parse(e){let r=Ro.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Tr.string&&n.parsedType!==Tr.number){let i=Ro.objectValues(r);return fr(n,{expected:Ro.joinValues(i),received:n.parsedType,code:Ft.invalid_type}),Gn}if(gse(this,IU,"f")||Omt(this,IU,new Set(Ro.getValidEnumValues(this._def.values)),"f"),!gse(this,IU,"f").has(e.data)){let i=Ro.objectValues(r);return fr(n,{received:n.data,code:Ft.invalid_enum_value,options:i}),Gn}return bf(e.data)}get enum(){return this._def.values}};IU=new WeakMap;Yk.create=(t,e)=>new Yk({values:t,typeName:qn.ZodNativeEnum,...mi(e)});var Ww=class extends hi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.promise&&r.common.async===!1)return fr(r,{code:Ft.invalid_type,expected:Tr.promise,received:r.parsedType}),Gn;let n=r.parsedType===Tr.promise?r.data:Promise.resolve(r.data);return bf(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Ww.create=(t,e)=>new Ww({type:t,typeName:qn.ZodPromise,...mi(e)});var Yp=class extends hi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{fr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return Gn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?Gn:l.status==="dirty"||r.value==="dirty"?y8(l.value):l});{if(r.value==="aborted")return Gn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?Gn:c.status==="dirty"||r.value==="dirty"?y8(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?Gn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?Gn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Fk(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Fk(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);Ro.assertNever(i)}};Yp.create=(t,e,r)=>new Yp({schema:t,typeName:qn.ZodEffects,effect:e,...mi(r)});Yp.createWithPreprocess=(t,e,r)=>new Yp({schema:e,effect:{type:"preprocess",transform:t},typeName:qn.ZodEffects,...mi(r)});var Oh=class extends hi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Tr.undefined?bf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Oh.create=(t,e)=>new Oh({innerType:t,typeName:qn.ZodOptional,...mi(e)});var b1=class extends hi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Tr.null?bf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};b1.create=(t,e)=>new b1({innerType:t,typeName:qn.ZodNullable,...mi(e)});var Kk=class extends hi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Tr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Kk.create=(t,e)=>new Kk({innerType:t,typeName:qn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...mi(e)});var Jk=class extends hi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return TU(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new zp(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Jk.create=(t,e)=>new Jk({innerType:t,typeName:qn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...mi(e)});var I8=class extends hi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Tr.nan){let n=this._getOrReturnCtx(e);return fr(n,{code:Ft.invalid_type,expected:Tr.nan,received:n.parsedType}),Gn}return{status:"valid",value:e.data}}};I8.create=t=>new I8({typeName:qn.ZodNaN,...mi(t)});var yvr=Symbol("zod_brand"),wU=class extends hi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},SU=class t extends hi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Gn:o.status==="dirty"?(r.dirty(),y8(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Gn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:qn.ZodPipeline})}},Xk=class extends hi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(Fk(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return TU(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Xk.create=(t,e)=>new Xk({innerType:t,typeName:qn.ZodReadonly,...mi(e)});function Lmt(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Lmt,"cleanParams");function Wmt(t,e={},r){return t?Hw.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,d;if(!l){let p=Lmt(e,n),m=(d=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=Lmt(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):Hw.create()}s(Wmt,"custom");var Cvr={object:D0.lazycreate},qn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qn||(qn={}));var vvr=s((t,e={message:`Input not instance of ${t.name}`})=>Wmt(r=>r instanceof t,e),"instanceOfType"),$mt=qw.create,jmt=Ok.create,Evr=I8.create,xvr=Qk.create,Gmt=Uk.create,bvr=qk.create,Ivr=v8.create,Tvr=Hk.create,wvr=Wk.create,Svr=Hw.create,_vr=lx.create,Rvr=jA.create,kvr=E8.create,Pvr=ux.create,Dvr=D0.create,Bvr=D0.strictCreate,Nvr=$k.create,Lvr=Ase.create,Mvr=jk.create,Fvr=x1.create,Ovr=yse.create,Qvr=x8.create,Uvr=b8.create,qvr=Cse.create,Hvr=Gk.create,Wvr=Vk.create,$vr=zk.create,jvr=Yk.create,Gvr=Ww.create,Mmt=Yp.create,Vvr=Oh.create,zvr=b1.create,Yvr=Yp.createWithPreprocess,Kvr=SU.create,Jvr=s(()=>$mt().optional(),"ostring"),Xvr=s(()=>jmt().optional(),"onumber"),Zvr=s(()=>Gmt().optional(),"oboolean"),eEr={string:s(t=>qw.create({...t,coerce:!0}),"string"),number:s(t=>Ok.create({...t,coerce:!0}),"number"),boolean:s(t=>Uk.create({...t,coerce:!0}),"boolean"),bigint:s(t=>Qk.create({...t,coerce:!0}),"bigint"),date:s(t=>qk.create({...t,coerce:!0}),"date")},tEr=Gn,_=Object.freeze({__proto__:null,defaultErrorMap:C8,setErrorMap:Y1r,getErrorMap:mse,makeIssue:hse,EMPTY_PATH:K1r,addIssueToContext:fr,ParseStatus:Od,INVALID:Gn,DIRTY:y8,OK:bf,isAborted:$_e,isDirty:j_e,isValid:Fk,isAsync:TU,get util(){return Ro},get objectUtil(){return W_e},ZodParsedType:Tr,getParsedType:cx,ZodType:hi,datetimeRegex:qmt,ZodString:qw,ZodNumber:Ok,ZodBigInt:Qk,ZodBoolean:Uk,ZodDate:qk,ZodSymbol:v8,ZodUndefined:Hk,ZodNull:Wk,ZodAny:Hw,ZodUnknown:lx,ZodNever:jA,ZodVoid:E8,ZodArray:ux,ZodObject:D0,ZodUnion:$k,ZodDiscriminatedUnion:Ase,ZodIntersection:jk,ZodTuple:x1,ZodRecord:yse,ZodMap:x8,ZodSet:b8,ZodFunction:Cse,ZodLazy:Gk,ZodLiteral:Vk,ZodEnum:zk,ZodNativeEnum:Yk,ZodPromise:Ww,ZodEffects:Yp,ZodTransformer:Yp,ZodOptional:Oh,ZodNullable:b1,ZodDefault:Kk,ZodCatch:Jk,ZodNaN:I8,BRAND:yvr,ZodBranded:wU,ZodPipeline:SU,ZodReadonly:Xk,custom:Wmt,Schema:hi,ZodSchema:hi,late:Cvr,get ZodFirstPartyTypeKind(){return qn},coerce:eEr,any:Svr,array:Pvr,bigint:xvr,boolean:Gmt,date:bvr,discriminatedUnion:Lvr,effect:Mmt,enum:$vr,function:qvr,instanceof:vvr,intersection:Mvr,lazy:Hvr,literal:Wvr,map:Qvr,nan:Evr,nativeEnum:jvr,never:Rvr,null:wvr,nullable:zvr,number:jmt,object:Dvr,oboolean:Zvr,onumber:Xvr,optional:Vvr,ostring:Jvr,pipeline:Kvr,preprocess:Yvr,promise:Gvr,record:Ovr,set:Uvr,strictObject:Bvr,string:$mt,symbol:Ivr,transformer:Mmt,tuple:Fvr,undefined:Tvr,union:Nvr,unknown:_vr,void:kvr,NEVER:tEr,ZodIssueCode:Ft,quotelessJson:z1r,ZodError:zp});var vse="2025-06-18";var Ese="2.0",Vmt=_.union([_.string(),_.number().int()]),zmt=_.string(),rEr=_.object({progressToken:_.optional(Vmt)}).passthrough(),Uh=_.object({_meta:_.optional(rEr)}).passthrough(),B0=_.object({method:_.string(),params:_.optional(Uh)}),_U=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),I1=_.object({method:_.string(),params:_.optional(_U)}),qh=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),xse=_.union([_.string(),_.number().int()]),nEr=_.object({jsonrpc:_.literal(Ese),id:xse}).merge(B0).strict();var iEr=_.object({jsonrpc:_.literal(Ese)}).merge(I1).strict();var oEr=_.object({jsonrpc:_.literal(Ese),id:xse,result:qh}).strict();var sEr=_.object({jsonrpc:_.literal(Ese),id:xse,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict();var vCo=_.union([nEr,iEr,oEr,sEr]),Ymt=qh.strict(),Kmt=I1.extend({method:_.literal("notifications/cancelled"),params:_U.extend({requestId:xse,reason:_.string().optional()})}),RU=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),Jmt=RU.extend({version:_.string()}),aEr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),cEr=B0.extend({method:_.literal("initialize"),params:Uh.extend({protocolVersion:_.string(),capabilities:aEr,clientInfo:Jmt})});var lEr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),uEr=qh.extend({protocolVersion:_.string(),capabilities:lEr,serverInfo:Jmt,instructions:_.optional(_.string())}),dEr=I1.extend({method:_.literal("notifications/initialized")});var Xmt=B0.extend({method:_.literal("ping")}),fEr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),Zmt=I1.extend({method:_.literal("notifications/progress"),params:_U.merge(fEr).extend({progressToken:Vmt})}),bse=B0.extend({params:Uh.extend({cursor:_.optional(zmt)}).optional()}),Ise=qh.extend({nextCursor:_.optional(zmt)}),eht=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),tht=eht.extend({text:_.string()}),rht=eht.extend({blob:_.string().base64()}),nht=RU.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),pEr=RU.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),mEr=bse.extend({method:_.literal("resources/list")}),hEr=Ise.extend({resources:_.array(nht)}),gEr=bse.extend({method:_.literal("resources/templates/list")}),AEr=Ise.extend({resourceTemplates:_.array(pEr)}),yEr=B0.extend({method:_.literal("resources/read"),params:Uh.extend({uri:_.string()})}),CEr=qh.extend({contents:_.array(_.union([tht,rht]))}),vEr=I1.extend({method:_.literal("notifications/resources/list_changed")}),EEr=B0.extend({method:_.literal("resources/subscribe"),params:Uh.extend({uri:_.string()})}),xEr=B0.extend({method:_.literal("resources/unsubscribe"),params:Uh.extend({uri:_.string()})}),bEr=I1.extend({method:_.literal("notifications/resources/updated"),params:_U.extend({uri:_.string()})}),IEr=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),TEr=RU.extend({description:_.optional(_.string()),arguments:_.optional(_.array(IEr)),_meta:_.optional(_.object({}).passthrough())}),wEr=bse.extend({method:_.literal("prompts/list")}),SEr=Ise.extend({prompts:_.array(TEr)}),_Er=B0.extend({method:_.literal("prompts/get"),params:Uh.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),V_e=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),z_e=_.object({type:_.literal("image"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Y_e=_.object({type:_.literal("audio"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),REr=_.object({type:_.literal("resource"),resource:_.union([tht,rht]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),kEr=nht.extend({type:_.literal("resource_link")}),iht=_.union([V_e,z_e,Y_e,kEr,REr]),PEr=_.object({role:_.enum(["user","assistant"]),content:iht}).passthrough(),DEr=qh.extend({description:_.optional(_.string()),messages:_.array(PEr)}),BEr=I1.extend({method:_.literal("notifications/prompts/list_changed")}),NEr=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),LEr=RU.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(NEr),_meta:_.optional(_.object({}).passthrough())}),MEr=bse.extend({method:_.literal("tools/list")}),FEr=Ise.extend({tools:_.array(LEr)}),oht=qh.extend({content:_.array(iht).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),ECo=oht.or(qh.extend({toolResult:_.unknown()})),OEr=B0.extend({method:_.literal("tools/call"),params:Uh.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),QEr=I1.extend({method:_.literal("notifications/tools/list_changed")}),sht=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),UEr=B0.extend({method:_.literal("logging/setLevel"),params:Uh.extend({level:sht})}),qEr=I1.extend({method:_.literal("notifications/message"),params:_U.extend({level:sht,logger:_.optional(_.string()),data:_.unknown()})}),HEr=_.object({name:_.string().optional()}).passthrough(),WEr=_.object({hints:_.optional(_.array(HEr)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),$Er=_.object({role:_.enum(["user","assistant"]),content:_.union([V_e,z_e,Y_e])}).passthrough(),jEr=B0.extend({method:_.literal("sampling/createMessage"),params:Uh.extend({messages:_.array($Er),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(WEr)})}),GEr=qh.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[V_e,z_e,Y_e])}),VEr=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),zEr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),YEr=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),KEr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),JEr=_.union([VEr,zEr,YEr,KEr]),XEr=B0.extend({method:_.literal("elicitation/create"),params:Uh.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),JEr),required:_.optional(_.array(_.string()))}).passthrough()})}),ZEr=qh.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),exr=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var txr=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),rxr=B0.extend({method:_.literal("completion/complete"),params:Uh.extend({ref:_.union([txr,exr]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),nxr=qh.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),ixr=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),oxr=B0.extend({method:_.literal("roots/list")}),sxr=qh.extend({roots:_.array(ixr)}),axr=I1.extend({method:_.literal("notifications/roots/list_changed")}),xCo=_.union([Xmt,cEr,rxr,UEr,_Er,wEr,mEr,gEr,yEr,EEr,xEr,OEr,MEr]),bCo=_.union([Kmt,Zmt,dEr,axr]),ICo=_.union([Ymt,GEr,ZEr,sxr]),TCo=_.union([Xmt,jEr,XEr,oxr]),wCo=_.union([Kmt,Zmt,qEr,bEr,vEr,QEr,BEr]),SCo=_.union([Ymt,uEr,nxr,DEr,SEr,hEr,AEr,CEr,oht,FEr]);f();async function Zk(t,e,r,n,i){return await t.get(yn).fetch(new URL(e).href,{method:r,headers:n,body:i})}s(Zk,"fetchOauthServer");async function K_e(t){try{return await t.text()}catch{return t.statusText}}s(K_e,"getErrText");f();var aht="/.well-known",J_e=`${aht}/oauth-protected-resource`,cht=`${aht}/oauth-authorization-server`;function lht(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}s(lht,"isAuthorizationProtectedResourceMetadata");function uht(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}s(uht,"isAuthorizationServerMetadata");function dht(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(o=>{let[a,c]=o.split("=").map(l=>l.trim().replace(/"/g,""));n[a]=c}),{scheme:r,params:n}}s(dht,"parseWWWAuthenticateHeader");function fht(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}s(fht,"getMetadataWithDefaultValues");function pht(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}s(pht,"getDefaultMetadataForUrl");function mht(t){let e=new URL(t);if(!e.pathname.startsWith(J_e))throw new Error(`Invalid discovery URL: expected path to start with ${J_e}`);let r=e.pathname.substring(J_e.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}s(mht,"getResourceServerBaseUrlFromDiscoveryUrl");var X_e=class{static{s(this,"AuthMetadata")}},Tse=class extends X_e{static{s(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),i,o,a,c=await this.getResourceMetadata(n,{url:e,headers:r??{}});c.resource&&(i=c.authorization_servers?.[0],o=c.scopes_supported,a=c);let l=new URL(e).origin,u={};i||(i=l,u=r??{});let d;try{let m=await this.getAuthorizationServerMetadata(i,u),h=fht(m);return d={authorizationServer:i,serverMetadata:h,resourceMetadata:a},Mi.info(this.ctx,"authMetadata",d),d}catch(m){Mi.warn(this.ctx,`Error populating auth metadata: ${String(m)}`)}let p=pht(new URL(l));return p.scopes_supported=o??p.scopes_supported??[],d={authorizationServer:i,serverMetadata:p,resourceMetadata:a},d}async getResourceMetadataChallenge(e){let r=await Zk(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let i=r.headers.get("WWW-Authenticate"),{scheme:o,params:a}=dht(i);o==="Bearer"&&a.resource_metadata&&(n=a.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),i=new URL(r.url),o={};n.origin===i.origin&&(o=r.headers);let a=await Zk(this.ctx,e,"GET",{...o,Accept:"application/json","MCP-Protocol-Version":vse});if(a.status!==200)throw new Error(`Failed to fetch resource metadata: ${a.status} ${await K_e(a)}`);let c=await a.json();if(lht(c)){let l=mht(e);if(c.resource!==l)throw new Error(`Protected Resource Metadata resource "${c.resource}" does not match MCP server resolved resource "${l}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return c}else throw new Error(`Invalid resource metadata: ${JSON.stringify(c)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),i=n.pathname==="/"?"":n.pathname,o=new URL(cht,e).toString()+i,a=await Zk(this.ctx,o,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":vse});if(a.status!==200&&(a=await Zk(this.ctx,Mo(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":vse}),a.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${a.status} ${await K_e(a)}`);let c=await a.json();if(uht(c))return c;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(c)}`)}};f();f();f();var Z_e=/[^a-z0-9_-]/gi;var cxr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function hht(){let t={};for(let e of cxr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(hht,"getDefaultEnvironment");async function ght(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Mi.warn(t,n),await Mk(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(Z_e.lastIndex=0,Z_e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Mi.warn(t,n),await Mk(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(Z_e,"_")}else e._nameForModel=e.name;return e}s(ght,"normalizeTool");var wse=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};f();f();f();var T8="2025-06-18";var Aht=[T8,"2025-03-26","2024-11-05","2024-10-07"],Sse="2.0",yht=_.union([_.string(),_.number().int()]),Cht=_.string(),lxr=_.object({progressToken:_.optional(yht)}).passthrough(),$h=_.object({_meta:_.optional(lxr)}).passthrough(),N0=_.object({method:_.string(),params:_.optional($h)}),kU=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),T1=_.object({method:_.string(),params:_.optional(kU)}),jh=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),_se=_.union([_.string(),_.number().int()]),vht=_.object({jsonrpc:_.literal(Sse),id:_se}).merge(N0).strict(),Rse=s(t=>vht.safeParse(t).success,"isJSONRPCRequest"),Eht=_.object({jsonrpc:_.literal(Sse)}).merge(T1).strict(),xht=s(t=>Eht.safeParse(t).success,"isJSONRPCNotification"),bht=_.object({jsonrpc:_.literal(Sse),id:_se,result:jh}).strict(),PU=s(t=>bht.safeParse(t).success,"isJSONRPCResponse"),Hh;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Hh||(Hh={}));var Iht=_.object({jsonrpc:_.literal(Sse),id:_se,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict(),Tht=s(t=>Iht.safeParse(t).success,"isJSONRPCError"),$w=_.union([vht,Eht,bht,Iht]),e5=jh.strict(),kse=T1.extend({method:_.literal("notifications/cancelled"),params:kU.extend({requestId:_se,reason:_.string().optional()})}),DU=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),wht=DU.extend({version:_.string()}),uxr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),dxr=N0.extend({method:_.literal("initialize"),params:$h.extend({protocolVersion:_.string(),capabilities:uxr,clientInfo:wht})});var fxr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),e2e=jh.extend({protocolVersion:_.string(),capabilities:fxr,serverInfo:wht,instructions:_.optional(_.string())}),Sht=T1.extend({method:_.literal("notifications/initialized")}),_ht=s(t=>Sht.safeParse(t).success,"isInitializedNotification"),Pse=N0.extend({method:_.literal("ping")}),pxr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),Dse=T1.extend({method:_.literal("notifications/progress"),params:kU.merge(pxr).extend({progressToken:yht})}),Bse=N0.extend({params:$h.extend({cursor:_.optional(Cht)}).optional()}),Nse=jh.extend({nextCursor:_.optional(Cht)}),Rht=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),kht=Rht.extend({text:_.string()}),t2e=_.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),Pht=Rht.extend({blob:t2e}),Dht=DU.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),mxr=DU.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),hxr=Bse.extend({method:_.literal("resources/list")}),r2e=Nse.extend({resources:_.array(Dht)}),gxr=Bse.extend({method:_.literal("resources/templates/list")}),n2e=Nse.extend({resourceTemplates:_.array(mxr)}),Axr=N0.extend({method:_.literal("resources/read"),params:$h.extend({uri:_.string()})}),i2e=jh.extend({contents:_.array(_.union([kht,Pht]))}),yxr=T1.extend({method:_.literal("notifications/resources/list_changed")}),Cxr=N0.extend({method:_.literal("resources/subscribe"),params:$h.extend({uri:_.string()})}),vxr=N0.extend({method:_.literal("resources/unsubscribe"),params:$h.extend({uri:_.string()})}),Exr=T1.extend({method:_.literal("notifications/resources/updated"),params:kU.extend({uri:_.string()})}),xxr=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),bxr=DU.extend({description:_.optional(_.string()),arguments:_.optional(_.array(xxr)),_meta:_.optional(_.object({}).passthrough())}),Ixr=Bse.extend({method:_.literal("prompts/list")}),o2e=Nse.extend({prompts:_.array(bxr)}),Txr=N0.extend({method:_.literal("prompts/get"),params:$h.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),s2e=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),a2e=_.object({type:_.literal("image"),data:t2e,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),c2e=_.object({type:_.literal("audio"),data:t2e,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),wxr=_.object({type:_.literal("resource"),resource:_.union([kht,Pht]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Sxr=Dht.extend({type:_.literal("resource_link")}),Bht=_.union([s2e,a2e,c2e,Sxr,wxr]),_xr=_.object({role:_.enum(["user","assistant"]),content:Bht}).passthrough(),l2e=jh.extend({description:_.optional(_.string()),messages:_.array(_xr)}),BU=T1.extend({method:_.literal("notifications/prompts/list_changed")}),Rxr=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),kxr=DU.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(Rxr),_meta:_.optional(_.object({}).passthrough())}),Pxr=Bse.extend({method:_.literal("tools/list")}),u2e=Nse.extend({tools:_.array(kxr)}),Lse=jh.extend({content:_.array(Bht).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),e1o=Lse.or(jh.extend({toolResult:_.unknown()})),Dxr=N0.extend({method:_.literal("tools/call"),params:$h.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),NU=T1.extend({method:_.literal("notifications/tools/list_changed")}),Nht=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Bxr=N0.extend({method:_.literal("logging/setLevel"),params:$h.extend({level:Nht})}),d2e=T1.extend({method:_.literal("notifications/message"),params:kU.extend({level:Nht,logger:_.optional(_.string()),data:_.unknown()})}),Nxr=_.object({name:_.string().optional()}).passthrough(),Lxr=_.object({hints:_.optional(_.array(Nxr)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),Mxr=_.object({role:_.enum(["user","assistant"]),content:_.union([s2e,a2e,c2e])}).passthrough(),Fxr=N0.extend({method:_.literal("sampling/createMessage"),params:$h.extend({messages:_.array(Mxr),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(Lxr)})}),Oxr=jh.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[s2e,a2e,c2e])}),Qxr=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),Uxr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),qxr=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),Hxr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),Wxr=_.union([Qxr,Uxr,qxr,Hxr]),$xr=N0.extend({method:_.literal("elicitation/create"),params:$h.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),Wxr),required:_.optional(_.array(_.string()))}).passthrough()})}),jxr=jh.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),Gxr=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var Vxr=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),zxr=N0.extend({method:_.literal("completion/complete"),params:$h.extend({ref:_.union([Vxr,Gxr]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),f2e=jh.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),Yxr=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Kxr=N0.extend({method:_.literal("roots/list")}),Jxr=jh.extend({roots:_.array(Yxr)}),Xxr=T1.extend({method:_.literal("notifications/roots/list_changed")}),t1o=_.union([Pse,dxr,zxr,Bxr,Txr,Ixr,hxr,gxr,Axr,Cxr,vxr,Dxr,Pxr]),r1o=_.union([kse,Dse,Sht,Xxr]),n1o=_.union([e5,Oxr,jxr,Jxr]),i1o=_.union([Pse,Fxr,$xr,Kxr]),o1o=_.union([kse,Dse,d2e,Exr,yxr,NU,BU]),s1o=_.union([e5,e2e,f2e,l2e,o2e,r2e,n2e,i2e,Lse,u2e]),Wh=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var Zxr=6e4,Mse=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(kse,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(Dse,r=>{this._onprogress(r)}),this.setRequestHandler(Pse,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Wh(Hh.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,i;this._transport=e;let o=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let a=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=l=>{a?.(l),this._onerror(l)};let c=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,u)=>{c?.(l,u),PU(l)||Tht(l)?this._onresponse(l):Rse(l)?this._onrequest(l,u):xht(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new Wh(Hh.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Hh.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>c(e,u)).then(d=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Hh.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),PU(e))n(e);else{let i=new Wh(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,d,p,m,h,g;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=n?.signal)===null||d===void 0||d.throwIfAborted();let A=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:A};n?.onprogress&&(this._progressHandlers.set(A,n.onprogress),y.params={...e.params,_meta:{...((p=e.params)===null||p===void 0?void 0:p._meta)||{},progressToken:A}});let E=s(R=>{var D;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(D=this._transport)===null||D===void 0||D.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(R)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(N=>this._onerror(new Error(`Failed to send cancellation: ${N}`))),l(R)},"cancel");this._responseHandlers.set(A,R=>{var D;if(!(!((D=n?.signal)===null||D===void 0)&&D.aborted)){if(R instanceof Error)return l(R);try{let N=r.parse(R.result);c(N)}catch(N){l(N)}}}),(m=n?.signal)===null||m===void 0||m.addEventListener("abort",()=>{var R;E((R=n?.signal)===null||R===void 0?void 0:R.reason)});let b=(h=n?.timeout)!==null&&h!==void 0?h:Zxr,w=s(()=>E(new Wh(Hh.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(A,b,n?.maxTotalTimeout,w,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(R=>{this._cleanupTimeout(A),l(R)})})}async notification(e,r){var n,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((i=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(d=>this._onerror(d))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Lht(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(Lht,"mergeCapabilities");var FAt=Fe(MAt(),1);var tae=class extends Mse{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new FAt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Lht(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:T8,capabilities:this._capabilities,clientInfo:this._clientInfo}},e2e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!Aht.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},e5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},f2e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},e5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},l2e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},o2e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},r2e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},n2e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},i2e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},e5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},e5,r)}async callTool(e,r=Lse,n){let i=await this.request({method:"tools/call",params:e},r,n),o=this.getToolOutputValidator(e.name);if(o){if(!i.structuredContent&&!i.isError)throw new Wh(Hh.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(i.structuredContent)try{if(!o(i.structuredContent))throw new Wh(Hh.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(o.errors)}`)}catch(a){throw a instanceof Wh?a:new Wh(Hh.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return i}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},u2e,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var OAt=Fe(require("events"));var zw=class{constructor(e,r,n){this.transport=null;this.emitter=new OAt.default;this.ctx=e,this.mcp=new tae({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Mi.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Mi.error(this.ctx,"Connection failed:",r),await E1(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await ght(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;Ju(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new ho([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Mi.error(this.ctx,o),await E1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Li(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Mi.error(this.ctx,o),await E1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Li(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Mi.error(this.ctx,o),await E1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Li(o))}return n}addListeners(){this.mcp.onclose=()=>{Mi.info(this.ctx,`MCP server ${this.name} connection closed.`),Ju(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Mi.error(this.ctx,`MCP server ${this.name} error:`,e),E1(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(d2e,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Mi.info(this.ctx,`MCP server ${this.name} log:`,r),Ju(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":Mi.warn(this.ctx,`MCP server ${this.name} log:`,r),Mk(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Mi.error(this.ctx,`MCP server ${this.name} log:`,r),E1(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:Mi.info(this.ctx,`MCP server ${this.name} log:`,r),Ju(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new ho([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Li(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new hk({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();function DIr(t){return s(async(r,n)=>{let i=r instanceof URL?r.toString():r,o;if(n?.headers)if(n.headers instanceof Headers){o={};for(let[d,p]of n.headers.entries())o[d]=p}else if(Array.isArray(n.headers)){o={};for(let[d,p]of n.headers)o[d]=p}else o=n.headers;let a={method:n?.method||"GET",headers:o,body:n?.body,signal:n?.signal||void 0},c=await t.fetch(i,a),l=c.body(),u=null;if(l)u=new ReadableStream({start(d){let p=s(A=>{d.enqueue(new Uint8Array(A))},"onData"),m=s(()=>{d.close(),g()},"onEnd"),h=s(A=>{d.error(A),g()},"onError"),g=s(()=>{l.off("data",p),l.off("end",m),l.off("error",h)},"cleanup");l.on("data",p),l.on("end",m),l.on("error",h)},cancel(){l&&"destroy"in l&&typeof l.destroy=="function"&&l.destroy()}});else{let d=await c.text();u=new ReadableStream({start(p){p.enqueue(new TextEncoder().encode(d)),p.close()}})}return new globalThis.Response(u,{status:c.status,statusText:c.statusText,headers:new Headers(c.headers)})},"fetchLike")}s(DIr,"createFetchAdapter");function rae(t,e){let r=t.get(yn),n=DIr(r);return{...e,fetch:n}}s(rae,"createConfigWithFetch");f();f();f();var nae=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function F2e(t){}s(F2e,"noop");function iae(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=F2e,onError:r=F2e,onRetry:n=F2e,onComment:i}=t,o="",a=!0,c,l="",u="";function d(A){let y=a?A.replace(/^\xEF\xBB\xBF/,""):A,[E,b]=BIr(`${o}${y}`);for(let w of E)p(w);o=b,a=!1}s(d,"feed");function p(A){if(A===""){h();return}if(A.startsWith(":")){i&&i(A.slice(A.startsWith(": ")?2:1));return}let y=A.indexOf(":");if(y!==-1){let E=A.slice(0,y),b=A[y+1]===" "?2:1,w=A.slice(y+b);m(E,w,A);return}m(A,"",A)}s(p,"parseLine");function m(A,y,E){switch(A){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":c=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new nae(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:E}));break;default:r(new nae(`Unknown field "${A.length>20?`${A.slice(0,20)}\u2026`:A}"`,{type:"unknown-field",field:A,value:y,line:E}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(A={}){o&&A.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(iae,"createParser");function BIr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(BIr,"splitLines");var sae=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(QAt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(QAt(this),r)}};function NIr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(NIr,"syntaxError");function O2e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(O2e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${O2e(t.cause)}`:t.message:`${t}`}s(O2e,"flattenError");function QAt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(QAt,"inspectableError");var qAt=s(t=>{throw TypeError(t)},"__typeError"),G2e=s((t,e,r)=>e.has(t)||qAt("Cannot "+r),"__accessCheck"),Ki=s((t,e,r)=>(G2e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Bl=s((t,e,r)=>e.has(t)?qAt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),wa=s((t,e,r,n)=>(G2e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),dx=s((t,e,r)=>(G2e(t,e,"access private method"),r),"__privateMethod"),L0,n5,w8,oae,aae,OU,R8,QU,Yw,S8,k8,_8,MU,GA,Q2e,U2e,q2e,UAt,H2e,W2e,FU,$2e,j2e,i5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),Bl(this,GA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Bl(this,L0),Bl(this,n5),Bl(this,w8),Bl(this,oae),Bl(this,aae),Bl(this,OU),Bl(this,R8),Bl(this,QU,null),Bl(this,Yw),Bl(this,S8),Bl(this,k8,null),Bl(this,_8,null),Bl(this,MU,null),Bl(this,U2e,async o=>{var a;Ki(this,S8).reset();let{body:c,redirected:l,status:u,headers:d}=o;if(u===204){dx(this,GA,FU).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?wa(this,w8,new URL(o.url)):wa(this,w8,void 0),u!==200){dx(this,GA,FU).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){dx(this,GA,FU).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Ki(this,L0)===this.CLOSED)return;wa(this,L0,this.OPEN);let p=new Event("open");if((a=Ki(this,MU))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){dx(this,GA,FU).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:A,value:y}=await h.read();y&&Ki(this,S8).feed(m.decode(y,{stream:!A})),A&&(g=!1,Ki(this,S8).reset(),dx(this,GA,$2e).call(this))}while(g)}),Bl(this,q2e,o=>{wa(this,Yw,void 0),!(o.name==="AbortError"||o.type==="aborted")&&dx(this,GA,$2e).call(this,O2e(o))}),Bl(this,H2e,o=>{typeof o.id=="string"&&wa(this,QU,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Ki(this,w8)?Ki(this,w8).origin:Ki(this,n5).origin,lastEventId:o.id||""});Ki(this,_8)&&(!o.event||o.event==="message")&&Ki(this,_8).call(this,a),this.dispatchEvent(a)}),Bl(this,W2e,o=>{wa(this,OU,o)}),Bl(this,j2e,()=>{wa(this,R8,void 0),Ki(this,L0)===this.CONNECTING&&dx(this,GA,Q2e).call(this)});try{if(e instanceof URL)wa(this,n5,e);else if(typeof e=="string")wa(this,n5,new URL(e,LIr()));else throw new Error("Invalid URL")}catch{throw NIr("An invalid or illegal string was specified")}wa(this,S8,iae({onEvent:Ki(this,H2e),onRetry:Ki(this,W2e)})),wa(this,L0,this.CONNECTING),wa(this,OU,3e3),wa(this,aae,(n=r?.fetch)!=null?n:globalThis.fetch),wa(this,oae,(i=r?.withCredentials)!=null?i:!1),dx(this,GA,Q2e).call(this)}get readyState(){return Ki(this,L0)}get url(){return Ki(this,n5).href}get withCredentials(){return Ki(this,oae)}get onerror(){return Ki(this,k8)}set onerror(e){wa(this,k8,e)}get onmessage(){return Ki(this,_8)}set onmessage(e){wa(this,_8,e)}get onopen(){return Ki(this,MU)}set onopen(e){wa(this,MU,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Ki(this,R8)&&clearTimeout(Ki(this,R8)),Ki(this,L0)!==this.CLOSED&&(Ki(this,Yw)&&Ki(this,Yw).abort(),wa(this,L0,this.CLOSED),wa(this,Yw,void 0))}};L0=new WeakMap,n5=new WeakMap,w8=new WeakMap,oae=new WeakMap,aae=new WeakMap,OU=new WeakMap,R8=new WeakMap,QU=new WeakMap,Yw=new WeakMap,S8=new WeakMap,k8=new WeakMap,_8=new WeakMap,MU=new WeakMap,GA=new WeakSet,Q2e=s(function(){wa(this,L0,this.CONNECTING),wa(this,Yw,new AbortController),Ki(this,aae)(Ki(this,n5),dx(this,GA,UAt).call(this)).then(Ki(this,U2e)).catch(Ki(this,q2e))},"connect_fn"),U2e=new WeakMap,q2e=new WeakMap,UAt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Ki(this,QU)?{"Last-Event-ID":Ki(this,QU)}:void 0},cache:"no-store",signal:(t=Ki(this,Yw))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),H2e=new WeakMap,W2e=new WeakMap,FU=s(function(t,e){var r;Ki(this,L0)!==this.CLOSED&&wa(this,L0,this.CLOSED);let n=new sae("error",{code:e,message:t});(r=Ki(this,k8))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),$2e=s(function(t,e){var r;if(Ki(this,L0)===this.CLOSED)return;wa(this,L0,this.CONNECTING);let n=new sae("error",{code:e,message:t});(r=Ki(this,k8))==null||r.call(this,n),this.dispatchEvent(n),wa(this,R8,setTimeout(Ki(this,j2e),Ki(this,OU)))},"scheduleReconnect_fn"),j2e=new WeakMap,i5.CONNECTING=0,i5.OPEN=1,i5.CLOSED=2;function LIr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(LIr,"getBaseURL");f();f();var V2e;V2e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function MIr(t){return(await V2e).getRandomValues(new Uint8Array(t))}s(MIr,"getRandomValues");async function FIr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await MIr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(FIr,"random");async function OIr(t){return await FIr(t)}s(OIr,"generateVerifier");async function QIr(t){let e=await(await V2e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(QIr,"generateChallenge");async function z2e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await OIr(t),r=await QIr(e);return{code_verifier:e,code_challenge:r}}s(z2e,"pkceChallenge");f();var HAt=_.object({resource:_.string().url(),authorization_servers:_.array(_.string().url()).optional(),jwks_uri:_.string().url().optional(),scopes_supported:_.array(_.string()).optional(),bearer_methods_supported:_.array(_.string()).optional(),resource_signing_alg_values_supported:_.array(_.string()).optional(),resource_name:_.string().optional(),resource_documentation:_.string().optional(),resource_policy_uri:_.string().url().optional(),resource_tos_uri:_.string().url().optional(),tls_client_certificate_bound_access_tokens:_.boolean().optional(),authorization_details_types_supported:_.array(_.string()).optional(),dpop_signing_alg_values_supported:_.array(_.string()).optional(),dpop_bound_access_tokens_required:_.boolean().optional()}).passthrough(),Y2e=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),revocation_endpoint:_.string().optional(),revocation_endpoint_auth_methods_supported:_.array(_.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),introspection_endpoint:_.string().optional(),introspection_endpoint_auth_methods_supported:_.array(_.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),code_challenge_methods_supported:_.array(_.string()).optional()}).passthrough(),UIr=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),userinfo_endpoint:_.string().optional(),jwks_uri:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),acr_values_supported:_.array(_.string()).optional(),subject_types_supported:_.array(_.string()),id_token_signing_alg_values_supported:_.array(_.string()),id_token_encryption_alg_values_supported:_.array(_.string()).optional(),id_token_encryption_enc_values_supported:_.array(_.string()).optional(),userinfo_signing_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_enc_values_supported:_.array(_.string()).optional(),request_object_signing_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_enc_values_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),display_values_supported:_.array(_.string()).optional(),claim_types_supported:_.array(_.string()).optional(),claims_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),claims_locales_supported:_.array(_.string()).optional(),ui_locales_supported:_.array(_.string()).optional(),claims_parameter_supported:_.boolean().optional(),request_parameter_supported:_.boolean().optional(),request_uri_parameter_supported:_.boolean().optional(),require_request_uri_registration:_.boolean().optional(),op_policy_uri:_.string().optional(),op_tos_uri:_.string().optional()}).passthrough(),WAt=UIr.merge(Y2e.pick({code_challenge_methods_supported:!0})),K2e=_.object({access_token:_.string(),id_token:_.string().optional(),token_type:_.string(),expires_in:_.number().optional(),scope:_.string().optional(),refresh_token:_.string().optional()}).strip(),$At=_.object({error:_.string(),error_description:_.string().optional(),error_uri:_.string().optional()}),qIr=_.object({redirect_uris:_.array(_.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:_.string().optional(),grant_types:_.array(_.string()).optional(),response_types:_.array(_.string()).optional(),client_name:_.string().optional(),client_uri:_.string().optional(),logo_uri:_.string().optional(),scope:_.string().optional(),contacts:_.array(_.string()).optional(),tos_uri:_.string().optional(),policy_uri:_.string().optional(),jwks_uri:_.string().optional(),jwks:_.any().optional(),software_id:_.string().optional(),software_version:_.string().optional(),software_statement:_.string().optional()}).strip(),HIr=_.object({client_id:_.string(),client_secret:_.string().optional(),client_id_issued_at:_.number().optional(),client_secret_expires_at:_.number().optional()}).strip(),jAt=qIr.merge(HIr),gxo=_.object({error:_.string(),error_description:_.string().optional()}).strip(),Axo=_.object({token:_.string(),token_type_hint:_.string().optional()}).strip();f();function GAt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}s(GAt,"resourceUrlFromServerUrl");function VAt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return i.startsWith(o)}s(VAt,"checkResourceAllowed");f();var cl=class extends Error{static{s(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},UU=class extends cl{static{s(this,"InvalidRequestError")}};UU.errorCode="invalid_request";var o5=class extends cl{static{s(this,"InvalidClientError")}};o5.errorCode="invalid_client";var s5=class extends cl{static{s(this,"InvalidGrantError")}};s5.errorCode="invalid_grant";var a5=class extends cl{static{s(this,"UnauthorizedClientError")}};a5.errorCode="unauthorized_client";var qU=class extends cl{static{s(this,"UnsupportedGrantTypeError")}};qU.errorCode="unsupported_grant_type";var HU=class extends cl{static{s(this,"InvalidScopeError")}};HU.errorCode="invalid_scope";var WU=class extends cl{static{s(this,"AccessDeniedError")}};WU.errorCode="access_denied";var fx=class extends cl{static{s(this,"ServerError")}};fx.errorCode="server_error";var $U=class extends cl{static{s(this,"TemporarilyUnavailableError")}};$U.errorCode="temporarily_unavailable";var jU=class extends cl{static{s(this,"UnsupportedResponseTypeError")}};jU.errorCode="unsupported_response_type";var GU=class extends cl{static{s(this,"UnsupportedTokenTypeError")}};GU.errorCode="unsupported_token_type";var VU=class extends cl{static{s(this,"InvalidTokenError")}};VU.errorCode="invalid_token";var zU=class extends cl{static{s(this,"MethodNotAllowedError")}};zU.errorCode="method_not_allowed";var YU=class extends cl{static{s(this,"TooManyRequestsError")}};YU.errorCode="too_many_requests";var KU=class extends cl{static{s(this,"InvalidClientMetadataError")}};KU.errorCode="invalid_client_metadata";var JU=class extends cl{static{s(this,"InsufficientScopeError")}};JU.errorCode="insufficient_scope";var zAt={[UU.errorCode]:UU,[o5.errorCode]:o5,[s5.errorCode]:s5,[a5.errorCode]:a5,[qU.errorCode]:qU,[HU.errorCode]:HU,[WU.errorCode]:WU,[fx.errorCode]:fx,[$U.errorCode]:$U,[jU.errorCode]:jU,[GU.errorCode]:GU,[VU.errorCode]:VU,[zU.errorCode]:zU,[YU.errorCode]:YU,[KU.errorCode]:KU,[JU.errorCode]:JU};var M0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function KAt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}s(KAt,"selectClientAuthMethod");function JAt(t,e,r,n){let{client_id:i,client_secret:o}=e;switch(t){case"client_secret_basic":WIr(i,o,r);return;case"client_secret_post":$Ir(i,o,n);return;case"none":jIr(i,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}s(JAt,"applyClientAuthentication");function WIr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}s(WIr,"applyBasicAuth");function $Ir(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}s($Ir,"applyPostAuth");function jIr(t,e){e.set("client_id",t)}s(jIr,"applyPublicAuth");async function X2e(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=$At.parse(JSON.parse(r)),{error:i,error_description:o,error_uri:a}=n,c=zAt[i]||fx;return new c(o||"",a)}catch(n){let i=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new fx(i)}}s(X2e,"parseErrorResponse");async function Kw(t,e){var r,n;try{return await J2e(t,e)}catch(i){if(i instanceof o5||i instanceof a5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await J2e(t,e);if(i instanceof s5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await J2e(t,e);throw i}}s(Kw,"auth");async function J2e(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:i,fetchFn:o}){let a,c;try{a=await VIr(e,{resourceMetadataUrl:i},o),a.authorization_servers&&a.authorization_servers.length>0&&(c=a.authorization_servers[0])}catch{}c||(c=e);let l=await GIr(e,t,a),u=await XIr(c,{fetchFn:o}),d=await Promise.resolve(t.clientInformation());if(!d){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let A=await rTr(c,{metadata:u,clientMetadata:t.clientMetadata});await t.saveClientInformation(A),d=A}if(r!==void 0){let A=await t.codeVerifier(),y=await eTr(c,{metadata:u,clientInformation:d,authorizationCode:r,codeVerifier:A,redirectUri:t.redirectUrl,resource:l,addClientAuthentication:t.addClientAuthentication,fetchFn:o});return await t.saveTokens(y),"AUTHORIZED"}let p=await t.tokens();if(p?.refresh_token)try{let A=await tTr(c,{metadata:u,clientInformation:d,refreshToken:p.refresh_token,resource:l,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof cl)||A instanceof fx))throw A}let m=t.state?await t.state():void 0,{authorizationUrl:h,codeVerifier:g}=await ZIr(c,{metadata:u,clientInformation:d,state:m,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:l});return await t.saveCodeVerifier(g),await t.redirectToAuthorization(h),"REDIRECT"}s(J2e,"authInternal");async function GIr(t,e,r){let n=GAt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!VAt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}s(GIr,"selectResourceURL");function XU(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}s(XU,"extractResourceMetadataUrl");async function VIr(t,e,r=fetch){let n=await KIr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return HAt.parse(await n.json())}s(VIr,"discoverOAuthProtectedResourceMetadata");async function Z2e(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?Z2e(t,void 0,r):void 0;throw n}}s(Z2e,"fetchWithCorsRetry");function zIr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}s(zIr,"buildWellKnownPath");async function YAt(t,e,r=fetch){return await Z2e(t,{"MCP-Protocol-Version":e},r)}s(YAt,"tryMetadataDiscovery");function YIr(t,e){return!t||t.status===404&&e!=="/"}s(YIr,"shouldAttemptFallback");async function KIr(t,e,r,n){var i,o;let a=new URL(t),c=(i=n?.protocolVersion)!==null&&i!==void 0?i:T8,l;if(n?.metadataUrl)l=new URL(n.metadataUrl);else{let d=zIr(e,a.pathname);l=new URL(d,(o=n?.metadataServerUrl)!==null&&o!==void 0?o:a),l.search=a.search}let u=await YAt(l,c,r);if(!n?.metadataUrl&&YIr(u,a.pathname)){let d=new URL(`/.well-known/${e}`,a);u=await YAt(d,c,r)}return u}s(KIr,"discoverMetadataWithFallback");function JIr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let i=e.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${i}`,e.origin),type:"oidc"}),n.push({url:new URL(`${i}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}s(JIr,"buildDiscoveryUrls");async function XIr(t,{fetchFn:e=fetch,protocolVersion:r=T8}={}){var n;let i={"MCP-Protocol-Version":r},o=JIr(t);for(let{url:a,type:c}of o){let l=await Z2e(a,i,e);if(!l)throw new Error(`CORS error trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`);if(!l.ok){if(l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`)}if(c==="oauth")return Y2e.parse(await l.json());{let u=WAt.parse(await l.json());if(!(!((n=u.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${a}: does not support S256 code challenge method required by MCP specification`);return u}}}s(XIr,"discoverAuthorizationServerMetadata");async function ZIr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:i,state:o,resource:a}){let c="code",l="S256",u;if(e){if(u=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else u=new URL("/authorize",t);let d=await z2e(),p=d.code_verifier,m=d.code_challenge;return u.searchParams.set("response_type",c),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",m),u.searchParams.set("code_challenge_method",l),u.searchParams.set("redirect_uri",String(n)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),a&&u.searchParams.set("resource",a.href),{authorizationUrl:u,codeVerifier:p}}s(ZIr,"startAuthorization");async function eTr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o,resource:a,addClientAuthentication:c,fetchFn:l}){var u;let d="authorization_code",p=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support grant type ${d}`);let m=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),h=new URLSearchParams({grant_type:d,code:n,code_verifier:i,redirect_uri:String(o)});if(c)c(m,h,t,e);else{let A=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=KAt(r,A);JAt(y,r,m,h)}a&&h.set("resource",a.href);let g=await(l??fetch)(p,{method:"POST",headers:m,body:h});if(!g.ok)throw await X2e(g);return K2e.parse(await g.json())}s(eTr,"exchangeAuthorization");async function tTr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:i,addClientAuthentication:o,fetchFn:a}){var c;let l="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support grant type ${l}`)}else u=new URL("/token",t);let d=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:l,refresh_token:n});if(o)o(d,p,t,e);else{let h=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],g=KAt(r,h);JAt(g,r,d,p)}i&&p.set("resource",i.href);let m=await(a??fetch)(u,{method:"POST",headers:d,body:p});if(!m.ok)throw await X2e(m);return K2e.parse({refresh_token:n,...await m.json()})}s(tTr,"refreshAuthorization");async function rTr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let i;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");i=new URL(e.registration_endpoint)}else i=new URL("/register",t);let o=await(n??fetch)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw await X2e(o);return jAt.parse(await o.json())}s(rTr,"registerClient");var eRe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},cae=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new M0("No auth provider");let r;try{r=await Kw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new M0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let i=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((o,a)=>{this._eventSource=new i5(this._url.href,{...this._eventSourceInit,fetch:s(async(c,l)=>{let u=await this._commonHeaders();u.set("Accept","text/event-stream");let d=await i(c,{...l,headers:u});return d.status===401&&d.headers.has("www-authenticate")&&(this._resourceMetadataUrl=XU(d)),d},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=c=>{var l;if(c.code===401&&this._authProvider){this._authThenStart().then(o,a);return}let u=new eRe(c.code,c.message,c);a(u),(l=this.onerror)===null||l===void 0||l.call(this,u)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",c=>{var l;let u=c;try{if(this._endpoint=new URL(u.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(d){a(d),(l=this.onerror)===null||l===void 0||l.call(this,d),this.close();return}o()}),this._eventSource.onmessage=c=>{var l,u;let d=c,p;try{p=$w.parse(JSON.parse(d.data))}catch(m){(l=this.onerror)===null||l===void 0||l.call(this,m);return}(u=this.onmessage)===null||u===void 0||u.call(this,p)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new M0("No auth provider");if(await Kw(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new M0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders();o.set("content-type","application/json");let a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,a);if(!c.ok){if(c.status===401&&this._authProvider){if(this._resourceMetadataUrl=XU(c),await Kw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new M0;return this.send(e)}let l=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${l}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}};var lae=class extends zw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){let n=rae(this.ctx,r);return new cae(new URL(r.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(NU,r=>{Mi.info(this.ctx,"Tool list changed, refreshing tools..."),Ju(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(ME)}),this.mcp.setNotificationHandler(BU,r=>{Mi.info(this.ctx,"Prompts list changed, refreshing tools..."),Ju(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(ME)})}};f();f();var qyt=Fe(Qyt(),1),ZU=Fe(require("node:process"),1),Hyt=require("node:stream");f();var dae=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),RTr(r)}clear(){this._buffer=void 0}};function RTr(t){return $w.parse(JSON.parse(t))}s(RTr,"deserializeMessage");function Uyt(t){return JSON.stringify(t)+`
`}s(Uyt,"serializeMessage");var kTr=ZU.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function PTr(){let t={};for(let e of kTr){let r=ZU.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(PTr,"getDefaultEnvironment");var fae=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new dae,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new Hyt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c;this._process=(0,qyt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...PTr(),...this._serverParams.env},stdio:["pipe","pipe",(i=this._serverParams.stderr)!==null&&i!==void 0?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:ZU.default.platform==="win32"&&DTr(),cwd:this._serverParams.cwd}),this._process.on("error",l=>{var u,d;if(l.name==="AbortError"){(u=this.onclose)===null||u===void 0||u.call(this);return}r(l),(d=this.onerror)===null||d===void 0||d.call(this,l)}),this._process.on("spawn",()=>{e()}),this._process.on("close",l=>{var u;this._process=void 0,(u=this.onclose)===null||u===void 0||u.call(this)}),(o=this._process.stdin)===null||o===void 0||o.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),(a=this._process.stdout)===null||a===void 0||a.on("data",l=>{this._readBuffer.append(l),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=Uyt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function DTr(){return"type"in ZU.default}s(DTr,"isElectron");var pae=class extends zw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...hht(),...r.env||{}},r.stderr="pipe",new fae(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{Mk(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};f();f();f();var mae=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=iae({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var BTr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},eq=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},hae=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:BTr}async _authThenStart(){var e;if(!this._authProvider)throw new M0("No auth provider");let r;try{r=await Kw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new M0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let i=await this._authProvider.tokens();i&&(r.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,i;let{resumptionToken:o}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),o&&a.set("last-event-id",o);let c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:a,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!c.ok){if(c.status===401&&this._authProvider)return await this._authThenStart();if(c.status===405)return;throw new eq(c.status,`Failed to open SSE stream: ${c.statusText}`)}this._handleSseStream(c.body,e,!0)}catch(a){throw(i=this.onerror)===null||i===void 0||i.call(this,a),a}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:i,replayMessageId:o}=r,a;s(async()=>{var l,u,d,p;try{let m=e.pipeThrough(new TextDecoderStream).pipeThrough(new mae).getReader();for(;;){let{value:h,done:g}=await m.read();if(g)break;if(h.id&&(a=h.id,i?.(h.id)),!h.event||h.event==="message")try{let A=$w.parse(JSON.parse(h.data));o!==void 0&&PU(A)&&(A.id=o),(l=this.onmessage)===null||l===void 0||l.call(this,A)}catch(A){(u=this.onerror)===null||u===void 0||u.call(this,A)}}}catch(m){if((d=this.onerror)===null||d===void 0||d.call(this,new Error(`SSE stream disconnected: ${m}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:i,replayMessageId:o},0)}catch(h){(p=this.onerror)===null||p===void 0||p.call(this,new Error(`Failed to reconnect: ${h instanceof Error?h.message:String(h)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new M0("No auth provider");if(await Kw(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new M0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o,a;try{let{resumptionToken:c,onresumptiontoken:l}=r||{};if(c){this._startOrAuthSse({resumptionToken:c,replayMessageId:Rse(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let u=await this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let d={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},p=await((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,d),m=p.headers.get("mcp-session-id");if(m&&(this._sessionId=m),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=XU(p),await Kw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new M0;return this.send(e)}let y=await p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${y}`)}if(p.status===202){_ht(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let g=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,A=p.headers.get("content-type");if(g)if(A?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:l},!1);else if(A?.includes("application/json")){let y=await p.json(),E=Array.isArray(y)?y.map(b=>$w.parse(b)):[$w.parse(y)];for(let b of E)(o=this.onmessage)===null||o===void 0||o.call(this,b)}else throw new eq(-1,`Unexpected content type: ${A}`)}catch(c){throw(a=this.onerror)===null||a===void 0||a.call(this,c),c}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let i=await this._commonHeaders(),o={...this._requestInit,method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},a=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,o);if(!a.ok&&a.status!==405)throw new eq(a.status,`Failed to terminate session: ${a.statusText}`);this._sessionId=void 0}catch(i){throw(n=this.onerror)===null||n===void 0||n.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var gae=class extends zw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){let n=rae(this.ctx,r);return new hae(new URL(r.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(NU,r=>{Mi.info(this.ctx,"Tool list changed, refreshing tools..."),Ju(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(ME)}),this.mcp.setNotificationHandler(BU,r=>{Mi.info(this.ctx,"Prompts list changed, refreshing tools..."),Ju(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(ME)})}};f();var Aae=class extends bw{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new kc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(WC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Eae=Fe(Jc());f();f();$V();var B8=class extends wu{constructor(r,n=new uRe){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(kr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},uRe=class extends wu{static{s(this,"SpawnUrlOpener")}async open(e){await M6(e)}};f();var Wyt=require("crypto"),$yt=Fe(require("http"));var yae=class{constructor(e){this.nonce=(0,Wyt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((i,o)=>r={resolve:i,reject:o});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=$yt.createServer((i,o)=>{let a=new URL(i.url,`http://${i.headers.host}`);switch(a.pathname){case"/signin":{(a.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),o.writeHead(302,{location:this._startingRedirect.toString()}),o.end();break}case"/callback":{let c=a.searchParams.get("code")??void 0,l=a.searchParams.get("state")??void 0,u=new URL(l||"").searchParams.get("nonce")??void 0;if(!c||!l||!u){o.writeHead(400),o.end();return}if(this.state!==l)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),o.end(),new Error("State does not match.");if(this.nonce!==u)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end(),new Error("Nonce does not match.");r.resolve({code:c,state:l}),o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(B_e);break}default:o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(B_e)}})}static{s(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let i=this._server.address();if(typeof i=="string")this.port=parseInt(i);else if(i instanceof Object)this.port=i.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",i=>{r(new Error(`Error listening to server: ${i}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var NTr="Timed out",dRe=class{static{s(this,"CodeFlow")}},Cae=class extends dRe{static{s(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let i=Cmt(e);if(!i)return"";let{client_id:o,client_secret:a}=i,c=new URLSearchParams([["client_id",o],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),l=r.authorization_endpoint+"?"+c.toString(),u=new yae(l),d=await u.start(),p=`http://127.0.0.1:${d}/signin?nonce=${encodeURIComponent(u.nonce)}`;sn.info(this.ctx,"auth url: ",p),await new B8(this.ctx).open(p);let m;try{m=(await Promise.race([u.waitForOAuthResponse(),new Promise((A,y)=>setTimeout(()=>y(new Error(NTr)),3e5))])).code}finally{setTimeout(()=>{u.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${d}/callback`,code:m,client_id:o,client_secret:a})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:i,client_secret:o}){let a=new URLSearchParams([["code",n],["client_id",i],["redirect_uri",r],["client_secret",o]]),c=await Zk(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},a.toString());if(c.ok)return(await c.json()).access_token;{let l=await c.text(),u=new Error(l);throw u.name="GitHubTokenExchangeError",u}}};var vae=class t extends Rh{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new wse;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,ws(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(Mi.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{s(this,"CLSMCPManager")}static{this.toolsNotificationType=new Eae.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new Eae.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return Mi.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,i){if(!this.isMcpEnabled){Mi.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){Mi.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(Nd).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Mi.error(this.ctx,a),await E1(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await Ju(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new lae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new gae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new pae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(ME,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await Ju(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Mi.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Mi.info(this.ctx,c),Ju(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}else if(a&&"url"in r&&r.type!=="sse"&&a[1]==="401"){let c=await this.getAuthMetadata(r),l=await this.getToken(r.url,c.authorizationServer,c.serverMetadata,c.resourceMetadata);if(!l){Mi.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let u={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${l}`}}};return await this.addServer(u)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await E1(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(Ga).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(kr).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:d}=i;Mi.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(Nd).registerTool(new Aae({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:d},p=>(Mi.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(Nd).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await Ju(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(ME),await i.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new Tse(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,i,o){let a=await this.ctx.get(LA).getOrActivateProviderIdForServer(n);if(!a){let d=this.ctx.get(LA).createAuthenticationProvider(n);if(!d){Mi.error(this.ctx,`No authentication provider found for server: ${n}`),await Ju(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}a=d.id}let c=o?.scopes_supported||i.scopes_supported||[],l=await this.ctx.get(LA).getSessions(a,c,{authorizationServer:n},!0);if(l.length)return l[0].accessToken;let u=this.ctx.get(LA).getProvider(a);try{let{confirm:d}=await this.ctx.get(kr).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:u.label});if(!d){Mi.warn(this.ctx,"no confirmation for OAuth request");return}}catch(d){Mi.warn(this.ctx,"no confirmation for OAuth request",d);return}try{let d=await new Cae(this.ctx).auth(n,i,o),p=await u.createSession(c,d);return this.ctx.get(Ga).showWarningMessageOnlyOnce("Authentication successful",`You have already authenticated with ${u.label}.`),p.accessToken}catch(d){this.ctx.get(Ga).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${d instanceof Error?d.message:String(d)}`);return}}};f();var jyt=Fe(Jc());var xae=class t extends bA{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new jyt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(kr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var Iae=Fe(Jc());var LTr=new Iae.ProtocolRequestType("copilot/showPanelMessageRequest"),MTr=new Iae.ProtocolNotificationType("copilot/showPanelMessage"),bae=class extends dN{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(kr).connection.sendNotification(MTr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(kr).connection,i;try{i=await n.sendRequest(LTr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${Xv(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var FTr=new It("fetcher"),OTr="https://default.exp-tas.com/",Tae=class extends yn{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(hd(i)||`${r}/`.startsWith(OTr))throw i;FTr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var Gyt=new It("fetcher"),wae=class extends yn{constructor(r,n=new h8(r),i=new p8(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.updateFetcher=s(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=Wi(this.ctx,qt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(Gyt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new Tae(r,n,i,()=>{Gyt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(ps).onDidSetCapabilities(this.updateFetcher),r.get(gl).onDidChangeCopilotSettings(this.updateFetcher)}static{s(this,"AgentDelegatingFetcher")}get fetchStrategy(){return Wi(this.ctx,qt.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(ps).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var Sae=class extends Ga{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(kr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};f();f();var Vyt=Fe(require("crypto")),zyt=require("os");var QTr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function UTr(t){let e=t.replace(/-/g,":").toLowerCase();return!QTr.has(e)}s(UTr,"validateMacAddress");function qTr(){let t=(0,zyt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(UTr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(qTr,"getMac");var fRe;function HTr(){try{let t=qTr();return Vyt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(HTr,"getMacMachineId");function Yyt(){return fRe||(fRe=HTr()||gr()),fRe}s(Yyt,"getMachineId");var WTr=gr()+Date.now(),Kyt=new Ss(WTr,Yyt());f();f();var _ae=class extends mne{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(a1).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(a1);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.emitFilesDeleted(o.map(a=>({uri:a.uri})))}};var Rae=class extends Dd{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new _ae(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(ps).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function Jyt(t){let e=new Tw(process.env),r=rst(e);r.set(Tw,e),r.set(yn,new wae(r)),r.set(Ha,new Ha(r)),HSe(r,{});let n=Tqe();r.set(Bi,n);let i=new vU(r);r.set(Yr,i),r.set(vU,i);let o=new A_(r,n);r.set(A_,o),r.set(On,new On(r,process.env)),r.set(V2,new V2),r.set(Ad,new Ad(r,"agent")),r.set(Ss,Kyt),r.set(dn,new Nne),r.set(Nk,dmt()),r.set(Os,new Os),r.set(To,Bmt),r.set(lR,new Koe(r)),r.set(Dd,new Rae(r)),r.set(a1,new a1(r)),r.set(Zc,new Zc),r.set(wc,XK(r,Gft)),r.set(a0,new a0(r)),r.set(pC,new C3),ilt(r),hne(r),xlt(r),Eqe(r),r.set(kr,new kr(r,t)),r.set(Ga,new Sae(r)),r.set(dN,new bae(r)),r.set(wu,new B8(r)),r.set(Eo,new pse(r)),r.set(xU,new xU(r));let a=new Uw(r);return r.set(yr,a),r.set(Uw,a),r.set(zd,new uN(r,process.env)),r.set(Xc,new Xc(r)),wmt(r),Lst(r),r.set(xf,new xf),r.set(Fw,new Fw),r.set(qA,new qA),r.set(lf,new ese),r.set(A1,new A1),r.set(oA,new pne(r)),r.set(gC,new BN),r.set(NA,new NA(r)),r.set(LE,new LE(r)),r.set(ol,new ol(r)),r.set($u,new use(r)),r.set(XT,new fse(r)),r.set(WC,new dse(r)),r.set(Nd,new Nd(r)),r.set(jE,new jE(r)),r.set(MA,new MA(r)),r.set(Rh,new vae(r)),r.set(bA,new xae(r)),r.set(VR,new VR),r.set(LA,new Xoe(r)),r.set($C,new $C),r.set(I0,new I0),r.set(KC,new KC(r)),r.set(_h,new Hte([new gne,new Ane])),r.set(z2,new z2(r)),r}s(Jyt,"createLanguageServerContext");f();var pRe=require("events"),tq=Fe(require("fs"));$V();var Pae=Fe(Jc());f();var Zyt=Fe(require("fs")),eCt=Fe(require("http")),N8=Fe(require("path"));var kae=class{constructor(e,r){this.port=e;let n;this.server=eCt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{Xyt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{Xyt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;N8.basename(__dirname)!=="debug"&&(a=N8.dirname(__dirname)),n??=Zyt.readFileSync(N8.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function Xyt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(Xyt,"writeData");var mRe=class extends Pae.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},hRe=class extends Pae.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function tCt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new pRe.EventEmitter;let c=new kae(i,n).listen();i===0&&await M6(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=tq.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=tq.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&tq.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new pRe.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new hRe(e,n),r=new mRe(r,n)),[e,r]}s(tCt,"wrapTransports");async function iCt(){let t=n$e(process.argv.slice(2)).version(new yo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Gh.IPCMessageReader(process),n=new Gh.IPCMessageWriter(process)):e.stdio?(r=new Gh.StreamMessageReader(process.stdin),n=new Gh.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await px.mkdtemp(rCt.default.tmpdir()+"/github-copilot-"));try{let c=lge(),l=JSON.parse(await px.readFile(rq.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await px.readFile(rq.join(c,"apps.json"),"utf8"))}catch{}let d=!1;for(let p of Object.keys(l)){let m=`${p}:${np}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:np},d=!0)}d&&await px.writeFile(rq.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await px.rm(rq.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,Gh.createConnection)(Gh.ProposedFeatures.all,...await tCt(process.env,r,n)),o=Jyt(i);console=oHe(o);let a=o.get(kr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),xqe(o),a.listen()}s(iCt,"main");nCt.isMainThread?require.main===module&&iCt():nHe()&&iHe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
